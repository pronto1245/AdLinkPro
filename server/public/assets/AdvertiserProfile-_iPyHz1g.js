import{j as e}from"./ui-CkQMVfNu.js";import{r as j}from"./vendor-DazevGLP.js";import{u as $}from"./useQuery-IUx4ZSsA.js";import{c as me,d as he,r as ue,C as x,e as h,f as u,G as ee,g as m,z as w,L as i,I as o,h as B,i as Q,j as H,k as Z,l as R,B as n,n as se,p as _,A as le,D as ne,F as de,H as ce,u as Ee,J as Ae,E as Ie}from"./index-Hu68kGEe.js";import{u as g}from"./useMutation-HxEtoRum.js";import{T as te}from"./textarea-DGF4QzFC.js";import{T as Fe,a as Le,b as M,c as U}from"./tabs-BOkB6Db_.js";import{S as E}from"./switch-BurhKlWt.js";import{a as p}from"./queryClient-Cc5pa0C1.js";import{B as V}from"./badge-BPEJ7H1K.js";import{S as Me}from"./separator-Bl89TN97.js";import{D as Ue,e as Re,a as ze,b as Ve,c as qe,d as Ke}from"./dialog-CMra4o9L.js";import{R as q}from"./refresh-cw-h8d32cyt.js";import{P as We}from"./plus-CDknCoO7.js";import{C as oe}from"./clock-HOqnpwZm.js";import{Z as xe}from"./zap-CRlwIYkF.js";import{C as ae}from"./copy-Bp5yqf8a.js";import{T as je}from"./trash-2-BgkAOTI8.js";import"./utils-B-_CankM.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=me("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function Be(){const[a,d]=j.useState(""),[N,O]=j.useState("cname"),[,G]=j.useState(null),{toast:r}=he(),k=ue(),{data:A=[],isLoading:X}=$({queryKey:["/api/advertiser/profile/domains"],staleTime:3e4}),v=g({mutationFn:async t=>p("/api/advertiser/profile/domains","POST",t),onSuccess:t=>{r({title:"✅ Домен успешно добавлен",description:`Домен ${t.domain} добавлен и ожидает верификации. Перейдите к инструкциям DNS для настройки.`}),d(""),k.invalidateQueries({queryKey:["/api/advertiser/profile/domains"]})},onError:t=>{console.error("Domain add error:",t),r({title:"❌ Ошибка добавления домена",description:t?.message||"Не удалось добавить домен. Проверьте правильность ввода и попробуйте снова.",variant:"destructive"})}}),C=g({mutationFn:async t=>p(`/api/advertiser/profile/domains/${t}/verify`,"POST"),onSuccess:(t,F)=>{const y=t;y.success?r({title:"Домен верифицирован",description:"Ваш кастомный домен успешно верифицирован и активирован!"}):r({title:"Верификация не пройдена",description:y.error||"Проверьте DNS настройки и повторите попытку",variant:"destructive"}),k.invalidateQueries({queryKey:["/api/advertiser/profile/domains"]})},onError:()=>{r({title:"Ошибка верификации",description:"Произошла ошибка при проверке домена",variant:"destructive"})}}),c=g({mutationFn:async t=>p(`/api/advertiser/profile/domains/${t}/ssl`,"POST"),onSuccess:t=>{r({title:"SSL сертификат выдается",description:t.message||"SSL сертификат выдается. Проверьте статус через несколько минут."}),k.invalidateQueries({queryKey:["/api/advertiser/profile/domains"]})},onError:t=>{r({title:"Ошибка выдачи SSL",description:t.message||"Не удалось запустить выдачу SSL сертификата",variant:"destructive"})}}),S=g({mutationFn:async t=>p(`/api/advertiser/profile/domains/${t}`,"DELETE"),onSuccess:()=>{r({title:"Домен удален",description:"Кастомный домен успешно удален"}),k.invalidateQueries({queryKey:["/api/advertiser/profile/domains"]})}}),I=()=>{if(!a.trim()){r({title:"Ошибка",description:"Введите доменное имя",variant:"destructive"});return}if(!/^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?)*$/.test(a.trim())){r({title:"Ошибка",description:"Введите корректное доменное имя",variant:"destructive"});return}v.mutate({domain:a.trim(),type:N})},T=t=>{navigator.clipboard.writeText(t),r({title:"Скопировано",description:"Значение скопировано в буфер обмена"})},D=t=>{switch(t){case"verified":return e.jsx(le,{className:"h-4 w-4 text-green-600"});case"pending":return e.jsx(oe,{className:"h-4 w-4 text-yellow-600"});case"verifying":return e.jsx(q,{className:"h-4 w-4 text-blue-600 animate-spin"});case"failed":case"error":return e.jsx(_,{className:"h-4 w-4 text-red-600"});case"expired":return e.jsx(_,{className:"h-4 w-4 text-gray-600"})}},P=t=>{const F={verified:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",text:"Активен"},pending:{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",text:"Ожидание"},verifying:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",text:"Проверяется"},failed:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",text:"Ошибка"},error:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",text:"Ошибка"},expired:{color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",text:"Истек"}},y=F[t]||F.error;return e.jsx(V,{className:y.color,children:y.text})};return X?e.jsxs(x,{children:[e.jsx(h,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Кастомные домены"]})}),e.jsx(m,{children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(q,{className:"h-6 w-6 animate-spin"})})})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Кастомные домены"]}),e.jsx(w,{children:"Используйте свои домены для трекинговых ссылок. Это повышает доверие пользователей и обеспечивает белый лейбл."})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(i,{htmlFor:"domain",children:"Доменное имя"}),e.jsx(o,{id:"domain",placeholder:"track.example.com",value:a,onChange:t=>d(t.target.value),"data-testid":"input-new-domain"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"domain-type",children:"Тип записи"}),e.jsxs(B,{value:N,onValueChange:t=>O(t),children:[e.jsx(Q,{"data-testid":"select-domain-type",children:e.jsx(H,{})}),e.jsxs(Z,{children:[e.jsx(R,{value:"cname",children:"CNAME (рекомендуется)"}),e.jsx(R,{value:"a_record",children:"A запись"}),e.jsx(R,{value:"txt_record",children:"TXT запись"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(n,{onClick:I,disabled:v.isPending,"data-testid":"button-add-domain",className:"w-full",children:v.isPending?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"h-4 w-4 mr-2 animate-spin"}),"Добавляем..."]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Добавить"]})})})]}),e.jsx(Me,{}),e.jsx("div",{className:"space-y-4",children:!Array.isArray(A)||A.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(ee,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"У вас пока нет кастомных доменов"}),e.jsx("p",{className:"text-sm",children:"Добавьте домен выше, чтобы начать использовать белый лейбл"})]}):A.map(t=>e.jsx(x,{className:"border-l-4 border-l-blue-500",children:e.jsxs(m,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[D(t.status),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.domain}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Добавлен ",new Date(t.createdAt).toLocaleDateString("ru-RU")]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[P(t.status),t.sslStatus==="issued"&&e.jsxs(V,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),"SSL активен"]}),t.sslStatus==="pending"&&e.jsxs(V,{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:[e.jsx(oe,{className:"h-3 w-3 mr-1"}),"SSL выдается"]}),t.sslStatus==="failed"&&e.jsxs(V,{className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),"SSL ошибка"]}),t.status==="verified"&&(!t.sslStatus||t.sslStatus==="none")&&e.jsxs(V,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:[e.jsx(xe,{className:"h-3 w-3 mr-1"}),"Готов к SSL"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.status!=="verified"&&e.jsx(n,{size:"sm",onClick:()=>C.mutate(t.id),disabled:C.isPending,"data-testid":`button-verify-${t.id}`,children:C.isPending?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"h-3 w-3 mr-1 animate-spin"}),"Проверяем..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Проверить домен"]})}),t.status==="verified"&&(!t.sslStatus||t.sslStatus==="none"||t.sslStatus==="failed")&&e.jsx(n,{size:"sm",onClick:()=>c.mutate(t.id),disabled:c.isPending,"data-testid":`button-ssl-${t.id}`,className:"bg-green-600 hover:bg-green-700 text-white",children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"h-3 w-3 mr-1 animate-spin"}),"Выдаем SSL..."]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),"Выдать SSL"]})}),e.jsxs(Ue,{children:[e.jsx(Re,{asChild:!0,children:e.jsxs(n,{size:"sm",variant:"outline",onClick:()=>G(t),children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"Инструкции DNS"]})}),e.jsxs(ze,{className:"max-w-2xl",children:[e.jsxs(Ve,{children:[e.jsxs(qe,{children:["DNS инструкции для ",t.domain]}),e.jsx(Ke,{children:"Следуйте инструкциям ниже для настройки DNS записей"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-semibold",children:"Тип записи"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm",children:t.type==="cname"?"CNAME":"TXT"})})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-semibold",children:"Имя/Host"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm break-all",children:t.type==="cname"?t.domain.split(".")[0]:t.domain.includes(".")?t.domain:"@"}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>T(t.type==="cname"?t.domain.split(".")[0]:t.domain.includes(".")?t.domain:"@"),title:"Скопировать хост",children:e.jsx(ae,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-semibold",children:"Значение"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm break-all",children:t.type==="cname"?t.targetValue||"affiliate-tracker.replit.app":t.verificationValue}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>T(t.type==="cname"?t.targetValue||"affiliate-tracker.replit.app":t.verificationValue),title:"Скопировать значение",children:e.jsx(ae,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(de,{children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx(ce,{children:t.type==="cname"?"Добавьте CNAME запись в DNS настройках вашего домена. Это позволит использовать ваш собственный домен для трекинговых ссылок с белым лейблом.":'Добавьте TXT запись в DNS настройках вашего домена для верификации. После добавления записи нажмите "Проверить домен".'})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-950 rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-2 text-green-800 dark:text-green-200",children:"После настройки ваши трекинговые ссылки будут выглядеть так:"}),e.jsxs("code",{className:"text-sm bg-white dark:bg-gray-800 px-3 py-2 rounded border block",children:["https://",t.domain,"/click?offer=123&clickid=partner_abc123"]}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2",children:"Белый лейбл повышает доверие пользователей и улучшает конверсию!"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-2",children:"Пошаговая инструкция:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:"Войдите в панель управления DNS вашего провайдера домена (GoDaddy, Namecheap, Cloudflare и т.д.)"}),e.jsx("li",{children:'Найдите раздел "DNS Records", "DNS управление" или "Zone File"'}),e.jsxs("li",{children:["Добавьте новую ",t.type==="cname"?"CNAME":"TXT"," запись:"]}),e.jsxs("li",{className:"ml-4",children:["• Тип: ",e.jsx("strong",{children:t.type==="cname"?"CNAME":"TXT"}),e.jsx("br",{}),"• Имя/Host: ",e.jsx("strong",{children:t.type==="cname"?t.domain.split(".")[0]:t.domain.includes(".")?t.domain:"@"}),e.jsx("br",{}),"• Значение: ",e.jsx("strong",{children:t.type==="cname"?t.targetValue||"affiliate-tracker.replit.app":t.verificationValue})]}),e.jsx("li",{children:"Сохраните изменения (распространение DNS может занять 5-30 минут)"}),e.jsx("li",{children:'Вернитесь сюда и нажмите "Проверить домен" для верификации'})]})]}),t.type==="cname"&&e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-950 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"Важно:"})," CNAME запись должна указывать на ",t.targetValue||"affiliate-tracker.replit.app",", а имя записи должно быть ",t.domain.split(".")[0]," (первая часть вашего домена)"]})}),t.type==="a_record"&&e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-950 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"Важно для корневого домена:"})," Добавьте TXT запись для верификации. Имя записи должно быть точно ",t.domain," (или @ для корневого домена), значение: ",t.verificationValue]})})]})]}),t.status==="verified"&&e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"Пример трекинговой ссылки"]}),e.jsxs("code",{className:"bg-gray-100 dark:bg-gray-800 px-3 py-2 rounded text-sm block",children:["https://",t.domain,"/click?offer=123&clickid=partner_abc123"]})]})]})]})]}),e.jsx(n,{size:"sm",variant:"destructive",onClick:()=>S.mutate(t.id),disabled:S.isPending,"data-testid":`button-delete-${t.id}`,children:e.jsx(je,{className:"h-3 w-3"})})]}),t.errorMessage&&e.jsxs(de,{className:"mt-4",variant:"destructive",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx(ce,{children:t.errorMessage})]}),t.sslStatus&&t.sslStatus!=="none"&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsxs("h5",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"SSL Сертификат"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Статус:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[t.sslStatus==="issued"&&"✅ Выдан",t.sslStatus==="pending"&&"⏳ Выдается",t.sslStatus==="failed"&&"❌ Ошибка",t.sslStatus==="expired"&&"⚠️ Истек"]})]}),t.sslIssuer&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Центр:"}),e.jsx("span",{className:"ml-2 font-medium",children:t.sslIssuer})]}),t.sslValidUntil&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Действует до:"}),e.jsx("span",{className:"ml-2 font-medium",children:new Date(t.sslValidUntil).toLocaleDateString("ru-RU")})]}),t.sslErrorMessage&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"Ошибка:"}),e.jsx("span",{className:"ml-2",children:t.sslErrorMessage})]})]})]}),t.lastChecked&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Последняя проверка: ",new Date(t.lastChecked).toLocaleString("ru-RU")]})]})},t.id))})]})]})})}const Qe=[{value:"en",label:"English"},{value:"ru",label:"Русский"},{value:"es",label:"Español"},{value:"pt",label:"Português"},{value:"fr",label:"Français"},{value:"de",label:"Deutsch"},{value:"tr",label:"Türkçe"},{value:"zh",label:"中文"},{value:"it",label:"Italiano"}],He=[{value:"USD",label:"US Dollar"},{value:"EUR",label:"Euro"},{value:"GBP",label:"British Pound"},{value:"RUB",label:"Russian Ruble"},{value:"BRL",label:"Brazilian Real"}],Ze=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"New York (EST/EDT)"},{value:"Europe/London",label:"London (GMT/BST)"},{value:"Europe/Moscow",label:"Moscow (MSK)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"}];function js(){const{user:a}=Ee(),{toast:d}=he(),N=ue(),[O,G]=j.useState("account"),[r,k]=j.useState(!1),[A,X]=j.useState({}),[v,C]=j.useState({current:"",new:"",confirm:""}),[c,S]=j.useState({}),[I,T]=j.useState({defaultUrl:"",ipWhitelist:[],enabled:!0}),[D,P]=j.useState({email:!1,telegram:!1,sms:!1}),[t,F]=j.useState(""),{data:y,isLoading:ge}=$({queryKey:["/api/auth/me"],enabled:!!a}),{data:J,isLoading:pe}=$({queryKey:["/api/advertiser/api-tokens"]}),{data:L,isLoading:Oe}=$({queryKey:["/api/advertiser/profile/webhook"]});j.useEffect(()=>{a&&(S({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",company:a.company||"",country:a.country||"US",language:a.language||"en",timezone:a.timezone||"UTC",currency:a.currency||"USD",twoFactorEnabled:a.twoFactorEnabled||!1,settings:{brandName:a.settings?.brandName||"",brandDescription:a.settings?.brandDescription||"",brandLogo:a.settings?.brandLogo||"",vertical:a.settings?.vertical||"",partnerRules:a.settings?.partnerRules||"",notifications:{email:a.settings?.notifications?.email||!1,telegram:a.settings?.notifications?.telegram||!1,sms:a.settings?.notifications?.sms||!1}}}),P({email:a.settings?.notifications?.email||!1,telegram:a.settings?.notifications?.telegram||!1,sms:a.settings?.notifications?.sms||!1}),F(a.telegramChatId?String(a.telegramChatId):""),S(s=>({...s,telegram:a.telegram||"",telegramChatId:a.telegramChatId||null})))},[a]),j.useEffect(()=>{L&&T({defaultUrl:L.defaultUrl||"",ipWhitelist:L.ipWhitelist||[],enabled:L.enabled!==void 0?L.enabled:!0})},[L]);const ie=g({mutationFn:async s=>p("/api/advertiser/profile","PATCH",s),onSuccess:()=>{d({title:"Профиль обновлен",description:"Данные профиля успешно сохранены"}),N.invalidateQueries({queryKey:["/api/auth/me"]}),k(!1)},onError:()=>{d({title:"Ошибка",description:"Не удалось обновить профиль",variant:"destructive"})}}),ve=g({mutationFn:async s=>p("/api/advertiser/profile/change-password","POST",s),onSuccess:()=>{d({title:"Пароль изменен",description:"Пароль успешно обновлен"}),C({current:"",new:"",confirm:""})},onError:()=>{d({title:"Ошибка",description:"Не удалось изменить пароль",variant:"destructive"})}}),be=g({mutationFn:async s=>p("/api/advertiser/api-tokens","POST",{name:s}),onSuccess:()=>{d({title:"Токен создан",description:"Новый API токен успешно создан"}),N.invalidateQueries({queryKey:["/api/advertiser/api-tokens"]})},onError:()=>{d({title:"Ошибка",description:"Не удалось создать токен",variant:"destructive"})}}),fe=g({mutationFn:async s=>p(`/api/advertiser/api-tokens/${s}`,"DELETE"),onSuccess:()=>{d({title:"Токен удален",description:"API токен успешно удален"}),N.invalidateQueries({queryKey:["/api/advertiser/api-tokens"]})},onError:()=>{d({title:"Ошибка",description:"Не удалось удалить токен",variant:"destructive"})}}),Ne=g({mutationFn:async s=>p("/api/advertiser/profile/webhook","PATCH",s),onSuccess:()=>{d({title:"Webhook обновлен",description:"Настройки webhook успешно сохранены"}),N.invalidateQueries({queryKey:["/api/advertiser/profile/webhook"]})},onError:()=>{d({title:"Ошибка",description:"Не удалось обновить webhook",variant:"destructive"})}}),ye=g({mutationFn:async s=>p("/api/advertiser/profile/notifications","PATCH",{notifications:s}),onSuccess:()=>{d({title:"Уведомления обновлены",description:"Настройки уведомлений успешно сохранены"}),N.invalidateQueries({queryKey:["/api/auth/me"]})},onError:()=>{d({title:"Ошибка",description:"Не удалось обновить уведомления",variant:"destructive"})}}),Y=g({mutationFn:async s=>p("/api/telegram/link","PATCH",{telegramChatId:s}),onSuccess:()=>{d({title:"Telegram привязан",description:"Аккаунт Telegram успешно привязан к профилю"}),N.invalidateQueries({queryKey:["/api/auth/me"]})},onError:()=>{d({title:"Ошибка привязки",description:"Не удалось привязать Telegram аккаунт",variant:"destructive"})}}),z=g({mutationFn:async s=>p("/api/telegram/test","POST",{userId:a?.id,type:s,_data:{offerName:"Test Offer",partnerName:"Test Partner",amount:100,currency:"USD",country:"RU"}}),onSuccess:()=>{d({title:"Тест отправлен",description:"Тестовое уведомление отправлено в Telegram"})},onError:()=>{d({title:"Ошибка отправки",description:"Не удалось отправить тестовое уведомление",variant:"destructive"})}}),we=()=>{ie.mutate(c)},ke=()=>{if(v.new!==v.confirm){d({title:"Ошибка",description:"Новые пароли не совпадают",variant:"destructive"});return}ve.mutate({currentPassword:v.current,newPassword:v.new})},Ce=()=>{const s=window.prompt("Введите название токена:");s&&s.trim()&&be.mutate(s.trim())},Se=async s=>{try{await navigator.clipboard.writeText(s),d({title:"Скопировано",description:"API токен скопирован в буфер обмена"})}catch{const b=document.createElement("textarea");b.value=s,document.body.appendChild(b),b.select(),document.execCommand("copy"),document.body.removeChild(b),d({title:"Скопировано",description:"API токен скопирован в буфер обмена"})}},Te=s=>{X(l=>({...l,[s]:!l[s]}))},De=()=>{Ne.mutate(I)},re=()=>{ye.mutate(D)},f=(s,l)=>{S(b=>({...b,[s]:l}))},K=(s,l)=>{S(b=>({...b,settings:{...b.settings,[s]:l}}))},Pe=()=>{if(!t){d({title:"Ошибка",description:"Введите Chat ID",variant:"destructive"});return}Y.mutate(t)},W=s=>{z.mutate(s)};return ge?e.jsx("div",{className:"flex items-center justify-center h-64",children:"Загрузка..."}):e.jsxs("div",{className:"w-full space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Профиль рекламодателя"}),e.jsx("p",{className:"text-muted-foreground",children:"Управление профилем, API-доступом, кастомным доменом и настройками"})]})}),e.jsxs(Fe,{value:O,onValueChange:G,className:"w-full",children:[e.jsxs(Le,{className:"grid w-full grid-cols-6",children:[e.jsx(M,{value:"account","data-testid":"tab-account",children:"Аккаунт"}),e.jsx(M,{value:"api","data-testid":"tab-api",children:"API-доступ"}),e.jsx(M,{value:"telegram","data-testid":"tab-telegram",children:"Telegram"}),e.jsx(M,{value:"domain","data-testid":"tab-domain",children:"Домен"}),e.jsx(M,{value:"notifications","data-testid":"tab-notifications",children:"Уведомления"}),e.jsx(M,{value:"security","data-testid":"tab-security",children:"Безопасность"})]}),e.jsxs(U,{value:"account",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Информация аккаунта"}),e.jsx("div",{className:"space-x-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"outline",onClick:()=>k(!1),"data-testid":"button-cancel-edit",children:"Отмена"}),e.jsxs(n,{onClick:we,disabled:ie.isPending,"data-testid":"button-save-profile",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Сохранить"]})]}):e.jsx(n,{onClick:()=>k(!0),"data-testid":"button-edit-profile",children:"Редактировать"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Основные данные"})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Имя"}),e.jsx(o,{value:c.firstName||"",onChange:s=>f("firstName",s.target.value),disabled:!r,"data-testid":"input-first-name"})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Фамилия"}),e.jsx(o,{value:c.lastName||"",onChange:s=>f("lastName",s.target.value),disabled:!r,"data-testid":"input-last-name"})]})]}),e.jsx(i,{children:"Email"}),e.jsx(o,{type:"email",value:c.email||"",onChange:s=>f("email",s.target.value),disabled:!r,"data-testid":"input-email"}),e.jsx(i,{children:"Телефон"}),e.jsx(o,{value:c.phone||"",onChange:s=>f("phone",s.target.value),disabled:!r,"data-testid":"input-phone"}),e.jsx(i,{children:"Telegram"}),e.jsx(o,{value:c.telegram||"",onChange:s=>f("telegram",s.target.value),disabled:!r,"data-testid":"input-telegram"}),e.jsx(i,{children:"Название компании"}),e.jsx(o,{value:c.company||"",onChange:s=>f("company",s.target.value),disabled:!r,"data-testid":"input-company"})]})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Региональные настройки"})}),e.jsxs(m,{className:"space-y-4",children:[e.jsx(i,{children:"Страна"}),e.jsx(o,{value:c.country||"",onChange:s=>f("country",s.target.value),disabled:!r,"data-testid":"input-country"}),e.jsx(i,{children:"Язык интерфейса"}),e.jsxs(B,{value:c.language||"en",onValueChange:s=>f("language",s),disabled:!r,children:[e.jsx(Q,{"data-testid":"select-language",children:e.jsx(H,{})}),e.jsx(Z,{children:Qe.map(s=>e.jsx(R,{value:s.value,children:s.label},s.value))})]}),e.jsx(i,{children:"Часовой пояс"}),e.jsxs(B,{value:c.timezone||"UTC",onValueChange:s=>f("timezone",s),disabled:!r,children:[e.jsx(Q,{"data-testid":"select-timezone",children:e.jsx(H,{})}),e.jsx(Z,{children:Ze.map(s=>e.jsx(R,{value:s.value,children:s.label},s.value))})]}),e.jsx(i,{children:"Валюта"}),e.jsxs(B,{value:c.currency||"USD",onValueChange:s=>f("currency",s),disabled:!r,children:[e.jsx(Q,{"data-testid":"select-currency",children:e.jsx(H,{})}),e.jsx(Z,{children:He.map(s=>e.jsx(R,{value:s.value,children:s.label},s.value))})]})]})]})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Настройки бренда"})}),e.jsxs(m,{className:"space-y-4",children:[e.jsx(i,{children:"Название бренда"}),e.jsx(o,{value:c.settings?.brandName||"",onChange:s=>K("brandName",s.target.value),disabled:!r,"data-testid":"input-brand-name"}),e.jsx(i,{children:"Вертикаль"}),e.jsx(o,{value:c.settings?.vertical||"",onChange:s=>K("vertical",s.target.value),disabled:!r,"data-testid":"input-vertical"}),e.jsx(i,{children:"Описание бренда"}),e.jsx(te,{rows:3,value:c.settings?.brandDescription||"",onChange:s=>K("brandDescription",s.target.value),disabled:!r,"data-testid":"textarea-brand-description"}),e.jsx(i,{children:"Правила для партнёров"}),e.jsx(te,{rows:4,value:c.settings?.partnerRules||"",onChange:s=>K("partnerRules",s.target.value),disabled:!r,"data-testid":"textarea-partner-rules"})]})]})]}),e.jsxs(U,{value:"api",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"API-доступ"}),e.jsxs(n,{onClick:Ce,"data-testid":"button-generate-token",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Создать новый токен"]})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(u,{children:"API токены"}),e.jsx(w,{children:"Секретные токены для интеграций и API-запросов"})]}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:pe?e.jsx("div",{children:"Загрузка токенов..."}):J&&J.length>0?J.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg","data-testid":`token-${s.id}`,children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium","data-testid":`token-name-${s.id}`,children:s.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Создан: ",new Date(s.createdAt).toLocaleDateString(),s.lastUsed&&` • Последнее использование: ${new Date(s.lastUsed).toLocaleDateString()}`]}),e.jsx("div",{className:"font-mono text-sm bg-muted p-2 rounded","data-testid":`token-value-${s.id}`,children:A[s.id]?s.token:"••••••••••••••••••••••••••••••••"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{size:"sm",variant:"outline",onClick:()=>Te(s.id),"data-testid":`button-toggle-token-${s.id}`,title:"Показать/скрыть токен",children:A[s.id]?e.jsx(Ae,{className:"h-4 w-4"}):e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx(n,{size:"sm",variant:"outline",onClick:()=>Se(s.token),"data-testid":`button-copy-token-${s.id}`,title:"Копировать токен",children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(n,{size:"sm",variant:"destructive",onClick:()=>fe.mutate(s.id),"data-testid":`button-delete-token-${s.id}`,title:"Удалить токен",children:e.jsx(je,{className:"h-4 w-4"})})]})]},s.id)):e.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"empty-tokens",children:"У вас пока нет API токенов"})})})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(u,{children:"Webhook настройки"}),e.jsx(w,{children:"URL по умолчанию для постбеков и IP-белый список"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"defaultWebhookUrl",children:"Webhook URL по умолчанию"}),e.jsx(o,{id:"defaultWebhookUrl",value:I.defaultUrl,onChange:s=>T(l=>({...l,defaultUrl:s.target.value})),placeholder:"https://your-domain.com/postback","data-testid":"input-webhook-url"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"ipWhitelist",children:"IP-белый список"}),e.jsx(te,{id:"ipWhitelist",value:I.ipWhitelist.join(`
`),onChange:s=>T(l=>({...l,ipWhitelist:s.target.value.split(`
`).map(b=>b.trim()).filter(Boolean)})),placeholder:"192.168.1.1\\n10.0.0.1",rows:4,"data-testid":"textarea-ip-whitelist"}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Один IP на строку"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:"webhookEnabled",checked:I.enabled,onCheckedChange:s=>T(l=>({...l,enabled:s})),"data-testid":"switch-webhook-enabled"}),e.jsx(i,{htmlFor:"webhookEnabled",children:"Включить Webhook"})]}),e.jsx(n,{onClick:De,"data-testid":"button-save-webhook",children:"Сохранить настройки Webhook"})]})]})]}),e.jsxs(U,{value:"telegram",className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Telegram интеграция"})}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsxs(u,{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold text-sm",children:"📖"})}),e.jsx("span",{children:"Инструкция по подключению"})]}),e.jsx(w,{children:"Пошаговое руководство для подключения Telegram бота"})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"h-6 w-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Найдите бота в Telegram"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Перейдите к боту ",e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"@integracia7980_bot"})," или по ссылке:",e.jsx("a",{href:"https://t.me/integracia7980_bot",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-1",children:"https://t.me/integracia7980_bot"})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"h-6 w-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Получите Chat ID"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Напишите боту команду ",e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"/start"}),e.jsx("br",{}),"Бот пришлёт вам ваш Chat ID (например: ",e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"123456789"}),")"]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"h-6 w-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Привяжите в профиле"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Скопируйте полученный Chat ID и вставьте его в поле ниже, затем нажмите "Привязать"'})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"h-6 w-6 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"✓"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Протестируйте уведомления"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"После успешной привязки используйте кнопки тестирования для проверки всех типов уведомлений"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mt-4",children:[e.jsx("h5",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Доступные команды бота:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 py-0.5 rounded text-xs",children:"/start"})," - получить Chat ID"]}),e.jsxs("div",{children:[e.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 py-0.5 rounded text-xs",children:"/help"})," - помощь"]}),e.jsxs("div",{children:[e.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 py-0.5 rounded text-xs",children:"/stats"})," - статистика"]}),e.jsxs("div",{children:[e.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 py-0.5 rounded text-xs",children:"/report"})," - дневной отчёт"]})]})]})]})})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(u,{children:"Подключение к Telegram боту"}),e.jsx(w,{children:"Привяжите ваш Telegram аккаунт для получения уведомлений и управления через бота"})]}),e.jsxs(m,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"telegram-chat-id",children:"Chat ID"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(o,{id:"telegram-chat-id",value:t,onChange:s=>F(s.target.value),placeholder:"Например: 123456789","data-testid":"input-telegram-chat-id"}),e.jsx(n,{onClick:Pe,disabled:Y.isPending,"data-testid":"button-link-telegram",children:Y.isPending?"Привязка...":"Привязать"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Получите ваш Chat ID, написав команду /start боту ",e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"@integracia7980_bot"})]})]}),y?.telegramChatId&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),e.jsxs("span",{className:"text-green-700 dark:text-green-300 font-medium",children:["Telegram подключён (Chat ID: ",y.telegramChatId,")"]})]})})]}),y?.telegramChatId&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Тестирование уведомлений"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{variant:"outline",onClick:()=>W("conversion"),disabled:z.isPending,"data-testid":"button-test-conversion",children:"Тест уведомления о конверсии"}),e.jsx(n,{variant:"outline",onClick:()=>W("offer_alert"),disabled:z.isPending,"data-testid":"button-test-offer-alert",children:"Тест алерта по офферу"}),e.jsx(n,{variant:"outline",onClick:()=>W("fraud_alert"),disabled:z.isPending,"data-testid":"button-test-fraud-alert",children:"Тест антифрод алерта"}),e.jsx(n,{variant:"outline",onClick:()=>W("system_message"),disabled:z.isPending,"data-testid":"button-test-system",children:"Тест системного сообщения"})]})]})]})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(u,{children:"Настройки Telegram уведомлений"}),e.jsx(w,{children:"Выберите типы уведомлений для получения в Telegram"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Уведомления о конверсиях"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Получать сообщения при новых лидах и депозитах"})]}),e.jsx(E,{checked:D.telegram,onCheckedChange:s=>P(l=>({...l,telegram:s})),"data-testid":"switch-telegram-conversions"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Антифрод алерты"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Предупреждения о подозрительной активности"})]}),e.jsx(E,{defaultChecked:!0,"data-testid":"switch-telegram-fraud"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Системные уведомления"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Сообщения о важных изменениях в системе"})]}),e.jsx(E,{defaultChecked:!0,"data-testid":"switch-telegram-system"})]})]}),e.jsx(n,{onClick:re,"data-testid":"button-save-telegram-settings",children:"Сохранить настройки Telegram"})]})]})]}),e.jsxs(U,{value:"domain",className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-semibold",children:"DNS-подтверждение доменов"})}),e.jsx(Be,{})]}),e.jsxs(U,{value:"notifications",className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Уведомления"})}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(u,{children:"Настройка уведомлений"}),e.jsx(w,{children:"Выберите, по каким каналам получать уведомления от платформы"})]}),e.jsxs(m,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"notif-email",children:"Email"}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Уведомления на вашу почту (",c.email,")"]})]}),e.jsx(E,{id:"notif-email",checked:D.email,onCheckedChange:s=>P(l=>({...l,email:s})),"data-testid":"switch-email-notifications"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"notif-telegram",children:"Telegram"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Уведомления в Telegram-бот (если подключён)"})]}),e.jsx(E,{id:"notif-telegram",checked:D.telegram,onCheckedChange:s=>P(l=>({...l,telegram:s})),"data-testid":"switch-telegram-notifications"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"notif-sms",children:"SMS"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"SMS-уведомления (если активны)"})]}),e.jsx(E,{id:"notif-sms",checked:D.sms,onCheckedChange:s=>P(l=>({...l,sms:s})),"data-testid":"switch-sms-notifications"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(n,{onClick:re,"data-testid":"button-save-notifications",children:"Сохранить уведомления"})})]})]})]}),e.jsxs(U,{value:"security",className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Безопасность"})}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(u,{children:"Сменить пароль"}),e.jsx(w,{children:"Мы рекомендуем использовать уникальный и сложный пароль"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"currentPassword",children:"Текущий пароль"}),e.jsx(o,{id:"currentPassword",type:"password",value:v.current,onChange:s=>C(l=>({...l,current:s.target.value})),"data-testid":"input-current-password"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"newPassword",children:"Новый пароль"}),e.jsx(o,{id:"newPassword",type:"password",value:v.new,onChange:s=>C(l=>({...l,new:s.target.value})),"data-testid":"input-new-password"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"confirmPassword",children:"Повторите пароль"}),e.jsx(o,{id:"confirmPassword",type:"password",value:v.confirm,onChange:s=>C(l=>({...l,confirm:s.target.value})),"data-testid":"input-confirm-password"})]})]}),e.jsx(n,{onClick:ke,"data-testid":"button-change-password",children:"Обновить пароль"})]})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(u,{children:"Двухфакторная аутентификация (2FA)"}),e.jsx(w,{children:"2FA временно отключена для упрощения входа в систему."})]}),e.jsxs(m,{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-muted-foreground","data-testid":"text-2fa-status",children:["Статус: ",e.jsx("strong",{children:"Отключена"})]})}),e.jsx(n,{variant:"outline",disabled:!0,"data-testid":"button-toggle-2fa",children:"Недоступно"})]})]})]})]})]})}export{js as default};
