const t=()=>{if(typeof window>"u")return!1;const o=window.location.hostname;return o.includes("replit.app")||o.includes("netlify.app")||o.includes("vercel.app")||!o.includes("localhost")&&!o.includes("127.0.0.1")},e=()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),window.queryClient&&window.queryClient.clear(),console.log("üîÑ Forced logout for production environment"),window.location.href="/login"},i=()=>{if(!t())return;console.log("üîß Initializing production auth fix...");const o=localStorage.getItem("auth_token")||localStorage.getItem("token");if(!o||o==="null"||o==="undefined"){console.log("‚ùå No valid token found, forcing logout"),e();return}fetch("/api/auth/me",{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}).then(n=>{n.ok?console.log("‚úÖ Token valid for production environment"):(console.log("‚ùå Token validation failed, forcing re-login"),e())}).catch(()=>{console.log("‚ùå Network error during token validation, forcing re-login"),e()})};export{e as forceProductionLogout,i as initProductionAuthFix,t as isProductionEnvironment};
