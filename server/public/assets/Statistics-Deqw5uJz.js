import{j as s}from"./ui-CkQMVfNu.js";import{r as E}from"./vendor-DazevGLP.js";import{u as J}from"./useQuery-IUx4ZSsA.js";import{K as gs,d as ps,C as r,g as n,x as z,B as u,e as d,f as x,I as W,h as X,i as Y,j as Z,k as ss,l as p,T as q,R as fs,G as es,E as A,Q as bs}from"./index-Hu68kGEe.js";import{B as k}from"./badge-BPEJ7H1K.js";import{T as w,a as y,b as m,c as a,d as C,e as c}from"./table-D9zFYVHJ.js";import{S as L}from"./skeleton-xv0nRF1e.js";import{T as vs,a as Ns,b as S,c as I}from"./tabs-BOkB6Db_.js";import{D as ks,a as ws,b as ys,c as Cs,d as Ss}from"./dialog-CMra4o9L.js";import{a as f,f as Is}from"./formatting-XXeiCqNP.js";import{D as Ts}from"./download-BE2ywTvs.js";import{F as Ds}from"./filter-DkQgzo_M.js";import{M as Ps}from"./mouse-pointer-CUTpAGBw.js";import{D as Fs}from"./dollar-sign-DxJ6twRP.js";import{M as $}from"./monitor-CDxPTyC0.js";import{S as ts}from"./search-w8xkMBVR.js";import{C as as}from"./copy-Bp5yqf8a.js";import{S as cs}from"./smartphone-DkdSkLaU.js";import{C as Rs}from"./chevron-right-CfzXs0ax.js";import"./utils-B-_CankM.js";function Zs(){const{t}=gs(),{toast:H}=ps(),[M,is]=E.useState("overview"),[h,T]=E.useState({dateFrom:"",dateTo:"",offerId:"all",geo:"all",device:"all"}),[ls,_]=E.useState(!1),[V,B]=E.useState(null),[o,D]=E.useState(1),K=50,{data:g,isLoading:rs,error:ns}=J({queryKey:["/api/partner/analytics",M,o,h],queryFn:async()=>{const e=new URLSearchParams({tab:M,page:o.toString(),limit:K.toString(),...h.offerId!=="all"&&{offer:h.offerId},...h.dateFrom&&{startDate:h.dateFrom},...h.dateTo&&{endDate:h.dateTo}}),i=localStorage.getItem("token")||localStorage.getItem("auth_token");if(console.log("Making request with token:",i?i.substring(0,20)+"...":"null"),!i){console.log("No token found, redirecting to login"),window.location.href="/login";return}const l=await fetch(`/api/partner/analytics?${e}`,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(console.log("Response status:",l.status),!l.ok){const R=await l.json().catch(()=>({}));if(console.log("Error response:",R),l.status===401||l.status===403){console.log("Auth error, redirecting to login"),localStorage.removeItem("token"),window.location.href="/login";return}throw new Error(R.error||"Failed to fetch analytics data")}return l.json()}}),{data:U}=J({queryKey:["/api/partner/offers"],queryFn:async()=>{const e=localStorage.getItem("token")||localStorage.getItem("auth_token");if(!e)return window.location.href="/login",[];const i=await fetch("/api/partner/offers",{headers:{Authorization:`Bearer ${e}`}});if(!i.ok){if(i.status===401||i.status===403)return localStorage.removeItem("token"),window.location.href="/login",[];throw new Error("Failed to fetch offers")}return i.json()}}),os=()=>{D(1)},ds=()=>{T({dateFrom:"",dateTo:"",offerId:"all",geo:"all",device:"all"}),D(1)},O=async(e,i="")=>{try{await navigator.clipboard.writeText(e),H({title:t("statistics.messages.copied"),description:t("statistics.messages.copiedDesc",{type:i}),duration:2e3})}catch{H({title:t("common.error"),description:t("statistics.messages.copyError"),variant:"destructive",duration:2e3})}},G=e=>{if(!U)return e;const i=U.find(l=>l.id===e);return i?i.name:e},xs=e=>g?.data?g.data.find(i=>i.clickId===e):null,P=g?.summary||{totalClicks:0,totalConversions:0,totalRevenue:0,conversionRate:0,epc:0},b=g?.data||[],Q=g?.pagination?.totalItems||0,F=g?.pagination?.totalPages||1,v=g?.pagination||{currentPage:1,itemsPerPage:50,totalItems:0},ms=()=>{o>1&&D(o-1)},hs=()=>{o<F&&D(o+1)},us=e=>{D(e)},js=()=>{const e=[];if(F<=5)for(let l=1;l<=F;l++)e.push(l);else{const l=Math.max(1,o-2),R=Math.min(F,l+5-1);for(let j=l;j<=R;j++)e.push(j)}return e},N=()=>s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[t("statistics.pagination.showing")," ",(o-1)*K+1,"-",Math.min(o*K,Q)," ",t("statistics.pagination.of")," ",Q," ",t("statistics.pagination.records")]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(u,{variant:"outline",size:"sm",onClick:ms,disabled:o===1,children:[s.jsx(bs,{className:"h-4 w-4"}),t("statistics.pagination.previous")]}),s.jsx("div",{className:"flex items-center gap-1",children:js().map(e=>s.jsx(u,{variant:o===e?"default":"outline",size:"sm",onClick:()=>us(e),className:"w-8 h-8 p-0",children:e},e))}),s.jsxs(u,{variant:"outline",size:"sm",onClick:hs,disabled:o===F,children:[t("statistics.pagination.next"),s.jsx(Rs,{className:"h-4 w-4"})]})]})]});return rs?s.jsxs("div",{className:"p-6 space-y-6 bg-background dark:bg-background min-h-screen",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(L,{className:"h-8 w-48"}),s.jsx(L,{className:"h-10 w-32"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Array.from({length:5}).map((e,i)=>s.jsx(L,{className:"h-24"},i))}),s.jsx(L,{className:"h-96"})]}):ns?s.jsx("div",{className:"p-6 bg-background dark:bg-background min-h-screen",children:s.jsx(r,{className:"border-red-200 bg-red-50",children:s.jsx(n,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:t("statistics.messages.loadingError")}),s.jsx("p",{className:"text-red-600",children:t("statistics.messages.loadingErrorDesc")})]})})})}):s.jsxs("div",{className:"space-y-6 p-6 bg-background dark:bg-background min-h-screen",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[s.jsx(z,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),t("statistics.title")]}),s.jsx("p",{className:"text-muted-foreground",children:t("statistics.subtitle")})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(u,{variant:"outline",onClick:()=>window.print(),children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),t("statistics.export")]})})]}),s.jsxs(r,{children:[s.jsx(d,{children:s.jsxs(x,{className:"flex items-center gap-2",children:[s.jsx(Ds,{className:"h-4 w-4"}),t("statistics.filters")]})}),s.jsx(n,{children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:t("statistics.dateFrom")}),s.jsx(W,{type:"date",value:h.dateFrom,onChange:e=>T(i=>({...i,dateFrom:e.target.value})),"data-testid":"input-date-from"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:t("statistics.dateTo")}),s.jsx(W,{type:"date",value:h.dateTo,onChange:e=>T(i=>({...i,dateTo:e.target.value})),"data-testid":"input-date-to"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:t("statistics.offer")}),s.jsxs(X,{value:h.offerId,onValueChange:e=>T(i=>({...i,offerId:e})),children:[s.jsx(Y,{"data-testid":"select-offer",children:s.jsx(Z,{placeholder:t("statistics.allOffers")})}),s.jsxs(ss,{children:[s.jsx(p,{value:"all",children:t("statistics.allOffers")}),U?.map(e=>s.jsx(p,{value:e.id,children:e.name},e.id))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:t("statistics.geo")}),s.jsxs(X,{value:h.geo,onValueChange:e=>T(i=>({...i,geo:e})),children:[s.jsx(Y,{"data-testid":"select-geo",children:s.jsx(Z,{placeholder:t("statistics.allCountries")})}),s.jsxs(ss,{children:[s.jsx(p,{value:"all",children:t("statistics.allCountries")}),s.jsx(p,{value:"IN",children:t("statistics.countries.IN")}),s.jsx(p,{value:"US",children:t("statistics.countries.US")}),s.jsx(p,{value:"DE",children:t("statistics.countries.DE")}),s.jsx(p,{value:"UK",children:t("statistics.countries.UK")})]})]})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx(u,{onClick:os,className:"flex-1",children:t("statistics.applyFilters")}),s.jsx(u,{variant:"outline",onClick:ds,children:t("statistics.resetFilters")})]})]})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[s.jsxs(r,{children:[s.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(x,{className:"text-sm font-medium",children:t("statistics.columns.clicks")}),s.jsx(Ps,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(n,{children:s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:P.totalClicks.toLocaleString()})})]}),s.jsxs(r,{children:[s.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(x,{className:"text-sm font-medium",children:t("statistics.columns.conversions")}),s.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(n,{children:s.jsx("div",{className:"text-2xl font-bold text-green-600",children:P.totalConversions})})]}),s.jsxs(r,{children:[s.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(x,{className:"text-sm font-medium",children:t("statistics.columns.revenue")}),s.jsx(Fs,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(n,{children:s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:f(P.totalRevenue)})})]}),s.jsxs(r,{children:[s.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(x,{className:"text-sm font-medium",children:t("statistics.columns.cr")}),s.jsx(fs,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(n,{children:s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:Is(P.conversionRate/100)})})]}),s.jsxs(r,{children:[s.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(x,{className:"text-sm font-medium",children:t("statistics.columns.epc")}),s.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(n,{children:s.jsx("div",{className:"text-2xl font-bold text-teal-600 dark:text-teal-400",children:f(P.epc)})})]})]}),s.jsxs(vs,{value:M,onValueChange:is,className:"space-y-4",children:[s.jsxs(Ns,{className:"grid w-full grid-cols-6",children:[s.jsxs(S,{value:"overview",className:"flex items-center gap-2",children:[s.jsx(z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),t("statistics.tabs.overview")]}),s.jsxs(S,{value:"geography",className:"flex items-center gap-2",children:[s.jsx(es,{className:"h-4 w-4 text-green-600"}),t("statistics.tabs.geography")]}),s.jsxs(S,{value:"devices",className:"flex items-center gap-2",children:[s.jsx($,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}),t("statistics.tabs.devices")]}),s.jsxs(S,{value:"sources",className:"flex items-center gap-2",children:[s.jsx(ts,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"}),t("statistics.tabs.sources")]}),s.jsxs(S,{value:"subid",className:"flex items-center gap-2",children:[s.jsx(q,{className:"h-4 w-4 text-teal-600 dark:text-teal-400"}),"SubID"]}),s.jsxs(S,{value:"details",className:"flex items-center gap-2",children:[s.jsx(A,{className:"h-4 w-4 text-indigo-600"}),t("statistics.tabs.details")]})]}),s.jsx(I,{value:"overview",className:"space-y-4",children:s.jsxs(r,{children:[s.jsx(d,{children:s.jsxs(x,{className:"flex items-center gap-2",children:[s.jsx(z,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),t("statistics.tabs.overview")," - ",t("statistics.columns.clicks")]})}),s.jsxs(n,{children:[s.jsxs(w,{children:[s.jsx(y,{children:s.jsxs(m,{children:[s.jsx(a,{children:t("statistics.columns.date")}),s.jsx(a,{children:t("statistics.columns.offer")}),s.jsx(a,{children:t("statistics.columns.country")}),s.jsx(a,{children:t("statistics.columns.clickId")}),s.jsx(a,{children:t("statistics.columns.status")}),s.jsx(a,{children:t("statistics.columns.revenue")}),s.jsx(a,{children:t("statistics.columns.actions")})]})}),s.jsx(C,{children:b.map(e=>s.jsxs(m,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[s.jsx(c,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium text-foreground",children:new Date(e.timestamp||e.createdAt).toLocaleDateString()}),s.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp||e.createdAt).toLocaleTimeString()})]})}),s.jsx(c,{className:"font-medium",children:G(e.offerId)}),s.jsx(c,{children:s.jsx(k,{variant:"outline",children:e.country})}),s.jsx(c,{className:"font-mono text-xs",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-600 dark:text-blue-400 dark:text-blue-400",children:e.clickId}),s.jsx(u,{variant:"ghost",size:"sm",onClick:()=>O(e.clickId,"ClickID"),title:t("statistics.actions.copyClickId"),children:s.jsx(as,{className:"h-3 w-3"})})]})}),s.jsx(c,{children:s.jsx(k,{variant:e.status==="conversion"?"default":"secondary",className:e.status==="conversion"?"bg-green-100 text-green-800":"",children:e.status==="conversion"?t("statistics.status.conversion"):t("statistics.status.click")})}),s.jsx(c,{className:"font-medium text-purple-600 dark:text-purple-400",children:f(e.revenue)}),s.jsx(c,{children:s.jsxs(u,{variant:"outline",size:"sm",onClick:()=>{B(e.clickId),_(!0)},title:t("statistics.actions.viewSubId"),children:[s.jsx(A,{className:"h-3 w-3 mr-1"}),"SubID"]})})]},e.id))})]}),s.jsx(N,{})]})]})}),s.jsx(I,{value:"geography",className:"space-y-4",children:s.jsxs(r,{children:[s.jsx(d,{children:s.jsxs(x,{className:"flex items-center gap-2",children:[s.jsx(es,{className:"h-5 w-5 text-green-600"}),t("statistics.tabs.geography")," - ",t("statistics.columns.clicks")]})}),s.jsxs(n,{children:[s.jsxs(w,{children:[s.jsx(y,{children:s.jsxs(m,{children:[s.jsx(a,{children:t("statistics.columns.country")}),s.jsx(a,{children:t("statistics.columns.clicks")}),s.jsx(a,{children:t("statistics.columns.conversions")}),s.jsx(a,{children:t("statistics.columns.revenue")}),s.jsx(a,{children:"CR"}),s.jsx(a,{children:"EPC"})]})}),s.jsx(C,{children:b.map(e=>s.jsxs(m,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[s.jsx(c,{children:s.jsx(k,{variant:"outline",children:e.country})}),s.jsx(c,{children:e.clicks}),s.jsx(c,{children:e.conversions}),s.jsx(c,{className:"font-medium text-purple-600 dark:text-purple-400",children:f(e.revenue)}),s.jsx(c,{className:"font-medium text-orange-600 dark:text-orange-400",children:e.cr}),s.jsx(c,{className:"font-medium text-teal-600 dark:text-teal-400",children:e.epc})]},e.country))})]}),s.jsx(N,{})]})]})}),s.jsx(I,{value:"devices",className:"space-y-4",children:s.jsxs(r,{children:[s.jsx(d,{children:s.jsxs(x,{className:"flex items-center gap-2",children:[s.jsx($,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),t("statistics.tabs.devices")," - ",t("statistics.columns.clicks")]})}),s.jsxs(n,{children:[s.jsxs(w,{children:[s.jsx(y,{children:s.jsxs(m,{children:[s.jsx(a,{children:t("statistics.columns.device")}),s.jsx(a,{children:t("statistics.columns.clicks")}),s.jsx(a,{children:t("statistics.columns.conversions")}),s.jsx(a,{children:t("statistics.columns.revenue")}),s.jsx(a,{children:"CR"}),s.jsx(a,{children:"EPC"})]})}),s.jsx(C,{children:b.map(e=>s.jsxs(m,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[s.jsx(c,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[e.device==="Desktop"&&s.jsx($,{className:"h-4 w-4"}),e.device==="Mobile"&&s.jsx(cs,{className:"h-4 w-4"}),e.device==="Tablet"&&s.jsx(cs,{className:"h-4 w-4"}),e.device]})}),s.jsx(c,{children:e.clicks}),s.jsx(c,{children:e.conversions}),s.jsx(c,{className:"font-medium text-purple-600 dark:text-purple-400",children:f(e.revenue)}),s.jsx(c,{className:"font-medium text-orange-600 dark:text-orange-400",children:e.cr}),s.jsx(c,{className:"font-medium text-teal-600 dark:text-teal-400",children:e.epc})]},e.device))})]}),s.jsx(N,{})]})]})}),s.jsx(I,{value:"sources",className:"space-y-4",children:s.jsxs(r,{children:[s.jsx(d,{children:s.jsxs(x,{className:"flex items-center gap-2",children:[s.jsx(ts,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"}),t("statistics.tabs.sources")," - ",t("statistics.columns.clicks")]})}),s.jsxs(n,{children:[s.jsxs(w,{children:[s.jsx(y,{children:s.jsxs(m,{children:[s.jsx(a,{children:t("statistics.columns.source")}),s.jsx(a,{children:t("statistics.columns.clicks")}),s.jsx(a,{children:t("statistics.columns.conversions")}),s.jsx(a,{children:t("statistics.columns.revenue")}),s.jsx(a,{children:"CR"}),s.jsx(a,{children:"EPC"})]})}),s.jsx(C,{children:b.map(e=>s.jsxs(m,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[s.jsx(c,{children:s.jsx(k,{variant:"outline",children:e.source})}),s.jsx(c,{children:e.clicks}),s.jsx(c,{children:e.conversions}),s.jsx(c,{className:"font-medium text-purple-600 dark:text-purple-400",children:f(e.revenue)}),s.jsx(c,{className:"font-medium text-orange-600 dark:text-orange-400",children:e.cr}),s.jsx(c,{className:"font-medium text-teal-600 dark:text-teal-400",children:e.epc})]},e.source))})]}),s.jsx(N,{})]})]})}),s.jsx(I,{value:"subid",className:"space-y-4",children:s.jsxs(r,{children:[s.jsxs(d,{children:[s.jsxs(x,{className:"flex items-center gap-2",children:[s.jsx(q,{className:"h-5 w-5 text-teal-600 dark:text-teal-400"}),t("statistics.subid.title")]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:t("statistics.subid.description")})]}),s.jsxs(n,{children:[s.jsxs(w,{children:[s.jsx(y,{children:s.jsxs(m,{children:[s.jsx(a,{children:t("statistics.columns.clickId")}),s.jsx(a,{children:"Sub1"}),s.jsx(a,{children:"Sub2"}),s.jsx(a,{children:"Sub3"}),s.jsx(a,{children:"Sub4"}),s.jsx(a,{children:"Sub5"}),s.jsx(a,{children:"Действия"})]})}),s.jsx(C,{children:b.slice(0,10).map(e=>s.jsxs(m,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[s.jsx(c,{className:"font-mono text-xs text-blue-600 dark:text-blue-400 dark:text-blue-400",children:e.clickId}),s.jsx(c,{className:"text-xs text-foreground",children:e.sub_1||"-"}),s.jsx(c,{className:"text-xs text-foreground",children:e.sub_2||"-"}),s.jsx(c,{className:"text-xs text-foreground",children:e.sub_3||"-"}),s.jsx(c,{className:"text-xs text-foreground",children:e.sub_4||"-"}),s.jsx(c,{className:"text-xs text-foreground",children:e.sub_5||"-"}),s.jsx(c,{children:s.jsxs(u,{variant:"outline",size:"sm",onClick:()=>{B(e.clickId),_(!0)},title:t("statistics.actions.viewAllSub"),children:[s.jsx(A,{className:"h-3 w-3 mr-1"}),t("statistics.actions.viewAllSub")]})})]},e.id||e.clickId))})]}),s.jsx(N,{})]})]})}),s.jsx(I,{value:"details",className:"space-y-4",children:s.jsxs(r,{children:[s.jsxs(d,{children:[s.jsxs(x,{className:"flex items-center gap-2",children:[s.jsx(A,{className:"h-5 w-5 text-indigo-600"}),t("statistics.subid.detailsTitle")]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[t("statistics.pagination.showing")," ",(v.currentPage-1)*v.itemsPerPage+1,"-",Math.min(v.currentPage*v.itemsPerPage,v.totalItems)," ",t("statistics.pagination.of")," ",v.totalItems," ",t("statistics.pagination.records")]})]}),s.jsxs(n,{children:[s.jsxs(w,{children:[s.jsx(y,{children:s.jsxs(m,{children:[s.jsx(a,{children:t("statistics.columns.date")}),s.jsx(a,{children:t("statistics.columns.offer")}),s.jsx(a,{children:t("statistics.columns.clickId")}),s.jsx(a,{children:t("statistics.columns.ip")}),s.jsx(a,{children:t("statistics.columns.country")}),s.jsx(a,{children:t("statistics.columns.device")}),s.jsx(a,{children:t("statistics.columns.status")}),s.jsx(a,{children:t("statistics.columns.revenue")}),s.jsx(a,{children:"SubID"})]})}),s.jsx(C,{children:b.map(e=>s.jsxs(m,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[s.jsx(c,{className:"text-xs",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-foreground",children:new Date(e.timestamp||e.createdAt).toLocaleDateString()}),s.jsx("span",{className:"text-muted-foreground",children:new Date(e.timestamp||e.createdAt).toLocaleTimeString()})]})}),s.jsx(c,{className:"font-medium text-foreground",children:G(e.offerId)}),s.jsx(c,{className:"font-mono text-xs text-blue-600 dark:text-blue-400",children:e.clickId}),s.jsx(c,{className:"text-xs",children:e.ip}),s.jsx(c,{children:s.jsx(k,{variant:"outline",children:e.country})}),s.jsx(c,{children:e.device}),s.jsx(c,{children:s.jsx(k,{variant:e.status==="conversion"?"default":"secondary",className:e.status==="conversion"?"bg-green-100 text-green-800":"",children:e.status==="conversion"?t("statistics.status.conversion"):t("statistics.status.click")})}),s.jsx(c,{className:"font-medium text-purple-600 dark:text-purple-400",children:f(e.revenue)}),s.jsx(c,{children:s.jsx(u,{variant:"outline",size:"sm",onClick:()=>{B(e.clickId),_(!0)},title:t("statistics.actions.viewAllSub"),children:s.jsx(A,{className:"h-3 w-3"})})})]},e.id))})]}),s.jsx(N,{})]})]})})]}),s.jsx(ks,{open:ls,onOpenChange:_,children:s.jsxs(ws,{className:"max-w-4xl",children:[s.jsxs(ys,{children:[s.jsxs(Cs,{children:[t("statistics.subid.parametersFor")," ",V]}),s.jsx(Ss,{children:t("statistics.subid.fullList")})]}),V&&s.jsx("div",{className:"grid grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:Array.from({length:16},(e,i)=>{const l=`sub_${i+1}`,j=xs(V)?.[l]||"-";return s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsxs("span",{className:"font-medium text-sm",children:["Sub",i+1,":"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground truncate max-w-48",title:j,children:j}),j!=="-"&&s.jsx(u,{variant:"ghost",size:"sm",onClick:()=>O(j,`Sub${i+1}`),title:t("statistics.actions.copyClickId"),children:s.jsx(as,{className:"h-3 w-3"})})]})]},l)})})]})})]})}export{Zs as default};
