import{j as e}from"./ui-CkQMVfNu.js";import{r as p}from"./vendor-DazevGLP.js";import{u as S}from"./useQuery-IUx4ZSsA.js";import{c as F,u as E,d as V,C as t,e as a,f as l,Y as U,g as d,z as r,B as i,W as k,L as T,I as R,h as W,i as q,j as H,k as K,l as O,R as A,p as Y}from"./index-Hu68kGEe.js";import{T as z,a as Q,b as n,c as x}from"./tabs-BOkB6Db_.js";import{B as D}from"./badge-BPEJ7H1K.js";import{C as _}from"./clock-HOqnpwZm.js";import{P as f}from"./plus-CDknCoO7.js";import{D as G}from"./dollar-sign-DxJ6twRP.js";import"./utils-B-_CankM.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=F("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=F("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),J=[{value:"usdt",label:"USDT (Tether)",icon:"₮"},{value:"btc",label:"Bitcoin",icon:"₿"},{value:"card",label:"Банковская карта",icon:"💳"},{value:"swift",label:"SWIFT",icon:"🏦"},{value:"sepa",label:"SEPA",icon:"🇪🇺"},{value:"payoneer",label:"Payoneer",icon:"💰"}];function xe(){const{user:g}=E(),{toast:c}=V(),[X,Z]=p.useState("30d"),[o,j]=p.useState(""),[m,N]=p.useState(""),{data:h,isLoading:L}=S({queryKey:["/api/advertiser/financial-overview"],enabled:!!g}),{data:u,isLoading:y}=S({queryKey:["/api/advertiser/transactions"],enabled:!!g}),b=s=>{switch(s){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},w=s=>{switch(s){case"deposit":return e.jsx($,{className:"h-4 w-4 text-green-600"});case"payout":return e.jsx(v,{className:"h-4 w-4 text-blue-600"});case"fee":return e.jsx(Y,{className:"h-4 w-4 text-orange-600"});case"refund":return e.jsx(A,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(G,{className:"h-4 w-4"})}},C=()=>{c({title:"Создание инвойса",description:"Функция создания инвойса в разработке"})},P=()=>{c({title:"Настройка бюджетов",description:"Функция планирования бюджетов в разработке"})},I=()=>{c({title:"Пополнение баланса",description:"Перейдите на вкладку 'Пополнение' для добавления средств"})},M=()=>{c({title:"Выплаты партнёрам",description:"Функция просмотра выплат в разработке"})},B=()=>{if(!o||!m){c({title:"Ошибка",description:"Укажите сумму и способ пополнения",variant:"destructive"});return}c({title:"Запрос на пополнение",description:`Запрос на пополнение $${o} через ${m} отправлен`}),j(""),N("")};return L?e.jsx("div",{className:"flex items-center justify-center h-64",children:"Загрузка финансовых данных..."}):e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold","data-testid":"page-title",children:"Финансы"}),e.jsx("p",{className:"text-muted-foreground",children:"Управление балансом, депозитами и выплатами партнёрам"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Баланс"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(d,{children:[e.jsxs("div",{className:"text-2xl font-bold","data-testid":"balance-amount",children:["$",h?.balance?.toFixed(2)||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Доступно для выплат партнёрам"})]})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Всего потрачено"}),e.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(d,{children:[e.jsxs("div",{className:"text-2xl font-bold","data-testid":"total-spent",children:["$",h?.totalSpent?.toFixed(2)||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Выплаты партнёрам за всё время"})]})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Всего депозитов"}),e.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(d,{children:[e.jsxs("div",{className:"text-2xl font-bold","data-testid":"total-deposited",children:["$",h?.totalDeposited?.toFixed(2)||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Пополнения баланса"})]})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Ожидает выплаты"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(d,{children:[e.jsxs("div",{className:"text-2xl font-bold","data-testid":"pending-payouts",children:["$",h?.pendingPayouts?.toFixed(2)||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Запросы на выплату в обработке"})]})]})]}),e.jsxs(z,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Q,{children:[e.jsx(n,{value:"overview","data-testid":"tab-overview",children:"Обзор"}),e.jsx(n,{value:"deposit","data-testid":"tab-deposit",children:"Пополнение"}),e.jsx(n,{value:"transactions","data-testid":"tab-transactions",children:"Транзакции"}),e.jsx(n,{value:"invoices","data-testid":"tab-invoices",children:"Инвойсы"}),e.jsx(n,{value:"budgets","data-testid":"tab-budgets",children:"Бюджеты"})]}),e.jsx(x,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(a,{children:[e.jsx(l,{children:"Быстрые действия"}),e.jsx(r,{children:"Основные финансовые операции"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs(i,{className:"w-full justify-start",onClick:I,"data-testid":"button-add-funds",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Пополнить баланс"]}),e.jsxs(i,{variant:"outline",className:"w-full justify-start",onClick:M,"data-testid":"button-view-payouts",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Просмотреть выплаты партнёрам"]}),e.jsxs(i,{variant:"outline",className:"w-full justify-start",onClick:C,"data-testid":"button-create-invoice",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Создать инвойс"]})]})]}),e.jsxs(t,{children:[e.jsxs(a,{children:[e.jsx(l,{children:"Последние транзакции"}),e.jsx(r,{children:"Недавние финансовые операции"})]}),e.jsx(d,{children:y?e.jsx("div",{className:"text-center py-4",children:"Загрузка..."}):u?.length>0?e.jsx("div",{className:"space-y-3",children:u.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[w(s.type),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:s.description}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[s.type==="deposit"?"+":"-","$",s.amount.toFixed(2)]}),e.jsx(D,{className:`text-xs ${b(s.status)}`,"data-testid":`status-${s.status}`,children:s.status})]})]},s.id))}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Транзакций пока нет"})})]})]})}),e.jsx(x,{value:"deposit",className:"space-y-6",children:e.jsxs(t,{children:[e.jsxs(a,{children:[e.jsx(l,{children:"Пополнение баланса"}),e.jsx(r,{children:"Выберите сумму и способ пополнения"})]}),e.jsx(d,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"depositAmount",children:"Сумма пополнения"}),e.jsx(R,{id:"depositAmount",type:"number",placeholder:"0.00",value:o,onChange:s=>j(s.target.value),"data-testid":"input-deposit-amount"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"paymentMethod",children:"Способ оплаты"}),e.jsxs(W,{value:m,onValueChange:N,children:[e.jsx(q,{"data-testid":"select-payment-method",children:e.jsx(H,{placeholder:"Выберите способ оплаты"})}),e.jsx(K,{children:J.map(s=>e.jsx(O,{value:s.value,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:s.icon}),e.jsx("span",{children:s.label})]})},s.value))})]})]}),e.jsx(i,{className:"w-full",disabled:!o||!m,onClick:B,"data-testid":"button-deposit",children:"Пополнить баланс"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Популярные суммы"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["100","500","1000","5000"].map(s=>e.jsxs(i,{variant:"outline",onClick:()=>j(s),"data-testid":`button-amount-${s}`,children:["$",s]},s))})]})]})})]})}),e.jsx(x,{value:"transactions",className:"space-y-6",children:e.jsxs(t,{children:[e.jsxs(a,{children:[e.jsx(l,{children:"История транзакций"}),e.jsx(r,{children:"Все финансовые операции"})]}),e.jsx(d,{children:y?e.jsx("div",{className:"text-center py-8",children:"Загрузка транзакций..."}):u?.length>0?e.jsx("div",{className:"space-y-4",children:u.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[w(s.type),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.description}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(s.createdAt).toLocaleString()," • ",s.method]}),s.reference&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Ref: ",s.reference]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium text-lg",children:[s.type==="deposit"?"+":"-","$",s.amount.toFixed(2)]}),e.jsx(D,{className:b(s.status),children:s.status})]})]},s.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Транзакций пока нет"})})]})}),e.jsx(x,{value:"invoices",className:"space-y-6",children:e.jsxs(t,{children:[e.jsxs(a,{children:[e.jsx(l,{children:"Инвойсы"}),e.jsx(r,{children:"Создание и управление инвойсами"})]}),e.jsx(d,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(k,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-medium mb-2",children:"Инвойсов пока нет"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Создайте первый инвойс для запроса оплаты"}),e.jsxs(i,{onClick:C,"data-testid":"button-create-first-invoice",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Создать инвойс"]})]})})]})}),e.jsx(x,{value:"budgets",className:"space-y-6",children:e.jsxs(t,{children:[e.jsxs(a,{children:[e.jsx(l,{children:"Планирование бюджетов"}),e.jsx(r,{children:"Установите лимиты и планы расходов на офферы"})]}),e.jsx(d,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-medium mb-2",children:"Бюджеты не настроены"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Настройте планируемые бюджеты для эффективного управления расходами"}),e.jsxs(i,{onClick:P,"data-testid":"button-setup-budgets",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Настроить бюджеты"]})]})})]})})]})]})}export{xe as default};
