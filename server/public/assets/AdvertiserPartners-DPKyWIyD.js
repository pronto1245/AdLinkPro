import{j as e}from"./ui-CkQMVfNu.js";import{r as u}from"./vendor-DazevGLP.js";import{u as ue}from"./useQuery-qpsyHy1X.js";import{c as ee,u as je,t as pe,d as se,r as ae,B as d,U as K,C as S,g as k,v as G,w as H,I as x,h as N,i as y,j as b,k as C,l,n as ve,x as ge,M as fe,L as c,y as Ne,o as ye}from"./index-BiZ3ky40.js";import{u as R}from"./useMutation-21NtthE3.js";import{a as U}from"./queryClient-DKT_jxev.js";import{B as Q}from"./badge-B53pzHyE.js";import{D as Y,a as _,b as X,c as Z}from"./dialog-BZ5LljxY.js";import{T as te}from"./textarea-C_vyxygv.js";import{S as $}from"./switch-D5hnHzuw.js";import{T as be,a as Ce,b as A,c as L}from"./tabs-BZv1t_-o.js";import{T as we,a as Se,b as J,c as p,d as ke,e as v}from"./table-BX93bJ8w.js";import{P as Fe}from"./plus-DSksiBTA.js";import{D as Te}from"./dollar-sign-B6jZtTHL.js";import{S as Pe}from"./search-DDN-WbhH.js";import{S as De}from"./square-pen-Jc03HRym.js";import{C as ze}from"./copy-C8LLNJY1.js";import{C as Ee}from"./clock-BdukKcj2.js";import"./utils-B-_CankM.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=ee("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=ee("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Ae=({partner:n,onSuccess:I,onCancel:w})=>{const{toast:F}=se(),m=ae(),[t,i]=u.useState({username:n?.username||"",email:n?.email||"",firstName:n?.firstName||"",lastName:n?.lastName||"",company:n?.company||"",phone:n?.phone||"",country:n?.country||"US",language:n?.language||"en",timezone:n?.timezone||"UTC",trafficSources:n?.trafficSources||[],verticals:n?.verticals||[],tier:n?.tier||"bronze",commissionRate:n?.commissionRate||0,permissions:n?.permissions||{api:!1,statistics:!0,offers:!0,finances:!1},notes:n?.notes||"",tags:n?.tags||[]}),g=R({mutationFn:a=>{const o=n?`/api/advertiser/partners/${n.id}`:"/api/advertiser/partners";return U(o,{method:n?"PUT":"POST",body:a})},onSuccess:()=>{m.invalidateQueries({queryKey:["/api/advertiser/partners"]}),F({title:n?"–ü–∞—Ä—Ç–Ω–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω":"–ü–∞—Ä—Ç–Ω–µ—Ä —Å–æ–∑–¥–∞–Ω",description:n?"–î–∞–Ω–Ω—ã–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã":"–ù–æ–≤—ã–π –ø–∞—Ä—Ç–Ω–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–∏—Å—Ç–µ–º—É"}),I()},onError:a=>{F({title:"–û—à–∏–±–∫–∞",description:a.message||"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞",variant:"destructive"})}}),B=a=>{a.preventDefault(),g.mutate(t)};return e.jsx("div",{className:"space-y-6",children:e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs(be,{defaultValue:"basic",className:"w-full",children:[e.jsxs(Ce,{className:"grid w-full grid-cols-4",children:[e.jsx(A,{value:"basic",children:"–û—Å–Ω–æ–≤–Ω–æ–µ"}),e.jsx(A,{value:"business",children:"–ë–∏–∑–Ω–µ—Å"}),e.jsx(A,{value:"permissions",children:"–ü—Ä–∞–≤–∞"}),e.jsx(A,{value:"settings",children:"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"})]}),e.jsx(L,{value:"basic",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"username",children:"–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è *"}),e.jsx(x,{id:"username",value:t.username,onChange:a=>i({...t,username:a.target.value}),placeholder:"partner123",required:!0,disabled:!!n,"data-testid":"input-partner-username"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"email",children:"Email *"}),e.jsx(x,{id:"email",type:"email",value:t.email,onChange:a=>i({...t,email:a.target.value}),placeholder:"partner@example.com",required:!0,"data-testid":"input-partner-email"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"firstName",children:"–ò–º—è *"}),e.jsx(x,{id:"firstName",value:t.firstName,onChange:a=>i({...t,firstName:a.target.value}),placeholder:"–ò–≤–∞–Ω",required:!0,"data-testid":"input-partner-first-name"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"lastName",children:"–§–∞–º–∏–ª–∏—è *"}),e.jsx(x,{id:"lastName",value:t.lastName,onChange:a=>i({...t,lastName:a.target.value}),placeholder:"–ò–≤–∞–Ω–æ–≤",required:!0,"data-testid":"input-partner-last-name"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"company",children:"–ö–æ–º–ø–∞–Ω–∏—è"}),e.jsx(x,{id:"company",value:t.company,onChange:a=>i({...t,company:a.target.value}),placeholder:"–û–û–û –†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞","data-testid":"input-partner-company"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"phone",children:"–¢–µ–ª–µ—Ñ–æ–Ω"}),e.jsx(x,{id:"phone",value:t.phone,onChange:a=>i({...t,phone:a.target.value}),placeholder:"+7 (999) 123-45-67","data-testid":"input-partner-phone"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"country",children:"–°—Ç—Ä–∞–Ω–∞"}),e.jsxs(N,{value:t.country,onValueChange:a=>i({...t,country:a}),children:[e.jsx(y,{"data-testid":"select-partner-country",children:e.jsx(b,{})}),e.jsxs(C,{children:[e.jsx(l,{value:"US",children:"–°–®–ê"}),e.jsx(l,{value:"RU",children:"–†–æ—Å—Å–∏—è"}),e.jsx(l,{value:"UA",children:"–£–∫—Ä–∞–∏–Ω–∞"}),e.jsx(l,{value:"BY",children:"–ë–µ–ª–∞—Ä—É—Å—å"}),e.jsx(l,{value:"KZ",children:"–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω"}),e.jsx(l,{value:"DE",children:"–ì–µ—Ä–º–∞–Ω–∏—è"}),e.jsx(l,{value:"GB",children:"–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è"}),e.jsx(l,{value:"CA",children:"–ö–∞–Ω–∞–¥–∞"})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"language",children:"–Ø–∑—ã–∫"}),e.jsxs(N,{value:t.language,onValueChange:a=>i({...t,language:a}),children:[e.jsx(y,{"data-testid":"select-partner-language",children:e.jsx(b,{})}),e.jsxs(C,{children:[e.jsx(l,{value:"en",children:"English"}),e.jsx(l,{value:"ru",children:"–†—É—Å—Å–∫–∏–π"}),e.jsx(l,{value:"es",children:"Espa√±ol"}),e.jsx(l,{value:"de",children:"Deutsch"})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"timezone",children:"–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å"}),e.jsxs(N,{value:t.timezone,onValueChange:a=>i({...t,timezone:a}),children:[e.jsx(y,{"data-testid":"select-partner-timezone",children:e.jsx(b,{})}),e.jsxs(C,{children:[e.jsx(l,{value:"UTC",children:"UTC"}),e.jsx(l,{value:"America/New_York",children:"EST"}),e.jsx(l,{value:"Europe/London",children:"GMT"}),e.jsx(l,{value:"Europe/Moscow",children:"MSK"}),e.jsx(l,{value:"Asia/Shanghai",children:"CST"})]})]})]})]})]})}),e.jsx(L,{value:"business",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{children:"–ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:["SEO","PPC","Social Media","Email","Display","Native","Push","Pop","SMS","Influencer","Affiliate","Direct"].map(a=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.trafficSources.includes(a),onChange:o=>{o.target.checked?i({...t,trafficSources:[...t.trafficSources,a]}):i({...t,trafficSources:t.trafficSources.filter(T=>T!==a)})},"data-testid":`checkbox-traffic-${a.toLowerCase().replace(" ","-")}`}),e.jsx("span",{className:"text-sm",children:a})]},a))})]}),e.jsxs("div",{children:[e.jsx(c,{children:"–í–µ—Ä—Ç–∏–∫–∞–ª–∏"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:["Gambling","Dating","Finance","Crypto","E-commerce","Mobile Apps","Games","Health","Education","Travel","Sports","Tech"].map(a=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.verticals.includes(a),onChange:o=>{o.target.checked?i({...t,verticals:[...t.verticals,a]}):i({...t,verticals:t.verticals.filter(T=>T!==a)})},"data-testid":`checkbox-vertical-${a.toLowerCase().replace(" ","-")}`}),e.jsx("span",{className:"text-sm",children:a})]},a))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"tier",children:"–£—Ä–æ–≤–µ–Ω—å –ø–∞—Ä—Ç–Ω–µ—Ä–∞"}),e.jsxs(N,{value:t.tier,onValueChange:a=>i({...t,tier:a}),children:[e.jsx(y,{"data-testid":"select-partner-tier",children:e.jsx(b,{})}),e.jsxs(C,{children:[e.jsx(l,{value:"bronze",children:"ü•â Bronze"}),e.jsx(l,{value:"silver",children:"ü•à Silver"}),e.jsx(l,{value:"gold",children:"ü•á Gold"}),e.jsx(l,{value:"platinum",children:"üíé Platinum"})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"commissionRate",children:"–ö–æ–º–∏—Å—Å–∏—è (%)"}),e.jsx(x,{id:"commissionRate",type:"number",min:"0",max:"100",step:"0.1",value:t.commissionRate,onChange:a=>i({...t,commissionRate:parseFloat(a.target.value)}),placeholder:"0.0","data-testid":"input-commission-rate"})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"notes",children:"–ó–∞–º–µ—Ç–∫–∏"}),e.jsx(te,{id:"notes",value:t.notes,onChange:a=>i({...t,notes:a.target.value}),placeholder:"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ",rows:3,"data-testid":"textarea-partner-notes"})]})]})}),e.jsx(L,{value:"permissions",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"permApi",children:"API –¥–æ—Å—Ç—É–ø"}),e.jsx("p",{className:"text-sm text-gray-500",children:"–†–∞–∑—Ä–µ—à–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API"})]}),e.jsx($,{id:"permApi",checked:t.permissions.api,onCheckedChange:a=>i({...t,permissions:{...t.permissions,api:a}}),"data-testid":"switch-permission-api"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"permStats",children:"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"}),e.jsx("p",{className:"text-sm text-gray-500",children:"–î–æ—Å—Ç—É–ø –∫ –ø–æ–¥—Ä–æ–±–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ"})]}),e.jsx($,{id:"permStats",checked:t.permissions.statistics,onCheckedChange:a=>i({...t,permissions:{...t.permissions,statistics:a}}),"data-testid":"switch-permission-stats"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"permOffers",children:"–û—Ñ—Ñ–µ—Ä—ã"}),e.jsx("p",{className:"text-sm text-gray-500",children:"–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –ø–æ–¥–∞—á–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ –æ—Ñ—Ñ–µ—Ä—ã"})]}),e.jsx($,{id:"permOffers",checked:t.permissions.offers,onCheckedChange:a=>i({...t,permissions:{...t.permissions,offers:a}}),"data-testid":"switch-permission-offers"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"permFinances",children:"–§–∏–Ω–∞–Ω—Å—ã"}),e.jsx("p",{className:"text-sm text-gray-500",children:"–î–æ—Å—Ç—É–ø –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"})]}),e.jsx($,{id:"permFinances",checked:t.permissions.finances,onCheckedChange:a=>i({...t,permissions:{...t.permissions,finances:a}}),"data-testid":"switch-permission-finances"})]})]})}),e.jsx(L,{value:"settings",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{children:[e.jsx(c,{htmlFor:"tags",children:"–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)"}),e.jsx(x,{id:"tags",value:t.tags.join(", "),onChange:a=>i({...t,tags:a.target.value.split(",").map(o=>o.trim()).filter(o=>o.length>0)}),placeholder:"VIP, –≤—ã—Å–æ–∫–∏–π –æ–±—ä–µ–º, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π","data-testid":"input-partner-tags"})]})})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[e.jsx(d,{type:"button",variant:"outline",onClick:w,"data-testid":"button-cancel",children:"–û—Ç–º–µ–Ω–∞"}),e.jsx(d,{type:"submit",disabled:g.isPending,"data-testid":"button-save-partner",children:g.isPending?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":n?"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å":"–°–æ–∑–¥–∞—Ç—å"})]})]})})};function ss(){const{user:n}=je(),{collapsed:I}=pe(),{toast:w}=se(),F=ae(),[m,t]=u.useState(""),[i,g]=u.useState({status:"all",tier:"all",kycStatus:"all",country:"all"}),[B,a]=u.useState("registrationDate"),[o,T]=u.useState("desc"),[j,P]=u.useState([]),[ie,D]=u.useState(!1),[O,V]=u.useState(null),[le,z]=u.useState(!1),{data:f,isLoading:ne,refetch:Le}=ue({queryKey:["/api/advertiser/partners",m,i,B,o],enabled:!!n});R({mutationFn:({partnerId:s,status:r})=>U(`/api/advertiser/partners/${s}/status`,{method:"PATCH",body:{status:r}}),onSuccess:()=>{F.invalidateQueries({queryKey:["/api/advertiser/partners"]}),w({title:"–°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–µ–Ω",description:"–°—Ç–∞—Ç—É—Å –ø–∞—Ä—Ç–Ω–µ—Ä–∞ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω"})}});const q=R({mutationFn:s=>U("/api/advertiser/partners/invite",{method:"POST",body:s}),onSuccess:()=>{w({title:"–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ",description:"–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ email"}),z(!1)}}),re=R({mutationFn:({action:s,partnerIds:r})=>U("/api/advertiser/partners/bulk",{method:"POST",body:{action:s,partnerIds:r}}),onSuccess:()=>{F.invalidateQueries({queryKey:["/api/advertiser/partners"]}),P([]),w({title:"–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞",description:"–ú–∞—Å—Å–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞"})}}),ce=s=>{V(s),D(!0)},M=s=>{j.length!==0&&re.mutate({action:s,partnerIds:j})},de=s=>{const r=`${window.location.origin}/register?ref=${s.referralCode}`;navigator.clipboard.writeText(r),w({title:"–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ",description:"–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞"})},oe=s=>{const r={active:{label:"–ê–∫—Ç–∏–≤–µ–Ω",variant:"default",color:"bg-green-500"},pending:{label:"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏",variant:"outline",color:"bg-yellow-500"},suspended:{label:"–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",variant:"secondary",color:"bg-orange-500"},blocked:{label:"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω",variant:"destructive",color:"bg-red-500"}},h=r[s]||r.pending;return e.jsxs(Q,{variant:h.variant,className:"flex items-center gap-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${h.color}`}),h.label]})},xe=s=>{const r={pending:{label:"–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ",variant:"outline",icon:Ee},approved:{label:"–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω",variant:"default",icon:ye},rejected:{label:"–û—Ç–∫–ª–æ–Ω–µ–Ω",variant:"destructive",icon:Ne}},h=r[s]||r.pending,he=h.icon;return e.jsxs(Q,{variant:h.variant,className:"flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3"}),h.label]})},me=s=>({bronze:"ü•â",silver:"ü•à",gold:"ü•á",platinum:"üíé"})[s]||"ü•â",E=f?.filter(s=>!(m&&!(s.username.toLowerCase().includes(m.toLowerCase())||s.email.toLowerCase().includes(m.toLowerCase())||`${s.firstName} ${s.lastName}`.toLowerCase().includes(m.toLowerCase()))||i.status!=="all"&&s.status!==i.status||i.tier!=="all"&&s.tier!==i.tier||i.kycStatus!=="all"&&s.kycStatus!==i.kycStatus||i.country!=="all"&&s.country!==i.country))||[];return ne?e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((s,r)=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},r))})}):e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏"}),e.jsx("p",{className:"text-gray-600",children:"–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤–∞—à–∏–º–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏ –∏ –∏—Ö –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(d,{variant:"outline",onClick:()=>z(!0),"data-testid":"button-invite-partner",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å"]}),e.jsxs(d,{onClick:()=>{V(null),D(!0)},"data-testid":"button-create-partner",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–∞"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(S,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"–í—Å–µ–≥–æ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f?.length||0})]}),e.jsx(G,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(S,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"–ê–∫—Ç–∏–≤–Ω—ã–µ"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:f?.filter(s=>s.status==="active").length||0})]}),e.jsx(H,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(S,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"–û–±—â–∏–π –¥–æ—Ö–æ–¥"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"$0"})]}),e.jsx(Te,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(S,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:f&&f.length>0?(f.reduce((s,r)=>s+(r.rating||0),0)/f.length).toFixed(1):"0.0"})]}),e.jsx(W,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsx(S,{children:e.jsxs(k,{className:"p-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(x,{placeholder:"–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, email –∏–ª–∏ –ª–æ–≥–∏–Ω—É...",value:m,onChange:s=>t(s.target.value),className:"pl-10","data-testid":"input-search-partners"})]})}),e.jsxs(N,{value:i.status,onValueChange:s=>g({...i,status:s}),children:[e.jsx(y,{className:"w-40","data-testid":"select-filter-status",children:e.jsx(b,{placeholder:"–°—Ç–∞—Ç—É—Å"})}),e.jsxs(C,{children:[e.jsx(l,{value:"all",children:"–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã"}),e.jsx(l,{value:"active",children:"–ê–∫—Ç–∏–≤–Ω—ã–µ"}),e.jsx(l,{value:"pending",children:"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏"}),e.jsx(l,{value:"suspended",children:"–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ"}),e.jsx(l,{value:"blocked",children:"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ"})]})]}),e.jsxs(N,{value:i.tier,onValueChange:s=>g({...i,tier:s}),children:[e.jsx(y,{className:"w-40","data-testid":"select-filter-tier",children:e.jsx(b,{placeholder:"–£—Ä–æ–≤–µ–Ω—å"})}),e.jsxs(C,{children:[e.jsx(l,{value:"all",children:"–í—Å–µ —É—Ä–æ–≤–Ω–∏"}),e.jsx(l,{value:"bronze",children:"ü•â Bronze"}),e.jsx(l,{value:"silver",children:"ü•à Silver"}),e.jsx(l,{value:"gold",children:"ü•á Gold"}),e.jsx(l,{value:"platinum",children:"üíé Platinum"})]})]}),e.jsxs(N,{value:i.kycStatus,onValueChange:s=>g({...i,kycStatus:s}),children:[e.jsx(y,{className:"w-40","data-testid":"select-filter-kyc",children:e.jsx(b,{placeholder:"KYC"})}),e.jsxs(C,{children:[e.jsx(l,{value:"all",children:"–í—Å–µ KYC"}),e.jsx(l,{value:"pending",children:"–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ"}),e.jsx(l,{value:"approved",children:"–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã"}),e.jsx(l,{value:"rejected",children:"–û—Ç–∫–ª–æ–Ω–µ–Ω—ã"})]})]})]}),j.length>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-4 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-blue-600",children:["–í—ã–±—Ä–∞–Ω–æ: ",j.length," –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤"]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsxs(d,{size:"sm",variant:"outline",onClick:()=>M("activate"),"data-testid":"button-bulk-activate",children:[e.jsx(H,{className:"w-4 h-4 mr-1"}),"–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å"]}),e.jsxs(d,{size:"sm",variant:"outline",onClick:()=>M("suspend"),"data-testid":"button-bulk-suspend",children:[e.jsx($e,{className:"w-4 h-4 mr-1"}),"–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"]}),e.jsxs(d,{size:"sm",variant:"outline",onClick:()=>M("block"),"data-testid":"button-bulk-block",children:[e.jsx(ve,{className:"w-4 h-4 mr-1"}),"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"]})]})]})]})}),e.jsx(S,{children:e.jsxs(k,{className:"p-0",children:[e.jsxs(we,{children:[e.jsx(Se,{children:e.jsxs(J,{children:[e.jsx(p,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:j.length===E.length&&E.length>0,onChange:s=>{s.target.checked?P(E.map(r=>r.id)):P([])},"data-testid":"checkbox-select-all"})}),e.jsx(p,{children:"–ü–∞—Ä—Ç–Ω–µ—Ä"}),e.jsx(p,{children:"–°—Ç–∞—Ç—É—Å"}),e.jsx(p,{children:"–£—Ä–æ–≤–µ–Ω—å"}),e.jsx(p,{children:"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"}),e.jsx(p,{children:"–ë–∞–ª–∞–Ω—Å"}),e.jsx(p,{children:"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"}),e.jsx(p,{className:"w-32",children:"–î–µ–π—Å—Ç–≤–∏—è"})]})}),e.jsx(ke,{children:E.map(s=>e.jsxs(J,{className:"hover:bg-gray-50",children:[e.jsx(v,{children:e.jsx("input",{type:"checkbox",checked:j.includes(s.id),onChange:r=>{r.target.checked?P([...j,s.id]):P(j.filter(h=>h!==s.id))},"data-testid":`checkbox-partner-${s.id}`})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:[s.firstName.charAt(0),s.lastName.charAt(0)]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[s.firstName," ",s.lastName]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["@",s.username]}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),s.company&&e.jsx("p",{className:"text-xs text-gray-400",children:s.company})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-1",children:[oe(s.status),xe(s.kycStatus)]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:me(s.tier)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:s.tier}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(W,{className:"w-3 h-3 text-yellow-500"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[s.rating,"/5"]})]})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"–ö–ª–∏–∫–∏:"}),e.jsx("span",{className:"font-medium",children:s.statistics?.totalClicks?.toLocaleString()||"0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"CR:"}),e.jsxs("span",{className:"font-medium text-purple-600",children:[s.statistics?.averageCR||"0","%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"EPC:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:["$",s.statistics?.averageEPC||"0"]})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"–ë–∞–ª–∞–Ω—Å:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["$",(s.balance||0).toFixed(2)]})]}),(s.holdAmount||0)>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"–£–¥–µ—Ä–∂–∞–Ω–æ:"}),e.jsxs("span",{className:"font-medium text-orange-600",children:["$",(s.holdAmount||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"–î–æ—Ö–æ–¥:"}),e.jsxs("span",{className:"font-medium",children:["$",s.statistics?.totalRevenue?.toLocaleString()||"0"]})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{children:new Date(s.registrationDate).toLocaleDateString("ru-RU")}),e.jsx("p",{className:"text-gray-500",children:s.country}),e.jsxs("p",{className:"text-xs text-gray-400",children:["–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: ",new Date(s.lastActivity).toLocaleDateString("ru-RU")]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>ce(s),title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–∞","data-testid":`button-edit-${s.id}`,children:e.jsx(De,{className:"w-4 h-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>de(s),title:"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É","data-testid":`button-copy-ref-${s.id}`,children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>window.open(`/partner/${s.id}/stats`,"_blank"),title:"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞","data-testid":`button-stats-${s.id}`,children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>window.open(`mailto:${s.email}`,"_blank"),title:"–ù–∞–ø–∏—Å–∞—Ç—å –ø–∏—Å—å–º–æ","data-testid":`button-email-${s.id}`,children:e.jsx(fe,{className:"w-4 h-4"})})]})})]},s.id))})]}),E.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"–ù–µ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤"}),e.jsx("p",{className:"text-gray-500 mb-4",children:m||Object.values(i).some(s=>s!=="all")?"–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ":"–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –≤–∞—à–∏—Ö –ø–µ—Ä–≤—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤"}),e.jsxs(d,{onClick:()=>z(!0),"data-testid":"button-invite-first-partner",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–∞"]})]})]})}),e.jsx(Y,{open:ie,onOpenChange:D,children:e.jsxs(_,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(X,{children:e.jsx(Z,{children:O?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞":"–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞"})}),e.jsx(Ae,{partner:O||void 0,onSuccess:()=>D(!1),onCancel:()=>D(!1)})]})}),e.jsx(Y,{open:le,onOpenChange:z,children:e.jsxs(_,{className:"max-w-md",children:[e.jsx(X,{children:e.jsx(Z,{children:"–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–∞"})}),e.jsxs("form",{onSubmit:s=>{s.preventDefault();const r=new FormData(s.currentTarget);q.mutate({email:r.get("email"),message:r.get("message")})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"inviteEmail",children:"Email –ø–∞—Ä—Ç–Ω–µ—Ä–∞ *"}),e.jsx(x,{id:"inviteEmail",name:"email",type:"email",placeholder:"partner@example.com",required:!0,"data-testid":"input-invite-email"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"inviteMessage",children:"–°–æ–æ–±—â–µ–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"}),e.jsx(te,{id:"inviteMessage",name:"message",placeholder:"–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞",rows:3,"data-testid":"textarea-invite-message"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>z(!1),"data-testid":"button-cancel-invite",children:"–û—Ç–º–µ–Ω–∞"}),e.jsx(d,{type:"submit",disabled:q.isPending,"data-testid":"button-send-invite",children:q.isPending?"–û—Ç–ø—Ä–∞–≤–∫–∞...":"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ"})]})]})]})})]})}export{ss as default};
