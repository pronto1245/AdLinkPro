var uX=Object.defineProperty;var LE=e=>{throw TypeError(e)};var hX=(e,t,n)=>t in e?uX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ye=(e,t,n)=>hX(e,typeof t!="symbol"?t+"":t,n),wN=(e,t,n)=>t.has(e)||LE("Cannot "+n);var B=(e,t,n)=>(wN(e,t,"read from private field"),n?n.call(e):t.get(e)),be=(e,t,n)=>t.has(e)?LE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),je=(e,t,n,s)=>(wN(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Ce=(e,t,n)=>(wN(e,t,"access private method"),n);var xy=(e,t,n,s)=>({set _(a){je(e,t,a,n)},get _(){return B(e,t,s)}});function fX(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var GF={exports:{}},jw={},YF={exports:{}},Yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v=Symbol.for("react.element"),mX=Symbol.for("react.portal"),pX=Symbol.for("react.fragment"),xX=Symbol.for("react.strict_mode"),gX=Symbol.for("react.profiler"),vX=Symbol.for("react.provider"),yX=Symbol.for("react.context"),bX=Symbol.for("react.forward_ref"),jX=Symbol.for("react.suspense"),wX=Symbol.for("react.memo"),NX=Symbol.for("react.lazy"),UE=Symbol.iterator;function kX(e){return e===null||typeof e!="object"?null:(e=UE&&e[UE]||e["@@iterator"],typeof e=="function"?e:null)}var XF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZF=Object.assign,QF={};function Sm(e,t,n){this.props=e,this.context=t,this.refs=QF,this.updater=n||XF}Sm.prototype.isReactComponent={};Sm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function JF(){}JF.prototype=Sm.prototype;function IP(e,t,n){this.props=e,this.context=t,this.refs=QF,this.updater=n||XF}var FP=IP.prototype=new JF;FP.constructor=IP;ZF(FP,Sm.prototype);FP.isPureReactComponent=!0;var BE=Array.isArray,eL=Object.prototype.hasOwnProperty,LP={current:null},tL={key:!0,ref:!0,__self:!0,__source:!0};function rL(e,t,n){var s,a={},i=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)eL.call(t,s)&&!tL.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return{$$typeof:_v,type:e,key:i,ref:l,props:a,_owner:LP.current}}function SX(e,t){return{$$typeof:_v,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function UP(e){return typeof e=="object"&&e!==null&&e.$$typeof===_v}function CX(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var zE=/\/+/g;function NN(e,t){return typeof e=="object"&&e!==null&&e.key!=null?CX(""+e.key):t.toString(36)}function y0(e,t,n,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case _v:case mX:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+NN(l,0):s,BE(a)?(n="",e!=null&&(n=e.replace(zE,"$&/")+"/"),y0(a,t,n,"",function(d){return d})):a!=null&&(UP(a)&&(a=SX(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(zE,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=s===""?".":s+":",BE(e))for(var o=0;o<e.length;o++){i=e[o];var c=s+NN(i,o);l+=y0(i,t,n,c,a)}else if(c=kX(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=s+NN(i,o++),l+=y0(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function vy(e,t,n){if(e==null)return e;var s=[],a=0;return y0(e,s,"","",function(i){return t.call(n,i,a++)}),s}function _X(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ts={current:null},b0={transition:null},PX={ReactCurrentDispatcher:Ts,ReactCurrentBatchConfig:b0,ReactCurrentOwner:LP};function nL(){throw Error("act(...) is not supported in production builds of React.")}Yt.Children={map:vy,forEach:function(e,t,n){vy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return vy(e,function(){t++}),t},toArray:function(e){return vy(e,function(t){return t})||[]},only:function(e){if(!UP(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Yt.Component=Sm;Yt.Fragment=pX;Yt.Profiler=gX;Yt.PureComponent=IP;Yt.StrictMode=xX;Yt.Suspense=jX;Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PX;Yt.act=nL;Yt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=ZF({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=LP.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)eL.call(t,c)&&!tL.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:_v,type:e.type,key:a,ref:i,props:s,_owner:l}};Yt.createContext=function(e){return e={$$typeof:yX,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vX,_context:e},e.Consumer=e};Yt.createElement=rL;Yt.createFactory=function(e){var t=rL.bind(null,e);return t.type=e,t};Yt.createRef=function(){return{current:null}};Yt.forwardRef=function(e){return{$$typeof:bX,render:e}};Yt.isValidElement=UP;Yt.lazy=function(e){return{$$typeof:NX,_payload:{_status:-1,_result:e},_init:_X}};Yt.memo=function(e,t){return{$$typeof:wX,type:e,compare:t===void 0?null:t}};Yt.startTransition=function(e){var t=b0.transition;b0.transition={};try{e()}finally{b0.transition=t}};Yt.unstable_act=nL;Yt.useCallback=function(e,t){return Ts.current.useCallback(e,t)};Yt.useContext=function(e){return Ts.current.useContext(e)};Yt.useDebugValue=function(){};Yt.useDeferredValue=function(e){return Ts.current.useDeferredValue(e)};Yt.useEffect=function(e,t){return Ts.current.useEffect(e,t)};Yt.useId=function(){return Ts.current.useId()};Yt.useImperativeHandle=function(e,t,n){return Ts.current.useImperativeHandle(e,t,n)};Yt.useInsertionEffect=function(e,t){return Ts.current.useInsertionEffect(e,t)};Yt.useLayoutEffect=function(e,t){return Ts.current.useLayoutEffect(e,t)};Yt.useMemo=function(e,t){return Ts.current.useMemo(e,t)};Yt.useReducer=function(e,t,n){return Ts.current.useReducer(e,t,n)};Yt.useRef=function(e){return Ts.current.useRef(e)};Yt.useState=function(e){return Ts.current.useState(e)};Yt.useSyncExternalStore=function(e,t,n){return Ts.current.useSyncExternalStore(e,t,n)};Yt.useTransition=function(){return Ts.current.useTransition()};Yt.version="18.3.1";YF.exports=Yt;var y=YF.exports;const Z=Qt(y),sL=fX({__proto__:null,default:Z},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AX=y,TX=Symbol.for("react.element"),EX=Symbol.for("react.fragment"),OX=Object.prototype.hasOwnProperty,RX=AX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DX={key:!0,ref:!0,__self:!0,__source:!0};function aL(e,t,n){var s,a={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)OX.call(t,s)&&!DX.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:TX,type:e,key:i,ref:l,props:a,_owner:RX.current}}jw.Fragment=EX;jw.jsx=aL;jw.jsxs=aL;GF.exports=jw;var r=GF.exports;const Pt=e=>typeof e=="string",lp=()=>{let e,t;const n=new Promise((s,a)=>{e=s,t=a});return n.resolve=e,n.reject=t,n},VE=e=>e==null?"":""+e,MX=(e,t,n)=>{e.forEach(s=>{t[s]&&(n[s]=t[s])})},$X=/###/g,qE=e=>e&&e.indexOf("###")>-1?e.replace($X,"."):e,WE=e=>!e||Pt(e),Zp=(e,t,n)=>{const s=Pt(t)?t.split("."):t;let a=0;for(;a<s.length-1;){if(WE(e))return{};const i=qE(s[a]);!e[i]&&n&&(e[i]=new n),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++a}return WE(e)?{}:{obj:e,k:qE(s[a])}},HE=(e,t,n)=>{const{obj:s,k:a}=Zp(e,t,Object);if(s!==void 0||t.length===1){s[a]=n;return}let i=t[t.length-1],l=t.slice(0,t.length-1),o=Zp(e,l,Object);for(;o.obj===void 0&&l.length;)i=`${l[l.length-1]}.${i}`,l=l.slice(0,l.length-1),o=Zp(e,l,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=n},IX=(e,t,n,s)=>{const{obj:a,k:i}=Zp(e,t,Object);a[i]=a[i]||[],a[i].push(n)},G0=(e,t)=>{const{obj:n,k:s}=Zp(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,s))return n[s]},FX=(e,t,n)=>{const s=G0(e,n);return s!==void 0?s:G0(t,n)},iL=(e,t,n)=>{for(const s in t)s!=="__proto__"&&s!=="constructor"&&(s in e?Pt(e[s])||e[s]instanceof String||Pt(t[s])||t[s]instanceof String?n&&(e[s]=t[s]):iL(e[s],t[s],n):e[s]=t[s]);return e},Hu=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var LX={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const UX=e=>Pt(e)?e.replace(/[&<>"'\/]/g,t=>LX[t]):e;class BX{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const s=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,s),this.regExpQueue.push(t),s}}const zX=[" ",",","?","!",";"],VX=new BX(20),qX=(e,t,n)=>{t=t||"",n=n||"";const s=zX.filter(l=>t.indexOf(l)<0&&n.indexOf(l)<0);if(s.length===0)return!0;const a=VX.getRegExp(`(${s.map(l=>l==="?"?"\\?":l).join("|")})`);let i=!a.test(e);if(!i){const l=e.indexOf(n);l>0&&!a.test(e.substring(0,l))&&(i=!0)}return i},SS=(e,t,n=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const s=t.split(n);let a=e;for(let i=0;i<s.length;){if(!a||typeof a!="object")return;let l,o="";for(let c=i;c<s.length;++c)if(c!==i&&(o+=n),o+=s[c],l=a[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&c<s.length-1)continue;i+=c-i+1;break}a=l}return a},kx=e=>e==null?void 0:e.replace("_","-"),WX={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,s;(s=(n=console==null?void 0:console[e])==null?void 0:n.apply)==null||s.call(n,console,t)}};class Y0{constructor(t,n={}){this.init(t,n)}init(t,n={}){this.prefix=n.prefix||"i18next:",this.logger=t||WX,this.options=n,this.debug=n.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,s,a){return a&&!this.debug?null:(Pt(t[0])&&(t[0]=`${s}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new Y0(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Y0(this.logger,t)}}var ml=new Y0;let ww=class{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const a=this.observers[s].get(n)||0;this.observers[s].set(n,a+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t,...n){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([a,i])=>{for(let l=0;l<i;l++)a(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,i])=>{for(let l=0;l<i;l++)a.apply(a,[t,...n])})}};class KE extends ww{constructor(t,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,s,a={}){var d,u;const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;t.indexOf(".")>-1?o=t.split("."):(o=[t,n],s&&(Array.isArray(s)?o.push(...s):Pt(s)&&i?o.push(...s.split(i)):o.push(s)));const c=G0(this.data,o);return!c&&!n&&!s&&t.indexOf(".")>-1&&(t=o[0],n=o[1],s=o.slice(2).join(".")),c||!l||!Pt(s)?c:SS((u=(d=this.data)==null?void 0:d[t])==null?void 0:u[n],s,i)}addResource(t,n,s,a,i={silent:!1}){const l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[t,n];s&&(o=o.concat(l?s.split(l):s)),t.indexOf(".")>-1&&(o=t.split("."),a=n,n=o[1]),this.addNamespaces(n),HE(this.data,o,a),i.silent||this.emit("added",t,n,s,a)}addResources(t,n,s,a={silent:!1}){for(const i in s)(Pt(s[i])||Array.isArray(s[i]))&&this.addResource(t,n,i,s[i],{silent:!0});a.silent||this.emit("added",t,n,s)}addResourceBundle(t,n,s,a,i,l={silent:!1,skipCopy:!1}){let o=[t,n];t.indexOf(".")>-1&&(o=t.split("."),a=s,s=n,n=o[1]),this.addNamespaces(n);let c=G0(this.data,o)||{};l.skipCopy||(s=JSON.parse(JSON.stringify(s))),a?iL(c,s,i):c={...c,...s},HE(this.data,o,c),l.silent||this.emit("added",t,n,s)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(a=>n[a]&&Object.keys(n[a]).length>0)}toJSON(){return this.data}}var lL={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,s,a){return e.forEach(i=>{var l;t=((l=this.processors[i])==null?void 0:l.process(t,n,s,a))??t}),t}};const GE={},YE=e=>!Pt(e)&&typeof e!="boolean"&&typeof e!="number";let XE=class oL extends ww{constructor(t,n={}){super(),MX(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ml.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,n={interpolation:{}}){const s={...n};if(t==null)return!1;const a=this.resolve(t,s);return(a==null?void 0:a.res)!==void 0}extractFromKey(t,n){let s=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const l=s&&t.indexOf(s)>-1,o=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!qX(t,s,a);if(l&&!o){const c=t.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:t,namespaces:Pt(i)?[i]:i};const d=t.split(s);(s!==a||s===a&&this.options.ns.indexOf(d[0])>-1)&&(i=d.shift()),t=d.join(a)}return{key:t,namespaces:Pt(i)?[i]:i}}translate(t,n,s){let a=typeof n=="object"?{...n}:n;if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(a={...a}),a||(a={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:o,namespaces:c}=this.extractFromKey(t[t.length-1],a),d=c[c.length-1];let u=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;u===void 0&&(u=":");const h=a.lng||this.language,f=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return f?i?{res:`${d}${u}${o}`,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:d,usedParams:this.getUsedParamsDetails(a)}:`${d}${u}${o}`:i?{res:o,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:d,usedParams:this.getUsedParamsDetails(a)}:o;const m=this.resolve(t,a);let v=m==null?void 0:m.res;const x=(m==null?void 0:m.usedKey)||o,w=(m==null?void 0:m.exactUsedKey)||o,j=["[object Number]","[object Function]","[object RegExp]"],g=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,p=a.count!==void 0&&!Pt(a.count),N=oL.hasDefaultValue(a),k=p?this.pluralResolver.getSuffix(h,a.count,a):"",C=a.ordinal&&p?this.pluralResolver.getSuffix(h,a.count,{ordinal:!1}):"",_=p&&!a.ordinal&&a.count===0,P=_&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${k}`]||a[`defaultValue${C}`]||a.defaultValue;let D=v;b&&!v&&N&&(D=P);const E=YE(D),$=Object.prototype.toString.apply(D);if(b&&D&&E&&j.indexOf($)<0&&!(Pt(g)&&Array.isArray(D))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const A=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,D,{...a,ns:c}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(m.res=A,m.usedParams=this.getUsedParamsDetails(a),m):A}if(l){const A=Array.isArray(D),T=A?[]:{},O=A?w:x;for(const z in D)if(Object.prototype.hasOwnProperty.call(D,z)){const F=`${O}${l}${z}`;N&&!v?T[z]=this.translate(F,{...a,defaultValue:YE(P)?P[z]:void 0,joinArrays:!1,ns:c}):T[z]=this.translate(F,{...a,joinArrays:!1,ns:c}),T[z]===F&&(T[z]=D[z])}v=T}}else if(b&&Pt(g)&&Array.isArray(v))v=v.join(g),v&&(v=this.extendTranslation(v,t,a,s));else{let A=!1,T=!1;!this.isValidLookup(v)&&N&&(A=!0,v=P),this.isValidLookup(v)||(T=!0,v=o);const z=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&T?void 0:v,F=N&&P!==v&&this.options.updateMissing;if(T||A||F){if(this.logger.log(F?"updateKey":"missingKey",h,d,o,F?P:v),l){const Y=this.resolve(o,{...a,keySeparator:!1});Y&&Y.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let R=[];const I=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&I&&I[0])for(let Y=0;Y<I.length;Y++)R.push(I[Y]);else this.options.saveMissingTo==="all"?R=this.languageUtils.toResolveHierarchy(a.lng||this.language):R.push(a.lng||this.language);const Q=(Y,K,oe)=>{var Ne;const ge=N&&oe!==v?oe:z;this.options.missingKeyHandler?this.options.missingKeyHandler(Y,d,K,ge,F,a):(Ne=this.backendConnector)!=null&&Ne.saveMissing&&this.backendConnector.saveMissing(Y,d,K,ge,F,a),this.emit("missingKey",Y,d,K,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&p?R.forEach(Y=>{const K=this.pluralResolver.getSuffixes(Y,a);_&&a[`defaultValue${this.options.pluralSeparator}zero`]&&K.indexOf(`${this.options.pluralSeparator}zero`)<0&&K.push(`${this.options.pluralSeparator}zero`),K.forEach(oe=>{Q([Y],o+oe,a[`defaultValue${oe}`]||P)})}):Q(R,o,P))}v=this.extendTranslation(v,t,a,m,s),T&&v===o&&this.options.appendNamespaceToMissingKey&&(v=`${d}${u}${o}`),(T||A)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${u}${o}`:o,A?v:void 0,a))}return i?(m.res=v,m.usedParams=this.getUsedParamsDetails(a),m):v}extendTranslation(t,n,s,a,i){var c,d;if((c=this.i18nFormat)!=null&&c.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const u=Pt(t)&&(((d=s==null?void 0:s.interpolation)==null?void 0:d.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(u){const m=t.match(this.interpolator.nestingRegexp);h=m&&m.length}let f=s.replace&&!Pt(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),t=this.interpolator.interpolate(t,f,s.lng||this.language||a.usedLng,s),u){const m=t.match(this.interpolator.nestingRegexp),v=m&&m.length;h<v&&(s.nest=!1)}!s.lng&&a&&a.res&&(s.lng=this.language||a.usedLng),s.nest!==!1&&(t=this.interpolator.nest(t,(...m)=>(i==null?void 0:i[0])===m[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${m[0]} in key: ${n[0]}`),null):this.translate(...m,n),s)),s.interpolation&&this.interpolator.reset()}const l=s.postProcess||this.options.postProcess,o=Pt(l)?[l]:l;return t!=null&&(o!=null&&o.length)&&s.applyPostProcessor!==!1&&(t=lL.handle(o,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),t}resolve(t,n={}){let s,a,i,l,o;return Pt(t)&&(t=[t]),t.forEach(c=>{if(this.isValidLookup(s))return;const d=this.extractFromKey(c,n),u=d.key;a=u;let h=d.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=n.count!==void 0&&!Pt(n.count),m=f&&!n.ordinal&&n.count===0,v=n.context!==void 0&&(Pt(n.context)||typeof n.context=="number")&&n.context!=="",x=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(w=>{var j,g;this.isValidLookup(s)||(o=w,!GE[`${x[0]}-${w}`]&&((j=this.utils)!=null&&j.hasLoadedNamespace)&&!((g=this.utils)!=null&&g.hasLoadedNamespace(o))&&(GE[`${x[0]}-${w}`]=!0,this.logger.warn(`key "${a}" for languages "${x.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(b=>{var k;if(this.isValidLookup(s))return;l=b;const p=[u];if((k=this.i18nFormat)!=null&&k.addLookupKeys)this.i18nFormat.addLookupKeys(p,u,b,w,n);else{let C;f&&(C=this.pluralResolver.getSuffix(b,n.count,n));const _=`${this.options.pluralSeparator}zero`,P=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(p.push(u+C),n.ordinal&&C.indexOf(P)===0&&p.push(u+C.replace(P,this.options.pluralSeparator)),m&&p.push(u+_)),v){const D=`${u}${this.options.contextSeparator}${n.context}`;p.push(D),f&&(p.push(D+C),n.ordinal&&C.indexOf(P)===0&&p.push(D+C.replace(P,this.options.pluralSeparator)),m&&p.push(D+_))}}let N;for(;N=p.pop();)this.isValidLookup(s)||(i=N,s=this.getResource(b,w,N,n))}))})}),{res:s,usedKey:a,exactUsedKey:i,usedLng:l,usedNS:o}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,s,a={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(t,n,s,a):this.resourceStore.getResource(t,n,s,a)}getUsedParamsDetails(t={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=t.replace&&!Pt(t.replace);let a=s?t.replace:t;if(s&&typeof t.count<"u"&&(a.count=t.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!s){a={...a};for(const i of n)delete a[i]}return a}static hasDefaultValue(t){const n="defaultValue";for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&n===s.substring(0,n.length)&&t[s]!==void 0)return!0;return!1}};class ZE{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ml.create("languageUtils")}getScriptPartFromCode(t){if(t=kx(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=kx(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(Pt(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(s=>{if(n)return;const a=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(a))&&(n=a)}),!n&&this.options.supportedLngs&&t.forEach(s=>{if(n)return;const a=this.getScriptPartFromCode(s);if(this.isSupportedCode(a))return n=a;const i=this.getLanguagePartFromCode(s);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(l=>{if(l===i)return l;if(!(l.indexOf("-")<0&&i.indexOf("-")<0)&&(l.indexOf("-")>0&&i.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===i||l.indexOf(i)===0&&i.length>1))return l})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),Pt(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let s=t[n];return s||(s=t[this.getScriptPartFromCode(n)]),s||(s=t[this.formatLanguageCode(n)]),s||(s=t[this.getLanguagePartFromCode(n)]),s||(s=t.default),s||[]}toResolveHierarchy(t,n){const s=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],t),a=[],i=l=>{l&&(this.isSupportedCode(l)?a.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Pt(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):Pt(t)&&i(this.formatLanguageCode(t)),s.forEach(l=>{a.indexOf(l)<0&&i(this.formatLanguageCode(l))}),a}}const QE={zero:0,one:1,two:2,few:3,many:4,other:5},JE={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class HX{constructor(t,n={}){this.languageUtils=t,this.options=n,this.logger=ml.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t,n={}){const s=kx(t==="dev"?"en":t),a=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:a});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let l;try{l=new Intl.PluralRules(s,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),JE;if(!t.match(/-|_/))return JE;const c=this.languageUtils.getLanguagePartFromCode(t);l=this.getRule(c,n)}return this.pluralRulesCache[i]=l,l}needsPlural(t,n={}){let s=this.getRule(t,n);return s||(s=this.getRule("dev",n)),(s==null?void 0:s.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,n,s={}){return this.getSuffixes(t,s).map(a=>`${n}${a}`)}getSuffixes(t,n={}){let s=this.getRule(t,n);return s||(s=this.getRule("dev",n)),s?s.resolvedOptions().pluralCategories.sort((a,i)=>QE[a]-QE[i]).map(a=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(t,n,s={}){const a=this.getRule(t,s);return a?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${a.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,s))}}const eO=(e,t,n,s=".",a=!0)=>{let i=FX(e,t,n);return!i&&a&&Pt(n)&&(i=SS(e,n,s),i===void 0&&(i=SS(t,n,s))),i},kN=e=>e.replace(/\$/g,"$$$$");class KX{constructor(t={}){var n;this.logger=ml.create("interpolator"),this.options=t,this.format=((n=t==null?void 0:t.interpolation)==null?void 0:n.format)||(s=>s),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:s,useRawValueToEscape:a,prefix:i,prefixEscaped:l,suffix:o,suffixEscaped:c,formatSeparator:d,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:m,nestingSuffix:v,nestingSuffixEscaped:x,nestingOptionsSeparator:w,maxReplaces:j,alwaysFormat:g}=t.interpolation;this.escape=n!==void 0?n:UX,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=i?Hu(i):l||"{{",this.suffix=o?Hu(o):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=f?Hu(f):m||Hu("$t("),this.nestingSuffix=v?Hu(v):x||Hu(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=j||1e3,this.alwaysFormat=g!==void 0?g:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,s)=>(n==null?void 0:n.source)===s?(n.lastIndex=0,n):new RegExp(s,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,s,a){var m;let i,l,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=v=>{if(v.indexOf(this.formatSeparator)<0){const g=eO(n,c,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(g,void 0,s,{...a,...n,interpolationkey:v}):g}const x=v.split(this.formatSeparator),w=x.shift().trim(),j=x.join(this.formatSeparator).trim();return this.format(eO(n,c,w,this.options.keySeparator,this.options.ignoreJSONStructure),j,s,{...a,...n,interpolationkey:w})};this.resetRegExp();const u=(a==null?void 0:a.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((m=a==null?void 0:a.interpolation)==null?void 0:m.skipOnVariables)!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>kN(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?kN(this.escape(v)):kN(v)}].forEach(v=>{for(o=0;i=v.regex.exec(t);){const x=i[1].trim();if(l=d(x),l===void 0)if(typeof u=="function"){const j=u(t,i,a);l=Pt(j)?j:""}else if(a&&Object.prototype.hasOwnProperty.call(a,x))l="";else if(h){l=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${t}`),l="";else!Pt(l)&&!this.useRawValueToEscape&&(l=VE(l));const w=v.safeValue(l);if(t=t.replace(i[0],w),h?(v.regex.lastIndex+=l.length,v.regex.lastIndex-=i[0].length):v.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),t}nest(t,n,s={}){let a,i,l;const o=(c,d)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const h=c.split(new RegExp(`${u}[ ]*{`));let f=`{${h[1]}`;c=h[0],f=this.interpolate(f,l);const m=f.match(/'/g),v=f.match(/"/g);(((m==null?void 0:m.length)??0)%2===0&&!v||v.length%2!==0)&&(f=f.replace(/'/g,'"'));try{l=JSON.parse(f),d&&(l={...d,...l})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,x),`${c}${u}${f}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,c};for(;a=this.nestingRegexp.exec(t);){let c=[];l={...s},l=l.replace&&!Pt(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const d=/{.*}/.test(a[1])?a[1].lastIndexOf("}")+1:a[1].indexOf(this.formatSeparator);if(d!==-1&&(c=a[1].slice(d).split(this.formatSeparator).map(u=>u.trim()).filter(Boolean),a[1]=a[1].slice(0,d)),i=n(o.call(this,a[1].trim(),l),l),i&&a[0]===t&&!Pt(i))return i;Pt(i)||(i=VE(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${t}`),i=""),c.length&&(i=c.reduce((u,h)=>this.format(u,h,s.lng,{...s,interpolationkey:a[1].trim()}),i.trim())),t=t.replace(a[0],i),this.regexp.lastIndex=0}return t}}const GX=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const s=e.split("(");t=s[0].toLowerCase().trim();const a=s[1].substring(0,s[1].length-1);t==="currency"&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):t==="relativetime"&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(l=>{if(l){const[o,...c]=l.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),u=o.trim();n[u]||(n[u]=d),d==="false"&&(n[u]=!1),d==="true"&&(n[u]=!0),isNaN(d)||(n[u]=parseInt(d,10))}})}return{formatName:t,formatOptions:n}},tO=e=>{const t={};return(n,s,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i={...i,[a.interpolationkey]:void 0});const l=s+JSON.stringify(i);let o=t[l];return o||(o=e(kx(s),a),t[l]=o),o(n)}},YX=e=>(t,n,s)=>e(kx(n),s)(t);class XX{constructor(t={}){this.logger=ml.create("formatter"),this.options=t,this.init(t)}init(t,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const s=n.cacheInBuiltFormats?tO:YX;this.formats={number:s((a,i)=>{const l=new Intl.NumberFormat(a,{...i});return o=>l.format(o)}),currency:s((a,i)=>{const l=new Intl.NumberFormat(a,{...i,style:"currency"});return o=>l.format(o)}),datetime:s((a,i)=>{const l=new Intl.DateTimeFormat(a,{...i});return o=>l.format(o)}),relativetime:s((a,i)=>{const l=new Intl.RelativeTimeFormat(a,{...i});return o=>l.format(o,i.range||"day")}),list:s((a,i)=>{const l=new Intl.ListFormat(a,{...i});return o=>l.format(o)})}}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=tO(n)}format(t,n,s,a={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,c)=>{var h;const{formatName:d,formatOptions:u}=GX(c);if(this.formats[d]){let f=o;try{const m=((h=a==null?void 0:a.formatParams)==null?void 0:h[a.interpolationkey])||{},v=m.locale||m.lng||a.locale||a.lng||s;f=this.formats[d](o,v,{...u,...a,...m})}catch(m){this.logger.warn(m)}return f}else this.logger.warn(`there was no format function for ${d}`);return o},t)}}const ZX=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class QX extends ww{constructor(t,n,s,a={}){var i,l;super(),this.backend=t,this.store=n,this.services=s,this.languageUtils=s.languageUtils,this.options=a,this.logger=ml.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],(l=(i=this.backend)==null?void 0:i.init)==null||l.call(i,s,a.backend,a)}queueLoad(t,n,s,a){const i={},l={},o={},c={};return t.forEach(d=>{let u=!0;n.forEach(h=>{const f=`${d}|${h}`;!s.reload&&this.store.hasResourceBundle(d,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?l[f]===void 0&&(l[f]=!0):(this.state[f]=1,u=!1,l[f]===void 0&&(l[f]=!0),i[f]===void 0&&(i[f]=!0),c[h]===void 0&&(c[h]=!0)))}),u||(o[d]=!0)}),(Object.keys(i).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(t,n,s){const a=t.split("|"),i=a[0],l=a[1];n&&this.emit("failedLoading",i,l,n),!n&&s&&this.store.addResourceBundle(i,l,s,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&s&&(this.state[t]=0);const o={};this.queue.forEach(c=>{IX(c.loaded,[i],l),ZX(c,t),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{o[d]||(o[d]={});const u=c.loaded[d];u.length&&u.forEach(h=>{o[d][h]===void 0&&(o[d][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(t,n,s,a=0,i=this.retryTimeout,l){if(!t.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:s,tried:a,wait:i,callback:l});return}this.readingCalls++;const o=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(d&&u&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,s,a+1,i*2,l)},i);return}l(d,u)},c=this.backend[s].bind(this.backend);if(c.length===2){try{const d=c(t,n);d&&typeof d.then=="function"?d.then(u=>o(null,u)).catch(o):o(null,d)}catch(d){o(d)}return}return c(t,n,o)}prepareLoading(t,n,s={},a){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();Pt(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Pt(n)&&(n=[n]);const i=this.queueLoad(t,n,s,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(l=>{this.loadOne(l)})}load(t,n,s){this.prepareLoading(t,n,{},s)}reload(t,n,s){this.prepareLoading(t,n,{reload:!0},s)}loadOne(t,n=""){const s=t.split("|"),a=s[0],i=s[1];this.read(a,i,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${n}loading namespace ${i} for language ${a} failed`,l),!l&&o&&this.logger.log(`${n}loaded namespace ${i} for language ${a}`,o),this.loaded(t,l,o)})}saveMissing(t,n,s,a,i,l={},o=()=>{}){var c,d,u,h,f;if((d=(c=this.services)==null?void 0:c.utils)!=null&&d.hasLoadedNamespace&&!((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${s}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if((f=this.backend)!=null&&f.create){const m={...l,isUpdate:i},v=this.backend.create.bind(this.backend);if(v.length<6)try{let x;v.length===5?x=v(t,n,s,a,m):x=v(t,n,s,a),x&&typeof x.then=="function"?x.then(w=>o(null,w)).catch(o):o(null,x)}catch(x){o(x)}else v(t,n,s,a,o,m)}!t||!t[0]||this.store.addResource(t[0],n,s,a)}}}const rO=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Pt(e[1])&&(t.defaultValue=e[1]),Pt(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(s=>{t[s]=n[s]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),nO=e=>{var t,n;return Pt(e.ns)&&(e.ns=[e.ns]),Pt(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Pt(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((n=(t=e.supportedLngs)==null?void 0:t.indexOf)==null?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},yy=()=>{},JX=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Sx extends ww{constructor(t={},n){if(super(),this.options=nO(t),this.services={},this.logger=ml,this.modules={external:[]},JX(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(t={},n){this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),t.defaultNS==null&&t.ns&&(Pt(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=rO();this.options={...s,...this.options,...nO(t)},this.options.interpolation={...s.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const a=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?ml.init(a(this.modules.logger),this.options):ml.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=XX;const u=new ZE(this.options);this.store=new KE(this.options.resources,this.options);const h=this.services;h.logger=ml,h.resourceStore=this.store,h.languageUtils=u,h.pluralResolver=new HX(u,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(h.formatter=a(d),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new KX(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new QX(a(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(m,...v)=>{this.emit(m,...v)}),this.modules.languageDetector&&(h.languageDetector=a(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=a(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new XE(this.services,this.options),this.translator.on("*",(m,...v)=>{this.emit(m,...v)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,n||(n=yy),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...u)=>this.store[d](...u)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...u)=>(this.store[d](...u),this)});const o=lp(),c=()=>{const d=(u,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(h),n(u,h)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),o}loadResources(t,n=yy){var i,l;let s=n;const a=Pt(t)?t:this.language;if(typeof t=="function"&&(s=t),!this.options.resources||this.options.partialBundledLanguages){if((a==null?void 0:a.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const o=[],c=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};a?c(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>c(u)),(l=(i=this.options.preload)==null?void 0:i.forEach)==null||l.call(i,d=>c(d)),this.services.backendConnector.load(o,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(d)})}else s(null)}reloadResources(t,n,s){const a=lp();return typeof t=="function"&&(s=t,t=void 0),typeof n=="function"&&(s=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),s||(s=yy),this.services.backendConnector.reload(t,n,i=>{a.resolve(),s(i)}),a}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&lL.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let n=0;n<this.languages.length;n++){const s=this.languages[n];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,n){this.isLanguageChangingTo=t;const s=lp();this.emit("languageChanging",t);const a=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},i=(o,c)=>{c?this.isLanguageChangingTo===t&&(a(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve((...d)=>this.t(...d)),n&&n(o,(...d)=>this.t(...d))},l=o=>{var u,h;!t&&!o&&this.services.languageDetector&&(o=[]);const c=Pt(o)?o:o&&o[0],d=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Pt(o)?[o]:o);d&&(this.language||a(d),this.translator.language||this.translator.changeLanguage(d),(h=(u=this.services.languageDetector)==null?void 0:u.cacheUserLanguage)==null||h.call(u,d)),this.loadResources(d,f=>{i(f,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(t),s}getFixedT(t,n,s){const a=(i,l,...o)=>{let c;typeof l!="object"?c=this.options.overloadTranslationOptionHandler([i,l].concat(o)):c={...l},c.lng=c.lng||a.lng,c.lngs=c.lngs||a.lngs,c.ns=c.ns||a.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||s||a.keyPrefix);const d=this.options.keySeparator||".";let u;return c.keyPrefix&&Array.isArray(i)?u=i.map(h=>`${c.keyPrefix}${d}${h}`):u=c.keyPrefix?`${c.keyPrefix}${d}${i}`:i,this.t(u,c)};return Pt(t)?a.lng=t:a.lngs=t,a.ns=n,a.keyPrefix=s,a}t(...t){var n;return(n=this.translator)==null?void 0:n.translate(...t)}exists(...t){var n;return(n=this.translator)==null?void 0:n.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=n.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const l=(o,c)=>{const d=this.services.backendConnector.state[`${o}|${c}`];return d===-1||d===0||d===2};if(n.precheck){const o=n.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(s,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(s,t)&&(!a||l(i,t)))}loadNamespaces(t,n){const s=lp();return this.options.ns?(Pt(t)&&(t=[t]),t.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{s.resolve(),n&&n(a)}),s):(n&&n(),Promise.resolve())}loadLanguages(t,n){const s=lp();Pt(t)&&(t=[t]);const a=this.options.preload||[],i=t.filter(l=>a.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return i.length?(this.options.preload=a.concat(i),this.loadResources(l=>{s.resolve(),n&&n(l)}),s):(n&&n(),Promise.resolve())}dir(t){var a,i;if(t||(t=this.resolvedLanguage||(((a=this.languages)==null?void 0:a.length)>0?this.languages[0]:this.language)),!t)return"rtl";try{const l=new Intl.Locale(t);if(l&&l.getTextInfo){const o=l.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=((i=this.services)==null?void 0:i.languageUtils)||new ZE(rO());return t.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(s.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},n){return new Sx(t,n)}cloneInstance(t={},n=yy){const s=t.forkResourceStore;s&&delete t.forkResourceStore;const a={...this.options,...t,isClone:!0},i=new Sx(a);if((t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s){const o=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},c[d]=Object.keys(c[d]).reduce((u,h)=>(u[h]={...c[d][h]},u),c[d]),c),{});i.store=new KE(o,a),i.services.resourceStore=i.store}return i.translator=new XE(i.services,a),i.translator.on("*",(o,...c)=>{i.emit(o,...c)}),i.init(a,n),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const us=Sx.createInstance();us.createInstance=Sx.createInstance;us.createInstance;us.dir;us.init;us.loadResources;us.reloadResources;us.use;us.changeLanguage;us.getFixedT;us.t;us.exists;us.setDefaultNamespace;us.hasLoadedNamespace;us.loadNamespaces;us.loadLanguages;const eZ=(e,t,n,s)=>{var i,l,o,c;const a=[n,{code:t,...s||{}}];if((l=(i=e==null?void 0:e.services)==null?void 0:i.logger)!=null&&l.forward)return e.services.logger.forward(a,"warn","react-i18next::",!0);Jd(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),(c=(o=e==null?void 0:e.services)==null?void 0:o.logger)!=null&&c.warn?e.services.logger.warn(...a):console!=null&&console.warn&&console.warn(...a)},sO={},CS=(e,t,n,s)=>{Jd(n)&&sO[n]||(Jd(n)&&(sO[n]=new Date),eZ(e,t,n,s))},cL=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},_S=(e,t,n)=>{e.loadNamespaces(t,cL(e,n))},aO=(e,t,n,s)=>{if(Jd(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return _S(e,n,s);n.forEach(a=>{e.options.ns.indexOf(a)<0&&e.options.ns.push(a)}),e.loadLanguages(t,cL(e,s))},tZ=(e,t,n={})=>!t.languages||!t.languages.length?(CS(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(s,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!a(s.isLanguageChangingTo,e))return!1}}),Jd=e=>typeof e=="string",rZ=e=>typeof e=="object"&&e!==null,nZ=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,sZ={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},aZ=e=>sZ[e],iZ=e=>e.replace(nZ,aZ);let PS={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:iZ};const lZ=(e={})=>{PS={...PS,...e}},oZ=()=>PS;let dL;const cZ=e=>{dL=e},dZ=()=>dL,uZ={type:"3rdParty",init(e){lZ(e.options.react),cZ(e)}},hZ=y.createContext();class fZ{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const mZ=(e,t)=>{const n=y.useRef();return y.useEffect(()=>{n.current=e},[e,t]),n.current},uL=(e,t,n,s)=>e.getFixedT(t,n,s),pZ=(e,t,n,s)=>y.useCallback(uL(e,t,n,s),[e,t,n,s]),_r=(e,t={})=>{var p,N,k,C;const{i18n:n}=t,{i18n:s,defaultNS:a}=y.useContext(hZ)||{},i=n||s||dZ();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new fZ),!i){CS(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const _=(D,E)=>Jd(E)?E:rZ(E)&&Jd(E.defaultValue)?E.defaultValue:Array.isArray(D)?D[D.length-1]:D,P=[_,{},!1];return P.t=_,P.i18n={},P.ready=!1,P}(p=i.options.react)!=null&&p.wait&&CS(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...oZ(),...i.options.react,...t},{useSuspense:o,keyPrefix:c}=l;let d=a||((N=i.options)==null?void 0:N.defaultNS);d=Jd(d)?[d]:d||["translation"],(C=(k=i.reportNamespaces).addUsedNamespaces)==null||C.call(k,d);const u=(i.isInitialized||i.initializedStoreOnce)&&d.every(_=>tZ(_,i,l)),h=pZ(i,t.lng||null,l.nsMode==="fallback"?d:d[0],c),f=()=>h,m=()=>uL(i,t.lng||null,l.nsMode==="fallback"?d:d[0],c),[v,x]=y.useState(f);let w=d.join();t.lng&&(w=`${t.lng}${w}`);const j=mZ(w),g=y.useRef(!0);y.useEffect(()=>{const{bindI18n:_,bindI18nStore:P}=l;g.current=!0,!u&&!o&&(t.lng?aO(i,t.lng,d,()=>{g.current&&x(m)}):_S(i,d,()=>{g.current&&x(m)})),u&&j&&j!==w&&g.current&&x(m);const D=()=>{g.current&&x(m)};return _&&(i==null||i.on(_,D)),P&&(i==null||i.store.on(P,D)),()=>{g.current=!1,i&&_&&(_==null||_.split(" ").forEach(E=>i.off(E,D))),P&&i&&P.split(" ").forEach(E=>i.store.off(E,D))}},[i,w]),y.useEffect(()=>{g.current&&u&&x(f)},[i,c,u]);const b=[v,i,u];if(b.t=v,b.i18n=i,b.ready=u,u||!u&&!o)return b;throw new Promise(_=>{t.lng?aO(i,t.lng,d,()=>_()):_S(i,d,()=>_())})},{slice:xZ,forEach:gZ}=[];function vZ(e){return gZ.call(xZ.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}function yZ(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(e))}const iO=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,bZ=function(e,t){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},a=encodeURIComponent(t);let i=`${e}=${a}`;if(s.maxAge>0){const l=s.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(l)}`}if(s.domain){if(!iO.test(s.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${s.domain}`}if(s.path){if(!iO.test(s.path))throw new TypeError("option path is invalid");i+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(i+="; Partitioned"),i},lO={create(e,t,n,s){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+n*60*1e3)),s&&(a.domain=s),document.cookie=bZ(e,t,a)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let s=0;s<n.length;s++){let a=n[s];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(t)===0)return a.substring(t.length,a.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var jZ={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return lO.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:s,cookieDomain:a,cookieOptions:i}=t;n&&typeof document<"u"&&lO.create(n,e,s,a,i)}},wZ={name:"querystring",lookup(e){var s;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:a}=window.location;!window.location.search&&((s=window.location.hash)==null?void 0:s.indexOf("?"))>-1&&(a=window.location.hash.substring(window.location.hash.indexOf("?")));const l=a.substring(1).split("&");for(let o=0;o<l.length;o++){const c=l[o].indexOf("=");c>0&&l[o].substring(0,c)===t&&(n=l[o].substring(c+1))}}return n}},NZ={name:"hash",lookup(e){var a;let{lookupHash:t,lookupFromHashIndex:n}=e,s;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const l=i.substring(1);if(t){const o=l.split("&");for(let c=0;c<o.length;c++){const d=o[c].indexOf("=");d>0&&o[c].substring(0,d)===t&&(s=o[c].substring(d+1))}}if(s)return s;if(!s&&n>-1){const o=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?(a=o[typeof n=="number"?n:0])==null?void 0:a.replace("/",""):void 0}}}return s}};let Ku=null;const oO=()=>{if(Ku!==null)return Ku;try{if(Ku=typeof window<"u"&&window.localStorage!==null,!Ku)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Ku=!1}return Ku};var kZ={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&oO())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&oO()&&window.localStorage.setItem(n,e)}};let Gu=null;const cO=()=>{if(Gu!==null)return Gu;try{if(Gu=typeof window<"u"&&window.sessionStorage!==null,!Gu)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Gu=!1}return Gu};var SZ={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&cO())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&cO()&&window.sessionStorage.setItem(n,e)}},CZ={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:s,language:a}=navigator;if(n)for(let i=0;i<n.length;i++)t.push(n[i]);s&&t.push(s),a&&t.push(a)}return t.length>0?t:void 0}},_Z={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const s=t||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(n=s.getAttribute("lang")),n}},PZ={name:"path",lookup(e){var a;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(a=n[typeof t=="number"?t:0])==null?void 0:a.replace("/",""):void 0}},AZ={name:"subdomain",lookup(e){var a,i;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,s=typeof window<"u"&&((i=(a=window.location)==null?void 0:a.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(s)return s[n]}};let hL=!1;try{document.cookie,hL=!0}catch{}const fL=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];hL||fL.splice(1,1);const TZ=()=>({order:fL,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class mL{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=vZ(n,this.options||{},TZ()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=a=>a.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(jZ),this.addDetector(wZ),this.addDetector(kZ),this.addDetector(SZ),this.addDetector(CZ),this.addDetector(_Z),this.addDetector(PZ),this.addDetector(AZ),this.addDetector(NZ)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return t.forEach(s=>{if(this.detectors[s]){let a=this.detectors[s].lookup(this.options);a&&typeof a=="string"&&(a=[a]),a&&(n=n.concat(a))}}),n=n.filter(s=>s!=null&&!yZ(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(t,this.options)}))}}mL.type="languageDetector";const EZ={update:"Update",create:"Create",active:"Active",settings:"Settings",profile:"Profile",logout:"Logout",error:"Error",loading:"Loading...",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",view:"View",copy:"Copy",back:"Back",next:"Next",search:"Search",filter:"Filter",actions:"Actions",status:"Status",date:"Date",name:"Name",description:"Description"},OZ={light:"Light theme",dark:"Dark theme",system:"System theme"},RZ={russian:"Русский",english:"English",select:"Select Language"},DZ={dashboard:"Dashboard",statistics:"Statistics",offers:"Offers",accessRequests:"Access Requests",creatives:"Creatives",team:"Team",finances:"Finances",postbacks:"Postbacks",profile:"Profile",settings:"Settings",notifications:"Notifications",logout:"Logout",help:"Help"},MZ={title:"Dashboard",subtitle:"Overview of key metrics",totalClicks:"Total Clicks",revenue:"Revenue",conversionRate:"CR",uniqueClicks:"Unique Clicks",activeOffers:"Active Offers",status:"Status",active:"Active",avgEPC:"EPC",quickActions:"Quick Actions",findNewOffers:"Find New Offers",checkStatistics:"Check Statistics",contactManager:"Contact Manager",goToOffers:"Go to offers page",viewDetailedStats:"View detailed statistics",contactManagerTitle:"Contact manager",welcome:"Welcome!",welcomeMessage:"Start by exploring available offers",system:"System",today:"today",available:"Available",avg7Days:"7-day average",partnerApproved:"Partner approved",dataUpdated:"Data updated",dataUpdatedDescription:"Dashboard information successfully updated",navigateToOffers:"Navigate to offers",navigateToOffersDescription:"Opening available offers page",navigateToStatistics:"Navigate to statistics",navigateToStatisticsDescription:"Opening detailed statistics",todayClicks:"Today's Clicks",todayRevenue:"Today's Revenue",recentActivity:"Recent Activity",topOffers:"Top Offers",refresh:"Refresh"},$Z={title:"Offers",subtitle:"Available offers for promotion",availableOffers:"Available Offers",partnerOffers:"Partner Offers",offerDetails:"Offer Details",requestAccess:"Request access",accessRequested:"Access requested",accessApproved:"Access approved",getLink:"Get Link",viewDetails:"View details",category:"Category",payout:"Payout",countries:"Countries",conversionFlow:"Conversion flow",trafficSources:"Traffic sources",requestAccessToOffer:"Request Access to Offer",myAccessRequests:"My Access Requests",accessRequests:"Access Requests",requestSent:"Request Sent",requestSentDesc:"Your access request has been sent to the advertiser",requestError:"Failed to send request",loading:"Loading offers...",pending:"Pending",rejected:"Rejected",accessApprovedTooltip:"Access approved - get link",requestPendingTooltip:"Request sent, awaiting advertiser review",accessRejected:"Access rejected",requestAccessTooltip:"Request access to offer",details:"Details",statistics:"Statistics",retryRequest:"Retry Request",retry:"Retry"},IZ={title:"Team",subtitle:"Manage team members"},FZ={title:"Profile",subtitle:"Partner profile settings"},LZ={title:"Settings",subtitle:"Account and system settings"},UZ={title:"Notifications",subtitle:"System notifications and messages"},BZ={title:"Postbacks",subtitle:"Integration setup with external trackers",createProfile:"Create Profile",createProfileTitle:"Create New Profile",createProfileDescription:"Configure parameters for sending postbacks to external systems",editProfileTitle:"Edit Profile",editProfileDescription:"Modify tracker integration settings",testTitle:"Postback Testing",testDescription:"Send test postback to verify settings",profiles:"Profiles",deliveryLogs:"Delivery Logs",clickId:"Click ID",eventType:"Event Type",amount:"Amount",currency:"Currency",sendTest:"Send Test",configuredPostbacks:"Configured Postbacks",createPostbackProfile:"Create Postback Profile",name:"Name",trackerType:"Tracker Type",scope:"Scope",priority:"Priority",endpointUrl:"Endpoint URL",method:"Method",statusMapping:"Status Mapping",paramsTemplate:"Parameters Template",endpoint:"Endpoint",lastDelivery:"Last Delivery",never:"Never",global:"Global",offer:"Offer",custom:"Custom",placeholderName:"My Tracker",placeholderEndpoint:"https://mytracker.com/postback",time:"Time",profile:"Profile",status:"Status",responseCode:"Response Code",attempt:"Attempt",responseTime:"Response Time",success:"Success",error:"Error",noLogsYet:"No delivery logs yet",quickSetup:"Quick setup with template",templateHelp:"Select a template to automatically fill settings for popular trackers",endpointSettings:"Endpoint Settings",testProfile:"Test Profile",testSuccess:"Test Success",testFailed:"Test Failed",testError:"Test Error",postbackSent:"Postback Sent",deleteProfile:"Delete Profile",editProfile:"Edit Profile",loading:"Loading profiles...",noProfilesFound:"NO PROFILES FOUND!",debugInfo:"DEBUG - FULL INFORMATION",refreshWarning:"IF BUTTONS ARE WHITE: Refresh page (Ctrl+F5) or clear cache!",deliveryHistory:"History of postback delivery to trackers",createError:"Creation Error",deleteError:"Deletion Error",basicTab:"Basic",settingsTab:"Settings",advancedSettings:"Advanced Settings",comingSoon:"Advanced configuration parameters will be added in future versions."},zZ={title:"Finances",subtitle:"Balance and withdrawal management",currentBalance:"Current Balance",availableForWithdrawal:"Available for withdrawal",pendingPayouts:"Pending",awaitingConfirmation:"Awaiting confirmation",totalRevenue:"Total Revenue",allTime:"All time",avgEPC:"Average EPC",earningsPerClick:"Earnings per click",withdrawal:"Withdrawal",createWithdrawal:"Create withdrawal request",availableAmount:"Available",withdrawalAmount:"Amount",paymentMethod:"Payment method",paymentDetails:"Payment details",selectMethod:"Select method",enterDetails:"Enter payment details",submitRequest:"Submit request",transactionHistory:"Transaction History",downloadReport:"Download report",commission:"Commission",bonus:"Bonus",payout:"Payout",paymentMethods:{paypal:"PayPal",bankCard:"Bank Card",bankTransfer:"Bank Transfer",crypto:"Cryptocurrency"},messages:{withdrawalRequested:"Request submitted",withdrawalRequestedDesc:"Withdrawal request created and will be processed within 24 hours.",fillAllFields:"Fill all fields",fillAllFieldsDesc:"All fields are required",insufficientFunds:"Insufficient funds",insufficientFundsDesc:"Withdrawal amount exceeds available balance",reportDownloaded:"Report downloaded",reportDownloadedDesc:"Financial report in {{format}} format downloaded successfully",downloadError:"Error",downloadErrorDesc:"Failed to download report",withdrawalError:"Failed to create withdrawal request"}},VZ={login:"Sign In",loginSubtitle:"Enter your credentials to sign in",register:"Sign Up",registerSubtitle:"Create a new account",username:"Username",email:"Email",password:"Password",confirmPassword:"Confirm Password",firstName:"First Name",lastName:"Last Name",company:"Company",phone:"Phone",alreadyHaveAccount:"Already have an account?",noAccount:"Don't have an account?",loginHere:"Sign in here",registerHere:"Sign up here"},qZ={title:"Partner Statistics",subtitle:"Detailed analytics of clicks and conversions with real data",filters:"Filters",dateFrom:"Date from",dateTo:"Date to",offer:"Offer",geo:"Geo",device:"Device",allOffers:"All offers",allCountries:"All countries",allDevices:"All devices",desktop:"Desktop",mobile:"Mobile",tablet:"Tablet",applyFilters:"Apply filters",resetFilters:"Reset",export:"Export",tabs:{overview:"Overview",geography:"Geography",devices:"Devices",sources:"Sources",subid:"SubID",details:"Details"},columns:{date:"Date/Time",offer:"Offer",country:"Country",clickId:"ClickID",status:"Status",revenue:"Revenue",actions:"Actions",cr:"CR",epc:"EPC",device:"Device",source:"Source",ip:"IP",sub1:"Sub1",sub2:"Sub2",sub3:"Sub3",sub4:"Sub4",sub5:"Sub5"},status:{click:"Click",conversion:"Conversion"},actions:{copyClickId:"Copy ClickID",viewSubId:"View SubID parameters",viewAllSub:"View all Sub1-Sub16"},messages:{loadingError:"Loading error",loadingErrorDesc:"Failed to load partner statistics",copied:"Copied",copiedDesc:"{{type}} copied to clipboard",copyError:"Failed to copy to clipboard"},pagination:{showing:"Showing",of:"of",records:"records",previous:"Previous",next:"Next"},geography:"Geography",countries:{IN:"India",US:"United States",DE:"Germany",UK:"United Kingdom"},devices:{desktop:"Desktop",mobile:"Mobile",tablet:"Tablet"},subid:{title:"SubID Analysis",description:"Detailed analysis of all Sub1-Sub16 parameters with data preservation",detailsTitle:"Detailed Statistics",parametersFor:"SubID Parameters for",fullList:"Complete list of all Sub1-Sub16 parameters with exact data preservation"}},WZ={common:EZ,theme:OZ,language:RZ,navigation:DZ,dashboard:MZ,offers:$Z,team:IZ,profile:FZ,settings:LZ,notifications:UZ,postbacks:BZ,finances:zZ,auth:VZ,statistics:qZ},HZ={update:"Обновить",create:"Создать",active:"Включен",settings:"Настройки",profile:"Профиль",logout:"Выход",error:"Ошибка",loading:"Загрузка...",save:"Сохранить",cancel:"Отмена",delete:"Удалить",edit:"Редактировать",view:"Просмотр",copy:"Копировать",back:"Назад",next:"Далее",search:"Поиск",filter:"Фильтр",actions:"Действия",status:"Статус",date:"Дата",name:"Название",description:"Описание"},KZ={dashboard:"Дашборд",statistics:"Статистика",offers:"Офферы",accessRequests:"Запросы доступа",creatives:"Креативы",team:"Команда",finances:"Финансы",postbacks:"Постбеки",profile:"Профиль",settings:"Настройки",notifications:"Уведомления",logout:"Выход",help:"Помощь"},GZ="Войти",YZ="Имя пользователя",XZ="Email",ZZ="Пароль",QZ="Войти",JZ={title:"Дашборд",partnerTitle:"Панель партнёра",partnerWelcome:"Добро пожаловать в ваш кабинет партнёра",subtitle:"Обзор основных показателей",totalClicks:"Всего кликов",revenue:"Доход",conversionRate:"CR",uniqueClicks:"Уникальные клики",activeOffers:"Активные офферы",status:"Статус",active:"Активен",avgEPC:"EPC",quickActions:"Быстрые действия",findNewOffers:"Найти новые офферы",checkStatistics:"Проверить статистику",contactManager:"Связаться с менеджером",goToOffers:"Перейти к странице офферов",viewDetailedStats:"Посмотреть детальную статистику",contactManagerTitle:"Связаться с менеджером",welcome:"Добро пожаловать!",welcomeMessage:"Начните работу с изучения доступных офферов",system:"Система",today:"сегодня",available:"Доступно",avg7Days:"Средний за 7 дней",partnerApproved:"Партнёр одобрен",dataUpdated:"Данные обновлены",dataUpdatedDescription:"Информация дашборда успешно обновлена",navigateToOffers:"Переход к офферам",navigateToOffersDescription:"Открываю страницу доступных офферов",navigateToStatistics:"Переход к статистике",navigateToStatisticsDescription:"Открываю детальную статистику",todayClicks:"Клики сегодня",todayRevenue:"Доход сегодня",recentActivity:"Последняя активность",topOffers:"Топ офферы"},eQ={home:"Главная",homeDesc:"Обзор кабинета",myOffers:"Мои офферы",dashboard:"Дашборд",users:"Пользователи",userAnalytics:"Аналитика пользователей",roles:"Роли",offers:"Офферы",blacklist:"Черный список",auditLogs:"Логи аудита",systemSettings:"Настройки системы",support:"Поддержка",myOffersDesc:"Управление офферами",receivedOffers:"Полученные офферы",receivedOffersDesc:"Офферы от поставщиков",partners:"Партнёры",partnersDesc:"Управление партнёрами",accessRequests:"Запросы доступа",accessRequestsDesc:"Обработка запросов партнёров на доступ к офферам",finances:"Финансы",financesDesc:"Финансовые операции",teamMode:"Командный режим",teamModeDesc:"Управление командой и права доступа",antifraud:"Антифрод",antifraudDesc:"Система защиты от фродового трафика",analytics:"Аналитика",analyticsDesc:"Детальная аналитика и отчёты",postbacks:"Постбеки",postbacksDesc:"Настройка интеграций с трекерами",profile:"Профиль",profileDesc:"Настройки профиля",documents:"Документы",documentsDesc:"Документооборот"},tQ={title:"Офферы",subtitle:"Доступные офферы для продвижения",availableOffers:"Доступные офферы",partnerOffers:"Партнерские офферы",offerDetails:"Детали оффера",requestAccess:"Запросить",accessRequested:"Доступ запрошен",accessApproved:"Доступ одобрен",getLink:"Забрать ссылку",viewDetails:"Подробнее",category:"Категория",payout:"Выплата",countries:"Страны",conversionFlow:"Флоу конверсии",trafficSources:"Источники трафика",requestAccessToOffer:"Запросить доступ к офферу",myAccessRequests:"Мои запросы доступа",accessRequests:"Запросы доступа",requestSent:"Запрос отправлен",requestSentDesc:"Ваш запрос на доступ к офферу был отправлен рекламодателю",requestError:"Не удалось отправить запрос",loading:"Загрузка офферов...",pending:"В ожидании",rejected:"Отклонен",accessApprovedTooltip:"Доступ одобрен - получить ссылку",requestPendingTooltip:"Запрос отправлен, ожидает рассмотрения рекламодателем",accessRejected:"Доступ отклонен",requestAccessTooltip:"Запросить доступ к офферу",details:"Детали",statistics:"Статистика",retryRequest:"Повторный запрос",retry:"Повторить"},rQ={title:"Постбеки",subtitle:"Настройка интеграции с внешними трекерами",createProfile:"Создать профиль",createProfileTitle:"Создать новый профиль",createProfileDescription:"Настройте параметры отправки постбеков во внешние системы",editProfileTitle:"Редактировать профиль",editProfileDescription:"Изменить настройки интеграции с трекером",testTitle:"Тестирование постбека",testDescription:"Отправить тестовый постбек для проверки настроек",profiles:"Профили",deliveryLogs:"Логи доставок",clickId:"Click ID",eventType:"Тип события",amount:"Сумма",currency:"Валюта",sendTest:"Отправить тест",configuredPostbacks:"Настроенные постбеки",createPostbackProfile:"Создать постбек профиль",name:"Название",trackerType:"Тип трекера",scope:"Область применения",priority:"Приоритет",endpointUrl:"URL эндпоинта",method:"Метод",statusMapping:"Маппинг статусов",paramsTemplate:"Шаблон параметров",endpoint:"Эндпоинт",lastDelivery:"Последняя доставка",never:"Не было",global:"Глобально",offer:"Оффер",custom:"Пользовательский",placeholderName:"Мой трекер",placeholderEndpoint:"https://mytracker.com/postback",time:"Время",profile:"Профиль",status:"Статус",responseCode:"Код ответа",attempt:"Попытка",responseTime:"Время ответа",success:"Успех",error:"Ошибка",noLogsYet:"Пока нет логов доставок",quickSetup:"Быстрая настройка по шаблону",templateHelp:"Выберите шаблон для автоматического заполнения настроек популярных трекеров",endpointSettings:"Настройки эндпоинта",testProfile:"Тестировать профиль",testSuccess:"Тест успешен",testFailed:"Тест неудачен",testError:"Ошибка тестирования",postbackSent:"Постбек отправлен",deleteProfile:"Удалить профиль",editProfile:"Редактировать профиль",loading:"Загрузка профилей...",noProfilesFound:"ПРОФИЛИ НЕ НАЙДЕНЫ!",debugInfo:"ОТЛАДКА - ПОЛНАЯ ИНФОРМАЦИЯ",refreshWarning:"ЕСЛИ КНОПКИ БЕЛЫЕ: Обновите страницу (Ctrl+F5) или очистите кеш!",deliveryHistory:"История отправки постбеков в трекеры",createError:"Ошибка создания",deleteError:"Ошибка удаления профиля",basicTab:"Основные",settingsTab:"Настройки",advancedSettings:"Дополнительные настройки",comingSoon:"Расширенные параметры конфигурации будут добавлены в следующих версиях."},nQ={country:"Страна",geoIp:"Geo IP",registrationDateFrom:"Дата регистрации от:",registrationDateTo:"Дата регистрации до:",lastLoginFrom:"Последний вход от:",lastLoginTo:"Последний вход до:",resetFilters:"Сброс фильтров"},sQ={addUser:"Добавить пользователя",editUser:"Редактировать пользователя",deleteUser:"Удалить пользователя",username:"Имя пользователя",role:"Роль",userType:"Тип",accountName:"Название аккаунта",registrationDate:"Дата регистрации",lastLogin:"Последний вход",linkedAdvertiser:"Привязанный рекламодатель",actions:"Действия",administrator:"Администратор"},aQ={light:"Светлая тема",dark:"Тёмная тема",system:"Системная тема"},iQ={russian:"Русский",english:"English",select:"Выбрать язык"},lQ={title:"Статистика партнёра",subtitle:"Детальная аналитика по кликам и конверсиям с реальными данными",filters:"Фильтры",dateFrom:"Дата от",dateTo:"Дата до",offer:"Оффер",geo:"Гео",device:"Устройство",allOffers:"Все офферы",allCountries:"Все страны",allDevices:"Все устройства",desktop:"Десктоп",mobile:"Мобильное",tablet:"Планшет",applyFilters:"Применить фильтры",resetFilters:"Сбросить",export:"Экспорт",tabs:{overview:"Обзор",geography:"География",devices:"Устройства",sources:"Источники",subid:"SubID",details:"Детали"},columns:{date:"Дата/Время",offer:"Оффер",country:"Страна",clickId:"ClickID",status:"Статус",revenue:"Доход",actions:"Действия",cr:"CR",epc:"EPC",device:"Устройство",source:"Источник",ip:"IP",sub1:"Sub1",sub2:"Sub2",sub3:"Sub3",sub4:"Sub4",sub5:"Sub5"},status:{click:"Клик",conversion:"Конверсия"},actions:{copyClickId:"Копировать ClickID",viewSubId:"Просмотр SubID параметров",viewAllSub:"Посмотреть все Sub1-Sub16"},messages:{loadingError:"Ошибка загрузки данных",loadingErrorDesc:"Не удалось загрузить статистику партнера",copied:"Скопировано",copiedDesc:"{{type}} скопирован в буфер обмена",copyError:"Ошибка копирования"},pagination:{showing:"Показано",of:"из",records:"записей",previous:"Назад",next:"Вперед"},geography:"География",countries:{IN:"Индия",US:"США",DE:"Германия",UK:"Великобритания"},devices:{desktop:"Компьютер",mobile:"Мобильный",tablet:"Планшет"},subid:{title:"Анализ SubID параметров",description:"Детальный анализ всех Sub1-Sub16 параметров с сохранением исходных данных",detailsTitle:"Детальная статистика",parametersFor:"SubID Параметры для",fullList:"Полный список всех Sub1-Sub16 параметров с точным сохранением данных"}},oQ={title:"Креативы и инструменты",subtitle:"Баннеры, лендинги, преленды и текстовки для ваших кампаний",searchPlaceholder:"Поиск креативов...",allTypes:"Все типы",banner:"Баннеры",landing:"Лендинги",prelanding:"Преленды",text:"Текстовки",video:"Видео",bannerType:"Баннер",landingType:"Лендинг",prelandingType:"Преленд",textType:"Текст",videoType:"Видео"},cQ={title:"Команда",subtitle:"Управление участниками команды"},dQ={title:"Профиль",subtitle:"Настройки профиля партнёра"},uQ={title:"Настройки",subtitle:"Настройки аккаунта и системы"},hQ={title:"Уведомления",subtitle:"Системные уведомления и сообщения"},fQ={title:"Финансы",subtitle:"Управление балансом и выводом средств",currentBalance:"Текущий баланс",availableForWithdrawal:"Доступно к выводу",pendingPayouts:"В ожидании",awaitingConfirmation:"Ожидает подтверждения",totalRevenue:"Общий доход",allTime:"За всё время",avgEPC:"Средний EPC",earningsPerClick:"Доходность на клик",withdrawal:"Вывод средств",createWithdrawal:"Создание заявки на вывод средств",availableAmount:"Доступно",withdrawalAmount:"Сумма",paymentMethod:"Способ получения",paymentDetails:"Реквизиты",selectMethod:"Выберите способ",enterDetails:"Укажите реквизиты для получения средств",submitRequest:"Отправить заявку",transactionHistory:"История операций",downloadReport:"Скачать отчёт",commission:"Комиссия",bonus:"Бонус",payout:"Вывод",paymentMethods:{paypal:"PayPal",bankCard:"Банковская карта",bankTransfer:"Банковский перевод",crypto:"Криптовалюта"},messages:{withdrawalRequested:"Запрос отправлен",withdrawalRequestedDesc:"Заявка на вывод средств создана и будет обработана в течение 24 часов.",fillAllFields:"Заполните все поля",fillAllFieldsDesc:"Все поля обязательны для заполнения",insufficientFunds:"Недостаточно средств",insufficientFundsDesc:"Сумма вывода превышает доступный баланс",reportDownloaded:"Отчёт загружен",reportDownloadedDesc:"Финансовый отчёт в формате {{format}} успешно загружен",downloadError:"Ошибка",downloadErrorDesc:"Не удалось загрузить отчёт",withdrawalError:"Не удалось создать заявку на вывод средств"}},mQ={login:"Вход в систему",loginSubtitle:"Введите ваши данные для входа",register:"Регистрация",registerSubtitle:"Создайте новый аккаунт",username:"Имя пользователя",email:"Email",password:"Пароль",confirmPassword:"Подтвердите пароль",firstName:"Имя",lastName:"Фамилия",company:"Компания",phone:"Телефон",alreadyHaveAccount:"Уже есть аккаунт?",noAccount:"Нет аккаунта?",loginHere:"Войдите здесь",registerHere:"Зарегистрируйтесь здесь"},pQ={common:HZ,navigation:KZ,login:GZ,username:YZ,email:XZ,password:ZZ,sign_in:QZ,dashboard:JZ,sidebar:eQ,offers:tQ,postbacks:rQ,filters:nQ,users:sQ,theme:aQ,language:iQ,statistics:lQ,creatives:oQ,team:cQ,profile:dQ,settings:uQ,notifications:hQ,finances:fQ,auth:mQ},xQ={en:{translation:WZ},ru:{translation:pQ}};localStorage.getItem("i18nextLng")||localStorage.setItem("i18nextLng","ru");us.use(mL).use(uZ).init({resources:xQ,lng:"ru",fallbackLng:"ru",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],lookupLocalStorage:"i18nextLng",caches:["localStorage"]}});var pL={exports:{}},wa={},xL={exports:{}},gL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,I){var Q=R.length;R.push(I);e:for(;0<Q;){var Y=Q-1>>>1,K=R[Y];if(0<a(K,I))R[Y]=I,R[Q]=K,Q=Y;else break e}}function n(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var I=R[0],Q=R.pop();if(Q!==I){R[0]=Q;e:for(var Y=0,K=R.length,oe=K>>>1;Y<oe;){var ge=2*(Y+1)-1,Ne=R[ge],Oe=ge+1,pe=R[Oe];if(0>a(Ne,Q))Oe<K&&0>a(pe,Ne)?(R[Y]=pe,R[Oe]=Q,Y=Oe):(R[Y]=Ne,R[ge]=Q,Y=ge);else if(Oe<K&&0>a(pe,Q))R[Y]=pe,R[Oe]=Q,Y=Oe;else break e}}return I}function a(R,I){var Q=R.sortIndex-I.sortIndex;return Q!==0?Q:R.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,f=3,m=!1,v=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(R){for(var I=n(d);I!==null;){if(I.callback===null)s(d);else if(I.startTime<=R)s(d),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(d)}}function p(R){if(x=!1,b(R),!v)if(n(c)!==null)v=!0,z(N);else{var I=n(d);I!==null&&F(p,I.startTime-R)}}function N(R,I){v=!1,x&&(x=!1,j(_),_=-1),m=!0;var Q=f;try{for(b(I),h=n(c);h!==null&&(!(h.expirationTime>I)||R&&!E());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,f=h.priorityLevel;var K=Y(h.expirationTime<=I);I=e.unstable_now(),typeof K=="function"?h.callback=K:h===n(c)&&s(c),b(I)}else s(c);h=n(c)}if(h!==null)var oe=!0;else{var ge=n(d);ge!==null&&F(p,ge.startTime-I),oe=!1}return oe}finally{h=null,f=Q,m=!1}}var k=!1,C=null,_=-1,P=5,D=-1;function E(){return!(e.unstable_now()-D<P)}function $(){if(C!==null){var R=e.unstable_now();D=R;var I=!0;try{I=C(!0,R)}finally{I?A():(k=!1,C=null)}}else k=!1}var A;if(typeof g=="function")A=function(){g($)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,O=T.port2;T.port1.onmessage=$,A=function(){O.postMessage(null)}}else A=function(){w($,0)};function z(R){C=R,k||(k=!0,A())}function F(R,I){_=w(function(){R(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,z(N))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var Q=f;f=I;try{return R()}finally{f=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,I){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Q=f;f=R;try{return I()}finally{f=Q}},e.unstable_scheduleCallback=function(R,I,Q){var Y=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Y+Q:Y):Q=Y,R){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Q+K,R={id:u++,callback:I,priorityLevel:R,startTime:Q,expirationTime:K,sortIndex:-1},Q>Y?(R.sortIndex=Q,t(d,R),n(c)===null&&R===n(d)&&(x?(j(_),_=-1):x=!0,F(p,Q-Y))):(R.sortIndex=K,t(c,R),v||m||(v=!0,z(N))),R},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(R){var I=f;return function(){var Q=f;f=I;try{return R.apply(this,arguments)}finally{f=Q}}}})(gL);xL.exports=gL;var gQ=xL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vQ=y,ja=gQ;function Ve(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vL=new Set,Cx={};function Du(e,t){_f(e,t),_f(e+"Capture",t)}function _f(e,t){for(Cx[e]=t,e=0;e<t.length;e++)vL.add(t[e])}var bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),AS=Object.prototype.hasOwnProperty,yQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dO={},uO={};function bQ(e){return AS.call(uO,e)?!0:AS.call(dO,e)?!1:yQ.test(e)?uO[e]=!0:(dO[e]=!0,!1)}function jQ(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wQ(e,t,n,s){if(t===null||typeof t>"u"||jQ(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Es(e,t,n,s,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Zn[e]=new Es(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Zn[t]=new Es(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Zn[e]=new Es(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Zn[e]=new Es(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Zn[e]=new Es(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Zn[e]=new Es(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Zn[e]=new Es(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Zn[e]=new Es(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Zn[e]=new Es(e,5,!1,e.toLowerCase(),null,!1,!1)});var BP=/[\-:]([a-z])/g;function zP(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(BP,zP);Zn[t]=new Es(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(BP,zP);Zn[t]=new Es(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(BP,zP);Zn[t]=new Es(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Zn[e]=new Es(e,1,!1,e.toLowerCase(),null,!1,!1)});Zn.xlinkHref=new Es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Zn[e]=new Es(e,1,!1,e.toLowerCase(),null,!0,!0)});function VP(e,t,n,s){var a=Zn.hasOwnProperty(t)?Zn[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wQ(t,n,a,s)&&(n=null),s||a===null?bQ(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Oo=vQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,by=Symbol.for("react.element"),dh=Symbol.for("react.portal"),uh=Symbol.for("react.fragment"),qP=Symbol.for("react.strict_mode"),TS=Symbol.for("react.profiler"),yL=Symbol.for("react.provider"),bL=Symbol.for("react.context"),WP=Symbol.for("react.forward_ref"),ES=Symbol.for("react.suspense"),OS=Symbol.for("react.suspense_list"),HP=Symbol.for("react.memo"),Zo=Symbol.for("react.lazy"),jL=Symbol.for("react.offscreen"),hO=Symbol.iterator;function op(e){return e===null||typeof e!="object"?null:(e=hO&&e[hO]||e["@@iterator"],typeof e=="function"?e:null)}var Gr=Object.assign,SN;function $p(e){if(SN===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);SN=t&&t[1]||""}return`
`+SN+e}var CN=!1;function _N(e,t){if(!e||CN)return"";CN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{CN=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$p(e):""}function NQ(e){switch(e.tag){case 5:return $p(e.type);case 16:return $p("Lazy");case 13:return $p("Suspense");case 19:return $p("SuspenseList");case 0:case 2:case 15:return e=_N(e.type,!1),e;case 11:return e=_N(e.type.render,!1),e;case 1:return e=_N(e.type,!0),e;default:return""}}function RS(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case uh:return"Fragment";case dh:return"Portal";case TS:return"Profiler";case qP:return"StrictMode";case ES:return"Suspense";case OS:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case bL:return(e.displayName||"Context")+".Consumer";case yL:return(e._context.displayName||"Context")+".Provider";case WP:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case HP:return t=e.displayName||null,t!==null?t:RS(e.type)||"Memo";case Zo:t=e._payload,e=e._init;try{return RS(e(t))}catch{}}return null}function kQ(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return RS(t);case 8:return t===qP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $c(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function SQ(e){var t=wL(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jy(e){e._valueTracker||(e._valueTracker=SQ(e))}function NL(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=wL(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function X0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function DS(e,t){var n=t.checked;return Gr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function fO(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=$c(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kL(e,t){t=t.checked,t!=null&&VP(e,"checked",t,!1)}function MS(e,t){kL(e,t);var n=$c(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$S(e,t.type,n):t.hasOwnProperty("defaultValue")&&$S(e,t.type,$c(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mO(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function $S(e,t,n){(t!=="number"||X0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ip=Array.isArray;function Ah(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+$c(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function IS(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ve(91));return Gr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pO(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ve(92));if(Ip(n)){if(1<n.length)throw Error(Ve(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:$c(n)}}function SL(e,t){var n=$c(t.value),s=$c(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function xO(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function CL(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function FS(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?CL(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wy,_L=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wy=wy||document.createElement("div"),wy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _x(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Qp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CQ=["Webkit","ms","Moz","O"];Object.keys(Qp).forEach(function(e){CQ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qp[t]=Qp[e]})});function PL(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Qp.hasOwnProperty(e)&&Qp[e]?(""+t).trim():t+"px"}function AL(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=PL(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var _Q=Gr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function LS(e,t){if(t){if(_Q[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ve(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ve(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ve(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ve(62))}}function US(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BS=null;function KP(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zS=null,Th=null,Eh=null;function gO(e){if(e=Tv(e)){if(typeof zS!="function")throw Error(Ve(280));var t=e.stateNode;t&&(t=_w(t),zS(e.stateNode,e.type,t))}}function TL(e){Th?Eh?Eh.push(e):Eh=[e]:Th=e}function EL(){if(Th){var e=Th,t=Eh;if(Eh=Th=null,gO(e),t)for(e=0;e<t.length;e++)gO(t[e])}}function OL(e,t){return e(t)}function RL(){}var PN=!1;function DL(e,t,n){if(PN)return e(t,n);PN=!0;try{return OL(e,t,n)}finally{PN=!1,(Th!==null||Eh!==null)&&(RL(),EL())}}function Px(e,t){var n=e.stateNode;if(n===null)return null;var s=_w(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ve(231,t,typeof n));return n}var VS=!1;if(bo)try{var cp={};Object.defineProperty(cp,"passive",{get:function(){VS=!0}}),window.addEventListener("test",cp,cp),window.removeEventListener("test",cp,cp)}catch{VS=!1}function PQ(e,t,n,s,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var Jp=!1,Z0=null,Q0=!1,qS=null,AQ={onError:function(e){Jp=!0,Z0=e}};function TQ(e,t,n,s,a,i,l,o,c){Jp=!1,Z0=null,PQ.apply(AQ,arguments)}function EQ(e,t,n,s,a,i,l,o,c){if(TQ.apply(this,arguments),Jp){if(Jp){var d=Z0;Jp=!1,Z0=null}else throw Error(Ve(198));Q0||(Q0=!0,qS=d)}}function Mu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ML(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vO(e){if(Mu(e)!==e)throw Error(Ve(188))}function OQ(e){var t=e.alternate;if(!t){if(t=Mu(e),t===null)throw Error(Ve(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return vO(a),e;if(i===s)return vO(a),t;i=i.sibling}throw Error(Ve(188))}if(n.return!==s.return)n=a,s=i;else{for(var l=!1,o=a.child;o;){if(o===n){l=!0,n=a,s=i;break}if(o===s){l=!0,s=a,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,s=a;break}if(o===s){l=!0,s=i,n=a;break}o=o.sibling}if(!l)throw Error(Ve(189))}}if(n.alternate!==s)throw Error(Ve(190))}if(n.tag!==3)throw Error(Ve(188));return n.stateNode.current===n?e:t}function $L(e){return e=OQ(e),e!==null?IL(e):null}function IL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=IL(e);if(t!==null)return t;e=e.sibling}return null}var FL=ja.unstable_scheduleCallback,yO=ja.unstable_cancelCallback,RQ=ja.unstable_shouldYield,DQ=ja.unstable_requestPaint,sn=ja.unstable_now,MQ=ja.unstable_getCurrentPriorityLevel,GP=ja.unstable_ImmediatePriority,LL=ja.unstable_UserBlockingPriority,J0=ja.unstable_NormalPriority,$Q=ja.unstable_LowPriority,UL=ja.unstable_IdlePriority,Nw=null,wl=null;function IQ(e){if(wl&&typeof wl.onCommitFiberRoot=="function")try{wl.onCommitFiberRoot(Nw,e,void 0,(e.current.flags&128)===128)}catch{}}var Ni=Math.clz32?Math.clz32:UQ,FQ=Math.log,LQ=Math.LN2;function UQ(e){return e>>>=0,e===0?32:31-(FQ(e)/LQ|0)|0}var Ny=64,ky=4194304;function Fp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function eb(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var o=l&~a;o!==0?s=Fp(o):(i&=l,i!==0&&(s=Fp(i)))}else l=n&~a,l!==0?s=Fp(l):i!==0&&(s=Fp(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Ni(t),a=1<<n,s|=e[n],t&=~a;return s}function BQ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zQ(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Ni(i),o=1<<l,c=a[l];c===-1?(!(o&n)||o&s)&&(a[l]=BQ(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function WS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function BL(){var e=Ny;return Ny<<=1,!(Ny&4194240)&&(Ny=64),e}function AN(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pv(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ni(t),e[t]=n}function VQ(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ni(n),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~i}}function YP(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Ni(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var jr=0;function zL(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var VL,XP,qL,WL,HL,HS=!1,Sy=[],Sc=null,Cc=null,_c=null,Ax=new Map,Tx=new Map,tc=[],qQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bO(e,t){switch(e){case"focusin":case"focusout":Sc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":_c=null;break;case"pointerover":case"pointerout":Ax.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tx.delete(t.pointerId)}}function dp(e,t,n,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Tv(t),t!==null&&XP(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function WQ(e,t,n,s,a){switch(t){case"focusin":return Sc=dp(Sc,e,t,n,s,a),!0;case"dragenter":return Cc=dp(Cc,e,t,n,s,a),!0;case"mouseover":return _c=dp(_c,e,t,n,s,a),!0;case"pointerover":var i=a.pointerId;return Ax.set(i,dp(Ax.get(i)||null,e,t,n,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Tx.set(i,dp(Tx.get(i)||null,e,t,n,s,a)),!0}return!1}function KL(e){var t=Sd(e.target);if(t!==null){var n=Mu(t);if(n!==null){if(t=n.tag,t===13){if(t=ML(n),t!==null){e.blockedOn=t,HL(e.priority,function(){qL(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function j0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=KS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);BS=s,n.target.dispatchEvent(s),BS=null}else return t=Tv(n),t!==null&&XP(t),e.blockedOn=n,!1;t.shift()}return!0}function jO(e,t,n){j0(e)&&n.delete(t)}function HQ(){HS=!1,Sc!==null&&j0(Sc)&&(Sc=null),Cc!==null&&j0(Cc)&&(Cc=null),_c!==null&&j0(_c)&&(_c=null),Ax.forEach(jO),Tx.forEach(jO)}function up(e,t){e.blockedOn===t&&(e.blockedOn=null,HS||(HS=!0,ja.unstable_scheduleCallback(ja.unstable_NormalPriority,HQ)))}function Ex(e){function t(a){return up(a,e)}if(0<Sy.length){up(Sy[0],e);for(var n=1;n<Sy.length;n++){var s=Sy[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Sc!==null&&up(Sc,e),Cc!==null&&up(Cc,e),_c!==null&&up(_c,e),Ax.forEach(t),Tx.forEach(t),n=0;n<tc.length;n++)s=tc[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<tc.length&&(n=tc[0],n.blockedOn===null);)KL(n),n.blockedOn===null&&tc.shift()}var Oh=Oo.ReactCurrentBatchConfig,tb=!0;function KQ(e,t,n,s){var a=jr,i=Oh.transition;Oh.transition=null;try{jr=1,ZP(e,t,n,s)}finally{jr=a,Oh.transition=i}}function GQ(e,t,n,s){var a=jr,i=Oh.transition;Oh.transition=null;try{jr=4,ZP(e,t,n,s)}finally{jr=a,Oh.transition=i}}function ZP(e,t,n,s){if(tb){var a=KS(e,t,n,s);if(a===null)LN(e,t,s,rb,n),bO(e,s);else if(WQ(a,e,t,n,s))s.stopPropagation();else if(bO(e,s),t&4&&-1<qQ.indexOf(e)){for(;a!==null;){var i=Tv(a);if(i!==null&&VL(i),i=KS(e,t,n,s),i===null&&LN(e,t,s,rb,n),i===a)break;a=i}a!==null&&s.stopPropagation()}else LN(e,t,s,null,n)}}var rb=null;function KS(e,t,n,s){if(rb=null,e=KP(s),e=Sd(e),e!==null)if(t=Mu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ML(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rb=e,null}function GL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MQ()){case GP:return 1;case LL:return 4;case J0:case $Q:return 16;case UL:return 536870912;default:return 16}default:return 16}}var gc=null,QP=null,w0=null;function YL(){if(w0)return w0;var e,t=QP,n=t.length,s,a="value"in gc?gc.value:gc.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(s=1;s<=l&&t[n-s]===a[i-s];s++);return w0=a.slice(e,1<s?1-s:void 0)}function N0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cy(){return!0}function wO(){return!1}function Na(e){function t(n,s,a,i,l){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cy:wO,this.isPropagationStopped=wO,this}return Gr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cy)},persist:function(){},isPersistent:Cy}),t}var Cm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},JP=Na(Cm),Av=Gr({},Cm,{view:0,detail:0}),YQ=Na(Av),TN,EN,hp,kw=Gr({},Av,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eA,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hp&&(hp&&e.type==="mousemove"?(TN=e.screenX-hp.screenX,EN=e.screenY-hp.screenY):EN=TN=0,hp=e),TN)},movementY:function(e){return"movementY"in e?e.movementY:EN}}),NO=Na(kw),XQ=Gr({},kw,{dataTransfer:0}),ZQ=Na(XQ),QQ=Gr({},Av,{relatedTarget:0}),ON=Na(QQ),JQ=Gr({},Cm,{animationName:0,elapsedTime:0,pseudoElement:0}),eJ=Na(JQ),tJ=Gr({},Cm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rJ=Na(tJ),nJ=Gr({},Cm,{data:0}),kO=Na(nJ),sJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lJ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iJ[e])?!!t[e]:!1}function eA(){return lJ}var oJ=Gr({},Av,{key:function(e){if(e.key){var t=sJ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=N0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?aJ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eA,charCode:function(e){return e.type==="keypress"?N0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?N0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cJ=Na(oJ),dJ=Gr({},kw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SO=Na(dJ),uJ=Gr({},Av,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eA}),hJ=Na(uJ),fJ=Gr({},Cm,{propertyName:0,elapsedTime:0,pseudoElement:0}),mJ=Na(fJ),pJ=Gr({},kw,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xJ=Na(pJ),gJ=[9,13,27,32],tA=bo&&"CompositionEvent"in window,ex=null;bo&&"documentMode"in document&&(ex=document.documentMode);var vJ=bo&&"TextEvent"in window&&!ex,XL=bo&&(!tA||ex&&8<ex&&11>=ex),CO=" ",_O=!1;function ZL(e,t){switch(e){case"keyup":return gJ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hh=!1;function yJ(e,t){switch(e){case"compositionend":return QL(t);case"keypress":return t.which!==32?null:(_O=!0,CO);case"textInput":return e=t.data,e===CO&&_O?null:e;default:return null}}function bJ(e,t){if(hh)return e==="compositionend"||!tA&&ZL(e,t)?(e=YL(),w0=QP=gc=null,hh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return XL&&t.locale!=="ko"?null:t.data;default:return null}}var jJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PO(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jJ[e.type]:t==="textarea"}function JL(e,t,n,s){TL(s),t=nb(t,"onChange"),0<t.length&&(n=new JP("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var tx=null,Ox=null;function wJ(e){d6(e,0)}function Sw(e){var t=ph(e);if(NL(t))return e}function NJ(e,t){if(e==="change")return t}var e6=!1;if(bo){var RN;if(bo){var DN="oninput"in document;if(!DN){var AO=document.createElement("div");AO.setAttribute("oninput","return;"),DN=typeof AO.oninput=="function"}RN=DN}else RN=!1;e6=RN&&(!document.documentMode||9<document.documentMode)}function TO(){tx&&(tx.detachEvent("onpropertychange",t6),Ox=tx=null)}function t6(e){if(e.propertyName==="value"&&Sw(Ox)){var t=[];JL(t,Ox,e,KP(e)),DL(wJ,t)}}function kJ(e,t,n){e==="focusin"?(TO(),tx=t,Ox=n,tx.attachEvent("onpropertychange",t6)):e==="focusout"&&TO()}function SJ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sw(Ox)}function CJ(e,t){if(e==="click")return Sw(t)}function _J(e,t){if(e==="input"||e==="change")return Sw(t)}function PJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ei=typeof Object.is=="function"?Object.is:PJ;function Rx(e,t){if(Ei(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!AS.call(t,a)||!Ei(e[a],t[a]))return!1}return!0}function EO(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function OO(e,t){var n=EO(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=EO(n)}}function r6(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?r6(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function n6(){for(var e=window,t=X0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=X0(e.document)}return t}function rA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function AJ(e){var t=n6(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&r6(n.ownerDocument.documentElement,n)){if(s!==null&&rA(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=OO(n,i);var l=OO(n,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var TJ=bo&&"documentMode"in document&&11>=document.documentMode,fh=null,GS=null,rx=null,YS=!1;function RO(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;YS||fh==null||fh!==X0(s)||(s=fh,"selectionStart"in s&&rA(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),rx&&Rx(rx,s)||(rx=s,s=nb(GS,"onSelect"),0<s.length&&(t=new JP("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=fh)))}function _y(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mh={animationend:_y("Animation","AnimationEnd"),animationiteration:_y("Animation","AnimationIteration"),animationstart:_y("Animation","AnimationStart"),transitionend:_y("Transition","TransitionEnd")},MN={},s6={};bo&&(s6=document.createElement("div").style,"AnimationEvent"in window||(delete mh.animationend.animation,delete mh.animationiteration.animation,delete mh.animationstart.animation),"TransitionEvent"in window||delete mh.transitionend.transition);function Cw(e){if(MN[e])return MN[e];if(!mh[e])return e;var t=mh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in s6)return MN[e]=t[n];return e}var a6=Cw("animationend"),i6=Cw("animationiteration"),l6=Cw("animationstart"),o6=Cw("transitionend"),c6=new Map,DO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yc(e,t){c6.set(e,t),Du(t,[e])}for(var $N=0;$N<DO.length;$N++){var IN=DO[$N],EJ=IN.toLowerCase(),OJ=IN[0].toUpperCase()+IN.slice(1);Yc(EJ,"on"+OJ)}Yc(a6,"onAnimationEnd");Yc(i6,"onAnimationIteration");Yc(l6,"onAnimationStart");Yc("dblclick","onDoubleClick");Yc("focusin","onFocus");Yc("focusout","onBlur");Yc(o6,"onTransitionEnd");_f("onMouseEnter",["mouseout","mouseover"]);_f("onMouseLeave",["mouseout","mouseover"]);_f("onPointerEnter",["pointerout","pointerover"]);_f("onPointerLeave",["pointerout","pointerover"]);Du("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Du("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Du("onBeforeInput",["compositionend","keypress","textInput","paste"]);Du("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Du("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Du("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lp));function MO(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,EQ(s,t,void 0,e),e.currentTarget=null}function d6(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;MO(a,o,d),i=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;MO(a,o,d),i=c}}}if(Q0)throw e=qS,Q0=!1,qS=null,e}function Mr(e,t){var n=t[e2];n===void 0&&(n=t[e2]=new Set);var s=e+"__bubble";n.has(s)||(u6(t,e,2,!1),n.add(s))}function FN(e,t,n){var s=0;t&&(s|=4),u6(n,e,s,t)}var Py="_reactListening"+Math.random().toString(36).slice(2);function Dx(e){if(!e[Py]){e[Py]=!0,vL.forEach(function(n){n!=="selectionchange"&&(RJ.has(n)||FN(n,!1,e),FN(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Py]||(t[Py]=!0,FN("selectionchange",!1,t))}}function u6(e,t,n,s){switch(GL(t)){case 1:var a=KQ;break;case 4:a=GQ;break;default:a=ZP}n=a.bind(null,t,n,e),a=void 0,!VS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function LN(e,t,n,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Sd(o),l===null)return;if(c=l.tag,c===5||c===6){s=i=l;continue e}o=o.parentNode}}s=s.return}DL(function(){var d=i,u=KP(n),h=[];e:{var f=c6.get(e);if(f!==void 0){var m=JP,v=e;switch(e){case"keypress":if(N0(n)===0)break e;case"keydown":case"keyup":m=cJ;break;case"focusin":v="focus",m=ON;break;case"focusout":v="blur",m=ON;break;case"beforeblur":case"afterblur":m=ON;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=NO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ZQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=hJ;break;case a6:case i6:case l6:m=eJ;break;case o6:m=mJ;break;case"scroll":m=YQ;break;case"wheel":m=xJ;break;case"copy":case"cut":case"paste":m=rJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=SO}var x=(t&4)!==0,w=!x&&e==="scroll",j=x?f!==null?f+"Capture":null:f;x=[];for(var g=d,b;g!==null;){b=g;var p=b.stateNode;if(b.tag===5&&p!==null&&(b=p,j!==null&&(p=Px(g,j),p!=null&&x.push(Mx(g,p,b)))),w)break;g=g.return}0<x.length&&(f=new m(f,v,null,n,u),h.push({event:f,listeners:x}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==BS&&(v=n.relatedTarget||n.fromElement)&&(Sd(v)||v[jo]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=d,v=v?Sd(v):null,v!==null&&(w=Mu(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(x=NO,p="onMouseLeave",j="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(x=SO,p="onPointerLeave",j="onPointerEnter",g="pointer"),w=m==null?f:ph(m),b=v==null?f:ph(v),f=new x(p,g+"leave",m,n,u),f.target=w,f.relatedTarget=b,p=null,Sd(u)===d&&(x=new x(j,g+"enter",v,n,u),x.target=b,x.relatedTarget=w,p=x),w=p,m&&v)t:{for(x=m,j=v,g=0,b=x;b;b=Yu(b))g++;for(b=0,p=j;p;p=Yu(p))b++;for(;0<g-b;)x=Yu(x),g--;for(;0<b-g;)j=Yu(j),b--;for(;g--;){if(x===j||j!==null&&x===j.alternate)break t;x=Yu(x),j=Yu(j)}x=null}else x=null;m!==null&&$O(h,f,m,x,!1),v!==null&&w!==null&&$O(h,w,v,x,!0)}}e:{if(f=d?ph(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=NJ;else if(PO(f))if(e6)N=_J;else{N=SJ;var k=kJ}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=CJ);if(N&&(N=N(e,d))){JL(h,N,n,u);break e}k&&k(e,f,d),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&$S(f,"number",f.value)}switch(k=d?ph(d):window,e){case"focusin":(PO(k)||k.contentEditable==="true")&&(fh=k,GS=d,rx=null);break;case"focusout":rx=GS=fh=null;break;case"mousedown":YS=!0;break;case"contextmenu":case"mouseup":case"dragend":YS=!1,RO(h,n,u);break;case"selectionchange":if(TJ)break;case"keydown":case"keyup":RO(h,n,u)}var C;if(tA)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else hh?ZL(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(XL&&n.locale!=="ko"&&(hh||_!=="onCompositionStart"?_==="onCompositionEnd"&&hh&&(C=YL()):(gc=u,QP="value"in gc?gc.value:gc.textContent,hh=!0)),k=nb(d,_),0<k.length&&(_=new kO(_,e,null,n,u),h.push({event:_,listeners:k}),C?_.data=C:(C=QL(n),C!==null&&(_.data=C)))),(C=vJ?yJ(e,n):bJ(e,n))&&(d=nb(d,"onBeforeInput"),0<d.length&&(u=new kO("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=C))}d6(h,t)})}function Mx(e,t,n){return{instance:e,listener:t,currentTarget:n}}function nb(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Px(e,n),i!=null&&s.unshift(Mx(e,i,a)),i=Px(e,t),i!=null&&s.push(Mx(e,i,a))),e=e.return}return s}function Yu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $O(e,t,n,s,a){for(var i=t._reactName,l=[];n!==null&&n!==s;){var o=n,c=o.alternate,d=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&d!==null&&(o=d,a?(c=Px(n,i),c!=null&&l.unshift(Mx(n,c,o))):a||(c=Px(n,i),c!=null&&l.push(Mx(n,c,o)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var DJ=/\r\n?/g,MJ=/\u0000|\uFFFD/g;function IO(e){return(typeof e=="string"?e:""+e).replace(DJ,`
`).replace(MJ,"")}function Ay(e,t,n){if(t=IO(t),IO(e)!==t&&n)throw Error(Ve(425))}function sb(){}var XS=null,ZS=null;function QS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var JS=typeof setTimeout=="function"?setTimeout:void 0,$J=typeof clearTimeout=="function"?clearTimeout:void 0,FO=typeof Promise=="function"?Promise:void 0,IJ=typeof queueMicrotask=="function"?queueMicrotask:typeof FO<"u"?function(e){return FO.resolve(null).then(e).catch(FJ)}:JS;function FJ(e){setTimeout(function(){throw e})}function UN(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Ex(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Ex(t)}function Pc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function LO(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var _m=Math.random().toString(36).slice(2),ol="__reactFiber$"+_m,$x="__reactProps$"+_m,jo="__reactContainer$"+_m,e2="__reactEvents$"+_m,LJ="__reactListeners$"+_m,UJ="__reactHandles$"+_m;function Sd(e){var t=e[ol];if(t)return t;for(var n=e.parentNode;n;){if(t=n[jo]||n[ol]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=LO(e);e!==null;){if(n=e[ol])return n;e=LO(e)}return t}e=n,n=e.parentNode}return null}function Tv(e){return e=e[ol]||e[jo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ph(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ve(33))}function _w(e){return e[$x]||null}var t2=[],xh=-1;function Xc(e){return{current:e}}function Fr(e){0>xh||(e.current=t2[xh],t2[xh]=null,xh--)}function Tr(e,t){xh++,t2[xh]=e.current,e.current=t}var Ic={},os=Xc(Ic),zs=Xc(!1),cu=Ic;function Pf(e,t){var n=e.type.contextTypes;if(!n)return Ic;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Vs(e){return e=e.childContextTypes,e!=null}function ab(){Fr(zs),Fr(os)}function UO(e,t,n){if(os.current!==Ic)throw Error(Ve(168));Tr(os,t),Tr(zs,n)}function h6(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(Ve(108,kQ(e)||"Unknown",a));return Gr({},n,s)}function ib(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ic,cu=os.current,Tr(os,e),Tr(zs,zs.current),!0}function BO(e,t,n){var s=e.stateNode;if(!s)throw Error(Ve(169));n?(e=h6(e,t,cu),s.__reactInternalMemoizedMergedChildContext=e,Fr(zs),Fr(os),Tr(os,e)):Fr(zs),Tr(zs,n)}var Xl=null,Pw=!1,BN=!1;function f6(e){Xl===null?Xl=[e]:Xl.push(e)}function BJ(e){Pw=!0,f6(e)}function Zc(){if(!BN&&Xl!==null){BN=!0;var e=0,t=jr;try{var n=Xl;for(jr=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Xl=null,Pw=!1}catch(a){throw Xl!==null&&(Xl=Xl.slice(e+1)),FL(GP,Zc),a}finally{jr=t,BN=!1}}return null}var gh=[],vh=0,lb=null,ob=0,Ra=[],Da=0,du=null,so=1,ao="";function pd(e,t){gh[vh++]=ob,gh[vh++]=lb,lb=e,ob=t}function m6(e,t,n){Ra[Da++]=so,Ra[Da++]=ao,Ra[Da++]=du,du=e;var s=so;e=ao;var a=32-Ni(s)-1;s&=~(1<<a),n+=1;var i=32-Ni(t)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,so=1<<32-Ni(t)+a|n<<a|s,ao=i+e}else so=1<<i|n<<a|s,ao=e}function nA(e){e.return!==null&&(pd(e,1),m6(e,1,0))}function sA(e){for(;e===lb;)lb=gh[--vh],gh[vh]=null,ob=gh[--vh],gh[vh]=null;for(;e===du;)du=Ra[--Da],Ra[Da]=null,ao=Ra[--Da],Ra[Da]=null,so=Ra[--Da],Ra[Da]=null}var xa=null,fa=null,Lr=!1,mi=null;function p6(e,t){var n=Ia(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function zO(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xa=e,fa=Pc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xa=e,fa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=du!==null?{id:so,overflow:ao}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ia(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xa=e,fa=null,!0):!1;default:return!1}}function r2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function n2(e){if(Lr){var t=fa;if(t){var n=t;if(!zO(e,t)){if(r2(e))throw Error(Ve(418));t=Pc(n.nextSibling);var s=xa;t&&zO(e,t)?p6(s,n):(e.flags=e.flags&-4097|2,Lr=!1,xa=e)}}else{if(r2(e))throw Error(Ve(418));e.flags=e.flags&-4097|2,Lr=!1,xa=e}}}function VO(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xa=e}function Ty(e){if(e!==xa)return!1;if(!Lr)return VO(e),Lr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!QS(e.type,e.memoizedProps)),t&&(t=fa)){if(r2(e))throw x6(),Error(Ve(418));for(;t;)p6(e,t),t=Pc(t.nextSibling)}if(VO(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ve(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){fa=Pc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}fa=null}}else fa=xa?Pc(e.stateNode.nextSibling):null;return!0}function x6(){for(var e=fa;e;)e=Pc(e.nextSibling)}function Af(){fa=xa=null,Lr=!1}function aA(e){mi===null?mi=[e]:mi.push(e)}var zJ=Oo.ReactCurrentBatchConfig;function fp(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ve(309));var s=n.stateNode}if(!s)throw Error(Ve(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ve(284));if(!n._owner)throw Error(Ve(290,e))}return e}function Ey(e,t){throw e=Object.prototype.toString.call(t),Error(Ve(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qO(e){var t=e._init;return t(e._payload)}function g6(e){function t(j,g){if(e){var b=j.deletions;b===null?(j.deletions=[g],j.flags|=16):b.push(g)}}function n(j,g){if(!e)return null;for(;g!==null;)t(j,g),g=g.sibling;return null}function s(j,g){for(j=new Map;g!==null;)g.key!==null?j.set(g.key,g):j.set(g.index,g),g=g.sibling;return j}function a(j,g){return j=Oc(j,g),j.index=0,j.sibling=null,j}function i(j,g,b){return j.index=b,e?(b=j.alternate,b!==null?(b=b.index,b<g?(j.flags|=2,g):b):(j.flags|=2,g)):(j.flags|=1048576,g)}function l(j){return e&&j.alternate===null&&(j.flags|=2),j}function o(j,g,b,p){return g===null||g.tag!==6?(g=GN(b,j.mode,p),g.return=j,g):(g=a(g,b),g.return=j,g)}function c(j,g,b,p){var N=b.type;return N===uh?u(j,g,b.props.children,p,b.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Zo&&qO(N)===g.type)?(p=a(g,b.props),p.ref=fp(j,g,b),p.return=j,p):(p=T0(b.type,b.key,b.props,null,j.mode,p),p.ref=fp(j,g,b),p.return=j,p)}function d(j,g,b,p){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=YN(b,j.mode,p),g.return=j,g):(g=a(g,b.children||[]),g.return=j,g)}function u(j,g,b,p,N){return g===null||g.tag!==7?(g=tu(b,j.mode,p,N),g.return=j,g):(g=a(g,b),g.return=j,g)}function h(j,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=GN(""+g,j.mode,b),g.return=j,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case by:return b=T0(g.type,g.key,g.props,null,j.mode,b),b.ref=fp(j,null,g),b.return=j,b;case dh:return g=YN(g,j.mode,b),g.return=j,g;case Zo:var p=g._init;return h(j,p(g._payload),b)}if(Ip(g)||op(g))return g=tu(g,j.mode,b,null),g.return=j,g;Ey(j,g)}return null}function f(j,g,b,p){var N=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:o(j,g,""+b,p);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case by:return b.key===N?c(j,g,b,p):null;case dh:return b.key===N?d(j,g,b,p):null;case Zo:return N=b._init,f(j,g,N(b._payload),p)}if(Ip(b)||op(b))return N!==null?null:u(j,g,b,p,null);Ey(j,b)}return null}function m(j,g,b,p,N){if(typeof p=="string"&&p!==""||typeof p=="number")return j=j.get(b)||null,o(g,j,""+p,N);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case by:return j=j.get(p.key===null?b:p.key)||null,c(g,j,p,N);case dh:return j=j.get(p.key===null?b:p.key)||null,d(g,j,p,N);case Zo:var k=p._init;return m(j,g,b,k(p._payload),N)}if(Ip(p)||op(p))return j=j.get(b)||null,u(g,j,p,N,null);Ey(g,p)}return null}function v(j,g,b,p){for(var N=null,k=null,C=g,_=g=0,P=null;C!==null&&_<b.length;_++){C.index>_?(P=C,C=null):P=C.sibling;var D=f(j,C,b[_],p);if(D===null){C===null&&(C=P);break}e&&C&&D.alternate===null&&t(j,C),g=i(D,g,_),k===null?N=D:k.sibling=D,k=D,C=P}if(_===b.length)return n(j,C),Lr&&pd(j,_),N;if(C===null){for(;_<b.length;_++)C=h(j,b[_],p),C!==null&&(g=i(C,g,_),k===null?N=C:k.sibling=C,k=C);return Lr&&pd(j,_),N}for(C=s(j,C);_<b.length;_++)P=m(C,j,_,b[_],p),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?_:P.key),g=i(P,g,_),k===null?N=P:k.sibling=P,k=P);return e&&C.forEach(function(E){return t(j,E)}),Lr&&pd(j,_),N}function x(j,g,b,p){var N=op(b);if(typeof N!="function")throw Error(Ve(150));if(b=N.call(b),b==null)throw Error(Ve(151));for(var k=N=null,C=g,_=g=0,P=null,D=b.next();C!==null&&!D.done;_++,D=b.next()){C.index>_?(P=C,C=null):P=C.sibling;var E=f(j,C,D.value,p);if(E===null){C===null&&(C=P);break}e&&C&&E.alternate===null&&t(j,C),g=i(E,g,_),k===null?N=E:k.sibling=E,k=E,C=P}if(D.done)return n(j,C),Lr&&pd(j,_),N;if(C===null){for(;!D.done;_++,D=b.next())D=h(j,D.value,p),D!==null&&(g=i(D,g,_),k===null?N=D:k.sibling=D,k=D);return Lr&&pd(j,_),N}for(C=s(j,C);!D.done;_++,D=b.next())D=m(C,j,_,D.value,p),D!==null&&(e&&D.alternate!==null&&C.delete(D.key===null?_:D.key),g=i(D,g,_),k===null?N=D:k.sibling=D,k=D);return e&&C.forEach(function($){return t(j,$)}),Lr&&pd(j,_),N}function w(j,g,b,p){if(typeof b=="object"&&b!==null&&b.type===uh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case by:e:{for(var N=b.key,k=g;k!==null;){if(k.key===N){if(N=b.type,N===uh){if(k.tag===7){n(j,k.sibling),g=a(k,b.props.children),g.return=j,j=g;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Zo&&qO(N)===k.type){n(j,k.sibling),g=a(k,b.props),g.ref=fp(j,k,b),g.return=j,j=g;break e}n(j,k);break}else t(j,k);k=k.sibling}b.type===uh?(g=tu(b.props.children,j.mode,p,b.key),g.return=j,j=g):(p=T0(b.type,b.key,b.props,null,j.mode,p),p.ref=fp(j,g,b),p.return=j,j=p)}return l(j);case dh:e:{for(k=b.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){n(j,g.sibling),g=a(g,b.children||[]),g.return=j,j=g;break e}else{n(j,g);break}else t(j,g);g=g.sibling}g=YN(b,j.mode,p),g.return=j,j=g}return l(j);case Zo:return k=b._init,w(j,g,k(b._payload),p)}if(Ip(b))return v(j,g,b,p);if(op(b))return x(j,g,b,p);Ey(j,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(n(j,g.sibling),g=a(g,b),g.return=j,j=g):(n(j,g),g=GN(b,j.mode,p),g.return=j,j=g),l(j)):n(j,g)}return w}var Tf=g6(!0),v6=g6(!1),cb=Xc(null),db=null,yh=null,iA=null;function lA(){iA=yh=db=null}function oA(e){var t=cb.current;Fr(cb),e._currentValue=t}function s2(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Rh(e,t){db=e,iA=yh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fs=!0),e.firstContext=null)}function za(e){var t=e._currentValue;if(iA!==e)if(e={context:e,memoizedValue:t,next:null},yh===null){if(db===null)throw Error(Ve(308));yh=e,db.dependencies={lanes:0,firstContext:e}}else yh=yh.next=e;return t}var Cd=null;function cA(e){Cd===null?Cd=[e]:Cd.push(e)}function y6(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,cA(t)):(n.next=a.next,a.next=n),t.interleaved=n,wo(e,s)}function wo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Qo=!1;function dA(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function po(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ac(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ir&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,wo(e,n)}return a=s.interleaved,a===null?(t.next=t,cA(s)):(t.next=a.next,a.next=t),s.interleaved=t,wo(e,n)}function k0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,YP(e,n)}}function WO(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ub(e,t,n,s){var a=e.updateQueue;Qo=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;l=0,u=d=c=null,o=i;do{var f=o.lane,m=o.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,x=o;switch(f=t,m=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=Gr({},h,f);break e;case 2:Qo=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,l|=f;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;f=o,o=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);hu|=l,e.lanes=l,e.memoizedState=h}}function HO(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(Ve(191,a));a.call(s)}}}var Ev={},Nl=Xc(Ev),Ix=Xc(Ev),Fx=Xc(Ev);function _d(e){if(e===Ev)throw Error(Ve(174));return e}function uA(e,t){switch(Tr(Fx,t),Tr(Ix,e),Tr(Nl,Ev),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:FS(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=FS(t,e)}Fr(Nl),Tr(Nl,t)}function Ef(){Fr(Nl),Fr(Ix),Fr(Fx)}function j6(e){_d(Fx.current);var t=_d(Nl.current),n=FS(t,e.type);t!==n&&(Tr(Ix,e),Tr(Nl,n))}function hA(e){Ix.current===e&&(Fr(Nl),Fr(Ix))}var Hr=Xc(0);function hb(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zN=[];function fA(){for(var e=0;e<zN.length;e++)zN[e]._workInProgressVersionPrimary=null;zN.length=0}var S0=Oo.ReactCurrentDispatcher,VN=Oo.ReactCurrentBatchConfig,uu=0,Kr=null,jn=null,Dn=null,fb=!1,nx=!1,Lx=0,VJ=0;function Jn(){throw Error(Ve(321))}function mA(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ei(e[n],t[n]))return!1;return!0}function pA(e,t,n,s,a,i){if(uu=i,Kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,S0.current=e===null||e.memoizedState===null?KJ:GJ,e=n(s,a),nx){i=0;do{if(nx=!1,Lx=0,25<=i)throw Error(Ve(301));i+=1,Dn=jn=null,t.updateQueue=null,S0.current=YJ,e=n(s,a)}while(nx)}if(S0.current=mb,t=jn!==null&&jn.next!==null,uu=0,Dn=jn=Kr=null,fb=!1,t)throw Error(Ve(300));return e}function xA(){var e=Lx!==0;return Lx=0,e}function Qi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Kr.memoizedState=Dn=e:Dn=Dn.next=e,Dn}function Va(){if(jn===null){var e=Kr.alternate;e=e!==null?e.memoizedState:null}else e=jn.next;var t=Dn===null?Kr.memoizedState:Dn.next;if(t!==null)Dn=t,jn=e;else{if(e===null)throw Error(Ve(310));jn=e,e={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Dn===null?Kr.memoizedState=Dn=e:Dn=Dn.next=e}return Dn}function Ux(e,t){return typeof t=="function"?t(e):t}function qN(e){var t=Va(),n=t.queue;if(n===null)throw Error(Ve(311));n.lastRenderedReducer=e;var s=jn,a=s.baseQueue,i=n.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,s=s.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((uu&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,l=s):c=c.next=h,Kr.lanes|=u,hu|=u}d=d.next}while(d!==null&&d!==i);c===null?l=s:c.next=o,Ei(s,t.memoizedState)||(Fs=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Kr.lanes|=i,hu|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function WN(e){var t=Va(),n=t.queue;if(n===null)throw Error(Ve(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);Ei(i,t.memoizedState)||(Fs=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function w6(){}function N6(e,t){var n=Kr,s=Va(),a=t(),i=!Ei(s.memoizedState,a);if(i&&(s.memoizedState=a,Fs=!0),s=s.queue,gA(C6.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||Dn!==null&&Dn.memoizedState.tag&1){if(n.flags|=2048,Bx(9,S6.bind(null,n,s,a,t),void 0,null),Fn===null)throw Error(Ve(349));uu&30||k6(n,t,a)}return a}function k6(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Kr.updateQueue,t===null?(t={lastEffect:null,stores:null},Kr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function S6(e,t,n,s){t.value=n,t.getSnapshot=s,_6(t)&&P6(e)}function C6(e,t,n){return n(function(){_6(t)&&P6(e)})}function _6(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ei(e,n)}catch{return!0}}function P6(e){var t=wo(e,1);t!==null&&ki(t,e,1,-1)}function KO(e){var t=Qi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ux,lastRenderedState:e},t.queue=e,e=e.dispatch=HJ.bind(null,Kr,e),[t.memoizedState,e]}function Bx(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Kr.updateQueue,t===null?(t={lastEffect:null,stores:null},Kr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function A6(){return Va().memoizedState}function C0(e,t,n,s){var a=Qi();Kr.flags|=e,a.memoizedState=Bx(1|t,n,void 0,s===void 0?null:s)}function Aw(e,t,n,s){var a=Va();s=s===void 0?null:s;var i=void 0;if(jn!==null){var l=jn.memoizedState;if(i=l.destroy,s!==null&&mA(s,l.deps)){a.memoizedState=Bx(t,n,i,s);return}}Kr.flags|=e,a.memoizedState=Bx(1|t,n,i,s)}function GO(e,t){return C0(8390656,8,e,t)}function gA(e,t){return Aw(2048,8,e,t)}function T6(e,t){return Aw(4,2,e,t)}function E6(e,t){return Aw(4,4,e,t)}function O6(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function R6(e,t,n){return n=n!=null?n.concat([e]):null,Aw(4,4,O6.bind(null,t,e),n)}function vA(){}function D6(e,t){var n=Va();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&mA(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function M6(e,t){var n=Va();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&mA(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function $6(e,t,n){return uu&21?(Ei(n,t)||(n=BL(),Kr.lanes|=n,hu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fs=!0),e.memoizedState=n)}function qJ(e,t){var n=jr;jr=n!==0&&4>n?n:4,e(!0);var s=VN.transition;VN.transition={};try{e(!1),t()}finally{jr=n,VN.transition=s}}function I6(){return Va().memoizedState}function WJ(e,t,n){var s=Ec(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},F6(e))L6(t,n);else if(n=y6(e,t,n,s),n!==null){var a=Ss();ki(n,e,s,a),U6(n,t,s)}}function HJ(e,t,n){var s=Ec(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(F6(e))L6(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,n);if(a.hasEagerState=!0,a.eagerState=o,Ei(o,l)){var c=t.interleaved;c===null?(a.next=a,cA(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=y6(e,t,a,s),n!==null&&(a=Ss(),ki(n,e,s,a),U6(n,t,s))}}function F6(e){var t=e.alternate;return e===Kr||t!==null&&t===Kr}function L6(e,t){nx=fb=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function U6(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,YP(e,n)}}var mb={readContext:za,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useInsertionEffect:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useSyncExternalStore:Jn,useId:Jn,unstable_isNewReconciler:!1},KJ={readContext:za,useCallback:function(e,t){return Qi().memoizedState=[e,t===void 0?null:t],e},useContext:za,useEffect:GO,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,C0(4194308,4,O6.bind(null,t,e),n)},useLayoutEffect:function(e,t){return C0(4194308,4,e,t)},useInsertionEffect:function(e,t){return C0(4,2,e,t)},useMemo:function(e,t){var n=Qi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Qi();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=WJ.bind(null,Kr,e),[s.memoizedState,e]},useRef:function(e){var t=Qi();return e={current:e},t.memoizedState=e},useState:KO,useDebugValue:vA,useDeferredValue:function(e){return Qi().memoizedState=e},useTransition:function(){var e=KO(!1),t=e[0];return e=qJ.bind(null,e[1]),Qi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Kr,a=Qi();if(Lr){if(n===void 0)throw Error(Ve(407));n=n()}else{if(n=t(),Fn===null)throw Error(Ve(349));uu&30||k6(s,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,GO(C6.bind(null,s,i,e),[e]),s.flags|=2048,Bx(9,S6.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=Qi(),t=Fn.identifierPrefix;if(Lr){var n=ao,s=so;n=(s&~(1<<32-Ni(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Lx++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=VJ++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},GJ={readContext:za,useCallback:D6,useContext:za,useEffect:gA,useImperativeHandle:R6,useInsertionEffect:T6,useLayoutEffect:E6,useMemo:M6,useReducer:qN,useRef:A6,useState:function(){return qN(Ux)},useDebugValue:vA,useDeferredValue:function(e){var t=Va();return $6(t,jn.memoizedState,e)},useTransition:function(){var e=qN(Ux)[0],t=Va().memoizedState;return[e,t]},useMutableSource:w6,useSyncExternalStore:N6,useId:I6,unstable_isNewReconciler:!1},YJ={readContext:za,useCallback:D6,useContext:za,useEffect:gA,useImperativeHandle:R6,useInsertionEffect:T6,useLayoutEffect:E6,useMemo:M6,useReducer:WN,useRef:A6,useState:function(){return WN(Ux)},useDebugValue:vA,useDeferredValue:function(e){var t=Va();return jn===null?t.memoizedState=e:$6(t,jn.memoizedState,e)},useTransition:function(){var e=WN(Ux)[0],t=Va().memoizedState;return[e,t]},useMutableSource:w6,useSyncExternalStore:N6,useId:I6,unstable_isNewReconciler:!1};function ti(e,t){if(e&&e.defaultProps){t=Gr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function a2(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Gr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Tw={isMounted:function(e){return(e=e._reactInternals)?Mu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Ss(),a=Ec(e),i=po(s,a);i.payload=t,n!=null&&(i.callback=n),t=Ac(e,i,a),t!==null&&(ki(t,e,a,s),k0(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Ss(),a=Ec(e),i=po(s,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ac(e,i,a),t!==null&&(ki(t,e,a,s),k0(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ss(),s=Ec(e),a=po(n,s);a.tag=2,t!=null&&(a.callback=t),t=Ac(e,a,s),t!==null&&(ki(t,e,s,n),k0(t,e,s))}};function YO(e,t,n,s,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):t.prototype&&t.prototype.isPureReactComponent?!Rx(n,s)||!Rx(a,i):!0}function B6(e,t,n){var s=!1,a=Ic,i=t.contextType;return typeof i=="object"&&i!==null?i=za(i):(a=Vs(t)?cu:os.current,s=t.contextTypes,i=(s=s!=null)?Pf(e,a):Ic),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tw,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function XO(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Tw.enqueueReplaceState(t,t.state,null)}function i2(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},dA(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=za(i):(i=Vs(t)?cu:os.current,a.context=Pf(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(a2(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Tw.enqueueReplaceState(a,a.state,null),ub(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Of(e,t){try{var n="",s=t;do n+=NQ(s),s=s.return;while(s);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function HN(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function l2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var XJ=typeof WeakMap=="function"?WeakMap:Map;function z6(e,t,n){n=po(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){xb||(xb=!0,g2=s),l2(e,t)},n}function V6(e,t,n){n=po(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){l2(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){l2(e,t),typeof s!="function"&&(Tc===null?Tc=new Set([this]):Tc.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function ZO(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new XJ;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=dee.bind(null,e,t,n),t.then(e,e))}function QO(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function JO(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=po(-1,1),t.tag=2,Ac(n,t,1))),n.lanes|=1),e)}var ZJ=Oo.ReactCurrentOwner,Fs=!1;function bs(e,t,n,s){t.child=e===null?v6(t,null,n,s):Tf(t,e.child,n,s)}function eR(e,t,n,s,a){n=n.render;var i=t.ref;return Rh(t,a),s=pA(e,t,n,s,i,a),n=xA(),e!==null&&!Fs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,No(e,t,a)):(Lr&&n&&nA(t),t.flags|=1,bs(e,t,s,a),t.child)}function tR(e,t,n,s,a){if(e===null){var i=n.type;return typeof i=="function"&&!CA(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,q6(e,t,i,s,a)):(e=T0(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Rx,n(l,s)&&e.ref===t.ref)return No(e,t,a)}return t.flags|=1,e=Oc(i,s),e.ref=t.ref,e.return=t,t.child=e}function q6(e,t,n,s,a){if(e!==null){var i=e.memoizedProps;if(Rx(i,s)&&e.ref===t.ref)if(Fs=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Fs=!0);else return t.lanes=e.lanes,No(e,t,a)}return o2(e,t,n,s,a)}function W6(e,t,n){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(jh,la),la|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tr(jh,la),la|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Tr(jh,la),la|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,Tr(jh,la),la|=s;return bs(e,t,a,n),t.child}function H6(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function o2(e,t,n,s,a){var i=Vs(n)?cu:os.current;return i=Pf(t,i),Rh(t,a),n=pA(e,t,n,s,i,a),s=xA(),e!==null&&!Fs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,No(e,t,a)):(Lr&&s&&nA(t),t.flags|=1,bs(e,t,n,a),t.child)}function rR(e,t,n,s,a){if(Vs(n)){var i=!0;ib(t)}else i=!1;if(Rh(t,a),t.stateNode===null)_0(e,t),B6(t,n,s),i2(t,n,s,a),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=za(d):(d=Vs(n)?cu:os.current,d=Pf(t,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==d)&&XO(t,l,s,d),Qo=!1;var f=t.memoizedState;l.state=f,ub(t,s,l,a),c=t.memoizedState,o!==s||f!==c||zs.current||Qo?(typeof u=="function"&&(a2(t,n,u,s),c=t.memoizedState),(o=Qo||YO(t,n,o,s,f,c,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=d,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,b6(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:ti(t.type,o),l.props=d,h=t.pendingProps,f=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=za(c):(c=Vs(n)?cu:os.current,c=Pf(t,c));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==c)&&XO(t,l,s,c),Qo=!1,f=t.memoizedState,l.state=f,ub(t,s,l,a);var v=t.memoizedState;o!==h||f!==v||zs.current||Qo?(typeof m=="function"&&(a2(t,n,m,s),v=t.memoizedState),(d=Qo||YO(t,n,d,s,f,v,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,v,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,v,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),l.props=s,l.state=v,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return c2(e,t,n,s,i,a)}function c2(e,t,n,s,a,i){H6(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return a&&BO(t,n,!1),No(e,t,i);s=t.stateNode,ZJ.current=t;var o=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Tf(t,e.child,null,i),t.child=Tf(t,null,o,i)):bs(e,t,o,i),t.memoizedState=s.state,a&&BO(t,n,!0),t.child}function K6(e){var t=e.stateNode;t.pendingContext?UO(e,t.pendingContext,t.pendingContext!==t.context):t.context&&UO(e,t.context,!1),uA(e,t.containerInfo)}function nR(e,t,n,s,a){return Af(),aA(a),t.flags|=256,bs(e,t,n,s),t.child}var d2={dehydrated:null,treeContext:null,retryLane:0};function u2(e){return{baseLanes:e,cachePool:null,transitions:null}}function G6(e,t,n){var s=t.pendingProps,a=Hr.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Tr(Hr,a&1),e===null)return n2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,i?(s=t.mode,i=t.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Rw(l,s,0,null),e=tu(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=u2(n),t.memoizedState=d2,e):yA(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return QJ(e,t,l,s,o,a,n);if(i){i=s.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Oc(a,c),s.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Oc(o,i):(i=tu(i,l,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,l=e.child.memoizedState,l=l===null?u2(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=d2,s}return i=e.child,e=i.sibling,s=Oc(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function yA(e,t){return t=Rw({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Oy(e,t,n,s){return s!==null&&aA(s),Tf(t,e.child,null,n),e=yA(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function QJ(e,t,n,s,a,i,l){if(n)return t.flags&256?(t.flags&=-257,s=HN(Error(Ve(422))),Oy(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Rw({mode:"visible",children:s.children},a,0,null),i=tu(i,a,l,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Tf(t,e.child,null,l),t.child.memoizedState=u2(l),t.memoizedState=d2,i);if(!(t.mode&1))return Oy(e,t,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var o=s.dgst;return s=o,i=Error(Ve(419)),s=HN(i,s,void 0),Oy(e,t,l,s)}if(o=(l&e.childLanes)!==0,Fs||o){if(s=Fn,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,wo(e,a),ki(s,e,a,-1))}return SA(),s=HN(Error(Ve(421))),Oy(e,t,l,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=uee.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,fa=Pc(a.nextSibling),xa=t,Lr=!0,mi=null,e!==null&&(Ra[Da++]=so,Ra[Da++]=ao,Ra[Da++]=du,so=e.id,ao=e.overflow,du=t),t=yA(t,s.children),t.flags|=4096,t)}function sR(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),s2(e.return,t,n)}function KN(e,t,n,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=a)}function Y6(e,t,n){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(bs(e,t,s.children,n),s=Hr.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sR(e,n,t);else if(e.tag===19)sR(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Tr(Hr,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&hb(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),KN(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&hb(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}KN(t,!0,n,null,i);break;case"together":KN(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function No(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),hu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ve(153));if(t.child!==null){for(e=t.child,n=Oc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Oc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function JJ(e,t,n){switch(t.tag){case 3:K6(t),Af();break;case 5:j6(t);break;case 1:Vs(t.type)&&ib(t);break;case 4:uA(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Tr(cb,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Tr(Hr,Hr.current&1),t.flags|=128,null):n&t.child.childLanes?G6(e,t,n):(Tr(Hr,Hr.current&1),e=No(e,t,n),e!==null?e.sibling:null);Tr(Hr,Hr.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return Y6(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Tr(Hr,Hr.current),s)break;return null;case 22:case 23:return t.lanes=0,W6(e,t,n)}return No(e,t,n)}var X6,h2,Z6,Q6;X6=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};h2=function(){};Z6=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,_d(Nl.current);var i=null;switch(n){case"input":a=DS(e,a),s=DS(e,s),i=[];break;case"select":a=Gr({},a,{value:void 0}),s=Gr({},s,{value:void 0}),i=[];break;case"textarea":a=IS(e,a),s=IS(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=sb)}LS(n,s);var l;n=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Cx.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(o=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Cx.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Mr("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Q6=function(e,t,n,s){n!==s&&(t.flags|=4)};function mp(e,t){if(!Lr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function es(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function eee(e,t,n){var s=t.pendingProps;switch(sA(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return es(t),null;case 1:return Vs(t.type)&&ab(),es(t),null;case 3:return s=t.stateNode,Ef(),Fr(zs),Fr(os),fA(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ty(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mi!==null&&(b2(mi),mi=null))),h2(e,t),es(t),null;case 5:hA(t);var a=_d(Fx.current);if(n=t.type,e!==null&&t.stateNode!=null)Z6(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Ve(166));return es(t),null}if(e=_d(Nl.current),Ty(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[ol]=t,s[$x]=i,e=(t.mode&1)!==0,n){case"dialog":Mr("cancel",s),Mr("close",s);break;case"iframe":case"object":case"embed":Mr("load",s);break;case"video":case"audio":for(a=0;a<Lp.length;a++)Mr(Lp[a],s);break;case"source":Mr("error",s);break;case"img":case"image":case"link":Mr("error",s),Mr("load",s);break;case"details":Mr("toggle",s);break;case"input":fO(s,i),Mr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Mr("invalid",s);break;case"textarea":pO(s,i),Mr("invalid",s)}LS(n,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?s.textContent!==o&&(i.suppressHydrationWarning!==!0&&Ay(s.textContent,o,e),a=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Ay(s.textContent,o,e),a=["children",""+o]):Cx.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Mr("scroll",s)}switch(n){case"input":jy(s),mO(s,i,!0);break;case"textarea":jy(s),xO(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=sb)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=CL(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),n==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[ol]=t,e[$x]=s,X6(e,t,!1,!1),t.stateNode=e;e:{switch(l=US(n,s),n){case"dialog":Mr("cancel",e),Mr("close",e),a=s;break;case"iframe":case"object":case"embed":Mr("load",e),a=s;break;case"video":case"audio":for(a=0;a<Lp.length;a++)Mr(Lp[a],e);a=s;break;case"source":Mr("error",e),a=s;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),a=s;break;case"details":Mr("toggle",e),a=s;break;case"input":fO(e,s),a=DS(e,s),Mr("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Gr({},s,{value:void 0}),Mr("invalid",e);break;case"textarea":pO(e,s),a=IS(e,s),Mr("invalid",e);break;default:a=s}LS(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?AL(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_L(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_x(e,c):typeof c=="number"&&_x(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Cx.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Mr("scroll",e):c!=null&&VP(e,i,c,l))}switch(n){case"input":jy(e),mO(e,s,!1);break;case"textarea":jy(e),xO(e);break;case"option":s.value!=null&&e.setAttribute("value",""+$c(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Ah(e,!!s.multiple,i,!1):s.defaultValue!=null&&Ah(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=sb)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return es(t),null;case 6:if(e&&t.stateNode!=null)Q6(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Ve(166));if(n=_d(Fx.current),_d(Nl.current),Ty(t)){if(s=t.stateNode,n=t.memoizedProps,s[ol]=t,(i=s.nodeValue!==n)&&(e=xa,e!==null))switch(e.tag){case 3:Ay(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ay(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[ol]=t,t.stateNode=s}return es(t),null;case 13:if(Fr(Hr),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Lr&&fa!==null&&t.mode&1&&!(t.flags&128))x6(),Af(),t.flags|=98560,i=!1;else if(i=Ty(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(Ve(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ve(317));i[ol]=t}else Af(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;es(t),i=!1}else mi!==null&&(b2(mi),mi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Hr.current&1?Pn===0&&(Pn=3):SA())),t.updateQueue!==null&&(t.flags|=4),es(t),null);case 4:return Ef(),h2(e,t),e===null&&Dx(t.stateNode.containerInfo),es(t),null;case 10:return oA(t.type._context),es(t),null;case 17:return Vs(t.type)&&ab(),es(t),null;case 19:if(Fr(Hr),i=t.memoizedState,i===null)return es(t),null;if(s=(t.flags&128)!==0,l=i.rendering,l===null)if(s)mp(i,!1);else{if(Pn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=hb(e),l!==null){for(t.flags|=128,mp(i,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Tr(Hr,Hr.current&1|2),t.child}e=e.sibling}i.tail!==null&&sn()>Rf&&(t.flags|=128,s=!0,mp(i,!1),t.lanes=4194304)}else{if(!s)if(e=hb(l),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),mp(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Lr)return es(t),null}else 2*sn()-i.renderingStartTime>Rf&&n!==1073741824&&(t.flags|=128,s=!0,mp(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=sn(),t.sibling=null,n=Hr.current,Tr(Hr,s?n&1|2:n&1),t):(es(t),null);case 22:case 23:return kA(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?la&1073741824&&(es(t),t.subtreeFlags&6&&(t.flags|=8192)):es(t),null;case 24:return null;case 25:return null}throw Error(Ve(156,t.tag))}function tee(e,t){switch(sA(t),t.tag){case 1:return Vs(t.type)&&ab(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ef(),Fr(zs),Fr(os),fA(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hA(t),null;case 13:if(Fr(Hr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ve(340));Af()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fr(Hr),null;case 4:return Ef(),null;case 10:return oA(t.type._context),null;case 22:case 23:return kA(),null;case 24:return null;default:return null}}var Ry=!1,ss=!1,ree=typeof WeakSet=="function"?WeakSet:Set,rt=null;function bh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Jr(e,t,s)}else n.current=null}function f2(e,t,n){try{n()}catch(s){Jr(e,t,s)}}var aR=!1;function nee(e,t){if(XS=tb,e=n6(),rA(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var m;h!==n||a!==0&&h.nodeType!==3||(o=l+a),h!==i||s!==0&&h.nodeType!==3||(c=l+s),h.nodeType===3&&(l+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++d===a&&(o=l),f===i&&++u===s&&(c=l),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ZS={focusedElem:e,selectionRange:n},tb=!1,rt=t;rt!==null;)if(t=rt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,rt=e;else for(;rt!==null;){t=rt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,w=v.memoizedState,j=t.stateNode,g=j.getSnapshotBeforeUpdate(t.elementType===t.type?x:ti(t.type,x),w);j.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ve(163))}}catch(p){Jr(t,t.return,p)}if(e=t.sibling,e!==null){e.return=t.return,rt=e;break}rt=t.return}return v=aR,aR=!1,v}function sx(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&f2(t,n,i)}a=a.next}while(a!==s)}}function Ew(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function m2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function J6(e){var t=e.alternate;t!==null&&(e.alternate=null,J6(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ol],delete t[$x],delete t[e2],delete t[LJ],delete t[UJ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function e8(e){return e.tag===5||e.tag===3||e.tag===4}function iR(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||e8(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function p2(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=sb));else if(s!==4&&(e=e.child,e!==null))for(p2(e,t,n),e=e.sibling;e!==null;)p2(e,t,n),e=e.sibling}function x2(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(x2(e,t,n),e=e.sibling;e!==null;)x2(e,t,n),e=e.sibling}var Kn=null,ci=!1;function zo(e,t,n){for(n=n.child;n!==null;)t8(e,t,n),n=n.sibling}function t8(e,t,n){if(wl&&typeof wl.onCommitFiberUnmount=="function")try{wl.onCommitFiberUnmount(Nw,n)}catch{}switch(n.tag){case 5:ss||bh(n,t);case 6:var s=Kn,a=ci;Kn=null,zo(e,t,n),Kn=s,ci=a,Kn!==null&&(ci?(e=Kn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Kn.removeChild(n.stateNode));break;case 18:Kn!==null&&(ci?(e=Kn,n=n.stateNode,e.nodeType===8?UN(e.parentNode,n):e.nodeType===1&&UN(e,n),Ex(e)):UN(Kn,n.stateNode));break;case 4:s=Kn,a=ci,Kn=n.stateNode.containerInfo,ci=!0,zo(e,t,n),Kn=s,ci=a;break;case 0:case 11:case 14:case 15:if(!ss&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&f2(n,t,l),a=a.next}while(a!==s)}zo(e,t,n);break;case 1:if(!ss&&(bh(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Jr(n,t,o)}zo(e,t,n);break;case 21:zo(e,t,n);break;case 22:n.mode&1?(ss=(s=ss)||n.memoizedState!==null,zo(e,t,n),ss=s):zo(e,t,n);break;default:zo(e,t,n)}}function lR(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ree),t.forEach(function(s){var a=hee.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Qa(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Kn=o.stateNode,ci=!1;break e;case 3:Kn=o.stateNode.containerInfo,ci=!0;break e;case 4:Kn=o.stateNode.containerInfo,ci=!0;break e}o=o.return}if(Kn===null)throw Error(Ve(160));t8(i,l,a),Kn=null,ci=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Jr(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)r8(t,e),t=t.sibling}function r8(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qa(t,e),Xi(e),s&4){try{sx(3,e,e.return),Ew(3,e)}catch(x){Jr(e,e.return,x)}try{sx(5,e,e.return)}catch(x){Jr(e,e.return,x)}}break;case 1:Qa(t,e),Xi(e),s&512&&n!==null&&bh(n,n.return);break;case 5:if(Qa(t,e),Xi(e),s&512&&n!==null&&bh(n,n.return),e.flags&32){var a=e.stateNode;try{_x(a,"")}catch(x){Jr(e,e.return,x)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&kL(a,i),US(o,l);var d=US(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];u==="style"?AL(a,h):u==="dangerouslySetInnerHTML"?_L(a,h):u==="children"?_x(a,h):VP(a,u,h,d)}switch(o){case"input":MS(a,i);break;case"textarea":SL(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ah(a,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ah(a,!!i.multiple,i.defaultValue,!0):Ah(a,!!i.multiple,i.multiple?[]:"",!1))}a[$x]=i}catch(x){Jr(e,e.return,x)}}break;case 6:if(Qa(t,e),Xi(e),s&4){if(e.stateNode===null)throw Error(Ve(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){Jr(e,e.return,x)}}break;case 3:if(Qa(t,e),Xi(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ex(t.containerInfo)}catch(x){Jr(e,e.return,x)}break;case 4:Qa(t,e),Xi(e);break;case 13:Qa(t,e),Xi(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(wA=sn())),s&4&&lR(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(ss=(d=ss)||u,Qa(t,e),ss=d):Qa(t,e),Xi(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(rt=e,u=e.child;u!==null;){for(h=rt=u;rt!==null;){switch(f=rt,m=f.child,f.tag){case 0:case 11:case 14:case 15:sx(4,f,f.return);break;case 1:bh(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){Jr(s,n,x)}}break;case 5:bh(f,f.return);break;case 22:if(f.memoizedState!==null){cR(h);continue}}m!==null?(m.return=f,rt=m):cR(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=PL("display",l))}catch(x){Jr(e,e.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){Jr(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Qa(t,e),Xi(e),s&4&&lR(e);break;case 21:break;default:Qa(t,e),Xi(e)}}function Xi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(e8(n)){var s=n;break e}n=n.return}throw Error(Ve(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(_x(a,""),s.flags&=-33);var i=iR(e);x2(e,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,o=iR(e);p2(e,o,l);break;default:throw Error(Ve(161))}}catch(c){Jr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function see(e,t,n){rt=e,n8(e)}function n8(e,t,n){for(var s=(e.mode&1)!==0;rt!==null;){var a=rt,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||Ry;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||ss;o=Ry;var d=ss;if(Ry=l,(ss=c)&&!d)for(rt=a;rt!==null;)l=rt,c=l.child,l.tag===22&&l.memoizedState!==null?dR(a):c!==null?(c.return=l,rt=c):dR(a);for(;i!==null;)rt=i,n8(i),i=i.sibling;rt=a,Ry=o,ss=d}oR(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,rt=i):oR(e)}}function oR(e){for(;rt!==null;){var t=rt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ss||Ew(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ss)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ti(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&HO(t,i,s);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}HO(t,l,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ex(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ve(163))}ss||t.flags&512&&m2(t)}catch(f){Jr(t,t.return,f)}}if(t===e){rt=null;break}if(n=t.sibling,n!==null){n.return=t.return,rt=n;break}rt=t.return}}function cR(e){for(;rt!==null;){var t=rt;if(t===e){rt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,rt=n;break}rt=t.return}}function dR(e){for(;rt!==null;){var t=rt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ew(4,t)}catch(c){Jr(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Jr(t,a,c)}}var i=t.return;try{m2(t)}catch(c){Jr(t,i,c)}break;case 5:var l=t.return;try{m2(t)}catch(c){Jr(t,l,c)}}}catch(c){Jr(t,t.return,c)}if(t===e){rt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,rt=o;break}rt=t.return}}var aee=Math.ceil,pb=Oo.ReactCurrentDispatcher,bA=Oo.ReactCurrentOwner,Ua=Oo.ReactCurrentBatchConfig,ir=0,Fn=null,hn=null,Yn=0,la=0,jh=Xc(0),Pn=0,zx=null,hu=0,Ow=0,jA=0,ax=null,$s=null,wA=0,Rf=1/0,Gl=null,xb=!1,g2=null,Tc=null,Dy=!1,vc=null,gb=0,ix=0,v2=null,P0=-1,A0=0;function Ss(){return ir&6?sn():P0!==-1?P0:P0=sn()}function Ec(e){return e.mode&1?ir&2&&Yn!==0?Yn&-Yn:zJ.transition!==null?(A0===0&&(A0=BL()),A0):(e=jr,e!==0||(e=window.event,e=e===void 0?16:GL(e.type)),e):1}function ki(e,t,n,s){if(50<ix)throw ix=0,v2=null,Error(Ve(185));Pv(e,n,s),(!(ir&2)||e!==Fn)&&(e===Fn&&(!(ir&2)&&(Ow|=n),Pn===4&&rc(e,Yn)),qs(e,s),n===1&&ir===0&&!(t.mode&1)&&(Rf=sn()+500,Pw&&Zc()))}function qs(e,t){var n=e.callbackNode;zQ(e,t);var s=eb(e,e===Fn?Yn:0);if(s===0)n!==null&&yO(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&yO(n),t===1)e.tag===0?BJ(uR.bind(null,e)):f6(uR.bind(null,e)),IJ(function(){!(ir&6)&&Zc()}),n=null;else{switch(zL(s)){case 1:n=GP;break;case 4:n=LL;break;case 16:n=J0;break;case 536870912:n=UL;break;default:n=J0}n=u8(n,s8.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function s8(e,t){if(P0=-1,A0=0,ir&6)throw Error(Ve(327));var n=e.callbackNode;if(Dh()&&e.callbackNode!==n)return null;var s=eb(e,e===Fn?Yn:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=vb(e,s);else{t=s;var a=ir;ir|=2;var i=i8();(Fn!==e||Yn!==t)&&(Gl=null,Rf=sn()+500,eu(e,t));do try{oee();break}catch(o){a8(e,o)}while(!0);lA(),pb.current=i,ir=a,hn!==null?t=0:(Fn=null,Yn=0,t=Pn)}if(t!==0){if(t===2&&(a=WS(e),a!==0&&(s=a,t=y2(e,a))),t===1)throw n=zx,eu(e,0),rc(e,s),qs(e,sn()),n;if(t===6)rc(e,s);else{if(a=e.current.alternate,!(s&30)&&!iee(a)&&(t=vb(e,s),t===2&&(i=WS(e),i!==0&&(s=i,t=y2(e,i))),t===1))throw n=zx,eu(e,0),rc(e,s),qs(e,sn()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(Ve(345));case 2:xd(e,$s,Gl);break;case 3:if(rc(e,s),(s&130023424)===s&&(t=wA+500-sn(),10<t)){if(eb(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Ss(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=JS(xd.bind(null,e,$s,Gl),t);break}xd(e,$s,Gl);break;case 4:if(rc(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var l=31-Ni(s);i=1<<l,l=t[l],l>a&&(a=l),s&=~i}if(s=a,s=sn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*aee(s/1960))-s,10<s){e.timeoutHandle=JS(xd.bind(null,e,$s,Gl),s);break}xd(e,$s,Gl);break;case 5:xd(e,$s,Gl);break;default:throw Error(Ve(329))}}}return qs(e,sn()),e.callbackNode===n?s8.bind(null,e):null}function y2(e,t){var n=ax;return e.current.memoizedState.isDehydrated&&(eu(e,t).flags|=256),e=vb(e,t),e!==2&&(t=$s,$s=n,t!==null&&b2(t)),e}function b2(e){$s===null?$s=e:$s.push.apply($s,e)}function iee(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],i=a.getSnapshot;a=a.value;try{if(!Ei(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rc(e,t){for(t&=~jA,t&=~Ow,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ni(t),s=1<<n;e[n]=-1,t&=~s}}function uR(e){if(ir&6)throw Error(Ve(327));Dh();var t=eb(e,0);if(!(t&1))return qs(e,sn()),null;var n=vb(e,t);if(e.tag!==0&&n===2){var s=WS(e);s!==0&&(t=s,n=y2(e,s))}if(n===1)throw n=zx,eu(e,0),rc(e,t),qs(e,sn()),n;if(n===6)throw Error(Ve(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xd(e,$s,Gl),qs(e,sn()),null}function NA(e,t){var n=ir;ir|=1;try{return e(t)}finally{ir=n,ir===0&&(Rf=sn()+500,Pw&&Zc())}}function fu(e){vc!==null&&vc.tag===0&&!(ir&6)&&Dh();var t=ir;ir|=1;var n=Ua.transition,s=jr;try{if(Ua.transition=null,jr=1,e)return e()}finally{jr=s,Ua.transition=n,ir=t,!(ir&6)&&Zc()}}function kA(){la=jh.current,Fr(jh)}function eu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,$J(n)),hn!==null)for(n=hn.return;n!==null;){var s=n;switch(sA(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ab();break;case 3:Ef(),Fr(zs),Fr(os),fA();break;case 5:hA(s);break;case 4:Ef();break;case 13:Fr(Hr);break;case 19:Fr(Hr);break;case 10:oA(s.type._context);break;case 22:case 23:kA()}n=n.return}if(Fn=e,hn=e=Oc(e.current,null),Yn=la=t,Pn=0,zx=null,jA=Ow=hu=0,$s=ax=null,Cd!==null){for(t=0;t<Cd.length;t++)if(n=Cd[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,i=n.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}n.pending=s}Cd=null}return e}function a8(e,t){do{var n=hn;try{if(lA(),S0.current=mb,fb){for(var s=Kr.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}fb=!1}if(uu=0,Dn=jn=Kr=null,nx=!1,Lx=0,bA.current=null,n===null||n.return===null){Pn=1,zx=t,hn=null;break}e:{var i=e,l=n.return,o=n,c=t;if(t=Yn,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=QO(l);if(m!==null){m.flags&=-257,JO(m,l,o,i,t),m.mode&1&&ZO(i,d,t),t=m,c=d;var v=t.updateQueue;if(v===null){var x=new Set;x.add(c),t.updateQueue=x}else v.add(c);break e}else{if(!(t&1)){ZO(i,d,t),SA();break e}c=Error(Ve(426))}}else if(Lr&&o.mode&1){var w=QO(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),JO(w,l,o,i,t),aA(Of(c,o));break e}}i=c=Of(c,o),Pn!==4&&(Pn=2),ax===null?ax=[i]:ax.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var j=z6(i,c,t);WO(i,j);break e;case 1:o=c;var g=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Tc===null||!Tc.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var p=V6(i,o,t);WO(i,p);break e}}i=i.return}while(i!==null)}o8(n)}catch(N){t=N,hn===n&&n!==null&&(hn=n=n.return);continue}break}while(!0)}function i8(){var e=pb.current;return pb.current=mb,e===null?mb:e}function SA(){(Pn===0||Pn===3||Pn===2)&&(Pn=4),Fn===null||!(hu&268435455)&&!(Ow&268435455)||rc(Fn,Yn)}function vb(e,t){var n=ir;ir|=2;var s=i8();(Fn!==e||Yn!==t)&&(Gl=null,eu(e,t));do try{lee();break}catch(a){a8(e,a)}while(!0);if(lA(),ir=n,pb.current=s,hn!==null)throw Error(Ve(261));return Fn=null,Yn=0,Pn}function lee(){for(;hn!==null;)l8(hn)}function oee(){for(;hn!==null&&!RQ();)l8(hn)}function l8(e){var t=d8(e.alternate,e,la);e.memoizedProps=e.pendingProps,t===null?o8(e):hn=t,bA.current=null}function o8(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=tee(n,t),n!==null){n.flags&=32767,hn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pn=6,hn=null;return}}else if(n=eee(n,t,la),n!==null){hn=n;return}if(t=t.sibling,t!==null){hn=t;return}hn=t=e}while(t!==null);Pn===0&&(Pn=5)}function xd(e,t,n){var s=jr,a=Ua.transition;try{Ua.transition=null,jr=1,cee(e,t,n,s)}finally{Ua.transition=a,jr=s}return null}function cee(e,t,n,s){do Dh();while(vc!==null);if(ir&6)throw Error(Ve(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ve(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(VQ(e,i),e===Fn&&(hn=Fn=null,Yn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dy||(Dy=!0,u8(J0,function(){return Dh(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ua.transition,Ua.transition=null;var l=jr;jr=1;var o=ir;ir|=4,bA.current=null,nee(e,n),r8(n,e),AJ(ZS),tb=!!XS,ZS=XS=null,e.current=n,see(n),DQ(),ir=o,jr=l,Ua.transition=i}else e.current=n;if(Dy&&(Dy=!1,vc=e,gb=a),i=e.pendingLanes,i===0&&(Tc=null),IQ(n.stateNode),qs(e,sn()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(xb)throw xb=!1,e=g2,g2=null,e;return gb&1&&e.tag!==0&&Dh(),i=e.pendingLanes,i&1?e===v2?ix++:(ix=0,v2=e):ix=0,Zc(),null}function Dh(){if(vc!==null){var e=zL(gb),t=Ua.transition,n=jr;try{if(Ua.transition=null,jr=16>e?16:e,vc===null)var s=!1;else{if(e=vc,vc=null,gb=0,ir&6)throw Error(Ve(331));var a=ir;for(ir|=4,rt=e.current;rt!==null;){var i=rt,l=i.child;if(rt.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(rt=d;rt!==null;){var u=rt;switch(u.tag){case 0:case 11:case 15:sx(8,u,i)}var h=u.child;if(h!==null)h.return=u,rt=h;else for(;rt!==null;){u=rt;var f=u.sibling,m=u.return;if(J6(u),u===d){rt=null;break}if(f!==null){f.return=m,rt=f;break}rt=m}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}rt=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,rt=l;else e:for(;rt!==null;){if(i=rt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sx(9,i,i.return)}var j=i.sibling;if(j!==null){j.return=i.return,rt=j;break e}rt=i.return}}var g=e.current;for(rt=g;rt!==null;){l=rt;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,rt=b;else e:for(l=g;rt!==null;){if(o=rt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ew(9,o)}}catch(N){Jr(o,o.return,N)}if(o===l){rt=null;break e}var p=o.sibling;if(p!==null){p.return=o.return,rt=p;break e}rt=o.return}}if(ir=a,Zc(),wl&&typeof wl.onPostCommitFiberRoot=="function")try{wl.onPostCommitFiberRoot(Nw,e)}catch{}s=!0}return s}finally{jr=n,Ua.transition=t}}return!1}function hR(e,t,n){t=Of(n,t),t=z6(e,t,1),e=Ac(e,t,1),t=Ss(),e!==null&&(Pv(e,1,t),qs(e,t))}function Jr(e,t,n){if(e.tag===3)hR(e,e,n);else for(;t!==null;){if(t.tag===3){hR(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Tc===null||!Tc.has(s))){e=Of(n,e),e=V6(t,e,1),t=Ac(t,e,1),e=Ss(),t!==null&&(Pv(t,1,e),qs(t,e));break}}t=t.return}}function dee(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Ss(),e.pingedLanes|=e.suspendedLanes&n,Fn===e&&(Yn&n)===n&&(Pn===4||Pn===3&&(Yn&130023424)===Yn&&500>sn()-wA?eu(e,0):jA|=n),qs(e,t)}function c8(e,t){t===0&&(e.mode&1?(t=ky,ky<<=1,!(ky&130023424)&&(ky=4194304)):t=1);var n=Ss();e=wo(e,t),e!==null&&(Pv(e,t,n),qs(e,n))}function uee(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),c8(e,n)}function hee(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Ve(314))}s!==null&&s.delete(t),c8(e,n)}var d8;d8=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||zs.current)Fs=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Fs=!1,JJ(e,t,n);Fs=!!(e.flags&131072)}else Fs=!1,Lr&&t.flags&1048576&&m6(t,ob,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;_0(e,t),e=t.pendingProps;var a=Pf(t,os.current);Rh(t,n),a=pA(null,t,s,e,a,n);var i=xA();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vs(s)?(i=!0,ib(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,dA(t),a.updater=Tw,t.stateNode=a,a._reactInternals=t,i2(t,s,e,n),t=c2(null,t,s,!0,i,n)):(t.tag=0,Lr&&i&&nA(t),bs(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(_0(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=mee(s),e=ti(s,e),a){case 0:t=o2(null,t,s,e,n);break e;case 1:t=rR(null,t,s,e,n);break e;case 11:t=eR(null,t,s,e,n);break e;case 14:t=tR(null,t,s,ti(s.type,e),n);break e}throw Error(Ve(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:ti(s,a),o2(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:ti(s,a),rR(e,t,s,a,n);case 3:e:{if(K6(t),e===null)throw Error(Ve(387));s=t.pendingProps,i=t.memoizedState,a=i.element,b6(e,t),ub(t,s,null,n);var l=t.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Of(Error(Ve(423)),t),t=nR(e,t,s,n,a);break e}else if(s!==a){a=Of(Error(Ve(424)),t),t=nR(e,t,s,n,a);break e}else for(fa=Pc(t.stateNode.containerInfo.firstChild),xa=t,Lr=!0,mi=null,n=v6(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Af(),s===a){t=No(e,t,n);break e}bs(e,t,s,n)}t=t.child}return t;case 5:return j6(t),e===null&&n2(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,QS(s,a)?l=null:i!==null&&QS(s,i)&&(t.flags|=32),H6(e,t),bs(e,t,l,n),t.child;case 6:return e===null&&n2(t),null;case 13:return G6(e,t,n);case 4:return uA(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Tf(t,null,s,n):bs(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:ti(s,a),eR(e,t,s,a,n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:return bs(e,t,t.pendingProps.children,n),t.child;case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Tr(cb,s._currentValue),s._currentValue=l,i!==null)if(Ei(i.value,l)){if(i.children===a.children&&!zs.current){t=No(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=po(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),s2(i.return,n,t),o.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Ve(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),s2(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}bs(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Rh(t,n),a=za(a),s=s(a),t.flags|=1,bs(e,t,s,n),t.child;case 14:return s=t.type,a=ti(s,t.pendingProps),a=ti(s.type,a),tR(e,t,s,a,n);case 15:return q6(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:ti(s,a),_0(e,t),t.tag=1,Vs(s)?(e=!0,ib(t)):e=!1,Rh(t,n),B6(t,s,a),i2(t,s,a,n),c2(null,t,s,!0,e,n);case 19:return Y6(e,t,n);case 22:return W6(e,t,n)}throw Error(Ve(156,t.tag))};function u8(e,t){return FL(e,t)}function fee(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ia(e,t,n,s){return new fee(e,t,n,s)}function CA(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mee(e){if(typeof e=="function")return CA(e)?1:0;if(e!=null){if(e=e.$$typeof,e===WP)return 11;if(e===HP)return 14}return 2}function Oc(e,t){var n=e.alternate;return n===null?(n=Ia(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function T0(e,t,n,s,a,i){var l=2;if(s=e,typeof e=="function")CA(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case uh:return tu(n.children,a,i,t);case qP:l=8,a|=8;break;case TS:return e=Ia(12,n,t,a|2),e.elementType=TS,e.lanes=i,e;case ES:return e=Ia(13,n,t,a),e.elementType=ES,e.lanes=i,e;case OS:return e=Ia(19,n,t,a),e.elementType=OS,e.lanes=i,e;case jL:return Rw(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yL:l=10;break e;case bL:l=9;break e;case WP:l=11;break e;case HP:l=14;break e;case Zo:l=16,s=null;break e}throw Error(Ve(130,e==null?e:typeof e,""))}return t=Ia(l,n,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function tu(e,t,n,s){return e=Ia(7,e,s,t),e.lanes=n,e}function Rw(e,t,n,s){return e=Ia(22,e,s,t),e.elementType=jL,e.lanes=n,e.stateNode={isHidden:!1},e}function GN(e,t,n){return e=Ia(6,e,null,t),e.lanes=n,e}function YN(e,t,n){return t=Ia(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pee(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=AN(0),this.expirationTimes=AN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=AN(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function _A(e,t,n,s,a,i,l,o,c){return e=new pee(e,t,n,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ia(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dA(i),e}function xee(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dh,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function h8(e){if(!e)return Ic;e=e._reactInternals;e:{if(Mu(e)!==e||e.tag!==1)throw Error(Ve(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Vs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ve(171))}if(e.tag===1){var n=e.type;if(Vs(n))return h6(e,n,t)}return t}function f8(e,t,n,s,a,i,l,o,c){return e=_A(n,s,!0,e,a,i,l,o,c),e.context=h8(null),n=e.current,s=Ss(),a=Ec(n),i=po(s,a),i.callback=t??null,Ac(n,i,a),e.current.lanes=a,Pv(e,a,s),qs(e,s),e}function Dw(e,t,n,s){var a=t.current,i=Ss(),l=Ec(a);return n=h8(n),t.context===null?t.context=n:t.pendingContext=n,t=po(i,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Ac(a,t,l),e!==null&&(ki(e,a,l,i),k0(e,a,l)),l}function yb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fR(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function PA(e,t){fR(e,t),(e=e.alternate)&&fR(e,t)}function gee(){return null}var m8=typeof reportError=="function"?reportError:function(e){console.error(e)};function AA(e){this._internalRoot=e}Mw.prototype.render=AA.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ve(409));Dw(e,t,null,null)};Mw.prototype.unmount=AA.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fu(function(){Dw(null,e,null,null)}),t[jo]=null}};function Mw(e){this._internalRoot=e}Mw.prototype.unstable_scheduleHydration=function(e){if(e){var t=WL();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tc.length&&t!==0&&t<tc[n].priority;n++);tc.splice(n,0,e),n===0&&KL(e)}};function TA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $w(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mR(){}function vee(e,t,n,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=yb(l);i.call(d)}}var l=f8(t,s,e,0,null,!1,!1,"",mR);return e._reactRootContainer=l,e[jo]=l.current,Dx(e.nodeType===8?e.parentNode:e),fu(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var o=s;s=function(){var d=yb(c);o.call(d)}}var c=_A(e,0,!1,null,null,!1,!1,"",mR);return e._reactRootContainer=c,e[jo]=c.current,Dx(e.nodeType===8?e.parentNode:e),fu(function(){Dw(t,c,n,s)}),c}function Iw(e,t,n,s,a){var i=n._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=yb(l);o.call(c)}}Dw(t,l,e,a)}else l=vee(n,t,e,a,s);return yb(l)}VL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fp(t.pendingLanes);n!==0&&(YP(t,n|1),qs(t,sn()),!(ir&6)&&(Rf=sn()+500,Zc()))}break;case 13:fu(function(){var s=wo(e,1);if(s!==null){var a=Ss();ki(s,e,1,a)}}),PA(e,1)}};XP=function(e){if(e.tag===13){var t=wo(e,134217728);if(t!==null){var n=Ss();ki(t,e,134217728,n)}PA(e,134217728)}};qL=function(e){if(e.tag===13){var t=Ec(e),n=wo(e,t);if(n!==null){var s=Ss();ki(n,e,t,s)}PA(e,t)}};WL=function(){return jr};HL=function(e,t){var n=jr;try{return jr=e,t()}finally{jr=n}};zS=function(e,t,n){switch(t){case"input":if(MS(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=_w(s);if(!a)throw Error(Ve(90));NL(s),MS(s,a)}}}break;case"textarea":SL(e,n);break;case"select":t=n.value,t!=null&&Ah(e,!!n.multiple,t,!1)}};OL=NA;RL=fu;var yee={usingClientEntryPoint:!1,Events:[Tv,ph,_w,TL,EL,NA]},pp={findFiberByHostInstance:Sd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bee={bundleType:pp.bundleType,version:pp.version,rendererPackageName:pp.rendererPackageName,rendererConfig:pp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$L(e),e===null?null:e.stateNode},findFiberByHostInstance:pp.findFiberByHostInstance||gee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var My=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!My.isDisabled&&My.supportsFiber)try{Nw=My.inject(bee),wl=My}catch{}}wa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yee;wa.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!TA(t))throw Error(Ve(200));return xee(e,t,null,n)};wa.createRoot=function(e,t){if(!TA(e))throw Error(Ve(299));var n=!1,s="",a=m8;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=_A(e,1,!1,null,null,n,!1,s,a),e[jo]=t.current,Dx(e.nodeType===8?e.parentNode:e),new AA(t)};wa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ve(188)):(e=Object.keys(e).join(","),Error(Ve(268,e)));return e=$L(t),e=e===null?null:e.stateNode,e};wa.flushSync=function(e){return fu(e)};wa.hydrate=function(e,t,n){if(!$w(t))throw Error(Ve(200));return Iw(null,e,t,!0,n)};wa.hydrateRoot=function(e,t,n){if(!TA(e))throw Error(Ve(405));var s=n!=null&&n.hydratedSources||null,a=!1,i="",l=m8;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=f8(t,null,e,1,n??null,a,!1,i,l),e[jo]=t.current,Dx(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Mw(t)};wa.render=function(e,t,n){if(!$w(t))throw Error(Ve(200));return Iw(null,e,t,!1,n)};wa.unmountComponentAtNode=function(e){if(!$w(e))throw Error(Ve(40));return e._reactRootContainer?(fu(function(){Iw(null,null,e,!1,function(){e._reactRootContainer=null,e[jo]=null})}),!0):!1};wa.unstable_batchedUpdates=NA;wa.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!$w(n))throw Error(Ve(200));if(e==null||e._reactInternals===void 0)throw Error(Ve(38));return Iw(e,t,n,!1,s)};wa.version="18.3.1-next-f1338f8080-20240426";function p8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p8)}catch(e){console.error(e)}}p8(),pL.exports=wa;var Fa=pL.exports;const jee=Qt(Fa);var x8,pR=Fa;x8=pR.createRoot,pR.hydrateRoot;function wee(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,s,a,i,l=[],o="",c=e.split("/");for(c[0]||c.shift();a=c.shift();)n=a[0],n==="*"?(l.push(n),o+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(s=a.indexOf("?",1),i=a.indexOf(".",1),l.push(a.substring(1,~s?s:~i?i:a.length)),o+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(o+=(~s?"?":"")+"\\"+a.substring(i))):o+="/"+a;return{keys:l,pattern:new RegExp("^"+o+(t?"(?=$|/)":"/?$"),"i")}}var g8={exports:{}},v8={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df=y;function Nee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kee=typeof Object.is=="function"?Object.is:Nee,See=Df.useState,Cee=Df.useEffect,_ee=Df.useLayoutEffect,Pee=Df.useDebugValue;function Aee(e,t){var n=t(),s=See({inst:{value:n,getSnapshot:t}}),a=s[0].inst,i=s[1];return _ee(function(){a.value=n,a.getSnapshot=t,XN(a)&&i({inst:a})},[e,n,t]),Cee(function(){return XN(a)&&i({inst:a}),e(function(){XN(a)&&i({inst:a})})},[e]),Pee(n),n}function XN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kee(e,n)}catch{return!0}}function Tee(e,t){return t()}var Eee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Tee:Aee;v8.useSyncExternalStore=Df.useSyncExternalStore!==void 0?Df.useSyncExternalStore:Eee;g8.exports=v8;var Oee=g8.exports;const Ree=sL.useInsertionEffect,Dee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",y8=Dee?y.useLayoutEffect:y.useEffect,Mee=Ree||y8,EA=e=>{const t=y.useRef([e,(...n)=>t[0](...n)]).current;return Mee(()=>{t[0]=e}),t[1]},$ee="popstate",OA="pushState",RA="replaceState",Iee="hashchange",xR=[$ee,OA,RA,Iee],Fee=e=>{for(const t of xR)addEventListener(t,e);return()=>{for(const t of xR)removeEventListener(t,e)}},b8=(e,t)=>Oee.useSyncExternalStore(Fee,e,t),Lee=()=>location.search,Uee=({ssrSearch:e=""}={})=>b8(Lee,()=>e),gR=()=>location.pathname,Bee=({ssrPath:e}={})=>b8(gR,e?()=>e:gR),zee=(e,{replace:t=!1,state:n=null}={})=>history[t?RA:OA](n,"",e),Vee=(e={})=>[Bee(e),zee],vR=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[vR]>"u"){for(const e of[OA,RA]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,vR,{value:!0})}const qee=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",j8=(e="")=>e==="/"?"":e,Wee=(e,t)=>e[0]==="~"?e.slice(1):j8(t)+e,Hee=(e="",t)=>qee(yR(j8(e)),yR(t)),yR=e=>{try{return decodeURI(e)}catch{return e}},w8={hook:Vee,searchHook:Uee,parser:wee,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},N8=y.createContext(w8),Ov=()=>y.useContext(N8),k8={},S8=y.createContext(k8),Rv=()=>y.useContext(S8),Fw=e=>{const[t,n]=e.hook(e);return[Hee(e.base,t),EA((s,a)=>n(Wee(s,e.base),a))]},hs=()=>Fw(Ov()),C8=(e,t,n,s)=>{const{pattern:a,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),l=a.exec(n)||[],[o,...c]=l;return o!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((h,f)=>[h,c[f]])):l.groups;let u={...c};return d&&Object.assign(u,d),u})(),...s?[o]:[]]:[!1,null]},Kee=({children:e,...t})=>{var u,h;const n=Ov(),s=t.hook?w8:n;let a=s;const[i,l]=((u=t.ssrPath)==null?void 0:u.split("?"))??[];l&&(t.ssrSearch=l,t.ssrPath=i),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let o=y.useRef({}),c=o.current,d=c;for(let f in s){const m=f==="base"?s[f]+(t[f]||""):t[f]||s[f];c===d&&m!==d[f]&&(o.current=d={...d}),d[f]=m,m!==s[f]&&(a=d)}return y.createElement(N8.Provider,{value:a,children:e})},bR=({children:e,component:t},n)=>t?y.createElement(t,{params:n}):typeof e=="function"?e(n):e,Gee=e=>{let t=y.useRef(k8),n=t.current;for(const s in e)e[s]!==n[s]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},tt=({path:e,nest:t,match:n,...s})=>{const a=Ov(),[i]=Fw(a),[l,o,c]=n??C8(a.parser,e,i,t),d=Gee({...Rv(),...o});if(!l)return null;const u=c?y.createElement(Kee,{base:c},bR(s,d)):bR(s,d);return y.createElement(S8.Provider,{value:d,children:u})},cl=y.forwardRef((e,t)=>{const n=Ov(),[s,a]=Fw(n),{to:i="",href:l=i,onClick:o,asChild:c,children:d,className:u,replace:h,state:f,...m}=e,v=EA(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(o==null||o(w),w.defaultPrevented||(w.preventDefault(),a(l,e)))}),x=n.hrefs(l[0]==="~"?l.slice(1):n.base+l,n);return c&&y.isValidElement(d)?y.cloneElement(d,{onClick:v,href:x}):y.createElement("a",{...m,onClick:v,href:x,className:u!=null&&u.call?u(s===l):u,children:d,ref:t})}),_8=e=>Array.isArray(e)?e.flatMap(t=>_8(t&&t.type===y.Fragment?t.props.children:t)):[e],Yee=({children:e,location:t})=>{const n=Ov(),[s]=Fw(n);for(const a of _8(e)){let i=0;if(y.isValidElement(a)&&(i=C8(n.parser,a.props.path,t||s,a.props.nest))[0])return y.cloneElement(a,{match:i})}return null},wd=e=>{const{to:t,href:n=t}=e,[,s]=hs(),a=EA(()=>s(t||n,e));return y8(()=>{a()},[]),null};var Pm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mu=typeof window>"u"||"Deno"in globalThis;function Ea(){}function Xee(e,t){return typeof e=="function"?e(t):e}function j2(e){return typeof e=="number"&&e>=0&&e!==1/0}function P8(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Mh(e,t){return typeof e=="function"?e(t):e}function pi(e,t){return typeof e=="function"?e(t):e}function jR(e,t){const{type:n="all",exact:s,fetchStatus:a,predicate:i,queryKey:l,stale:o}=e;if(l){if(s){if(t.queryHash!==DA(l,t.options))return!1}else if(!Vx(t.queryKey,l))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||i&&!i(t))}function wR(e,t){const{exact:n,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(pu(t.options.mutationKey)!==pu(i))return!1}else if(!Vx(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function DA(e,t){return((t==null?void 0:t.queryKeyHashFn)||pu)(e)}function pu(e){return JSON.stringify(e,(t,n)=>w2(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function Vx(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Vx(e[n],t[n])):!1}function A8(e,t){if(e===t)return e;const n=NR(e)&&NR(t);if(n||w2(e)&&w2(t)){const s=n?e:Object.keys(e),a=s.length,i=n?t:Object.keys(t),l=i.length,o=n?[]:{};let c=0;for(let d=0;d<l;d++){const u=n?d:i[d];(!n&&s.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(o[u]=void 0,c++):(o[u]=A8(e[u],t[u]),o[u]===e[u]&&e[u]!==void 0&&c++)}return a===l&&c===a?e:o}return t}function bb(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function NR(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function w2(e){if(!kR(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!kR(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function kR(e){return Object.prototype.toString.call(e)==="[object Object]"}function Zee(e){return new Promise(t=>{setTimeout(t,e)})}function N2(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?A8(e,t):t}function Qee(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function Jee(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var MA=Symbol();function T8(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===MA?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Md,ac,Kh,FF,ete=(FF=class extends Pm{constructor(){super();be(this,Md);be(this,ac);be(this,Kh);je(this,Kh,t=>{if(!mu&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){B(this,ac)||this.setEventListener(B(this,Kh))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,ac))==null||t.call(this),je(this,ac,void 0))}setEventListener(t){var n;je(this,Kh,t),(n=B(this,ac))==null||n.call(this),je(this,ac,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){B(this,Md)!==t&&(je(this,Md,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof B(this,Md)=="boolean"?B(this,Md):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Md=new WeakMap,ac=new WeakMap,Kh=new WeakMap,FF),$A=new ete,Gh,ic,Yh,LF,tte=(LF=class extends Pm{constructor(){super();be(this,Gh,!0);be(this,ic);be(this,Yh);je(this,Yh,t=>{if(!mu&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){B(this,ic)||this.setEventListener(B(this,Yh))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,ic))==null||t.call(this),je(this,ic,void 0))}setEventListener(t){var n;je(this,Yh,t),(n=B(this,ic))==null||n.call(this),je(this,ic,t(this.setOnline.bind(this)))}setOnline(t){B(this,Gh)!==t&&(je(this,Gh,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return B(this,Gh)}},Gh=new WeakMap,ic=new WeakMap,Yh=new WeakMap,LF),jb=new tte;function k2(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},n.reject=a=>{s({status:"rejected",reason:a}),t(a)},n}function rte(e){return Math.min(1e3*2**e,3e4)}function E8(e){return(e??"online")==="online"?jb.isOnline():!0}var O8=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ZN(e){return e instanceof O8}function R8(e){let t=!1,n=0,s=!1,a;const i=k2(),l=x=>{var w;s||(f(new O8(x)),(w=e.abort)==null||w.call(e))},o=()=>{t=!0},c=()=>{t=!1},d=()=>$A.isFocused()&&(e.networkMode==="always"||jb.isOnline())&&e.canRun(),u=()=>E8(e.networkMode)&&e.canRun(),h=x=>{var w;s||(s=!0,(w=e.onSuccess)==null||w.call(e,x),a==null||a(),i.resolve(x))},f=x=>{var w;s||(s=!0,(w=e.onError)==null||w.call(e,x),a==null||a(),i.reject(x))},m=()=>new Promise(x=>{var w;a=j=>{(s||d())&&x(j)},(w=e.onPause)==null||w.call(e)}).then(()=>{var x;a=void 0,s||(x=e.onContinue)==null||x.call(e)}),v=()=>{if(s)return;let x;const w=n===0?e.initialPromise:void 0;try{x=w??e.fn()}catch(j){x=Promise.reject(j)}Promise.resolve(x).then(h).catch(j=>{var k;if(s)return;const g=e.retry??(mu?0:3),b=e.retryDelay??rte,p=typeof b=="function"?b(n,j):b,N=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,j);if(t||!N){f(j);return}n++,(k=e.onFail)==null||k.call(e,n,j),Zee(p).then(()=>d()?void 0:m()).then(()=>{t?f(j):v()})})};return{promise:i,cancel:l,continue:()=>(a==null||a(),i),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?v():m().then(v),i)}}function nte(){let e=[],t=0,n=o=>{o()},s=o=>{o()},a=o=>setTimeout(o,0);const i=o=>{t?e.push(o):a(()=>{n(o)})},l=()=>{const o=e;e=[],o.length&&a(()=>{s(()=>{o.forEach(c=>{n(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{a=o}}}var Sn=nte(),$d,UF,D8=(UF=class{constructor(){be(this,$d)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),j2(this.gcTime)&&je(this,$d,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(mu?1/0:5*60*1e3))}clearGcTimeout(){B(this,$d)&&(clearTimeout(B(this,$d)),je(this,$d,void 0))}},$d=new WeakMap,UF),Xh,Zh,Aa,ts,rv,Id,ri,Hl,BF,ste=(BF=class extends D8{constructor(t){super();be(this,ri);be(this,Xh);be(this,Zh);be(this,Aa);be(this,ts);be(this,rv);be(this,Id);je(this,Id,!1),je(this,rv,t.defaultOptions),this.setOptions(t.options),this.observers=[],je(this,Aa,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,je(this,Xh,ate(this.options)),this.state=t.state??B(this,Xh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=B(this,ts))==null?void 0:t.promise}setOptions(t){this.options={...B(this,rv),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,Aa).remove(this)}setData(t,n){const s=N2(this.state.data,t,this.options);return Ce(this,ri,Hl).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){Ce(this,ri,Hl).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,a;const n=(s=B(this,ts))==null?void 0:s.promise;return(a=B(this,ts))==null||a.cancel(t),n?n.then(Ea).catch(Ea):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,Xh))}isActive(){return this.observers.some(t=>pi(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===MA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!P8(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,ts))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,ts))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),B(this,Aa).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(B(this,ts)&&(B(this,Id)?B(this,ts).cancel({revert:!0}):B(this,ts).cancelRetry()),this.scheduleGc()),B(this,Aa).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ce(this,ri,Hl).call(this,{type:"invalidate"})}fetch(t,n){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(B(this,ts))return B(this,ts).continueRetry(),B(this,ts).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(je(this,Id,!0),s.signal)})},i=()=>{const h=T8(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return a(f),je(this,Id,!1),this.options.persister?this.options.persister(h,f,this):h(f)},l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};a(l),(c=this.options.behavior)==null||c.onFetch(l,this),je(this,Zh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Ce(this,ri,Hl).call(this,{type:"fetch",meta:(u=l.fetchOptions)==null?void 0:u.meta});const o=h=>{var f,m,v,x;ZN(h)&&h.silent||Ce(this,ri,Hl).call(this,{type:"error",error:h}),ZN(h)||((m=(f=B(this,Aa).config).onError)==null||m.call(f,h,this),(x=(v=B(this,Aa).config).onSettled)==null||x.call(v,this.state.data,h,this)),this.scheduleGc()};return je(this,ts,R8({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:h=>{var f,m,v,x;if(h===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){o(w);return}(m=(f=B(this,Aa).config).onSuccess)==null||m.call(f,h,this),(x=(v=B(this,Aa).config).onSettled)==null||x.call(v,h,this.state.error,this),this.scheduleGc()},onError:o,onFail:(h,f)=>{Ce(this,ri,Hl).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{Ce(this,ri,Hl).call(this,{type:"pause"})},onContinue:()=>{Ce(this,ri,Hl).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),B(this,ts).start()}},Xh=new WeakMap,Zh=new WeakMap,Aa=new WeakMap,ts=new WeakMap,rv=new WeakMap,Id=new WeakMap,ri=new WeakSet,Hl=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...M8(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return ZN(a)&&a.revert&&B(this,Zh)?{...B(this,Zh),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),Sn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),B(this,Aa).notify({query:this,type:"updated",action:t})})},BF);function M8(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:E8(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ate(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var el,zF,ite=(zF=class extends Pm{constructor(t={}){super();be(this,el);this.config=t,je(this,el,new Map)}build(t,n,s){const a=n.queryKey,i=n.queryHash??DA(a,n);let l=this.get(i);return l||(l=new ste({cache:this,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){B(this,el).has(t.queryHash)||(B(this,el).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=B(this,el).get(t.queryHash);n&&(t.destroy(),n===t&&B(this,el).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Sn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return B(this,el).get(t)}getAll(){return[...B(this,el).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>jR(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>jR(t,s)):n}notify(t){Sn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Sn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Sn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},el=new WeakMap,zF),tl,xs,Fd,rl,Ko,VF,lte=(VF=class extends D8{constructor(t){super();be(this,rl);be(this,tl);be(this,xs);be(this,Fd);this.mutationId=t.mutationId,je(this,xs,t.mutationCache),je(this,tl,[]),this.state=t.state||$8(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){B(this,tl).includes(t)||(B(this,tl).push(t),this.clearGcTimeout(),B(this,xs).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){je(this,tl,B(this,tl).filter(n=>n!==t)),this.scheduleGc(),B(this,xs).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){B(this,tl).length||(this.state.status==="pending"?this.scheduleGc():B(this,xs).remove(this))}continue(){var t;return((t=B(this,Fd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,l,o,c,d,u,h,f,m,v,x,w,j,g,b,p,N,k,C;je(this,Fd,R8({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(_,P)=>{Ce(this,rl,Ko).call(this,{type:"failed",failureCount:_,error:P})},onPause:()=>{Ce(this,rl,Ko).call(this,{type:"pause"})},onContinue:()=>{Ce(this,rl,Ko).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,xs).canRun(this)}));const n=this.state.status==="pending",s=!B(this,Fd).canStart();try{if(!n){Ce(this,rl,Ko).call(this,{type:"pending",variables:t,isPaused:s}),await((i=(a=B(this,xs).config).onMutate)==null?void 0:i.call(a,t,this));const P=await((o=(l=this.options).onMutate)==null?void 0:o.call(l,t));P!==this.state.context&&Ce(this,rl,Ko).call(this,{type:"pending",context:P,variables:t,isPaused:s})}const _=await B(this,Fd).start();return await((d=(c=B(this,xs).config).onSuccess)==null?void 0:d.call(c,_,t,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,_,t,this.state.context)),await((m=(f=B(this,xs).config).onSettled)==null?void 0:m.call(f,_,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,_,null,t,this.state.context)),Ce(this,rl,Ko).call(this,{type:"success",data:_}),_}catch(_){try{throw await((j=(w=B(this,xs).config).onError)==null?void 0:j.call(w,_,t,this.state.context,this)),await((b=(g=this.options).onError)==null?void 0:b.call(g,_,t,this.state.context)),await((N=(p=B(this,xs).config).onSettled)==null?void 0:N.call(p,void 0,_,this.state.variables,this.state.context,this)),await((C=(k=this.options).onSettled)==null?void 0:C.call(k,void 0,_,t,this.state.context)),_}finally{Ce(this,rl,Ko).call(this,{type:"error",error:_})}}finally{B(this,xs).runNext(this)}}},tl=new WeakMap,xs=new WeakMap,Fd=new WeakMap,rl=new WeakSet,Ko=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Sn.batch(()=>{B(this,tl).forEach(s=>{s.onMutationUpdate(t)}),B(this,xs).notify({mutation:this,type:"updated",action:t})})},VF);function $8(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ia,nv,qF,ote=(qF=class extends Pm{constructor(t={}){super();be(this,ia);be(this,nv);this.config=t,je(this,ia,new Map),je(this,nv,Date.now())}build(t,n,s){const a=new lte({mutationCache:this,mutationId:++xy(this,nv)._,options:t.defaultMutationOptions(n),state:s});return this.add(a),a}add(t){const n=$y(t),s=B(this,ia).get(n)??[];s.push(t),B(this,ia).set(n,s),this.notify({type:"added",mutation:t})}remove(t){var s;const n=$y(t);if(B(this,ia).has(n)){const a=(s=B(this,ia).get(n))==null?void 0:s.filter(i=>i!==t);a&&(a.length===0?B(this,ia).delete(n):B(this,ia).set(n,a))}this.notify({type:"removed",mutation:t})}canRun(t){var s;const n=(s=B(this,ia).get($y(t)))==null?void 0:s.find(a=>a.state.status==="pending");return!n||n===t}runNext(t){var s;const n=(s=B(this,ia).get($y(t)))==null?void 0:s.find(a=>a!==t&&a.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Sn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...B(this,ia).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(s=>wR(n,s))}findAll(t={}){return this.getAll().filter(n=>wR(t,n))}notify(t){Sn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Sn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Ea))))}},ia=new WeakMap,nv=new WeakMap,qF);function $y(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function SR(e){return{onFetch:(t,n)=>{var u,h,f,m,v;const s=t.options,a=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],l=((v=t.state.data)==null?void 0:v.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},j=T8(t.options,t.fetchOptions),g=async(b,p,N)=>{if(x)return Promise.reject();if(p==null&&b.pages.length)return Promise.resolve(b);const k={queryKey:t.queryKey,pageParam:p,direction:N?"backward":"forward",meta:t.options.meta};w(k);const C=await j(k),{maxPages:_}=t.options,P=N?Jee:Qee;return{pages:P(b.pages,C,_),pageParams:P(b.pageParams,p,_)}};if(a&&i.length){const b=a==="backward",p=b?cte:CR,N={pages:i,pageParams:l},k=p(s,N);o=await g(N,k,b)}else{const b=e??i.length;do{const p=c===0?l[0]??s.initialPageParam:CR(s,o);if(c>0&&p==null)break;o=await g(o,p),c++}while(c<b)}return o};t.options.persister?t.fetchFn=()=>{var x,w;return(w=(x=t.options).persister)==null?void 0:w.call(x,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function CR(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function cte(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var Qr,lc,oc,Qh,Jh,cc,ef,tf,WF,I8=(WF=class{constructor(e={}){be(this,Qr);be(this,lc);be(this,oc);be(this,Qh);be(this,Jh);be(this,cc);be(this,ef);be(this,tf);je(this,Qr,e.queryCache||new ite),je(this,lc,e.mutationCache||new ote),je(this,oc,e.defaultOptions||{}),je(this,Qh,new Map),je(this,Jh,new Map),je(this,cc,0)}mount(){xy(this,cc)._++,B(this,cc)===1&&(je(this,ef,$A.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Qr).onFocus())})),je(this,tf,jb.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Qr).onOnline())})))}unmount(){var e,t;xy(this,cc)._--,B(this,cc)===0&&((e=B(this,ef))==null||e.call(this),je(this,ef,void 0),(t=B(this,tf))==null||t.call(this),je(this,tf,void 0))}isFetching(e){return B(this,Qr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return B(this,lc).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,Qr).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),s=B(this,Qr).build(this,n);return e.revalidateIfStale&&s.isStaleByTime(Mh(n.staleTime,s))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return B(this,Qr).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),a=B(this,Qr).get(s.queryHash),i=a==null?void 0:a.state.data,l=Xee(t,i);if(l!==void 0)return B(this,Qr).build(this,s).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return Sn.batch(()=>B(this,Qr).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,Qr).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=B(this,Qr);Sn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=B(this,Qr),s={type:"active",...e};return Sn.batch(()=>(n.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},s=Sn.batch(()=>B(this,Qr).findAll(e).map(a=>a.cancel(n)));return Promise.all(s).then(Ea).catch(Ea)}invalidateQueries(e={},t={}){return Sn.batch(()=>{if(B(this,Qr).findAll(e).forEach(s=>{s.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},s=Sn.batch(()=>B(this,Qr).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ea)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Ea)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=B(this,Qr).build(this,t);return n.isStaleByTime(Mh(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ea).catch(Ea)}fetchInfiniteQuery(e){return e.behavior=SR(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ea).catch(Ea)}ensureInfiniteQueryData(e){return e.behavior=SR(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return jb.isOnline()?B(this,lc).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,Qr)}getMutationCache(){return B(this,lc)}getDefaultOptions(){return B(this,oc)}setDefaultOptions(e){je(this,oc,e)}setQueryDefaults(e,t){B(this,Qh).set(pu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...B(this,Qh).values()];let n={};return t.forEach(s=>{Vx(e,s.queryKey)&&(n={...n,...s.defaultOptions})}),n}setMutationDefaults(e,t){B(this,Jh).set(pu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...B(this,Jh).values()];let n={};return t.forEach(s=>{Vx(e,s.mutationKey)&&(n={...n,...s.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...B(this,oc).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=DA(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===MA&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,oc).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,Qr).clear(),B(this,lc).clear()}},Qr=new WeakMap,lc=new WeakMap,oc=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,cc=new WeakMap,ef=new WeakMap,tf=new WeakMap,WF),Ds,tr,sv,gs,Ld,rf,dc,nl,av,nf,sf,Ud,Bd,uc,af,yr,Up,S2,C2,_2,P2,A2,T2,E2,F8,HF,dte=(HF=class extends Pm{constructor(t,n){super();be(this,yr);be(this,Ds);be(this,tr);be(this,sv);be(this,gs);be(this,Ld);be(this,rf);be(this,dc);be(this,nl);be(this,av);be(this,nf);be(this,sf);be(this,Ud);be(this,Bd);be(this,uc);be(this,af,new Set);this.options=n,je(this,Ds,t),je(this,nl,null),je(this,dc,k2()),this.options.experimental_prefetchInRender||B(this,dc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(B(this,tr).addObserver(this),_R(B(this,tr),this.options)?Ce(this,yr,Up).call(this):this.updateResult(),Ce(this,yr,P2).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return O2(B(this,tr),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return O2(B(this,tr),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ce(this,yr,A2).call(this),Ce(this,yr,T2).call(this),B(this,tr).removeObserver(this)}setOptions(t,n){const s=this.options,a=B(this,tr);if(this.options=B(this,Ds).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof pi(this.options.enabled,B(this,tr))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ce(this,yr,E2).call(this),B(this,tr).setOptions(this.options),s._defaulted&&!bb(this.options,s)&&B(this,Ds).getQueryCache().notify({type:"observerOptionsUpdated",query:B(this,tr),observer:this});const i=this.hasListeners();i&&PR(B(this,tr),a,this.options,s)&&Ce(this,yr,Up).call(this),this.updateResult(n),i&&(B(this,tr)!==a||pi(this.options.enabled,B(this,tr))!==pi(s.enabled,B(this,tr))||Mh(this.options.staleTime,B(this,tr))!==Mh(s.staleTime,B(this,tr)))&&Ce(this,yr,S2).call(this);const l=Ce(this,yr,C2).call(this);i&&(B(this,tr)!==a||pi(this.options.enabled,B(this,tr))!==pi(s.enabled,B(this,tr))||l!==B(this,uc))&&Ce(this,yr,_2).call(this,l)}getOptimisticResult(t){const n=B(this,Ds).getQueryCache().build(B(this,Ds),t),s=this.createResult(n,t);return hte(this,s)&&(je(this,gs,s),je(this,rf,this.options),je(this,Ld,B(this,tr).state)),s}getCurrentResult(){return B(this,gs)}trackResult(t,n){const s={};return Object.keys(t).forEach(a=>{Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),n==null||n(a),t[a])})}),s}trackProp(t){B(this,af).add(t)}getCurrentQuery(){return B(this,tr)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=B(this,Ds).defaultQueryOptions(t),s=B(this,Ds).getQueryCache().build(B(this,Ds),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return Ce(this,yr,Up).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),B(this,gs)))}createResult(t,n){var _;const s=B(this,tr),a=this.options,i=B(this,gs),l=B(this,Ld),o=B(this,rf),d=t!==s?t.state:B(this,sv),{state:u}=t;let h={...u},f=!1,m;if(n._optimisticResults){const P=this.hasListeners(),D=!P&&_R(t,n),E=P&&PR(t,s,n,a);(D||E)&&(h={...h,...M8(u.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:x,status:w}=h;if(n.select&&h.data!==void 0)if(i&&h.data===(l==null?void 0:l.data)&&n.select===B(this,av))m=B(this,nf);else try{je(this,av,n.select),m=n.select(h.data),m=N2(i==null?void 0:i.data,m,n),je(this,nf,m),je(this,nl,null)}catch(P){je(this,nl,P)}else m=h.data;if(n.placeholderData!==void 0&&m===void 0&&w==="pending"){let P;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData))P=i.data;else if(P=typeof n.placeholderData=="function"?n.placeholderData((_=B(this,sf))==null?void 0:_.state.data,B(this,sf)):n.placeholderData,n.select&&P!==void 0)try{P=n.select(P),je(this,nl,null)}catch(D){je(this,nl,D)}P!==void 0&&(w="success",m=N2(i==null?void 0:i.data,P,n),f=!0)}B(this,nl)&&(v=B(this,nl),m=B(this,nf),x=Date.now(),w="error");const j=h.fetchStatus==="fetching",g=w==="pending",b=w==="error",p=g&&j,N=m!==void 0,C={status:w,fetchStatus:h.fetchStatus,isPending:g,isSuccess:w==="success",isError:b,isInitialLoading:p,isLoading:p,data:m,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:j,isRefetching:j&&!g,isLoadingError:b&&!N,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:b&&N,isStale:IA(t,n),refetch:this.refetch,promise:B(this,dc)};if(this.options.experimental_prefetchInRender){const P=$=>{C.status==="error"?$.reject(C.error):C.data!==void 0&&$.resolve(C.data)},D=()=>{const $=je(this,dc,C.promise=k2());P($)},E=B(this,dc);switch(E.status){case"pending":t.queryHash===s.queryHash&&P(E);break;case"fulfilled":(C.status==="error"||C.data!==E.value)&&D();break;case"rejected":(C.status!=="error"||C.error!==E.reason)&&D();break}}return C}updateResult(t){const n=B(this,gs),s=this.createResult(B(this,tr),this.options);if(je(this,Ld,B(this,tr).state),je(this,rf,this.options),B(this,Ld).data!==void 0&&je(this,sf,B(this,tr)),bb(s,n))return;je(this,gs,s);const a={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:l}=this.options,o=typeof l=="function"?l():l;if(o==="all"||!o&&!B(this,af).size)return!0;const c=new Set(o??B(this,af));return this.options.throwOnError&&c.add("error"),Object.keys(B(this,gs)).some(d=>{const u=d;return B(this,gs)[u]!==n[u]&&c.has(u)})};(t==null?void 0:t.listeners)!==!1&&i()&&(a.listeners=!0),Ce(this,yr,F8).call(this,{...a,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ce(this,yr,P2).call(this)}},Ds=new WeakMap,tr=new WeakMap,sv=new WeakMap,gs=new WeakMap,Ld=new WeakMap,rf=new WeakMap,dc=new WeakMap,nl=new WeakMap,av=new WeakMap,nf=new WeakMap,sf=new WeakMap,Ud=new WeakMap,Bd=new WeakMap,uc=new WeakMap,af=new WeakMap,yr=new WeakSet,Up=function(t){Ce(this,yr,E2).call(this);let n=B(this,tr).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Ea)),n},S2=function(){Ce(this,yr,A2).call(this);const t=Mh(this.options.staleTime,B(this,tr));if(mu||B(this,gs).isStale||!j2(t))return;const s=P8(B(this,gs).dataUpdatedAt,t)+1;je(this,Ud,setTimeout(()=>{B(this,gs).isStale||this.updateResult()},s))},C2=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(B(this,tr)):this.options.refetchInterval)??!1},_2=function(t){Ce(this,yr,T2).call(this),je(this,uc,t),!(mu||pi(this.options.enabled,B(this,tr))===!1||!j2(B(this,uc))||B(this,uc)===0)&&je(this,Bd,setInterval(()=>{(this.options.refetchIntervalInBackground||$A.isFocused())&&Ce(this,yr,Up).call(this)},B(this,uc)))},P2=function(){Ce(this,yr,S2).call(this),Ce(this,yr,_2).call(this,Ce(this,yr,C2).call(this))},A2=function(){B(this,Ud)&&(clearTimeout(B(this,Ud)),je(this,Ud,void 0))},T2=function(){B(this,Bd)&&(clearInterval(B(this,Bd)),je(this,Bd,void 0))},E2=function(){const t=B(this,Ds).getQueryCache().build(B(this,Ds),this.options);if(t===B(this,tr))return;const n=B(this,tr);je(this,tr,t),je(this,sv,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},F8=function(t){Sn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(B(this,gs))}),B(this,Ds).getQueryCache().notify({query:B(this,tr),type:"observerResultsUpdated"})})},HF);function ute(e,t){return pi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function _R(e,t){return ute(e,t)||e.state.data!==void 0&&O2(e,t,t.refetchOnMount)}function O2(e,t,n){if(pi(t.enabled,e)!==!1){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&IA(e,t)}return!1}function PR(e,t,n,s){return(e!==t||pi(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&IA(e,n)}function IA(e,t){return pi(t.enabled,e)!==!1&&e.isStaleByTime(Mh(t.staleTime,e))}function hte(e,t){return!bb(e.getCurrentResult(),t)}var hc,fc,Ms,Ql,yo,E0,R2,KF,fte=(KF=class extends Pm{constructor(n,s){super();be(this,yo);be(this,hc);be(this,fc);be(this,Ms);be(this,Ql);je(this,hc,n),this.setOptions(s),this.bindMethods(),Ce(this,yo,E0).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const s=this.options;this.options=B(this,hc).defaultMutationOptions(n),bb(this.options,s)||B(this,hc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:B(this,Ms),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&pu(s.mutationKey)!==pu(this.options.mutationKey)?this.reset():((a=B(this,Ms))==null?void 0:a.state.status)==="pending"&&B(this,Ms).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=B(this,Ms))==null||n.removeObserver(this)}onMutationUpdate(n){Ce(this,yo,E0).call(this),Ce(this,yo,R2).call(this,n)}getCurrentResult(){return B(this,fc)}reset(){var n;(n=B(this,Ms))==null||n.removeObserver(this),je(this,Ms,void 0),Ce(this,yo,E0).call(this),Ce(this,yo,R2).call(this)}mutate(n,s){var a;return je(this,Ql,s),(a=B(this,Ms))==null||a.removeObserver(this),je(this,Ms,B(this,hc).getMutationCache().build(B(this,hc),this.options)),B(this,Ms).addObserver(this),B(this,Ms).execute(n)}},hc=new WeakMap,fc=new WeakMap,Ms=new WeakMap,Ql=new WeakMap,yo=new WeakSet,E0=function(){var s;const n=((s=B(this,Ms))==null?void 0:s.state)??$8();je(this,fc,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},R2=function(n){Sn.batch(()=>{var s,a,i,l,o,c,d,u;if(B(this,Ql)&&this.hasListeners()){const h=B(this,fc).variables,f=B(this,fc).context;(n==null?void 0:n.type)==="success"?((a=(s=B(this,Ql)).onSuccess)==null||a.call(s,n.data,h,f),(l=(i=B(this,Ql)).onSettled)==null||l.call(i,n.data,null,h,f)):(n==null?void 0:n.type)==="error"&&((c=(o=B(this,Ql)).onError)==null||c.call(o,n.error,h,f),(u=(d=B(this,Ql)).onSettled)==null||u.call(d,void 0,n.error,h,f))}this.listeners.forEach(h=>{h(B(this,fc))})})},KF),L8=y.createContext(void 0),Et=e=>{const t=y.useContext(L8);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},U8=({client:e,children:t})=>(y.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(L8.Provider,{value:e,children:t})),B8=y.createContext(!1),mte=()=>y.useContext(B8);B8.Provider;function pte(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var xte=y.createContext(pte()),gte=()=>y.useContext(xte);function z8(e,t){return typeof e=="function"?e(...t):!!e}function D2(){}var vte=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},yte=e=>{y.useEffect(()=>{e.clearReset()},[e])},bte=({result:e,errorResetBoundary:t,throwOnError:n,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&z8(n,[e.error,s]),jte=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},wte=(e,t)=>e.isLoading&&e.isFetching&&!t,Nte=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,AR=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function kte(e,t,n){var u,h,f,m,v;const s=Et(),a=mte(),i=gte(),l=s.defaultQueryOptions(e);(h=(u=s.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||h.call(u,l),l._optimisticResults=a?"isRestoring":"optimistic",jte(l),vte(l,i),yte(i);const o=!s.getQueryCache().get(l.queryHash),[c]=y.useState(()=>new t(s,l)),d=c.getOptimisticResult(l);if(y.useSyncExternalStore(y.useCallback(x=>{const w=a?D2:c.subscribe(Sn.batchCalls(x));return c.updateResult(),w},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),y.useEffect(()=>{c.setOptions(l,{listeners:!1})},[l,c]),Nte(l,d))throw AR(l,c,i);if(bte({result:d,errorResetBoundary:i,throwOnError:l.throwOnError,query:s.getQueryCache().get(l.queryHash)}))throw d.error;if((m=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||m.call(f,l,d),l.experimental_prefetchInRender&&!mu&&wte(d,a)){const x=o?AR(l,c,i):(v=s.getQueryCache().get(l.queryHash))==null?void 0:v.promise;x==null||x.catch(D2).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function $e(e,t){return kte(e,dte)}function Ee(e,t){const n=Et(),[s]=y.useState(()=>new fte(n,e));y.useEffect(()=>{s.setOptions(e)},[s,e]);const a=y.useSyncExternalStore(y.useCallback(l=>s.subscribe(Sn.batchCalls(l)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=y.useCallback((l,o)=>{s.mutate(l,o).catch(D2)},[s]);if(a.error&&z8(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}async function V8(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function Te(e,t="GET",n,s){const a=typeof t=="string"?t:"GET";if(console.log("🔧 apiRequest call:",{url:e,originalMethod:t,methodType:typeof t,finalMethod:a,methodValue:JSON.stringify(t)}),typeof t!="string")throw console.error("❌ INVALID METHOD IN apiRequest:",{method:t,methodType:typeof t,stack:new Error().stack}),new Error(`Invalid method in apiRequest: ${typeof t}. Expected string, got ${typeof t}`);localStorage.getItem("token")&&localStorage.removeItem("token");let i=localStorage.getItem("auth_token");(i==="null"||i==="undefined"||!i||i.trim()==="")&&(console.log("🚨 Invalid token detected, clearing:",i),localStorage.removeItem("auth_token"),i=null),console.log("🔐 apiRequest token check:",{url:e,method:a,hasToken:!!i,tokenStart:i?i.substring(0,20)+"...":"NO_TOKEN"});const l={"Content-Type":"application/json",...s};i&&(l.Authorization=`Bearer ${i}`);const o=await fetch(e,{method:a,headers:l,body:n?JSON.stringify(n):void 0,credentials:"include"});await V8(o);const c=await o.text();return c?JSON.parse(c):null}const Ste=({on401:e})=>async({queryKey:t})=>{localStorage.getItem("token")&&localStorage.removeItem("token");const n=localStorage.getItem("auth_token"),s={};n&&n!=="null"&&n!=="undefined"&&n.trim()!==""&&(s.Authorization=`Bearer ${n}`);const a=await fetch(t[0],{method:"GET",headers:s,credentials:"include"});return e==="returnNull"&&a.status===401?null:(await V8(a),await a.json())},io=new I8({defaultOptions:{queries:{queryFn:Ste({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:30*1e3,gcTime:5*60*1e3,retry:(e,t)=>{var n;return(n=t==null?void 0:t.message)!=null&&n.includes("4")?!1:e<2},retryDelay:e=>Math.min(1e3*2**e,3e4)},mutations:{retry:(e,t)=>{var n;return(n=t==null?void 0:t.message)!=null&&n.includes("4")?!1:e<1}}}});window.queryClient=io;const Cte=async e=>(await Te("/api/partner/transform-landing-url","POST",e)).transformedUrl,_te=1,Pte=1e6;let QN=0;function Ate(){return QN=(QN+1)%Number.MAX_SAFE_INTEGER,QN.toString()}const JN=new Map,TR=e=>{if(JN.has(e))return;const t=setTimeout(()=>{JN.delete(e),lx({type:"REMOVE_TOAST",toastId:e})},Pte);JN.set(e,t)},Tte=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,_te)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?TR(n):e.toasts.forEach(s=>{TR(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},O0=[];let R0={toasts:[]};function lx(e){R0=Tte(R0,e),O0.forEach(t=>{t(R0)})}function Ete({...e}){const t=Ate(),n=a=>lx({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>lx({type:"DISMISS_TOAST",toastId:t});return lx({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:n}}function lt(){const[e,t]=y.useState(R0);return y.useEffect(()=>(O0.push(t),()=>{const n=O0.indexOf(t);n>-1&&O0.splice(n,1)}),[e]),{...e,toast:Ete,dismiss:n=>lx({type:"DISMISS_TOAST",toastId:n})}}function Le(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function ER(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ko(...e){return t=>{let n=!1;const s=e.map(a=>{const i=ER(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():ER(e[a],null)}}}}function St(...e){return y.useCallback(ko(...e),e)}function Ote(e,t){const n=y.createContext(t),s=i=>{const{children:l,...o}=i,c=y.useMemo(()=>o,Object.values(o));return r.jsx(n.Provider,{value:c,children:l})};s.displayName=e+"Provider";function a(i){const l=y.useContext(n);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,a]}function Bn(e,t=[]){let n=[];function s(i,l){const o=y.createContext(l),c=n.length;n=[...n,l];const d=h=>{var j;const{scope:f,children:m,...v}=h,x=((j=f==null?void 0:f[e])==null?void 0:j[c])||o,w=y.useMemo(()=>v,Object.values(v));return r.jsx(x.Provider,{value:w,children:m})};d.displayName=i+"Provider";function u(h,f){var x;const m=((x=f==null?void 0:f[e])==null?void 0:x[c])||o,v=y.useContext(m);if(v)return v;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=n.map(l=>y.createContext(l));return function(o){const c=(o==null?void 0:o[e])||i;return y.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return a.scopeName=e,[s,Rte(a,...t)]}function Rte(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=s.reduce((o,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...o,...h}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}function Fc(e){const t=Dte(e),n=y.forwardRef((s,a)=>{const{children:i,...l}=s,o=y.Children.toArray(i),c=o.find(Mte);if(c){const d=c.props.children,u=o.map(h=>h===c?y.Children.count(d)>1?y.Children.only(null):y.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...l,ref:a,children:y.isValidElement(d)?y.cloneElement(d,void 0,u):null})}return r.jsx(t,{...l,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var q8=Fc("Slot");function Dte(e){const t=y.forwardRef((n,s)=>{const{children:a,...i}=n;if(y.isValidElement(a)){const l=Ite(a),o=$te(i,a.props);return a.type!==y.Fragment&&(o.ref=s?ko(s,l):l),y.cloneElement(a,o)}return y.Children.count(a)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var W8=Symbol("radix.slottable");function H8(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=W8,t}function Mte(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===W8}function $te(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...o)=>{i(...o),a(...o)}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function Ite(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Dv(e){const t=e+"CollectionProvider",[n,s]=Bn(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:w,children:j}=x,g=Z.useRef(null),b=Z.useRef(new Map).current;return r.jsx(a,{scope:w,itemMap:b,collectionRef:g,children:j})};l.displayName=t;const o=e+"CollectionSlot",c=Fc(o),d=Z.forwardRef((x,w)=>{const{scope:j,children:g}=x,b=i(o,j),p=St(w,b.collectionRef);return r.jsx(c,{ref:p,children:g})});d.displayName=o;const u=e+"CollectionItemSlot",h="data-radix-collection-item",f=Fc(u),m=Z.forwardRef((x,w)=>{const{scope:j,children:g,...b}=x,p=Z.useRef(null),N=St(w,p),k=i(u,j);return Z.useEffect(()=>(k.itemMap.set(p,{ref:p,...b}),()=>void k.itemMap.delete(p))),r.jsx(f,{[h]:"",ref:N,children:g})});m.displayName=u;function v(x){const w=i(e+"CollectionConsumer",x);return Z.useCallback(()=>{const g=w.collectionRef.current;if(!g)return[];const b=Array.from(g.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((k,C)=>b.indexOf(k.ref.current)-b.indexOf(C.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:l,Slot:d,ItemSlot:m},v,s]}var Fte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ze=Fte.reduce((e,t)=>{const n=Fc(`Primitive.${t}`),s=y.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...o,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function FA(e,t){e&&Fa.flushSync(()=>e.dispatchEvent(t))}function Br(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),y.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function Lte(e,t=globalThis==null?void 0:globalThis.document){const n=Br(e);y.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var Ute="DismissableLayer",M2="dismissableLayer.update",Bte="dismissableLayer.pointerDownOutside",zte="dismissableLayer.focusOutside",OR,K8=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$u=y.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...c}=e,d=y.useContext(K8),[u,h]=y.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=y.useState({}),v=St(t,C=>h(C)),x=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),j=x.indexOf(w),g=u?x.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,p=g>=j,N=qte(C=>{const _=C.target,P=[...d.branches].some(D=>D.contains(_));!p||P||(a==null||a(C),l==null||l(C),C.defaultPrevented||o==null||o())},f),k=Wte(C=>{const _=C.target;[...d.branches].some(D=>D.contains(_))||(i==null||i(C),l==null||l(C),C.defaultPrevented||o==null||o())},f);return Lte(C=>{g===d.layers.size-1&&(s==null||s(C),!C.defaultPrevented&&o&&(C.preventDefault(),o()))},f),y.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(OR=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),RR(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=OR)}},[u,f,n,d]),y.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),RR())},[u,d]),y.useEffect(()=>{const C=()=>m({});return document.addEventListener(M2,C),()=>document.removeEventListener(M2,C)},[]),r.jsx(Ze.div,{...c,ref:v,style:{pointerEvents:b?p?"auto":"none":void 0,...e.style},onFocusCapture:Le(e.onFocusCapture,k.onFocusCapture),onBlurCapture:Le(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Le(e.onPointerDownCapture,N.onPointerDownCapture)})});$u.displayName=Ute;var Vte="DismissableLayerBranch",G8=y.forwardRef((e,t)=>{const n=y.useContext(K8),s=y.useRef(null),a=St(t,s);return y.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),r.jsx(Ze.div,{...e,ref:a})});G8.displayName=Vte;function qte(e,t=globalThis==null?void 0:globalThis.document){const n=Br(e),s=y.useRef(!1),a=y.useRef(()=>{});return y.useEffect(()=>{const i=o=>{if(o.target&&!s.current){let c=function(){Y8(Bte,n,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function Wte(e,t=globalThis==null?void 0:globalThis.document){const n=Br(e),s=y.useRef(!1);return y.useEffect(()=>{const a=i=>{i.target&&!s.current&&Y8(zte,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function RR(){const e=new CustomEvent(M2);document.dispatchEvent(e)}function Y8(e,t,n,{discrete:s}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?FA(a,i):a.dispatchEvent(i)}var Hte=$u,Kte=G8,pn=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},Gte="Portal",Am=y.forwardRef((e,t)=>{var o;const{container:n,...s}=e,[a,i]=y.useState(!1);pn(()=>i(!0),[]);const l=n||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return l?jee.createPortal(r.jsx(Ze.div,{...s,ref:t}),l):null});Am.displayName=Gte;function Yte(e,t){return y.useReducer((n,s)=>t[n][s]??n,e)}var zn=e=>{const{present:t,children:n}=e,s=Xte(t),a=typeof n=="function"?n({present:s.isPresent}):y.Children.only(n),i=St(s.ref,Zte(a));return typeof n=="function"||s.isPresent?y.cloneElement(a,{ref:i}):null};zn.displayName="Presence";function Xte(e){const[t,n]=y.useState(),s=y.useRef({}),a=y.useRef(e),i=y.useRef("none"),l=e?"mounted":"unmounted",[o,c]=Yte(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const d=Iy(s.current);i.current=o==="mounted"?d:"none"},[o]),pn(()=>{const d=s.current,u=a.current;if(u!==e){const f=i.current,m=Iy(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),pn(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=m=>{const x=Iy(s.current).includes(m.animationName);if(m.target===t&&x&&(c("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},f=m=>{m.target===t&&(i.current=Iy(s.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:y.useCallback(d=>{d&&(s.current=getComputedStyle(d)),n(d)},[])}}function Iy(e){return(e==null?void 0:e.animationName)||"none"}function Zte(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Oi({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,a]=Qte({defaultProp:t,onChange:n}),i=e!==void 0,l=i?e:s,o=Br(n),c=y.useCallback(d=>{if(i){const h=typeof d=="function"?d(e):d;h!==e&&o(h)}else a(d)},[i,e,a,o]);return[l,c]}function Qte({defaultProp:e,onChange:t}){const n=y.useState(e),[s]=n,a=y.useRef(s),i=Br(t);return y.useEffect(()=>{a.current!==s&&(i(s),a.current=s)},[s,a,i]),n}var Jte="VisuallyHidden",Mv=y.forwardRef((e,t)=>r.jsx(Ze.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Mv.displayName=Jte;var ere=Mv,LA="ToastProvider",[UA,tre,rre]=Dv("Toast"),[X8,Vqe]=Bn("Toast",[rre]),[nre,Lw]=X8(LA),Z8=e=>{const{__scopeToast:t,label:n="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:l}=e,[o,c]=y.useState(null),[d,u]=y.useState(0),h=y.useRef(!1),f=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${LA}\`. Expected non-empty \`string\`.`),r.jsx(UA.Provider,{scope:t,children:r.jsx(nre,{scope:t,label:n,duration:s,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:y.useCallback(()=>u(m=>m+1),[]),onToastRemove:y.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:l})})};Z8.displayName=LA;var Q8="ToastViewport",sre=["F8"],$2="toast.viewportPause",I2="toast.viewportResume",J8=y.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=sre,label:a="Notifications ({hotkey})",...i}=e,l=Lw(Q8,n),o=tre(n),c=y.useRef(null),d=y.useRef(null),u=y.useRef(null),h=y.useRef(null),f=St(t,h,l.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=l.toastCount>0;y.useEffect(()=>{const w=j=>{var b;s.length!==0&&s.every(p=>j[p]||j.code===p)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[s]),y.useEffect(()=>{const w=c.current,j=h.current;if(v&&w&&j){const g=()=>{if(!l.isClosePausedRef.current){const k=new CustomEvent($2);j.dispatchEvent(k),l.isClosePausedRef.current=!0}},b=()=>{if(l.isClosePausedRef.current){const k=new CustomEvent(I2);j.dispatchEvent(k),l.isClosePausedRef.current=!1}},p=k=>{!w.contains(k.relatedTarget)&&b()},N=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",g),w.addEventListener("focusout",p),w.addEventListener("pointermove",g),w.addEventListener("pointerleave",N),window.addEventListener("blur",g),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",g),w.removeEventListener("focusout",p),w.removeEventListener("pointermove",g),w.removeEventListener("pointerleave",N),window.removeEventListener("blur",g),window.removeEventListener("focus",b)}}},[v,l.isClosePausedRef]);const x=y.useCallback(({tabbingDirection:w})=>{const g=o().map(b=>{const p=b.ref.current,N=[p,...gre(p)];return w==="forwards"?N:N.reverse()});return(w==="forwards"?g.reverse():g).flat()},[o]);return y.useEffect(()=>{const w=h.current;if(w){const j=g=>{var N,k,C;const b=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!b){const _=document.activeElement,P=g.shiftKey;if(g.target===w&&P){(N=d.current)==null||N.focus();return}const $=x({tabbingDirection:P?"backwards":"forwards"}),A=$.findIndex(T=>T===_);ek($.slice(A+1))?g.preventDefault():P?(k=d.current)==null||k.focus():(C=u.current)==null||C.focus()}};return w.addEventListener("keydown",j),()=>w.removeEventListener("keydown",j)}},[o,x]),r.jsxs(Kte,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&r.jsx(F2,{ref:d,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"forwards"});ek(w)}}),r.jsx(UA.Slot,{scope:n,children:r.jsx(Ze.ol,{tabIndex:-1,...i,ref:f})}),v&&r.jsx(F2,{ref:u,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"backwards"});ek(w)}})]})});J8.displayName=Q8;var eU="ToastFocusProxy",F2=y.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...a}=e,i=Lw(eU,n);return r.jsx(Mv,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:l=>{var d;const o=l.relatedTarget;!((d=i.viewport)!=null&&d.contains(o))&&s()}})});F2.displayName=eU;var Uw="Toast",are="toast.swipeStart",ire="toast.swipeMove",lre="toast.swipeCancel",ore="toast.swipeEnd",tU=y.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:a,onOpenChange:i,...l}=e,[o=!0,c]=Oi({prop:s,defaultProp:a,onChange:i});return r.jsx(zn,{present:n||o,children:r.jsx(ure,{open:o,...l,ref:t,onClose:()=>c(!1),onPause:Br(e.onPause),onResume:Br(e.onResume),onSwipeStart:Le(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Le(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Le(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Le(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});tU.displayName=Uw;var[cre,dre]=X8(Uw,{onClose(){}}),ure=y.forwardRef((e,t)=>{const{__scopeToast:n,type:s="foreground",duration:a,open:i,onClose:l,onEscapeKeyDown:o,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...v}=e,x=Lw(Uw,n),[w,j]=y.useState(null),g=St(t,T=>j(T)),b=y.useRef(null),p=y.useRef(null),N=a||x.duration,k=y.useRef(0),C=y.useRef(N),_=y.useRef(0),{onToastAdd:P,onToastRemove:D}=x,E=Br(()=>{var O;(w==null?void 0:w.contains(document.activeElement))&&((O=x.viewport)==null||O.focus()),l()}),$=y.useCallback(T=>{!T||T===1/0||(window.clearTimeout(_.current),k.current=new Date().getTime(),_.current=window.setTimeout(E,T))},[E]);y.useEffect(()=>{const T=x.viewport;if(T){const O=()=>{$(C.current),d==null||d()},z=()=>{const F=new Date().getTime()-k.current;C.current=C.current-F,window.clearTimeout(_.current),c==null||c()};return T.addEventListener($2,z),T.addEventListener(I2,O),()=>{T.removeEventListener($2,z),T.removeEventListener(I2,O)}}},[x.viewport,N,c,d,$]),y.useEffect(()=>{i&&!x.isClosePausedRef.current&&$(N)},[i,N,x.isClosePausedRef,$]),y.useEffect(()=>(P(),()=>D()),[P,D]);const A=y.useMemo(()=>w?oU(w):null,[w]);return x.viewport?r.jsxs(r.Fragment,{children:[A&&r.jsx(hre,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:A}),r.jsx(cre,{scope:n,onClose:E,children:Fa.createPortal(r.jsx(UA.ItemSlot,{scope:n,children:r.jsx(Hte,{asChild:!0,onEscapeKeyDown:Le(o,()=>{x.isFocusedToastEscapeKeyDownRef.current||E(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Ze.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...v,ref:g,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Le(e.onKeyDown,T=>{T.key==="Escape"&&(o==null||o(T.nativeEvent),T.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:Le(e.onPointerDown,T=>{T.button===0&&(b.current={x:T.clientX,y:T.clientY})}),onPointerMove:Le(e.onPointerMove,T=>{if(!b.current)return;const O=T.clientX-b.current.x,z=T.clientY-b.current.y,F=!!p.current,R=["left","right"].includes(x.swipeDirection),I=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,Q=R?I(0,O):0,Y=R?0:I(0,z),K=T.pointerType==="touch"?10:2,oe={x:Q,y:Y},ge={originalEvent:T,delta:oe};F?(p.current=oe,Fy(ire,h,ge,{discrete:!1})):DR(oe,x.swipeDirection,K)?(p.current=oe,Fy(are,u,ge,{discrete:!1}),T.target.setPointerCapture(T.pointerId)):(Math.abs(O)>K||Math.abs(z)>K)&&(b.current=null)}),onPointerUp:Le(e.onPointerUp,T=>{const O=p.current,z=T.target;if(z.hasPointerCapture(T.pointerId)&&z.releasePointerCapture(T.pointerId),p.current=null,b.current=null,O){const F=T.currentTarget,R={originalEvent:T,delta:O};DR(O,x.swipeDirection,x.swipeThreshold)?Fy(ore,m,R,{discrete:!0}):Fy(lre,f,R,{discrete:!0}),F.addEventListener("click",I=>I.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),hre=e=>{const{__scopeToast:t,children:n,...s}=e,a=Lw(Uw,t),[i,l]=y.useState(!1),[o,c]=y.useState(!1);return pre(()=>l(!0)),y.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),o?null:r.jsx(Am,{asChild:!0,children:r.jsx(Mv,{...s,children:i&&r.jsxs(r.Fragment,{children:[a.label," ",n]})})})},fre="ToastTitle",rU=y.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(Ze.div,{...s,ref:t})});rU.displayName=fre;var mre="ToastDescription",nU=y.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(Ze.div,{...s,ref:t})});nU.displayName=mre;var sU="ToastAction",aU=y.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?r.jsx(lU,{altText:n,asChild:!0,children:r.jsx(BA,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${sU}\`. Expected non-empty \`string\`.`),null)});aU.displayName=sU;var iU="ToastClose",BA=y.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,a=dre(iU,n);return r.jsx(lU,{asChild:!0,children:r.jsx(Ze.button,{type:"button",...s,ref:t,onClick:Le(e.onClick,a.onClose)})})});BA.displayName=iU;var lU=y.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...a}=e;return r.jsx(Ze.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function oU(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),xre(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const l=s.dataset.radixToastAnnounceAlt;l&&t.push(l)}else t.push(...oU(s))}}),t}function Fy(e,t,n,{discrete:s}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?FA(a,i):a.dispatchEvent(i)}var DR=(e,t,n=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),i=s>a;return t==="left"||t==="right"?i&&s>n:!i&&a>n};function pre(e=()=>{}){const t=Br(e);pn(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[t])}function xre(e){return e.nodeType===e.ELEMENT_NODE}function gre(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ek(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var vre=Z8,cU=J8,dU=tU,uU=rU,hU=nU,fU=aU,mU=BA;function pU(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=pU(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Ot(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=pU(e))&&(s&&(s+=" "),s+=t);return s}const MR=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,$R=Ot,$v=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return $R(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,l=Object.keys(a).map(d=>{const u=n==null?void 0:n[d],h=i==null?void 0:i[d];if(u===null)return null;const f=MR(u)||MR(h);return a[d][f]}),o=n&&Object.entries(n).reduce((d,u)=>{let[h,f]=u;return f===void 0||(d[h]=f),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:h,className:f,...m}=u;return Object.entries(m).every(v=>{let[x,w]=v;return Array.isArray(w)?w.includes({...i,...o}[x]):{...i,...o}[x]===w})?[...d,h,f]:d},[]);return $R(e,l,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yre=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xU=(...e)=>e.filter((t,n,s)=>!!t&&s.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jre=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:l,...o},c)=>y.createElement("svg",{ref:c,...bre,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:xU("lucide",a),...o},[...l.map(([d,u])=>y.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(e,t)=>{const n=y.forwardRef(({className:s,...a},i)=>y.createElement(jre,{ref:i,iconNode:t,className:xU(`lucide-${yre(e)}`,s),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=we("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=we("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wre=we("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=we("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=we("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nre=we("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=we("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kre=we("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=we("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sre=we("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=we("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=we("Bitcoin",[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cre=we("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=we("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _re=we("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pre=we("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=we("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=we("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Are=we("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tre=we("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ere=we("ChartColumnBig",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"15",y:"5",width:"4",height:"12",rx:"1",key:"q8uenq"}],["rect",{x:"7",y:"8",width:"4",height:"9",rx:"1",key:"sr5ea"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=we("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ore=we("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rre=we("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dre=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=we("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=we("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=we("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=we("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=we("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=we("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=we("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mre=we("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $re=we("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ire=we("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=we("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fre=we("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=we("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lre=we("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=we("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=we("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ure=we("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=we("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=we("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=we("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=we("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=we("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=we("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bre=we("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=we("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=we("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=we("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=we("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vre=we("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=we("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qre=we("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=we("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=we("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wre=we("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=we("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=we("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=we("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=we("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=we("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=we("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=we("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gre=we("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yre=we("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=we("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=we("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=we("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=we("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=we("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=we("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=we("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=we("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=we("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=we("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=we("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qre=we("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jre=we("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ene=we("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=we("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tne=we("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rne=we("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=we("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sne=we("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=we("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=we("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=we("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=we("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ane=we("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ine=we("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=we("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=we("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=we("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=we("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=we("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=we("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=we("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=we("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=we("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=we("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=we("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=we("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=we("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=we("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=we("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lne=we("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=we("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=we("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const one=we("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cne=we("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=we("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),GA="-",dne=e=>{const t=hne(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:l=>{const o=l.split(GA);return o[0]===""&&o.length!==1&&o.shift(),bU(o,t)||une(l)},getConflictingClassGroupIds:(l,o)=>{const c=n[l]||[];return o&&s[l]?[...c,...s[l]]:c}}},bU=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),a=s?bU(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(GA);return(l=t.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},KR=/^\[(.+)\]$/,une=e=>{if(KR.test(e)){const t=KR.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},hne=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return mne(Object.entries(e.classGroups),n).forEach(([i,l])=>{q2(l,s,i,t)}),s},q2=(e,t,n,s)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:GR(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(fne(a)){q2(a(s),t,n,s);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,l])=>{q2(l,GR(t,i),n,s)})})},GR=(e,t)=>{let n=e;return t.split(GA).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},fne=e=>e.isThemeGetter,mne=(e,t)=>t?e.map(([n,s])=>{const a=s.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[t+l,o])):i);return[n,a]}):e,pne=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const a=(i,l)=>{n.set(i,l),t++,t>e&&(t=0,s=n,n=new Map)};return{get(i){let l=n.get(i);if(l!==void 0)return l;if((l=s.get(i))!==void 0)return a(i,l),l},set(i,l){n.has(i)?n.set(i,l):a(i,l)}}},jU="!",xne=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,a=t[0],i=t.length,l=o=>{const c=[];let d=0,u=0,h;for(let w=0;w<o.length;w++){let j=o[w];if(d===0){if(j===a&&(s||o.slice(w,w+i)===t)){c.push(o.slice(u,w)),u=w+i;continue}if(j==="/"){h=w;continue}}j==="["?d++:j==="]"&&d--}const f=c.length===0?o:o.substring(u),m=f.startsWith(jU),v=m?f.substring(1):f,x=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:x}};return n?o=>n({className:o,parseClassName:l}):l},gne=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},vne=e=>({cache:pne(e.cacheSize),parseClassName:xne(e),...dne(e)}),yne=/\s+/,bne=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a}=t,i=[],l=e.trim().split(yne);let o="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(d);let v=!!m,x=s(v?f.substring(0,m):f);if(!x){if(!v){o=d+(o.length>0?" "+o:o);continue}if(x=s(f),!x){o=d+(o.length>0?" "+o:o);continue}v=!1}const w=gne(u).join(":"),j=h?w+jU:w,g=j+x;if(i.includes(g))continue;i.push(g);const b=a(x,v);for(let p=0;p<b.length;++p){const N=b[p];i.push(j+N)}o=d+(o.length>0?" "+o:o)}return o};function jne(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=wU(t))&&(s&&(s+=" "),s+=n);return s}const wU=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=wU(e[s]))&&(n&&(n+=" "),n+=t);return n};function wne(e,...t){let n,s,a,i=l;function l(c){const d=t.reduce((u,h)=>h(u),e());return n=vne(d),s=n.cache.get,a=n.cache.set,i=o,o(c)}function o(c){const d=s(c);if(d)return d;const u=bne(c,n);return a(c,u),u}return function(){return i(jne.apply(null,arguments))}}const Dr=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},NU=/^\[(?:([a-z-]+):)?(.+)\]$/i,Nne=/^\d+\/\d+$/,kne=new Set(["px","full","screen"]),Sne=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Cne=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_ne=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Pne=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ane=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zl=e=>$h(e)||kne.has(e)||Nne.test(e),Vo=e=>Em(e,"length",Ine),$h=e=>!!e&&!Number.isNaN(Number(e)),rk=e=>Em(e,"number",$h),xp=e=>!!e&&Number.isInteger(Number(e)),Tne=e=>e.endsWith("%")&&$h(e.slice(0,-1)),Bt=e=>NU.test(e),qo=e=>Sne.test(e),Ene=new Set(["length","size","percentage"]),One=e=>Em(e,Ene,kU),Rne=e=>Em(e,"position",kU),Dne=new Set(["image","url"]),Mne=e=>Em(e,Dne,Lne),$ne=e=>Em(e,"",Fne),gp=()=>!0,Em=(e,t,n)=>{const s=NU.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},Ine=e=>Cne.test(e)&&!_ne.test(e),kU=()=>!1,Fne=e=>Pne.test(e),Lne=e=>Ane.test(e),Une=()=>{const e=Dr("colors"),t=Dr("spacing"),n=Dr("blur"),s=Dr("brightness"),a=Dr("borderColor"),i=Dr("borderRadius"),l=Dr("borderSpacing"),o=Dr("borderWidth"),c=Dr("contrast"),d=Dr("grayscale"),u=Dr("hueRotate"),h=Dr("invert"),f=Dr("gap"),m=Dr("gradientColorStops"),v=Dr("gradientColorStopPositions"),x=Dr("inset"),w=Dr("margin"),j=Dr("opacity"),g=Dr("padding"),b=Dr("saturate"),p=Dr("scale"),N=Dr("sepia"),k=Dr("skew"),C=Dr("space"),_=Dr("translate"),P=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto",Bt,t],$=()=>[Bt,t],A=()=>["",zl,Vo],T=()=>["auto",$h,Bt],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",Bt],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>[$h,Bt];return{cacheSize:500,separator:":",theme:{colors:[gp],spacing:[zl,Vo],blur:["none","",qo,Bt],brightness:Y(),borderColor:[e],borderRadius:["none","","full",qo,Bt],borderSpacing:$(),borderWidth:A(),contrast:Y(),grayscale:I(),hueRotate:Y(),invert:I(),gap:$(),gradientColorStops:[e],gradientColorStopPositions:[Tne,Vo],inset:E(),margin:E(),opacity:Y(),padding:$(),saturate:Y(),scale:Y(),sepia:I(),skew:Y(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",Bt]}],container:["container"],columns:[{columns:[qo]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),Bt]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xp,Bt]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Bt]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",xp,Bt]}],"grid-cols":[{"grid-cols":[gp]}],"col-start-end":[{col:["auto",{span:["full",xp,Bt]},Bt]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[gp]}],"row-start-end":[{row:["auto",{span:[xp,Bt]},Bt]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Bt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Bt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Bt,t]}],"min-w":[{"min-w":[Bt,t,"min","max","fit"]}],"max-w":[{"max-w":[Bt,t,"none","full","min","max","fit","prose",{screen:[qo]},qo]}],h:[{h:[Bt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Bt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Bt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Bt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",qo,Vo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rk]}],"font-family":[{font:[gp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Bt]}],"line-clamp":[{"line-clamp":["none",$h,rk]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",zl,Bt]}],"list-image":[{"list-image":["none",Bt]}],"list-style-type":[{list:["none","disc","decimal",Bt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",zl,Vo]}],"underline-offset":[{"underline-offset":["auto",zl,Bt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Bt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Bt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),Rne]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",One]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Mne]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:z()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[zl,Bt]}],"outline-w":[{outline:[zl,Vo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[zl,Vo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",qo,$ne]}],"shadow-color":[{shadow:[gp]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",qo,Bt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Bt]}],duration:[{duration:Y()}],ease:[{ease:["linear","in","out","in-out",Bt]}],delay:[{delay:Y()}],animate:[{animate:["none","spin","ping","pulse","bounce",Bt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[p]}],"scale-x":[{"scale-x":[p]}],"scale-y":[{"scale-y":[p]}],rotate:[{rotate:[xp,Bt]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Bt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Bt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Bt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[zl,Vo,rk]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Bne=wne(Une);function Ae(...e){return Bne(Ot(e))}const zne=vre,SU=y.forwardRef(({className:e,...t},n)=>r.jsx(cU,{ref:n,className:Ae("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));SU.displayName=cU.displayName;const Vne=$v("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),CU=y.forwardRef(({className:e,variant:t,...n},s)=>r.jsx(dU,{ref:s,className:Ae(Vne({variant:t}),e),...n}));CU.displayName=dU.displayName;const qne=y.forwardRef(({className:e,...t},n)=>r.jsx(fU,{ref:n,className:Ae("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));qne.displayName=fU.displayName;const _U=y.forwardRef(({className:e,...t},n)=>r.jsx(mU,{ref:n,className:Ae("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(Tn,{className:"h-4 w-4"})}));_U.displayName=mU.displayName;const PU=y.forwardRef(({className:e,...t},n)=>r.jsx(uU,{ref:n,className:Ae("text-sm font-semibold",e),...t}));PU.displayName=uU.displayName;const AU=y.forwardRef(({className:e,...t},n)=>r.jsx(hU,{ref:n,className:Ae("text-sm opacity-90",e),...t}));AU.displayName=hU.displayName;function Wne(){const{toasts:e}=lt();return r.jsxs(zne,{children:[e.map(function({id:t,title:n,description:s,action:a,...i}){return r.jsxs(CU,{...i,children:[r.jsxs("div",{className:"grid gap-1",children:[n&&r.jsx(PU,{children:n}),s&&r.jsx(AU,{children:s})]}),a,r.jsx(_U,{})]},t)}),r.jsx(SU,{})]})}var Hne=sL[" useId ".trim().toString()]||(()=>{}),Kne=0;function Xn(e){const[t,n]=y.useState(Hne());return pn(()=>{n(s=>s??String(Kne++))},[e]),t?`radix-${t}`:""}const Gne=["top","right","bottom","left"],Lc=Math.min,ua=Math.max,Nb=Math.round,Ly=Math.floor,kl=e=>({x:e,y:e}),Yne={left:"right",right:"left",bottom:"top",top:"bottom"},Xne={start:"end",end:"start"};function W2(e,t,n){return ua(e,Lc(t,n))}function So(e,t){return typeof e=="function"?e(t):e}function Co(e){return e.split("-")[0]}function Om(e){return e.split("-")[1]}function YA(e){return e==="x"?"y":"x"}function XA(e){return e==="y"?"height":"width"}function Uc(e){return["top","bottom"].includes(Co(e))?"y":"x"}function ZA(e){return YA(Uc(e))}function Zne(e,t,n){n===void 0&&(n=!1);const s=Om(e),a=ZA(e),i=XA(a);let l=a==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=kb(l)),[l,kb(l)]}function Qne(e){const t=kb(e);return[H2(e),t,H2(t)]}function H2(e){return e.replace(/start|end/g,t=>Xne[t])}function Jne(e,t,n){const s=["left","right"],a=["right","left"],i=["top","bottom"],l=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:s:t?s:a;case"left":case"right":return t?i:l;default:return[]}}function ese(e,t,n,s){const a=Om(e);let i=Jne(Co(e),n==="start",s);return a&&(i=i.map(l=>l+"-"+a),t&&(i=i.concat(i.map(H2)))),i}function kb(e){return e.replace(/left|right|bottom|top/g,t=>Yne[t])}function tse(e){return{top:0,right:0,bottom:0,left:0,...e}}function TU(e){return typeof e!="number"?tse(e):{top:e,right:e,bottom:e,left:e}}function Sb(e){const{x:t,y:n,width:s,height:a}=e;return{width:s,height:a,top:n,left:t,right:t+s,bottom:n+a,x:t,y:n}}function YR(e,t,n){let{reference:s,floating:a}=e;const i=Uc(t),l=ZA(t),o=XA(l),c=Co(t),d=i==="y",u=s.x+s.width/2-a.width/2,h=s.y+s.height/2-a.height/2,f=s[o]/2-a[o]/2;let m;switch(c){case"top":m={x:u,y:s.y-a.height};break;case"bottom":m={x:u,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:h};break;case"left":m={x:s.x-a.width,y:h};break;default:m={x:s.x,y:s.y}}switch(Om(t)){case"start":m[l]-=f*(n&&d?-1:1);break;case"end":m[l]+=f*(n&&d?-1:1);break}return m}const rse=async(e,t,n)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:l}=n,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(t));let d=await l.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:h}=YR(d,s,c),f=s,m={},v=0;for(let x=0;x<o.length;x++){const{name:w,fn:j}=o[x],{x:g,y:b,data:p,reset:N}=await j({x:u,y:h,initialPlacement:s,placement:f,strategy:a,middlewareData:m,rects:d,platform:l,elements:{reference:e,floating:t}});u=g??u,h=b??h,m={...m,[w]:{...m[w],...p}},N&&v<=50&&(v++,typeof N=="object"&&(N.placement&&(f=N.placement),N.rects&&(d=N.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:a}):N.rects),{x:u,y:h}=YR(d,f,c)),x=-1)}return{x:u,y:h,placement:f,strategy:a,middlewareData:m}};async function Kx(e,t){var n;t===void 0&&(t={});const{x:s,y:a,platform:i,rects:l,elements:o,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=So(t,e),v=TU(m),w=o[f?h==="floating"?"reference":"floating":h],j=Sb(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:d,rootBoundary:u,strategy:c})),g=h==="floating"?{x:s,y:a,width:l.floating.width,height:l.floating.height}:l.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),p=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},N=Sb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:g,offsetParent:b,strategy:c}):g);return{top:(j.top-N.top+v.top)/p.y,bottom:(N.bottom-j.bottom+v.bottom)/p.y,left:(j.left-N.left+v.left)/p.x,right:(N.right-j.right+v.right)/p.x}}const nse=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:a,rects:i,platform:l,elements:o,middlewareData:c}=t,{element:d,padding:u=0}=So(e,t)||{};if(d==null)return{};const h=TU(u),f={x:n,y:s},m=ZA(a),v=XA(m),x=await l.getDimensions(d),w=m==="y",j=w?"top":"left",g=w?"bottom":"right",b=w?"clientHeight":"clientWidth",p=i.reference[v]+i.reference[m]-f[m]-i.floating[v],N=f[m]-i.reference[m],k=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let C=k?k[b]:0;(!C||!await(l.isElement==null?void 0:l.isElement(k)))&&(C=o.floating[b]||i.floating[v]);const _=p/2-N/2,P=C/2-x[v]/2-1,D=Lc(h[j],P),E=Lc(h[g],P),$=D,A=C-x[v]-E,T=C/2-x[v]/2+_,O=W2($,T,A),z=!c.arrow&&Om(a)!=null&&T!==O&&i.reference[v]/2-(T<$?D:E)-x[v]/2<0,F=z?T<$?T-$:T-A:0;return{[m]:f[m]+F,data:{[m]:O,centerOffset:T-O-F,...z&&{alignmentOffset:F}},reset:z}}}),sse=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:a,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...w}=So(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const j=Co(a),g=Uc(o),b=Co(o)===o,p=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=f||(b||!x?[kb(o)]:Qne(o)),k=v!=="none";!f&&k&&N.push(...ese(o,x,v,p));const C=[o,...N],_=await Kx(t,w),P=[];let D=((s=i.flip)==null?void 0:s.overflows)||[];if(u&&P.push(_[j]),h){const T=Zne(a,l,p);P.push(_[T[0]],_[T[1]])}if(D=[...D,{placement:a,overflows:P}],!P.every(T=>T<=0)){var E,$;const T=(((E=i.flip)==null?void 0:E.index)||0)+1,O=C[T];if(O)return{data:{index:T,overflows:D},reset:{placement:O}};let z=($=D.filter(F=>F.overflows[0]<=0).sort((F,R)=>F.overflows[1]-R.overflows[1])[0])==null?void 0:$.placement;if(!z)switch(m){case"bestFit":{var A;const F=(A=D.filter(R=>{if(k){const I=Uc(R.placement);return I===g||I==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(I=>I>0).reduce((I,Q)=>I+Q,0)]).sort((R,I)=>R[1]-I[1])[0])==null?void 0:A[0];F&&(z=F);break}case"initialPlacement":z=o;break}if(a!==z)return{reset:{placement:z}}}return{}}}};function XR(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ZR(e){return Gne.some(t=>e[t]>=0)}const ase=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...a}=So(e,t);switch(s){case"referenceHidden":{const i=await Kx(t,{...a,elementContext:"reference"}),l=XR(i,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:ZR(l)}}}case"escaped":{const i=await Kx(t,{...a,altBoundary:!0}),l=XR(i,n.floating);return{data:{escapedOffsets:l,escaped:ZR(l)}}}default:return{}}}}};async function ise(e,t){const{placement:n,platform:s,elements:a}=e,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),l=Co(n),o=Om(n),c=Uc(n)==="y",d=["left","top"].includes(l)?-1:1,u=i&&c?-1:1,h=So(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof v=="number"&&(m=o==="end"?v*-1:v),c?{x:m*u,y:f*d}:{x:f*d,y:m*u}}const lse=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:a,y:i,placement:l,middlewareData:o}=t,c=await ise(t,e);return l===((n=o.offset)==null?void 0:n.placement)&&(s=o.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:l}}}}},ose=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:a}=t,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:w=>{let{x:j,y:g}=w;return{x:j,y:g}}},...c}=So(e,t),d={x:n,y:s},u=await Kx(t,c),h=Uc(Co(a)),f=YA(h);let m=d[f],v=d[h];if(i){const w=f==="y"?"top":"left",j=f==="y"?"bottom":"right",g=m+u[w],b=m-u[j];m=W2(g,m,b)}if(l){const w=h==="y"?"top":"left",j=h==="y"?"bottom":"right",g=v+u[w],b=v-u[j];v=W2(g,v,b)}const x=o.fn({...t,[f]:m,[h]:v});return{...x,data:{x:x.x-n,y:x.y-s,enabled:{[f]:i,[h]:l}}}}}},cse=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:a,rects:i,middlewareData:l}=t,{offset:o=0,mainAxis:c=!0,crossAxis:d=!0}=So(e,t),u={x:n,y:s},h=Uc(a),f=YA(h);let m=u[f],v=u[h];const x=So(o,t),w=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const b=f==="y"?"height":"width",p=i.reference[f]-i.floating[b]+w.mainAxis,N=i.reference[f]+i.reference[b]-w.mainAxis;m<p?m=p:m>N&&(m=N)}if(d){var j,g;const b=f==="y"?"width":"height",p=["top","left"].includes(Co(a)),N=i.reference[h]-i.floating[b]+(p&&((j=l.offset)==null?void 0:j[h])||0)+(p?0:w.crossAxis),k=i.reference[h]+i.reference[b]+(p?0:((g=l.offset)==null?void 0:g[h])||0)-(p?w.crossAxis:0);v<N?v=N:v>k&&(v=k)}return{[f]:m,[h]:v}}}},dse=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:a,rects:i,platform:l,elements:o}=t,{apply:c=()=>{},...d}=So(e,t),u=await Kx(t,d),h=Co(a),f=Om(a),m=Uc(a)==="y",{width:v,height:x}=i.floating;let w,j;h==="top"||h==="bottom"?(w=h,j=f===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(j=h,w=f==="end"?"top":"bottom");const g=x-u.top-u.bottom,b=v-u.left-u.right,p=Lc(x-u[w],g),N=Lc(v-u[j],b),k=!t.middlewareData.shift;let C=p,_=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(_=b),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(C=g),k&&!f){const D=ua(u.left,0),E=ua(u.right,0),$=ua(u.top,0),A=ua(u.bottom,0);m?_=v-2*(D!==0||E!==0?D+E:ua(u.left,u.right)):C=x-2*($!==0||A!==0?$+A:ua(u.top,u.bottom))}await c({...t,availableWidth:_,availableHeight:C});const P=await l.getDimensions(o.floating);return v!==P.width||x!==P.height?{reset:{rects:!0}}:{}}}};function Hw(){return typeof window<"u"}function Rm(e){return EU(e)?(e.nodeName||"").toLowerCase():"#document"}function ga(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function $l(e){var t;return(t=(EU(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function EU(e){return Hw()?e instanceof Node||e instanceof ga(e).Node:!1}function $i(e){return Hw()?e instanceof Element||e instanceof ga(e).Element:!1}function El(e){return Hw()?e instanceof HTMLElement||e instanceof ga(e).HTMLElement:!1}function QR(e){return!Hw()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ga(e).ShadowRoot}function Uv(e){const{overflow:t,overflowX:n,overflowY:s,display:a}=Ii(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(a)}function use(e){return["table","td","th"].includes(Rm(e))}function Kw(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function QA(e){const t=JA(),n=$i(e)?Ii(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function hse(e){let t=Bc(e);for(;El(t)&&!If(t);){if(QA(t))return t;if(Kw(t))return null;t=Bc(t)}return null}function JA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function If(e){return["html","body","#document"].includes(Rm(e))}function Ii(e){return ga(e).getComputedStyle(e)}function Gw(e){return $i(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Bc(e){if(Rm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||QR(e)&&e.host||$l(e);return QR(t)?t.host:t}function OU(e){const t=Bc(e);return If(t)?e.ownerDocument?e.ownerDocument.body:e.body:El(t)&&Uv(t)?t:OU(t)}function Gx(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=OU(e),i=a===((s=e.ownerDocument)==null?void 0:s.body),l=ga(a);if(i){const o=K2(l);return t.concat(l,l.visualViewport||[],Uv(a)?a:[],o&&n?Gx(o):[])}return t.concat(a,Gx(a,[],n))}function K2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function RU(e){const t=Ii(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=El(e),i=a?e.offsetWidth:n,l=a?e.offsetHeight:s,o=Nb(n)!==i||Nb(s)!==l;return o&&(n=i,s=l),{width:n,height:s,$:o}}function eT(e){return $i(e)?e:e.contextElement}function Ih(e){const t=eT(e);if(!El(t))return kl(1);const n=t.getBoundingClientRect(),{width:s,height:a,$:i}=RU(t);let l=(i?Nb(n.width):n.width)/s,o=(i?Nb(n.height):n.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const fse=kl(0);function DU(e){const t=ga(e);return!JA()||!t.visualViewport?fse:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mse(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ga(e)?!1:t}function gu(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=eT(e);let l=kl(1);t&&(s?$i(s)&&(l=Ih(s)):l=Ih(e));const o=mse(i,n,s)?DU(i):kl(0);let c=(a.left+o.x)/l.x,d=(a.top+o.y)/l.y,u=a.width/l.x,h=a.height/l.y;if(i){const f=ga(i),m=s&&$i(s)?ga(s):s;let v=f,x=K2(v);for(;x&&s&&m!==v;){const w=Ih(x),j=x.getBoundingClientRect(),g=Ii(x),b=j.left+(x.clientLeft+parseFloat(g.paddingLeft))*w.x,p=j.top+(x.clientTop+parseFloat(g.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,h*=w.y,c+=b,d+=p,v=ga(x),x=K2(v)}}return Sb({width:u,height:h,x:c,y:d})}function tT(e,t){const n=Gw(e).scrollLeft;return t?t.left+n:gu($l(e)).left+n}function MU(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(n?0:tT(e,s)),i=s.top+t.scrollTop;return{x:a,y:i}}function pse(e){let{elements:t,rect:n,offsetParent:s,strategy:a}=e;const i=a==="fixed",l=$l(s),o=t?Kw(t.floating):!1;if(s===l||o&&i)return n;let c={scrollLeft:0,scrollTop:0},d=kl(1);const u=kl(0),h=El(s);if((h||!h&&!i)&&((Rm(s)!=="body"||Uv(l))&&(c=Gw(s)),El(s))){const m=gu(s);d=Ih(s),u.x=m.x+s.clientLeft,u.y=m.y+s.clientTop}const f=l&&!h&&!i?MU(l,c,!0):kl(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x+f.x,y:n.y*d.y-c.scrollTop*d.y+u.y+f.y}}function xse(e){return Array.from(e.getClientRects())}function gse(e){const t=$l(e),n=Gw(e),s=e.ownerDocument.body,a=ua(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=ua(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let l=-n.scrollLeft+tT(e);const o=-n.scrollTop;return Ii(s).direction==="rtl"&&(l+=ua(t.clientWidth,s.clientWidth)-a),{width:a,height:i,x:l,y:o}}function vse(e,t){const n=ga(e),s=$l(e),a=n.visualViewport;let i=s.clientWidth,l=s.clientHeight,o=0,c=0;if(a){i=a.width,l=a.height;const d=JA();(!d||d&&t==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:i,height:l,x:o,y:c}}function yse(e,t){const n=gu(e,!0,t==="fixed"),s=n.top+e.clientTop,a=n.left+e.clientLeft,i=El(e)?Ih(e):kl(1),l=e.clientWidth*i.x,o=e.clientHeight*i.y,c=a*i.x,d=s*i.y;return{width:l,height:o,x:c,y:d}}function JR(e,t,n){let s;if(t==="viewport")s=vse(e,n);else if(t==="document")s=gse($l(e));else if($i(t))s=yse(t,n);else{const a=DU(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Sb(s)}function $U(e,t){const n=Bc(e);return n===t||!$i(n)||If(n)?!1:Ii(n).position==="fixed"||$U(n,t)}function bse(e,t){const n=t.get(e);if(n)return n;let s=Gx(e,[],!1).filter(o=>$i(o)&&Rm(o)!=="body"),a=null;const i=Ii(e).position==="fixed";let l=i?Bc(e):e;for(;$i(l)&&!If(l);){const o=Ii(l),c=QA(l);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Uv(l)&&!c&&$U(e,l))?s=s.filter(u=>u!==l):a=o,l=Bc(l)}return t.set(e,s),s}function jse(e){let{element:t,boundary:n,rootBoundary:s,strategy:a}=e;const l=[...n==="clippingAncestors"?Kw(t)?[]:bse(t,this._c):[].concat(n),s],o=l[0],c=l.reduce((d,u)=>{const h=JR(t,u,a);return d.top=ua(h.top,d.top),d.right=Lc(h.right,d.right),d.bottom=Lc(h.bottom,d.bottom),d.left=ua(h.left,d.left),d},JR(t,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function wse(e){const{width:t,height:n}=RU(e);return{width:t,height:n}}function Nse(e,t,n){const s=El(t),a=$l(t),i=n==="fixed",l=gu(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const c=kl(0);if(s||!s&&!i)if((Rm(t)!=="body"||Uv(a))&&(o=Gw(t)),s){const f=gu(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else a&&(c.x=tT(a));const d=a&&!s&&!i?MU(a,o):kl(0),u=l.left+o.scrollLeft-c.x-d.x,h=l.top+o.scrollTop-c.y-d.y;return{x:u,y:h,width:l.width,height:l.height}}function nk(e){return Ii(e).position==="static"}function eD(e,t){if(!El(e)||Ii(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return $l(e)===n&&(n=n.ownerDocument.body),n}function IU(e,t){const n=ga(e);if(Kw(e))return n;if(!El(e)){let a=Bc(e);for(;a&&!If(a);){if($i(a)&&!nk(a))return a;a=Bc(a)}return n}let s=eD(e,t);for(;s&&use(s)&&nk(s);)s=eD(s,t);return s&&If(s)&&nk(s)&&!QA(s)?n:s||hse(e)||n}const kse=async function(e){const t=this.getOffsetParent||IU,n=this.getDimensions,s=await n(e.floating);return{reference:Nse(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Sse(e){return Ii(e).direction==="rtl"}const Cse={convertOffsetParentRelativeRectToViewportRelativeRect:pse,getDocumentElement:$l,getClippingRect:jse,getOffsetParent:IU,getElementRects:kse,getClientRects:xse,getDimensions:wse,getScale:Ih,isElement:$i,isRTL:Sse};function FU(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function _se(e,t){let n=null,s;const a=$l(e);function i(){var o;clearTimeout(s),(o=n)==null||o.disconnect(),n=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:f,height:m}=d;if(o||t(),!f||!m)return;const v=Ly(h),x=Ly(a.clientWidth-(u+f)),w=Ly(a.clientHeight-(h+m)),j=Ly(u),b={rootMargin:-v+"px "+-x+"px "+-w+"px "+-j+"px",threshold:ua(0,Lc(1,c))||1};let p=!0;function N(k){const C=k[0].intersectionRatio;if(C!==c){if(!p)return l();C?l(!1,C):s=setTimeout(()=>{l(!1,1e-7)},1e3)}C===1&&!FU(d,e.getBoundingClientRect())&&l(),p=!1}try{n=new IntersectionObserver(N,{...b,root:a.ownerDocument})}catch{n=new IntersectionObserver(N,b)}n.observe(e)}return l(!0),i}function Pse(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=eT(e),u=a||i?[...d?Gx(d):[],...Gx(t)]:[];u.forEach(j=>{a&&j.addEventListener("scroll",n,{passive:!0}),i&&j.addEventListener("resize",n)});const h=d&&o?_se(d,n):null;let f=-1,m=null;l&&(m=new ResizeObserver(j=>{let[g]=j;g&&g.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(t)})),n()}),d&&!c&&m.observe(d),m.observe(t));let v,x=c?gu(e):null;c&&w();function w(){const j=gu(e);x&&!FU(x,j)&&n(),x=j,v=requestAnimationFrame(w)}return n(),()=>{var j;u.forEach(g=>{a&&g.removeEventListener("scroll",n),i&&g.removeEventListener("resize",n)}),h==null||h(),(j=m)==null||j.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const Ase=lse,Tse=ose,Ese=sse,Ose=dse,Rse=ase,tD=nse,Dse=cse,Mse=(e,t,n)=>{const s=new Map,a={platform:Cse,...n},i={...a.platform,_c:s};return rse(e,t,{...a,platform:i})};var D0=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Cb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Cb(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=n;s--!==0;){const i=a[s];if(!(i==="_owner"&&e.$$typeof)&&!Cb(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function LU(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function rD(e,t){const n=LU(e);return Math.round(t*n)/n}function sk(e){const t=y.useRef(e);return D0(()=>{t.current=e}),t}function $se(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:d}=e,[u,h]=y.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=y.useState(s);Cb(f,s)||m(s);const[v,x]=y.useState(null),[w,j]=y.useState(null),g=y.useCallback(R=>{R!==k.current&&(k.current=R,x(R))},[]),b=y.useCallback(R=>{R!==C.current&&(C.current=R,j(R))},[]),p=i||v,N=l||w,k=y.useRef(null),C=y.useRef(null),_=y.useRef(u),P=c!=null,D=sk(c),E=sk(a),$=sk(d),A=y.useCallback(()=>{if(!k.current||!C.current)return;const R={placement:t,strategy:n,middleware:f};E.current&&(R.platform=E.current),Mse(k.current,C.current,R).then(I=>{const Q={...I,isPositioned:$.current!==!1};T.current&&!Cb(_.current,Q)&&(_.current=Q,Fa.flushSync(()=>{h(Q)}))})},[f,t,n,E,$]);D0(()=>{d===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(R=>({...R,isPositioned:!1})))},[d]);const T=y.useRef(!1);D0(()=>(T.current=!0,()=>{T.current=!1}),[]),D0(()=>{if(p&&(k.current=p),N&&(C.current=N),p&&N){if(D.current)return D.current(p,N,A);A()}},[p,N,A,D,P]);const O=y.useMemo(()=>({reference:k,floating:C,setReference:g,setFloating:b}),[g,b]),z=y.useMemo(()=>({reference:p,floating:N}),[p,N]),F=y.useMemo(()=>{const R={position:n,left:0,top:0};if(!z.floating)return R;const I=rD(z.floating,u.x),Q=rD(z.floating,u.y);return o?{...R,transform:"translate("+I+"px, "+Q+"px)",...LU(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:I,top:Q}},[n,o,z.floating,u.x,u.y]);return y.useMemo(()=>({...u,update:A,refs:O,elements:z,floatingStyles:F}),[u,A,O,z,F])}const Ise=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:a}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?tD({element:s.current,padding:a}).fn(n):{}:s?tD({element:s,padding:a}).fn(n):{}}}},Fse=(e,t)=>({...Ase(e),options:[e,t]}),Lse=(e,t)=>({...Tse(e),options:[e,t]}),Use=(e,t)=>({...Dse(e),options:[e,t]}),Bse=(e,t)=>({...Ese(e),options:[e,t]}),zse=(e,t)=>({...Ose(e),options:[e,t]}),Vse=(e,t)=>({...Rse(e),options:[e,t]}),qse=(e,t)=>({...Ise(e),options:[e,t]});var Wse="Arrow",UU=y.forwardRef((e,t)=>{const{children:n,width:s=10,height:a=5,...i}=e;return r.jsx(Ze.svg,{...i,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});UU.displayName=Wse;var Hse=UU;function Yw(e){const[t,n]=y.useState(void 0);return pn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,o=d.blockSize}else l=e.offsetWidth,o=e.offsetHeight;n({width:l,height:o})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var rT="Popper",[BU,ed]=Bn(rT),[Kse,zU]=BU(rT),VU=e=>{const{__scopePopper:t,children:n}=e,[s,a]=y.useState(null);return r.jsx(Kse,{scope:t,anchor:s,onAnchorChange:a,children:n})};VU.displayName=rT;var qU="PopperAnchor",WU=y.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...a}=e,i=zU(qU,n),l=y.useRef(null),o=St(t,l);return y.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||l.current)}),s?null:r.jsx(Ze.div,{...a,ref:o})});WU.displayName=qU;var nT="PopperContent",[Gse,Yse]=BU(nT),HU=y.forwardRef((e,t)=>{var pe,Me,xe,ce,Ie,ie;const{__scopePopper:n,side:s="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:v,...x}=e,w=zU(nT,n),[j,g]=y.useState(null),b=St(t,st=>g(st)),[p,N]=y.useState(null),k=Yw(p),C=(k==null?void 0:k.width)??0,_=(k==null?void 0:k.height)??0,P=s+(i!=="center"?"-"+i:""),D=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},E=Array.isArray(d)?d:[d],$=E.length>0,A={padding:D,boundary:E.filter(Zse),altBoundary:$},{refs:T,floatingStyles:O,placement:z,isPositioned:F,middlewareData:R}=$se({strategy:"fixed",placement:P,whileElementsMounted:(...st)=>Pse(...st,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[Fse({mainAxis:a+_,alignmentAxis:l}),c&&Lse({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Use():void 0,...A}),c&&Bse({...A}),zse({...A,apply:({elements:st,rects:G,availableWidth:De,availableHeight:me})=>{const{width:Be,height:qe}=G.reference,Qe=st.floating.style;Qe.setProperty("--radix-popper-available-width",`${De}px`),Qe.setProperty("--radix-popper-available-height",`${me}px`),Qe.setProperty("--radix-popper-anchor-width",`${Be}px`),Qe.setProperty("--radix-popper-anchor-height",`${qe}px`)}}),p&&qse({element:p,padding:o}),Qse({arrowWidth:C,arrowHeight:_}),f&&Vse({strategy:"referenceHidden",...A})]}),[I,Q]=YU(z),Y=Br(v);pn(()=>{F&&(Y==null||Y())},[F,Y]);const K=(pe=R.arrow)==null?void 0:pe.x,oe=(Me=R.arrow)==null?void 0:Me.y,ge=((xe=R.arrow)==null?void 0:xe.centerOffset)!==0,[Ne,Oe]=y.useState();return pn(()=>{j&&Oe(window.getComputedStyle(j).zIndex)},[j]),r.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:F?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[(ce=R.transformOrigin)==null?void 0:ce.x,(Ie=R.transformOrigin)==null?void 0:Ie.y].join(" "),...((ie=R.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(Gse,{scope:n,placedSide:I,onArrowChange:N,arrowX:K,arrowY:oe,shouldHideArrow:ge,children:r.jsx(Ze.div,{"data-side":I,"data-align":Q,...x,ref:b,style:{...x.style,animation:F?void 0:"none"}})})})});HU.displayName=nT;var KU="PopperArrow",Xse={top:"bottom",right:"left",bottom:"top",left:"right"},GU=y.forwardRef(function(t,n){const{__scopePopper:s,...a}=t,i=Yse(KU,s),l=Xse[i.placedSide];return r.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:r.jsx(Hse,{...a,ref:n,style:{...a.style,display:"block"}})})});GU.displayName=KU;function Zse(e){return e!==null}var Qse=e=>({name:"transformOrigin",options:e,fn(t){var w,j,g;const{placement:n,rects:s,middlewareData:a}=t,l=((w=a.arrow)==null?void 0:w.centerOffset)!==0,o=l?0:e.arrowWidth,c=l?0:e.arrowHeight,[d,u]=YU(n),h={start:"0%",center:"50%",end:"100%"}[u],f=(((j=a.arrow)==null?void 0:j.x)??0)+o/2,m=(((g=a.arrow)==null?void 0:g.y)??0)+c/2;let v="",x="";return d==="bottom"?(v=l?h:`${f}px`,x=`${-c}px`):d==="top"?(v=l?h:`${f}px`,x=`${s.floating.height+c}px`):d==="right"?(v=`${-c}px`,x=l?h:`${m}px`):d==="left"&&(v=`${s.floating.width+c}px`,x=l?h:`${m}px`),{data:{x:v,y:x}}}});function YU(e){const[t,n="center"]=e.split("-");return[t,n]}var sT=VU,Bv=WU,Xw=HU,Zw=GU,[Qw,qqe]=Bn("Tooltip",[ed]),aT=ed(),XU="TooltipProvider",Jse=700,nD="tooltip.open",[eae,ZU]=Qw(XU),QU=e=>{const{__scopeTooltip:t,delayDuration:n=Jse,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:i}=e,l=y.useRef(!0),o=y.useRef(!1),c=y.useRef(0);return y.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(eae,{scope:t,isOpenDelayedRef:l,delayDuration:n,onOpen:y.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,s)},[s]),isPointerInTransitRef:o,onPointerInTransitChange:y.useCallback(d=>{o.current=d},[]),disableHoverableContent:a,children:i})};QU.displayName=XU;var JU="Tooltip",[Wqe,Jw]=Qw(JU),G2="TooltipTrigger",tae=y.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=Jw(G2,n),i=ZU(G2,n),l=aT(n),o=y.useRef(null),c=St(t,o,a.onTriggerChange),d=y.useRef(!1),u=y.useRef(!1),h=y.useCallback(()=>d.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(Bv,{asChild:!0,...l,children:r.jsx(Ze.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:Le(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:Le(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:Le(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Le(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:Le(e.onBlur,a.onClose),onClick:Le(e.onClick,a.onClose)})})});tae.displayName=G2;var rae="TooltipPortal",[Hqe,nae]=Qw(rae,{forceMount:void 0}),Ff="TooltipContent",e9=y.forwardRef((e,t)=>{const n=nae(Ff,e.__scopeTooltip),{forceMount:s=n.forceMount,side:a="top",...i}=e,l=Jw(Ff,e.__scopeTooltip);return r.jsx(zn,{present:s||l.open,children:l.disableHoverableContent?r.jsx(t9,{side:a,...i,ref:t}):r.jsx(sae,{side:a,...i,ref:t})})}),sae=y.forwardRef((e,t)=>{const n=Jw(Ff,e.__scopeTooltip),s=ZU(Ff,e.__scopeTooltip),a=y.useRef(null),i=St(t,a),[l,o]=y.useState(null),{trigger:c,onClose:d}=n,u=a.current,{onPointerInTransitChange:h}=s,f=y.useCallback(()=>{o(null),h(!1)},[h]),m=y.useCallback((v,x)=>{const w=v.currentTarget,j={x:v.clientX,y:v.clientY},g=cae(j,w.getBoundingClientRect()),b=dae(j,g),p=uae(x.getBoundingClientRect()),N=fae([...b,...p]);o(N),h(!0)},[h]);return y.useEffect(()=>()=>f(),[f]),y.useEffect(()=>{if(c&&u){const v=w=>m(w,u),x=w=>m(w,c);return c.addEventListener("pointerleave",v),u.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",x)}}},[c,u,m,f]),y.useEffect(()=>{if(l){const v=x=>{const w=x.target,j={x:x.clientX,y:x.clientY},g=(c==null?void 0:c.contains(w))||(u==null?void 0:u.contains(w)),b=!hae(j,l);g?f():b&&(f(),d())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,u,l,d,f]),r.jsx(t9,{...e,ref:i})}),[aae,iae]=Qw(JU,{isInside:!1}),lae=H8("TooltipContent"),t9=y.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=e,c=Jw(Ff,n),d=aT(n),{onClose:u}=c;return y.useEffect(()=>(document.addEventListener(nD,u),()=>document.removeEventListener(nD,u)),[u]),y.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),r.jsx($u,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:r.jsxs(Xw,{"data-state":c.stateAttribute,...d,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(lae,{children:s}),r.jsx(aae,{scope:n,isInside:!0,children:r.jsx(ere,{id:c.contentId,role:"tooltip",children:a||s})})]})})});e9.displayName=Ff;var r9="TooltipArrow",oae=y.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=aT(n);return iae(r9,n).isInside?null:r.jsx(Zw,{...a,...s,ref:t})});oae.displayName=r9;function cae(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,s,a,i)){case i:return"left";case a:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function dae(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function uae(e){const{top:t,right:n,bottom:s,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:s},{x:a,y:s}]}function hae(e,t){const{x:n,y:s}=e;let a=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const o=t[i].x,c=t[i].y,d=t[l].x,u=t[l].y;c>s!=u>s&&n<(d-o)*(s-c)/(u-c)+o&&(a=!a)}return a}function fae(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),mae(t)}function mae(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const i=t[t.length-1],l=t[t.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;n.length>=2;){const i=n[n.length-1],l=n[n.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var pae=QU,n9=e9;const xae=pae,gae=y.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(n9,{ref:s,sideOffset:t,className:Ae("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));gae.displayName=n9.displayName;const FE=class FE{static getToken(){return localStorage.getItem(this.TOKEN_KEY)}static setToken(t){localStorage.setItem(this.TOKEN_KEY,t)}static removeToken(){localStorage.removeItem(this.TOKEN_KEY)}static async login(t){const s=await(await Te("/api/auth/login","POST",t)).json();return this.setToken(s.token),s}static async register(t){const s=await(await Te("/api/auth/register","POST",t)).json();return this.setToken(s.token),s}static async getCurrentUser(){const t=this.getToken();if(!t)throw new Error("No authentication token found");const n=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw n.status===401?(this.removeToken(),new Error("Authentication expired")):new Error("Failed to fetch user data");return n.json()}static logout(){this.removeToken()}static isAuthenticated(){return!!this.getToken()}static async refreshToken(){try{const t=await this.getCurrentUser();return this.getToken()}catch{return this.removeToken(),null}}static getAuthHeaders(){const t=this.getToken();if(!t)throw new Error("No authentication token available");return{Authorization:`Bearer ${t}`}}};FE.TOKEN_KEY="auth_token";let sD=FE;function s9(e){try{const t=e.split(".")[1];if(!t)return null;const n=t.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(n).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(s)}catch(t){return console.error("Failed to decode JWT:",t),null}}function a9(e){const t=s9(e);if(!t)return!0;const n=Math.floor(Date.now()/1e3);return t.exp<n}function i9(e){const t=s9(e);return t?{id:t.id,username:t.username,email:"",role:t.role,advertiserId:t.advertiserId,isActive:!0,createdAt:""}:null}function vae(e){switch(e){case"super_admin":return"/admin";case"affiliate":return"/affiliate";case"advertiser":return"/advertiser";default:return"/dashboard"}}const yae="";async function bae(e,t){const n=new Headers(t==null?void 0:t.headers);if(n.set("Content-Type","application/json"),!(t!=null&&t.skipAuth)){const i=localStorage.getItem("token");i&&n.set("Authorization",`Bearer ${i}`)}const s=await fetch(`${yae}${e}`,{...t,headers:n,credentials:"include"});if(!s.ok)throw new Error(`HTTP ${s.status}`);return(s.headers.get("content-type")||"").includes("application/json")?await s.json():{}}async function jae(e,t){var a;const n=[{username:e,password:t},{email:e,password:t},{email:wae(e),password:Nae(e)}];let s=null;for(const i of n)try{console.log("🔐 Trying auth method:",Object.keys(i));const l=await bae("/api/auth/login",{method:"POST",skipAuth:!0,body:JSON.stringify(i)}),o=(l==null?void 0:l.token)??((a=l==null?void 0:l.data)==null?void 0:a.token);if(!o)throw new Error("No token received from server");if(a9(o))throw new Error("Received expired token");localStorage.setItem("token",o);let c=l.user;if(c)console.log("✅ Received user data from server:",c.username,"Role:",c.role);else{if(c=i9(o),!c)throw new Error("Unable to extract user information from token");console.log("✅ Extracted user from token:",c.username,"Role:",c.role)}return{token:o,user:c}}catch(l){console.log("❌ Auth method failed:",l.message),s=l;continue}throw s||new Error("All authentication methods failed")}function wae(e){return{owner:"9791207@gmail.com",superadmin:"9791207@gmail.com",advertiser:"12345@gmail.com",advertiser1:"12345@gmail.com",partner:"4321@gmail.com",test_affiliate:"4321@gmail.com"}[e]||e}function Nae(e){return{owner:"owner123",superadmin:"owner123",advertiser:"adv123",advertiser1:"adv123",partner:"partner123",test_affiliate:"partner123"}[e]||"password123"}const l9=y.createContext(void 0);function o9({children:e}){const[t,n]=y.useState(null),[s,a]=y.useState(null),[i,l]=y.useState(!0);y.useEffect(()=>{(()=>{try{const h=localStorage.getItem("token");if(h&&!a9(h)){const f=i9(h);f?(a(h),n(f),console.log("🔄 Restored auth state from localStorage for user:",f.username)):(localStorage.removeItem("token"),console.log("❌ Invalid token found in localStorage, cleared"))}else h&&(localStorage.removeItem("token"),console.log("❌ Expired token found in localStorage, cleared"))}catch(h){console.error("❌ Error initializing auth state:",h),localStorage.removeItem("token")}finally{l(!1)}})()},[]);const o=y.useCallback(async(u,h)=>{try{l(!0),console.log("🔐 Attempting login for user:",u);const f=await jae(u,h);if(!f.token)throw new Error("No token received from server");n(f.user),a(f.token),localStorage.setItem("token",f.token),console.log("✅ Login successful for user:",f.user.username,"Role:",f.user.role)}catch(f){throw console.error("❌ Login failed:",f),n(null),a(null),localStorage.removeItem("token"),f}finally{l(!1)}},[]),c=y.useCallback(()=>{console.log("🔐 Logging out user"),n(null),a(null),localStorage.removeItem("token")},[]),d=y.useMemo(()=>({user:t,token:s,loading:i,login:o,logout:c}),[t,s,i,o,c]);return r.jsx(l9.Provider,{value:d,children:e})}function Jt(){const e=y.useContext(l9);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const c9=y.createContext(void 0);function kae({children:e}){const[t,n]=y.useState(!1);y.useEffect(()=>{if(typeof window<"u"){const i=localStorage.getItem("sidebar-collapsed");i&&n(JSON.parse(i))}},[]),y.useEffect(()=>{typeof window<"u"&&localStorage.setItem("sidebar-collapsed",JSON.stringify(t))},[t]);const s=()=>n(!t),a=t?64:256;return r.jsx(c9.Provider,{value:{collapsed:t,toggleCollapsed:s,setCollapsed:n,sidebarWidth:a},children:e})}function Os(){const e=y.useContext(c9);if(e===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return e}const Sae={theme:"light",setTheme:()=>null},d9=y.createContext(Sae);function u9({children:e,defaultTheme:t="light",storageKey:n="vite-ui-theme",...s}){const[a,i]=y.useState(()=>(localStorage.removeItem(n),localStorage.setItem(n,"light"),"light"));y.useEffect(()=>{const o=window.document.documentElement;if(o.classList.remove("light","dark"),a==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";o.classList.add(c);return}o.classList.add(a)},[a]);const l={theme:a,setTheme:o=>{localStorage.setItem(n,o),i(o)}};return r.jsx(d9.Provider,{...s,value:l,children:e})}const h9=()=>{const e=y.useContext(d9);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},Cae={success:nr,error:zt,info:B2,warning:ma},_ae={success:"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-700 text-green-800 dark:text-green-200",error:"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-700 text-red-800 dark:text-red-200",info:"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-200",warning:"bg-yellow-50 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-200"},Pae={success:"text-green-500 dark:text-green-400",error:"text-red-500 dark:text-red-400",info:"text-blue-500 dark:text-blue-400",warning:"text-yellow-500 dark:text-yellow-400"};function Aae({notification:e,onClose:t}){const[n,s]=y.useState(!1),[a,i]=y.useState(!1),l=Cae[e.type];y.useEffect(()=>{const c=setTimeout(()=>s(!0),100);if(e.duration&&e.duration>0){const d=setTimeout(()=>{o()},e.duration);return()=>{clearTimeout(c),clearTimeout(d)}}return()=>clearTimeout(c)},[e.duration]);const o=()=>{i(!0),setTimeout(()=>{t(e.id)},300)};return r.jsx("div",{className:`
        fixed bottom-4 right-4 z-50 max-w-sm w-full
        transform transition-all duration-300 ease-out
        ${n&&!a?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
      `,style:{marginBottom:"calc(var(--toast-index, 0) * 80px)"},children:r.jsx("div",{className:`
        rounded-lg border shadow-lg p-4 ${_ae[e.type]}
        dark:bg-gray-800 dark:border-gray-700 dark:text-white
      `,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(l,{className:`h-5 w-5 ${Pae[e.type]}`})}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("h4",{className:"font-semibold text-sm",children:e.title}),r.jsx("p",{className:"text-sm mt-1 opacity-90",children:e.message}),e.action&&r.jsx("button",{onClick:e.action.onClick,className:"mt-2 text-xs font-medium underline hover:no-underline",children:e.action.label})]}),r.jsx("button",{onClick:o,className:"flex-shrink-0 ml-2 p-1 hover:bg-black/10 rounded",title:"Закрыть уведомление",children:r.jsx(Tn,{className:"h-4 w-4"})})]})})})}const Tae=Z.createContext(void 0);function Eae({children:e}){const[t,n]=y.useState([]),s=l=>{const o=Math.random().toString(36).substr(2,9),c={...l,id:o,duration:l.duration??5e3};n(d=>[...d,c])},a=l=>{n(o=>o.filter(c=>c.id!==l))},i=()=>{n([])};return r.jsxs(Tae.Provider,{value:{notifications:t,showNotification:s,removeNotification:a,clearAll:i},children:[e,r.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map((l,o)=>r.jsx("div",{style:{"--toast-index":o},children:r.jsx(Aae,{notification:l,onClose:a})},l.id))})]})}const Yx=$v("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),M=y.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...a},i)=>{const l=s?q8:"button";return r.jsx(l,{className:Ae(Yx({variant:t,size:n,className:e})),ref:i,...a})});M.displayName="Button";const W=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ae("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));W.displayName="Card";const se=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ae("flex flex-col space-y-1.5 p-6",e),...t}));se.displayName="CardHeader";const ae=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ae("text-2xl font-semibold leading-none tracking-tight",e),...t}));ae.displayName="CardTitle";const Je=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ae("text-sm text-muted-foreground",e),...t}));Je.displayName="CardDescription";const H=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ae("p-6 pt-0",e),...t}));H.displayName="CardContent";const Oae=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ae("flex items-center p-6 pt-0",e),...t}));Oae.displayName="CardFooter";const Rae=$v("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function le({className:e,variant:t,...n}){return r.jsx("div",{className:Ae(Rae({variant:t}),e),...n})}function At(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Gs(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Gn(e,t){const n=At(e);return isNaN(t)?Gs(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Fi(e,t){const n=At(e);if(isNaN(t))return Gs(e,NaN);if(!t)return n;const s=n.getDate(),a=Gs(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const i=a.getDate();return s>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}const iT=6048e5,Dae=864e5,Uy=43200,aD=1440;let Mae={};function Dm(){return Mae}function Wa(e,t){var o,c,d,u;const n=Dm(),s=(t==null?void 0:t.weekStartsOn)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=At(e),i=a.getDay(),l=(i<s?7:0)+i-s;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function vu(e){return Wa(e,{weekStartsOn:1})}function f9(e){const t=At(e),n=t.getFullYear(),s=Gs(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=vu(s),i=Gs(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=vu(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}function Lf(e){const t=At(e);return t.setHours(0,0,0,0),t}function Uf(e){const t=At(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function xl(e,t){const n=Lf(e),s=Lf(t),a=+n-Uf(n),i=+s-Uf(s);return Math.round((a-i)/Dae)}function $ae(e){const t=f9(e),n=Gs(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),vu(n)}function Y2(e,t){const n=t*7;return Gn(e,n)}function Iae(e,t){return Fi(e,t*12)}function Fae(e){let t;return e.forEach(function(n){const s=At(n);(t===void 0||t<s||isNaN(Number(s)))&&(t=s)}),t||new Date(NaN)}function Lae(e){let t;return e.forEach(n=>{const s=At(n);(!t||t>s||isNaN(+s))&&(t=s)}),t||new Date(NaN)}function M0(e,t){const n=At(e),s=At(t),a=n.getTime()-s.getTime();return a<0?-1:a>0?1:a}function Uae(e){return Gs(e,Date.now())}function Us(e,t){const n=Lf(e),s=Lf(t);return+n==+s}function lT(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Bae(e){if(!lT(e)&&typeof e!="number")return!1;const t=At(e);return!isNaN(Number(t))}function Bf(e,t){const n=At(e),s=At(t),a=n.getFullYear()-s.getFullYear(),i=n.getMonth()-s.getMonth();return a*12+i}function zae(e,t,n){const s=Wa(e,n),a=Wa(t,n),i=+s-Uf(s),l=+a-Uf(a);return Math.round((i-l)/iT)}function Vae(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function qae(e,t){return+At(e)-+At(t)}function Wae(e){const t=At(e);return t.setHours(23,59,59,999),t}function e1(e){const t=At(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Hae(e){const t=At(e);return+Wae(t)==+e1(t)}function Kae(e,t){const n=At(e),s=At(t),a=M0(n,s),i=Math.abs(Bf(n,s));let l;if(i<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*i);let o=M0(n,s)===-a;Hae(At(e))&&i===1&&M0(e,s)===1&&(o=!1),l=a*(i-Number(o))}return l===0?0:l}function Gae(e,t,n){const s=qae(e,t)/1e3;return Vae(n==null?void 0:n.roundingMethod)(s)}function Ws(e){const t=At(e);return t.setDate(1),t.setHours(0,0,0,0),t}function m9(e){const t=At(e),n=Gs(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function oT(e,t){var o,c,d,u;const n=Dm(),s=(t==null?void 0:t.weekStartsOn)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=At(e),i=a.getDay(),l=(i<s?-7:0)+6-(i-s);return a.setDate(a.getDate()+l),a.setHours(23,59,59,999),a}function p9(e){return oT(e,{weekStartsOn:1})}const Yae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xae=(e,t,n)=>{let s;const a=Yae[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Fh(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Zae={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Qae={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Jae={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},eie={date:Fh({formats:Zae,defaultWidth:"full"}),time:Fh({formats:Qae,defaultWidth:"full"}),dateTime:Fh({formats:Jae,defaultWidth:"full"})},tie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rie=(e,t,n,s)=>tie[e];function dl(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):l;a=e.formattingValues[o]||e.formattingValues[l]}else{const l=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[o]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const nie={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sie={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},iie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},oie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cie=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},die={ordinalNumber:cie,era:dl({values:nie,defaultWidth:"wide"}),quarter:dl({values:sie,defaultWidth:"wide",argumentCallback:e=>e-1}),month:dl({values:aie,defaultWidth:"wide"}),day:dl({values:iie,defaultWidth:"wide"}),dayPeriod:dl({values:lie,defaultWidth:"wide",formattingValues:oie,defaultFormattingWidth:"wide"})};function ul(e){return(t,n={})=>{const s=n.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const l=i[0],o=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?hie(o,h=>h.test(l)):uie(o,h=>h.test(l));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(l.length);return{value:d,rest:u}}}function uie(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function hie(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function x9(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=n.valueCallback?n.valueCallback(l):l;const o=t.slice(a.length);return{value:l,rest:o}}}const fie=/^(\d+)(th|st|nd|rd)?/i,mie=/\d+/i,pie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xie={any:[/^b/i,/^(a|c)/i]},gie={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vie={any:[/1/i,/2/i,/3/i,/4/i]},yie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Nie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Sie={ordinalNumber:x9({matchPattern:fie,parsePattern:mie,valueCallback:e=>parseInt(e,10)}),era:ul({matchPatterns:pie,defaultMatchWidth:"wide",parsePatterns:xie,defaultParseWidth:"any"}),quarter:ul({matchPatterns:gie,defaultMatchWidth:"wide",parsePatterns:vie,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ul({matchPatterns:yie,defaultMatchWidth:"wide",parsePatterns:bie,defaultParseWidth:"any"}),day:ul({matchPatterns:jie,defaultMatchWidth:"wide",parsePatterns:wie,defaultParseWidth:"any"}),dayPeriod:ul({matchPatterns:Nie,defaultMatchWidth:"any",parsePatterns:kie,defaultParseWidth:"any"})},t1={code:"en-US",formatDistance:Xae,formatLong:eie,formatRelative:rie,localize:die,match:Sie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Cie(e){const t=At(e);return xl(t,m9(t))+1}function g9(e){const t=At(e),n=+vu(t)-+$ae(t);return Math.round(n/iT)+1}function v9(e,t){var u,h,f,m;const n=At(e),s=n.getFullYear(),a=Dm(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(f=a.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,l=Gs(e,0);l.setFullYear(s+1,0,i),l.setHours(0,0,0,0);const o=Wa(l,t),c=Gs(e,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const d=Wa(c,t);return n.getTime()>=o.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function _ie(e,t){var o,c,d,u;const n=Dm(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=v9(e,t),i=Gs(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),Wa(i,t)}function y9(e,t){const n=At(e),s=+Wa(n,t)-+_ie(n,t);return Math.round(s/iT)+1}function br(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const Wo={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return br(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):br(n+1,2)},d(e,t){return br(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return br(e.getHours()%12||12,t.length)},H(e,t){return br(e.getHours(),t.length)},m(e,t){return br(e.getMinutes(),t.length)},s(e,t){return br(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,n-3));return br(a,t.length)}},Xu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},iD={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return n.ordinalNumber(a,{unit:"year"})}return Wo.y(e,t)},Y:function(e,t,n,s){const a=v9(e,s),i=a>0?a:1-a;if(t==="YY"){const l=i%100;return br(l,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):br(i,t.length)},R:function(e,t){const n=f9(e);return br(n,t.length)},u:function(e,t){const n=e.getFullYear();return br(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return br(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return br(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return Wo.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return br(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const a=y9(e,s);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):br(a,t.length)},I:function(e,t,n){const s=g9(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):br(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Wo.d(e,t)},D:function(e,t,n){const s=Cie(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):br(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return br(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return br(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return br(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let a;switch(s===12?a=Xu.noon:s===0?a=Xu.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let a;switch(s>=17?a=Xu.evening:s>=12?a=Xu.afternoon:s>=4?a=Xu.morning:a=Xu.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Wo.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Wo.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):br(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):br(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Wo.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Wo.s(e,t)},S:function(e,t){return Wo.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return oD(s);case"XXXX":case"XX":return gd(s);case"XXXXX":case"XXX":default:return gd(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return oD(s);case"xxxx":case"xx":return gd(s);case"xxxxx":case"xxx":default:return gd(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+lD(s,":");case"OOOO":default:return"GMT"+gd(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+lD(s,":");case"zzzz":default:return"GMT"+gd(s,":")}},t:function(e,t,n){const s=Math.trunc(e.getTime()/1e3);return br(s,t.length)},T:function(e,t,n){const s=e.getTime();return br(s,t.length)}};function lD(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?n+String(a):n+String(a)+t+br(i,2)}function oD(e,t){return e%60===0?(e>0?"-":"+")+br(Math.abs(e)/60,2):gd(e,t)}function gd(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=br(Math.trunc(s/60),2),i=br(s%60,2);return n+a+t+i}const cD=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},b9=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Pie=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return cD(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",cD(s,t)).replace("{{time}}",b9(a,t))},Aie={p:b9,P:Pie},Tie=/^D+$/,Eie=/^Y+$/,Oie=["D","DD","YY","YYYY"];function Rie(e){return Tie.test(e)}function Die(e){return Eie.test(e)}function Mie(e,t,n){const s=$ie(e,t,n);if(console.warn(s),Oie.includes(e))throw new RangeError(s)}function $ie(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Iie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lie=/^'([^]*?)'?$/,Uie=/''/g,Bie=/[a-zA-Z]/;function Xt(e,t,n){var u,h,f,m,v,x,w,j;const s=Dm(),a=(n==null?void 0:n.locale)??s.locale??t1,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((x=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??s.weekStartsOn??((j=(w=s.locale)==null?void 0:w.options)==null?void 0:j.weekStartsOn)??0,o=At(e);if(!Bae(o))throw new RangeError("Invalid time value");let c=t.match(Fie).map(g=>{const b=g[0];if(b==="p"||b==="P"){const p=Aie[b];return p(g,a.formatLong)}return g}).join("").match(Iie).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const b=g[0];if(b==="'")return{isToken:!1,value:zie(g)};if(iD[b])return{isToken:!0,value:g};if(b.match(Bie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:g}});a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const d={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return c.map(g=>{if(!g.isToken)return g.value;const b=g.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Die(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Rie(b))&&Mie(b,t,String(e));const p=iD[b[0]];return p(o,b,a.localize,d)}).join("")}function zie(e){const t=e.match(Lie);return t?t[1].replace(Uie,"'"):e}function Vie(e,t,n){const s=Dm(),a=(n==null?void 0:n.locale)??s.locale??t1,i=2520,l=M0(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l});let c,d;l>0?(c=At(t),d=At(e)):(c=At(e),d=At(t));const u=Gae(d,c),h=(Uf(d)-Uf(c))/1e3,f=Math.round((u-h)/60);let m;if(f<2)return n!=null&&n.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,o):u<10?a.formatDistance("lessThanXSeconds",10,o):u<20?a.formatDistance("lessThanXSeconds",20,o):u<40?a.formatDistance("halfAMinute",0,o):u<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):f===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",f,o);if(f<45)return a.formatDistance("xMinutes",f,o);if(f<90)return a.formatDistance("aboutXHours",1,o);if(f<aD){const v=Math.round(f/60);return a.formatDistance("aboutXHours",v,o)}else{if(f<i)return a.formatDistance("xDays",1,o);if(f<Uy){const v=Math.round(f/aD);return a.formatDistance("xDays",v,o)}else if(f<Uy*2)return m=Math.round(f/Uy),a.formatDistance("aboutXMonths",m,o)}if(m=Kae(d,c),m<12){const v=Math.round(f/Uy);return a.formatDistance("xMonths",v,o)}else{const v=m%12,x=Math.trunc(m/12);return v<3?a.formatDistance("aboutXYears",x,o):v<9?a.formatDistance("overXYears",x,o):a.formatDistance("almostXYears",x+1,o)}}function Xx(e,t){return Vie(e,Uae(e),t)}function qie(e){const t=At(e),n=t.getFullYear(),s=t.getMonth(),a=Gs(e,0);return a.setFullYear(n,s+1,0),a.setHours(0,0,0,0),a.getDate()}function Wie(e){return Math.trunc(+At(e)/1e3)}function Hie(e){const t=At(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function Kie(e,t){return zae(Hie(e),Ws(e),t)+1}function X2(e,t){const n=At(e),s=At(t);return n.getTime()>s.getTime()}function j9(e,t){const n=At(e),s=At(t);return+n<+s}function dD(e,t,n){const s=Wa(e,n),a=Wa(t,n);return+s==+a}function cT(e,t){const n=At(e),s=At(t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function Gie(e,t){const n=At(e),s=At(t);return n.getFullYear()===s.getFullYear()}function hl(e,t){return Gn(e,-t)}function ak(e,t){const n=At(e),s=n.getFullYear(),a=n.getDate(),i=Gs(e,0);i.setFullYear(s,t,15),i.setHours(0,0,0,0);const l=qie(i);return n.setMonth(t,Math.min(a,l)),n}function uD(e,t){const n=At(e);return isNaN(+n)?Gs(e,NaN):(n.setFullYear(t),n)}function vp(e,t){if(e.one!==void 0&&t===1)return e.one;const n=t%10,s=t%100;return n===1&&s!==11?e.singularNominative.replace("{{count}}",String(t)):n>=2&&n<=4&&(s<10||s>20)?e.singularGenitive.replace("{{count}}",String(t)):e.pluralGenitive.replace("{{count}}",String(t))}function fs(e){return(t,n)=>n!=null&&n.addSuffix?n.comparison&&n.comparison>0?e.future?vp(e.future,t):"через "+vp(e.regular,t):e.past?vp(e.past,t):vp(e.regular,t)+" назад":vp(e.regular,t)}const Yie={lessThanXSeconds:fs({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:fs({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(e,t)=>t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:fs({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:fs({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:fs({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:fs({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:fs({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:fs({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:fs({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:fs({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:fs({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:fs({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:fs({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:fs({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:fs({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},Xie=(e,t,n)=>Yie[e](t,n),Zie={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},Qie={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},Jie={any:"{{date}}, {{time}}"},ele={date:Fh({formats:Zie,defaultWidth:"full"}),time:Fh({formats:Qie,defaultWidth:"full"}),dateTime:Fh({formats:Jie,defaultWidth:"any"})},dT=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function tle(e){const t=dT[e];switch(e){case 0:return"'в прошлое "+t+" в' p";case 1:case 2:case 4:return"'в прошлый "+t+" в' p";case 3:case 5:case 6:return"'в прошлую "+t+" в' p"}}function hD(e){const t=dT[e];return e===2?"'во "+t+" в' p":"'в "+t+" в' p"}function rle(e){const t=dT[e];switch(e){case 0:return"'в следующее "+t+" в' p";case 1:case 2:case 4:return"'в следующий "+t+" в' p";case 3:case 5:case 6:return"'в следующую "+t+" в' p"}}const nle={lastWeek:(e,t,n)=>{const s=e.getDay();return dD(e,t,n)?hD(s):tle(s)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(e,t,n)=>{const s=e.getDay();return dD(e,t,n)?hD(s):rle(s)},other:"P"},sle=(e,t,n,s)=>{const a=nle[e];return typeof a=="function"?a(t,n,s):a},ale={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},ile={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},lle={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},ole={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},cle={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},dle={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},ule={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},hle=(e,t)=>{const n=Number(e),s=t==null?void 0:t.unit;let a;return s==="date"?a="-е":s==="week"||s==="minute"||s==="second"?a="-я":a="-й",n+a},fle={ordinalNumber:hle,era:dl({values:ale,defaultWidth:"wide"}),quarter:dl({values:ile,defaultWidth:"wide",argumentCallback:e=>e-1}),month:dl({values:lle,defaultWidth:"wide",formattingValues:ole,defaultFormattingWidth:"wide"}),day:dl({values:cle,defaultWidth:"wide"}),dayPeriod:dl({values:dle,defaultWidth:"any",formattingValues:ule,defaultFormattingWidth:"wide"})},mle=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,ple=/\d+/i,xle={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},gle={any:[/^д/i,/^н/i]},vle={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},yle={any:[/1/i,/2/i,/3/i,/4/i]},ble={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},jle={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},wle={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},Nle={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},kle={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},Sle={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},Cle={ordinalNumber:x9({matchPattern:mle,parsePattern:ple,valueCallback:e=>parseInt(e,10)}),era:ul({matchPatterns:xle,defaultMatchWidth:"wide",parsePatterns:gle,defaultParseWidth:"any"}),quarter:ul({matchPatterns:vle,defaultMatchWidth:"wide",parsePatterns:yle,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ul({matchPatterns:ble,defaultMatchWidth:"wide",parsePatterns:jle,defaultParseWidth:"any"}),day:ul({matchPatterns:wle,defaultMatchWidth:"wide",parsePatterns:Nle,defaultParseWidth:"any"}),dayPeriod:ul({matchPatterns:kle,defaultMatchWidth:"wide",parsePatterns:Sle,defaultParseWidth:"any"})},gl={code:"ru",formatDistance:Xie,formatLong:ele,formatRelative:sle,localize:fle,match:Cle,options:{weekStartsOn:1,firstWeekContainsDate:1}};function _le({id:e,type:t,title:n,message:s,metadata:a,createdAt:i,onClose:l,onMarkAsRead:o}){const[c,d]=y.useState(!1);y.useEffect(()=>{const v=setTimeout(()=>d(!0),100),x=setTimeout(()=>{u()},7e3);return()=>{clearTimeout(v),clearTimeout(x)}},[]);const u=()=>{d(!1),setTimeout(l,300)},h=()=>{switch(t){case"offer_request_approved":return r.jsx(oo,{className:"w-5 h-5 text-green-600"});case"offer_request_rejected":return r.jsx(zt,{className:"w-5 h-5 text-red-600"});case"payment":return r.jsx(Rt,{className:"w-5 h-5 text-green-600"});case"general":return r.jsx(ma,{className:"w-5 h-5 text-blue-600"});default:return r.jsx(In,{className:"w-5 h-5 text-gray-600"})}},f=()=>{switch(t){case"offer_request_approved":case"payment":return"bg-green-100 text-green-800";case"offer_request_rejected":return"bg-red-100 text-red-800";case"general":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},m=()=>{switch(t){case"offer_request_approved":return"Одобрено";case"offer_request_rejected":return"Отклонено";case"payment":return"Выплата";case"general":return"Системное";default:return"Уведомление"}};return r.jsx("div",{className:`fixed bottom-4 right-4 z-50 transition-all duration-300 ease-in-out transform ${c?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:r.jsx(W,{className:"w-80 shadow-lg border-l-4 border-l-blue-500 bg-white dark:bg-gray-800",children:r.jsx(H,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[h(),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 truncate",children:n}),r.jsx(le,{className:`text-xs ${f()}`,children:m()})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2 line-clamp-2",children:s}),(a==null?void 0:a.amount)&&r.jsxs("div",{className:"mb-2 p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded text-xs",children:[r.jsx("strong",{children:"Сумма:"})," ",a.amount," ",a.currency||"USD"]}),(a==null?void 0:a.rejectReason)&&r.jsxs("div",{className:"mb-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-xs",children:[r.jsx("strong",{children:"Причина:"})," ",a.rejectReason]}),r.jsxs("div",{className:"flex items-center justify-between mt-3",children:[r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Xx(new Date(i),{addSuffix:!0,locale:gl})}),r.jsxs("div",{className:"flex gap-1",children:[o&&r.jsx(M,{onClick:o,variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",children:"Прочитано"}),r.jsx(M,{onClick:u,variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:r.jsx(Tn,{className:"w-3 h-3"})})]})]})]})]})})})})}function Ple({notifications:e,onMarkAsRead:t,onRemove:n}){const[s,a]=y.useState([]);y.useEffect(()=>{const o=e.filter(c=>!c.is_read).slice(0,3).map(c=>c.id);a(o)},[e]);const i=o=>{a(c=>c.filter(d=>d!==o)),setTimeout(()=>n(o),300)},l=o=>{t&&(t(o),i(o))};return r.jsx(r.Fragment,{children:s.map((o,c)=>{const d=e.find(u=>u.id===o);return d?r.jsx("div",{style:{bottom:`${4+c*90}px`},className:"fixed right-4 z-50",children:r.jsx(_le,{id:d.id,type:d.type,title:d.title,message:d.message,metadata:d.metadata,createdAt:d.created_at,onClose:()=>i(d.id),onMarkAsRead:()=>l(d.id)})},d.id):null})})}const Ale=y.createContext(void 0);function Tle({children:e}){const{user:t}=Jt(),n=Et(),[s,a]=y.useState(!0),[i,l]=y.useState([]),{data:o=[]}=$e({queryKey:["/api/notifications"],enabled:!!t,refetchInterval:3e4}),c=Ee({mutationFn:async v=>{const x=localStorage.getItem("auth_token");if(console.log("🔍 NotificationProvider markAsRead - token check:",{token:x?x.substring(0,20)+"...":"NO_TOKEN"}),!x||x==="null"||x==="undefined")throw console.error("❌ No valid token in NotificationProvider"),new Error("Authentication required");const w=await fetch(`/api/notifications/${v}/read`,{method:"PUT",headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});if(console.log("📡 NotificationProvider response:",w.status),!w.ok){const j=await w.text();throw console.error("❌ NotificationProvider request failed:",w.status,j),new Error("Failed to mark notification as read")}return w.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notifications"]})}}),d=v=>{l(x=>x.filter(w=>w!==v))},u=v=>{c.mutate(v)},h=()=>{a(v=>!v)},f=o.filter(v=>!v.is_read).length;y.useEffect(()=>{const v=o.filter(x=>!x.is_read&&!i.includes(x.id)).slice(0,3);if(v.length>0&&s){const x=v.map(w=>w.id);l(w=>[...w,...x])}},[o,i,s]),y.useEffect(()=>{if(!t)return;const v=new WebSocket("ws://localhost:5000/ws");return v.onopen=()=>{console.log("WebSocket connected"),v.send(JSON.stringify({type:"auth",token:localStorage.getItem("auth_token")}))},v.onmessage=x=>{try{const w=JSON.parse(x.data);w.type==="notification"?(console.log("New notification received:",w.data),n.invalidateQueries({queryKey:["/api/notifications"]})):w.type==="auth_success"&&console.log("WebSocket authenticated successfully")}catch(w){console.error("WebSocket message parse error:",w)}},v.onclose=()=>{console.log("WebSocket disconnected")},v.onerror=x=>{console.error("WebSocket error:",x)},()=>{v.close()}},[t,n]);const m={notifications:o,unreadCount:f,markAsRead:u,removeNotification:d,showPushNotifications:s,togglePushNotifications:h};return r.jsxs(Ale.Provider,{value:m,children:[e,s&&r.jsx(Ple,{notifications:o.filter(v=>!v.is_read&&i.includes(v.id)),onMarkAsRead:u,onRemove:d})]})}function Ele(e){const t=y.useRef(null);y.useEffect(()=>{var s,a;const n=(a=(s=import.meta)==null?void 0:s.env)==null?void 0:a.VITE_WS_URL;if(n&&!(!e||t.current)){try{const i=new URL(n);e&&i.searchParams.set("token",e);const l=new WebSocket(i.toString());t.current=l,l.onopen=()=>{},l.onmessage=()=>{},l.onerror=()=>{},l.onclose=()=>{t.current=null}}catch{}return()=>{var i;(i=t.current)==null||i.close(),t.current=null}}},[e])}function Ole(){const{token:e}=Jt();return Ele(e||void 0),null}function Rle({isMobile:e=!1,onClose:t}){const[n]=hs(),{collapsed:s,toggleCollapsed:a}=Os(),{t:i}=_r(),l=[{title:i("sidebar.home"),href:"/advertiser",icon:zw,description:i("sidebar.homeDesc")},{title:i("sidebar.myOffers"),href:"/advertiser/offers",icon:Kt,description:i("sidebar.myOffersDesc")},{title:i("sidebar.partners"),href:"/advertiser/partners",icon:ar,description:i("sidebar.partnersDesc")},{title:i("sidebar.accessRequests"),href:"/advertiser/access-requests",icon:Hx,description:i("sidebar.accessRequestsDesc")},{title:"Уведомления",href:"/advertiser/notifications",icon:In,description:"Системные уведомления и оповещения"},{title:"Рефералы",href:"/advertiser/referrals",icon:Si,description:"Реферальная программа и статистика"},{title:i("sidebar.finances"),href:"/advertiser/finances",icon:Rc,description:i("sidebar.financesDesc")},{title:i("sidebar.teamMode"),href:"/advertiser/team",icon:ar,description:i("sidebar.teamModeDesc")},{title:i("sidebar.antifraud"),href:"/advertiser/antifraud",icon:Lt,description:i("sidebar.antifraudDesc")},{title:i("sidebar.analytics"),href:"/advertiser/analytics",icon:cr,description:i("sidebar.analyticsDesc")},{title:i("sidebar.postbacks"),href:"/advertiser/postbacks",icon:Is,description:i("sidebar.postbacksDesc")},{title:i("sidebar.profile"),href:"/advertiser/profile",icon:fr,description:i("sidebar.profileDesc")},{title:i("sidebar.documents"),href:"/advertiser/documents",icon:Qn,description:i("sidebar.documentsDesc")}];return r.jsxs("div",{className:Ae("bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 h-screen flex flex-col transition-all duration-300 ease-in-out",e?"w-64 shadow-lg":s?"w-16":"w-64"),children:[r.jsx("div",{className:"border-b border-gray-200 dark:border-gray-800 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:Ae("flex items-center space-x-3",s&&"justify-center"),children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(Tm,{className:"w-6 h-6 text-white"})}),!s&&r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"FraudGuard"}),r.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Кабинет рекламодателя"})]})]}),r.jsx("button",{onClick:e?t:a,className:Ae("p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",s&&!e&&"mx-auto"),title:e?"Закрыть меню":s?"Развернуть меню":"Свернуть меню",children:e?r.jsx(Ri,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):s?r.jsx(yU,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):r.jsx(Ri,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})}),r.jsx("nav",{className:"flex-1 p-4 space-y-2",children:l.map(o=>{const c=o.icon,d=n===o.href||o.href!=="/advertiser"&&n.startsWith(o.href);return r.jsx(cl,{href:o.href,children:r.jsxs("div",{className:Ae("flex items-center rounded-lg transition-colors group",s&&!e?"px-3 py-3 justify-center":"px-3 py-2 space-x-3",d?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-200"),title:s&&!e?o.title:o.description,"data-testid":`sidebar-link-${o.href.split("/").pop()}`,onClick:()=>e&&(t==null?void 0:t()),children:[r.jsx(c,{className:Ae("w-5 h-5 flex-shrink-0",d?"text-blue-600 dark:text-blue-400":"")}),(!s||e)&&r.jsx("span",{className:"font-medium truncate",children:o.title})]})},o.href)})}),r.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800",children:r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"© 2025 FraudGuard Platform"})})]})}const Dle=[{title:"Главная",href:"/affiliate",icon:zw,description:"Обзор кабинета"},{title:"Офферы",href:"/affiliate/offers",icon:Kt,description:"Доступные офферы"},{title:"Запросы доступа",href:"/affiliate/access-requests",icon:Is,description:"Запросы к приватным офферам"},{title:"Ссылки",href:"/affiliate/links",icon:Vw,description:"Мои трекинговые ссылки"},{title:"Статистика",href:"/affiliate/analytics",icon:cr,description:"Статистика переходов"},{title:"Креативы",href:"/affiliate/creatives",icon:ene,description:"Рекламные материалы"},{title:"Постбэки",href:"/affiliate/postbacks",icon:nu,description:"Настройка постбэков"},{title:"Команда",href:"/affiliate/team",icon:ar,description:"Управление командой"},{title:"Рефералы",href:"/affiliate/referrals",icon:ar,description:"Реферальная программа"},{title:"Финансы",href:"/affiliate/finances",icon:Rc,description:"Выплаты и баланс"},{title:"Профиль",href:"/affiliate/profile",icon:fr,description:"Настройки профиля"},{title:"Безопасность",href:"/affiliate/security",icon:Lt,description:"Настройки безопасности"},{title:"Документы",href:"/affiliate/documents",icon:Qn,description:"Документооборот"}];function Mle({isMobile:e=!1,onClose:t}){const[n]=hs(),{collapsed:s,toggleCollapsed:a}=Os();return r.jsxs("div",{className:Ae("bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 h-screen flex flex-col transition-all duration-300 ease-in-out",e?"w-64 shadow-lg":s?"w-16":"w-64"),children:[r.jsx("div",{className:"border-b border-gray-200 dark:border-gray-800 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:Ae("flex items-center space-x-3",s&&"justify-center"),children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:r.jsx(Tm,{className:"w-6 h-6 text-white"})}),!s&&r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"FraudGuard"}),r.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Кабинет партнёра"})]})]}),r.jsx("button",{onClick:e?t:a,className:Ae("p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",s&&!e&&"mx-auto"),title:e?"Закрыть меню":s?"Развернуть меню":"Свернуть меню",children:e?r.jsx(Ri,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):s?r.jsx(yU,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):r.jsx(Ri,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})}),r.jsx("nav",{className:"flex-1 p-4 space-y-2",children:Dle.map(i=>{const l=i.icon,o=n===i.href||i.href!=="/affiliate"&&n.startsWith(i.href);return r.jsx(cl,{href:i.href,children:r.jsxs("div",{className:Ae("flex items-center rounded-lg transition-colors group",s&&!e?"px-3 py-3 justify-center":"px-3 py-2 space-x-3",o?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-200"),title:s&&!e?i.title:i.description,"data-testid":`sidebar-link-${i.href.split("/").pop()}`,onClick:()=>e&&(t==null?void 0:t()),children:[r.jsx(l,{className:Ae("w-5 h-5 flex-shrink-0",o?"text-green-600 dark:text-green-400":"")}),(!s||e)&&r.jsx("span",{className:"font-medium truncate",children:i.title})]})},i.href)})}),!s&&r.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800",children:r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"© 2025 FraudGuard Platform"})})]})}var $le=y.createContext(void 0);function Mm(e){const t=y.useContext($le);return e||t||"ltr"}var ik=0;function r1(){y.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??fD()),document.body.insertAdjacentElement("beforeend",e[1]??fD()),ik++,()=>{ik===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ik--}},[])}function fD(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var lk="focusScope.autoFocusOnMount",ok="focusScope.autoFocusOnUnmount",mD={bubbles:!1,cancelable:!0},Ile="FocusScope",zv=y.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=e,[o,c]=y.useState(null),d=Br(a),u=Br(i),h=y.useRef(null),f=St(t,x=>c(x)),m=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(s){let x=function(b){if(m.paused||!o)return;const p=b.target;o.contains(p)?h.current=p:Go(h.current,{select:!0})},w=function(b){if(m.paused||!o)return;const p=b.relatedTarget;p!==null&&(o.contains(p)||Go(h.current,{select:!0}))},j=function(b){if(document.activeElement===document.body)for(const N of b)N.removedNodes.length>0&&Go(o)};document.addEventListener("focusin",x),document.addEventListener("focusout",w);const g=new MutationObserver(j);return o&&g.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",w),g.disconnect()}}},[s,o,m.paused]),y.useEffect(()=>{if(o){xD.add(m);const x=document.activeElement;if(!o.contains(x)){const j=new CustomEvent(lk,mD);o.addEventListener(lk,d),o.dispatchEvent(j),j.defaultPrevented||(Fle(Vle(w9(o)),{select:!0}),document.activeElement===x&&Go(o))}return()=>{o.removeEventListener(lk,d),setTimeout(()=>{const j=new CustomEvent(ok,mD);o.addEventListener(ok,u),o.dispatchEvent(j),j.defaultPrevented||Go(x??document.body,{select:!0}),o.removeEventListener(ok,u),xD.remove(m)},0)}}},[o,d,u,m]);const v=y.useCallback(x=>{if(!n&&!s||m.paused)return;const w=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,j=document.activeElement;if(w&&j){const g=x.currentTarget,[b,p]=Lle(g);b&&p?!x.shiftKey&&j===p?(x.preventDefault(),n&&Go(b,{select:!0})):x.shiftKey&&j===b&&(x.preventDefault(),n&&Go(p,{select:!0})):j===g&&x.preventDefault()}},[n,s,m.paused]);return r.jsx(Ze.div,{tabIndex:-1,...l,ref:f,onKeyDown:v})});zv.displayName=Ile;function Fle(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Go(s,{select:t}),document.activeElement!==n)return}function Lle(e){const t=w9(e),n=pD(t,e),s=pD(t.reverse(),e);return[n,s]}function w9(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function pD(e,t){for(const n of e)if(!Ule(n,{upTo:t}))return n}function Ule(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Ble(e){return e instanceof HTMLInputElement&&"select"in e}function Go(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Ble(e)&&t&&e.select()}}var xD=zle();function zle(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=gD(e,t),e.unshift(t)},remove(t){var n;e=gD(e,t),(n=e[0])==null||n.resume()}}}function gD(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function Vle(e){return e.filter(t=>t.tagName!=="A")}var ck="rovingFocusGroup.onEntryFocus",qle={bubbles:!1,cancelable:!0},n1="RovingFocusGroup",[Z2,N9,Wle]=Dv(n1),[Hle,s1]=Bn(n1,[Wle]),[Kle,Gle]=Hle(n1),k9=y.forwardRef((e,t)=>r.jsx(Z2.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Z2.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Yle,{...e,ref:t})})}));k9.displayName=n1;var Yle=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,f=y.useRef(null),m=St(t,f),v=Mm(i),[x=null,w]=Oi({prop:l,defaultProp:o,onChange:c}),[j,g]=y.useState(!1),b=Br(d),p=N9(n),N=y.useRef(!1),[k,C]=y.useState(0);return y.useEffect(()=>{const _=f.current;if(_)return _.addEventListener(ck,b),()=>_.removeEventListener(ck,b)},[b]),r.jsx(Kle,{scope:n,orientation:s,dir:v,loop:a,currentTabStopId:x,onItemFocus:y.useCallback(_=>w(_),[w]),onItemShiftTab:y.useCallback(()=>g(!0),[]),onFocusableItemAdd:y.useCallback(()=>C(_=>_+1),[]),onFocusableItemRemove:y.useCallback(()=>C(_=>_-1),[]),children:r.jsx(Ze.div,{tabIndex:j||k===0?-1:0,"data-orientation":s,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:Le(e.onMouseDown,()=>{N.current=!0}),onFocus:Le(e.onFocus,_=>{const P=!N.current;if(_.target===_.currentTarget&&P&&!j){const D=new CustomEvent(ck,qle);if(_.currentTarget.dispatchEvent(D),!D.defaultPrevented){const E=p().filter(z=>z.focusable),$=E.find(z=>z.active),A=E.find(z=>z.id===x),O=[$,A,...E].filter(Boolean).map(z=>z.ref.current);_9(O,u)}}N.current=!1}),onBlur:Le(e.onBlur,()=>g(!1))})})}),S9="RovingFocusGroupItem",C9=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:i,...l}=e,o=Xn(),c=i||o,d=Gle(S9,n),u=d.currentTabStopId===c,h=N9(n),{onFocusableItemAdd:f,onFocusableItemRemove:m}=d;return y.useEffect(()=>{if(s)return f(),()=>m()},[s,f,m]),r.jsx(Z2.ItemSlot,{scope:n,id:c,focusable:s,active:a,children:r.jsx(Ze.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Le(e.onMouseDown,v=>{s?d.onItemFocus(c):v.preventDefault()}),onFocus:Le(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:Le(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=Qle(v,d.orientation,d.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let j=h().filter(g=>g.focusable).map(g=>g.ref.current);if(x==="last")j.reverse();else if(x==="prev"||x==="next"){x==="prev"&&j.reverse();const g=j.indexOf(v.currentTarget);j=d.loop?Jle(j,g+1):j.slice(g+1)}setTimeout(()=>_9(j))}})})})});C9.displayName=S9;var Xle={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Zle(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Qle(e,t,n){const s=Zle(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Xle[s]}function _9(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function Jle(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var P9=k9,A9=C9,eoe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Zu=new WeakMap,By=new WeakMap,zy={},dk=0,T9=function(e){return e&&(e.host||T9(e.parentNode))},toe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=T9(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},roe=function(e,t,n,s){var a=toe(t,Array.isArray(e)?e:[e]);zy[n]||(zy[n]=new WeakMap);var i=zy[n],l=[],o=new Set,c=new Set(a),d=function(h){!h||o.has(h)||(o.add(h),d(h.parentNode))};a.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(o.has(f))u(f);else try{var m=f.getAttribute(s),v=m!==null&&m!=="false",x=(Zu.get(f)||0)+1,w=(i.get(f)||0)+1;Zu.set(f,x),i.set(f,w),l.push(f),x===1&&v&&By.set(f,!0),w===1&&f.setAttribute(n,"true"),v||f.setAttribute(s,"true")}catch(j){console.error("aria-hidden: cannot operate on ",f,j)}})};return u(t),o.clear(),dk++,function(){l.forEach(function(h){var f=Zu.get(h)-1,m=i.get(h)-1;Zu.set(h,f),i.set(h,m),f||(By.has(h)||h.removeAttribute(s),By.delete(h)),m||h.removeAttribute(n)}),dk--,dk||(Zu=new WeakMap,Zu=new WeakMap,By=new WeakMap,zy={})}},a1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=eoe(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live]"))),roe(s,a,n,"aria-hidden")):function(){return null}},fl=function(){return fl=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fl.apply(this,arguments)};function E9(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function noe(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var $0="right-scroll-bar-position",I0="width-before-scroll-bar",soe="with-scroll-bars-hidden",aoe="--removed-body-scroll-bar-size";function uk(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function ioe(e,t){var n=y.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=t,n.facade}var loe=typeof window<"u"?y.useLayoutEffect:y.useEffect,vD=new WeakMap;function ooe(e,t){var n=ioe(null,function(s){return e.forEach(function(a){return uk(a,s)})});return loe(function(){var s=vD.get(n);if(s){var a=new Set(s),i=new Set(e),l=n.current;a.forEach(function(o){i.has(o)||uk(o,null)}),i.forEach(function(o){a.has(o)||uk(o,l)})}vD.set(n,e)},[e]),n}function coe(e){return e}function doe(e,t){t===void 0&&(t=coe);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var l=t(i,s);return n.push(l),function(){n=n.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(s=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){s=!0;var l=[];if(n.length){var o=n;n=[],o.forEach(i),l=n}var c=function(){var u=l;l=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){l.push(u),d()},filter:function(u){return l=l.filter(u),n}}}};return a}function uoe(e){e===void 0&&(e={});var t=doe(null);return t.options=fl({async:!0,ssr:!1},e),t}var O9=function(e){var t=e.sideCar,n=E9(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return y.createElement(s,fl({},n))};O9.isSideCarExport=!0;function hoe(e,t){return e.useMedium(t),O9}var R9=uoe(),hk=function(){},i1=y.forwardRef(function(e,t){var n=y.useRef(null),s=y.useState({onScrollCapture:hk,onWheelCapture:hk,onTouchMoveCapture:hk}),a=s[0],i=s[1],l=e.forwardProps,o=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,m=e.noIsolation,v=e.inert,x=e.allowPinchZoom,w=e.as,j=w===void 0?"div":w,g=e.gapMode,b=E9(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),p=f,N=ooe([n,t]),k=fl(fl({},b),a);return y.createElement(y.Fragment,null,u&&y.createElement(p,{sideCar:R9,removeScrollBar:d,shards:h,noIsolation:m,inert:v,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:g}),l?y.cloneElement(y.Children.only(o),fl(fl({},k),{ref:N})):y.createElement(j,fl({},k,{className:c,ref:N}),o))});i1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};i1.classNames={fullWidth:I0,zeroRight:$0};var foe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function moe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=foe();return t&&e.setAttribute("nonce",t),e}function poe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function xoe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var goe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=moe())&&(poe(t,n),xoe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},voe=function(){var e=goe();return function(t,n){y.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},D9=function(){var e=voe(),t=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return t},yoe={left:0,top:0,right:0,gap:0},fk=function(e){return parseInt(e||"",10)||0},boe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[fk(n),fk(s),fk(a)]},joe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return yoe;var t=boe(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},woe=D9(),Lh="data-scroll-locked",Noe=function(e,t,n,s){var a=e.left,i=e.top,l=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(soe,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(o,"px ").concat(s,`;
  }
  body[`).concat(Lh,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($0,` {
    right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(I0,` {
    margin-right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat($0," .").concat($0,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(I0," .").concat(I0,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Lh,`] {
    `).concat(aoe,": ").concat(o,`px;
  }
`)},yD=function(){var e=parseInt(document.body.getAttribute(Lh)||"0",10);return isFinite(e)?e:0},koe=function(){y.useEffect(function(){return document.body.setAttribute(Lh,(yD()+1).toString()),function(){var e=yD()-1;e<=0?document.body.removeAttribute(Lh):document.body.setAttribute(Lh,e.toString())}},[])},Soe=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;koe();var i=y.useMemo(function(){return joe(a)},[a]);return y.createElement(woe,{styles:Noe(i,!t,a,n?"":"!important")})},Q2=!1;if(typeof window<"u")try{var Vy=Object.defineProperty({},"passive",{get:function(){return Q2=!0,!0}});window.addEventListener("test",Vy,Vy),window.removeEventListener("test",Vy,Vy)}catch{Q2=!1}var Qu=Q2?{passive:!1}:!1,Coe=function(e){return e.tagName==="TEXTAREA"},M9=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Coe(e)&&n[t]==="visible")},_oe=function(e){return M9(e,"overflowY")},Poe=function(e){return M9(e,"overflowX")},bD=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=$9(e,s);if(a){var i=I9(e,s),l=i[1],o=i[2];if(l>o)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},Aoe=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},Toe=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},$9=function(e,t){return e==="v"?_oe(t):Poe(t)},I9=function(e,t){return e==="v"?Aoe(t):Toe(t)},Eoe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Ooe=function(e,t,n,s,a){var i=Eoe(e,window.getComputedStyle(t).direction),l=i*s,o=n.target,c=t.contains(o),d=!1,u=l>0,h=0,f=0;do{var m=I9(e,o),v=m[0],x=m[1],w=m[2],j=x-w-i*v;(v||j)&&$9(e,o)&&(h+=j,f+=v),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!c&&o!==document.body||c&&(t.contains(o)||t===o));return(u&&(Math.abs(h)<1||!a)||!u&&(Math.abs(f)<1||!a))&&(d=!0),d},qy=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},jD=function(e){return[e.deltaX,e.deltaY]},wD=function(e){return e&&"current"in e?e.current:e},Roe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Doe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Moe=0,Ju=[];function $oe(e){var t=y.useRef([]),n=y.useRef([0,0]),s=y.useRef(),a=y.useState(Moe++)[0],i=y.useState(D9)[0],l=y.useRef(e);y.useEffect(function(){l.current=e},[e]),y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var x=noe([e.lockRef.current],(e.shards||[]).map(wD),!0).filter(Boolean);return x.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=y.useCallback(function(x,w){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!l.current.allowPinchZoom;var j=qy(x),g=n.current,b="deltaX"in x?x.deltaX:g[0]-j[0],p="deltaY"in x?x.deltaY:g[1]-j[1],N,k=x.target,C=Math.abs(b)>Math.abs(p)?"h":"v";if("touches"in x&&C==="h"&&k.type==="range")return!1;var _=bD(C,k);if(!_)return!0;if(_?N=C:(N=C==="v"?"h":"v",_=bD(C,k)),!_)return!1;if(!s.current&&"changedTouches"in x&&(b||p)&&(s.current=N),!N)return!0;var P=s.current||N;return Ooe(P,w,x,P==="h"?b:p,!0)},[]),c=y.useCallback(function(x){var w=x;if(!(!Ju.length||Ju[Ju.length-1]!==i)){var j="deltaY"in w?jD(w):qy(w),g=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&Roe(N.delta,j)})[0];if(g&&g.should){w.cancelable&&w.preventDefault();return}if(!g){var b=(l.current.shards||[]).map(wD).filter(Boolean).filter(function(N){return N.contains(w.target)}),p=b.length>0?o(w,b[0]):!l.current.noIsolation;p&&w.cancelable&&w.preventDefault()}}},[]),d=y.useCallback(function(x,w,j,g){var b={name:x,delta:w,target:j,should:g,shadowParent:Ioe(j)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(p){return p!==b})},1)},[]),u=y.useCallback(function(x){n.current=qy(x),s.current=void 0},[]),h=y.useCallback(function(x){d(x.type,jD(x),x.target,o(x,e.lockRef.current))},[]),f=y.useCallback(function(x){d(x.type,qy(x),x.target,o(x,e.lockRef.current))},[]);y.useEffect(function(){return Ju.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Qu),document.addEventListener("touchmove",c,Qu),document.addEventListener("touchstart",u,Qu),function(){Ju=Ju.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,Qu),document.removeEventListener("touchmove",c,Qu),document.removeEventListener("touchstart",u,Qu)}},[]);var m=e.removeScrollBar,v=e.inert;return y.createElement(y.Fragment,null,v?y.createElement(i,{styles:Doe(a)}):null,m?y.createElement(Soe,{gapMode:e.gapMode}):null)}function Ioe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Foe=hoe(R9,$oe);var Vv=y.forwardRef(function(e,t){return y.createElement(i1,fl({},e,{ref:t,sideCar:Foe}))});Vv.classNames=i1.classNames;var J2=["Enter"," "],Loe=["ArrowDown","PageUp","Home"],F9=["ArrowUp","PageDown","End"],Uoe=[...Loe,...F9],Boe={ltr:[...J2,"ArrowRight"],rtl:[...J2,"ArrowLeft"]},zoe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},qv="Menu",[Zx,Voe,qoe]=Dv(qv),[Iu,L9]=Bn(qv,[qoe,ed,s1]),l1=ed(),U9=s1(),[Woe,Fu]=Iu(qv),[Hoe,Wv]=Iu(qv),B9=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:a,onOpenChange:i,modal:l=!0}=e,o=l1(t),[c,d]=y.useState(null),u=y.useRef(!1),h=Br(i),f=Mm(a);return y.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),r.jsx(sT,{...o,children:r.jsx(Woe,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:r.jsx(Hoe,{scope:t,onClose:y.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:f,modal:l,children:s})})})};B9.displayName=qv;var Koe="MenuAnchor",uT=y.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=l1(n);return r.jsx(Bv,{...a,...s,ref:t})});uT.displayName=Koe;var hT="MenuPortal",[Goe,z9]=Iu(hT,{forceMount:void 0}),V9=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:a}=e,i=Fu(hT,t);return r.jsx(Goe,{scope:t,forceMount:n,children:r.jsx(zn,{present:n||i.open,children:r.jsx(Am,{asChild:!0,container:a,children:s})})})};V9.displayName=hT;var Ba="MenuContent",[Yoe,fT]=Iu(Ba),q9=y.forwardRef((e,t)=>{const n=z9(Ba,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,i=Fu(Ba,e.__scopeMenu),l=Wv(Ba,e.__scopeMenu);return r.jsx(Zx.Provider,{scope:e.__scopeMenu,children:r.jsx(zn,{present:s||i.open,children:r.jsx(Zx.Slot,{scope:e.__scopeMenu,children:l.modal?r.jsx(Xoe,{...a,ref:t}):r.jsx(Zoe,{...a,ref:t})})})})}),Xoe=y.forwardRef((e,t)=>{const n=Fu(Ba,e.__scopeMenu),s=y.useRef(null),a=St(t,s);return y.useEffect(()=>{const i=s.current;if(i)return a1(i)},[]),r.jsx(mT,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Le(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Zoe=y.forwardRef((e,t)=>{const n=Fu(Ba,e.__scopeMenu);return r.jsx(mT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Qoe=Fc("MenuContent.ScrollLock"),mT=y.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:v,...x}=e,w=Fu(Ba,n),j=Wv(Ba,n),g=l1(n),b=U9(n),p=Voe(n),[N,k]=y.useState(null),C=y.useRef(null),_=St(t,C,w.onContentChange),P=y.useRef(0),D=y.useRef(""),E=y.useRef(0),$=y.useRef(null),A=y.useRef("right"),T=y.useRef(0),O=v?Vv:y.Fragment,z=v?{as:Qoe,allowPinchZoom:!0}:void 0,F=I=>{var pe,Me;const Q=D.current+I,Y=p().filter(xe=>!xe.disabled),K=document.activeElement,oe=(pe=Y.find(xe=>xe.ref.current===K))==null?void 0:pe.textValue,ge=Y.map(xe=>xe.textValue),Ne=dce(ge,Q,oe),Oe=(Me=Y.find(xe=>xe.textValue===Ne))==null?void 0:Me.ref.current;(function xe(ce){D.current=ce,window.clearTimeout(P.current),ce!==""&&(P.current=window.setTimeout(()=>xe(""),1e3))})(Q),Oe&&setTimeout(()=>Oe.focus())};y.useEffect(()=>()=>window.clearTimeout(P.current),[]),r1();const R=y.useCallback(I=>{var Y,K;return A.current===((Y=$.current)==null?void 0:Y.side)&&hce(I,(K=$.current)==null?void 0:K.area)},[]);return r.jsx(Yoe,{scope:n,searchRef:D,onItemEnter:y.useCallback(I=>{R(I)&&I.preventDefault()},[R]),onItemLeave:y.useCallback(I=>{var Q;R(I)||((Q=C.current)==null||Q.focus(),k(null))},[R]),onTriggerLeave:y.useCallback(I=>{R(I)&&I.preventDefault()},[R]),pointerGraceTimerRef:E,onPointerGraceIntentChange:y.useCallback(I=>{$.current=I},[]),children:r.jsx(O,{...z,children:r.jsx(zv,{asChild:!0,trapped:a,onMountAutoFocus:Le(i,I=>{var Q;I.preventDefault(),(Q=C.current)==null||Q.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:r.jsx($u,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:r.jsx(P9,{asChild:!0,...b,dir:j.dir,orientation:"vertical",loop:s,currentTabStopId:N,onCurrentTabStopIdChange:k,onEntryFocus:Le(c,I=>{j.isUsingKeyboardRef.current||I.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(Xw,{role:"menu","aria-orientation":"vertical","data-state":iB(w.open),"data-radix-menu-content":"",dir:j.dir,...g,...x,ref:_,style:{outline:"none",...x.style},onKeyDown:Le(x.onKeyDown,I=>{const Y=I.target.closest("[data-radix-menu-content]")===I.currentTarget,K=I.ctrlKey||I.altKey||I.metaKey,oe=I.key.length===1;Y&&(I.key==="Tab"&&I.preventDefault(),!K&&oe&&F(I.key));const ge=C.current;if(I.target!==ge||!Uoe.includes(I.key))return;I.preventDefault();const Oe=p().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);F9.includes(I.key)&&Oe.reverse(),oce(Oe)}),onBlur:Le(e.onBlur,I=>{I.currentTarget.contains(I.target)||(window.clearTimeout(P.current),D.current="")}),onPointerMove:Le(e.onPointerMove,Qx(I=>{const Q=I.target,Y=T.current!==I.clientX;if(I.currentTarget.contains(Q)&&Y){const K=I.clientX>T.current?"right":"left";A.current=K,T.current=I.clientX}}))})})})})})})});q9.displayName=Ba;var Joe="MenuGroup",pT=y.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Ze.div,{role:"group",...s,ref:t})});pT.displayName=Joe;var ece="MenuLabel",W9=y.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Ze.div,{...s,ref:t})});W9.displayName=ece;var _b="MenuItem",ND="menu.itemSelect",o1=y.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...a}=e,i=y.useRef(null),l=Wv(_b,e.__scopeMenu),o=fT(_b,e.__scopeMenu),c=St(t,i),d=y.useRef(!1),u=()=>{const h=i.current;if(!n&&h){const f=new CustomEvent(ND,{bubbles:!0,cancelable:!0});h.addEventListener(ND,m=>s==null?void 0:s(m),{once:!0}),FA(h,f),f.defaultPrevented?d.current=!1:l.onClose()}};return r.jsx(H9,{...a,ref:c,disabled:n,onClick:Le(e.onClick,u),onPointerDown:h=>{var f;(f=e.onPointerDown)==null||f.call(e,h),d.current=!0},onPointerUp:Le(e.onPointerUp,h=>{var f;d.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:Le(e.onKeyDown,h=>{const f=o.searchRef.current!=="";n||f&&h.key===" "||J2.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});o1.displayName=_b;var H9=y.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:a,...i}=e,l=fT(_b,n),o=U9(n),c=y.useRef(null),d=St(t,c),[u,h]=y.useState(!1),[f,m]=y.useState("");return y.useEffect(()=>{const v=c.current;v&&m((v.textContent??"").trim())},[i.children]),r.jsx(Zx.ItemSlot,{scope:n,disabled:s,textValue:a??f,children:r.jsx(A9,{asChild:!0,...o,focusable:!s,children:r.jsx(Ze.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:d,onPointerMove:Le(e.onPointerMove,Qx(v=>{s?l.onItemLeave(v):(l.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Le(e.onPointerLeave,Qx(v=>l.onItemLeave(v))),onFocus:Le(e.onFocus,()=>h(!0)),onBlur:Le(e.onBlur,()=>h(!1))})})})}),tce="MenuCheckboxItem",K9=y.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...a}=e;return r.jsx(Q9,{scope:e.__scopeMenu,checked:n,children:r.jsx(o1,{role:"menuitemcheckbox","aria-checked":Pb(n)?"mixed":n,...a,ref:t,"data-state":gT(n),onSelect:Le(a.onSelect,()=>s==null?void 0:s(Pb(n)?!0:!n),{checkForDefaultPrevented:!1})})})});K9.displayName=tce;var G9="MenuRadioGroup",[rce,nce]=Iu(G9,{value:void 0,onValueChange:()=>{}}),Y9=y.forwardRef((e,t)=>{const{value:n,onValueChange:s,...a}=e,i=Br(s);return r.jsx(rce,{scope:e.__scopeMenu,value:n,onValueChange:i,children:r.jsx(pT,{...a,ref:t})})});Y9.displayName=G9;var X9="MenuRadioItem",Z9=y.forwardRef((e,t)=>{const{value:n,...s}=e,a=nce(X9,e.__scopeMenu),i=n===a.value;return r.jsx(Q9,{scope:e.__scopeMenu,checked:i,children:r.jsx(o1,{role:"menuitemradio","aria-checked":i,...s,ref:t,"data-state":gT(i),onSelect:Le(s.onSelect,()=>{var l;return(l=a.onValueChange)==null?void 0:l.call(a,n)},{checkForDefaultPrevented:!1})})})});Z9.displayName=X9;var xT="MenuItemIndicator",[Q9,sce]=Iu(xT,{checked:!1}),J9=y.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...a}=e,i=sce(xT,n);return r.jsx(zn,{present:s||Pb(i.checked)||i.checked===!0,children:r.jsx(Ze.span,{...a,ref:t,"data-state":gT(i.checked)})})});J9.displayName=xT;var ace="MenuSeparator",eB=y.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Ze.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});eB.displayName=ace;var ice="MenuArrow",tB=y.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=l1(n);return r.jsx(Zw,{...a,...s,ref:t})});tB.displayName=ice;var lce="MenuSub",[Kqe,rB]=Iu(lce),Bp="MenuSubTrigger",nB=y.forwardRef((e,t)=>{const n=Fu(Bp,e.__scopeMenu),s=Wv(Bp,e.__scopeMenu),a=rB(Bp,e.__scopeMenu),i=fT(Bp,e.__scopeMenu),l=y.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=y.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return y.useEffect(()=>u,[u]),y.useEffect(()=>{const h=o.current;return()=>{window.clearTimeout(h),c(null)}},[o,c]),r.jsx(uT,{asChild:!0,...d,children:r.jsx(H9,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":iB(n.open),...e,ref:ko(t,a.onTriggerChange),onClick:h=>{var f;(f=e.onClick)==null||f.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Le(e.onPointerMove,Qx(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Le(e.onPointerLeave,Qx(h=>{var m,v;u();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const x=(v=n.content)==null?void 0:v.dataset.side,w=x==="right",j=w?-5:5,g=f[w?"left":"right"],b=f[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+j,y:h.clientY},{x:g,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:g,y:f.bottom}],side:x}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Le(e.onKeyDown,h=>{var m;const f=i.searchRef.current!=="";e.disabled||f&&h.key===" "||Boe[s.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});nB.displayName=Bp;var sB="MenuSubContent",aB=y.forwardRef((e,t)=>{const n=z9(Ba,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,i=Fu(Ba,e.__scopeMenu),l=Wv(Ba,e.__scopeMenu),o=rB(sB,e.__scopeMenu),c=y.useRef(null),d=St(t,c);return r.jsx(Zx.Provider,{scope:e.__scopeMenu,children:r.jsx(zn,{present:s||i.open,children:r.jsx(Zx.Slot,{scope:e.__scopeMenu,children:r.jsx(mT,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;l.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Le(e.onFocusOutside,u=>{u.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Le(e.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:Le(e.onKeyDown,u=>{var m;const h=u.currentTarget.contains(u.target),f=zoe[l.dir].includes(u.key);h&&f&&(i.onOpenChange(!1),(m=o.trigger)==null||m.focus(),u.preventDefault())})})})})})});aB.displayName=sB;function iB(e){return e?"open":"closed"}function Pb(e){return e==="indeterminate"}function gT(e){return Pb(e)?"indeterminate":e?"checked":"unchecked"}function oce(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function cce(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function dce(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let l=cce(e,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==n));const c=l.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function uce(e,t){const{x:n,y:s}=e;let a=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const o=t[i].x,c=t[i].y,d=t[l].x,u=t[l].y;c>s!=u>s&&n<(d-o)*(s-c)/(u-c)+o&&(a=!a)}return a}function hce(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return uce(n,t)}function Qx(e){return t=>t.pointerType==="mouse"?e(t):void 0}var fce=B9,mce=uT,pce=V9,xce=q9,gce=pT,vce=W9,yce=o1,bce=K9,jce=Y9,wce=Z9,Nce=J9,kce=eB,Sce=tB,Cce=nB,_ce=aB,vT="DropdownMenu",[Pce,Gqe]=Bn(vT,[L9]),Rs=L9(),[Ace,lB]=Pce(vT),oB=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:a,defaultOpen:i,onOpenChange:l,modal:o=!0}=e,c=Rs(t),d=y.useRef(null),[u=!1,h]=Oi({prop:a,defaultProp:i,onChange:l});return r.jsx(Ace,{scope:t,triggerId:Xn(),triggerRef:d,contentId:Xn(),open:u,onOpenChange:h,onOpenToggle:y.useCallback(()=>h(f=>!f),[h]),modal:o,children:r.jsx(fce,{...c,open:u,onOpenChange:h,dir:s,modal:o,children:n})})};oB.displayName=vT;var cB="DropdownMenuTrigger",dB=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...a}=e,i=lB(cB,n),l=Rs(n);return r.jsx(mce,{asChild:!0,...l,children:r.jsx(Ze.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:ko(t,i.triggerRef),onPointerDown:Le(e.onPointerDown,o=>{!s&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:Le(e.onKeyDown,o=>{s||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});dB.displayName=cB;var Tce="DropdownMenuPortal",uB=e=>{const{__scopeDropdownMenu:t,...n}=e,s=Rs(t);return r.jsx(pce,{...s,...n})};uB.displayName=Tce;var hB="DropdownMenuContent",fB=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=lB(hB,n),i=Rs(n),l=y.useRef(!1);return r.jsx(xce,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...s,ref:t,onCloseAutoFocus:Le(e.onCloseAutoFocus,o=>{var c;l.current||(c=a.triggerRef.current)==null||c.focus(),l.current=!1,o.preventDefault()}),onInteractOutside:Le(e.onInteractOutside,o=>{const c=o.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fB.displayName=hB;var Ece="DropdownMenuGroup",Oce=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Rs(n);return r.jsx(gce,{...a,...s,ref:t})});Oce.displayName=Ece;var Rce="DropdownMenuLabel",mB=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Rs(n);return r.jsx(vce,{...a,...s,ref:t})});mB.displayName=Rce;var Dce="DropdownMenuItem",pB=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Rs(n);return r.jsx(yce,{...a,...s,ref:t})});pB.displayName=Dce;var Mce="DropdownMenuCheckboxItem",xB=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Rs(n);return r.jsx(bce,{...a,...s,ref:t})});xB.displayName=Mce;var $ce="DropdownMenuRadioGroup",Ice=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Rs(n);return r.jsx(jce,{...a,...s,ref:t})});Ice.displayName=$ce;var Fce="DropdownMenuRadioItem",gB=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Rs(n);return r.jsx(wce,{...a,...s,ref:t})});gB.displayName=Fce;var Lce="DropdownMenuItemIndicator",vB=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Rs(n);return r.jsx(Nce,{...a,...s,ref:t})});vB.displayName=Lce;var Uce="DropdownMenuSeparator",yB=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Rs(n);return r.jsx(kce,{...a,...s,ref:t})});yB.displayName=Uce;var Bce="DropdownMenuArrow",zce=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Rs(n);return r.jsx(Sce,{...a,...s,ref:t})});zce.displayName=Bce;var Vce="DropdownMenuSubTrigger",bB=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Rs(n);return r.jsx(Cce,{...a,...s,ref:t})});bB.displayName=Vce;var qce="DropdownMenuSubContent",jB=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Rs(n);return r.jsx(_ce,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jB.displayName=qce;var Wce=oB,Hce=dB,Kce=uB,wB=fB,NB=mB,kB=pB,SB=xB,CB=gB,_B=vB,PB=yB,AB=bB,TB=jB;const Ys=Wce,Xs=Hce,Gce=y.forwardRef(({className:e,inset:t,children:n,...s},a)=>r.jsxs(AB,{ref:a,className:Ae("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s,children:[n,r.jsx(Qc,{className:"ml-auto"})]}));Gce.displayName=AB.displayName;const Yce=y.forwardRef(({className:e,...t},n)=>r.jsx(TB,{ref:n,className:Ae("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));Yce.displayName=TB.displayName;const Ps=y.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(Kce,{children:r.jsx(wB,{ref:s,sideOffset:t,className:Ae("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Ps.displayName=wB.displayName;const Ft=y.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(kB,{ref:s,className:Ae("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));Ft.displayName=kB.displayName;const EB=y.forwardRef(({className:e,children:t,checked:n,...s},a)=>r.jsxs(SB,{ref:a,className:Ae("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(_B,{children:r.jsx(fn,{className:"h-4 w-4"})})}),t]}));EB.displayName=SB.displayName;const Xce=y.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(CB,{ref:s,className:Ae("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(_B,{children:r.jsx(Fre,{className:"h-2 w-2 fill-current"})})}),t]}));Xce.displayName=CB.displayName;const yT=y.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(NB,{ref:s,className:Ae("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));yT.displayName=NB.displayName;const zf=y.forwardRef(({className:e,...t},n)=>r.jsx(PB,{ref:n,className:Ae("-mx-1 my-1 h-px bg-muted",e),...t}));zf.displayName=PB.displayName;var bT="Avatar",[Zce,Yqe]=Bn(bT),[Qce,OB]=Zce(bT),RB=y.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[a,i]=y.useState("idle");return r.jsx(Qce,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:r.jsx(Ze.span,{...s,ref:t})})});RB.displayName=bT;var DB="AvatarImage",MB=y.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:a=()=>{},...i}=e,l=OB(DB,n),o=Jce(s,i),c=Br(d=>{a(d),l.onImageLoadingStatusChange(d)});return pn(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?r.jsx(Ze.img,{...i,ref:t,src:s}):null});MB.displayName=DB;var $B="AvatarFallback",IB=y.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...a}=e,i=OB($B,n),[l,o]=y.useState(s===void 0);return y.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>o(!0),s);return()=>window.clearTimeout(c)}},[s]),l&&i.imageLoadingStatus!=="loaded"?r.jsx(Ze.span,{...a,ref:t}):null});IB.displayName=$B;function kD(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Jce(e,{referrerPolicy:t,crossOrigin:n}){const s=tde(),a=y.useRef(null),i=s?(a.current||(a.current=new window.Image),a.current):null,[l,o]=y.useState(()=>kD(i,e));return pn(()=>{o(kD(i,e))},[i,e]),pn(()=>{const c=h=>()=>{o(h)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,n,t]),l}function ede(){return()=>{}}function tde(){return y.useSyncExternalStore(ede,()=>!0,()=>!1)}var FB=RB,LB=MB,UB=IB;const jT=y.forwardRef(({className:e,...t},n)=>r.jsx(FB,{ref:n,className:Ae("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));jT.displayName=FB.displayName;const wT=y.forwardRef(({className:e,...t},n)=>r.jsx(LB,{ref:n,className:Ae("aspect-square h-full w-full",e),...t}));wT.displayName=LB.displayName;const NT=y.forwardRef(({className:e,...t},n)=>r.jsx(UB,{ref:n,className:Ae("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));NT.displayName=UB.displayName;function Hv(){const{setTheme:e}=h9(),{t}=_r();return r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsxs(M,{variant:"outline",size:"icon",title:t("common.settings"),children:[r.jsx(HR,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),r.jsx(WR,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),r.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),r.jsxs(Ps,{align:"end",children:[r.jsxs(Ft,{onClick:()=>e("light"),children:[r.jsx(HR,{className:"mr-2 h-4 w-4"}),t("theme.light")]}),r.jsxs(Ft,{onClick:()=>e("dark"),children:[r.jsx(WR,{className:"mr-2 h-4 w-4"}),t("theme.dark")]}),r.jsxs(Ft,{onClick:()=>e("system"),children:[r.jsx(ru,{className:"mr-2 h-4 w-4"}),t("theme.system")]})]})]})}function rde(){const{user:e,logout:t}=Jt(),{t:n,i18n:s}=_r(),[,a]=hs();y.useEffect(()=>{s.language!=="ru"&&(localStorage.setItem("i18nextLng","ru"),s.changeLanguage("ru"))},[s]);const{data:i=[]}=$e({queryKey:["/api/notifications"],enabled:!!(e!=null&&e.id),refetchInterval:3e4}),l=i.filter(m=>!m.is_read).length,{data:o}=$e({queryKey:["/api/partner/finance/summary"],enabled:!!e&&e.role==="affiliate",refetchInterval:3e4}),c=()=>{t()},d=()=>{(e==null?void 0:e.role)==="advertiser"?a("/advertiser/notifications"):(e==null?void 0:e.role)==="affiliate"&&a("/affiliate/notifications")},u=()=>{console.log("Settings clicked")},h=()=>{console.log("Support clicked")};if(!e)return null;const f=e.firstName&&e.lastName?`${e.firstName[0]}${e.lastName[0]}`:e.username[0].toUpperCase();return r.jsx("header",{className:"border-b bg-background",children:r.jsxs("div",{className:"flex h-16 items-center justify-between px-6",children:[r.jsx("div",{className:"flex items-center"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Hv,{}),e.role==="affiliate"&&r.jsxs("div",{className:"hidden lg:flex items-center space-x-3",children:[r.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 px-3 py-1.5 rounded-lg border border-green-200 dark:border-green-700",children:[r.jsx(Rt,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),r.jsxs("span",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:["$",o?o.balance.toFixed(2):"0.00"]}),r.jsx("span",{className:"text-xs text-green-600/80 dark:text-green-400/80 font-medium",children:s.language==="ru"?"Баланс":"Balance"})]}),r.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-900/30 dark:to-yellow-900/30 px-3 py-1.5 rounded-lg border border-amber-200 dark:border-amber-700",children:[r.jsx(Rt,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),r.jsxs("span",{className:"font-bold text-lg text-amber-700 dark:text-amber-300",children:["$",o?o.pendingPayouts.toFixed(2):"0.00"]}),r.jsx("span",{className:"text-xs text-amber-600/80 dark:text-amber-400/80 font-medium",children:s.language==="ru"?"В ожидании":"Pending"})]})]}),e.role==="affiliate"&&r.jsx("div",{className:"flex lg:hidden items-center space-x-2",children:r.jsxs("div",{className:"flex items-center space-x-1 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 px-2 py-1 rounded-lg border border-green-200 dark:border-green-700",children:[r.jsx(Rt,{className:"h-3 w-3 text-green-600 dark:text-green-400"}),r.jsxs("span",{className:"font-bold text-sm text-green-700 dark:text-green-300",children:["$",o?o.balance.toFixed(0):"0"]})]})}),r.jsxs("div",{className:"hidden md:flex items-center space-x-2 text-sm text-muted-foreground",children:[r.jsx(qw,{className:"h-4 w-4"}),r.jsx("span",{children:e.email})]}),r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsx(M,{variant:"ghost",className:"relative h-8 w-8 rounded-full","data-testid":"button-user-menu",children:r.jsxs(jT,{className:"h-8 w-8",children:[r.jsx(wT,{src:void 0,alt:e.username}),r.jsx(NT,{children:f})]})})}),r.jsxs(Ps,{className:"w-56",align:"end",forceMount:!0,children:[r.jsx(yT,{className:"font-normal",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("p",{className:"text-sm font-medium leading-none",children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.username}),r.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email}),r.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.role==="affiliate"?"Партнёр":e.role==="advertiser"?"Рекламодатель":e.role})]})}),r.jsx(zf,{}),r.jsxs(Ft,{children:[r.jsx(Ro,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Профиль"})]})]})]}),r.jsxs(M,{variant:"ghost",size:"icon",className:"relative hover:bg-blue-50 dark:hover:bg-blue-900/20",onClick:d,title:`Уведомления${l>0?` (${l} непрочитанных)`:""}`,"data-testid":"button-notifications",children:[r.jsx(In,{className:`h-5 w-5 ${l>0?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`}),l>0&&r.jsx(le,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs font-bold bg-red-500 hover:bg-red-600 animate-pulse",children:l>99?"99+":l})]}),r.jsx(M,{variant:"ghost",size:"icon",onClick:u,title:"Настройки","data-testid":"button-settings",children:r.jsx(fr,{className:"h-5 w-5"})}),r.jsx(M,{variant:"ghost",size:"icon",onClick:h,title:"Поддержка","data-testid":"button-support",children:r.jsx(Iv,{className:"h-5 w-5"})}),r.jsx(M,{variant:"ghost",size:"icon",onClick:c,title:"Выход","data-testid":"button-logout",children:r.jsx(Fv,{className:"h-5 w-5"})})]})]})})}function qr({children:e}){const{user:t}=Jt(),{collapsed:n,sidebarWidth:s}=Os(),[a,i]=y.useState(!1),[l,o]=y.useState(!1);return y.useEffect(()=>{const c=()=>{i(window.innerWidth<768)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),t?r.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(rde,{}),a&&l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>o(!1)}),r.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[r.jsxs("div",{className:Ae("transition-all duration-300 ease-in-out z-50",a?"absolute inset-y-0 left-0":"relative",a&&!l&&"-translate-x-full"),children:[t.role==="advertiser"&&r.jsx(Rle,{isMobile:a,onClose:()=>o(!1)},`sidebar-${t.id}`),t.role==="affiliate"&&r.jsx(Mle,{isMobile:a,onClose:()=>o(!1)},`sidebar-${t.id}`)]}),r.jsx("main",{className:Ae("flex-1 overflow-auto transition-all duration-300 ease-in-out",a?"w-full":""),style:a?{}:{"--sidebar-width":`${s}px`,width:`calc(100vw - ${s}px)`,maxWidth:`calc(100vw - ${s}px)`},children:r.jsx("div",{className:"w-full h-full",children:r.jsxs("div",{className:Ae("w-full py-4 px-4","sm:py-6",!a&&t.role==="affiliate"&&"sm:px-8 lg:px-12"),children:[a&&r.jsx("button",{onClick:()=>o(!0),className:"mb-4 p-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm md:hidden","data-testid":"button-mobile-menu",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e]})})})]})]}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"text-lg",children:"Загрузка..."})})}function nde(){return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"404"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Page not found"}),r.jsx("a",{href:"/",className:"mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go Home"})]})})}var kT="Progress",ST=100,[sde,Xqe]=Bn(kT),[ade,ide]=sde(kT),BB=y.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:a,getValueLabel:i=lde,...l}=e;(a||a===0)&&!SD(a)&&console.error(ode(`${a}`,"Progress"));const o=SD(a)?a:ST;s!==null&&!CD(s,o)&&console.error(cde(`${s}`,"Progress"));const c=CD(s,o)?s:null,d=Ab(c)?i(c,o):void 0;return r.jsx(ade,{scope:n,value:c,max:o,children:r.jsx(Ze.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Ab(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":qB(c,o),"data-value":c??void 0,"data-max":o,...l,ref:t})})});BB.displayName=kT;var zB="ProgressIndicator",VB=y.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,a=ide(zB,n);return r.jsx(Ze.div,{"data-state":qB(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});VB.displayName=zB;function lde(e,t){return`${Math.round(e/t*100)}%`}function qB(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ab(e){return typeof e=="number"}function SD(e){return Ab(e)&&!isNaN(e)&&e>0}function CD(e,t){return Ab(e)&&!isNaN(e)&&e<=t&&e>=0}function ode(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${ST}\`.`}function cde(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${ST} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var WB=BB,dde=VB;const su=y.forwardRef(({className:e,value:t,...n},s)=>r.jsx(WB,{ref:s,className:Ae("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:r.jsx(dde,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));su.displayName=WB.displayName;function Jx(e,[t,n]){return Math.min(n,Math.max(t,e))}function c1(e){const t=y.useRef({value:e,previous:e});return y.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var ude=[" ","Enter","ArrowUp","ArrowDown"],hde=[" ","Enter"],Kv="Select",[d1,u1,fde]=Dv(Kv),[$m,Zqe]=Bn(Kv,[fde,ed]),h1=ed(),[mde,td]=$m(Kv),[pde,xde]=$m(Kv),HB=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:a,onOpenChange:i,value:l,defaultValue:o,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:f,required:m,form:v}=e,x=h1(t),[w,j]=y.useState(null),[g,b]=y.useState(null),[p,N]=y.useState(!1),k=Mm(d),[C=!1,_]=Oi({prop:s,defaultProp:a,onChange:i}),[P,D]=Oi({prop:l,defaultProp:o,onChange:c}),E=y.useRef(null),$=w?v||!!w.closest("form"):!0,[A,T]=y.useState(new Set),O=Array.from(A).map(z=>z.props.value).join(";");return r.jsx(sT,{...x,children:r.jsxs(mde,{required:m,scope:t,trigger:w,onTriggerChange:j,valueNode:g,onValueNodeChange:b,valueNodeHasChildren:p,onValueNodeHasChildrenChange:N,contentId:Xn(),value:P,onValueChange:D,open:C,onOpenChange:_,dir:k,triggerPointerDownPosRef:E,disabled:f,children:[r.jsx(d1.Provider,{scope:t,children:r.jsx(pde,{scope:e.__scopeSelect,onNativeOptionAdd:y.useCallback(z=>{T(F=>new Set(F).add(z))},[]),onNativeOptionRemove:y.useCallback(z=>{T(F=>{const R=new Set(F);return R.delete(z),R})},[]),children:n})}),$?r.jsxs(g7,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:h,value:P,onChange:z=>D(z.target.value),disabled:f,form:v,children:[P===void 0?r.jsx("option",{value:""}):null,Array.from(A)]},O):null]})})};HB.displayName=Kv;var KB="SelectTrigger",GB=y.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...a}=e,i=h1(n),l=td(KB,n),o=l.disabled||s,c=St(t,l.onTriggerChange),d=u1(n),u=y.useRef("touch"),[h,f,m]=v7(x=>{const w=d().filter(b=>!b.disabled),j=w.find(b=>b.value===l.value),g=y7(w,x,j);g!==void 0&&l.onValueChange(g.value)}),v=x=>{o||(l.onOpenChange(!0),m()),x&&(l.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return r.jsx(Bv,{asChild:!0,...i,children:r.jsx(Ze.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":x7(l.value)?"":void 0,...a,ref:c,onClick:Le(a.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&v(x)}),onPointerDown:Le(a.onPointerDown,x=>{u.current=x.pointerType;const w=x.target;w.hasPointerCapture(x.pointerId)&&w.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(v(x),x.preventDefault())}),onKeyDown:Le(a.onKeyDown,x=>{const w=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&f(x.key),!(w&&x.key===" ")&&ude.includes(x.key)&&(v(),x.preventDefault())})})})});GB.displayName=KB;var YB="SelectValue",XB=y.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,children:i,placeholder:l="",...o}=e,c=td(YB,n),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,h=St(t,c.onValueNodeChange);return pn(()=>{d(u)},[d,u]),r.jsx(Ze.span,{...o,ref:h,style:{pointerEvents:"none"},children:x7(c.value)?r.jsx(r.Fragment,{children:l}):i})});XB.displayName=YB;var gde="SelectIcon",ZB=y.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...a}=e;return r.jsx(Ze.span,{"aria-hidden":!0,...a,ref:t,children:s||"▼"})});ZB.displayName=gde;var vde="SelectPortal",QB=e=>r.jsx(Am,{asChild:!0,...e});QB.displayName=vde;var yu="SelectContent",JB=y.forwardRef((e,t)=>{const n=td(yu,e.__scopeSelect),[s,a]=y.useState();if(pn(()=>{a(new DocumentFragment)},[]),!n.open){const i=s;return i?Fa.createPortal(r.jsx(e7,{scope:e.__scopeSelect,children:r.jsx(d1.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),i):null}return r.jsx(t7,{...e,ref:t})});JB.displayName=yu;var ei=10,[e7,rd]=$m(yu),yde="SelectContentImpl",bde=Fc("SelectContent.RemoveScroll"),t7=y.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:x,avoidCollisions:w,...j}=e,g=td(yu,n),[b,p]=y.useState(null),[N,k]=y.useState(null),C=St(t,pe=>p(pe)),[_,P]=y.useState(null),[D,E]=y.useState(null),$=u1(n),[A,T]=y.useState(!1),O=y.useRef(!1);y.useEffect(()=>{if(b)return a1(b)},[b]),r1();const z=y.useCallback(pe=>{const[Me,...xe]=$().map(ie=>ie.ref.current),[ce]=xe.slice(-1),Ie=document.activeElement;for(const ie of pe)if(ie===Ie||(ie==null||ie.scrollIntoView({block:"nearest"}),ie===Me&&N&&(N.scrollTop=0),ie===ce&&N&&(N.scrollTop=N.scrollHeight),ie==null||ie.focus(),document.activeElement!==Ie))return},[$,N]),F=y.useCallback(()=>z([_,b]),[z,_,b]);y.useEffect(()=>{A&&F()},[A,F]);const{onOpenChange:R,triggerPointerDownPosRef:I}=g;y.useEffect(()=>{if(b){let pe={x:0,y:0};const Me=ce=>{var Ie,ie;pe={x:Math.abs(Math.round(ce.pageX)-(((Ie=I.current)==null?void 0:Ie.x)??0)),y:Math.abs(Math.round(ce.pageY)-(((ie=I.current)==null?void 0:ie.y)??0))}},xe=ce=>{pe.x<=10&&pe.y<=10?ce.preventDefault():b.contains(ce.target)||R(!1),document.removeEventListener("pointermove",Me),I.current=null};return I.current!==null&&(document.addEventListener("pointermove",Me),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Me),document.removeEventListener("pointerup",xe,{capture:!0})}}},[b,R,I]),y.useEffect(()=>{const pe=()=>R(!1);return window.addEventListener("blur",pe),window.addEventListener("resize",pe),()=>{window.removeEventListener("blur",pe),window.removeEventListener("resize",pe)}},[R]);const[Q,Y]=v7(pe=>{const Me=$().filter(Ie=>!Ie.disabled),xe=Me.find(Ie=>Ie.ref.current===document.activeElement),ce=y7(Me,pe,xe);ce&&setTimeout(()=>ce.ref.current.focus())}),K=y.useCallback((pe,Me,xe)=>{const ce=!O.current&&!xe;(g.value!==void 0&&g.value===Me||ce)&&(P(pe),ce&&(O.current=!0))},[g.value]),oe=y.useCallback(()=>b==null?void 0:b.focus(),[b]),ge=y.useCallback((pe,Me,xe)=>{const ce=!O.current&&!xe;(g.value!==void 0&&g.value===Me||ce)&&E(pe)},[g.value]),Ne=s==="popper"?eC:r7,Oe=Ne===eC?{side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:x,avoidCollisions:w}:{};return r.jsx(e7,{scope:n,content:b,viewport:N,onViewportChange:k,itemRefCallback:K,selectedItem:_,onItemLeave:oe,itemTextRefCallback:ge,focusSelectedItem:F,selectedItemText:D,position:s,isPositioned:A,searchRef:Q,children:r.jsx(Vv,{as:bde,allowPinchZoom:!0,children:r.jsx(zv,{asChild:!0,trapped:g.open,onMountAutoFocus:pe=>{pe.preventDefault()},onUnmountAutoFocus:Le(a,pe=>{var Me;(Me=g.trigger)==null||Me.focus({preventScroll:!0}),pe.preventDefault()}),children:r.jsx($u,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:pe=>pe.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:r.jsx(Ne,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:pe=>pe.preventDefault(),...j,...Oe,onPlaced:()=>T(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:Le(j.onKeyDown,pe=>{const Me=pe.ctrlKey||pe.altKey||pe.metaKey;if(pe.key==="Tab"&&pe.preventDefault(),!Me&&pe.key.length===1&&Y(pe.key),["ArrowUp","ArrowDown","Home","End"].includes(pe.key)){let ce=$().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current);if(["ArrowUp","End"].includes(pe.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(pe.key)){const Ie=pe.target,ie=ce.indexOf(Ie);ce=ce.slice(ie+1)}setTimeout(()=>z(ce)),pe.preventDefault()}})})})})})})});t7.displayName=yde;var jde="SelectItemAlignedPosition",r7=y.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...a}=e,i=td(yu,n),l=rd(yu,n),[o,c]=y.useState(null),[d,u]=y.useState(null),h=St(t,C=>u(C)),f=u1(n),m=y.useRef(!1),v=y.useRef(!0),{viewport:x,selectedItem:w,selectedItemText:j,focusSelectedItem:g}=l,b=y.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&d&&x&&w&&j){const C=i.trigger.getBoundingClientRect(),_=d.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),D=j.getBoundingClientRect();if(i.dir!=="rtl"){const Ie=D.left-_.left,ie=P.left-Ie,st=C.left-ie,G=C.width+st,De=Math.max(G,_.width),me=window.innerWidth-ei,Be=Jx(ie,[ei,Math.max(ei,me-De)]);o.style.minWidth=G+"px",o.style.left=Be+"px"}else{const Ie=_.right-D.right,ie=window.innerWidth-P.right-Ie,st=window.innerWidth-C.right-ie,G=C.width+st,De=Math.max(G,_.width),me=window.innerWidth-ei,Be=Jx(ie,[ei,Math.max(ei,me-De)]);o.style.minWidth=G+"px",o.style.right=Be+"px"}const E=f(),$=window.innerHeight-ei*2,A=x.scrollHeight,T=window.getComputedStyle(d),O=parseInt(T.borderTopWidth,10),z=parseInt(T.paddingTop,10),F=parseInt(T.borderBottomWidth,10),R=parseInt(T.paddingBottom,10),I=O+z+A+R+F,Q=Math.min(w.offsetHeight*5,I),Y=window.getComputedStyle(x),K=parseInt(Y.paddingTop,10),oe=parseInt(Y.paddingBottom,10),ge=C.top+C.height/2-ei,Ne=$-ge,Oe=w.offsetHeight/2,pe=w.offsetTop+Oe,Me=O+z+pe,xe=I-Me;if(Me<=ge){const Ie=E.length>0&&w===E[E.length-1].ref.current;o.style.bottom="0px";const ie=d.clientHeight-x.offsetTop-x.offsetHeight,st=Math.max(Ne,Oe+(Ie?oe:0)+ie+F),G=Me+st;o.style.height=G+"px"}else{const Ie=E.length>0&&w===E[0].ref.current;o.style.top="0px";const st=Math.max(ge,O+x.offsetTop+(Ie?K:0)+Oe)+xe;o.style.height=st+"px",x.scrollTop=Me-ge+x.offsetTop}o.style.margin=`${ei}px 0`,o.style.minHeight=Q+"px",o.style.maxHeight=$+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[f,i.trigger,i.valueNode,o,d,x,w,j,i.dir,s]);pn(()=>b(),[b]);const[p,N]=y.useState();pn(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const k=y.useCallback(C=>{C&&v.current===!0&&(b(),g==null||g(),v.current=!1)},[b,g]);return r.jsx(Nde,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:k,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:p},children:r.jsx(Ze.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});r7.displayName=jde;var wde="SelectPopperPosition",eC=y.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:a=ei,...i}=e,l=h1(n);return r.jsx(Xw,{...l,...i,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});eC.displayName=wde;var[Nde,CT]=$m(yu,{}),tC="SelectViewport",n7=y.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...a}=e,i=rd(tC,n),l=CT(tC,n),o=St(t,i.onViewportChange),c=y.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(d1.Slot,{scope:n,children:r.jsx(Ze.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Le(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=l;if(f!=null&&f.current&&h){const m=Math.abs(c.current-u.scrollTop);if(m>0){const v=window.innerHeight-ei*2,x=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),j=Math.max(x,w);if(j<v){const g=j+m,b=Math.min(v,g),p=g-b;h.style.height=b+"px",h.style.bottom==="0px"&&(u.scrollTop=p>0?p:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});n7.displayName=tC;var s7="SelectGroup",[kde,Sde]=$m(s7),Cde=y.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Xn();return r.jsx(kde,{scope:n,id:a,children:r.jsx(Ze.div,{role:"group","aria-labelledby":a,...s,ref:t})})});Cde.displayName=s7;var a7="SelectLabel",i7=y.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Sde(a7,n);return r.jsx(Ze.div,{id:a.id,...s,ref:t})});i7.displayName=a7;var Tb="SelectItem",[_de,l7]=$m(Tb),o7=y.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:a=!1,textValue:i,...l}=e,o=td(Tb,n),c=rd(Tb,n),d=o.value===s,[u,h]=y.useState(i??""),[f,m]=y.useState(!1),v=St(t,g=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,g,s,a)}),x=Xn(),w=y.useRef("touch"),j=()=>{a||(o.onValueChange(s),o.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(_de,{scope:n,value:s,disabled:a,textId:x,isSelected:d,onItemTextChange:y.useCallback(g=>{h(b=>b||((g==null?void 0:g.textContent)??"").trim())},[]),children:r.jsx(d1.ItemSlot,{scope:n,value:s,disabled:a,textValue:u,children:r.jsx(Ze.div,{role:"option","aria-labelledby":x,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:v,onFocus:Le(l.onFocus,()=>m(!0)),onBlur:Le(l.onBlur,()=>m(!1)),onClick:Le(l.onClick,()=>{w.current!=="mouse"&&j()}),onPointerUp:Le(l.onPointerUp,()=>{w.current==="mouse"&&j()}),onPointerDown:Le(l.onPointerDown,g=>{w.current=g.pointerType}),onPointerMove:Le(l.onPointerMove,g=>{var b;w.current=g.pointerType,a?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Le(l.onPointerLeave,g=>{var b;g.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Le(l.onKeyDown,g=>{var p;((p=c.searchRef)==null?void 0:p.current)!==""&&g.key===" "||(hde.includes(g.key)&&j(),g.key===" "&&g.preventDefault())})})})})});o7.displayName=Tb;var zp="SelectItemText",c7=y.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,...i}=e,l=td(zp,n),o=rd(zp,n),c=l7(zp,n),d=xde(zp,n),[u,h]=y.useState(null),f=St(t,j=>h(j),c.onItemTextChange,j=>{var g;return(g=o.itemTextRefCallback)==null?void 0:g.call(o,j,c.value,c.disabled)}),m=u==null?void 0:u.textContent,v=y.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:x,onNativeOptionRemove:w}=d;return pn(()=>(x(v),()=>w(v)),[x,w,v]),r.jsxs(r.Fragment,{children:[r.jsx(Ze.span,{id:c.textId,...i,ref:f}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Fa.createPortal(i.children,l.valueNode):null]})});c7.displayName=zp;var d7="SelectItemIndicator",u7=y.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return l7(d7,n).isSelected?r.jsx(Ze.span,{"aria-hidden":!0,...s,ref:t}):null});u7.displayName=d7;var rC="SelectScrollUpButton",h7=y.forwardRef((e,t)=>{const n=rd(rC,e.__scopeSelect),s=CT(rC,e.__scopeSelect),[a,i]=y.useState(!1),l=St(t,s.onScrollButtonChange);return pn(()=>{if(n.viewport&&n.isPositioned){let o=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?r.jsx(m7,{...e,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});h7.displayName=rC;var nC="SelectScrollDownButton",f7=y.forwardRef((e,t)=>{const n=rd(nC,e.__scopeSelect),s=CT(nC,e.__scopeSelect),[a,i]=y.useState(!1),l=St(t,s.onScrollButtonChange);return pn(()=>{if(n.viewport&&n.isPositioned){let o=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?r.jsx(m7,{...e,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});f7.displayName=nC;var m7=y.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...a}=e,i=rd("SelectScrollButton",n),l=y.useRef(null),o=u1(n),c=y.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return y.useEffect(()=>()=>c(),[c]),pn(()=>{var u;const d=o().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),r.jsx(Ze.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Le(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(s,50))}),onPointerMove:Le(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),l.current===null&&(l.current=window.setInterval(s,50))}),onPointerLeave:Le(a.onPointerLeave,()=>{c()})})}),Pde="SelectSeparator",p7=y.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(Ze.div,{"aria-hidden":!0,...s,ref:t})});p7.displayName=Pde;var sC="SelectArrow",Ade=y.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=h1(n),i=td(sC,n),l=rd(sC,n);return i.open&&l.position==="popper"?r.jsx(Zw,{...a,...s,ref:t}):null});Ade.displayName=sC;function x7(e){return e===""||e===void 0}var g7=y.forwardRef((e,t)=>{const{value:n,...s}=e,a=y.useRef(null),i=St(t,a),l=c1(n);return y.useEffect(()=>{const o=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==n&&u){const h=new Event("change",{bubbles:!0});u.call(o,n),o.dispatchEvent(h)}},[l,n]),r.jsx(Mv,{asChild:!0,children:r.jsx("select",{...s,ref:i,defaultValue:n})})});g7.displayName="BubbleSelect";function v7(e){const t=Br(e),n=y.useRef(""),s=y.useRef(0),a=y.useCallback(l=>{const o=n.current+l;t(o),function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(o)},[t]),i=y.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,a,i]}function y7(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let l=Tde(e,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==n));const c=l.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function Tde(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var Ede=HB,b7=GB,Ode=XB,Rde=ZB,Dde=QB,j7=JB,Mde=n7,w7=i7,N7=o7,$de=c7,Ide=u7,k7=h7,S7=f7,C7=p7;const he=Ede,fe=Ode,de=y.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(b7,{ref:s,className:Ae("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(Rde,{asChild:!0,children:r.jsx(vU,{className:"h-4 w-4 opacity-50"})})]}));de.displayName=b7.displayName;const _7=y.forwardRef(({className:e,...t},n)=>r.jsx(k7,{ref:n,className:Ae("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Dre,{className:"h-4 w-4"})}));_7.displayName=k7.displayName;const P7=y.forwardRef(({className:e,...t},n)=>r.jsx(S7,{ref:n,className:Ae("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(vU,{className:"h-4 w-4"})}));P7.displayName=S7.displayName;const ue=y.forwardRef(({className:e,children:t,position:n="popper",...s},a)=>r.jsx(Dde,{children:r.jsxs(j7,{ref:a,className:Ae("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(_7,{}),r.jsx(Mde,{className:Ae("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(P7,{})]})}));ue.displayName=j7.displayName;const Fde=y.forwardRef(({className:e,...t},n)=>r.jsx(w7,{ref:n,className:Ae("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Fde.displayName=w7.displayName;const S=y.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(N7,{ref:s,className:Ae("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(Ide,{children:r.jsx(fn,{className:"h-4 w-4"})})}),r.jsx($de,{children:t})]}));S.displayName=N7.displayName;const Lde=y.forwardRef(({className:e,...t},n)=>r.jsx(C7,{ref:n,className:Ae("-mx-1 my-1 h-px bg-muted",e),...t}));Lde.displayName=C7.displayName;var Ude=Array.isArray,Zs=Ude,Bde=typeof gy=="object"&&gy&&gy.Object===Object&&gy,A7=Bde,zde=A7,Vde=typeof self=="object"&&self&&self.Object===Object&&self,qde=zde||Vde||Function("return this")(),Il=qde,Wde=Il,Hde=Wde.Symbol,Gv=Hde,_D=Gv,T7=Object.prototype,Kde=T7.hasOwnProperty,Gde=T7.toString,yp=_D?_D.toStringTag:void 0;function Yde(e){var t=Kde.call(e,yp),n=e[yp];try{e[yp]=void 0;var s=!0}catch{}var a=Gde.call(e);return s&&(t?e[yp]=n:delete e[yp]),a}var Xde=Yde,Zde=Object.prototype,Qde=Zde.toString;function Jde(e){return Qde.call(e)}var eue=Jde,PD=Gv,tue=Xde,rue=eue,nue="[object Null]",sue="[object Undefined]",AD=PD?PD.toStringTag:void 0;function aue(e){return e==null?e===void 0?sue:nue:AD&&AD in Object(e)?tue(e):rue(e)}var Do=aue;function iue(e){return e!=null&&typeof e=="object"}var Mo=iue,lue=Do,oue=Mo,cue="[object Symbol]";function due(e){return typeof e=="symbol"||oue(e)&&lue(e)==cue}var Im=due,uue=Zs,hue=Im,fue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mue=/^\w*$/;function pue(e,t){if(uue(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||hue(e)?!0:mue.test(e)||!fue.test(e)||t!=null&&e in Object(t)}var _T=pue;function xue(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var nd=xue;const Fm=Qt(nd);var gue=Do,vue=nd,yue="[object AsyncFunction]",bue="[object Function]",jue="[object GeneratorFunction]",wue="[object Proxy]";function Nue(e){if(!vue(e))return!1;var t=gue(e);return t==bue||t==jue||t==yue||t==wue}var PT=Nue;const gt=Qt(PT);var kue=Il,Sue=kue["__core-js_shared__"],Cue=Sue,mk=Cue,TD=function(){var e=/[^.]+$/.exec(mk&&mk.keys&&mk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function _ue(e){return!!TD&&TD in e}var Pue=_ue,Aue=Function.prototype,Tue=Aue.toString;function Eue(e){if(e!=null){try{return Tue.call(e)}catch{}try{return e+""}catch{}}return""}var E7=Eue,Oue=PT,Rue=Pue,Due=nd,Mue=E7,$ue=/[\\^$.*+?()[\]{}|]/g,Iue=/^\[object .+?Constructor\]$/,Fue=Function.prototype,Lue=Object.prototype,Uue=Fue.toString,Bue=Lue.hasOwnProperty,zue=RegExp("^"+Uue.call(Bue).replace($ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Vue(e){if(!Due(e)||Rue(e))return!1;var t=Oue(e)?zue:Iue;return t.test(Mue(e))}var que=Vue;function Wue(e,t){return e==null?void 0:e[t]}var Hue=Wue,Kue=que,Gue=Hue;function Yue(e,t){var n=Gue(e,t);return Kue(n)?n:void 0}var Lu=Yue,Xue=Lu,Zue=Xue(Object,"create"),f1=Zue,ED=f1;function Que(){this.__data__=ED?ED(null):{},this.size=0}var Jue=Que;function ehe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var the=ehe,rhe=f1,nhe="__lodash_hash_undefined__",she=Object.prototype,ahe=she.hasOwnProperty;function ihe(e){var t=this.__data__;if(rhe){var n=t[e];return n===nhe?void 0:n}return ahe.call(t,e)?t[e]:void 0}var lhe=ihe,ohe=f1,che=Object.prototype,dhe=che.hasOwnProperty;function uhe(e){var t=this.__data__;return ohe?t[e]!==void 0:dhe.call(t,e)}var hhe=uhe,fhe=f1,mhe="__lodash_hash_undefined__";function phe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=fhe&&t===void 0?mhe:t,this}var xhe=phe,ghe=Jue,vhe=the,yhe=lhe,bhe=hhe,jhe=xhe;function Lm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Lm.prototype.clear=ghe;Lm.prototype.delete=vhe;Lm.prototype.get=yhe;Lm.prototype.has=bhe;Lm.prototype.set=jhe;var whe=Lm;function Nhe(){this.__data__=[],this.size=0}var khe=Nhe;function She(e,t){return e===t||e!==e&&t!==t}var AT=She,Che=AT;function _he(e,t){for(var n=e.length;n--;)if(Che(e[n][0],t))return n;return-1}var m1=_he,Phe=m1,Ahe=Array.prototype,The=Ahe.splice;function Ehe(e){var t=this.__data__,n=Phe(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():The.call(t,n,1),--this.size,!0}var Ohe=Ehe,Rhe=m1;function Dhe(e){var t=this.__data__,n=Rhe(t,e);return n<0?void 0:t[n][1]}var Mhe=Dhe,$he=m1;function Ihe(e){return $he(this.__data__,e)>-1}var Fhe=Ihe,Lhe=m1;function Uhe(e,t){var n=this.__data__,s=Lhe(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var Bhe=Uhe,zhe=khe,Vhe=Ohe,qhe=Mhe,Whe=Fhe,Hhe=Bhe;function Um(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Um.prototype.clear=zhe;Um.prototype.delete=Vhe;Um.prototype.get=qhe;Um.prototype.has=Whe;Um.prototype.set=Hhe;var p1=Um,Khe=Lu,Ghe=Il,Yhe=Khe(Ghe,"Map"),TT=Yhe,OD=whe,Xhe=p1,Zhe=TT;function Qhe(){this.size=0,this.__data__={hash:new OD,map:new(Zhe||Xhe),string:new OD}}var Jhe=Qhe;function efe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var tfe=efe,rfe=tfe;function nfe(e,t){var n=e.__data__;return rfe(t)?n[typeof t=="string"?"string":"hash"]:n.map}var x1=nfe,sfe=x1;function afe(e){var t=sfe(this,e).delete(e);return this.size-=t?1:0,t}var ife=afe,lfe=x1;function ofe(e){return lfe(this,e).get(e)}var cfe=ofe,dfe=x1;function ufe(e){return dfe(this,e).has(e)}var hfe=ufe,ffe=x1;function mfe(e,t){var n=ffe(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var pfe=mfe,xfe=Jhe,gfe=ife,vfe=cfe,yfe=hfe,bfe=pfe;function Bm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Bm.prototype.clear=xfe;Bm.prototype.delete=gfe;Bm.prototype.get=vfe;Bm.prototype.has=yfe;Bm.prototype.set=bfe;var ET=Bm,O7=ET,jfe="Expected a function";function OT(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(jfe);var n=function(){var s=arguments,a=t?t.apply(this,s):s[0],i=n.cache;if(i.has(a))return i.get(a);var l=e.apply(this,s);return n.cache=i.set(a,l)||i,l};return n.cache=new(OT.Cache||O7),n}OT.Cache=O7;var R7=OT;const wfe=Qt(R7);var Nfe=R7,kfe=500;function Sfe(e){var t=Nfe(e,function(s){return n.size===kfe&&n.clear(),s}),n=t.cache;return t}var Cfe=Sfe,_fe=Cfe,Pfe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Afe=/\\(\\)?/g,Tfe=_fe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Pfe,function(n,s,a,i){t.push(a?i.replace(Afe,"$1"):s||n)}),t}),Efe=Tfe;function Ofe(e,t){for(var n=-1,s=e==null?0:e.length,a=Array(s);++n<s;)a[n]=t(e[n],n,e);return a}var RT=Ofe,RD=Gv,Rfe=RT,Dfe=Zs,Mfe=Im,$fe=1/0,DD=RD?RD.prototype:void 0,MD=DD?DD.toString:void 0;function D7(e){if(typeof e=="string")return e;if(Dfe(e))return Rfe(e,D7)+"";if(Mfe(e))return MD?MD.call(e):"";var t=e+"";return t=="0"&&1/e==-$fe?"-0":t}var Ife=D7,Ffe=Ife;function Lfe(e){return e==null?"":Ffe(e)}var M7=Lfe,Ufe=Zs,Bfe=_T,zfe=Efe,Vfe=M7;function qfe(e,t){return Ufe(e)?e:Bfe(e,t)?[e]:zfe(Vfe(e))}var $7=qfe,Wfe=Im,Hfe=1/0;function Kfe(e){if(typeof e=="string"||Wfe(e))return e;var t=e+"";return t=="0"&&1/e==-Hfe?"-0":t}var g1=Kfe,Gfe=$7,Yfe=g1;function Xfe(e,t){t=Gfe(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[Yfe(t[n++])];return n&&n==s?e:void 0}var DT=Xfe,Zfe=DT;function Qfe(e,t,n){var s=e==null?void 0:Zfe(e,t);return s===void 0?n:s}var I7=Qfe;const va=Qt(I7);function Jfe(e){return e==null}var eme=Jfe;const Tt=Qt(eme);var tme=Do,rme=Zs,nme=Mo,sme="[object String]";function ame(e){return typeof e=="string"||!rme(e)&&nme(e)&&tme(e)==sme}var ime=ame;const bu=Qt(ime);var F7={exports:{}},Nr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT=Symbol.for("react.element"),$T=Symbol.for("react.portal"),v1=Symbol.for("react.fragment"),y1=Symbol.for("react.strict_mode"),b1=Symbol.for("react.profiler"),j1=Symbol.for("react.provider"),w1=Symbol.for("react.context"),lme=Symbol.for("react.server_context"),N1=Symbol.for("react.forward_ref"),k1=Symbol.for("react.suspense"),S1=Symbol.for("react.suspense_list"),C1=Symbol.for("react.memo"),_1=Symbol.for("react.lazy"),ome=Symbol.for("react.offscreen"),L7;L7=Symbol.for("react.module.reference");function Ga(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case MT:switch(e=e.type,e){case v1:case b1:case y1:case k1:case S1:return e;default:switch(e=e&&e.$$typeof,e){case lme:case w1:case N1:case _1:case C1:case j1:return e;default:return t}}case $T:return t}}}Nr.ContextConsumer=w1;Nr.ContextProvider=j1;Nr.Element=MT;Nr.ForwardRef=N1;Nr.Fragment=v1;Nr.Lazy=_1;Nr.Memo=C1;Nr.Portal=$T;Nr.Profiler=b1;Nr.StrictMode=y1;Nr.Suspense=k1;Nr.SuspenseList=S1;Nr.isAsyncMode=function(){return!1};Nr.isConcurrentMode=function(){return!1};Nr.isContextConsumer=function(e){return Ga(e)===w1};Nr.isContextProvider=function(e){return Ga(e)===j1};Nr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===MT};Nr.isForwardRef=function(e){return Ga(e)===N1};Nr.isFragment=function(e){return Ga(e)===v1};Nr.isLazy=function(e){return Ga(e)===_1};Nr.isMemo=function(e){return Ga(e)===C1};Nr.isPortal=function(e){return Ga(e)===$T};Nr.isProfiler=function(e){return Ga(e)===b1};Nr.isStrictMode=function(e){return Ga(e)===y1};Nr.isSuspense=function(e){return Ga(e)===k1};Nr.isSuspenseList=function(e){return Ga(e)===S1};Nr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===v1||e===b1||e===y1||e===k1||e===S1||e===ome||typeof e=="object"&&e!==null&&(e.$$typeof===_1||e.$$typeof===C1||e.$$typeof===j1||e.$$typeof===w1||e.$$typeof===N1||e.$$typeof===L7||e.getModuleId!==void 0)};Nr.typeOf=Ga;F7.exports=Nr;var cme=F7.exports,dme=Do,ume=Mo,hme="[object Number]";function fme(e){return typeof e=="number"||ume(e)&&dme(e)==hme}var U7=fme;const mme=Qt(U7);var pme=U7;function xme(e){return pme(e)&&e!=+e}var gme=xme;const zm=Qt(gme);var ws=function(t){return t===0?0:t>0?1:-1},Pd=function(t){return bu(t)&&t.indexOf("%")===t.length-1},ze=function(t){return mme(t)&&!zm(t)},vme=function(t){return Tt(t)},An=function(t){return ze(t)||bu(t)},yme=0,Uu=function(t){var n=++yme;return"".concat(t||"").concat(n)},Ns=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ze(t)&&!bu(t))return s;var i;if(Pd(t)){var l=t.indexOf("%");i=n*parseFloat(t.slice(0,l))/100}else i=+t;return zm(i)&&(i=s),a&&i>n&&(i=n),i},nc=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},bme=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,s={},a=0;a<n;a++)if(!s[t[a]])s[t[a]]=!0;else return!0;return!1},Cn=function(t,n){return ze(t)&&ze(n)?function(s){return t+s*(n-t)}:function(){return n}};function Eb(e,t,n){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):va(s,t))===n})}var jme=function(t,n){return ze(t)&&ze(n)?t-n:bu(t)&&bu(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function Uh(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function aC(e){"@babel/helpers - typeof";return aC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aC(e)}var wme=["viewBox","children"],Nme=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],$D=["points","pathLength"],pk={svg:wme,polygon:$D,polyline:$D},IT=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ob=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(y.isValidElement(t)&&(s=t.props),!Fm(s))return null;var a={};return Object.keys(s).forEach(function(i){IT.includes(i)&&(a[i]=n||function(l){return s[i](s,l)})}),a},kme=function(t,n,s){return function(a){return t(n,s,a),null}},ju=function(t,n,s){if(!Fm(t)||aC(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var l=t[i];IT.includes(i)&&typeof l=="function"&&(a||(a={}),a[i]=kme(l,n,s))}),a},Sme=["children"],Cme=["children"];function ID(e,t){if(e==null)return{};var n=_me(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function _me(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function iC(e){"@babel/helpers - typeof";return iC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iC(e)}var FD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},xo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},LD=null,xk=null,FT=function e(t){if(t===LD&&Array.isArray(xk))return xk;var n=[];return y.Children.forEach(t,function(s){Tt(s)||(cme.isFragment(s)?n=n.concat(e(s.props.children)):n.push(s))}),xk=n,LD=t,n};function ya(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(function(a){return xo(a)}):s=[xo(t)],FT(e).forEach(function(a){var i=va(a,"type.displayName")||va(a,"type.name");s.indexOf(i)!==-1&&n.push(a)}),n}function oa(e,t){var n=ya(e,t);return n&&n[0]}var UD=function(t){if(!t||!t.props)return!1;var n=t.props,s=n.width,a=n.height;return!(!ze(s)||s<=0||!ze(a)||a<=0)},Pme=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Ame=function(t){return t&&t.type&&bu(t.type)&&Pme.indexOf(t.type)>=0},B7=function(t){return t&&iC(t)==="object"&&"clipDot"in t},Tme=function(t,n,s,a){var i,l=(i=pk==null?void 0:pk[a])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!gt(t)&&(a&&l.includes(n)||Nme.includes(n))||s&&IT.includes(n)},ot=function(t,n,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(y.isValidElement(t)&&(a=t.props),!Fm(a))return null;var i={};return Object.keys(a).forEach(function(l){var o;Tme((o=a)===null||o===void 0?void 0:o[l],l,n,s)&&(i[l]=a[l])}),i},lC=function e(t,n){if(t===n)return!0;var s=y.Children.count(t);if(s!==y.Children.count(n))return!1;if(s===0)return!0;if(s===1)return BD(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<s;a++){var i=t[a],l=n[a];if(Array.isArray(i)||Array.isArray(l)){if(!e(i,l))return!1}else if(!BD(i,l))return!1}return!0},BD=function(t,n){if(Tt(t)&&Tt(n))return!0;if(!Tt(t)&&!Tt(n)){var s=t.props||{},a=s.children,i=ID(s,Sme),l=n.props||{},o=l.children,c=ID(l,Cme);return a&&o?Uh(i,c)&&lC(a,o):!a&&!o?Uh(i,c):!1}return!1},zD=function(t,n){var s=[],a={};return FT(t).forEach(function(i,l){if(Ame(i))s.push(i);else if(i){var o=xo(i.type),c=n[o]||{},d=c.handler,u=c.once;if(d&&(!u||!a[o])){var h=d(i,o,l);s.push(h),a[o]=!0}}}),s},Eme=function(t){var n=t&&t.type;return n&&FD[n]?FD[n]:null},Ome=function(t,n){return FT(n).indexOf(t)},Rme=["children","width","height","viewBox","className","style","title","desc"];function oC(){return oC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},oC.apply(this,arguments)}function Dme(e,t){if(e==null)return{};var n=Mme(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Mme(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function cC(e){var t=e.children,n=e.width,s=e.height,a=e.viewBox,i=e.className,l=e.style,o=e.title,c=e.desc,d=Dme(e,Rme),u=a||{width:n,height:s,x:0,y:0},h=Ot("recharts-surface",i);return Z.createElement("svg",oC({},ot(d,!0,"svg"),{className:h,width:n,height:s,style:l,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),Z.createElement("title",null,o),Z.createElement("desc",null,c),t)}var $me=["children","className"];function dC(){return dC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},dC.apply(this,arguments)}function Ime(e,t){if(e==null)return{};var n=Fme(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Fme(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Gt=Z.forwardRef(function(e,t){var n=e.children,s=e.className,a=Ime(e,$me),i=Ot("recharts-layer",s);return Z.createElement("g",dC({className:i},ot(a,!0),{ref:t}),n)}),Ci=function(t,n){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]};function Lme(e,t,n){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++s<a;)i[s]=e[s+t];return i}var Ume=Lme,Bme=Ume;function zme(e,t,n){var s=e.length;return n=n===void 0?s:n,!t&&n>=s?e:Bme(e,t,n)}var Vme=zme,qme="\\ud800-\\udfff",Wme="\\u0300-\\u036f",Hme="\\ufe20-\\ufe2f",Kme="\\u20d0-\\u20ff",Gme=Wme+Hme+Kme,Yme="\\ufe0e\\ufe0f",Xme="\\u200d",Zme=RegExp("["+Xme+qme+Gme+Yme+"]");function Qme(e){return Zme.test(e)}var z7=Qme;function Jme(e){return e.split("")}var epe=Jme,V7="\\ud800-\\udfff",tpe="\\u0300-\\u036f",rpe="\\ufe20-\\ufe2f",npe="\\u20d0-\\u20ff",spe=tpe+rpe+npe,ape="\\ufe0e\\ufe0f",ipe="["+V7+"]",uC="["+spe+"]",hC="\\ud83c[\\udffb-\\udfff]",lpe="(?:"+uC+"|"+hC+")",q7="[^"+V7+"]",W7="(?:\\ud83c[\\udde6-\\uddff]){2}",H7="[\\ud800-\\udbff][\\udc00-\\udfff]",ope="\\u200d",K7=lpe+"?",G7="["+ape+"]?",cpe="(?:"+ope+"(?:"+[q7,W7,H7].join("|")+")"+G7+K7+")*",dpe=G7+K7+cpe,upe="(?:"+[q7+uC+"?",uC,W7,H7,ipe].join("|")+")",hpe=RegExp(hC+"(?="+hC+")|"+upe+dpe,"g");function fpe(e){return e.match(hpe)||[]}var mpe=fpe,ppe=epe,xpe=z7,gpe=mpe;function vpe(e){return xpe(e)?gpe(e):ppe(e)}var ype=vpe,bpe=Vme,jpe=z7,wpe=ype,Npe=M7;function kpe(e){return function(t){t=Npe(t);var n=jpe(t)?wpe(t):void 0,s=n?n[0]:t.charAt(0),a=n?bpe(n,1).join(""):t.slice(1);return s[e]()+a}}var Spe=kpe,Cpe=Spe,_pe=Cpe("toUpperCase"),Ppe=_pe;const P1=Qt(Ppe);function Ar(e){return function(){return e}}const Y7=Math.cos,Rb=Math.sin,Wi=Math.sqrt,Db=Math.PI,A1=2*Db,fC=Math.PI,mC=2*fC,vd=1e-6,Ape=mC-vd;function X7(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Tpe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return X7;const n=10**t;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+s[a]}}class Epe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?X7:Tpe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,a){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(t,n,s,a,i,l){this._append`C${+t},${+n},${+s},${+a},${this._x1=+i},${this._y1=+l}`}arcTo(t,n,s,a,i){if(t=+t,n=+n,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,c=s-t,d=a-n,u=l-t,h=o-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>vd)if(!(Math.abs(h*c-d*u)>vd)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let m=s-l,v=a-o,x=c*c+d*d,w=m*m+v*v,j=Math.sqrt(x),g=Math.sqrt(f),b=i*Math.tan((fC-Math.acos((x+f-w)/(2*j*g)))/2),p=b/g,N=b/j;Math.abs(p-1)>vd&&this._append`L${t+p*u},${n+p*h}`,this._append`A${i},${i},0,0,${+(h*m>u*v)},${this._x1=t+N*c},${this._y1=n+N*d}`}}arc(t,n,s,a,i,l){if(t=+t,n=+n,s=+s,l=!!l,s<0)throw new Error(`negative radius: ${s}`);let o=s*Math.cos(a),c=s*Math.sin(a),d=t+o,u=n+c,h=1^l,f=l?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>vd||Math.abs(this._y1-u)>vd)&&this._append`L${d},${u}`,s&&(f<0&&(f=f%mC+mC),f>Ape?this._append`A${s},${s},0,1,${h},${t-o},${n-c}A${s},${s},0,1,${h},${this._x1=d},${this._y1=u}`:f>vd&&this._append`A${s},${s},0,${+(f>=fC)},${h},${this._x1=t+s*Math.cos(i)},${this._y1=n+s*Math.sin(i)}`)}rect(t,n,s,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function LT(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new Epe(t)}function UT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Z7(e){this._context=e}Z7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function T1(e){return new Z7(e)}function Q7(e){return e[0]}function J7(e){return e[1]}function ez(e,t){var n=Ar(!0),s=null,a=T1,i=null,l=LT(o);e=typeof e=="function"?e:e===void 0?Q7:Ar(e),t=typeof t=="function"?t:t===void 0?J7:Ar(t);function o(c){var d,u=(c=UT(c)).length,h,f=!1,m;for(s==null&&(i=a(m=l())),d=0;d<=u;++d)!(d<u&&n(h=c[d],d,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,d,c),+t(h,d,c));if(m)return i=null,m+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ar(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ar(+c),o):t},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ar(!!c),o):n},o.curve=function(c){return arguments.length?(a=c,s!=null&&(i=a(s)),o):a},o.context=function(c){return arguments.length?(c==null?s=i=null:i=a(s=c),o):s},o}function Wy(e,t,n){var s=null,a=Ar(!0),i=null,l=T1,o=null,c=LT(d);e=typeof e=="function"?e:e===void 0?Q7:Ar(+e),t=typeof t=="function"?t:Ar(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?J7:Ar(+n);function d(h){var f,m,v,x=(h=UT(h)).length,w,j=!1,g,b=new Array(x),p=new Array(x);for(i==null&&(o=l(g=c())),f=0;f<=x;++f){if(!(f<x&&a(w=h[f],f,h))===j)if(j=!j)m=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=f-1;v>=m;--v)o.point(b[v],p[v]);o.lineEnd(),o.areaEnd()}j&&(b[f]=+e(w,f,h),p[f]=+t(w,f,h),o.point(s?+s(w,f,h):b[f],n?+n(w,f,h):p[f]))}if(g)return o=null,g+""||null}function u(){return ez().defined(a).curve(l).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:Ar(+h),s=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Ar(+h),d):e},d.x1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:Ar(+h),d):s},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:Ar(+h),n=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Ar(+h),d):t},d.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Ar(+h),d):n},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(n)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Ar(!!h),d):a},d.curve=function(h){return arguments.length?(l=h,i!=null&&(o=l(i)),d):l},d.context=function(h){return arguments.length?(h==null?i=o=null:o=l(i=h),d):i},d}class tz{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Ope(e){return new tz(e,!0)}function Rpe(e){return new tz(e,!1)}const BT={draw(e,t){const n=Wi(t/Db);e.moveTo(n,0),e.arc(0,0,n,0,A1)}},Dpe={draw(e,t){const n=Wi(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},rz=Wi(1/3),Mpe=rz*2,$pe={draw(e,t){const n=Wi(t/Mpe),s=n*rz;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},Ipe={draw(e,t){const n=Wi(t),s=-n/2;e.rect(s,s,n,n)}},Fpe=.8908130915292852,nz=Rb(Db/10)/Rb(7*Db/10),Lpe=Rb(A1/10)*nz,Upe=-Y7(A1/10)*nz,Bpe={draw(e,t){const n=Wi(t*Fpe),s=Lpe*n,a=Upe*n;e.moveTo(0,-n),e.lineTo(s,a);for(let i=1;i<5;++i){const l=A1*i/5,o=Y7(l),c=Rb(l);e.lineTo(c*n,-o*n),e.lineTo(o*s-c*a,c*s+o*a)}e.closePath()}},gk=Wi(3),zpe={draw(e,t){const n=-Wi(t/(gk*3));e.moveTo(0,n*2),e.lineTo(-gk*n,-n),e.lineTo(gk*n,-n),e.closePath()}},Ca=-.5,_a=Wi(3)/2,pC=1/Wi(12),Vpe=(pC/2+1)*3,qpe={draw(e,t){const n=Wi(t/Vpe),s=n/2,a=n*pC,i=s,l=n*pC+n,o=-i,c=l;e.moveTo(s,a),e.lineTo(i,l),e.lineTo(o,c),e.lineTo(Ca*s-_a*a,_a*s+Ca*a),e.lineTo(Ca*i-_a*l,_a*i+Ca*l),e.lineTo(Ca*o-_a*c,_a*o+Ca*c),e.lineTo(Ca*s+_a*a,Ca*a-_a*s),e.lineTo(Ca*i+_a*l,Ca*l-_a*i),e.lineTo(Ca*o+_a*c,Ca*c-_a*o),e.closePath()}};function Wpe(e,t){let n=null,s=LT(a);e=typeof e=="function"?e:Ar(e||BT),t=typeof t=="function"?t:Ar(t===void 0?64:+t);function a(){let i;if(n||(n=i=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ar(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ar(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function Mb(){}function $b(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function sz(e){this._context=e}sz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$b(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$b(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Hpe(e){return new sz(e)}function az(e){this._context=e}az.prototype={areaStart:Mb,areaEnd:Mb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$b(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kpe(e){return new az(e)}function iz(e){this._context=e}iz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:$b(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Gpe(e){return new iz(e)}function lz(e){this._context=e}lz.prototype={areaStart:Mb,areaEnd:Mb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ype(e){return new lz(e)}function VD(e){return e<0?-1:1}function qD(e,t,n){var s=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),l=(n-e._y1)/(a||s<0&&-0),o=(i*a+l*s)/(s+a);return(VD(i)+VD(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function WD(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function vk(e,t,n){var s=e._x0,a=e._y0,i=e._x1,l=e._y1,o=(i-s)/3;e._context.bezierCurveTo(s+o,a+o*t,i-o,l-o*n,i,l)}function Ib(e){this._context=e}Ib.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vk(this,this._t0,WD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,vk(this,WD(this,n=qD(this,e,t)),n);break;default:vk(this,this._t0,n=qD(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function oz(e){this._context=new cz(e)}(oz.prototype=Object.create(Ib.prototype)).point=function(e,t){Ib.prototype.point.call(this,t,e)};function cz(e){this._context=e}cz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,a,i){this._context.bezierCurveTo(t,e,s,n,i,a)}};function Xpe(e){return new Ib(e)}function Zpe(e){return new oz(e)}function dz(e){this._context=e}dz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=HD(e),a=HD(t),i=0,l=1;l<n;++i,++l)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function HD(e){var t,n=e.length-1,s,a=new Array(n),i=new Array(n),l=new Array(n);for(a[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=a[t]/i[t-1],i[t]-=s,l[t]-=s*l[t-1];for(a[n-1]=l[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(l[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Qpe(e){return new dz(e)}function E1(e,t){this._context=e,this._t=t}E1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Jpe(e){return new E1(e,.5)}function exe(e){return new E1(e,0)}function txe(e){return new E1(e,1)}function Vf(e,t){if((l=e.length)>1)for(var n=1,s,a,i=e[t[0]],l,o=i.length;n<l;++n)for(a=i,i=e[t[n]],s=0;s<o;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function xC(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function rxe(e,t){return e[t]}function nxe(e){const t=[];return t.key=e,t}function sxe(){var e=Ar([]),t=xC,n=Vf,s=rxe;function a(i){var l=Array.from(e.apply(this,arguments),nxe),o,c=l.length,d=-1,u;for(const h of i)for(o=0,++d;o<c;++o)(l[o][d]=[0,+s(h,l[o].key,d,i)]).data=h;for(o=0,u=UT(t(l));o<c;++o)l[u[o]].index=o;return n(l,u),l}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ar(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:Ar(+i),a):s},a.order=function(i){return arguments.length?(t=i==null?xC:typeof i=="function"?i:Ar(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??Vf,a):n},a}function axe(e,t){if((s=e.length)>0){for(var n,s,a=0,i=e[0].length,l;a<i;++a){for(l=n=0;n<s;++n)l+=e[n][a][1]||0;if(l)for(n=0;n<s;++n)e[n][a][1]/=l}Vf(e,t)}}function ixe(e,t){if((a=e.length)>0){for(var n=0,s=e[t[0]],a,i=s.length;n<i;++n){for(var l=0,o=0;l<a;++l)o+=e[l][n][1]||0;s[n][1]+=s[n][0]=-o/2}Vf(e,t)}}function lxe(e,t){if(!(!((l=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,s=1,a,i,l;s<i;++s){for(var o=0,c=0,d=0;o<l;++o){for(var u=e[t[o]],h=u[s][1]||0,f=u[s-1][1]||0,m=(h-f)/2,v=0;v<o;++v){var x=e[t[v]],w=x[s][1]||0,j=x[s-1][1]||0;m+=w-j}c+=h,d+=m*h}a[s-1][1]+=a[s-1][0]=n,c&&(n-=d/c)}a[s-1][1]+=a[s-1][0]=n,Vf(e,t)}}function eg(e){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(e)}var oxe=["type","size","sizeType"];function gC(){return gC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gC.apply(this,arguments)}function KD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function GD(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KD(Object(n),!0).forEach(function(s){cxe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KD(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cxe(e,t,n){return t=dxe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dxe(e){var t=uxe(e,"string");return eg(t)=="symbol"?t:t+""}function uxe(e,t){if(eg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(eg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hxe(e,t){if(e==null)return{};var n=fxe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function fxe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var uz={symbolCircle:BT,symbolCross:Dpe,symbolDiamond:$pe,symbolSquare:Ipe,symbolStar:Bpe,symbolTriangle:zpe,symbolWye:qpe},mxe=Math.PI/180,pxe=function(t){var n="symbol".concat(P1(t));return uz[n]||BT},xxe=function(t,n,s){if(n==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*mxe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},gxe=function(t,n){uz["symbol".concat(P1(t))]=n},zT=function(t){var n=t.type,s=n===void 0?"circle":n,a=t.size,i=a===void 0?64:a,l=t.sizeType,o=l===void 0?"area":l,c=hxe(t,oxe),d=GD(GD({},c),{},{type:s,size:i,sizeType:o}),u=function(){var w=pxe(s),j=Wpe().type(w).size(xxe(i,o,s));return j()},h=d.className,f=d.cx,m=d.cy,v=ot(d,!0);return f===+f&&m===+m&&i===+i?Z.createElement("path",gC({},v,{className:Ot("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:u()})):null};zT.registerSymbol=gxe;function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}function vC(){return vC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vC.apply(this,arguments)}function YD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function vxe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YD(Object(n),!0).forEach(function(s){tg(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YD(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function yxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bxe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,fz(s.key),s)}}function jxe(e,t,n){return t&&bxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wxe(e,t,n){return t=Fb(t),Nxe(e,hz()?Reflect.construct(t,n||[],Fb(e).constructor):t.apply(e,n))}function Nxe(e,t){if(t&&(qf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kxe(e)}function kxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hz=function(){return!!e})()}function Fb(e){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fb(e)}function Sxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yC(e,t)}function yC(e,t){return yC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},yC(e,t)}function tg(e,t,n){return t=fz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fz(e){var t=Cxe(e,"string");return qf(t)=="symbol"?t:t+""}function Cxe(e,t){if(qf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(qf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pa=32,VT=function(e){function t(){return yxe(this,t),wxe(this,t,arguments)}return Sxe(t,e),jxe(t,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,i=Pa/2,l=Pa/6,o=Pa/3,c=s.inactive?a:s.color;if(s.type==="plainline")return Z.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:i,x2:Pa,y2:i,className:"recharts-legend-icon"});if(s.type==="line")return Z.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Pa,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(s.type==="rect")return Z.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Pa/8,"h").concat(Pa,"v").concat(Pa*3/4,"h").concat(-Pa,"z"),className:"recharts-legend-icon"});if(Z.isValidElement(s.legendIcon)){var d=vxe({},s);return delete d.legendIcon,Z.cloneElement(s.legendIcon,d)}return Z.createElement(zT,{fill:c,cx:i,cy:i,size:Pa,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,i=a.payload,l=a.iconSize,o=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:Pa,height:Pa},h={display:o==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,v){var x=m.formatter||c,w=Ot(tg(tg({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",m.inactive));if(m.type==="none")return null;var j=gt(m.value)?null:m.value;Ci(!gt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=m.inactive?d:m.color;return Z.createElement("li",vC({className:w,style:h,key:"legend-item-".concat(v)},ju(s.props,m,v)),Z.createElement(cC,{width:l,height:l,viewBox:u,style:f},s.renderIcon(m)),Z.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x?x(j,m,v):j))})}},{key:"render",value:function(){var s=this.props,a=s.payload,i=s.layout,l=s.align;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return Z.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(y.PureComponent);tg(VT,"displayName","Legend");tg(VT,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var _xe=p1;function Pxe(){this.__data__=new _xe,this.size=0}var Axe=Pxe;function Txe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Exe=Txe;function Oxe(e){return this.__data__.get(e)}var Rxe=Oxe;function Dxe(e){return this.__data__.has(e)}var Mxe=Dxe,$xe=p1,Ixe=TT,Fxe=ET,Lxe=200;function Uxe(e,t){var n=this.__data__;if(n instanceof $xe){var s=n.__data__;if(!Ixe||s.length<Lxe-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new Fxe(s)}return n.set(e,t),this.size=n.size,this}var Bxe=Uxe,zxe=p1,Vxe=Axe,qxe=Exe,Wxe=Rxe,Hxe=Mxe,Kxe=Bxe;function Vm(e){var t=this.__data__=new zxe(e);this.size=t.size}Vm.prototype.clear=Vxe;Vm.prototype.delete=qxe;Vm.prototype.get=Wxe;Vm.prototype.has=Hxe;Vm.prototype.set=Kxe;var mz=Vm,Gxe="__lodash_hash_undefined__";function Yxe(e){return this.__data__.set(e,Gxe),this}var Xxe=Yxe;function Zxe(e){return this.__data__.has(e)}var Qxe=Zxe,Jxe=ET,ege=Xxe,tge=Qxe;function Lb(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Jxe;++t<n;)this.add(e[t])}Lb.prototype.add=Lb.prototype.push=ege;Lb.prototype.has=tge;var pz=Lb;function rge(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var xz=rge;function nge(e,t){return e.has(t)}var gz=nge,sge=pz,age=xz,ige=gz,lge=1,oge=2;function cge(e,t,n,s,a,i){var l=n&lge,o=e.length,c=t.length;if(o!=c&&!(l&&c>o))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var h=-1,f=!0,m=n&oge?new sge:void 0;for(i.set(e,t),i.set(t,e);++h<o;){var v=e[h],x=t[h];if(s)var w=l?s(x,v,h,t,e,i):s(v,x,h,e,t,i);if(w!==void 0){if(w)continue;f=!1;break}if(m){if(!age(t,function(j,g){if(!ige(m,g)&&(v===j||a(v,j,n,s,i)))return m.push(g)})){f=!1;break}}else if(!(v===x||a(v,x,n,s,i))){f=!1;break}}return i.delete(e),i.delete(t),f}var vz=cge,dge=Il,uge=dge.Uint8Array,hge=uge;function fge(e){var t=-1,n=Array(e.size);return e.forEach(function(s,a){n[++t]=[a,s]}),n}var mge=fge;function pge(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var qT=pge,XD=Gv,ZD=hge,xge=AT,gge=vz,vge=mge,yge=qT,bge=1,jge=2,wge="[object Boolean]",Nge="[object Date]",kge="[object Error]",Sge="[object Map]",Cge="[object Number]",_ge="[object RegExp]",Pge="[object Set]",Age="[object String]",Tge="[object Symbol]",Ege="[object ArrayBuffer]",Oge="[object DataView]",QD=XD?XD.prototype:void 0,yk=QD?QD.valueOf:void 0;function Rge(e,t,n,s,a,i,l){switch(n){case Oge:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ege:return!(e.byteLength!=t.byteLength||!i(new ZD(e),new ZD(t)));case wge:case Nge:case Cge:return xge(+e,+t);case kge:return e.name==t.name&&e.message==t.message;case _ge:case Age:return e==t+"";case Sge:var o=vge;case Pge:var c=s&bge;if(o||(o=yge),e.size!=t.size&&!c)return!1;var d=l.get(e);if(d)return d==t;s|=jge,l.set(e,t);var u=gge(o(e),o(t),s,a,i,l);return l.delete(e),u;case Tge:if(yk)return yk.call(e)==yk.call(t)}return!1}var Dge=Rge;function Mge(e,t){for(var n=-1,s=t.length,a=e.length;++n<s;)e[a+n]=t[n];return e}var yz=Mge,$ge=yz,Ige=Zs;function Fge(e,t,n){var s=t(e);return Ige(e)?s:$ge(s,n(e))}var Lge=Fge;function Uge(e,t){for(var n=-1,s=e==null?0:e.length,a=0,i=[];++n<s;){var l=e[n];t(l,n,e)&&(i[a++]=l)}return i}var Bge=Uge;function zge(){return[]}var Vge=zge,qge=Bge,Wge=Vge,Hge=Object.prototype,Kge=Hge.propertyIsEnumerable,JD=Object.getOwnPropertySymbols,Gge=JD?function(e){return e==null?[]:(e=Object(e),qge(JD(e),function(t){return Kge.call(e,t)}))}:Wge,Yge=Gge;function Xge(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var Zge=Xge,Qge=Do,Jge=Mo,eve="[object Arguments]";function tve(e){return Jge(e)&&Qge(e)==eve}var rve=tve,eM=rve,nve=Mo,bz=Object.prototype,sve=bz.hasOwnProperty,ave=bz.propertyIsEnumerable,ive=eM(function(){return arguments}())?eM:function(e){return nve(e)&&sve.call(e,"callee")&&!ave.call(e,"callee")},WT=ive,Ub={exports:{}};function lve(){return!1}var ove=lve;Ub.exports;(function(e,t){var n=Il,s=ove,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===a,o=l?n.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||s;e.exports=d})(Ub,Ub.exports);var jz=Ub.exports,cve=9007199254740991,dve=/^(?:0|[1-9]\d*)$/;function uve(e,t){var n=typeof e;return t=t??cve,!!t&&(n=="number"||n!="symbol"&&dve.test(e))&&e>-1&&e%1==0&&e<t}var HT=uve,hve=9007199254740991;function fve(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=hve}var KT=fve,mve=Do,pve=KT,xve=Mo,gve="[object Arguments]",vve="[object Array]",yve="[object Boolean]",bve="[object Date]",jve="[object Error]",wve="[object Function]",Nve="[object Map]",kve="[object Number]",Sve="[object Object]",Cve="[object RegExp]",_ve="[object Set]",Pve="[object String]",Ave="[object WeakMap]",Tve="[object ArrayBuffer]",Eve="[object DataView]",Ove="[object Float32Array]",Rve="[object Float64Array]",Dve="[object Int8Array]",Mve="[object Int16Array]",$ve="[object Int32Array]",Ive="[object Uint8Array]",Fve="[object Uint8ClampedArray]",Lve="[object Uint16Array]",Uve="[object Uint32Array]",$r={};$r[Ove]=$r[Rve]=$r[Dve]=$r[Mve]=$r[$ve]=$r[Ive]=$r[Fve]=$r[Lve]=$r[Uve]=!0;$r[gve]=$r[vve]=$r[Tve]=$r[yve]=$r[Eve]=$r[bve]=$r[jve]=$r[wve]=$r[Nve]=$r[kve]=$r[Sve]=$r[Cve]=$r[_ve]=$r[Pve]=$r[Ave]=!1;function Bve(e){return xve(e)&&pve(e.length)&&!!$r[mve(e)]}var zve=Bve;function Vve(e){return function(t){return e(t)}}var wz=Vve,Bb={exports:{}};Bb.exports;(function(e,t){var n=A7,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,l=i&&n.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();e.exports=o})(Bb,Bb.exports);var qve=Bb.exports,Wve=zve,Hve=wz,tM=qve,rM=tM&&tM.isTypedArray,Kve=rM?Hve(rM):Wve,Nz=Kve,Gve=Zge,Yve=WT,Xve=Zs,Zve=jz,Qve=HT,Jve=Nz,eye=Object.prototype,tye=eye.hasOwnProperty;function rye(e,t){var n=Xve(e),s=!n&&Yve(e),a=!n&&!s&&Zve(e),i=!n&&!s&&!a&&Jve(e),l=n||s||a||i,o=l?Gve(e.length,String):[],c=o.length;for(var d in e)(t||tye.call(e,d))&&!(l&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Qve(d,c)))&&o.push(d);return o}var nye=rye,sye=Object.prototype;function aye(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||sye;return e===n}var iye=aye;function lye(e,t){return function(n){return e(t(n))}}var kz=lye,oye=kz,cye=oye(Object.keys,Object),dye=cye,uye=iye,hye=dye,fye=Object.prototype,mye=fye.hasOwnProperty;function pye(e){if(!uye(e))return hye(e);var t=[];for(var n in Object(e))mye.call(e,n)&&n!="constructor"&&t.push(n);return t}var xye=pye,gye=PT,vye=KT;function yye(e){return e!=null&&vye(e.length)&&!gye(e)}var Yv=yye,bye=nye,jye=xye,wye=Yv;function Nye(e){return wye(e)?bye(e):jye(e)}var O1=Nye,kye=Lge,Sye=Yge,Cye=O1;function _ye(e){return kye(e,Cye,Sye)}var Pye=_ye,nM=Pye,Aye=1,Tye=Object.prototype,Eye=Tye.hasOwnProperty;function Oye(e,t,n,s,a,i){var l=n&Aye,o=nM(e),c=o.length,d=nM(t),u=d.length;if(c!=u&&!l)return!1;for(var h=c;h--;){var f=o[h];if(!(l?f in t:Eye.call(t,f)))return!1}var m=i.get(e),v=i.get(t);if(m&&v)return m==t&&v==e;var x=!0;i.set(e,t),i.set(t,e);for(var w=l;++h<c;){f=o[h];var j=e[f],g=t[f];if(s)var b=l?s(g,j,f,t,e,i):s(j,g,f,e,t,i);if(!(b===void 0?j===g||a(j,g,n,s,i):b)){x=!1;break}w||(w=f=="constructor")}if(x&&!w){var p=e.constructor,N=t.constructor;p!=N&&"constructor"in e&&"constructor"in t&&!(typeof p=="function"&&p instanceof p&&typeof N=="function"&&N instanceof N)&&(x=!1)}return i.delete(e),i.delete(t),x}var Rye=Oye,Dye=Lu,Mye=Il,$ye=Dye(Mye,"DataView"),Iye=$ye,Fye=Lu,Lye=Il,Uye=Fye(Lye,"Promise"),Bye=Uye,zye=Lu,Vye=Il,qye=zye(Vye,"Set"),Sz=qye,Wye=Lu,Hye=Il,Kye=Wye(Hye,"WeakMap"),Gye=Kye,bC=Iye,jC=TT,wC=Bye,NC=Sz,kC=Gye,Cz=Do,qm=E7,sM="[object Map]",Yye="[object Object]",aM="[object Promise]",iM="[object Set]",lM="[object WeakMap]",oM="[object DataView]",Xye=qm(bC),Zye=qm(jC),Qye=qm(wC),Jye=qm(NC),e0e=qm(kC),yd=Cz;(bC&&yd(new bC(new ArrayBuffer(1)))!=oM||jC&&yd(new jC)!=sM||wC&&yd(wC.resolve())!=aM||NC&&yd(new NC)!=iM||kC&&yd(new kC)!=lM)&&(yd=function(e){var t=Cz(e),n=t==Yye?e.constructor:void 0,s=n?qm(n):"";if(s)switch(s){case Xye:return oM;case Zye:return sM;case Qye:return aM;case Jye:return iM;case e0e:return lM}return t});var t0e=yd,bk=mz,r0e=vz,n0e=Dge,s0e=Rye,cM=t0e,dM=Zs,uM=jz,a0e=Nz,i0e=1,hM="[object Arguments]",fM="[object Array]",Hy="[object Object]",l0e=Object.prototype,mM=l0e.hasOwnProperty;function o0e(e,t,n,s,a,i){var l=dM(e),o=dM(t),c=l?fM:cM(e),d=o?fM:cM(t);c=c==hM?Hy:c,d=d==hM?Hy:d;var u=c==Hy,h=d==Hy,f=c==d;if(f&&uM(e)){if(!uM(t))return!1;l=!0,u=!1}if(f&&!u)return i||(i=new bk),l||a0e(e)?r0e(e,t,n,s,a,i):n0e(e,t,c,n,s,a,i);if(!(n&i0e)){var m=u&&mM.call(e,"__wrapped__"),v=h&&mM.call(t,"__wrapped__");if(m||v){var x=m?e.value():e,w=v?t.value():t;return i||(i=new bk),a(x,w,n,s,i)}}return f?(i||(i=new bk),s0e(e,t,n,s,a,i)):!1}var c0e=o0e,d0e=c0e,pM=Mo;function _z(e,t,n,s,a){return e===t?!0:e==null||t==null||!pM(e)&&!pM(t)?e!==e&&t!==t:d0e(e,t,n,s,_z,a)}var GT=_z,u0e=mz,h0e=GT,f0e=1,m0e=2;function p0e(e,t,n,s){var a=n.length,i=a,l=!s;if(e==null)return!i;for(e=Object(e);a--;){var o=n[a];if(l&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<i;){o=n[a];var c=o[0],d=e[c],u=o[1];if(l&&o[2]){if(d===void 0&&!(c in e))return!1}else{var h=new u0e;if(s)var f=s(d,u,c,e,t,h);if(!(f===void 0?h0e(u,d,f0e|m0e,s,h):f))return!1}}return!0}var x0e=p0e,g0e=nd;function v0e(e){return e===e&&!g0e(e)}var Pz=v0e,y0e=Pz,b0e=O1;function j0e(e){for(var t=b0e(e),n=t.length;n--;){var s=t[n],a=e[s];t[n]=[s,a,y0e(a)]}return t}var w0e=j0e;function N0e(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var Az=N0e,k0e=x0e,S0e=w0e,C0e=Az;function _0e(e){var t=S0e(e);return t.length==1&&t[0][2]?C0e(t[0][0],t[0][1]):function(n){return n===e||k0e(n,e,t)}}var P0e=_0e;function A0e(e,t){return e!=null&&t in Object(e)}var T0e=A0e,E0e=$7,O0e=WT,R0e=Zs,D0e=HT,M0e=KT,$0e=g1;function I0e(e,t,n){t=E0e(t,e);for(var s=-1,a=t.length,i=!1;++s<a;){var l=$0e(t[s]);if(!(i=e!=null&&n(e,l)))break;e=e[l]}return i||++s!=a?i:(a=e==null?0:e.length,!!a&&M0e(a)&&D0e(l,a)&&(R0e(e)||O0e(e)))}var F0e=I0e,L0e=T0e,U0e=F0e;function B0e(e,t){return e!=null&&U0e(e,t,L0e)}var z0e=B0e,V0e=GT,q0e=I7,W0e=z0e,H0e=_T,K0e=Pz,G0e=Az,Y0e=g1,X0e=1,Z0e=2;function Q0e(e,t){return H0e(e)&&K0e(t)?G0e(Y0e(e),t):function(n){var s=q0e(n,e);return s===void 0&&s===t?W0e(n,e):V0e(t,s,X0e|Z0e)}}var J0e=Q0e;function ebe(e){return e}var Wm=ebe;function tbe(e){return function(t){return t==null?void 0:t[e]}}var rbe=tbe,nbe=DT;function sbe(e){return function(t){return nbe(t,e)}}var abe=sbe,ibe=rbe,lbe=abe,obe=_T,cbe=g1;function dbe(e){return obe(e)?ibe(cbe(e)):lbe(e)}var ube=dbe,hbe=P0e,fbe=J0e,mbe=Wm,pbe=Zs,xbe=ube;function gbe(e){return typeof e=="function"?e:e==null?mbe:typeof e=="object"?pbe(e)?fbe(e[0],e[1]):hbe(e):xbe(e)}var Fl=gbe;function vbe(e,t,n,s){for(var a=e.length,i=n+(s?1:-1);s?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Tz=vbe;function ybe(e){return e!==e}var bbe=ybe;function jbe(e,t,n){for(var s=n-1,a=e.length;++s<a;)if(e[s]===t)return s;return-1}var wbe=jbe,Nbe=Tz,kbe=bbe,Sbe=wbe;function Cbe(e,t,n){return t===t?Sbe(e,t,n):Nbe(e,kbe,n)}var _be=Cbe,Pbe=_be;function Abe(e,t){var n=e==null?0:e.length;return!!n&&Pbe(e,t,0)>-1}var Tbe=Abe;function Ebe(e,t,n){for(var s=-1,a=e==null?0:e.length;++s<a;)if(n(t,e[s]))return!0;return!1}var Obe=Ebe;function Rbe(){}var Dbe=Rbe,jk=Sz,Mbe=Dbe,$be=qT,Ibe=1/0,Fbe=jk&&1/$be(new jk([,-0]))[1]==Ibe?function(e){return new jk(e)}:Mbe,Lbe=Fbe,Ube=pz,Bbe=Tbe,zbe=Obe,Vbe=gz,qbe=Lbe,Wbe=qT,Hbe=200;function Kbe(e,t,n){var s=-1,a=Bbe,i=e.length,l=!0,o=[],c=o;if(n)l=!1,a=zbe;else if(i>=Hbe){var d=t?null:qbe(e);if(d)return Wbe(d);l=!1,a=Vbe,c=new Ube}else c=t?[]:o;e:for(;++s<i;){var u=e[s],h=t?t(u):u;if(u=n||u!==0?u:0,l&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;t&&c.push(h),o.push(u)}else a(c,h,n)||(c!==o&&c.push(h),o.push(u))}return o}var Gbe=Kbe,Ybe=Fl,Xbe=Gbe;function Zbe(e,t){return e&&e.length?Xbe(e,Ybe(t)):[]}var Qbe=Zbe;const xM=Qt(Qbe);function Ez(e,t,n){return t===!0?xM(e,n):gt(t)?xM(e,t):e}function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}var Jbe=["ref"];function gM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Vl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gM(Object(n),!0).forEach(function(s){R1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function eje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vM(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Rz(s.key),s)}}function tje(e,t,n){return t&&vM(e.prototype,t),n&&vM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rje(e,t,n){return t=zb(t),nje(e,Oz()?Reflect.construct(t,n||[],zb(e).constructor):t.apply(e,n))}function nje(e,t){if(t&&(Wf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sje(e)}function sje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oz=function(){return!!e})()}function zb(e){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zb(e)}function aje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SC(e,t)}function SC(e,t){return SC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},SC(e,t)}function R1(e,t,n){return t=Rz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rz(e){var t=ije(e,"string");return Wf(t)=="symbol"?t:t+""}function ije(e,t){if(Wf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Wf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lje(e,t){if(e==null)return{};var n=oje(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function oje(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function cje(e){return e.value}function dje(e,t){if(Z.isValidElement(e))return Z.cloneElement(e,t);if(typeof e=="function")return Z.createElement(e,t);t.ref;var n=lje(t,Jbe);return Z.createElement(VT,n)}var yM=1,Bh=function(e){function t(){var n;eje(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=rje(this,t,[].concat(a)),R1(n,"lastBoundingBox",{width:-1,height:-1}),n}return aje(t,e),tje(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>yM||Math.abs(a.height-this.lastBoundingBox.height)>yM)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Vl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,i=a.layout,l=a.align,o=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,h,f;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(l==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();h={left:((d||0)-m.width)/2}}else h=l==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(o==="middle"){var v=this.getBBoxSnapshot();f={top:((u||0)-v.height)/2}}else f=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Vl(Vl({},h),f)}},{key:"render",value:function(){var s=this,a=this.props,i=a.content,l=a.width,o=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,h=Vl(Vl({position:"absolute",width:l||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return Z.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){s.wrapperNode=m}},dje(i,Vl(Vl({},this.props),{},{payload:Ez(u,d,cje)})))}}],[{key:"getWithHeight",value:function(s,a){var i=Vl(Vl({},this.defaultProps),s.props),l=i.layout;return l==="vertical"&&ze(s.props.height)?{height:s.props.height}:l==="horizontal"?{width:s.props.width||a}:null}}])}(y.PureComponent);R1(Bh,"displayName","Legend");R1(Bh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var bM=Gv,uje=WT,hje=Zs,jM=bM?bM.isConcatSpreadable:void 0;function fje(e){return hje(e)||uje(e)||!!(jM&&e&&e[jM])}var mje=fje,pje=yz,xje=mje;function Dz(e,t,n,s,a){var i=-1,l=e.length;for(n||(n=xje),a||(a=[]);++i<l;){var o=e[i];t>0&&n(o)?t>1?Dz(o,t-1,n,s,a):pje(a,o):s||(a[a.length]=o)}return a}var Mz=Dz;function gje(e){return function(t,n,s){for(var a=-1,i=Object(t),l=s(t),o=l.length;o--;){var c=l[e?o:++a];if(n(i[c],c,i)===!1)break}return t}}var vje=gje,yje=vje,bje=yje(),jje=bje,wje=jje,Nje=O1;function kje(e,t){return e&&wje(e,t,Nje)}var $z=kje,Sje=Yv;function Cje(e,t){return function(n,s){if(n==null)return n;if(!Sje(n))return e(n,s);for(var a=n.length,i=t?a:-1,l=Object(n);(t?i--:++i<a)&&s(l[i],i,l)!==!1;);return n}}var _je=Cje,Pje=$z,Aje=_je,Tje=Aje(Pje),YT=Tje,Eje=YT,Oje=Yv;function Rje(e,t){var n=-1,s=Oje(e)?Array(e.length):[];return Eje(e,function(a,i,l){s[++n]=t(a,i,l)}),s}var Iz=Rje;function Dje(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Mje=Dje,wM=Im;function $je(e,t){if(e!==t){var n=e!==void 0,s=e===null,a=e===e,i=wM(e),l=t!==void 0,o=t===null,c=t===t,d=wM(t);if(!o&&!d&&!i&&e>t||i&&l&&c&&!o&&!d||s&&l&&c||!n&&c||!a)return 1;if(!s&&!i&&!d&&e<t||d&&n&&a&&!s&&!i||o&&n&&a||!l&&a||!c)return-1}return 0}var Ije=$je,Fje=Ije;function Lje(e,t,n){for(var s=-1,a=e.criteria,i=t.criteria,l=a.length,o=n.length;++s<l;){var c=Fje(a[s],i[s]);if(c){if(s>=o)return c;var d=n[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var Uje=Lje,wk=RT,Bje=DT,zje=Fl,Vje=Iz,qje=Mje,Wje=wz,Hje=Uje,Kje=Wm,Gje=Zs;function Yje(e,t,n){t.length?t=wk(t,function(i){return Gje(i)?function(l){return Bje(l,i.length===1?i[0]:i)}:i}):t=[Kje];var s=-1;t=wk(t,Wje(zje));var a=Vje(e,function(i,l,o){var c=wk(t,function(d){return d(i)});return{criteria:c,index:++s,value:i}});return qje(a,function(i,l){return Hje(i,l,n)})}var Xje=Yje;function Zje(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Qje=Zje,Jje=Qje,NM=Math.max;function ewe(e,t,n){return t=NM(t===void 0?e.length-1:t,0),function(){for(var s=arguments,a=-1,i=NM(s.length-t,0),l=Array(i);++a<i;)l[a]=s[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=s[a];return o[t]=n(l),Jje(e,this,o)}}var twe=ewe;function rwe(e){return function(){return e}}var nwe=rwe,swe=Lu,awe=function(){try{var e=swe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Fz=awe,iwe=nwe,kM=Fz,lwe=Wm,owe=kM?function(e,t){return kM(e,"toString",{configurable:!0,enumerable:!1,value:iwe(t),writable:!0})}:lwe,cwe=owe,dwe=800,uwe=16,hwe=Date.now;function fwe(e){var t=0,n=0;return function(){var s=hwe(),a=uwe-(s-n);if(n=s,a>0){if(++t>=dwe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var mwe=fwe,pwe=cwe,xwe=mwe,gwe=xwe(pwe),vwe=gwe,ywe=Wm,bwe=twe,jwe=vwe;function wwe(e,t){return jwe(bwe(e,t,ywe),e+"")}var Nwe=wwe,kwe=AT,Swe=Yv,Cwe=HT,_we=nd;function Pwe(e,t,n){if(!_we(n))return!1;var s=typeof t;return(s=="number"?Swe(n)&&Cwe(t,n.length):s=="string"&&t in n)?kwe(n[t],e):!1}var D1=Pwe,Awe=Mz,Twe=Xje,Ewe=Nwe,SM=D1,Owe=Ewe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&SM(e,t[0],t[1])?t=[]:n>2&&SM(t[0],t[1],t[2])&&(t=[t[0]]),Twe(e,Awe(t,1),[])}),Rwe=Owe;const XT=Qt(Rwe);function rg(e){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rg(e)}function CC(){return CC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},CC.apply(this,arguments)}function Dwe(e,t){return Fwe(e)||Iwe(e,t)||$we(e,t)||Mwe()}function Mwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $we(e,t){if(e){if(typeof e=="string")return CM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CM(e,t)}}function CM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Iwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Fwe(e){if(Array.isArray(e))return e}function _M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Nk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_M(Object(n),!0).forEach(function(s){Lwe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_M(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Lwe(e,t,n){return t=Uwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uwe(e){var t=Bwe(e,"string");return rg(t)=="symbol"?t:t+""}function Bwe(e,t){if(rg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(rg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zwe(e){return Array.isArray(e)&&An(e[0])&&An(e[1])?e.join(" ~ "):e}var Vwe=function(t){var n=t.separator,s=n===void 0?" : ":n,a=t.contentStyle,i=a===void 0?{}:a,l=t.itemStyle,o=l===void 0?{}:l,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,h=t.formatter,f=t.itemSorter,m=t.wrapperClassName,v=t.labelClassName,x=t.label,w=t.labelFormatter,j=t.accessibilityLayer,g=j===void 0?!1:j,b=function(){if(u&&u.length){var $={padding:0,margin:0},A=(f?XT(u,f):u).map(function(T,O){if(T.type==="none")return null;var z=Nk({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},o),F=T.formatter||h||zwe,R=T.value,I=T.name,Q=R,Y=I;if(F&&Q!=null&&Y!=null){var K=F(R,I,T,O,u);if(Array.isArray(K)){var oe=Dwe(K,2);Q=oe[0],Y=oe[1]}else Q=K}return Z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(O),style:z},An(Y)?Z.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,An(Y)?Z.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,Z.createElement("span",{className:"recharts-tooltip-item-value"},Q),Z.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return Z.createElement("ul",{className:"recharts-tooltip-item-list",style:$},A)}return null},p=Nk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),N=Nk({margin:0},d),k=!Tt(x),C=k?x:"",_=Ot("recharts-default-tooltip",m),P=Ot("recharts-tooltip-label",v);k&&w&&u!==void 0&&u!==null&&(C=w(x,u));var D=g?{role:"status","aria-live":"assertive"}:{};return Z.createElement("div",CC({className:_,style:p},D),Z.createElement("p",{className:P,style:N},Z.isValidElement(C)?C:"".concat(C)),b())};function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function Ky(e,t,n){return t=qwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qwe(e){var t=Wwe(e,"string");return ng(t)=="symbol"?t:t+""}function Wwe(e,t){if(ng(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(ng(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bp="recharts-tooltip-wrapper",Hwe={visibility:"hidden"};function Kwe(e){var t=e.coordinate,n=e.translateX,s=e.translateY;return Ot(bp,Ky(Ky(Ky(Ky({},"".concat(bp,"-right"),ze(n)&&t&&ze(t.x)&&n>=t.x),"".concat(bp,"-left"),ze(n)&&t&&ze(t.x)&&n<t.x),"".concat(bp,"-bottom"),ze(s)&&t&&ze(t.y)&&s>=t.y),"".concat(bp,"-top"),ze(s)&&t&&ze(t.y)&&s<t.y))}function PM(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.key,a=e.offsetTopLeft,i=e.position,l=e.reverseDirection,o=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&ze(i[s]))return i[s];var u=n[s]-o-a,h=n[s]+a;if(t[s])return l[s]?u:h;if(l[s]){var f=u,m=c[s];return f<m?Math.max(h,c[s]):Math.max(u,c[s])}var v=h+o,x=c[s]+d;return v>x?Math.max(u,c[s]):Math.max(h,c[s])}function Gwe(e){var t=e.translateX,n=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Ywe(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,l=e.tooltipBox,o=e.useTranslate3d,c=e.viewBox,d,u,h;return l.height>0&&l.width>0&&n?(u=PM({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),h=PM({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=Gwe({translateX:u,translateY:h,useTranslate3d:o})):d=Hwe,{cssProperties:d,cssClasses:Kwe({translateX:u,translateY:h,coordinate:n})}}function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function AM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function TM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AM(Object(n),!0).forEach(function(s){PC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Xwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zwe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Uz(s.key),s)}}function Qwe(e,t,n){return t&&Zwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jwe(e,t,n){return t=Vb(t),e1e(e,Lz()?Reflect.construct(t,n||[],Vb(e).constructor):t.apply(e,n))}function e1e(e,t){if(t&&(Hf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t1e(e)}function t1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lz=function(){return!!e})()}function Vb(e){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vb(e)}function r1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_C(e,t)}function _C(e,t){return _C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},_C(e,t)}function PC(e,t,n){return t=Uz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uz(e){var t=n1e(e,"string");return Hf(t)=="symbol"?t:t+""}function n1e(e,t){if(Hf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Hf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EM=1,s1e=function(e){function t(){var n;Xwe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=Jwe(this,t,[].concat(a)),PC(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),PC(n,"handleKeyDown",function(l){if(l.key==="Escape"){var o,c,d,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),n}return r1e(t,e),Qwe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>EM||Math.abs(s.height-this.state.lastBoundingBox.height)>EM)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,h=a.hasPayload,f=a.isAnimationActive,m=a.offset,v=a.position,x=a.reverseDirection,w=a.useTranslate3d,j=a.viewBox,g=a.wrapperStyle,b=Ywe({allowEscapeViewBox:l,coordinate:u,offsetTopLeft:m,position:v,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:j}),p=b.cssClasses,N=b.cssProperties,k=TM(TM({transition:f&&i?"transform ".concat(o,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},g);return Z.createElement("div",{tabIndex:-1,className:p,style:k,ref:function(_){s.wrapperNode=_}},d)}}])}(y.PureComponent),a1e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},_i={isSsr:a1e(),get:function(t){return _i[t]},set:function(t,n){if(typeof t=="string")_i[t]=n;else{var s=Object.keys(t);s&&s.length&&s.forEach(function(a){_i[a]=t[a]})}}};function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function OM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function RM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OM(Object(n),!0).forEach(function(s){ZT(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function i1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l1e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,zz(s.key),s)}}function o1e(e,t,n){return t&&l1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function c1e(e,t,n){return t=qb(t),d1e(e,Bz()?Reflect.construct(t,n||[],qb(e).constructor):t.apply(e,n))}function d1e(e,t){if(t&&(Kf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u1e(e)}function u1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bz=function(){return!!e})()}function qb(e){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qb(e)}function h1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AC(e,t)}function AC(e,t){return AC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},AC(e,t)}function ZT(e,t,n){return t=zz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zz(e){var t=f1e(e,"string");return Kf(t)=="symbol"?t:t+""}function f1e(e,t){if(Kf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Kf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m1e(e){return e.dataKey}function p1e(e,t){return Z.isValidElement(e)?Z.cloneElement(e,t):typeof e=="function"?Z.createElement(e,t):Z.createElement(Vwe,t)}var tn=function(e){function t(){return i1e(this,t),c1e(this,t,arguments)}return h1e(t,e),o1e(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,h=a.filterNull,f=a.isAnimationActive,m=a.offset,v=a.payload,x=a.payloadUniqBy,w=a.position,j=a.reverseDirection,g=a.useTranslate3d,b=a.viewBox,p=a.wrapperStyle,N=v??[];h&&N.length&&(N=Ez(v.filter(function(C){return C.value!=null&&(C.hide!==!0||s.props.includeHidden)}),x,m1e));var k=N.length>0;return Z.createElement(s1e,{allowEscapeViewBox:l,animationDuration:o,animationEasing:c,isAnimationActive:f,active:i,coordinate:u,hasPayload:k,offset:m,position:w,reverseDirection:j,useTranslate3d:g,viewBox:b,wrapperStyle:p},p1e(d,RM(RM({},this.props),{},{payload:N})))}}])}(y.PureComponent);ZT(tn,"displayName","Tooltip");ZT(tn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!_i.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var x1e=Il,g1e=function(){return x1e.Date.now()},v1e=g1e,y1e=/\s/;function b1e(e){for(var t=e.length;t--&&y1e.test(e.charAt(t)););return t}var j1e=b1e,w1e=j1e,N1e=/^\s+/;function k1e(e){return e&&e.slice(0,w1e(e)+1).replace(N1e,"")}var S1e=k1e,C1e=S1e,DM=nd,_1e=Im,MM=NaN,P1e=/^[-+]0x[0-9a-f]+$/i,A1e=/^0b[01]+$/i,T1e=/^0o[0-7]+$/i,E1e=parseInt;function O1e(e){if(typeof e=="number")return e;if(_1e(e))return MM;if(DM(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=DM(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=C1e(e);var n=A1e.test(e);return n||T1e.test(e)?E1e(e.slice(2),n?2:8):P1e.test(e)?MM:+e}var Vz=O1e,R1e=nd,kk=v1e,$M=Vz,D1e="Expected a function",M1e=Math.max,$1e=Math.min;function I1e(e,t,n){var s,a,i,l,o,c,d=0,u=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(D1e);t=$M(t)||0,R1e(n)&&(u=!!n.leading,h="maxWait"in n,i=h?M1e($M(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f);function m(k){var C=s,_=a;return s=a=void 0,d=k,l=e.apply(_,C),l}function v(k){return d=k,o=setTimeout(j,t),u?m(k):l}function x(k){var C=k-c,_=k-d,P=t-C;return h?$1e(P,i-_):P}function w(k){var C=k-c,_=k-d;return c===void 0||C>=t||C<0||h&&_>=i}function j(){var k=kk();if(w(k))return g(k);o=setTimeout(j,x(k))}function g(k){return o=void 0,f&&s?m(k):(s=a=void 0,l)}function b(){o!==void 0&&clearTimeout(o),d=0,s=c=a=o=void 0}function p(){return o===void 0?l:g(kk())}function N(){var k=kk(),C=w(k);if(s=arguments,a=this,c=k,C){if(o===void 0)return v(c);if(h)return clearTimeout(o),o=setTimeout(j,t),m(c)}return o===void 0&&(o=setTimeout(j,t)),l}return N.cancel=b,N.flush=p,N}var qz=I1e;const F1e=Qt(qz);var L1e=qz,U1e=nd,B1e="Expected a function";function z1e(e,t,n){var s=!0,a=!0;if(typeof e!="function")throw new TypeError(B1e);return U1e(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),L1e(e,t,{leading:s,maxWait:t,trailing:a})}var V1e=z1e;const QT=Qt(V1e);function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}function IM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Gy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IM(Object(n),!0).forEach(function(s){q1e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function q1e(e,t,n){return t=W1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W1e(e){var t=H1e(e,"string");return sg(t)=="symbol"?t:t+""}function H1e(e,t){if(sg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(sg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K1e(e,t){return Z1e(e)||X1e(e,t)||Y1e(e,t)||G1e()}function G1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y1e(e,t){if(e){if(typeof e=="string")return FM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FM(e,t)}}function FM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function X1e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Z1e(e){if(Array.isArray(e))return e}var pa=y.forwardRef(function(e,t){var n=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,i=e.width,l=i===void 0?"100%":i,o=e.height,c=o===void 0?"100%":o,d=e.minWidth,u=d===void 0?0:d,h=e.minHeight,f=e.maxHeight,m=e.children,v=e.debounce,x=v===void 0?0:v,w=e.id,j=e.className,g=e.onResize,b=e.style,p=b===void 0?{}:b,N=y.useRef(null),k=y.useRef();k.current=g,y.useImperativeHandle(t,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var C=y.useState({containerWidth:a.width,containerHeight:a.height}),_=K1e(C,2),P=_[0],D=_[1],E=y.useCallback(function(A,T){D(function(O){var z=Math.round(A),F=Math.round(T);return O.containerWidth===z&&O.containerHeight===F?O:{containerWidth:z,containerHeight:F}})},[]);y.useEffect(function(){var A=function(I){var Q,Y=I[0].contentRect,K=Y.width,oe=Y.height;E(K,oe),(Q=k.current)===null||Q===void 0||Q.call(k,K,oe)};x>0&&(A=QT(A,x,{trailing:!0,leading:!1}));var T=new ResizeObserver(A),O=N.current.getBoundingClientRect(),z=O.width,F=O.height;return E(z,F),T.observe(N.current),function(){T.disconnect()}},[E,x]);var $=y.useMemo(function(){var A=P.containerWidth,T=P.containerHeight;if(A<0||T<0)return null;Ci(Pd(l)||Pd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,c),Ci(!n||n>0,"The aspect(%s) must be greater than zero.",n);var O=Pd(l)?A:l,z=Pd(c)?T:c;n&&n>0&&(O?z=O/n:z&&(O=z*n),f&&z>f&&(z=f)),Ci(O>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,z,l,c,u,h,n);var F=!Array.isArray(m)&&xo(m.type).endsWith("Chart");return Z.Children.map(m,function(R){return Z.isValidElement(R)?y.cloneElement(R,Gy({width:O,height:z},F?{style:Gy({height:"100%",width:"100%",maxHeight:z,maxWidth:O},R.props.style)}:{})):R})},[n,m,c,f,h,u,P,l]);return Z.createElement("div",{id:w?"".concat(w):void 0,className:Ot("recharts-responsive-container",j),style:Gy(Gy({},p),{},{width:l,height:c,minWidth:u,minHeight:h,maxHeight:f}),ref:N},$)}),Hm=function(t){return null};Hm.displayName="Cell";function ag(e){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ag(e)}function LM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function TC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LM(Object(n),!0).forEach(function(s){Q1e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Q1e(e,t,n){return t=J1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J1e(e){var t=eNe(e,"string");return ag(t)=="symbol"?t:t+""}function eNe(e,t){if(ag(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(ag(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eh={widthCache:{},cacheCount:0},tNe=2e3,rNe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UM="recharts_measurement_span";function nNe(e){var t=TC({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var cx=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||_i.isSsr)return{width:0,height:0};var s=nNe(n),a=JSON.stringify({text:t,copyStyle:s});if(eh.widthCache[a])return eh.widthCache[a];try{var i=document.getElementById(UM);i||(i=document.createElement("span"),i.setAttribute("id",UM),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=TC(TC({},rNe),s);Object.assign(i.style,l),i.textContent="".concat(t);var o=i.getBoundingClientRect(),c={width:o.width,height:o.height};return eh.widthCache[a]=c,++eh.cacheCount>tNe&&(eh.cacheCount=0,eh.widthCache={}),c}catch{return{width:0,height:0}}},sNe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function ig(e){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ig(e)}function Wb(e,t){return oNe(e)||lNe(e,t)||iNe(e,t)||aNe()}function aNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iNe(e,t){if(e){if(typeof e=="string")return BM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BM(e,t)}}function BM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function lNe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function oNe(e){if(Array.isArray(e))return e}function cNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zM(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uNe(s.key),s)}}function dNe(e,t,n){return t&&zM(e.prototype,t),n&&zM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uNe(e){var t=hNe(e,"string");return ig(t)=="symbol"?t:t+""}function hNe(e,t){if(ig(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(ig(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fNe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mNe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Wz={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pNe=Object.keys(Wz),wh="NaN";function xNe(e,t){return e*Wz[t]}var Yy=function(){function e(t,n){cNe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!fNe.test(n)&&(this.num=NaN,this.unit=""),pNe.includes(n)&&(this.num=xNe(t,n),this.unit="px")}return dNe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var s,a=(s=mNe.exec(n))!==null&&s!==void 0?s:[],i=Wb(a,3),l=i[1],o=i[2];return new e(parseFloat(l),o??"")}}])}();function Hz(e){if(e.includes(wh))return wh;for(var t=e;t.includes("*")||t.includes("/");){var n,s=(n=VM.exec(t))!==null&&n!==void 0?n:[],a=Wb(s,4),i=a[1],l=a[2],o=a[3],c=Yy.parse(i??""),d=Yy.parse(o??""),u=l==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return wh;t=t.replace(VM,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,f=(h=qM.exec(t))!==null&&h!==void 0?h:[],m=Wb(f,4),v=m[1],x=m[2],w=m[3],j=Yy.parse(v??""),g=Yy.parse(w??""),b=x==="+"?j.add(g):j.subtract(g);if(b.isNaN())return wh;t=t.replace(qM,b.toString())}return t}var WM=/\(([^()]*)\)/;function gNe(e){for(var t=e;t.includes("(");){var n=WM.exec(t),s=Wb(n,2),a=s[1];t=t.replace(WM,Hz(a))}return t}function vNe(e){var t=e.replace(/\s+/g,"");return t=gNe(t),t=Hz(t),t}function yNe(e){try{return vNe(e)}catch{return wh}}function Sk(e){var t=yNe(e.slice(5,-1));return t===wh?"":t}var bNe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jNe=["dx","dy","angle","className","breakAll"];function EC(){return EC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},EC.apply(this,arguments)}function HM(e,t){if(e==null)return{};var n=wNe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function wNe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function KM(e,t){return CNe(e)||SNe(e,t)||kNe(e,t)||NNe()}function NNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kNe(e,t){if(e){if(typeof e=="string")return GM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GM(e,t)}}function GM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function SNe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function CNe(e){if(Array.isArray(e))return e}var Kz=/[ \f\n\r\t\v\u2028\u2029]+/,Gz=function(t){var n=t.children,s=t.breakAll,a=t.style;try{var i=[];Tt(n)||(s?i=n.toString().split(""):i=n.toString().split(Kz));var l=i.map(function(c){return{word:c,width:cx(c,a).width}}),o=s?0:cx(" ",a).width;return{wordsWithComputedWidth:l,spaceWidth:o}}catch{return null}},_Ne=function(t,n,s,a,i){var l=t.maxLines,o=t.children,c=t.style,d=t.breakAll,u=ze(l),h=o,f=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O.reduce(function(z,F){var R=F.word,I=F.width,Q=z[z.length-1];if(Q&&(a==null||i||Q.width+I+s<Number(a)))Q.words.push(R),Q.width+=I+s;else{var Y={words:[R],width:I};z.push(Y)}return z},[])},m=f(n),v=function(O){return O.reduce(function(z,F){return z.width>F.width?z:F})};if(!u)return m;for(var x="…",w=function(O){var z=h.slice(0,O),F=Gz({breakAll:d,style:c,children:z+x}).wordsWithComputedWidth,R=f(F),I=R.length>l||v(R).width>Number(a);return[I,R]},j=0,g=h.length-1,b=0,p;j<=g&&b<=h.length-1;){var N=Math.floor((j+g)/2),k=N-1,C=w(k),_=KM(C,2),P=_[0],D=_[1],E=w(N),$=KM(E,1),A=$[0];if(!P&&!A&&(j=N+1),P&&A&&(g=N-1),!P&&A){p=D;break}b++}return p||m},YM=function(t){var n=Tt(t)?[]:t.toString().split(Kz);return[{words:n}]},PNe=function(t){var n=t.width,s=t.scaleToFit,a=t.children,i=t.style,l=t.breakAll,o=t.maxLines;if((n||s)&&!_i.isSsr){var c,d,u=Gz({breakAll:l,children:a,style:i});if(u){var h=u.wordsWithComputedWidth,f=u.spaceWidth;c=h,d=f}else return YM(a);return _Ne({breakAll:l,children:a,maxLines:o,style:i},c,d,n,s)}return YM(a)},XM="#808080",wu=function(t){var n=t.x,s=n===void 0?0:n,a=t.y,i=a===void 0?0:a,l=t.lineHeight,o=l===void 0?"1em":l,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,h=u===void 0?!1:u,f=t.textAnchor,m=f===void 0?"start":f,v=t.verticalAnchor,x=v===void 0?"end":v,w=t.fill,j=w===void 0?XM:w,g=HM(t,bNe),b=y.useMemo(function(){return PNe({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:h,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,h,g.style,g.width]),p=g.dx,N=g.dy,k=g.angle,C=g.className,_=g.breakAll,P=HM(g,jNe);if(!An(s)||!An(i))return null;var D=s+(ze(p)?p:0),E=i+(ze(N)?N:0),$;switch(x){case"start":$=Sk("calc(".concat(d,")"));break;case"middle":$=Sk("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(d," / 2))"));break;default:$=Sk("calc(".concat(b.length-1," * -").concat(o,")"));break}var A=[];if(h){var T=b[0].width,O=g.width;A.push("scale(".concat((ze(O)?O/T:1)/T,")"))}return k&&A.push("rotate(".concat(k,", ").concat(D,", ").concat(E,")")),A.length&&(P.transform=A.join(" ")),Z.createElement("text",EC({},ot(P,!0),{x:D,y:E,className:Ot("recharts-text",C),textAnchor:m,fill:j.includes("url")?XM:j}),b.map(function(z,F){var R=z.words.join(_?"":" ");return Z.createElement("tspan",{x:D,dy:F===0?$:o,key:"".concat(R,"-").concat(F)},R)}))};function Dc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ANe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function JT(e){let t,n,s;e.length!==2?(t=Dc,n=(o,c)=>Dc(e(o),c),s=(o,c)=>e(o)-c):(t=e===Dc||e===ANe?e:TNe,n=e,s=e);function a(o,c,d=0,u=o.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;n(o[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(o,c,d=0,u=o.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;n(o[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function l(o,c,d=0,u=o.length){const h=a(o,c,d,u-1);return h>d&&s(o[h-1],c)>-s(o[h],c)?h-1:h}return{left:a,center:l,right:i}}function TNe(){return 0}function Yz(e){return e===null?NaN:+e}function*ENe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const ONe=JT(Dc),Xv=ONe.right;JT(Yz).center;class ZM extends Map{constructor(t,n=MNe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,a]of t)this.set(s,a)}get(t){return super.get(QM(this,t))}has(t){return super.has(QM(this,t))}set(t,n){return super.set(RNe(this,t),n)}delete(t){return super.delete(DNe(this,t))}}function QM({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function RNe({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function DNe({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function MNe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function $Ne(e=Dc){if(e===Dc)return Xz;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const s=e(t,n);return s||s===0?s:(e(n,n)===0)-(e(t,t)===0)}}function Xz(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const INe=Math.sqrt(50),FNe=Math.sqrt(10),LNe=Math.sqrt(2);function Hb(e,t,n){const s=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),l=i>=INe?10:i>=FNe?5:i>=LNe?2:1;let o,c,d;return a<0?(d=Math.pow(10,-a)/l,o=Math.round(e*d),c=Math.round(t*d),o/d<e&&++o,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*l,o=Math.round(e/d),c=Math.round(t/d),o*d<e&&++o,c*d>t&&--c),c<o&&.5<=n&&n<2?Hb(e,t,n*2):[o,c,d]}function OC(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const s=t<e,[a,i,l]=s?Hb(t,e,n):Hb(e,t,n);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(s)if(l<0)for(let d=0;d<o;++d)c[d]=(i-d)/-l;else for(let d=0;d<o;++d)c[d]=(i-d)*l;else if(l<0)for(let d=0;d<o;++d)c[d]=(a+d)/-l;else for(let d=0;d<o;++d)c[d]=(a+d)*l;return c}function RC(e,t,n){return t=+t,e=+e,n=+n,Hb(e,t,n)[2]}function DC(e,t,n){t=+t,e=+e,n=+n;const s=t<e,a=s?RC(t,e,n):RC(e,t,n);return(s?-1:1)*(a<0?1/-a:a)}function JM(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function e$(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function Zz(e,t,n=0,s=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),s=Math.floor(Math.min(e.length-1,s)),!(n<=t&&t<=s))return e;for(a=a===void 0?Xz:$Ne(a);s>n;){if(s-n>600){const c=s-n+1,d=t-n+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),m=Math.max(n,Math.floor(t-d*h/c+f)),v=Math.min(s,Math.floor(t+(c-d)*h/c+f));Zz(e,t,m,v,a)}const i=e[t];let l=n,o=s;for(jp(e,n,t),a(e[s],i)>0&&jp(e,n,s);l<o;){for(jp(e,l,o),++l,--o;a(e[l],i)<0;)++l;for(;a(e[o],i)>0;)--o}a(e[n],i)===0?jp(e,n,o):(++o,jp(e,o,s)),o<=t&&(n=o+1),t<=o&&(s=o-1)}return e}function jp(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function UNe(e,t,n){if(e=Float64Array.from(ENe(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return e$(e);if(t>=1)return JM(e);var s,a=(s-1)*t,i=Math.floor(a),l=JM(Zz(e,i).subarray(0,i+1)),o=e$(e.subarray(i+1));return l+(o-l)*(a-i)}}function BNe(e,t,n=Yz){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,a=(s-1)*t,i=Math.floor(a),l=+n(e[i],i,e),o=+n(e[i+1],i+1,e);return l+(o-l)*(a-i)}}function zNe(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++s<a;)i[s]=e+s*n;return i}function Ya(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $o(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const MC=Symbol("implicit");function e4(){var e=new ZM,t=[],n=[],s=MC;function a(i){let l=e.get(i);if(l===void 0){if(s!==MC)return s;e.set(i,l=t.push(i)-1)}return n[l%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new ZM;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return e4(t,n).unknown(s)},Ya.apply(a,arguments),a}function lg(){var e=e4().unknown(void 0),t=e.domain,n=e.range,s=0,a=1,i,l,o=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var f=t().length,m=a<s,v=m?a:s,x=m?s:a;i=(x-v)/Math.max(1,f-c+d*2),o&&(i=Math.floor(i)),v+=(x-v-i*(f-c))*u,l=i*(1-c),o&&(v=Math.round(v),l=Math.round(l));var w=zNe(f).map(function(j){return v+i*j});return n(m?w.reverse():w)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([s,a]=f,s=+s,a=+a,h()):[s,a]},e.rangeRound=function(f){return[s,a]=f,s=+s,a=+a,o=!0,h()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,h()):o},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return lg(t(),[s,a]).round(o).paddingInner(c).paddingOuter(d).align(u)},Ya.apply(h(),arguments)}function Qz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Qz(t())},e}function dx(){return Qz(lg.apply(null,arguments).paddingInner(1))}function t4(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Jz(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Zv(){}var og=.7,Kb=1/og,zh="\\s*([+-]?\\d+)\\s*",cg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VNe=/^#([0-9a-f]{3,8})$/,qNe=new RegExp(`^rgb\\(${zh},${zh},${zh}\\)$`),WNe=new RegExp(`^rgb\\(${Sl},${Sl},${Sl}\\)$`),HNe=new RegExp(`^rgba\\(${zh},${zh},${zh},${cg}\\)$`),KNe=new RegExp(`^rgba\\(${Sl},${Sl},${Sl},${cg}\\)$`),GNe=new RegExp(`^hsl\\(${cg},${Sl},${Sl}\\)$`),YNe=new RegExp(`^hsla\\(${cg},${Sl},${Sl},${cg}\\)$`),t$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};t4(Zv,dg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:r$,formatHex:r$,formatHex8:XNe,formatHsl:ZNe,formatRgb:n$,toString:n$});function r$(){return this.rgb().formatHex()}function XNe(){return this.rgb().formatHex8()}function ZNe(){return eV(this).formatHsl()}function n$(){return this.rgb().formatRgb()}function dg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=VNe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?s$(t):n===3?new Bs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Xy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Xy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qNe.exec(e))?new Bs(t[1],t[2],t[3],1):(t=WNe.exec(e))?new Bs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=HNe.exec(e))?Xy(t[1],t[2],t[3],t[4]):(t=KNe.exec(e))?Xy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=GNe.exec(e))?l$(t[1],t[2]/100,t[3]/100,1):(t=YNe.exec(e))?l$(t[1],t[2]/100,t[3]/100,t[4]):t$.hasOwnProperty(e)?s$(t$[e]):e==="transparent"?new Bs(NaN,NaN,NaN,0):null}function s$(e){return new Bs(e>>16&255,e>>8&255,e&255,1)}function Xy(e,t,n,s){return s<=0&&(e=t=n=NaN),new Bs(e,t,n,s)}function QNe(e){return e instanceof Zv||(e=dg(e)),e?(e=e.rgb(),new Bs(e.r,e.g,e.b,e.opacity)):new Bs}function $C(e,t,n,s){return arguments.length===1?QNe(e):new Bs(e,t,n,s??1)}function Bs(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}t4(Bs,$C,Jz(Zv,{brighter(e){return e=e==null?Kb:Math.pow(Kb,e),new Bs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?og:Math.pow(og,e),new Bs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Bs(au(this.r),au(this.g),au(this.b),Gb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:a$,formatHex:a$,formatHex8:JNe,formatRgb:i$,toString:i$}));function a$(){return`#${Ad(this.r)}${Ad(this.g)}${Ad(this.b)}`}function JNe(){return`#${Ad(this.r)}${Ad(this.g)}${Ad(this.b)}${Ad((isNaN(this.opacity)?1:this.opacity)*255)}`}function i$(){const e=Gb(this.opacity);return`${e===1?"rgb(":"rgba("}${au(this.r)}, ${au(this.g)}, ${au(this.b)}${e===1?")":`, ${e})`}`}function Gb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function au(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ad(e){return e=au(e),(e<16?"0":"")+e.toString(16)}function l$(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new gi(e,t,n,s)}function eV(e){if(e instanceof gi)return new gi(e.h,e.s,e.l,e.opacity);if(e instanceof Zv||(e=dg(e)),!e)return new gi;if(e instanceof gi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,a=Math.min(t,n,s),i=Math.max(t,n,s),l=NaN,o=i-a,c=(i+a)/2;return o?(t===i?l=(n-s)/o+(n<s)*6:n===i?l=(s-t)/o+2:l=(t-n)/o+4,o/=c<.5?i+a:2-i-a,l*=60):o=c>0&&c<1?0:l,new gi(l,o,c,e.opacity)}function eke(e,t,n,s){return arguments.length===1?eV(e):new gi(e,t,n,s??1)}function gi(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}t4(gi,eke,Jz(Zv,{brighter(e){return e=e==null?Kb:Math.pow(Kb,e),new gi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?og:Math.pow(og,e),new gi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,a=2*n-s;return new Bs(Ck(e>=240?e-240:e+120,a,s),Ck(e,a,s),Ck(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new gi(o$(this.h),Zy(this.s),Zy(this.l),Gb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gb(this.opacity);return`${e===1?"hsl(":"hsla("}${o$(this.h)}, ${Zy(this.s)*100}%, ${Zy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function o$(e){return e=(e||0)%360,e<0?e+360:e}function Zy(e){return Math.max(0,Math.min(1,e||0))}function Ck(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const r4=e=>()=>e;function tke(e,t){return function(n){return e+n*t}}function rke(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function nke(e){return(e=+e)==1?tV:function(t,n){return n-t?rke(t,n,e):r4(isNaN(t)?n:t)}}function tV(e,t){var n=t-e;return n?tke(e,n):r4(isNaN(e)?t:e)}const c$=function e(t){var n=nke(t);function s(a,i){var l=n((a=$C(a)).r,(i=$C(i)).r),o=n(a.g,i.g),c=n(a.b,i.b),d=tV(a.opacity,i.opacity);return function(u){return a.r=l(u),a.g=o(u),a.b=c(u),a.opacity=d(u),a+""}}return s.gamma=e,s}(1);function ske(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),a;return function(i){for(a=0;a<n;++a)s[a]=e[a]*(1-i)+t[a]*i;return s}}function ake(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ike(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,a=new Array(s),i=new Array(n),l;for(l=0;l<s;++l)a[l]=Km(e[l],t[l]);for(;l<n;++l)i[l]=t[l];return function(o){for(l=0;l<s;++l)i[l]=a[l](o);return i}}function lke(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function Yb(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function oke(e,t){var n={},s={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Km(e[a],t[a]):s[a]=t[a];return function(i){for(a in n)s[a]=n[a](i);return s}}var IC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_k=new RegExp(IC.source,"g");function cke(e){return function(){return e}}function dke(e){return function(t){return e(t)+""}}function uke(e,t){var n=IC.lastIndex=_k.lastIndex=0,s,a,i,l=-1,o=[],c=[];for(e=e+"",t=t+"";(s=IC.exec(e))&&(a=_k.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),o[l]?o[l]+=i:o[++l]=i),(s=s[0])===(a=a[0])?o[l]?o[l]+=a:o[++l]=a:(o[++l]=null,c.push({i:l,x:Yb(s,a)})),n=_k.lastIndex;return n<t.length&&(i=t.slice(n),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?dke(c[0].x):cke(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)o[(h=c[u]).i]=h.x(d);return o.join("")})}function Km(e,t){var n=typeof t,s;return t==null||n==="boolean"?r4(t):(n==="number"?Yb:n==="string"?(s=dg(t))?(t=s,c$):uke:t instanceof dg?c$:t instanceof Date?lke:ake(t)?ske:Array.isArray(t)?ike:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?oke:Yb)(e,t)}function n4(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function hke(e,t){t===void 0&&(t=e,e=Km);for(var n=0,s=t.length-1,a=t[0],i=new Array(s<0?0:s);n<s;)i[n]=e(a,a=t[++n]);return function(l){var o=Math.max(0,Math.min(s-1,Math.floor(l*=s)));return i[o](l-o)}}function fke(e){return function(){return e}}function Xb(e){return+e}var d$=[0,1];function ks(e){return e}function FC(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:fke(isNaN(t)?NaN:.5)}function mke(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function pke(e,t,n){var s=e[0],a=e[1],i=t[0],l=t[1];return a<s?(s=FC(a,s),i=n(l,i)):(s=FC(s,a),i=n(i,l)),function(o){return i(s(o))}}function xke(e,t,n){var s=Math.min(e.length,t.length)-1,a=new Array(s),i=new Array(s),l=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<s;)a[l]=FC(e[l],e[l+1]),i[l]=n(t[l],t[l+1]);return function(o){var c=Xv(e,o,1,s)-1;return i[c](a[c](o))}}function Qv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function M1(){var e=d$,t=d$,n=Km,s,a,i,l=ks,o,c,d;function u(){var f=Math.min(e.length,t.length);return l!==ks&&(l=mke(e[0],e[f-1])),o=f>2?xke:pke,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=o(e.map(s),t,n)))(s(l(f)))}return h.invert=function(f){return l(a((d||(d=o(t,e.map(s),Yb)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Xb),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=n4,u()},h.clamp=function(f){return arguments.length?(l=f?!0:ks,u()):l!==ks},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,m){return s=f,a=m,u()}}function s4(){return M1()(ks,ks)}function gke(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function Gf(e){return e=Zb(Math.abs(e)),e?e[1]:NaN}function vke(e,t){return function(n,s){for(var a=n.length,i=[],l=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>s&&(o=Math.max(1,s-c)),i.push(n.substring(a-=o,a+o)),!((c+=o+1)>s));)o=e[l=(l+1)%e.length];return i.reverse().join(t)}}function yke(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var bke=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ug(e){if(!(t=bke.exec(e)))throw new Error("invalid format: "+e);var t;return new a4({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ug.prototype=a4.prototype;function a4(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}a4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jke(e){e:for(var t=e.length,n=1,s=-1,a;n<t;++n)switch(e[n]){case".":s=a=n;break;case"0":s===0&&(s=n),a=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var rV;function wke(e,t){var n=Zb(e,t);if(!n)return e+"";var s=n[0],a=n[1],i=a-(rV=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=s.length;return i===l?s:i>l?s+new Array(i-l+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+Zb(e,Math.max(0,t+i-1))[0]}function u$(e,t){var n=Zb(e,t);if(!n)return e+"";var s=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const h$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:gke,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>u$(e*100,t),r:u$,s:wke,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function f$(e){return e}var m$=Array.prototype.map,p$=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Nke(e){var t=e.grouping===void 0||e.thousands===void 0?f$:vke(m$.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?f$:yke(m$.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=ug(h);var f=h.fill,m=h.align,v=h.sign,x=h.symbol,w=h.zero,j=h.width,g=h.comma,b=h.precision,p=h.trim,N=h.type;N==="n"?(g=!0,N="g"):h$[N]||(b===void 0&&(b=12),p=!0,N="g"),(w||f==="0"&&m==="=")&&(w=!0,f="0",m="=");var k=x==="$"?n:x==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",C=x==="$"?s:/[%p]/.test(N)?l:"",_=h$[N],P=/[defgprs%]/.test(N);b=b===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function D(E){var $=k,A=C,T,O,z;if(N==="c")A=_(E)+A,E="";else{E=+E;var F=E<0||1/E<0;if(E=isNaN(E)?c:_(Math.abs(E),b),p&&(E=jke(E)),F&&+E==0&&v!=="+"&&(F=!1),$=(F?v==="("?v:o:v==="-"||v==="("?"":v)+$,A=(N==="s"?p$[8+rV/3]:"")+A+(F&&v==="("?")":""),P){for(T=-1,O=E.length;++T<O;)if(z=E.charCodeAt(T),48>z||z>57){A=(z===46?a+E.slice(T+1):E.slice(T))+A,E=E.slice(0,T);break}}}g&&!w&&(E=t(E,1/0));var R=$.length+E.length+A.length,I=R<j?new Array(j-R+1).join(f):"";switch(g&&w&&(E=t(I+E,I.length?j-A.length:1/0),I=""),m){case"<":E=$+E+A+I;break;case"=":E=$+I+E+A;break;case"^":E=I.slice(0,R=I.length>>1)+$+E+A+I.slice(R);break;default:E=I+$+E+A;break}return i(E)}return D.toString=function(){return h+""},D}function u(h,f){var m=d((h=ug(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Gf(f)/3)))*3,x=Math.pow(10,-v),w=p$[8+v/3];return function(j){return m(x*j)+w}}return{format:d,formatPrefix:u}}var Qy,i4,nV;kke({thousands:",",grouping:[3],currency:["$",""]});function kke(e){return Qy=Nke(e),i4=Qy.format,nV=Qy.formatPrefix,Qy}function Ske(e){return Math.max(0,-Gf(Math.abs(e)))}function Cke(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gf(t)/3)))*3-Gf(Math.abs(e)))}function _ke(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Gf(t)-Gf(e))+1}function sV(e,t,n,s){var a=DC(e,t,n),i;switch(s=ug(s??",f"),s.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=Cke(a,l))&&(s.precision=i),nV(s,l)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=_ke(a,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=Ske(a))&&(s.precision=i-(s.type==="%")*2);break}}return i4(s)}function sd(e){var t=e.domain;return e.ticks=function(n){var s=t();return OC(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var a=t();return sV(a[0],a[a.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),a=0,i=s.length-1,l=s[a],o=s[i],c,d,u=10;for(o<l&&(d=l,l=o,o=d,d=a,a=i,i=d);u-- >0;){if(d=RC(l,o,n),d===c)return s[a]=l,s[i]=o,t(s);if(d>0)l=Math.floor(l/d)*d,o=Math.ceil(o/d)*d;else if(d<0)l=Math.ceil(l*d)/d,o=Math.floor(o*d)/d;else break;c=d}return e},e}function Qb(){var e=s4();return e.copy=function(){return Qv(e,Qb())},Ya.apply(e,arguments),sd(e)}function aV(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,Xb),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return aV(e).unknown(t)},e=arguments.length?Array.from(e,Xb):[0,1],sd(n)}function iV(e,t){e=e.slice();var n=0,s=e.length-1,a=e[n],i=e[s],l;return i<a&&(l=n,n=s,s=l,l=a,a=i,i=l),e[n]=t.floor(a),e[s]=t.ceil(i),e}function x$(e){return Math.log(e)}function g$(e){return Math.exp(e)}function Pke(e){return-Math.log(-e)}function Ake(e){return-Math.exp(-e)}function Tke(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Eke(e){return e===10?Tke:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Oke(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function v$(e){return(t,n)=>-e(-t,n)}function l4(e){const t=e(x$,g$),n=t.domain;let s=10,a,i;function l(){return a=Oke(s),i=Eke(s),n()[0]<0?(a=v$(a),i=v$(i),e(Pke,Ake)):e(x$,g$),t}return t.base=function(o){return arguments.length?(s=+o,l()):s},t.domain=function(o){return arguments.length?(n(o),l()):n()},t.ticks=o=>{const c=n();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=a(d),m=a(u),v,x;const w=o==null?10:+o;let j=[];if(!(s%1)&&m-f<w){if(f=Math.floor(f),m=Math.ceil(m),d>0){for(;f<=m;++f)for(v=1;v<s;++v)if(x=f<0?v/i(-f):v*i(f),!(x<d)){if(x>u)break;j.push(x)}}else for(;f<=m;++f)for(v=s-1;v>=1;--v)if(x=f>0?v/i(-f):v*i(f),!(x<d)){if(x>u)break;j.push(x)}j.length*2<w&&(j=OC(d,u,w))}else j=OC(f,m,Math.min(m-f,w)).map(i);return h?j.reverse():j},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=ug(c)).precision==null&&(c.trim=!0),c=i4(c)),o===1/0)return c;const d=Math.max(1,s*o/t.ticks().length);return u=>{let h=u/i(Math.round(a(u)));return h*s<s-.5&&(h*=s),h<=d?c(u):""}},t.nice=()=>n(iV(n(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function lV(){const e=l4(M1()).domain([1,10]);return e.copy=()=>Qv(e,lV()).base(e.base()),Ya.apply(e,arguments),e}function y$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function b$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function o4(e){var t=1,n=e(y$(t),b$(t));return n.constant=function(s){return arguments.length?e(y$(t=+s),b$(t)):t},sd(n)}function oV(){var e=o4(M1());return e.copy=function(){return Qv(e,oV()).constant(e.constant())},Ya.apply(e,arguments)}function j$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Rke(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Dke(e){return e<0?-e*e:e*e}function c4(e){var t=e(ks,ks),n=1;function s(){return n===1?e(ks,ks):n===.5?e(Rke,Dke):e(j$(n),j$(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,s()):n},sd(t)}function d4(){var e=c4(M1());return e.copy=function(){return Qv(e,d4()).exponent(e.exponent())},Ya.apply(e,arguments),e}function Mke(){return d4.apply(null,arguments).exponent(.5)}function w$(e){return Math.sign(e)*e*e}function $ke(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function cV(){var e=s4(),t=[0,1],n=!1,s;function a(i){var l=$ke(e(i));return isNaN(l)?s:n?Math.round(l):l}return a.invert=function(i){return e.invert(w$(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Xb)).map(w$)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return cV(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},Ya.apply(a,arguments),sd(a)}function dV(){var e=[],t=[],n=[],s;function a(){var l=0,o=Math.max(1,t.length);for(n=new Array(o-1);++l<o;)n[l-1]=BNe(e,l/o);return i}function i(l){return l==null||isNaN(l=+l)?s:t[Xv(n,l)]}return i.invertExtent=function(l){var o=t.indexOf(l);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Dc),a()},i.range=function(l){return arguments.length?(t=Array.from(l),a()):t.slice()},i.unknown=function(l){return arguments.length?(s=l,i):s},i.quantiles=function(){return n.slice()},i.copy=function(){return dV().domain(e).range(t).unknown(s)},Ya.apply(i,arguments)}function uV(){var e=0,t=1,n=1,s=[.5],a=[0,1],i;function l(c){return c!=null&&c<=c?a[Xv(s,c,0,n)]:i}function o(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return l}return l.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},l.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,o()):a.slice()},l.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=n?[s[n-1],t]:[s[d-1],s[d]]},l.unknown=function(c){return arguments.length&&(i=c),l},l.thresholds=function(){return s.slice()},l.copy=function(){return uV().domain([e,t]).range(a).unknown(i)},Ya.apply(sd(l),arguments)}function hV(){var e=[.5],t=[0,1],n,s=1;function a(i){return i!=null&&i<=i?t[Xv(e,i,0,s)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return hV().domain(e).range(t).unknown(n)},Ya.apply(a,arguments)}const Pk=new Date,Ak=new Date;function En(e,t,n,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const l=a(i),o=a.ceil(i);return i-l<o-i?l:o},a.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),a.range=(i,l,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return c;let d;do c.push(d=new Date(+i)),t(i,o),e(i);while(d<i&&i<l);return c},a.filter=i=>En(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;t(l,-1),!i(l););else for(;--o>=0;)for(;t(l,1),!i(l););}),n&&(a.count=(i,l)=>(Pk.setTime(+i),Ak.setTime(+l),e(Pk),e(Ak),Math.floor(n(Pk,Ak))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?l=>s(l)%i===0:l=>a.count(0,l)%i===0):a)),a}const Jb=En(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Jb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?En(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Jb);Jb.range;const uo=1e3,La=uo*60,ho=La*60,_o=ho*24,u4=_o*7,N$=_o*30,Tk=_o*365,Td=En(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*uo)},(e,t)=>(t-e)/uo,e=>e.getUTCSeconds());Td.range;const h4=En(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uo)},(e,t)=>{e.setTime(+e+t*La)},(e,t)=>(t-e)/La,e=>e.getMinutes());h4.range;const f4=En(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*La)},(e,t)=>(t-e)/La,e=>e.getUTCMinutes());f4.range;const m4=En(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uo-e.getMinutes()*La)},(e,t)=>{e.setTime(+e+t*ho)},(e,t)=>(t-e)/ho,e=>e.getHours());m4.range;const p4=En(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ho)},(e,t)=>(t-e)/ho,e=>e.getUTCHours());p4.range;const Jv=En(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*La)/_o,e=>e.getDate()-1);Jv.range;const $1=En(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_o,e=>e.getUTCDate()-1);$1.range;const fV=En(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_o,e=>Math.floor(e/_o));fV.range;function Bu(e){return En(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*La)/u4)}const I1=Bu(0),ej=Bu(1),Ike=Bu(2),Fke=Bu(3),Yf=Bu(4),Lke=Bu(5),Uke=Bu(6);I1.range;ej.range;Ike.range;Fke.range;Yf.range;Lke.range;Uke.range;function zu(e){return En(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/u4)}const F1=zu(0),tj=zu(1),Bke=zu(2),zke=zu(3),Xf=zu(4),Vke=zu(5),qke=zu(6);F1.range;tj.range;Bke.range;zke.range;Xf.range;Vke.range;qke.range;const x4=En(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());x4.range;const g4=En(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());g4.range;const Po=En(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Po.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:En(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Po.range;const Ao=En(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ao.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:En(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ao.range;function mV(e,t,n,s,a,i){const l=[[Td,1,uo],[Td,5,5*uo],[Td,15,15*uo],[Td,30,30*uo],[i,1,La],[i,5,5*La],[i,15,15*La],[i,30,30*La],[a,1,ho],[a,3,3*ho],[a,6,6*ho],[a,12,12*ho],[s,1,_o],[s,2,2*_o],[n,1,u4],[t,1,N$],[t,3,3*N$],[e,1,Tk]];function o(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const m=h&&typeof h.range=="function"?h:c(d,u,h),v=m?m.range(d,+u+1):[];return f?v.reverse():v}function c(d,u,h){const f=Math.abs(u-d)/h,m=JT(([,,w])=>w).right(l,f);if(m===l.length)return e.every(DC(d/Tk,u/Tk,h));if(m===0)return Jb.every(Math.max(DC(d,u,h),1));const[v,x]=l[f/l[m-1][2]<l[m][2]/f?m-1:m];return v.every(x)}return[o,c]}const[Wke,Hke]=mV(Ao,g4,F1,fV,p4,f4),[Kke,Gke]=mV(Po,x4,I1,Jv,m4,h4);function Ek(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ok(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function wp(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Yke(e){var t=e.dateTime,n=e.date,s=e.time,a=e.periods,i=e.days,l=e.shortDays,o=e.months,c=e.shortMonths,d=Np(a),u=kp(a),h=Np(i),f=kp(i),m=Np(l),v=kp(l),x=Np(o),w=kp(o),j=Np(c),g=kp(c),b={a:F,A:R,b:I,B:Q,c:null,d:A$,e:A$,f:vSe,g:PSe,G:TSe,H:pSe,I:xSe,j:gSe,L:pV,m:ySe,M:bSe,p:Y,q:K,Q:O$,s:R$,S:jSe,u:wSe,U:NSe,V:kSe,w:SSe,W:CSe,x:null,X:null,y:_Se,Y:ASe,Z:ESe,"%":E$},p={a:oe,A:ge,b:Ne,B:Oe,c:null,d:T$,e:T$,f:MSe,g:WSe,G:KSe,H:OSe,I:RSe,j:DSe,L:gV,m:$Se,M:ISe,p:pe,q:Me,Q:O$,s:R$,S:FSe,u:LSe,U:USe,V:BSe,w:zSe,W:VSe,x:null,X:null,y:qSe,Y:HSe,Z:GSe,"%":E$},N={a:D,A:E,b:$,B:A,c:T,d:_$,e:_$,f:uSe,g:C$,G:S$,H:P$,I:P$,j:lSe,L:dSe,m:iSe,M:oSe,p:P,q:aSe,Q:fSe,s:mSe,S:cSe,u:eSe,U:tSe,V:rSe,w:Jke,W:nSe,x:O,X:z,y:C$,Y:S$,Z:sSe,"%":hSe};b.x=k(n,b),b.X=k(s,b),b.c=k(t,b),p.x=k(n,p),p.X=k(s,p),p.c=k(t,p);function k(xe,ce){return function(Ie){var ie=[],st=-1,G=0,De=xe.length,me,Be,qe;for(Ie instanceof Date||(Ie=new Date(+Ie));++st<De;)xe.charCodeAt(st)===37&&(ie.push(xe.slice(G,st)),(Be=k$[me=xe.charAt(++st)])!=null?me=xe.charAt(++st):Be=me==="e"?" ":"0",(qe=ce[me])&&(me=qe(Ie,Be)),ie.push(me),G=st+1);return ie.push(xe.slice(G,st)),ie.join("")}}function C(xe,ce){return function(Ie){var ie=wp(1900,void 0,1),st=_(ie,xe,Ie+="",0),G,De;if(st!=Ie.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(ce&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(G=Ok(wp(ie.y,0,1)),De=G.getUTCDay(),G=De>4||De===0?tj.ceil(G):tj(G),G=$1.offset(G,(ie.V-1)*7),ie.y=G.getUTCFullYear(),ie.m=G.getUTCMonth(),ie.d=G.getUTCDate()+(ie.w+6)%7):(G=Ek(wp(ie.y,0,1)),De=G.getDay(),G=De>4||De===0?ej.ceil(G):ej(G),G=Jv.offset(G,(ie.V-1)*7),ie.y=G.getFullYear(),ie.m=G.getMonth(),ie.d=G.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),De="Z"in ie?Ok(wp(ie.y,0,1)).getUTCDay():Ek(wp(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(De+5)%7:ie.w+ie.U*7-(De+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,Ok(ie)):Ek(ie)}}function _(xe,ce,Ie,ie){for(var st=0,G=ce.length,De=Ie.length,me,Be;st<G;){if(ie>=De)return-1;if(me=ce.charCodeAt(st++),me===37){if(me=ce.charAt(st++),Be=N[me in k$?ce.charAt(st++):me],!Be||(ie=Be(xe,Ie,ie))<0)return-1}else if(me!=Ie.charCodeAt(ie++))return-1}return ie}function P(xe,ce,Ie){var ie=d.exec(ce.slice(Ie));return ie?(xe.p=u.get(ie[0].toLowerCase()),Ie+ie[0].length):-1}function D(xe,ce,Ie){var ie=m.exec(ce.slice(Ie));return ie?(xe.w=v.get(ie[0].toLowerCase()),Ie+ie[0].length):-1}function E(xe,ce,Ie){var ie=h.exec(ce.slice(Ie));return ie?(xe.w=f.get(ie[0].toLowerCase()),Ie+ie[0].length):-1}function $(xe,ce,Ie){var ie=j.exec(ce.slice(Ie));return ie?(xe.m=g.get(ie[0].toLowerCase()),Ie+ie[0].length):-1}function A(xe,ce,Ie){var ie=x.exec(ce.slice(Ie));return ie?(xe.m=w.get(ie[0].toLowerCase()),Ie+ie[0].length):-1}function T(xe,ce,Ie){return _(xe,t,ce,Ie)}function O(xe,ce,Ie){return _(xe,n,ce,Ie)}function z(xe,ce,Ie){return _(xe,s,ce,Ie)}function F(xe){return l[xe.getDay()]}function R(xe){return i[xe.getDay()]}function I(xe){return c[xe.getMonth()]}function Q(xe){return o[xe.getMonth()]}function Y(xe){return a[+(xe.getHours()>=12)]}function K(xe){return 1+~~(xe.getMonth()/3)}function oe(xe){return l[xe.getUTCDay()]}function ge(xe){return i[xe.getUTCDay()]}function Ne(xe){return c[xe.getUTCMonth()]}function Oe(xe){return o[xe.getUTCMonth()]}function pe(xe){return a[+(xe.getUTCHours()>=12)]}function Me(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var ce=k(xe+="",b);return ce.toString=function(){return xe},ce},parse:function(xe){var ce=C(xe+="",!1);return ce.toString=function(){return xe},ce},utcFormat:function(xe){var ce=k(xe+="",p);return ce.toString=function(){return xe},ce},utcParse:function(xe){var ce=C(xe+="",!0);return ce.toString=function(){return xe},ce}}}var k$={"-":"",_:" ",0:"0"},Vn=/^\s*\d+/,Xke=/^%/,Zke=/[\\^$*+?|[\]().{}]/g;function ur(e,t,n){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<n?new Array(n-i+1).join(t)+a:a)}function Qke(e){return e.replace(Zke,"\\$&")}function Np(e){return new RegExp("^(?:"+e.map(Qke).join("|")+")","i")}function kp(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Jke(e,t,n){var s=Vn.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function eSe(e,t,n){var s=Vn.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function tSe(e,t,n){var s=Vn.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function rSe(e,t,n){var s=Vn.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function nSe(e,t,n){var s=Vn.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function S$(e,t,n){var s=Vn.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function C$(e,t,n){var s=Vn.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function sSe(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function aSe(e,t,n){var s=Vn.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function iSe(e,t,n){var s=Vn.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function _$(e,t,n){var s=Vn.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function lSe(e,t,n){var s=Vn.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function P$(e,t,n){var s=Vn.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function oSe(e,t,n){var s=Vn.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function cSe(e,t,n){var s=Vn.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function dSe(e,t,n){var s=Vn.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function uSe(e,t,n){var s=Vn.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function hSe(e,t,n){var s=Xke.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function fSe(e,t,n){var s=Vn.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function mSe(e,t,n){var s=Vn.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function A$(e,t){return ur(e.getDate(),t,2)}function pSe(e,t){return ur(e.getHours(),t,2)}function xSe(e,t){return ur(e.getHours()%12||12,t,2)}function gSe(e,t){return ur(1+Jv.count(Po(e),e),t,3)}function pV(e,t){return ur(e.getMilliseconds(),t,3)}function vSe(e,t){return pV(e,t)+"000"}function ySe(e,t){return ur(e.getMonth()+1,t,2)}function bSe(e,t){return ur(e.getMinutes(),t,2)}function jSe(e,t){return ur(e.getSeconds(),t,2)}function wSe(e){var t=e.getDay();return t===0?7:t}function NSe(e,t){return ur(I1.count(Po(e)-1,e),t,2)}function xV(e){var t=e.getDay();return t>=4||t===0?Yf(e):Yf.ceil(e)}function kSe(e,t){return e=xV(e),ur(Yf.count(Po(e),e)+(Po(e).getDay()===4),t,2)}function SSe(e){return e.getDay()}function CSe(e,t){return ur(ej.count(Po(e)-1,e),t,2)}function _Se(e,t){return ur(e.getFullYear()%100,t,2)}function PSe(e,t){return e=xV(e),ur(e.getFullYear()%100,t,2)}function ASe(e,t){return ur(e.getFullYear()%1e4,t,4)}function TSe(e,t){var n=e.getDay();return e=n>=4||n===0?Yf(e):Yf.ceil(e),ur(e.getFullYear()%1e4,t,4)}function ESe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ur(t/60|0,"0",2)+ur(t%60,"0",2)}function T$(e,t){return ur(e.getUTCDate(),t,2)}function OSe(e,t){return ur(e.getUTCHours(),t,2)}function RSe(e,t){return ur(e.getUTCHours()%12||12,t,2)}function DSe(e,t){return ur(1+$1.count(Ao(e),e),t,3)}function gV(e,t){return ur(e.getUTCMilliseconds(),t,3)}function MSe(e,t){return gV(e,t)+"000"}function $Se(e,t){return ur(e.getUTCMonth()+1,t,2)}function ISe(e,t){return ur(e.getUTCMinutes(),t,2)}function FSe(e,t){return ur(e.getUTCSeconds(),t,2)}function LSe(e){var t=e.getUTCDay();return t===0?7:t}function USe(e,t){return ur(F1.count(Ao(e)-1,e),t,2)}function vV(e){var t=e.getUTCDay();return t>=4||t===0?Xf(e):Xf.ceil(e)}function BSe(e,t){return e=vV(e),ur(Xf.count(Ao(e),e)+(Ao(e).getUTCDay()===4),t,2)}function zSe(e){return e.getUTCDay()}function VSe(e,t){return ur(tj.count(Ao(e)-1,e),t,2)}function qSe(e,t){return ur(e.getUTCFullYear()%100,t,2)}function WSe(e,t){return e=vV(e),ur(e.getUTCFullYear()%100,t,2)}function HSe(e,t){return ur(e.getUTCFullYear()%1e4,t,4)}function KSe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Xf(e):Xf.ceil(e),ur(e.getUTCFullYear()%1e4,t,4)}function GSe(){return"+0000"}function E$(){return"%"}function O$(e){return+e}function R$(e){return Math.floor(+e/1e3)}var th,yV,bV;YSe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function YSe(e){return th=Yke(e),yV=th.format,th.parse,bV=th.utcFormat,th.utcParse,th}function XSe(e){return new Date(e)}function ZSe(e){return e instanceof Date?+e:+new Date(+e)}function v4(e,t,n,s,a,i,l,o,c,d){var u=s4(),h=u.invert,f=u.domain,m=d(".%L"),v=d(":%S"),x=d("%I:%M"),w=d("%I %p"),j=d("%a %d"),g=d("%b %d"),b=d("%B"),p=d("%Y");function N(k){return(c(k)<k?m:o(k)<k?v:l(k)<k?x:i(k)<k?w:s(k)<k?a(k)<k?j:g:n(k)<k?b:p)(k)}return u.invert=function(k){return new Date(h(k))},u.domain=function(k){return arguments.length?f(Array.from(k,ZSe)):f().map(XSe)},u.ticks=function(k){var C=f();return e(C[0],C[C.length-1],k??10)},u.tickFormat=function(k,C){return C==null?N:d(C)},u.nice=function(k){var C=f();return(!k||typeof k.range!="function")&&(k=t(C[0],C[C.length-1],k??10)),k?f(iV(C,k)):u},u.copy=function(){return Qv(u,v4(e,t,n,s,a,i,l,o,c,d))},u}function QSe(){return Ya.apply(v4(Kke,Gke,Po,x4,I1,Jv,m4,h4,Td,yV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function JSe(){return Ya.apply(v4(Wke,Hke,Ao,g4,F1,$1,p4,f4,Td,bV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function L1(){var e=0,t=1,n,s,a,i,l=ks,o=!1,c;function d(h){return h==null||isNaN(h=+h)?c:l(a===0?.5:(h=(i(h)-n)*a,o?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),s=i(t=+t),a=n===s?0:1/(s-n),d):[e,t]},d.clamp=function(h){return arguments.length?(o=!!h,d):o},d.interpolator=function(h){return arguments.length?(l=h,d):l};function u(h){return function(f){var m,v;return arguments.length?([m,v]=f,l=h(m,v),d):[l(0),l(1)]}}return d.range=u(Km),d.rangeRound=u(n4),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,n=h(e),s=h(t),a=n===s?0:1/(s-n),d}}function ad(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function jV(){var e=sd(L1()(ks));return e.copy=function(){return ad(e,jV())},$o.apply(e,arguments)}function wV(){var e=l4(L1()).domain([1,10]);return e.copy=function(){return ad(e,wV()).base(e.base())},$o.apply(e,arguments)}function NV(){var e=o4(L1());return e.copy=function(){return ad(e,NV()).constant(e.constant())},$o.apply(e,arguments)}function y4(){var e=c4(L1());return e.copy=function(){return ad(e,y4()).exponent(e.exponent())},$o.apply(e,arguments)}function e2e(){return y4.apply(null,arguments).exponent(.5)}function kV(){var e=[],t=ks;function n(s){if(s!=null&&!isNaN(s=+s))return t((Xv(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Dc),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,a)=>t(a/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(a,i)=>UNe(e,i/s))},n.copy=function(){return kV(t).domain(e)},$o.apply(n,arguments)}function U1(){var e=0,t=.5,n=1,s=1,a,i,l,o,c,d=ks,u,h=!1,f;function m(x){return isNaN(x=+x)?f:(x=.5+((x=+u(x))-i)*(s*x<s*i?o:c),d(h?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,n]=x,a=u(e=+e),i=u(t=+t),l=u(n=+n),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),s=i<a?-1:1,m):[e,t,n]},m.clamp=function(x){return arguments.length?(h=!!x,m):h},m.interpolator=function(x){return arguments.length?(d=x,m):d};function v(x){return function(w){var j,g,b;return arguments.length?([j,g,b]=w,d=hke(x,[j,g,b]),m):[d(0),d(.5),d(1)]}}return m.range=v(Km),m.rangeRound=v(n4),m.unknown=function(x){return arguments.length?(f=x,m):f},function(x){return u=x,a=x(e),i=x(t),l=x(n),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),s=i<a?-1:1,m}}function SV(){var e=sd(U1()(ks));return e.copy=function(){return ad(e,SV())},$o.apply(e,arguments)}function CV(){var e=l4(U1()).domain([.1,1,10]);return e.copy=function(){return ad(e,CV()).base(e.base())},$o.apply(e,arguments)}function _V(){var e=o4(U1());return e.copy=function(){return ad(e,_V()).constant(e.constant())},$o.apply(e,arguments)}function b4(){var e=c4(U1());return e.copy=function(){return ad(e,b4()).exponent(e.exponent())},$o.apply(e,arguments)}function t2e(){return b4.apply(null,arguments).exponent(.5)}const D$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:lg,scaleDiverging:SV,scaleDivergingLog:CV,scaleDivergingPow:b4,scaleDivergingSqrt:t2e,scaleDivergingSymlog:_V,scaleIdentity:aV,scaleImplicit:MC,scaleLinear:Qb,scaleLog:lV,scaleOrdinal:e4,scalePoint:dx,scalePow:d4,scaleQuantile:dV,scaleQuantize:uV,scaleRadial:cV,scaleSequential:jV,scaleSequentialLog:wV,scaleSequentialPow:y4,scaleSequentialQuantile:kV,scaleSequentialSqrt:e2e,scaleSequentialSymlog:NV,scaleSqrt:Mke,scaleSymlog:oV,scaleThreshold:hV,scaleTime:QSe,scaleUtc:JSe,tickFormat:sV},Symbol.toStringTag,{value:"Module"}));var r2e=Im;function n2e(e,t,n){for(var s=-1,a=e.length;++s<a;){var i=e[s],l=t(i);if(l!=null&&(o===void 0?l===l&&!r2e(l):n(l,o)))var o=l,c=i}return c}var B1=n2e;function s2e(e,t){return e>t}var PV=s2e,a2e=B1,i2e=PV,l2e=Wm;function o2e(e){return e&&e.length?a2e(e,l2e,i2e):void 0}var c2e=o2e;const jc=Qt(c2e);function d2e(e,t){return e<t}var AV=d2e,u2e=B1,h2e=AV,f2e=Wm;function m2e(e){return e&&e.length?u2e(e,f2e,h2e):void 0}var p2e=m2e;const z1=Qt(p2e);var x2e=RT,g2e=Fl,v2e=Iz,y2e=Zs;function b2e(e,t){var n=y2e(e)?x2e:v2e;return n(e,g2e(t))}var j2e=b2e,w2e=Mz,N2e=j2e;function k2e(e,t){return w2e(N2e(e,t),1)}var S2e=k2e;const C2e=Qt(S2e);var _2e=GT;function P2e(e,t){return _2e(e,t)}var A2e=P2e;const Nu=Qt(A2e);var Gm=1e9,T2e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},w4,zr=!0,Ha="[DecimalError] ",iu=Ha+"Invalid argument: ",j4=Ha+"Exponent out of range: ",Ym=Math.floor,bd=Math.pow,E2e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ha,Rn=1e7,Ir=7,TV=9007199254740991,rj=Ym(TV/Ir),nt={};nt.absoluteValue=nt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};nt.comparedTo=nt.cmp=function(e){var t,n,s,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,a=e.d.length,t=0,n=s<a?s:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};nt.decimalPlaces=nt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Ir;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};nt.dividedBy=nt.div=function(e){return go(this,new this.constructor(e))};nt.dividedToIntegerBy=nt.idiv=function(e){var t=this,n=t.constructor;return Sr(go(t,new n(e),0,1),n.precision)};nt.equals=nt.eq=function(e){return!this.cmp(e)};nt.exponent=function(){return mn(this)};nt.greaterThan=nt.gt=function(e){return this.cmp(e)>0};nt.greaterThanOrEqualTo=nt.gte=function(e){return this.cmp(e)>=0};nt.isInteger=nt.isint=function(){return this.e>this.d.length-2};nt.isNegative=nt.isneg=function(){return this.s<0};nt.isPositive=nt.ispos=function(){return this.s>0};nt.isZero=function(){return this.s===0};nt.lessThan=nt.lt=function(e){return this.cmp(e)<0};nt.lessThanOrEqualTo=nt.lte=function(e){return this.cmp(e)<1};nt.logarithm=nt.log=function(e){var t,n=this,s=n.constructor,a=s.precision,i=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(ha))throw Error(Ha+"NaN");if(n.s<1)throw Error(Ha+(n.s?"NaN":"-Infinity"));return n.eq(ha)?new s(0):(zr=!1,t=go(hg(n,i),hg(e,i),i),zr=!0,Sr(t,a))};nt.minus=nt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?RV(t,e):EV(t,(e.s=-e.s,e))};nt.modulo=nt.mod=function(e){var t,n=this,s=n.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(Ha+"NaN");return n.s?(zr=!1,t=go(n,e,0,1).times(e),zr=!0,n.minus(t)):Sr(new s(n),a)};nt.naturalExponential=nt.exp=function(){return OV(this)};nt.naturalLogarithm=nt.ln=function(){return hg(this)};nt.negated=nt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};nt.plus=nt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?EV(t,e):RV(t,(e.s=-e.s,e))};nt.precision=nt.sd=function(e){var t,n,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(iu+e);if(t=mn(a)+1,s=a.d.length-1,n=s*Ir+1,s=a.d[s],s){for(;s%10==0;s/=10)n--;for(s=a.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};nt.squareRoot=nt.sqrt=function(){var e,t,n,s,a,i,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Ha+"NaN")}for(e=mn(o),zr=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=vl(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Ym((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(a.toString()),n=c.precision,a=l=n+3;;)if(i=s,s=i.plus(go(o,i,l+2)).times(.5),vl(i.d).slice(0,l)===(t=vl(s.d)).slice(0,l)){if(t=t.slice(l-3,l+1),a==l&&t=="4999"){if(Sr(i,n+1,0),i.times(i).eq(o)){s=i;break}}else if(t!="9999")break;l+=4}return zr=!0,Sr(s,n)};nt.times=nt.mul=function(e){var t,n,s,a,i,l,o,c,d,u=this,h=u.constructor,f=u.d,m=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,n=u.e+e.e,c=f.length,d=m.length,c<d&&(i=f,f=m,m=i,l=c,c=d,d=l),i=[],l=c+d,s=l;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,a=c+s;a>s;)o=i[a]+m[s]*f[a-s-1]+t,i[a--]=o%Rn|0,t=o/Rn|0;i[a]=(i[a]+t)%Rn|0}for(;!i[--l];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,zr?Sr(e,h.precision):e};nt.toDecimalPlaces=nt.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(Ol(e,0,Gm),t===void 0?t=s.rounding:Ol(t,0,8),Sr(n,e+mn(n)+1,t))};nt.toExponential=function(e,t){var n,s=this,a=s.constructor;return e===void 0?n=ku(s,!0):(Ol(e,0,Gm),t===void 0?t=a.rounding:Ol(t,0,8),s=Sr(new a(s),e+1,t),n=ku(s,!0,e+1)),n};nt.toFixed=function(e,t){var n,s,a=this,i=a.constructor;return e===void 0?ku(a):(Ol(e,0,Gm),t===void 0?t=i.rounding:Ol(t,0,8),s=Sr(new i(a),e+mn(a)+1,t),n=ku(s.abs(),!1,e+mn(s)+1),a.isneg()&&!a.isZero()?"-"+n:n)};nt.toInteger=nt.toint=function(){var e=this,t=e.constructor;return Sr(new t(e),mn(e)+1,t.rounding)};nt.toNumber=function(){return+this};nt.toPower=nt.pow=function(e){var t,n,s,a,i,l,o=this,c=o.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(ha);if(o=new c(o),!o.s){if(e.s<1)throw Error(Ha+"Infinity");return o}if(o.eq(ha))return o;if(s=c.precision,e.eq(ha))return Sr(o,s);if(t=e.e,n=e.d.length-1,l=t>=n,i=o.s,l){if((n=u<0?-u:u)<=TV){for(a=new c(ha),t=Math.ceil(s/Ir+4),zr=!1;n%2&&(a=a.times(o),$$(a.d,t)),n=Ym(n/2),n!==0;)o=o.times(o),$$(o.d,t);return zr=!0,e.s<0?new c(ha).div(a):Sr(a,s)}}else if(i<0)throw Error(Ha+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,o.s=1,zr=!1,a=e.times(hg(o,s+d)),zr=!0,a=OV(a),a.s=i,a};nt.toPrecision=function(e,t){var n,s,a=this,i=a.constructor;return e===void 0?(n=mn(a),s=ku(a,n<=i.toExpNeg||n>=i.toExpPos)):(Ol(e,1,Gm),t===void 0?t=i.rounding:Ol(t,0,8),a=Sr(new i(a),e,t),n=mn(a),s=ku(a,e<=n||n<=i.toExpNeg,e)),s};nt.toSignificantDigits=nt.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Ol(e,1,Gm),t===void 0?t=s.rounding:Ol(t,0,8)),Sr(new s(n),e,t)};nt.toString=nt.valueOf=nt.val=nt.toJSON=nt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=mn(e),n=e.constructor;return ku(e,t<=n.toExpNeg||t>=n.toExpPos)};function EV(e,t){var n,s,a,i,l,o,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),zr?Sr(t,h):t;if(c=e.d,d=t.d,l=e.e,a=t.e,c=c.slice(),i=l-a,i){for(i<0?(s=c,i=-i,o=d.length):(s=d,a=l,o=c.length),l=Math.ceil(h/Ir),o=l>o?l+1:o+1,i>o&&(i=o,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(o=c.length,i=d.length,o-i<0&&(i=o,s=d,d=c,c=s),n=0;i;)n=(c[--i]=c[i]+d[i]+n)/Rn|0,c[i]%=Rn;for(n&&(c.unshift(n),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,zr?Sr(t,h):t}function Ol(e,t,n){if(e!==~~e||e<t||e>n)throw Error(iu+e)}function vl(e){var t,n,s,a=e.length-1,i="",l=e[0];if(a>0){for(i+=l,t=1;t<a;t++)s=e[t]+"",n=Ir-s.length,n&&(i+=Jo(n)),i+=s;l=e[t],s=l+"",n=Ir-s.length,n&&(i+=Jo(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var go=function(){function e(s,a){var i,l=0,o=s.length;for(s=s.slice();o--;)i=s[o]*a+l,s[o]=i%Rn|0,l=i/Rn|0;return l&&s.unshift(l),s}function t(s,a,i,l){var o,c;if(i!=l)c=i>l?1:-1;else for(o=c=0;o<i;o++)if(s[o]!=a[o]){c=s[o]>a[o]?1:-1;break}return c}function n(s,a,i){for(var l=0;i--;)s[i]-=l,l=s[i]<a[i]?1:0,s[i]=l*Rn+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,l){var o,c,d,u,h,f,m,v,x,w,j,g,b,p,N,k,C,_,P=s.constructor,D=s.s==a.s?1:-1,E=s.d,$=a.d;if(!s.s)return new P(s);if(!a.s)throw Error(Ha+"Division by zero");for(c=s.e-a.e,C=$.length,N=E.length,m=new P(D),v=m.d=[],d=0;$[d]==(E[d]||0);)++d;if($[d]>(E[d]||0)&&--c,i==null?g=i=P.precision:l?g=i+(mn(s)-mn(a))+1:g=i,g<0)return new P(0);if(g=g/Ir+2|0,d=0,C==1)for(u=0,$=$[0],g++;(d<N||u)&&g--;d++)b=u*Rn+(E[d]||0),v[d]=b/$|0,u=b%$|0;else{for(u=Rn/($[0]+1)|0,u>1&&($=e($,u),E=e(E,u),C=$.length,N=E.length),p=C,x=E.slice(0,C),w=x.length;w<C;)x[w++]=0;_=$.slice(),_.unshift(0),k=$[0],$[1]>=Rn/2&&++k;do u=0,o=t($,x,C,w),o<0?(j=x[0],C!=w&&(j=j*Rn+(x[1]||0)),u=j/k|0,u>1?(u>=Rn&&(u=Rn-1),h=e($,u),f=h.length,w=x.length,o=t(h,x,f,w),o==1&&(u--,n(h,C<f?_:$,f))):(u==0&&(o=u=1),h=$.slice()),f=h.length,f<w&&h.unshift(0),n(x,h,w),o==-1&&(w=x.length,o=t($,x,C,w),o<1&&(u++,n(x,C<w?_:$,w))),w=x.length):o===0&&(u++,x=[0]),v[d++]=u,o&&x[0]?x[w++]=E[p]||0:(x=[E[p]],w=1);while((p++<N||x[0]!==void 0)&&g--)}return v[0]||v.shift(),m.e=c,Sr(m,l?i+mn(m)+1:i)}}();function OV(e,t){var n,s,a,i,l,o,c=0,d=0,u=e.constructor,h=u.precision;if(mn(e)>16)throw Error(j4+mn(e));if(!e.s)return new u(ha);for(t==null?(zr=!1,o=h):o=t,l=new u(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(s=Math.log(bd(2,d))/Math.LN10*2+5|0,o+=s,n=a=i=new u(ha),u.precision=o;;){if(a=Sr(a.times(e),o),n=n.times(++c),l=i.plus(go(a,n,o)),vl(l.d).slice(0,o)===vl(i.d).slice(0,o)){for(;d--;)i=Sr(i.times(i),o);return u.precision=h,t==null?(zr=!0,Sr(i,h)):i}i=l}}function mn(e){for(var t=e.e*Ir,n=e.d[0];n>=10;n/=10)t++;return t}function Rk(e,t,n){if(t>e.LN10.sd())throw zr=!0,n&&(e.precision=n),Error(Ha+"LN10 precision limit exceeded");return Sr(new e(e.LN10),t)}function Jo(e){for(var t="";e--;)t+="0";return t}function hg(e,t){var n,s,a,i,l,o,c,d,u,h=1,f=10,m=e,v=m.d,x=m.constructor,w=x.precision;if(m.s<1)throw Error(Ha+(m.s?"NaN":"-Infinity"));if(m.eq(ha))return new x(0);if(t==null?(zr=!1,d=w):d=t,m.eq(10))return t==null&&(zr=!0),Rk(x,d);if(d+=f,x.precision=d,n=vl(v),s=n.charAt(0),i=mn(m),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)m=m.times(e),n=vl(m.d),s=n.charAt(0),h++;i=mn(m),s>1?(m=new x("0."+n),i++):m=new x(s+"."+n.slice(1))}else return c=Rk(x,d+2,w).times(i+""),m=hg(new x(s+"."+n.slice(1)),d-f).plus(c),x.precision=w,t==null?(zr=!0,Sr(m,w)):m;for(o=l=m=go(m.minus(ha),m.plus(ha),d),u=Sr(m.times(m),d),a=3;;){if(l=Sr(l.times(u),d),c=o.plus(go(l,new x(a),d)),vl(c.d).slice(0,d)===vl(o.d).slice(0,d))return o=o.times(2),i!==0&&(o=o.plus(Rk(x,d+2,w).times(i+""))),o=go(o,new x(h),d),x.precision=w,t==null?(zr=!0,Sr(o,w)):o;o=c,a+=2}}function M$(e,t){var n,s,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(s,a),t){if(a-=s,n=n-s-1,e.e=Ym(n/Ir),e.d=[],s=(n+1)%Ir,n<0&&(s+=Ir),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=Ir;s<a;)e.d.push(+t.slice(s,s+=Ir));t=t.slice(s),s=Ir-t.length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),zr&&(e.e>rj||e.e<-rj))throw Error(j4+n)}else e.s=0,e.e=0,e.d=[0];return e}function Sr(e,t,n){var s,a,i,l,o,c,d,u,h=e.d;for(l=1,i=h[0];i>=10;i/=10)l++;if(s=t-l,s<0)s+=Ir,a=t,d=h[u=0];else{if(u=Math.ceil((s+1)/Ir),i=h.length,u>=i)return e;for(d=i=h[u],l=1;i>=10;i/=10)l++;s%=Ir,a=s-Ir+l}if(n!==void 0&&(i=bd(10,l-a-1),o=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=n<4?(o||c)&&(n==0||n==(e.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(s>0?a>0?d/bd(10,l-a):0:h[u-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(i=mn(e),h.length=1,t=t-i-1,h[0]=bd(10,(Ir-t%Ir)%Ir),e.e=Ym(-t/Ir)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(s==0?(h.length=u,i=1,u--):(h.length=u+1,i=bd(10,Ir-s),h[u]=a>0?(d/bd(10,l-a)%bd(10,a)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==Rn&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=Rn)break;h[u--]=0,i=1}for(s=h.length;h[--s]===0;)h.pop();if(zr&&(e.e>rj||e.e<-rj))throw Error(j4+mn(e));return e}function RV(e,t){var n,s,a,i,l,o,c,d,u,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),zr?Sr(t,m):t;if(c=e.d,h=t.d,s=t.e,d=e.e,c=c.slice(),l=d-s,l){for(u=l<0,u?(n=c,l=-l,o=h.length):(n=h,s=d,o=c.length),a=Math.max(Math.ceil(m/Ir),o)+2,l>a&&(l=a,n.length=1),n.reverse(),a=l;a--;)n.push(0);n.reverse()}else{for(a=c.length,o=h.length,u=a<o,u&&(o=a),a=0;a<o;a++)if(c[a]!=h[a]){u=c[a]<h[a];break}l=0}for(u&&(n=c,c=h,h=n,t.s=-t.s),o=c.length,a=h.length-o;a>0;--a)c[o++]=0;for(a=h.length;a>l;){if(c[--a]<h[a]){for(i=a;i&&c[--i]===0;)c[i]=Rn-1;--c[i],c[a]+=Rn}c[a]-=h[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,zr?Sr(t,m):t):new f(0)}function ku(e,t,n){var s,a=mn(e),i=vl(e.d),l=i.length;return t?(n&&(s=n-l)>0?i=i.charAt(0)+"."+i.slice(1)+Jo(s):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Jo(-a-1)+i,n&&(s=n-l)>0&&(i+=Jo(s))):a>=l?(i+=Jo(a+1-l),n&&(s=n-a-1)>0&&(i=i+"."+Jo(s))):((s=a+1)<l&&(i=i.slice(0,s)+"."+i.slice(s)),n&&(s=n-l)>0&&(a+1===l&&(i+="."),i+=Jo(s))),e.s<0?"-"+i:i}function $$(e,t){if(e.length>t)return e.length=t,!0}function DV(e){var t,n,s;function a(i){var l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,i instanceof a){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(iu+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return M$(l,i.toString())}else if(typeof i!="string")throw Error(iu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,E2e.test(i))M$(l,i);else throw Error(iu+i)}if(a.prototype=nt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=DV,a.config=a.set=O2e,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return a.config(e),a}function O2e(e){if(!e||typeof e!="object")throw Error(Ha+"Object expected");var t,n,s,a=["precision",1,Gm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((s=e[n=a[t]])!==void 0)if(Ym(s)===s&&s>=a[t+1]&&s<=a[t+2])this[n]=s;else throw Error(iu+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(iu+n+": "+s);return this}var w4=DV(T2e);ha=new w4(1);const kr=w4;function R2e(e){return I2e(e)||$2e(e)||M2e(e)||D2e()}function D2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M2e(e,t){if(e){if(typeof e=="string")return LC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LC(e,t)}}function $2e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function I2e(e){if(Array.isArray(e))return LC(e)}function LC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var F2e=function(t){return t},MV={"@@functional/placeholder":!0},$V=function(t){return t===MV},I$=function(t){return function n(){return arguments.length===0||arguments.length===1&&$V(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},L2e=function e(t,n){return t===1?n:I$(function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var l=a.filter(function(o){return o!==MV}).length;return l>=t?n.apply(void 0,a):e(t-l,I$(function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];var u=a.map(function(h){return $V(h)?c.shift():h});return n.apply(void 0,R2e(u).concat(c))}))})},V1=function(t){return L2e(t.length,t)},UC=function(t,n){for(var s=[],a=t;a<n;++a)s[a-t]=a;return s},U2e=V1(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),B2e=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return F2e;var a=n.reverse(),i=a[0],l=a.slice(1);return function(){return l.reduce(function(o,c){return c(o)},i.apply(void 0,arguments))}},BC=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},IV=function(t){var n=null,s=null;return function(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n&&i.every(function(o,c){return o===n[c]})||(n=i,s=t.apply(void 0,i)),s}};function z2e(e){var t;return e===0?t=1:t=Math.floor(new kr(e).abs().log(10).toNumber())+1,t}function V2e(e,t,n){for(var s=new kr(e),a=0,i=[];s.lt(t)&&a<1e5;)i.push(s.toNumber()),s=s.add(n),a++;return i}var q2e=V1(function(e,t,n){var s=+e,a=+t;return s+n*(a-s)}),W2e=V1(function(e,t,n){var s=t-+e;return s=s||1/0,(n-e)/s}),H2e=V1(function(e,t,n){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(n-e)/s))});const q1={rangeStep:V2e,getDigitCount:z2e,interpolateNumber:q2e,uninterpolateNumber:W2e,uninterpolateTruncation:H2e};function zC(e){return Y2e(e)||G2e(e)||FV(e)||K2e()}function K2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G2e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Y2e(e){if(Array.isArray(e))return VC(e)}function fg(e,t){return Q2e(e)||Z2e(e,t)||FV(e,t)||X2e()}function X2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FV(e,t){if(e){if(typeof e=="string")return VC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VC(e,t)}}function VC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Z2e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,a=!1,i=void 0;try{for(var l=e[Symbol.iterator](),o;!(s=(o=l.next()).done)&&(n.push(o.value),!(t&&n.length===t));s=!0);}catch(c){a=!0,i=c}finally{try{!s&&l.return!=null&&l.return()}finally{if(a)throw i}}return n}}function Q2e(e){if(Array.isArray(e))return e}function LV(e){var t=fg(e,2),n=t[0],s=t[1],a=n,i=s;return n>s&&(a=s,i=n),[a,i]}function UV(e,t,n){if(e.lte(0))return new kr(0);var s=q1.getDigitCount(e.toNumber()),a=new kr(10).pow(s),i=e.div(a),l=s!==1?.05:.1,o=new kr(Math.ceil(i.div(l).toNumber())).add(n).mul(l),c=o.mul(a);return t?c:new kr(Math.ceil(c))}function J2e(e,t,n){var s=1,a=new kr(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(s=new kr(10).pow(q1.getDigitCount(e)-1),a=new kr(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new kr(Math.floor(e)))}else e===0?a=new kr(Math.floor((t-1)/2)):n||(a=new kr(Math.floor(e)));var l=Math.floor((t-1)/2),o=B2e(U2e(function(c){return a.add(new kr(c-l).mul(s)).toNumber()}),UC);return o(0,t)}function BV(e,t,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new kr(0),tickMin:new kr(0),tickMax:new kr(0)};var i=UV(new kr(t).sub(e).div(n-1),s,a),l;e<=0&&t>=0?l=new kr(0):(l=new kr(e).add(t).div(2),l=l.sub(new kr(l).mod(i)));var o=Math.ceil(l.sub(e).div(i).toNumber()),c=Math.ceil(new kr(t).sub(l).div(i).toNumber()),d=o+c+1;return d>n?BV(e,t,n,s,a+1):(d<n&&(c=t>0?c+(n-d):c,o=t>0?o:o+(n-d)),{step:i,tickMin:l.sub(new kr(o).mul(i)),tickMax:l.add(new kr(c).mul(i))})}function eCe(e){var t=fg(e,2),n=t[0],s=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),o=LV([n,s]),c=fg(o,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var h=u===1/0?[d].concat(zC(UC(0,a-1).map(function(){return 1/0}))):[].concat(zC(UC(0,a-1).map(function(){return-1/0})),[u]);return n>s?BC(h):h}if(d===u)return J2e(d,a,i);var f=BV(d,u,l,i),m=f.step,v=f.tickMin,x=f.tickMax,w=q1.rangeStep(v,x.add(new kr(.1).mul(m)),m);return n>s?BC(w):w}function tCe(e,t){var n=fg(e,2),s=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=LV([s,a]),o=fg(l,2),c=o[0],d=o[1];if(c===-1/0||d===1/0)return[s,a];if(c===d)return[c];var u=Math.max(t,2),h=UV(new kr(d).sub(c).div(u-1),i,0),f=[].concat(zC(q1.rangeStep(new kr(c),new kr(d).sub(new kr(.99).mul(h)),h)),[d]);return s>a?BC(f):f}var rCe=IV(eCe),nCe=IV(tCe),sCe="Invariant failed";function Su(e,t){throw new Error(sCe)}var aCe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function nj(){return nj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},nj.apply(this,arguments)}function iCe(e,t){return dCe(e)||cCe(e,t)||oCe(e,t)||lCe()}function lCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oCe(e,t){if(e){if(typeof e=="string")return F$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F$(e,t)}}function F$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function cCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function dCe(e){if(Array.isArray(e))return e}function uCe(e,t){if(e==null)return{};var n=hCe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function hCe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function fCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mCe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,qV(s.key),s)}}function pCe(e,t,n){return t&&mCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xCe(e,t,n){return t=sj(t),gCe(e,zV()?Reflect.construct(t,n||[],sj(e).constructor):t.apply(e,n))}function gCe(e,t){if(t&&(Zf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vCe(e)}function vCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zV=function(){return!!e})()}function sj(e){return sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sj(e)}function yCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qC(e,t)}function qC(e,t){return qC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},qC(e,t)}function VV(e,t,n){return t=qV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qV(e){var t=bCe(e,"string");return Zf(t)=="symbol"?t:t+""}function bCe(e,t){if(Zf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Zf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ey=function(e){function t(){return fCe(this,t),xCe(this,t,arguments)}return yCe(t,e),pCe(t,[{key:"render",value:function(){var s=this.props,a=s.offset,i=s.layout,l=s.width,o=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,h=s.yAxis,f=uCe(s,aCe),m=ot(f,!1);this.props.direction==="x"&&u.type!=="number"&&Su();var v=c.map(function(x){var w=d(x,o),j=w.x,g=w.y,b=w.value,p=w.errorVal;if(!p)return null;var N=[],k,C;if(Array.isArray(p)){var _=iCe(p,2);k=_[0],C=_[1]}else k=C=p;if(i==="vertical"){var P=u.scale,D=g+a,E=D+l,$=D-l,A=P(b-k),T=P(b+C);N.push({x1:T,y1:E,x2:T,y2:$}),N.push({x1:A,y1:D,x2:T,y2:D}),N.push({x1:A,y1:E,x2:A,y2:$})}else if(i==="horizontal"){var O=h.scale,z=j+a,F=z-l,R=z+l,I=O(b-k),Q=O(b+C);N.push({x1:F,y1:Q,x2:R,y2:Q}),N.push({x1:z,y1:I,x2:z,y2:Q}),N.push({x1:F,y1:I,x2:R,y2:I})}return Z.createElement(Gt,nj({className:"recharts-errorBar",key:"bar-".concat(N.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},m),N.map(function(Y){return Z.createElement("line",nj({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return Z.createElement(Gt,{className:"recharts-errorBars"},v)}}])}(Z.Component);VV(ey,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});VV(ey,"displayName","ErrorBar");function mg(e){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(e)}function L$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function dd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L$(Object(n),!0).forEach(function(s){jCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function jCe(e,t,n){return t=wCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wCe(e){var t=NCe(e,"string");return mg(t)=="symbol"?t:t+""}function NCe(e,t){if(mg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(mg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WV=function(t){var n=t.children,s=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,l=oa(n,Bh);if(!l)return null;var o=Bh.defaultProps,c=o!==void 0?dd(dd({},o),l.props):{},d;return l.props&&l.props.payload?d=l.props&&l.props.payload:i==="children"?d=(s||[]).reduce(function(u,h){var f=h.item,m=h.props,v=m.sectors||m.data||[];return u.concat(v.map(function(x){return{type:l.props.iconType||f.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):d=(s||[]).map(function(u){var h=u.item,f=h.type.defaultProps,m=f!==void 0?dd(dd({},f),h.props):{},v=m.dataKey,x=m.name,w=m.legendType,j=m.hide;return{inactive:j,dataKey:v,type:c.iconType||w||"square",color:N4(h),value:x||v,payload:m}}),dd(dd(dd({},c),Bh.getWithHeight(l,a)),{},{payload:d,item:l})};function pg(e){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pg(e)}function U$(e){return _Ce(e)||CCe(e)||SCe(e)||kCe()}function kCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SCe(e,t){if(e){if(typeof e=="string")return WC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WC(e,t)}}function CCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _Ce(e){if(Array.isArray(e))return WC(e)}function WC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function B$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B$(Object(n),!0).forEach(function(s){Vh(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Vh(e,t,n){return t=PCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PCe(e){var t=ACe(e,"string");return pg(t)=="symbol"?t:t+""}function ACe(e,t){if(pg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(pg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function an(e,t,n){return Tt(e)||Tt(t)?n:An(t)?va(e,t,n):gt(t)?t(e):n}function ux(e,t,n,s){var a=C2e(e,function(o){return an(o,t)});if(n==="number"){var i=a.filter(function(o){return ze(o)||parseFloat(o)});return i.length?[z1(i),jc(i)]:[1/0,-1/0]}var l=s?a.filter(function(o){return!Tt(o)}):a;return l.map(function(o){return An(o)||o instanceof Date?o:""})}var TCe=function(t){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,o=(n=s==null?void 0:s.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<o;d++){var u=d>0?a[d-1].coordinate:a[o-1].coordinate,h=a[d].coordinate,f=d>=o-1?a[0].coordinate:a[d+1].coordinate,m=void 0;if(ws(h-u)!==ws(f-h)){var v=[];if(ws(f-h)===ws(c[1]-c[0])){m=f;var x=h+c[1]-c[0];v[0]=Math.min(x,(x+u)/2),v[1]=Math.max(x,(x+u)/2)}else{m=u;var w=f+c[1]-c[0];v[0]=Math.min(h,(w+h)/2),v[1]=Math.max(h,(w+h)/2)}var j=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(t>j[0]&&t<=j[1]||t>=v[0]&&t<=v[1]){l=a[d].index;break}}else{var g=Math.min(u,f),b=Math.max(u,f);if(t>(g+h)/2&&t<=(b+h)/2){l=a[d].index;break}}}else for(var p=0;p<o;p++)if(p===0&&t<=(s[p].coordinate+s[p+1].coordinate)/2||p>0&&p<o-1&&t>(s[p].coordinate+s[p-1].coordinate)/2&&t<=(s[p].coordinate+s[p+1].coordinate)/2||p===o-1&&t>(s[p].coordinate+s[p-1].coordinate)/2){l=s[p].index;break}return l},N4=function(t){var n,s=t,a=s.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?en(en({},t.type.defaultProps),t.props):t.props,l=i.stroke,o=i.fill,c;switch(a){case"Line":c=l;break;case"Area":case"Radar":c=l&&l!=="none"?l:o;break;default:c=o;break}return c},ECe=function(t){var n=t.barSize,s=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var l={},o=Object.keys(i),c=0,d=o.length;c<d;c++)for(var u=i[o[c]].stackGroups,h=Object.keys(u),f=0,m=h.length;f<m;f++){var v=u[h[f]],x=v.items,w=v.cateAxisId,j=x.filter(function(C){return xo(C.type).indexOf("Bar")>=0});if(j&&j.length){var g=j[0].type.defaultProps,b=g!==void 0?en(en({},g),j[0].props):j[0].props,p=b.barSize,N=b[w];l[N]||(l[N]=[]);var k=Tt(p)?n:p;l[N].push({item:j[0],stackList:j.slice(1),barSize:Tt(k)?void 0:Ns(k,s,0)})}}return l},OCe=function(t){var n=t.barGap,s=t.barCategoryGap,a=t.bandSize,i=t.sizeList,l=i===void 0?[]:i,o=t.maxBarSize,c=l.length;if(c<1)return null;var d=Ns(n,a,0,!0),u,h=[];if(l[0].barSize===+l[0].barSize){var f=!1,m=a/c,v=l.reduce(function(p,N){return p+N.barSize||0},0);v+=(c-1)*d,v>=a&&(v-=(c-1)*d,d=0),v>=a&&m>0&&(f=!0,m*=.9,v=c*m);var x=(a-v)/2>>0,w={offset:x-d,size:0};u=l.reduce(function(p,N){var k={item:N.item,position:{offset:w.offset+w.size+d,size:f?m:N.barSize}},C=[].concat(U$(p),[k]);return w=C[C.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(_){C.push({item:_,position:w})}),C},h)}else{var j=Ns(s,a,0,!0);a-2*j-(c-1)*d<=0&&(d=0);var g=(a-2*j-(c-1)*d)/c;g>1&&(g>>=0);var b=o===+o?Math.min(g,o):g;u=l.reduce(function(p,N,k){var C=[].concat(U$(p),[{item:N.item,position:{offset:j+(g+d)*k+(g-b)/2,size:b}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(_){C.push({item:_,position:C[C.length-1].position})}),C},h)}return u},RCe=function(t,n,s,a){var i=s.children,l=s.width,o=s.margin,c=l-(o.left||0)-(o.right||0),d=WV({children:i,legendWidth:c});if(d){var u=a||{},h=u.width,f=u.height,m=d.align,v=d.verticalAlign,x=d.layout;if((x==="vertical"||x==="horizontal"&&v==="middle")&&m!=="center"&&ze(t[m]))return en(en({},t),{},Vh({},m,t[m]+(h||0)));if((x==="horizontal"||x==="vertical"&&m==="center")&&v!=="middle"&&ze(t[v]))return en(en({},t),{},Vh({},v,t[v]+(f||0)))}return t},DCe=function(t,n,s){return Tt(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||s==="x"?n==="xAxis":s==="y"?n==="yAxis":!0},HV=function(t,n,s,a,i){var l=n.props.children,o=ya(l,ey).filter(function(d){return DCe(a,i,d.props.direction)});if(o&&o.length){var c=o.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var h=an(u,s);if(Tt(h))return d;var f=Array.isArray(h)?[z1(h),jc(h)]:[h,h],m=c.reduce(function(v,x){var w=an(u,x,0),j=f[0]-Math.abs(Array.isArray(w)?w[0]:w),g=f[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(j,v[0]),Math.max(g,v[1])]},[1/0,-1/0]);return[Math.min(m[0],d[0]),Math.max(m[1],d[1])]},[1/0,-1/0])}return null},MCe=function(t,n,s,a,i){var l=n.map(function(o){return HV(t,o,s,i,a)}).filter(function(o){return!Tt(o)});return l&&l.length?l.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},KV=function(t,n,s,a,i){var l=n.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&HV(t,c,d,a)||ux(t,d,s,i)});if(s==="number")return l.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var o={};return l.reduce(function(c,d){for(var u=0,h=d.length;u<h;u++)o[d[u]]||(o[d[u]]=!0,c.push(d[u]));return c},[])},GV=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},YV=function(t,n,s,a){if(a)return t.map(function(c){return c.coordinate});var i,l,o=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===s&&(l=!0),c.coordinate});return i||o.push(n),l||o.push(s),o},fo=function(t,n,s){if(!t)return null;var a=t.scale,i=t.duplicateDomain,l=t.type,o=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(n||s)&&l==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?ws(o[0]-o[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(h){var f=i?i.indexOf(h):h;return{coordinate:a(f)+d,value:h,offset:d}});return u.filter(function(h){return!zm(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,f){return{coordinate:a(h)+d,value:h,index:f,offset:d}}):a.ticks&&!s?a.ticks(t.tickCount).map(function(h){return{coordinate:a(h)+d,value:h,offset:d}}):a.domain().map(function(h,f){return{coordinate:a(h)+d,value:i?i[h]:h,index:f,offset:d}})},Dk=new WeakMap,Jy=function(t,n){if(typeof n!="function")return t;Dk.has(t)||Dk.set(t,new WeakMap);var s=Dk.get(t);if(s.has(n))return s.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return s.set(n,a),a},XV=function(t,n,s){var a=t.scale,i=t.type,l=t.layout,o=t.axisType;if(a==="auto")return l==="radial"&&o==="radiusAxis"?{scale:lg(),realScaleType:"band"}:l==="radial"&&o==="angleAxis"?{scale:Qb(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?{scale:dx(),realScaleType:"point"}:i==="category"?{scale:lg(),realScaleType:"band"}:{scale:Qb(),realScaleType:"linear"};if(bu(a)){var c="scale".concat(P1(a));return{scale:(D$[c]||dx)(),realScaleType:D$[c]?c:"point"}}return gt(a)?{scale:a}:{scale:dx(),realScaleType:"point"}},z$=1e-4,ZV=function(t){var n=t.domain();if(!(!n||n.length<=2)){var s=n.length,a=t.range(),i=Math.min(a[0],a[1])-z$,l=Math.max(a[0],a[1])+z$,o=t(n[0]),c=t(n[s-1]);(o<i||o>l||c<i||c>l)&&t.domain([n[0],n[s-1]])}},$Ce=function(t,n){if(!t)return null;for(var s=0,a=t.length;s<a;s++)if(t[s].item===n)return t[s].position;return null},ICe=function(t,n){if(!n||n.length!==2||!ze(n[0])||!ze(n[1]))return t;var s=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!ze(t[0])||t[0]<s)&&(i[0]=s),(!ze(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<s&&(i[1]=s),i},FCe=function(t){var n=t.length;if(!(n<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,l=0,o=0;o<n;++o){var c=zm(t[o][s][1])?t[o][s][0]:t[o][s][1];c>=0?(t[o][s][0]=i,t[o][s][1]=i+c,i=t[o][s][1]):(t[o][s][0]=l,t[o][s][1]=l+c,l=t[o][s][1])}},LCe=function(t){var n=t.length;if(!(n<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,l=0;l<n;++l){var o=zm(t[l][s][1])?t[l][s][0]:t[l][s][1];o>=0?(t[l][s][0]=i,t[l][s][1]=i+o,i=t[l][s][1]):(t[l][s][0]=0,t[l][s][1]=0)}},UCe={sign:FCe,expand:axe,none:Vf,silhouette:ixe,wiggle:lxe,positive:LCe},BCe=function(t,n,s){var a=n.map(function(o){return o.props.dataKey}),i=UCe[s],l=sxe().keys(a).value(function(o,c){return+an(o,c,0)}).order(xC).offset(i);return l(t)},zCe=function(t,n,s,a,i,l){if(!t)return null;var o=l?n.reverse():n,c={},d=o.reduce(function(h,f){var m,v=(m=f.type)!==null&&m!==void 0&&m.defaultProps?en(en({},f.type.defaultProps),f.props):f.props,x=v.stackId,w=v.hide;if(w)return h;var j=v[s],g=h[j]||{hasStack:!1,stackGroups:{}};if(An(x)){var b=g.stackGroups[x]||{numericAxisId:s,cateAxisId:a,items:[]};b.items.push(f),g.hasStack=!0,g.stackGroups[x]=b}else g.stackGroups[Uu("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[f]};return en(en({},h),{},Vh({},j,g))},c),u={};return Object.keys(d).reduce(function(h,f){var m=d[f];if(m.hasStack){var v={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(x,w){var j=m.stackGroups[w];return en(en({},x),{},Vh({},w,{numericAxisId:s,cateAxisId:a,items:j.items,stackedData:BCe(t,j.items,i)}))},v)}return en(en({},h),{},Vh({},f,m))},u)},QV=function(t,n){var s=n.realScaleType,a=n.type,i=n.tickCount,l=n.originalDomain,o=n.allowDecimals,c=s||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=rCe(d,i,o);return t.domain([z1(u),jc(u)]),{niceTicks:u}}if(i&&a==="number"){var h=t.domain(),f=nCe(h,i,o);return{niceTicks:f}}return null};function aj(e){var t=e.axis,n=e.ticks,s=e.bandSize,a=e.entry,i=e.index,l=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Tt(a[t.dataKey])){var o=Eb(n,"value",a[t.dataKey]);if(o)return o.coordinate+s/2}return n[i]?n[i].coordinate+s/2:null}var c=an(a,Tt(l)?t.dataKey:l);return Tt(c)?null:t.scale(c)}var V$=function(t){var n=t.axis,s=t.ticks,a=t.offset,i=t.bandSize,l=t.entry,o=t.index;if(n.type==="category")return s[o]?s[o].coordinate+a:null;var c=an(l,n.dataKey,n.domain[o]);return Tt(c)?null:n.scale(c)-i/2+a},VCe=function(t){var n=t.numericAxis,s=n.scale.domain();if(n.type==="number"){var a=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return a<=0&&i>=0?0:i<0?i:a}return s[0]},qCe=function(t,n){var s,a=(s=t.type)!==null&&s!==void 0&&s.defaultProps?en(en({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(An(i)){var l=n[i];if(l){var o=l.items.indexOf(t);return o>=0?l.stackedData[o]:null}}return null},WCe=function(t){return t.reduce(function(n,s){return[z1(s.concat([n[0]]).filter(ze)),jc(s.concat([n[1]]).filter(ze))]},[1/0,-1/0])},JV=function(t,n,s){return Object.keys(t).reduce(function(a,i){var l=t[i],o=l.stackedData,c=o.reduce(function(d,u){var h=WCe(u.slice(n,s+1));return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},q$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,W$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,HC=function(t,n,s){if(gt(t))return t(n,s);if(!Array.isArray(t))return n;var a=[];if(ze(t[0]))a[0]=s?t[0]:Math.min(t[0],n[0]);else if(q$.test(t[0])){var i=+q$.exec(t[0])[1];a[0]=n[0]-i}else gt(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(ze(t[1]))a[1]=s?t[1]:Math.max(t[1],n[1]);else if(W$.test(t[1])){var l=+W$.exec(t[1])[1];a[1]=n[1]+l}else gt(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},ij=function(t,n,s){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!s||a>0)return a}if(t&&n&&n.length>=2){for(var i=XT(n,function(h){return h.coordinate}),l=1/0,o=1,c=i.length;o<c;o++){var d=i[o],u=i[o-1];l=Math.min((d.coordinate||0)-(u.coordinate||0),l)}return l===1/0?0:l}return s?void 0:0},H$=function(t,n,s){return!t||!t.length||Nu(t,va(s,"type.defaultProps.domain"))?n:t},eq=function(t,n){var s=t.type.defaultProps?en(en({},t.type.defaultProps),t.props):t.props,a=s.dataKey,i=s.name,l=s.unit,o=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return en(en({},ot(t,!1)),{},{dataKey:a,unit:l,formatter:o,name:i||a,color:N4(t),value:an(n,a),type:c,payload:n,chartType:d,hide:u})};function xg(e){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(e)}function K$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K$(Object(n),!0).forEach(function(s){tq(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tq(e,t,n){return t=HCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HCe(e){var t=KCe(e,"string");return xg(t)=="symbol"?t:t+""}function KCe(e,t){if(xg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(xg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GCe(e,t){return QCe(e)||ZCe(e,t)||XCe(e,t)||YCe()}function YCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XCe(e,t){if(e){if(typeof e=="string")return G$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G$(e,t)}}function G$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function ZCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function QCe(e){if(Array.isArray(e))return e}var lj=Math.PI/180,JCe=function(t){return t*180/Math.PI},Er=function(t,n,s,a){return{x:t+Math.cos(-lj*a)*s,y:n+Math.sin(-lj*a)*s}},rq=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(n-(s.top||0)-(s.bottom||0)))/2},e_e=function(t,n,s,a,i){var l=t.width,o=t.height,c=t.startAngle,d=t.endAngle,u=Ns(t.cx,l,l/2),h=Ns(t.cy,o,o/2),f=rq(l,o,s),m=Ns(t.innerRadius,f,0),v=Ns(t.outerRadius,f,f*.8),x=Object.keys(n);return x.reduce(function(w,j){var g=n[j],b=g.domain,p=g.reversed,N;if(Tt(g.range))a==="angleAxis"?N=[c,d]:a==="radiusAxis"&&(N=[m,v]),p&&(N=[N[1],N[0]]);else{N=g.range;var k=N,C=GCe(k,2);c=C[0],d=C[1]}var _=XV(g,i),P=_.realScaleType,D=_.scale;D.domain(b).range(N),ZV(D);var E=QV(D,Yl(Yl({},g),{},{realScaleType:P})),$=Yl(Yl(Yl({},g),E),{},{range:N,radius:v,realScaleType:P,scale:D,cx:u,cy:h,innerRadius:m,outerRadius:v,startAngle:c,endAngle:d});return Yl(Yl({},w),{},tq({},j,$))},{})},t_e=function(t,n){var s=t.x,a=t.y,i=n.x,l=n.y;return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-l,2))},r_e=function(t,n){var s=t.x,a=t.y,i=n.cx,l=n.cy,o=t_e({x:s,y:a},{x:i,y:l});if(o<=0)return{radius:o};var c=(s-i)/o,d=Math.acos(c);return a>l&&(d=2*Math.PI-d),{radius:o,angle:JCe(d),angleInRadian:d}},n_e=function(t){var n=t.startAngle,s=t.endAngle,a=Math.floor(n/360),i=Math.floor(s/360),l=Math.min(a,i);return{startAngle:n-l*360,endAngle:s-l*360}},s_e=function(t,n){var s=n.startAngle,a=n.endAngle,i=Math.floor(s/360),l=Math.floor(a/360),o=Math.min(i,l);return t+o*360},Y$=function(t,n){var s=t.x,a=t.y,i=r_e({x:s,y:a},n),l=i.radius,o=i.angle,c=n.innerRadius,d=n.outerRadius;if(l<c||l>d)return!1;if(l===0)return!0;var u=n_e(n),h=u.startAngle,f=u.endAngle,m=o,v;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;v=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;v=m>=f&&m<=h}return v?Yl(Yl({},n),{},{radius:l,angle:s_e(m,n)}):null},nq=function(t){return!y.isValidElement(t)&&!gt(t)&&typeof t!="boolean"?t.className:""};function gg(e){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gg(e)}var a_e=["offset"];function i_e(e){return d_e(e)||c_e(e)||o_e(e)||l_e()}function l_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o_e(e,t){if(e){if(typeof e=="string")return KC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KC(e,t)}}function c_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function d_e(e){if(Array.isArray(e))return KC(e)}function KC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function u_e(e,t){if(e==null)return{};var n=h_e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function h_e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function X$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X$(Object(n),!0).forEach(function(s){f_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function f_e(e,t,n){return t=m_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m_e(e){var t=p_e(e,"string");return gg(t)=="symbol"?t:t+""}function p_e(e,t){if(gg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(gg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vg(){return vg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vg.apply(this,arguments)}var x_e=function(t){var n=t.value,s=t.formatter,a=Tt(t.children)?n:t.children;return gt(s)?s(a):a},g_e=function(t,n){var s=ws(n-t),a=Math.min(Math.abs(n-t),360);return s*a},v_e=function(t,n,s){var a=t.position,i=t.viewBox,l=t.offset,o=t.className,c=i,d=c.cx,u=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,v=c.endAngle,x=c.clockWise,w=(h+f)/2,j=g_e(m,v),g=j>=0?1:-1,b,p;a==="insideStart"?(b=m+g*l,p=x):a==="insideEnd"?(b=v-g*l,p=!x):a==="end"&&(b=v+g*l,p=x),p=j<=0?p:!p;var N=Er(d,u,w,b),k=Er(d,u,w,b+(p?1:-1)*359),C="M".concat(N.x,",").concat(N.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(p?0:1,`,
    `).concat(k.x,",").concat(k.y),_=Tt(t.id)?Uu("recharts-radial-line-"):t.id;return Z.createElement("text",vg({},s,{dominantBaseline:"central",className:Ot("recharts-radial-bar-label",o)}),Z.createElement("defs",null,Z.createElement("path",{id:_,d:C})),Z.createElement("textPath",{xlinkHref:"#".concat(_)},n))},y_e=function(t){var n=t.viewBox,s=t.offset,a=t.position,i=n,l=i.cx,o=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,h=i.endAngle,f=(u+h)/2;if(a==="outside"){var m=Er(l,o,d+s,f),v=m.x,x=m.y;return{x:v,y:x,textAnchor:v>=l?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"end"};var w=(c+d)/2,j=Er(l,o,w,f),g=j.x,b=j.y;return{x:g,y:b,textAnchor:"middle",verticalAnchor:"middle"}},b_e=function(t){var n=t.viewBox,s=t.parentViewBox,a=t.offset,i=t.position,l=n,o=l.x,c=l.y,d=l.width,u=l.height,h=u>=0?1:-1,f=h*a,m=h>0?"end":"start",v=h>0?"start":"end",x=d>=0?1:-1,w=x*a,j=x>0?"end":"start",g=x>0?"start":"end";if(i==="top"){var b={x:o+d/2,y:c-h*a,textAnchor:"middle",verticalAnchor:m};return yn(yn({},b),s?{height:Math.max(c-s.y,0),width:d}:{})}if(i==="bottom"){var p={x:o+d/2,y:c+u+f,textAnchor:"middle",verticalAnchor:v};return yn(yn({},p),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(i==="left"){var N={x:o-w,y:c+u/2,textAnchor:j,verticalAnchor:"middle"};return yn(yn({},N),s?{width:Math.max(N.x-s.x,0),height:u}:{})}if(i==="right"){var k={x:o+d+w,y:c+u/2,textAnchor:g,verticalAnchor:"middle"};return yn(yn({},k),s?{width:Math.max(s.x+s.width-k.x,0),height:u}:{})}var C=s?{width:d,height:u}:{};return i==="insideLeft"?yn({x:o+w,y:c+u/2,textAnchor:g,verticalAnchor:"middle"},C):i==="insideRight"?yn({x:o+d-w,y:c+u/2,textAnchor:j,verticalAnchor:"middle"},C):i==="insideTop"?yn({x:o+d/2,y:c+f,textAnchor:"middle",verticalAnchor:v},C):i==="insideBottom"?yn({x:o+d/2,y:c+u-f,textAnchor:"middle",verticalAnchor:m},C):i==="insideTopLeft"?yn({x:o+w,y:c+f,textAnchor:g,verticalAnchor:v},C):i==="insideTopRight"?yn({x:o+d-w,y:c+f,textAnchor:j,verticalAnchor:v},C):i==="insideBottomLeft"?yn({x:o+w,y:c+u-f,textAnchor:g,verticalAnchor:m},C):i==="insideBottomRight"?yn({x:o+d-w,y:c+u-f,textAnchor:j,verticalAnchor:m},C):Fm(i)&&(ze(i.x)||Pd(i.x))&&(ze(i.y)||Pd(i.y))?yn({x:o+Ns(i.x,d),y:c+Ns(i.y,u),textAnchor:"end",verticalAnchor:"end"},C):yn({x:o+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},C)},j_e=function(t){return"cx"in t&&ze(t.cx)};function $n(e){var t=e.offset,n=t===void 0?5:t,s=u_e(e,a_e),a=yn({offset:n},s),i=a.viewBox,l=a.position,o=a.value,c=a.children,d=a.content,u=a.className,h=u===void 0?"":u,f=a.textBreakAll;if(!i||Tt(o)&&Tt(c)&&!y.isValidElement(d)&&!gt(d))return null;if(y.isValidElement(d))return y.cloneElement(d,a);var m;if(gt(d)){if(m=y.createElement(d,a),y.isValidElement(m))return m}else m=x_e(a);var v=j_e(i),x=ot(a,!0);if(v&&(l==="insideStart"||l==="insideEnd"||l==="end"))return v_e(a,m,x);var w=v?y_e(a):b_e(a);return Z.createElement(wu,vg({className:Ot("recharts-label",h)},x,w,{breakAll:f}),m)}$n.displayName="Label";var sq=function(t){var n=t.cx,s=t.cy,a=t.angle,i=t.startAngle,l=t.endAngle,o=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,h=t.x,f=t.y,m=t.top,v=t.left,x=t.width,w=t.height,j=t.clockWise,g=t.labelViewBox;if(g)return g;if(ze(x)&&ze(w)){if(ze(h)&&ze(f))return{x:h,y:f,width:x,height:w};if(ze(m)&&ze(v))return{x:m,y:v,width:x,height:w}}return ze(h)&&ze(f)?{x:h,y:f,width:0,height:0}:ze(n)&&ze(s)?{cx:n,cy:s,startAngle:i||a||0,endAngle:l||a||0,innerRadius:d||0,outerRadius:u||c||o||0,clockWise:j}:t.viewBox?t.viewBox:{}},w_e=function(t,n){return t?t===!0?Z.createElement($n,{key:"label-implicit",viewBox:n}):An(t)?Z.createElement($n,{key:"label-implicit",viewBox:n,value:t}):y.isValidElement(t)?t.type===$n?y.cloneElement(t,{key:"label-implicit",viewBox:n}):Z.createElement($n,{key:"label-implicit",content:t,viewBox:n}):gt(t)?Z.createElement($n,{key:"label-implicit",content:t,viewBox:n}):Fm(t)?Z.createElement($n,vg({viewBox:n},t,{key:"label-implicit"})):null:null},N_e=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var a=t.children,i=sq(t),l=ya(a,$n).map(function(c,d){return y.cloneElement(c,{viewBox:n||i,key:"label-".concat(d)})});if(!s)return l;var o=w_e(t.label,n||i);return[o].concat(i_e(l))};$n.parseViewBox=sq;$n.renderCallByParent=N_e;function k_e(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var S_e=k_e;const C_e=Qt(S_e);function yg(e){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yg(e)}var __e=["valueAccessor"],P_e=["data","dataKey","clockWise","id","textBreakAll"];function A_e(e){return R_e(e)||O_e(e)||E_e(e)||T_e()}function T_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E_e(e,t){if(e){if(typeof e=="string")return GC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GC(e,t)}}function O_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function R_e(e){if(Array.isArray(e))return GC(e)}function GC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function oj(){return oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},oj.apply(this,arguments)}function Z$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Q$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z$(Object(n),!0).forEach(function(s){D_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function D_e(e,t,n){return t=M_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M_e(e){var t=$_e(e,"string");return yg(t)=="symbol"?t:t+""}function $_e(e,t){if(yg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(yg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J$(e,t){if(e==null)return{};var n=I_e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function I_e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var F_e=function(t){return Array.isArray(t.value)?C_e(t.value):t.value};function Cl(e){var t=e.valueAccessor,n=t===void 0?F_e:t,s=J$(e,__e),a=s.data,i=s.dataKey,l=s.clockWise,o=s.id,c=s.textBreakAll,d=J$(s,P_e);return!a||!a.length?null:Z.createElement(Gt,{className:"recharts-label-list"},a.map(function(u,h){var f=Tt(i)?n(u,h):an(u&&u.payload,i),m=Tt(o)?{}:{id:"".concat(o,"-").concat(h)};return Z.createElement($n,oj({},ot(u,!0),d,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:$n.parseViewBox(Tt(l)?u:Q$(Q$({},u),{},{clockWise:l})),key:"label-".concat(h),index:h}))}))}Cl.displayName="LabelList";function L_e(e,t){return e?e===!0?Z.createElement(Cl,{key:"labelList-implicit",data:t}):Z.isValidElement(e)||gt(e)?Z.createElement(Cl,{key:"labelList-implicit",data:t,content:e}):Fm(e)?Z.createElement(Cl,oj({data:t},e,{key:"labelList-implicit"})):null:null}function U_e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,a=ya(s,Cl).map(function(l,o){return y.cloneElement(l,{data:t,key:"labelList-".concat(o)})});if(!n)return a;var i=L_e(e.label,t);return[i].concat(A_e(a))}Cl.renderCallByParent=U_e;function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function YC(){return YC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},YC.apply(this,arguments)}function e5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function t5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e5(Object(n),!0).forEach(function(s){B_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function B_e(e,t,n){return t=z_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z_e(e){var t=V_e(e,"string");return bg(t)=="symbol"?t:t+""}function V_e(e,t){if(bg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(bg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q_e=function(t,n){var s=ws(n-t),a=Math.min(Math.abs(n-t),359.999);return s*a},e0=function(t){var n=t.cx,s=t.cy,a=t.radius,i=t.angle,l=t.sign,o=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(o?1:-1)+a,h=Math.asin(c/u)/lj,f=d?i:i+l*h,m=Er(n,s,u,f),v=Er(n,s,a,f),x=d?i-l*h:i,w=Er(n,s,u*Math.cos(h*lj),x);return{center:m,circleTangency:v,lineTangency:w,theta:h}},aq=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,l=t.startAngle,o=t.endAngle,c=q_e(l,o),d=l+c,u=Er(n,s,i,l),h=Er(n,s,i,d),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(l>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var m=Er(n,s,a,l),v=Er(n,s,a,d);f+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(l<=d),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(s," Z");return f},W_e=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,l=t.cornerRadius,o=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,h=ws(u-d),f=e0({cx:n,cy:s,radius:i,angle:d,sign:h,cornerRadius:l,cornerIsExternal:c}),m=f.circleTangency,v=f.lineTangency,x=f.theta,w=e0({cx:n,cy:s,radius:i,angle:u,sign:-h,cornerRadius:l,cornerIsExternal:c}),j=w.circleTangency,g=w.lineTangency,b=w.theta,p=c?Math.abs(d-u):Math.abs(d-u)-x-b;if(p<0)return o?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):aq({cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var N="M ".concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(p>180),",").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var k=e0({cx:n,cy:s,radius:a,angle:d,sign:h,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),C=k.circleTangency,_=k.lineTangency,P=k.theta,D=e0({cx:n,cy:s,radius:a,angle:u,sign:-h,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),E=D.circleTangency,$=D.lineTangency,A=D.theta,T=c?Math.abs(d-u):Math.abs(d-u)-P-A;if(T<0&&l===0)return"".concat(N,"L").concat(n,",").concat(s,"Z");N+="L".concat($.x,",").concat($.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(h<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(T>180),",").concat(+(h>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,"Z")}else N+="L".concat(n,",").concat(s,"Z");return N},H_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},iq=function(t){var n=t5(t5({},H_e),t),s=n.cx,a=n.cy,i=n.innerRadius,l=n.outerRadius,o=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,u=n.startAngle,h=n.endAngle,f=n.className;if(l<i||u===h)return null;var m=Ot("recharts-sector",f),v=l-i,x=Ns(o,v,0,!0),w;return x>0&&Math.abs(u-h)<360?w=W_e({cx:s,cy:a,innerRadius:i,outerRadius:l,cornerRadius:Math.min(x,v/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:h}):w=aq({cx:s,cy:a,innerRadius:i,outerRadius:l,startAngle:u,endAngle:h}),Z.createElement("path",YC({},ot(n,!0),{className:m,d:w,role:"img"}))};function jg(e){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jg(e)}function XC(){return XC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},XC.apply(this,arguments)}function r5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function n5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r5(Object(n),!0).forEach(function(s){K_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function K_e(e,t,n){return t=G_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G_e(e){var t=Y_e(e,"string");return jg(t)=="symbol"?t:t+""}function Y_e(e,t){if(jg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(jg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s5={curveBasisClosed:Kpe,curveBasisOpen:Gpe,curveBasis:Hpe,curveBumpX:Ope,curveBumpY:Rpe,curveLinearClosed:Ype,curveLinear:T1,curveMonotoneX:Xpe,curveMonotoneY:Zpe,curveNatural:Qpe,curveStep:Jpe,curveStepAfter:txe,curveStepBefore:exe},t0=function(t){return t.x===+t.x&&t.y===+t.y},Sp=function(t){return t.x},Cp=function(t){return t.y},X_e=function(t,n){if(gt(t))return t;var s="curve".concat(P1(t));return(s==="curveMonotone"||s==="curveBump")&&n?s5["".concat(s).concat(n==="vertical"?"Y":"X")]:s5[s]||T1},Z_e=function(t){var n=t.type,s=n===void 0?"linear":n,a=t.points,i=a===void 0?[]:a,l=t.baseLine,o=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=X_e(s,o),h=d?i.filter(function(x){return t0(x)}):i,f;if(Array.isArray(l)){var m=d?l.filter(function(x){return t0(x)}):l,v=h.map(function(x,w){return n5(n5({},x),{},{base:m[w]})});return o==="vertical"?f=Wy().y(Cp).x1(Sp).x0(function(x){return x.base.x}):f=Wy().x(Sp).y1(Cp).y0(function(x){return x.base.y}),f.defined(t0).curve(u),f(v)}return o==="vertical"&&ze(l)?f=Wy().y(Cp).x1(Sp).x0(l):ze(l)?f=Wy().x(Sp).y1(Cp).y0(l):f=ez().x(Sp).y(Cp),f.defined(t0).curve(u),f(h)},lu=function(t){var n=t.className,s=t.points,a=t.path,i=t.pathRef;if((!s||!s.length)&&!a)return null;var l=s&&s.length?Z_e(t):a;return y.createElement("path",XC({},ot(t,!1),Ob(t),{className:Ot("recharts-curve",n),d:l,ref:i}))},lq={exports:{}},Q_e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",J_e=Q_e,ePe=J_e;function oq(){}function cq(){}cq.resetWarningCache=oq;var tPe=function(){function e(s,a,i,l,o,c){if(c!==ePe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:cq,resetWarningCache:oq};return n.PropTypes=n,n};lq.exports=tPe();var rPe=lq.exports;const pr=Qt(rPe);var nPe=Object.getOwnPropertyNames,sPe=Object.getOwnPropertySymbols,aPe=Object.prototype.hasOwnProperty;function a5(e,t){return function(s,a,i){return e(s,a,i)&&t(s,a,i)}}function r0(e){return function(n,s,a){if(!n||!s||typeof n!="object"||typeof s!="object")return e(n,s,a);var i=a.cache,l=i.get(n),o=i.get(s);if(l&&o)return l===s&&o===n;i.set(n,s),i.set(s,n);var c=e(n,s,a);return i.delete(n),i.delete(s),c}}function i5(e){return nPe(e).concat(sPe(e))}var iPe=Object.hasOwn||function(e,t){return aPe.call(e,t)};function Vu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var lPe="__v",oPe="__o",cPe="_owner",l5=Object.getOwnPropertyDescriptor,o5=Object.keys;function dPe(e,t,n){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!n.equals(e[s],t[s],s,s,e,t,n))return!1;return!0}function uPe(e,t){return Vu(e.getTime(),t.getTime())}function hPe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function fPe(e,t){return e===t}function c5(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.entries(),l,o,c=0;(l=i.next())&&!l.done;){for(var d=t.entries(),u=!1,h=0;(o=d.next())&&!o.done;){if(a[h]){h++;continue}var f=l.value,m=o.value;if(n.equals(f[0],m[0],c,h,e,t,n)&&n.equals(f[1],m[1],f[0],m[0],e,t,n)){u=a[h]=!0;break}h++}if(!u)return!1;c++}return!0}var mPe=Vu;function pPe(e,t,n){var s=o5(e),a=s.length;if(o5(t).length!==a)return!1;for(;a-- >0;)if(!dq(e,t,n,s[a]))return!1;return!0}function _p(e,t,n){var s=i5(e),a=s.length;if(i5(t).length!==a)return!1;for(var i,l,o;a-- >0;)if(i=s[a],!dq(e,t,n,i)||(l=l5(e,i),o=l5(t,i),(l||o)&&(!l||!o||l.configurable!==o.configurable||l.enumerable!==o.enumerable||l.writable!==o.writable)))return!1;return!0}function xPe(e,t){return Vu(e.valueOf(),t.valueOf())}function gPe(e,t){return e.source===t.source&&e.flags===t.flags}function d5(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.values(),l,o;(l=i.next())&&!l.done;){for(var c=t.values(),d=!1,u=0;(o=c.next())&&!o.done;){if(!a[u]&&n.equals(l.value,o.value,l.value,o.value,e,t,n)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function vPe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function yPe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function dq(e,t,n,s){return(s===cPe||s===oPe||s===lPe)&&(e.$$typeof||t.$$typeof)?!0:iPe(t,s)&&n.equals(e[s],t[s],s,s,e,t,n)}var bPe="[object Arguments]",jPe="[object Boolean]",wPe="[object Date]",NPe="[object Error]",kPe="[object Map]",SPe="[object Number]",CPe="[object Object]",_Pe="[object RegExp]",PPe="[object Set]",APe="[object String]",TPe="[object URL]",EPe=Array.isArray,u5=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,h5=Object.assign,OPe=Object.prototype.toString.call.bind(Object.prototype.toString);function RPe(e){var t=e.areArraysEqual,n=e.areDatesEqual,s=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,l=e.areNumbersEqual,o=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,u=e.areSetsEqual,h=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(v,x,w){if(v===x)return!0;if(v==null||x==null)return!1;var j=typeof v;if(j!==typeof x)return!1;if(j!=="object")return j==="number"?l(v,x,w):j==="function"?a(v,x,w):!1;var g=v.constructor;if(g!==x.constructor)return!1;if(g===Object)return o(v,x,w);if(EPe(v))return t(v,x,w);if(u5!=null&&u5(v))return h(v,x,w);if(g===Date)return n(v,x,w);if(g===RegExp)return d(v,x,w);if(g===Map)return i(v,x,w);if(g===Set)return u(v,x,w);var b=OPe(v);return b===wPe?n(v,x,w):b===_Pe?d(v,x,w):b===kPe?i(v,x,w):b===PPe?u(v,x,w):b===CPe?typeof v.then!="function"&&typeof x.then!="function"&&o(v,x,w):b===TPe?f(v,x,w):b===NPe?s(v,x,w):b===bPe?o(v,x,w):b===jPe||b===SPe||b===APe?c(v,x,w):!1}}function DPe(e){var t=e.circular,n=e.createCustomConfig,s=e.strict,a={areArraysEqual:s?_p:dPe,areDatesEqual:uPe,areErrorsEqual:hPe,areFunctionsEqual:fPe,areMapsEqual:s?a5(c5,_p):c5,areNumbersEqual:mPe,areObjectsEqual:s?_p:pPe,arePrimitiveWrappersEqual:xPe,areRegExpsEqual:gPe,areSetsEqual:s?a5(d5,_p):d5,areTypedArraysEqual:s?_p:vPe,areUrlsEqual:yPe};if(n&&(a=h5({},a,n(a))),t){var i=r0(a.areArraysEqual),l=r0(a.areMapsEqual),o=r0(a.areObjectsEqual),c=r0(a.areSetsEqual);a=h5({},a,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:c})}return a}function MPe(e){return function(t,n,s,a,i,l,o){return e(t,n,o)}}function $Pe(e){var t=e.circular,n=e.comparator,s=e.createState,a=e.equals,i=e.strict;if(s)return function(c,d){var u=s(),h=u.cache,f=h===void 0?t?new WeakMap:void 0:h,m=u.meta;return n(c,d,{cache:f,equals:a,meta:m,strict:i})};if(t)return function(c,d){return n(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var l={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return n(c,d,l)}}var IPe=id();id({strict:!0});id({circular:!0});id({circular:!0,strict:!0});id({createInternalComparator:function(){return Vu}});id({strict:!0,createInternalComparator:function(){return Vu}});id({circular:!0,createInternalComparator:function(){return Vu}});id({circular:!0,createInternalComparator:function(){return Vu},strict:!0});function id(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,s=e.createInternalComparator,a=e.createState,i=e.strict,l=i===void 0?!1:i,o=DPe(e),c=RPe(o),d=s?s(c):MPe(c);return $Pe({circular:n,comparator:c,createState:a,equals:d,strict:l})}function FPe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function f5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,s=function a(i){n<0&&(n=i),i-n>t?(e(i),n=-1):FPe(a)};requestAnimationFrame(s)}function ZC(e){"@babel/helpers - typeof";return ZC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ZC(e)}function LPe(e){return VPe(e)||zPe(e)||BPe(e)||UPe()}function UPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BPe(e,t){if(e){if(typeof e=="string")return m5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m5(e,t)}}function m5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function zPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function VPe(e){if(Array.isArray(e))return e}function qPe(){var e={},t=function(){return null},n=!1,s=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,o=LPe(l),c=o[0],d=o.slice(1);if(typeof c=="number"){f5(a.bind(null,d),c);return}a(c),f5(a.bind(null,d));return}ZC(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,s(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function p5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function x5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p5(Object(n),!0).forEach(function(s){uq(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uq(e,t,n){return t=WPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WPe(e){var t=HPe(e,"string");return wg(t)==="symbol"?t:String(t)}function HPe(e,t){if(wg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(wg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KPe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(s,a){return s.filter(function(i){return a.includes(i)})})},GPe=function(t){return t},YPe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},hx=function(t,n){return Object.keys(n).reduce(function(s,a){return x5(x5({},s),{},uq({},a,t(a,n[a])))},{})},g5=function(t,n,s){return t.map(function(a){return"".concat(YPe(a)," ").concat(n,"ms ").concat(s)}).join(",")};function XPe(e,t){return JPe(e)||QPe(e,t)||hq(e,t)||ZPe()}function ZPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QPe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function JPe(e){if(Array.isArray(e))return e}function eAe(e){return nAe(e)||rAe(e)||hq(e)||tAe()}function tAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hq(e,t){if(e){if(typeof e=="string")return QC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QC(e,t)}}function rAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nAe(e){if(Array.isArray(e))return QC(e)}function QC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var cj=1e-4,fq=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},mq=function(t,n){return t.map(function(s,a){return s*Math.pow(n,a)}).reduce(function(s,a){return s+a})},v5=function(t,n){return function(s){var a=fq(t,n);return mq(a,s)}},sAe=function(t,n){return function(s){var a=fq(t,n),i=[].concat(eAe(a.map(function(l,o){return l*o}).slice(1)),[0]);return mq(i,s)}},y5=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0],i=n[1],l=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,l=1,o=1;break;case"ease":a=.25,i=.1,l=.25,o=1;break;case"ease-in":a=.42,i=0,l=1,o=1;break;case"ease-out":a=.42,i=0,l=.58,o=1;break;case"ease-in-out":a=0,i=0,l=.58,o=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),u=XPe(d,4);a=u[0],i=u[1],l=u[2],o=u[3]}}}var h=v5(a,l),f=v5(i,o),m=sAe(a,l),v=function(j){return j>1?1:j<0?0:j},x=function(j){for(var g=j>1?1:j,b=g,p=0;p<8;++p){var N=h(b)-g,k=m(b);if(Math.abs(N-g)<cj||k<cj)return f(b);b=v(b-N/k)}return f(b)};return x.isStepper=!1,x},aAe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,s=n===void 0?100:n,a=t.damping,i=a===void 0?8:a,l=t.dt,o=l===void 0?17:l,c=function(u,h,f){var m=-(u-h)*s,v=f*i,x=f+(m-v)*o/1e3,w=f*o/1e3+u;return Math.abs(w-h)<cj&&Math.abs(x)<cj?[h,0]:[w,x]};return c.isStepper=!0,c.dt=o,c},iAe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return y5(a);case"spring":return aAe();default:if(a.split("(")[0]==="cubic-bezier")return y5(a)}return typeof a=="function"?a:null};function Ng(e){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function b5(e){return cAe(e)||oAe(e)||pq(e)||lAe()}function lAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cAe(e){if(Array.isArray(e))return e_(e)}function j5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j5(Object(n),!0).forEach(function(s){JC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function JC(e,t,n){return t=dAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dAe(e){var t=uAe(e,"string");return Ng(t)==="symbol"?t:String(t)}function uAe(e,t){if(Ng(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ng(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hAe(e,t){return pAe(e)||mAe(e,t)||pq(e,t)||fAe()}function fAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pq(e,t){if(e){if(typeof e=="string")return e_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e_(e,t)}}function e_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function mAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function pAe(e){if(Array.isArray(e))return e}var dj=function(t,n,s){return t+(n-t)*s},t_=function(t){var n=t.from,s=t.to;return n!==s},xAe=function e(t,n,s){var a=hx(function(i,l){if(t_(l)){var o=t(l.from,l.to,l.velocity),c=hAe(o,2),d=c[0],u=c[1];return Hn(Hn({},l),{},{from:d,velocity:u})}return l},n);return s<1?hx(function(i,l){return t_(l)?Hn(Hn({},l),{},{velocity:dj(l.velocity,a[i].velocity,s),from:dj(l.from,a[i].from,s)}):l},n):e(t,a,s-1)};const gAe=function(e,t,n,s,a){var i=KPe(e,t),l=i.reduce(function(w,j){return Hn(Hn({},w),{},JC({},j,[e[j],t[j]]))},{}),o=i.reduce(function(w,j){return Hn(Hn({},w),{},JC({},j,{from:e[j],velocity:0,to:t[j]}))},{}),c=-1,d,u,h=function(){return null},f=function(){return hx(function(j,g){return g.from},o)},m=function(){return!Object.values(o).filter(t_).length},v=function(j){d||(d=j);var g=j-d,b=g/n.dt;o=xAe(n,o,b),a(Hn(Hn(Hn({},e),t),f())),d=j,m()||(c=requestAnimationFrame(h))},x=function(j){u||(u=j);var g=(j-u)/s,b=hx(function(N,k){return dj.apply(void 0,b5(k).concat([n(g)]))},l);if(a(Hn(Hn(Hn({},e),t),b)),g<1)c=requestAnimationFrame(h);else{var p=hx(function(N,k){return dj.apply(void 0,b5(k).concat([n(1)]))},l);a(Hn(Hn(Hn({},e),t),p))}};return h=n.isStepper?v:x,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(e)}var vAe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function yAe(e,t){if(e==null)return{};var n=bAe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function bAe(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Mk(e){return kAe(e)||NAe(e)||wAe(e)||jAe()}function jAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wAe(e,t){if(e){if(typeof e=="string")return r_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r_(e,t)}}function NAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kAe(e){if(Array.isArray(e))return r_(e)}function r_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function w5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w5(Object(n),!0).forEach(function(s){Vp(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Vp(e,t,n){return t=xq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CAe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,xq(s.key),s)}}function _Ae(e,t,n){return t&&CAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xq(e){var t=PAe(e,"string");return Qf(t)==="symbol"?t:String(t)}function PAe(e,t){if(Qf(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Qf(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n_(e,t)}function n_(e,t){return n_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},n_(e,t)}function TAe(e){var t=EAe();return function(){var s=uj(e),a;if(t){var i=uj(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return s_(this,a)}}function s_(e,t){if(t&&(Qf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a_(e)}function a_(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uj(e){return uj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uj(e)}var Li=function(e){AAe(n,e);var t=TAe(n);function n(s,a){var i;SAe(this,n),i=t.call(this,s,a);var l=i.props,o=l.isActive,c=l.attributeName,d=l.from,u=l.to,h=l.steps,f=l.children,m=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(a_(i)),i.changeStyle=i.changeStyle.bind(a_(i)),!o||m<=0)return i.state={style:{}},typeof f=="function"&&(i.state={style:u}),s_(i);if(h&&h.length)i.state={style:h[0].style};else if(d){if(typeof f=="function")return i.state={style:d},s_(i);i.state={style:c?Vp({},c,d):d}}else i.state={style:{}};return i}return _Ae(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,l=a.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,l=i.isActive,o=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,h=i.from,f=this.state.style;if(o){if(!l){var m={style:c?Vp({},c,u):u};this.state&&f&&(c&&f[c]!==u||!c&&f!==u)&&this.setState(m);return}if(!(IPe(a.to,u)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=v||d?h:a.to;if(this.state&&f){var w={style:c?Vp({},c,x):x};(c&&f[c]!==x||!c&&f!==x)&&this.setState(w)}this.runAnimation(Ja(Ja({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,l=a.from,o=a.to,c=a.duration,d=a.easing,u=a.begin,h=a.onAnimationEnd,f=a.onAnimationStart,m=gAe(l,o,iAe(d),c,this.changeStyle),v=function(){i.stopJSAnimation=m()};this.manager.start([f,u,v,c,h])}},{key:"runStepAnimation",value:function(a){var i=this,l=a.steps,o=a.begin,c=a.onAnimationStart,d=l[0],u=d.style,h=d.duration,f=h===void 0?0:h,m=function(x,w,j){if(j===0)return x;var g=w.duration,b=w.easing,p=b===void 0?"ease":b,N=w.style,k=w.properties,C=w.onAnimationEnd,_=j>0?l[j-1]:w,P=k||Object.keys(N);if(typeof p=="function"||p==="spring")return[].concat(Mk(x),[i.runJSAnimation.bind(i,{from:_.style,to:N,duration:g,easing:p}),g]);var D=g5(P,g,p),E=Ja(Ja(Ja({},_.style),N),{},{transition:D});return[].concat(Mk(x),[E,g,C]).filter(GPe)};return this.manager.start([c].concat(Mk(l.reduce(m,[u,Math.max(f,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=qPe());var i=a.begin,l=a.duration,o=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,h=a.onAnimationEnd,f=a.steps,m=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof m=="function"||d==="spring"){this.runJSAnimation(a);return}if(f.length>1){this.runStepAnimation(a);return}var x=o?Vp({},o,c):c,w=g5(Object.keys(x),l,d);v.start([u,i,Ja(Ja({},x),{},{transition:w}),l,h])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var l=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=yAe(a,vAe),d=y.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!o||d===0||l<=0)return i;var h=function(m){var v=m.props,x=v.style,w=x===void 0?{}:x,j=v.className,g=y.cloneElement(m,Ja(Ja({},c),{},{style:Ja(Ja({},w),u),className:j}));return g};return d===1?h(y.Children.only(i)):Z.createElement("div",null,y.Children.map(i,function(f){return h(f)}))}}]),n}(y.PureComponent);Li.displayName="Animate";Li.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Li.propTypes={from:pr.oneOfType([pr.object,pr.string]),to:pr.oneOfType([pr.object,pr.string]),attributeName:pr.string,duration:pr.number,begin:pr.number,easing:pr.oneOfType([pr.string,pr.func]),steps:pr.arrayOf(pr.shape({duration:pr.number.isRequired,style:pr.object.isRequired,easing:pr.oneOfType([pr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),pr.func]),properties:pr.arrayOf("string"),onAnimationEnd:pr.func})),children:pr.oneOfType([pr.node,pr.func]),isActive:pr.bool,canBegin:pr.bool,onAnimationEnd:pr.func,shouldReAnimate:pr.bool,onAnimationStart:pr.func,onAnimationReStart:pr.func};function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}function hj(){return hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hj.apply(this,arguments)}function OAe(e,t){return $Ae(e)||MAe(e,t)||DAe(e,t)||RAe()}function RAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DAe(e,t){if(e){if(typeof e=="string")return N5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N5(e,t)}}function N5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function MAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function $Ae(e){if(Array.isArray(e))return e}function k5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function S5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k5(Object(n),!0).forEach(function(s){IAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function IAe(e,t,n){return t=FAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FAe(e){var t=LAe(e,"string");return kg(t)=="symbol"?t:t+""}function LAe(e,t){if(kg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(kg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C5=function(t,n,s,a,i){var l=Math.min(Math.abs(s)/2,Math.abs(a)/2),o=a>=0?1:-1,c=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,u;if(l>0&&i instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=i[f]>l?l:i[f];u="M".concat(t,",").concat(n+o*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(t+c*h[0],",").concat(n)),u+="L ".concat(t+s-c*h[1],",").concat(n),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(n+o*h[1])),u+="L ".concat(t+s,",").concat(n+a-o*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(t+s-c*h[2],",").concat(n+a)),u+="L ".concat(t+c*h[3],",").concat(n+a),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+a-o*h[3])),u+="Z"}else if(l>0&&i===+i&&i>0){var v=Math.min(l,i);u="M ".concat(t,",").concat(n+o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+c*v,",").concat(n,`
            L `).concat(t+s-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+s,",").concat(n+o*v,`
            L `).concat(t+s,",").concat(n+a-o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+s-c*v,",").concat(n+a,`
            L `).concat(t+c*v,",").concat(n+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t,",").concat(n+a-o*v," Z")}else u="M ".concat(t,",").concat(n," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return u},UAe=function(t,n){if(!t||!n)return!1;var s=t.x,a=t.y,i=n.x,l=n.y,o=n.width,c=n.height;if(Math.abs(o)>0&&Math.abs(c)>0){var d=Math.min(i,i+o),u=Math.max(i,i+o),h=Math.min(l,l+c),f=Math.max(l,l+c);return s>=d&&s<=u&&a>=h&&a<=f}return!1},BAe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},k4=function(t){var n=S5(S5({},BAe),t),s=y.useRef(),a=y.useState(-1),i=OAe(a,2),l=i[0],o=i[1];y.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var p=s.current.getTotalLength();p&&o(p)}catch{}},[]);var c=n.x,d=n.y,u=n.width,h=n.height,f=n.radius,m=n.className,v=n.animationEasing,x=n.animationDuration,w=n.animationBegin,j=n.isAnimationActive,g=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||u===0||h===0)return null;var b=Ot("recharts-rectangle",m);return g?Z.createElement(Li,{canBegin:l>0,from:{width:u,height:h,x:c,y:d},to:{width:u,height:h,x:c,y:d},duration:x,animationEasing:v,isActive:g},function(p){var N=p.width,k=p.height,C=p.x,_=p.y;return Z.createElement(Li,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:x,isActive:j,easing:v},Z.createElement("path",hj({},ot(n,!0),{className:b,d:C5(C,_,N,k,f),ref:s})))}):Z.createElement("path",hj({},ot(n,!0),{className:b,d:C5(c,d,u,h,f)}))},zAe=["points","className","baseLinePoints","connectNulls"];function Nh(){return Nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Nh.apply(this,arguments)}function VAe(e,t){if(e==null)return{};var n=qAe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function qAe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function _5(e){return GAe(e)||KAe(e)||HAe(e)||WAe()}function WAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HAe(e,t){if(e){if(typeof e=="string")return i_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i_(e,t)}}function KAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function GAe(e){if(Array.isArray(e))return i_(e)}function i_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var P5=function(t){return t&&t.x===+t.x&&t.y===+t.y},YAe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(s){P5(s)?n[n.length-1].push(s):n[n.length-1].length>0&&n.push([])}),P5(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},fx=function(t,n){var s=YAe(t);n&&(s=[s.reduce(function(i,l){return[].concat(_5(i),_5(l))},[])]);var a=s.map(function(i){return i.reduce(function(l,o,c){return"".concat(l).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return s.length===1?"".concat(a,"Z"):a},XAe=function(t,n,s){var a=fx(t,s);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(fx(n.reverse(),s).slice(1))},ZAe=function(t){var n=t.points,s=t.className,a=t.baseLinePoints,i=t.connectNulls,l=VAe(t,zAe);if(!n||!n.length)return null;var o=Ot("recharts-polygon",s);if(a&&a.length){var c=l.stroke&&l.stroke!=="none",d=XAe(n,a,i);return Z.createElement("g",{className:o},Z.createElement("path",Nh({},ot(l,!0),{fill:d.slice(-1)==="Z"?l.fill:"none",stroke:"none",d})),c?Z.createElement("path",Nh({},ot(l,!0),{fill:"none",d:fx(n,i)})):null,c?Z.createElement("path",Nh({},ot(l,!0),{fill:"none",d:fx(a,i)})):null)}var u=fx(n,i);return Z.createElement("path",Nh({},ot(l,!0),{fill:u.slice(-1)==="Z"?l.fill:"none",className:o,d:u}))};function l_(){return l_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l_.apply(this,arguments)}var ty=function(t){var n=t.cx,s=t.cy,a=t.r,i=t.className,l=Ot("recharts-dot",i);return n===+n&&s===+s&&a===+a?y.createElement("circle",l_({},ot(t,!1),Ob(t),{className:l,cx:n,cy:s,r:a})):null};function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}var QAe=["x","y","top","left","width","height","className"];function o_(){return o_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o_.apply(this,arguments)}function A5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function JAe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A5(Object(n),!0).forEach(function(s){eTe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function eTe(e,t,n){return t=tTe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tTe(e){var t=rTe(e,"string");return Sg(t)=="symbol"?t:t+""}function rTe(e,t){if(Sg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Sg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nTe(e,t){if(e==null)return{};var n=sTe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function sTe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var aTe=function(t,n,s,a,i,l){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(l,",").concat(n,"h").concat(s)},iTe=function(t){var n=t.x,s=n===void 0?0:n,a=t.y,i=a===void 0?0:a,l=t.top,o=l===void 0?0:l,c=t.left,d=c===void 0?0:c,u=t.width,h=u===void 0?0:u,f=t.height,m=f===void 0?0:f,v=t.className,x=nTe(t,QAe),w=JAe({x:s,y:i,top:o,left:d,width:h,height:m},x);return!ze(s)||!ze(i)||!ze(h)||!ze(m)||!ze(o)||!ze(d)?null:Z.createElement("path",o_({},ot(w,!0),{className:Ot("recharts-cross",v),d:aTe(s,i,h,m,o,d)}))},lTe=B1,oTe=PV,cTe=Fl;function dTe(e,t){return e&&e.length?lTe(e,cTe(t),oTe):void 0}var uTe=dTe;const hTe=Qt(uTe);var fTe=B1,mTe=Fl,pTe=AV;function xTe(e,t){return e&&e.length?fTe(e,mTe(t),pTe):void 0}var gTe=xTe;const vTe=Qt(gTe);var yTe=["cx","cy","angle","ticks","axisLine"],bTe=["ticks","tick","angle","tickFormatter","stroke"];function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}function mx(){return mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},mx.apply(this,arguments)}function T5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ud(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T5(Object(n),!0).forEach(function(s){W1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function E5(e,t){if(e==null)return{};var n=jTe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function jTe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function wTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,vq(s.key),s)}}function NTe(e,t,n){return t&&O5(e.prototype,t),n&&O5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kTe(e,t,n){return t=fj(t),STe(e,gq()?Reflect.construct(t,n||[],fj(e).constructor):t.apply(e,n))}function STe(e,t){if(t&&(Jf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CTe(e)}function CTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gq=function(){return!!e})()}function fj(e){return fj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fj(e)}function _Te(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c_(e,t)}function c_(e,t){return c_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},c_(e,t)}function W1(e,t,n){return t=vq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vq(e){var t=PTe(e,"string");return Jf(t)=="symbol"?t:t+""}function PTe(e,t){if(Jf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Jf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H1=function(e){function t(){return wTe(this,t),kTe(this,t,arguments)}return _Te(t,e),NTe(t,[{key:"getTickValueCoord",value:function(s){var a=s.coordinate,i=this.props,l=i.angle,o=i.cx,c=i.cy;return Er(o,c,a,l)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,a;switch(s){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var s=this.props,a=s.cx,i=s.cy,l=s.angle,o=s.ticks,c=hTe(o,function(u){return u.coordinate||0}),d=vTe(o,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:l,endAngle:l,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,l=s.angle,o=s.ticks,c=s.axisLine,d=E5(s,yTe),u=o.reduce(function(v,x){return[Math.min(v[0],x.coordinate),Math.max(v[1],x.coordinate)]},[1/0,-1/0]),h=Er(a,i,u[0],l),f=Er(a,i,u[1],l),m=ud(ud(ud({},ot(d,!1)),{},{fill:"none"},ot(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return Z.createElement("line",mx({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,l=a.tick,o=a.angle,c=a.tickFormatter,d=a.stroke,u=E5(a,bTe),h=this.getTickTextAnchor(),f=ot(u,!1),m=ot(l,!1),v=i.map(function(x,w){var j=s.getTickValueCoord(x),g=ud(ud(ud(ud({textAnchor:h,transform:"rotate(".concat(90-o,", ").concat(j.x,", ").concat(j.y,")")},f),{},{stroke:"none",fill:d},m),{},{index:w},j),{},{payload:x});return Z.createElement(Gt,mx({className:Ot("recharts-polar-radius-axis-tick",nq(l)),key:"tick-".concat(x.coordinate)},ju(s.props,x,w)),t.renderTickItem(l,g,c?c(x.value,w):x.value))});return Z.createElement(Gt,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.axisLine,l=s.tick;return!a||!a.length?null:Z.createElement(Gt,{className:Ot("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),$n.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,a,i){var l;return Z.isValidElement(s)?l=Z.cloneElement(s,a):gt(s)?l=s(a):l=Z.createElement(wu,mx({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])}(y.PureComponent);W1(H1,"displayName","PolarRadiusAxis");W1(H1,"axisType","radiusAxis");W1(H1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function em(e){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(e)}function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Nd.apply(this,arguments)}function R5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function hd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R5(Object(n),!0).forEach(function(s){K1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ATe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,bq(s.key),s)}}function TTe(e,t,n){return t&&D5(e.prototype,t),n&&D5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ETe(e,t,n){return t=mj(t),OTe(e,yq()?Reflect.construct(t,n||[],mj(e).constructor):t.apply(e,n))}function OTe(e,t){if(t&&(em(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RTe(e)}function RTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yq=function(){return!!e})()}function mj(e){return mj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mj(e)}function DTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d_(e,t)}function d_(e,t){return d_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},d_(e,t)}function K1(e,t,n){return t=bq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bq(e){var t=MTe(e,"string");return em(t)=="symbol"?t:t+""}function MTe(e,t){if(em(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(em(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Te=Math.PI/180,M5=1e-5,G1=function(e){function t(){return ATe(this,t),ETe(this,t,arguments)}return DTe(t,e),TTe(t,[{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.cx,l=a.cy,o=a.radius,c=a.orientation,d=a.tickSize,u=d||8,h=Er(i,l,o,s.coordinate),f=Er(i,l,o+(c==="inner"?-1:1)*u,s.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(s){var a=this.props.orientation,i=Math.cos(-s.coordinate*$Te),l;return i>M5?l=a==="outer"?"start":"end":i<-M5?l=a==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,l=s.radius,o=s.axisLine,c=s.axisLineType,d=hd(hd({},ot(this.props,!1)),{},{fill:"none"},ot(o,!1));if(c==="circle")return Z.createElement(ty,Nd({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:l}));var u=this.props.ticks,h=u.map(function(f){return Er(a,i,l,f.coordinate)});return Z.createElement(ZAe,Nd({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,l=a.tick,o=a.tickLine,c=a.tickFormatter,d=a.stroke,u=ot(this.props,!1),h=ot(l,!1),f=hd(hd({},u),{},{fill:"none"},ot(o,!1)),m=i.map(function(v,x){var w=s.getTickLineCoord(v),j=s.getTickTextAnchor(v),g=hd(hd(hd({textAnchor:j},u),{},{stroke:"none",fill:d},h),{},{index:x,payload:v,x:w.x2,y:w.y2});return Z.createElement(Gt,Nd({className:Ot("recharts-polar-angle-axis-tick",nq(l)),key:"tick-".concat(v.coordinate)},ju(s.props,v,x)),o&&Z.createElement("line",Nd({className:"recharts-polar-angle-axis-tick-line"},f,w)),l&&t.renderTickItem(l,g,c?c(v.value,x):v.value))});return Z.createElement(Gt,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.radius,l=s.axisLine;return i<=0||!a||!a.length?null:Z.createElement(Gt,{className:Ot("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,a,i){var l;return Z.isValidElement(s)?l=Z.cloneElement(s,a):gt(s)?l=s(a):l=Z.createElement(wu,Nd({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])}(y.PureComponent);K1(G1,"displayName","PolarAngleAxis");K1(G1,"axisType","angleAxis");K1(G1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var ITe=kz,FTe=ITe(Object.getPrototypeOf,Object),LTe=FTe,UTe=Do,BTe=LTe,zTe=Mo,VTe="[object Object]",qTe=Function.prototype,WTe=Object.prototype,jq=qTe.toString,HTe=WTe.hasOwnProperty,KTe=jq.call(Object);function GTe(e){if(!zTe(e)||UTe(e)!=VTe)return!1;var t=BTe(e);if(t===null)return!0;var n=HTe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&jq.call(n)==KTe}var YTe=GTe;const XTe=Qt(YTe);var ZTe=Do,QTe=Mo,JTe="[object Boolean]";function e4e(e){return e===!0||e===!1||QTe(e)&&ZTe(e)==JTe}var t4e=e4e;const r4e=Qt(t4e);function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function pj(){return pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pj.apply(this,arguments)}function n4e(e,t){return l4e(e)||i4e(e,t)||a4e(e,t)||s4e()}function s4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a4e(e,t){if(e){if(typeof e=="string")return $5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $5(e,t)}}function $5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function i4e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function l4e(e){if(Array.isArray(e))return e}function I5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function F5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I5(Object(n),!0).forEach(function(s){o4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function o4e(e,t,n){return t=c4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c4e(e){var t=d4e(e,"string");return Cg(t)=="symbol"?t:t+""}function d4e(e,t){if(Cg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Cg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L5=function(t,n,s,a,i){var l=s-a,o;return o="M ".concat(t,",").concat(n),o+="L ".concat(t+s,",").concat(n),o+="L ".concat(t+s-l/2,",").concat(n+i),o+="L ".concat(t+s-l/2-a,",").concat(n+i),o+="L ".concat(t,",").concat(n," Z"),o},u4e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},h4e=function(t){var n=F5(F5({},u4e),t),s=y.useRef(),a=y.useState(-1),i=n4e(a,2),l=i[0],o=i[1];y.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var b=s.current.getTotalLength();b&&o(b)}catch{}},[]);var c=n.x,d=n.y,u=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,v=n.animationEasing,x=n.animationDuration,w=n.animationBegin,j=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||f!==+f||u===0&&h===0||f===0)return null;var g=Ot("recharts-trapezoid",m);return j?Z.createElement(Li,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:d},to:{upperWidth:u,lowerWidth:h,height:f,x:c,y:d},duration:x,animationEasing:v,isActive:j},function(b){var p=b.upperWidth,N=b.lowerWidth,k=b.height,C=b.x,_=b.y;return Z.createElement(Li,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:x,easing:v},Z.createElement("path",pj({},ot(n,!0),{className:g,d:L5(C,_,p,N,k),ref:s})))}):Z.createElement("g",null,Z.createElement("path",pj({},ot(n,!0),{className:g,d:L5(c,d,u,h,f)})))},f4e=["option","shapeType","propTransformer","activeClassName","isActive"];function _g(e){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_g(e)}function m4e(e,t){if(e==null)return{};var n=p4e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function p4e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function U5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function xj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U5(Object(n),!0).forEach(function(s){x4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function x4e(e,t,n){return t=g4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g4e(e){var t=v4e(e,"string");return _g(t)=="symbol"?t:t+""}function v4e(e,t){if(_g(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(_g(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y4e(e,t){return xj(xj({},t),e)}function b4e(e,t){return e==="symbols"}function B5(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Z.createElement(k4,n);case"trapezoid":return Z.createElement(h4e,n);case"sector":return Z.createElement(iq,n);case"symbols":if(b4e(t))return Z.createElement(zT,n);break;default:return null}}function j4e(e){return y.isValidElement(e)?e.props:e}function wq(e){var t=e.option,n=e.shapeType,s=e.propTransformer,a=s===void 0?y4e:s,i=e.activeClassName,l=i===void 0?"recharts-active-shape":i,o=e.isActive,c=m4e(e,f4e),d;if(y.isValidElement(t))d=y.cloneElement(t,xj(xj({},c),j4e(t)));else if(gt(t))d=t(c);else if(XTe(t)&&!r4e(t)){var u=a(t,c);d=Z.createElement(B5,{shapeType:n,elementProps:u})}else{var h=c;d=Z.createElement(B5,{shapeType:n,elementProps:h})}return o?Z.createElement(Gt,{className:l},d):d}function Y1(e,t){return t!=null&&"trapezoids"in e.props}function X1(e,t){return t!=null&&"sectors"in e.props}function Pg(e,t){return t!=null&&"points"in e.props}function w4e(e,t){var n,s,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return a&&i}function N4e(e,t){var n=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return n&&s}function k4e(e,t){var n=e.x===t.x,s=e.y===t.y,a=e.z===t.z;return n&&s&&a}function S4e(e,t){var n;return Y1(e,t)?n=w4e:X1(e,t)?n=N4e:Pg(e,t)&&(n=k4e),n}function C4e(e,t){var n;return Y1(e,t)?n="trapezoids":X1(e,t)?n="sectors":Pg(e,t)&&(n="points"),n}function _4e(e,t){if(Y1(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(X1(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Pg(e,t)?t.payload:{}}function P4e(e){var t=e.activeTooltipItem,n=e.graphicalItem,s=e.itemData,a=C4e(n,t),i=_4e(n,t),l=s.filter(function(c,d){var u=Nu(i,c),h=n.props[a].filter(function(v){var x=S4e(n,t);return x(v,t)}),f=n.props[a].indexOf(h[h.length-1]),m=d===f;return u&&m}),o=s.indexOf(l[l.length-1]);return o}var F0;function tm(e){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tm(e)}function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kh.apply(this,arguments)}function z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Pr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z5(Object(n),!0).forEach(function(s){$a(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function A4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,kq(s.key),s)}}function T4e(e,t,n){return t&&V5(e.prototype,t),n&&V5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function E4e(e,t,n){return t=gj(t),O4e(e,Nq()?Reflect.construct(t,n||[],gj(e).constructor):t.apply(e,n))}function O4e(e,t){if(t&&(tm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R4e(e)}function R4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nq=function(){return!!e})()}function gj(e){return gj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gj(e)}function D4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u_(e,t)}function u_(e,t){return u_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},u_(e,t)}function $a(e,t,n){return t=kq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kq(e){var t=M4e(e,"string");return tm(t)=="symbol"?t:t+""}function M4e(e,t){if(tm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(tm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hi=function(e){function t(n){var s;return A4e(this,t),s=E4e(this,t,[n]),$a(s,"pieRef",null),$a(s,"sectorRefs",[]),$a(s,"id",Uu("recharts-pie-")),$a(s,"handleAnimationEnd",function(){var a=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),gt(a)&&a()}),$a(s,"handleAnimationStart",function(){var a=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),gt(a)&&a()}),s.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},s}return D4e(t,e),T4e(t,[{key:"isActiveIndex",value:function(s){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(s)!==-1:s===a}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,o=i.labelLine,c=i.dataKey,d=i.valueKey,u=ot(this.props,!1),h=ot(l,!1),f=ot(o,!1),m=l&&l.offsetRadius||20,v=s.map(function(x,w){var j=(x.startAngle+x.endAngle)/2,g=Er(x.cx,x.cy,x.outerRadius+m,j),b=Pr(Pr(Pr(Pr({},u),x),{},{stroke:"none"},h),{},{index:w,textAnchor:t.getTextAnchor(g.x,x.cx)},g),p=Pr(Pr(Pr(Pr({},u),x),{},{fill:"none",stroke:x.fill},f),{},{index:w,points:[Er(x.cx,x.cy,x.outerRadius,j),g]}),N=c;return Tt(c)&&Tt(d)?N="value":Tt(c)&&(N=d),Z.createElement(Gt,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(w)},o&&t.renderLabelLineItem(o,p,"line"),t.renderLabelItem(l,b,an(x,N)))});return Z.createElement(Gt,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(s){var a=this,i=this.props,l=i.activeShape,o=i.blendStroke,c=i.inactiveShape;return s.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&s.length!==1)return null;var h=a.isActiveIndex(u),f=c&&a.hasActiveIndex()?c:null,m=h?l:f,v=Pr(Pr({},d),{},{stroke:o?d.fill:d.stroke,tabIndex:-1});return Z.createElement(Gt,kh({ref:function(w){w&&!a.sectorRefs.includes(w)&&a.sectorRefs.push(w)},tabIndex:-1,className:"recharts-pie-sector"},ju(a.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),Z.createElement(wq,kh({option:m,isActive:h,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,a=this.props,i=a.sectors,l=a.isAnimationActive,o=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return Z.createElement(Li,{begin:o,duration:c,isActive:l,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var x=v.t,w=[],j=i&&i[0],g=j.startAngle;return i.forEach(function(b,p){var N=f&&f[p],k=p>0?va(b,"paddingAngle",0):0;if(N){var C=Cn(N.endAngle-N.startAngle,b.endAngle-b.startAngle),_=Pr(Pr({},b),{},{startAngle:g+k,endAngle:g+C(x)+k});w.push(_),g=_.endAngle}else{var P=b.endAngle,D=b.startAngle,E=Cn(0,P-D),$=E(x),A=Pr(Pr({},b),{},{startAngle:g+k,endAngle:g+$+k});w.push(A),g=A.endAngle}}),Z.createElement(Gt,null,s.renderSectorsStatically(w))})}},{key:"attachKeyboardHandlers",value:function(s){var a=this;s.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"ArrowRight":{var o=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,a=s.sectors,i=s.isAnimationActive,l=this.state.prevSectors;return i&&a&&a.length&&(!l||!Nu(l,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,a=this.props,i=a.hide,l=a.sectors,o=a.className,c=a.label,d=a.cx,u=a.cy,h=a.innerRadius,f=a.outerRadius,m=a.isAnimationActive,v=this.state.isAnimationFinished;if(i||!l||!l.length||!ze(d)||!ze(u)||!ze(h)||!ze(f))return null;var x=Ot("recharts-pie",o);return Z.createElement(Gt,{tabIndex:this.props.rootTabIndex,className:x,ref:function(j){s.pieRef=j}},this.renderSectors(),c&&this.renderLabels(l),$n.renderCallByParent(this.props,null,!1),(!m||v)&&Cl.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return a.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:s.sectors!==a.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,a){return s>a?"start":s<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,a,i){if(Z.isValidElement(s))return Z.cloneElement(s,a);if(gt(s))return s(a);var l=Ot("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return Z.createElement(lu,kh({},a,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(s,a,i){if(Z.isValidElement(s))return Z.cloneElement(s,a);var l=i;if(gt(s)&&(l=s(a),Z.isValidElement(l)))return l;var o=Ot("recharts-pie-label-text",typeof s!="boolean"&&!gt(s)?s.className:"");return Z.createElement(wu,kh({},a,{alignmentBaseline:"middle",className:o}),l)}}])}(y.PureComponent);F0=Hi;$a(Hi,"displayName","Pie");$a(Hi,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!_i.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});$a(Hi,"parseDeltaAngle",function(e,t){var n=ws(t-e),s=Math.min(Math.abs(t-e),360);return n*s});$a(Hi,"getRealPieData",function(e){var t=e.data,n=e.children,s=ot(e,!1),a=ya(n,Hm);return t&&t.length?t.map(function(i,l){return Pr(Pr(Pr({payload:i},s),i),a&&a[l]&&a[l].props)}):a&&a.length?a.map(function(i){return Pr(Pr({},s),i.props)}):[]});$a(Hi,"parseCoordinateOfPie",function(e,t){var n=t.top,s=t.left,a=t.width,i=t.height,l=rq(a,i),o=s+Ns(e.cx,a,a/2),c=n+Ns(e.cy,i,i/2),d=Ns(e.innerRadius,l,0),u=Ns(e.outerRadius,l,l*.8),h=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:d,outerRadius:u,maxRadius:h}});$a(Hi,"getComposedData",function(e){var t=e.item,n=e.offset,s=t.type.defaultProps!==void 0?Pr(Pr({},t.type.defaultProps),t.props):t.props,a=F0.getRealPieData(s);if(!a||!a.length)return null;var i=s.cornerRadius,l=s.startAngle,o=s.endAngle,c=s.paddingAngle,d=s.dataKey,u=s.nameKey,h=s.valueKey,f=s.tooltipType,m=Math.abs(s.minAngle),v=F0.parseCoordinateOfPie(s,n),x=F0.parseDeltaAngle(l,o),w=Math.abs(x),j=d;Tt(d)&&Tt(h)?(Ci(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):Tt(d)&&(Ci(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=h);var g=a.filter(function(_){return an(_,j,0)!==0}).length,b=(w>=360?g:g-1)*c,p=w-g*m-b,N=a.reduce(function(_,P){var D=an(P,j,0);return _+(ze(D)?D:0)},0),k;if(N>0){var C;k=a.map(function(_,P){var D=an(_,j,0),E=an(_,u,P),$=(ze(D)?D:0)/N,A;P?A=C.endAngle+ws(x)*c*(D!==0?1:0):A=l;var T=A+ws(x)*((D!==0?m:0)+$*p),O=(A+T)/2,z=(v.innerRadius+v.outerRadius)/2,F=[{name:E,value:D,payload:_,dataKey:j,type:f}],R=Er(v.cx,v.cy,z,O);return C=Pr(Pr(Pr({percent:$,cornerRadius:i,name:E,tooltipPayload:F,midAngle:O,middleRadius:z,tooltipPosition:R},_),v),{},{value:an(_,j),startAngle:A,endAngle:T,payload:_,paddingAngle:ws(x)*c}),C})}return Pr(Pr({},v),{},{sectors:k,data:a})});var $4e=Math.ceil,I4e=Math.max;function F4e(e,t,n,s){for(var a=-1,i=I4e($4e((t-e)/(n||1)),0),l=Array(i);i--;)l[s?i:++a]=e,e+=n;return l}var L4e=F4e,U4e=Vz,q5=1/0,B4e=17976931348623157e292;function z4e(e){if(!e)return e===0?e:0;if(e=U4e(e),e===q5||e===-q5){var t=e<0?-1:1;return t*B4e}return e===e?e:0}var Sq=z4e,V4e=L4e,q4e=D1,$k=Sq;function W4e(e){return function(t,n,s){return s&&typeof s!="number"&&q4e(t,n,s)&&(n=s=void 0),t=$k(t),n===void 0?(n=t,t=0):n=$k(n),s=s===void 0?t<n?1:-1:$k(s),V4e(t,n,s,e)}}var H4e=W4e,K4e=H4e,G4e=K4e(),Y4e=G4e;const vj=Qt(Y4e);function Ag(e){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(e)}function W5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function H5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W5(Object(n),!0).forEach(function(s){Cq(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Cq(e,t,n){return t=X4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X4e(e){var t=Z4e(e,"string");return Ag(t)=="symbol"?t:t+""}function Z4e(e,t){if(Ag(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ag(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q4e=["Webkit","Moz","O","ms"],J4e=function(t,n){var s=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Q4e.reduce(function(i,l){return H5(H5({},i),{},Cq({},l+s,n))},{});return a[t]=n,a};function rm(e){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rm(e)}function yj(){return yj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yj.apply(this,arguments)}function K5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ik(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K5(Object(n),!0).forEach(function(s){aa(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function eEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Pq(s.key),s)}}function tEe(e,t,n){return t&&G5(e.prototype,t),n&&G5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rEe(e,t,n){return t=bj(t),nEe(e,_q()?Reflect.construct(t,n||[],bj(e).constructor):t.apply(e,n))}function nEe(e,t){if(t&&(rm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sEe(e)}function sEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_q=function(){return!!e})()}function bj(e){return bj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bj(e)}function aEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h_(e,t)}function h_(e,t){return h_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},h_(e,t)}function aa(e,t,n){return t=Pq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pq(e){var t=iEe(e,"string");return rm(t)=="symbol"?t:t+""}function iEe(e,t){if(rm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(rm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lEe=function(t){var n=t.data,s=t.startIndex,a=t.endIndex,i=t.x,l=t.width,o=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=dx().domain(vj(0,c)).range([i,i+l-o]),u=d.domain().map(function(h){return d(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(a),scale:d,scaleValues:u}},Y5=function(t){return t.changedTouches&&!!t.changedTouches.length},nm=function(e){function t(n){var s;return eEe(this,t),s=rEe(this,t,[n]),aa(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),aa(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),aa(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,i=a.endIndex,l=a.onDragEnd,o=a.startIndex;l==null||l({endIndex:i,startIndex:o})}),s.detachDragEndListener()}),aa(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),aa(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),aa(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),aa(s,"handleSlideDragStart",function(a){var i=Y5(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return aEe(t,e),tEe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,i=s.endX,l=this.state.scaleValues,o=this.props,c=o.gap,d=o.data,u=d.length-1,h=Math.min(a,i),f=Math.max(a,i),m=t.getIndexInRange(l,h),v=t.getIndexInRange(l,f);return{startIndex:m-m%c,endIndex:v===u?u:v-v%c}}},{key:"getTextOfTick",value:function(s){var a=this.props,i=a.data,l=a.tickFormatter,o=a.dataKey,c=an(i[s],o,s);return gt(l)?l(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,i=a.slideMoveStartX,l=a.startX,o=a.endX,c=this.props,d=c.x,u=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,v=c.onChange,x=s.pageX-i;x>0?x=Math.min(x,d+u-h-o,d+u-h-l):x<0&&(x=Math.max(x,d-l,d-o));var w=this.getIndex({startX:l+x,endX:o+x});(w.startIndex!==f||w.endIndex!==m)&&v&&v(w),this.setState({startX:l+x,endX:o+x,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var i=Y5(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,i=a.brushMoveStartX,l=a.movingTravellerId,o=a.endX,c=a.startX,d=this.state[l],u=this.props,h=u.x,f=u.width,m=u.travellerWidth,v=u.onChange,x=u.gap,w=u.data,j={startX:this.state.startX,endX:this.state.endX},g=s.pageX-i;g>0?g=Math.min(g,h+f-m-d):g<0&&(g=Math.max(g,h-d)),j[l]=d+g;var b=this.getIndex(j),p=b.startIndex,N=b.endIndex,k=function(){var _=w.length-1;return l==="startX"&&(o>c?p%x===0:N%x===0)||o<c&&N===_||l==="endX"&&(o>c?N%x===0:p%x===0)||o>c&&N===_};this.setState(aa(aa({},l,d+g),"brushMoveStartX",s.pageX),function(){v&&k()&&v(b)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var i=this,l=this.state,o=l.scaleValues,c=l.startX,d=l.endX,u=this.state[a],h=o.indexOf(u);if(h!==-1){var f=h+s;if(!(f===-1||f>=o.length)){var m=o[f];a==="startX"&&m>=d||a==="endX"&&m<=c||this.setState(aa({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,i=s.y,l=s.width,o=s.height,c=s.fill,d=s.stroke;return Z.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:l,height:o})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,i=s.y,l=s.width,o=s.height,c=s.data,d=s.children,u=s.padding,h=y.Children.only(d);return h?Z.cloneElement(h,{x:a,y:i,width:l,height:o,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,a){var i,l,o=this,c=this.props,d=c.y,u=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,v=c.data,x=c.startIndex,w=c.endIndex,j=Math.max(s,this.props.x),g=Ik(Ik({},ot(this.props,!1)),{},{x:j,y:d,width:u,height:h}),b=m||"Min value: ".concat((i=v[x])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=v[w])===null||l===void 0?void 0:l.name);return Z.createElement(Gt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),o.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,a))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,g))}},{key:"renderSlide",value:function(s,a){var i=this.props,l=i.y,o=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(s,a)+d,h=Math.max(Math.abs(a-s)-d,0);return Z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:l,width:h,height:o})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,i=s.endIndex,l=s.y,o=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,h=u.startX,f=u.endX,m=5,v={pointerEvents:"none",fill:d};return Z.createElement(Gt,{className:"recharts-brush-texts"},Z.createElement(wu,yj({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:l+o/2},v),this.getTextOfTick(a)),Z.createElement(wu,yj({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:l+o/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var s=this.props,a=s.data,i=s.className,l=s.children,o=s.x,c=s.y,d=s.width,u=s.height,h=s.alwaysShowText,f=this.state,m=f.startX,v=f.endX,x=f.isTextActive,w=f.isSlideMoving,j=f.isTravellerMoving,g=f.isTravellerFocused;if(!a||!a.length||!ze(o)||!ze(c)||!ze(d)||!ze(u)||d<=0||u<=0)return null;var b=Ot("recharts-brush",i),p=Z.Children.count(l)===1,N=J4e("userSelect","none");return Z.createElement(Gt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),p&&this.renderPanorama(),this.renderSlide(m,v),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(v,"endX"),(x||w||j||g||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,i=s.y,l=s.width,o=s.height,c=s.stroke,d=Math.floor(i+o/2)-1;return Z.createElement(Z.Fragment,null,Z.createElement("rect",{x:a,y:i,width:l,height:o,fill:c,stroke:"none"}),Z.createElement("line",{x1:a+1,y1:d,x2:a+l-1,y2:d,fill:"none",stroke:"#fff"}),Z.createElement("line",{x1:a+1,y1:d+2,x2:a+l-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var i;return Z.isValidElement(s)?i=Z.cloneElement(s,a):gt(s)?i=s(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(s,a){var i=s.data,l=s.width,o=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,h=s.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return Ik({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l},i&&i.length?lEe({data:i,width:l,x:o,travellerWidth:c,startIndex:u,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(l!==a.prevWidth||o!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([o,o+l-c]);var f=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(s,a){for(var i=s.length,l=0,o=i-1;o-l>1;){var c=Math.floor((l+o)/2);s[c]>a?o=c:l=c}return a>=s[o]?o:l}}])}(y.PureComponent);aa(nm,"displayName","Brush");aa(nm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var oEe=YT;function cEe(e,t){var n;return oEe(e,function(s,a,i){return n=t(s,a,i),!n}),!!n}var dEe=cEe,uEe=xz,hEe=Fl,fEe=dEe,mEe=Zs,pEe=D1;function xEe(e,t,n){var s=mEe(e)?uEe:fEe;return n&&pEe(e,t,n)&&(t=void 0),s(e,hEe(t))}var gEe=xEe;const vEe=Qt(gEe);var _l=function(t,n){var s=t.alwaysShow,a=t.ifOverflow;return s&&(a="extendDomain"),a===n},X5=Fz;function yEe(e,t,n){t=="__proto__"&&X5?X5(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var bEe=yEe,jEe=bEe,wEe=$z,NEe=Fl;function kEe(e,t){var n={};return t=NEe(t),wEe(e,function(s,a,i){jEe(n,a,t(s,a,i))}),n}var SEe=kEe;const CEe=Qt(SEe);function _Ee(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(!t(e[n],n,e))return!1;return!0}var PEe=_Ee,AEe=YT;function TEe(e,t){var n=!0;return AEe(e,function(s,a,i){return n=!!t(s,a,i),n}),n}var EEe=TEe,OEe=PEe,REe=EEe,DEe=Fl,MEe=Zs,$Ee=D1;function IEe(e,t,n){var s=MEe(e)?OEe:REe;return n&&$Ee(e,t,n)&&(t=void 0),s(e,DEe(t))}var FEe=IEe;const Aq=Qt(FEe);var LEe=["x","y"];function Tg(e){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tg(e)}function f_(){return f_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},f_.apply(this,arguments)}function Z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Pp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z5(Object(n),!0).forEach(function(s){UEe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function UEe(e,t,n){return t=BEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BEe(e){var t=zEe(e,"string");return Tg(t)=="symbol"?t:t+""}function zEe(e,t){if(Tg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Tg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VEe(e,t){if(e==null)return{};var n=qEe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function qEe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function WEe(e,t){var n=e.x,s=e.y,a=VEe(e,LEe),i="".concat(n),l=parseInt(i,10),o="".concat(s),c=parseInt(o,10),d="".concat(t.height||a.height),u=parseInt(d,10),h="".concat(t.width||a.width),f=parseInt(h,10);return Pp(Pp(Pp(Pp(Pp({},t),a),l?{x:l}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function Q5(e){return Z.createElement(wq,f_({shapeType:"rectangle",propTransformer:WEe,activeClassName:"recharts-active-bar"},e))}var HEe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof t=="number")return t;var i=ze(s)||vme(s);return i?t(s,a):(i||Su(),n)}},KEe=["value","background"],Tq;function sm(e){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sm(e)}function GEe(e,t){if(e==null)return{};var n=YEe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function YEe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function jj(){return jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jj.apply(this,arguments)}function J5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J5(Object(n),!0).forEach(function(s){wc(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function XEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eI(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Oq(s.key),s)}}function ZEe(e,t,n){return t&&eI(e.prototype,t),n&&eI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function QEe(e,t,n){return t=wj(t),JEe(e,Eq()?Reflect.construct(t,n||[],wj(e).constructor):t.apply(e,n))}function JEe(e,t){if(t&&(sm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eOe(e)}function eOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Eq=function(){return!!e})()}function wj(e){return wj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wj(e)}function tOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m_(e,t)}function m_(e,t){return m_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},m_(e,t)}function wc(e,t,n){return t=Oq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oq(e){var t=rOe(e,"string");return sm(t)=="symbol"?t:t+""}function rOe(e,t){if(sm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(sm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var To=function(e){function t(){var n;XEe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=QEe(this,t,[].concat(a)),wc(n,"state",{isAnimationFinished:!1}),wc(n,"id",Uu("recharts-bar-")),wc(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),l&&l()}),wc(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),l&&l()}),n}return tOe(t,e),ZEe(t,[{key:"renderRectanglesStatically",value:function(s){var a=this,i=this.props,l=i.shape,o=i.dataKey,c=i.activeIndex,d=i.activeBar,u=ot(this.props,!1);return s&&s.map(function(h,f){var m=f===c,v=m?d:l,x=dn(dn(dn({},u),h),{},{isActive:m,option:v,index:f,dataKey:o,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Z.createElement(Gt,jj({className:"recharts-bar-rectangle"},ju(a.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),Z.createElement(Q5,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,i=a.data,l=a.layout,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,h=a.animationId,f=this.state.prevData;return Z.createElement(Li,{begin:c,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var v=m.t,x=i.map(function(w,j){var g=f&&f[j];if(g){var b=Cn(g.x,w.x),p=Cn(g.y,w.y),N=Cn(g.width,w.width),k=Cn(g.height,w.height);return dn(dn({},w),{},{x:b(v),y:p(v),width:N(v),height:k(v)})}if(l==="horizontal"){var C=Cn(0,w.height),_=C(v);return dn(dn({},w),{},{y:w.y+w.height-_,height:_})}var P=Cn(0,w.width),D=P(v);return dn(dn({},w),{},{width:D})});return Z.createElement(Gt,null,s.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,i=s.isAnimationActive,l=this.state.prevData;return i&&a&&a.length&&(!l||!Nu(l,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,i=a.data,l=a.dataKey,o=a.activeIndex,c=ot(this.props.background,!1);return i.map(function(d,u){d.value;var h=d.background,f=GEe(d,KEe);if(!h)return null;var m=dn(dn(dn(dn(dn({},f),{},{fill:"#eee"},h),c),ju(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:l,index:u,className:"recharts-bar-background-rectangle"});return Z.createElement(Q5,jj({key:"background-bar-".concat(u),option:s.props.background,isActive:u===o},m))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=ya(u,ey);if(!h)return null;var f=d==="vertical"?l[0].height/2:l[0].width/2,m=function(w,j){var g=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:g,errorVal:an(w,j)}},v={clipPath:s?"url(#clipPath-".concat(a,")"):null};return Z.createElement(Gt,v,h.map(function(x){return Z.cloneElement(x,{key:"error-bar-".concat(a,"-").concat(x.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.data,l=s.className,o=s.xAxis,c=s.yAxis,d=s.left,u=s.top,h=s.width,f=s.height,m=s.isAnimationActive,v=s.background,x=s.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,j=Ot("recharts-bar",l),g=o&&o.allowDataOverflow,b=c&&c.allowDataOverflow,p=g||b,N=Tt(x)?this.id:x;return Z.createElement(Gt,{className:j},g||b?Z.createElement("defs",null,Z.createElement("clipPath",{id:"clipPath-".concat(N)},Z.createElement("rect",{x:g?d:d-h/2,y:b?u:u-f/2,width:g?h:h*2,height:b?f:f*2}))):null,Z.createElement(Gt,{className:"recharts-bar-rectangles",clipPath:p?"url(#clipPath-".concat(N,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(p,N),(!m||w)&&Cl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])}(y.PureComponent);Tq=To;wc(To,"displayName","Bar");wc(To,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!_i.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});wc(To,"getComposedData",function(e){var t=e.props,n=e.item,s=e.barPosition,a=e.bandSize,i=e.xAxis,l=e.yAxis,o=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,f=e.offset,m=$Ce(s,n);if(!m)return null;var v=t.layout,x=n.type.defaultProps,w=x!==void 0?dn(dn({},x),n.props):n.props,j=w.dataKey,g=w.children,b=w.minPointSize,p=v==="horizontal"?l:i,N=d?p.scale.domain():null,k=VCe({numericAxis:p}),C=ya(g,Hm),_=h.map(function(P,D){var E,$,A,T,O,z;d?E=ICe(d[u+D],N):(E=an(P,j),Array.isArray(E)||(E=[k,E]));var F=HEe(b,Tq.defaultProps.minPointSize)(E[1],D);if(v==="horizontal"){var R,I=[l.scale(E[0]),l.scale(E[1])],Q=I[0],Y=I[1];$=V$({axis:i,ticks:o,bandSize:a,offset:m.offset,entry:P,index:D}),A=(R=Y??Q)!==null&&R!==void 0?R:void 0,T=m.size;var K=Q-Y;if(O=Number.isNaN(K)?0:K,z={x:$,y:l.y,width:T,height:l.height},Math.abs(F)>0&&Math.abs(O)<Math.abs(F)){var oe=ws(O||F)*(Math.abs(F)-Math.abs(O));A-=oe,O+=oe}}else{var ge=[i.scale(E[0]),i.scale(E[1])],Ne=ge[0],Oe=ge[1];if($=Ne,A=V$({axis:l,ticks:c,bandSize:a,offset:m.offset,entry:P,index:D}),T=Oe-Ne,O=m.size,z={x:i.x,y:A,width:i.width,height:O},Math.abs(F)>0&&Math.abs(T)<Math.abs(F)){var pe=ws(T||F)*(Math.abs(F)-Math.abs(T));T+=pe}}return dn(dn(dn({},P),{},{x:$,y:A,width:T,height:O,value:d?E:E[1],payload:P,background:z},C&&C[D]&&C[D].props),{},{tooltipPayload:[eq(n,P)],tooltipPosition:{x:$+T/2,y:A+O/2}})});return dn({data:_,layout:v},f)});function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(e)}function nOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tI(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Rq(s.key),s)}}function sOe(e,t,n){return t&&tI(e.prototype,t),n&&tI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function di(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rI(Object(n),!0).forEach(function(s){Z1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Z1(e,t,n){return t=Rq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rq(e){var t=aOe(e,"string");return Eg(t)=="symbol"?t:t+""}function aOe(e,t){if(Eg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Eg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S4=function(t,n,s,a,i){var l=t.width,o=t.height,c=t.layout,d=t.children,u=Object.keys(n),h={left:s.left,leftMirror:s.left,right:l-s.right,rightMirror:l-s.right,top:s.top,topMirror:s.top,bottom:o-s.bottom,bottomMirror:o-s.bottom},f=!!oa(d,To);return u.reduce(function(m,v){var x=n[v],w=x.orientation,j=x.domain,g=x.padding,b=g===void 0?{}:g,p=x.mirror,N=x.reversed,k="".concat(w).concat(p?"Mirror":""),C,_,P,D,E;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var $=j[1]-j[0],A=1/0,T=x.categoricalDomain.sort(jme);if(T.forEach(function(ge,Ne){Ne>0&&(A=Math.min((ge||0)-(T[Ne-1]||0),A))}),Number.isFinite(A)){var O=A/$,z=x.layout==="vertical"?s.height:s.width;if(x.padding==="gap"&&(C=O*z/2),x.padding==="no-gap"){var F=Ns(t.barCategoryGap,O*z),R=O*z/2;C=R-F-(R-F)/z*F}}}a==="xAxis"?_=[s.left+(b.left||0)+(C||0),s.left+s.width-(b.right||0)-(C||0)]:a==="yAxis"?_=c==="horizontal"?[s.top+s.height-(b.bottom||0),s.top+(b.top||0)]:[s.top+(b.top||0)+(C||0),s.top+s.height-(b.bottom||0)-(C||0)]:_=x.range,N&&(_=[_[1],_[0]]);var I=XV(x,i,f),Q=I.scale,Y=I.realScaleType;Q.domain(j).range(_),ZV(Q);var K=QV(Q,di(di({},x),{},{realScaleType:Y}));a==="xAxis"?(E=w==="top"&&!p||w==="bottom"&&p,P=s.left,D=h[k]-E*x.height):a==="yAxis"&&(E=w==="left"&&!p||w==="right"&&p,P=h[k]-E*x.width,D=s.top);var oe=di(di(di({},x),K),{},{realScaleType:Y,x:P,y:D,scale:Q,width:a==="xAxis"?s.width:x.width,height:a==="yAxis"?s.height:x.height});return oe.bandSize=ij(oe,K),!x.hide&&a==="xAxis"?h[k]+=(E?-1:1)*oe.height:x.hide||(h[k]+=(E?-1:1)*oe.width),di(di({},m),{},Z1({},v,oe))},{})},Dq=function(t,n){var s=t.x,a=t.y,i=n.x,l=n.y;return{x:Math.min(s,i),y:Math.min(a,l),width:Math.abs(i-s),height:Math.abs(l-a)}},iOe=function(t){var n=t.x1,s=t.y1,a=t.x2,i=t.y2;return Dq({x:n,y:s},{x:a,y:i})},Mq=function(){function e(t){nOe(this,e),this.scale=t}return sOe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,i=s.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var s=this.range(),a=s[0],i=s[s.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();Z1(Mq,"EPS",1e-4);var C4=function(t){var n=Object.keys(t).reduce(function(s,a){return di(di({},s),{},Z1({},a,Mq.create(t[a])))},{});return di(di({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,o=i.position;return CEe(a,function(c,d){return n[d].apply(c,{bandAware:l,position:o})})},isInRange:function(a){return Aq(a,function(i,l){return n[l].isInRange(i)})}})};function lOe(e){return(e%180+180)%180}var oOe=function(t){var n=t.width,s=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=lOe(a),l=i*Math.PI/180,o=Math.atan(s/n),c=l>o&&l<Math.PI-o?s/Math.sin(l):n/Math.cos(l);return Math.abs(c)},cOe=Fl,dOe=Yv,uOe=O1;function hOe(e){return function(t,n,s){var a=Object(t);if(!dOe(t)){var i=cOe(n);t=uOe(t),n=function(o){return i(a[o],o,a)}}var l=e(t,n,s);return l>-1?a[i?t[l]:l]:void 0}}var fOe=hOe,mOe=Sq;function pOe(e){var t=mOe(e),n=t%1;return t===t?n?t-n:t:0}var xOe=pOe,gOe=Tz,vOe=Fl,yOe=xOe,bOe=Math.max;function jOe(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var a=n==null?0:yOe(n);return a<0&&(a=bOe(s+a,0)),gOe(e,vOe(t),a)}var wOe=jOe,NOe=fOe,kOe=wOe,SOe=NOe(kOe),COe=SOe;const _Oe=Qt(COe);var POe=wfe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),_4=y.createContext(void 0),P4=y.createContext(void 0),$q=y.createContext(void 0),Iq=y.createContext({}),Fq=y.createContext(void 0),Lq=y.createContext(0),Uq=y.createContext(0),nI=function(t){var n=t.state,s=n.xAxisMap,a=n.yAxisMap,i=n.offset,l=t.clipPathId,o=t.children,c=t.width,d=t.height,u=POe(i);return Z.createElement(_4.Provider,{value:s},Z.createElement(P4.Provider,{value:a},Z.createElement(Iq.Provider,{value:i},Z.createElement($q.Provider,{value:u},Z.createElement(Fq.Provider,{value:l},Z.createElement(Lq.Provider,{value:d},Z.createElement(Uq.Provider,{value:c},o)))))))},AOe=function(){return y.useContext(Fq)},Bq=function(t){var n=y.useContext(_4);n==null&&Su();var s=n[t];return s==null&&Su(),s},TOe=function(){var t=y.useContext(_4);return nc(t)},EOe=function(){var t=y.useContext(P4),n=_Oe(t,function(s){return Aq(s.domain,Number.isFinite)});return n||nc(t)},zq=function(t){var n=y.useContext(P4);n==null&&Su();var s=n[t];return s==null&&Su(),s},OOe=function(){var t=y.useContext($q);return t},ROe=function(){return y.useContext(Iq)},A4=function(){return y.useContext(Uq)},T4=function(){return y.useContext(Lq)};function am(e){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},am(e)}function DOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MOe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,qq(s.key),s)}}function $Oe(e,t,n){return t&&MOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function IOe(e,t,n){return t=Nj(t),FOe(e,Vq()?Reflect.construct(t,n||[],Nj(e).constructor):t.apply(e,n))}function FOe(e,t){if(t&&(am(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LOe(e)}function LOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vq=function(){return!!e})()}function Nj(e){return Nj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nj(e)}function UOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p_(e,t)}function p_(e,t){return p_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},p_(e,t)}function sI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function aI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sI(Object(n),!0).forEach(function(s){E4(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function E4(e,t,n){return t=qq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qq(e){var t=BOe(e,"string");return am(t)=="symbol"?t:t+""}function BOe(e,t){if(am(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(am(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zOe(e,t){return HOe(e)||WOe(e,t)||qOe(e,t)||VOe()}function VOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qOe(e,t){if(e){if(typeof e=="string")return iI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iI(e,t)}}function iI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function WOe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function HOe(e){if(Array.isArray(e))return e}function x_(){return x_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},x_.apply(this,arguments)}var KOe=function(t,n){var s;return Z.isValidElement(t)?s=Z.cloneElement(t,n):gt(t)?s=t(n):s=Z.createElement("line",x_({},n,{className:"recharts-reference-line-line"})),s},GOe=function(t,n,s,a,i,l,o,c,d){var u=i.x,h=i.y,f=i.width,m=i.height;if(s){var v=d.y,x=t.y.apply(v,{position:l});if(_l(d,"discard")&&!t.y.isInRange(x))return null;var w=[{x:u+f,y:x},{x:u,y:x}];return c==="left"?w.reverse():w}if(n){var j=d.x,g=t.x.apply(j,{position:l});if(_l(d,"discard")&&!t.x.isInRange(g))return null;var b=[{x:g,y:h+m},{x:g,y:h}];return o==="top"?b.reverse():b}if(a){var p=d.segment,N=p.map(function(k){return t.apply(k,{position:l})});return _l(d,"discard")&&vEe(N,function(k){return!t.isInRange(k)})?null:N}return null};function YOe(e){var t=e.x,n=e.y,s=e.segment,a=e.xAxisId,i=e.yAxisId,l=e.shape,o=e.className,c=e.alwaysShow,d=AOe(),u=Bq(a),h=zq(i),f=OOe();if(!d||!f)return null;Ci(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=C4({x:u.scale,y:h.scale}),v=An(t),x=An(n),w=s&&s.length===2,j=GOe(m,v,x,w,f,e.position,u.orientation,h.orientation,e);if(!j)return null;var g=zOe(j,2),b=g[0],p=b.x,N=b.y,k=g[1],C=k.x,_=k.y,P=_l(e,"hidden")?"url(#".concat(d,")"):void 0,D=aI(aI({clipPath:P},ot(e,!0)),{},{x1:p,y1:N,x2:C,y2:_});return Z.createElement(Gt,{className:Ot("recharts-reference-line",o)},KOe(l,D),$n.renderCallByParent(e,iOe({x1:p,y1:N,x2:C,y2:_})))}var O4=function(e){function t(){return DOe(this,t),IOe(this,t,arguments)}return UOe(t,e),$Oe(t,[{key:"render",value:function(){return Z.createElement(YOe,this.props)}}])}(Z.Component);E4(O4,"displayName","ReferenceLine");E4(O4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function g_(){return g_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},g_.apply(this,arguments)}function im(e){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},im(e)}function lI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function oI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lI(Object(n),!0).forEach(function(s){Q1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function XOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZOe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Hq(s.key),s)}}function QOe(e,t,n){return t&&ZOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JOe(e,t,n){return t=kj(t),eRe(e,Wq()?Reflect.construct(t,n||[],kj(e).constructor):t.apply(e,n))}function eRe(e,t){if(t&&(im(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tRe(e)}function tRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wq=function(){return!!e})()}function kj(e){return kj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kj(e)}function rRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v_(e,t)}function v_(e,t){return v_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},v_(e,t)}function Q1(e,t,n){return t=Hq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hq(e){var t=nRe(e,"string");return im(t)=="symbol"?t:t+""}function nRe(e,t){if(im(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(im(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sRe=function(t){var n=t.x,s=t.y,a=t.xAxis,i=t.yAxis,l=C4({x:a.scale,y:i.scale}),o=l.apply({x:n,y:s},{bandAware:!0});return _l(t,"discard")&&!l.isInRange(o)?null:o},J1=function(e){function t(){return XOe(this,t),JOe(this,t,arguments)}return rRe(t,e),QOe(t,[{key:"render",value:function(){var s=this.props,a=s.x,i=s.y,l=s.r,o=s.alwaysShow,c=s.clipPathId,d=An(a),u=An(i);if(Ci(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var h=sRe(this.props);if(!h)return null;var f=h.x,m=h.y,v=this.props,x=v.shape,w=v.className,j=_l(this.props,"hidden")?"url(#".concat(c,")"):void 0,g=oI(oI({clipPath:j},ot(this.props,!0)),{},{cx:f,cy:m});return Z.createElement(Gt,{className:Ot("recharts-reference-dot",w)},t.renderDot(x,g),$n.renderCallByParent(this.props,{x:f-l,y:m-l,width:2*l,height:2*l}))}}])}(Z.Component);Q1(J1,"displayName","ReferenceDot");Q1(J1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Q1(J1,"renderDot",function(e,t){var n;return Z.isValidElement(e)?n=Z.cloneElement(e,t):gt(e)?n=e(t):n=Z.createElement(ty,g_({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function y_(){return y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},y_.apply(this,arguments)}function lm(e){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(e)}function cI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function dI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cI(Object(n),!0).forEach(function(s){eN(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function aRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iRe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Gq(s.key),s)}}function lRe(e,t,n){return t&&iRe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oRe(e,t,n){return t=Sj(t),cRe(e,Kq()?Reflect.construct(t,n||[],Sj(e).constructor):t.apply(e,n))}function cRe(e,t){if(t&&(lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dRe(e)}function dRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kq=function(){return!!e})()}function Sj(e){return Sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sj(e)}function uRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b_(e,t)}function b_(e,t){return b_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},b_(e,t)}function eN(e,t,n){return t=Gq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gq(e){var t=hRe(e,"string");return lm(t)=="symbol"?t:t+""}function hRe(e,t){if(lm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(lm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fRe=function(t,n,s,a,i){var l=i.x1,o=i.x2,c=i.y1,d=i.y2,u=i.xAxis,h=i.yAxis;if(!u||!h)return null;var f=C4({x:u.scale,y:h.scale}),m={x:t?f.x.apply(l,{position:"start"}):f.x.rangeMin,y:s?f.y.apply(c,{position:"start"}):f.y.rangeMin},v={x:n?f.x.apply(o,{position:"end"}):f.x.rangeMax,y:a?f.y.apply(d,{position:"end"}):f.y.rangeMax};return _l(i,"discard")&&(!f.isInRange(m)||!f.isInRange(v))?null:Dq(m,v)},tN=function(e){function t(){return aRe(this,t),oRe(this,t,arguments)}return uRe(t,e),lRe(t,[{key:"render",value:function(){var s=this.props,a=s.x1,i=s.x2,l=s.y1,o=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;Ci(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=An(a),f=An(i),m=An(l),v=An(o),x=this.props.shape;if(!h&&!f&&!m&&!v&&!x)return null;var w=fRe(h,f,m,v,this.props);if(!w&&!x)return null;var j=_l(this.props,"hidden")?"url(#".concat(u,")"):void 0;return Z.createElement(Gt,{className:Ot("recharts-reference-area",c)},t.renderRect(x,dI(dI({clipPath:j},ot(this.props,!0)),w)),$n.renderCallByParent(this.props,w))}}])}(Z.Component);eN(tN,"displayName","ReferenceArea");eN(tN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});eN(tN,"renderRect",function(e,t){var n;return Z.isValidElement(e)?n=Z.cloneElement(e,t):gt(e)?n=e(t):n=Z.createElement(k4,y_({},t,{className:"recharts-reference-area-rect"})),n});function Yq(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var s=[],a=0;a<e.length;a+=t)s.push(e[a]);return s}function mRe(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return oOe(s,n)}function pRe(e,t,n){var s=n==="width",a=e.x,i=e.y,l=e.width,o=e.height;return t===1?{start:s?a:i,end:s?a+l:i+o}:{start:s?a+l:i+o,end:s?a:i}}function Cj(e,t,n,s,a){if(e*t<e*s||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-a)<=0}function xRe(e,t){return Yq(e,t+1)}function gRe(e,t,n,s,a){for(var i=(s||[]).slice(),l=t.start,o=t.end,c=0,d=1,u=l,h=function(){var v=s==null?void 0:s[c];if(v===void 0)return{v:Yq(s,d)};var x=c,w,j=function(){return w===void 0&&(w=n(v,x)),w},g=v.coordinate,b=c===0||Cj(e,g,j,u,o);b||(c=0,u=l,d+=1),b&&(u=g+e*(j()/2+a),c+=d)},f;d<=i.length;)if(f=h(),f)return f.v;return[]}function Og(e){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}function uI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function rs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uI(Object(n),!0).forEach(function(s){vRe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function vRe(e,t,n){return t=yRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yRe(e){var t=bRe(e,"string");return Og(t)=="symbol"?t:t+""}function bRe(e,t){if(Og(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Og(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jRe(e,t,n,s,a){for(var i=(s||[]).slice(),l=i.length,o=t.start,c=t.end,d=function(f){var m=i[f],v,x=function(){return v===void 0&&(v=n(m,f)),v};if(f===l-1){var w=e*(m.coordinate+e*x()/2-c);i[f]=m=rs(rs({},m),{},{tickCoord:w>0?m.coordinate-w*e:m.coordinate})}else i[f]=m=rs(rs({},m),{},{tickCoord:m.coordinate});var j=Cj(e,m.tickCoord,x,o,c);j&&(c=m.tickCoord-e*(x()/2+a),i[f]=rs(rs({},m),{},{isShow:!0}))},u=l-1;u>=0;u--)d(u);return i}function wRe(e,t,n,s,a,i){var l=(s||[]).slice(),o=l.length,c=t.start,d=t.end;if(i){var u=s[o-1],h=n(u,o-1),f=e*(u.coordinate+e*h/2-d);l[o-1]=u=rs(rs({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var m=Cj(e,u.tickCoord,function(){return h},c,d);m&&(d=u.tickCoord-e*(h/2+a),l[o-1]=rs(rs({},u),{},{isShow:!0}))}for(var v=i?o-1:o,x=function(g){var b=l[g],p,N=function(){return p===void 0&&(p=n(b,g)),p};if(g===0){var k=e*(b.coordinate-e*N()/2-c);l[g]=b=rs(rs({},b),{},{tickCoord:k<0?b.coordinate-k*e:b.coordinate})}else l[g]=b=rs(rs({},b),{},{tickCoord:b.coordinate});var C=Cj(e,b.tickCoord,N,c,d);C&&(c=b.tickCoord+e*(N()/2+a),l[g]=rs(rs({},b),{},{isShow:!0}))},w=0;w<v;w++)x(w);return l}function R4(e,t,n){var s=e.tick,a=e.ticks,i=e.viewBox,l=e.minTickGap,o=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,h=e.angle;if(!a||!a.length||!s)return[];if(ze(c)||_i.isSsr)return xRe(a,typeof c=="number"&&ze(c)?c:0);var f=[],m=o==="top"||o==="bottom"?"width":"height",v=u&&m==="width"?cx(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},x=function(b,p){var N=gt(d)?d(b.value,p):b.value;return m==="width"?mRe(cx(N,{fontSize:t,letterSpacing:n}),v,h):cx(N,{fontSize:t,letterSpacing:n})[m]},w=a.length>=2?ws(a[1].coordinate-a[0].coordinate):1,j=pRe(i,w,m);return c==="equidistantPreserveStart"?gRe(w,j,x,a,l):(c==="preserveStart"||c==="preserveStartEnd"?f=wRe(w,j,x,a,l,c==="preserveStartEnd"):f=jRe(w,j,x,a,l),f.filter(function(g){return g.isShow}))}var NRe=["viewBox"],kRe=["viewBox"],SRe=["ticks"];function om(e){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},om(e)}function Sh(){return Sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Sh.apply(this,arguments)}function hI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hI(Object(n),!0).forEach(function(s){D4(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Fk(e,t){if(e==null)return{};var n=CRe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function CRe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function _Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fI(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Zq(s.key),s)}}function PRe(e,t,n){return t&&fI(e.prototype,t),n&&fI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ARe(e,t,n){return t=_j(t),TRe(e,Xq()?Reflect.construct(t,n||[],_j(e).constructor):t.apply(e,n))}function TRe(e,t){if(t&&(om(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ERe(e)}function ERe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xq=function(){return!!e})()}function _j(e){return _j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_j(e)}function ORe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j_(e,t)}function j_(e,t){return j_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},j_(e,t)}function D4(e,t,n){return t=Zq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zq(e){var t=RRe(e,"string");return om(t)=="symbol"?t:t+""}function RRe(e,t){if(om(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(om(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xm=function(e){function t(n){var s;return _Re(this,t),s=ARe(this,t,[n]),s.state={fontSize:"",letterSpacing:""},s}return ORe(t,e),PRe(t,[{key:"shouldComponentUpdate",value:function(s,a){var i=s.viewBox,l=Fk(s,NRe),o=this.props,c=o.viewBox,d=Fk(o,kRe);return!Uh(i,c)||!Uh(l,d)||!Uh(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.x,l=a.y,o=a.width,c=a.height,d=a.orientation,u=a.tickSize,h=a.mirror,f=a.tickMargin,m,v,x,w,j,g,b=h?-1:1,p=s.tickSize||u,N=ze(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":m=v=s.coordinate,w=l+ +!h*c,x=w-b*p,g=x-b*f,j=N;break;case"left":x=w=s.coordinate,v=i+ +!h*o,m=v-b*p,j=m-b*f,g=N;break;case"right":x=w=s.coordinate,v=i+ +h*o,m=v+b*p,j=m+b*f,g=N;break;default:m=v=s.coordinate,w=l+ +h*c,x=w+b*p,g=x+b*f,j=N;break}return{line:{x1:m,y1:x,x2:v,y2:w},tick:{x:j,y:g}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,l;switch(a){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,l="end";switch(a){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,i=s.y,l=s.width,o=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,h=vn(vn(vn({},ot(this.props,!1)),ot(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);h=vn(vn({},h),{},{x1:a,y1:i+f*o,x2:a+l,y2:i+f*o})}else{var m=+(c==="left"&&!d||c==="right"&&d);h=vn(vn({},h),{},{x1:a+m*l,y1:i,x2:a+m*l,y2:i+o})}return Z.createElement("line",Sh({},h,{className:Ot("recharts-cartesian-axis-line",va(u,"className"))}))}},{key:"renderTicks",value:function(s,a,i){var l=this,o=this.props,c=o.tickLine,d=o.stroke,u=o.tick,h=o.tickFormatter,f=o.unit,m=R4(vn(vn({},this.props),{},{ticks:s}),a,i),v=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),w=ot(this.props,!1),j=ot(u,!1),g=vn(vn({},w),{},{fill:"none"},ot(c,!1)),b=m.map(function(p,N){var k=l.getTickLineCoord(p),C=k.line,_=k.tick,P=vn(vn(vn(vn({textAnchor:v,verticalAnchor:x},w),{},{stroke:"none",fill:d},j),_),{},{index:N,payload:p,visibleTicksCount:m.length,tickFormatter:h});return Z.createElement(Gt,Sh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(p.value,"-").concat(p.coordinate,"-").concat(p.tickCoord)},ju(l.props,p,N)),c&&Z.createElement("line",Sh({},g,C,{className:Ot("recharts-cartesian-axis-tick-line",va(c,"className"))})),u&&t.renderTickItem(u,P,"".concat(gt(h)?h(p.value,N):p.value).concat(f||"")))});return Z.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var s=this,a=this.props,i=a.axisLine,l=a.width,o=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var h=this.props,f=h.ticks,m=Fk(h,SRe),v=f;return gt(c)&&(v=f&&f.length>0?c(this.props):c(m)),l<=0||o<=0||!v||!v.length?null:Z.createElement(Gt,{className:Ot("recharts-cartesian-axis",d),ref:function(w){s.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),$n.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,i){var l,o=Ot(a.className,"recharts-cartesian-axis-tick-value");return Z.isValidElement(s)?l=Z.cloneElement(s,vn(vn({},a),{},{className:o})):gt(s)?l=s(vn(vn({},a),{},{className:o})):l=Z.createElement(wu,Sh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])}(y.Component);D4(Xm,"displayName","CartesianAxis");D4(Xm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var DRe=["x1","y1","x2","y2","key"],MRe=["offset"];function Cu(e){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(e)}function mI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mI(Object(n),!0).forEach(function(s){$Re(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function $Re(e,t,n){return t=IRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IRe(e){var t=FRe(e,"string");return Cu(t)=="symbol"?t:t+""}function FRe(e,t){if(Cu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Cu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ed(){return Ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ed.apply(this,arguments)}function pI(e,t){if(e==null)return{};var n=LRe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function LRe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var URe=function(t){var n=t.fill;if(!n||n==="none")return null;var s=t.fillOpacity,a=t.x,i=t.y,l=t.width,o=t.height,c=t.ry;return Z.createElement("rect",{x:a,y:i,ry:c,width:l,height:o,stroke:"none",fill:n,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function Qq(e,t){var n;if(Z.isValidElement(e))n=Z.cloneElement(e,t);else if(gt(e))n=e(t);else{var s=t.x1,a=t.y1,i=t.x2,l=t.y2,o=t.key,c=pI(t,DRe),d=ot(c,!1);d.offset;var u=pI(d,MRe);n=Z.createElement("line",Ed({},u,{x1:s,y1:a,x2:i,y2:l,fill:"none",key:o}))}return n}function BRe(e){var t=e.x,n=e.width,s=e.horizontal,a=s===void 0?!0:s,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=as(as({},e),{},{x1:t,y1:o,x2:t+n,y2:o,key:"line-".concat(c),index:c});return Qq(a,d)});return Z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function zRe(e){var t=e.y,n=e.height,s=e.vertical,a=s===void 0?!0:s,i=e.verticalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=as(as({},e),{},{x1:o,y1:t,x2:o,y2:t+n,key:"line-".concat(c),index:c});return Qq(a,d)});return Z.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function VRe(e){var t=e.horizontalFill,n=e.fillOpacity,s=e.x,a=e.y,i=e.width,l=e.height,o=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=o.map(function(f){return Math.round(f+a-a)}).sort(function(f,m){return f-m});a!==u[0]&&u.unshift(0);var h=u.map(function(f,m){var v=!u[m+1],x=v?a+l-f:u[m+1]-f;if(x<=0)return null;var w=m%t.length;return Z.createElement("rect",{key:"react-".concat(m),y:f,x:s,height:x,width:i,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function qRe(e){var t=e.vertical,n=t===void 0?!0:t,s=e.verticalFill,a=e.fillOpacity,i=e.x,l=e.y,o=e.width,c=e.height,d=e.verticalPoints;if(!n||!s||!s.length)return null;var u=d.map(function(f){return Math.round(f+i-i)}).sort(function(f,m){return f-m});i!==u[0]&&u.unshift(0);var h=u.map(function(f,m){var v=!u[m+1],x=v?i+o-f:u[m+1]-f;if(x<=0)return null;var w=m%s.length;return Z.createElement("rect",{key:"react-".concat(m),x:f,y:l,width:x,height:c,stroke:"none",fill:s[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var WRe=function(t,n){var s=t.xAxis,a=t.width,i=t.height,l=t.offset;return YV(R4(as(as(as({},Xm.defaultProps),s),{},{ticks:fo(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.left,l.left+l.width,n)},HRe=function(t,n){var s=t.yAxis,a=t.width,i=t.height,l=t.offset;return YV(R4(as(as(as({},Xm.defaultProps),s),{},{ticks:fo(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.top,l.top+l.height,n)},rh={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Pi(e){var t,n,s,a,i,l,o=A4(),c=T4(),d=ROe(),u=as(as({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:rh.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:rh.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:rh.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:rh.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:rh.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:rh.verticalFill,x:ze(e.x)?e.x:d.left,y:ze(e.y)?e.y:d.top,width:ze(e.width)?e.width:d.width,height:ze(e.height)?e.height:d.height}),h=u.x,f=u.y,m=u.width,v=u.height,x=u.syncWithTicks,w=u.horizontalValues,j=u.verticalValues,g=TOe(),b=EOe();if(!ze(m)||m<=0||!ze(v)||v<=0||!ze(h)||h!==+h||!ze(f)||f!==+f)return null;var p=u.verticalCoordinatesGenerator||WRe,N=u.horizontalCoordinatesGenerator||HRe,k=u.horizontalPoints,C=u.verticalPoints;if((!k||!k.length)&&gt(N)){var _=w&&w.length,P=N({yAxis:b?as(as({},b),{},{ticks:_?w:b.ticks}):void 0,width:o,height:c,offset:d},_?!0:x);Ci(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Cu(P),"]")),Array.isArray(P)&&(k=P)}if((!C||!C.length)&&gt(p)){var D=j&&j.length,E=p({xAxis:g?as(as({},g),{},{ticks:D?j:g.ticks}):void 0,width:o,height:c,offset:d},D?!0:x);Ci(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Cu(E),"]")),Array.isArray(E)&&(C=E)}return Z.createElement("g",{className:"recharts-cartesian-grid"},Z.createElement(URe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),Z.createElement(BRe,Ed({},u,{offset:d,horizontalPoints:k,xAxis:g,yAxis:b})),Z.createElement(zRe,Ed({},u,{offset:d,verticalPoints:C,xAxis:g,yAxis:b})),Z.createElement(VRe,Ed({},u,{horizontalPoints:k})),Z.createElement(qRe,Ed({},u,{verticalPoints:C})))}Pi.displayName="CartesianGrid";var KRe=["type","layout","connectNulls","ref"],GRe=["key"];function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}function xI(e,t){if(e==null)return{};var n=YRe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function YRe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function px(){return px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},px.apply(this,arguments)}function gI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gI(Object(n),!0).forEach(function(s){ui(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function nh(e){return JRe(e)||QRe(e)||ZRe(e)||XRe()}function XRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZRe(e,t){if(e){if(typeof e=="string")return w_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w_(e,t)}}function QRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function JRe(e){if(Array.isArray(e))return w_(e)}function w_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function eDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vI(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,eW(s.key),s)}}function tDe(e,t,n){return t&&vI(e.prototype,t),n&&vI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rDe(e,t,n){return t=Pj(t),nDe(e,Jq()?Reflect.construct(t,n||[],Pj(e).constructor):t.apply(e,n))}function nDe(e,t){if(t&&(cm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sDe(e)}function sDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jq=function(){return!!e})()}function Pj(e){return Pj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pj(e)}function aDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N_(e,t)}function N_(e,t){return N_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},N_(e,t)}function ui(e,t,n){return t=eW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eW(e){var t=iDe(e,"string");return cm(t)=="symbol"?t:t+""}function iDe(e,t){if(cm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(cm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ls=function(e){function t(){var n;eDe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=rDe(this,t,[].concat(a)),ui(n,"state",{isAnimationFinished:!0,totalLength:0}),ui(n,"generateSimpleStrokeDasharray",function(l,o){return"".concat(o,"px ").concat(l-o,"px")}),ui(n,"getStrokeDasharray",function(l,o,c){var d=c.reduce(function(j,g){return j+g});if(!d)return n.generateSimpleStrokeDasharray(o,l);for(var u=Math.floor(l/d),h=l%d,f=o-l,m=[],v=0,x=0;v<c.length;x+=c[v],++v)if(x+c[v]>h){m=[].concat(nh(c.slice(0,v)),[h-x]);break}var w=m.length%2===0?[0,f]:[f];return[].concat(nh(t.repeat(c,u)),nh(m),w).map(function(j){return"".concat(j,"px")}).join(", ")}),ui(n,"id",Uu("recharts-line-")),ui(n,"pathRef",function(l){n.mainCurve=l}),ui(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),ui(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return aDe(t,e),tDe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=ya(u,ey);if(!h)return null;var f=function(x,w){return{x:x.x,y:x.y,value:x.value,errorVal:an(x.payload,w)}},m={clipPath:s?"url(#clipPath-".concat(a,")"):null};return Z.createElement(Gt,m,h.map(function(v){return Z.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,dataPointFormatter:f})}))}},{key:"renderDots",value:function(s,a,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,d=o.points,u=o.dataKey,h=ot(this.props,!1),f=ot(c,!0),m=d.map(function(x,w){var j=sa(sa(sa({key:"dot-".concat(w),r:3},h),f),{},{index:w,cx:x.x,cy:x.y,value:x.value,dataKey:u,payload:x.payload,points:d});return t.renderDotItem(c,j)}),v={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Z.createElement(Gt,px({className:"recharts-line-dots",key:"dots"},v),m)}},{key:"renderCurveStatically",value:function(s,a,i,l){var o=this.props,c=o.type,d=o.layout,u=o.connectNulls;o.ref;var h=xI(o,KRe),f=sa(sa(sa({},ot(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:s},l),{},{type:c,layout:d,connectNulls:u});return Z.createElement(lu,px({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,a){var i=this,l=this.props,o=l.points,c=l.strokeDasharray,d=l.isAnimationActive,u=l.animationBegin,h=l.animationDuration,f=l.animationEasing,m=l.animationId,v=l.animateNewValues,x=l.width,w=l.height,j=this.state,g=j.prevPoints,b=j.totalLength;return Z.createElement(Li,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var N=p.t;if(g){var k=g.length/o.length,C=o.map(function($,A){var T=Math.floor(A*k);if(g[T]){var O=g[T],z=Cn(O.x,$.x),F=Cn(O.y,$.y);return sa(sa({},$),{},{x:z(N),y:F(N)})}if(v){var R=Cn(x*2,$.x),I=Cn(w/2,$.y);return sa(sa({},$),{},{x:R(N),y:I(N)})}return sa(sa({},$),{},{x:$.x,y:$.y})});return i.renderCurveStatically(C,s,a)}var _=Cn(0,b),P=_(N),D;if(c){var E="".concat(c).split(/[,\s]+/gim).map(function($){return parseFloat($)});D=i.getStrokeDasharray(P,b,E)}else D=i.generateSimpleStrokeDasharray(b,P);return i.renderCurveStatically(o,s,a,{strokeDasharray:D})})}},{key:"renderCurve",value:function(s,a){var i=this.props,l=i.points,o=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return o&&l&&l.length&&(!d&&u>0||!Nu(d,l))?this.renderCurveWithAnimation(s,a):this.renderCurveStatically(l,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,l=a.dot,o=a.points,c=a.className,d=a.xAxis,u=a.yAxis,h=a.top,f=a.left,m=a.width,v=a.height,x=a.isAnimationActive,w=a.id;if(i||!o||!o.length)return null;var j=this.state.isAnimationFinished,g=o.length===1,b=Ot("recharts-line",c),p=d&&d.allowDataOverflow,N=u&&u.allowDataOverflow,k=p||N,C=Tt(w)?this.id:w,_=(s=ot(l,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},P=_.r,D=P===void 0?3:P,E=_.strokeWidth,$=E===void 0?2:E,A=B7(l)?l:{},T=A.clipDot,O=T===void 0?!0:T,z=D*2+$;return Z.createElement(Gt,{className:b},p||N?Z.createElement("defs",null,Z.createElement("clipPath",{id:"clipPath-".concat(C)},Z.createElement("rect",{x:p?f:f-m/2,y:N?h:h-v/2,width:p?m:m*2,height:N?v:v*2})),!O&&Z.createElement("clipPath",{id:"clipPath-dots-".concat(C)},Z.createElement("rect",{x:f-z/2,y:h-z/2,width:m+z,height:v+z}))):null,!g&&this.renderCurve(k,C),this.renderErrorBar(k,C),(g||l)&&this.renderDots(k,O,C),(!x||j)&&Cl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,a){for(var i=s.length%2!==0?[].concat(nh(s),[0]):s,l=[],o=0;o<a;++o)l=[].concat(nh(l),nh(i));return l}},{key:"renderDotItem",value:function(s,a){var i;if(Z.isValidElement(s))i=Z.cloneElement(s,a);else if(gt(s))i=s(a);else{var l=a.key,o=xI(a,GRe),c=Ot("recharts-line-dot",typeof s!="boolean"?s.className:"");i=Z.createElement(ty,px({key:l},o,{className:c}))}return i}}])}(y.PureComponent);ui(ls,"displayName","Line");ui(ls,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!_i.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ui(ls,"getComposedData",function(e){var t=e.props,n=e.xAxis,s=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,l=e.dataKey,o=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,h=c.map(function(f,m){var v=an(f,l);return u==="horizontal"?{x:aj({axis:n,ticks:a,bandSize:o,entry:f,index:m}),y:Tt(v)?null:s.scale(v),value:v,payload:f}:{x:Tt(v)?null:n.scale(v),y:aj({axis:s,ticks:i,bandSize:o,entry:f,index:m}),value:v,payload:f}});return sa({points:h,layout:u},d)});var lDe=["layout","type","stroke","connectNulls","isRange","ref"],oDe=["key"],tW;function dm(e){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}function rW(e,t){if(e==null)return{};var n=cDe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function cDe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Od(){return Od=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Od.apply(this,arguments)}function yI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yI(Object(n),!0).forEach(function(s){yl(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function dDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bI(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,sW(s.key),s)}}function uDe(e,t,n){return t&&bI(e.prototype,t),n&&bI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hDe(e,t,n){return t=Aj(t),fDe(e,nW()?Reflect.construct(t,n||[],Aj(e).constructor):t.apply(e,n))}function fDe(e,t){if(t&&(dm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mDe(e)}function mDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nW=function(){return!!e})()}function Aj(e){return Aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Aj(e)}function pDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k_(e,t)}function k_(e,t){return k_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},k_(e,t)}function yl(e,t,n){return t=sW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sW(e){var t=xDe(e,"string");return dm(t)=="symbol"?t:t+""}function xDe(e,t){if(dm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(dm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ai=function(e){function t(){var n;dDe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=hDe(this,t,[].concat(a)),yl(n,"state",{isAnimationFinished:!0}),yl(n,"id",Uu("recharts-area-")),yl(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),gt(l)&&l()}),yl(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),gt(l)&&l()}),n}return pDe(t,e),uDe(t,[{key:"renderDots",value:function(s,a,i){var l=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(l&&!o)return null;var c=this.props,d=c.dot,u=c.points,h=c.dataKey,f=ot(this.props,!1),m=ot(d,!0),v=u.map(function(w,j){var g=Yo(Yo(Yo({key:"dot-".concat(j),r:3},f),m),{},{index:j,cx:w.x,cy:w.y,dataKey:h,value:w.value,payload:w.payload,points:u});return t.renderDotItem(d,g)}),x={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Z.createElement(Gt,Od({className:"recharts-area-dots"},x),v)}},{key:"renderHorizontalRect",value:function(s){var a=this.props,i=a.baseLine,l=a.points,o=a.strokeWidth,c=l[0].x,d=l[l.length-1].x,u=s*Math.abs(c-d),h=jc(l.map(function(f){return f.y||0}));return ze(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(jc(i.map(function(f){return f.y||0})),h)),ze(h)?Z.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(h+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var a=this.props,i=a.baseLine,l=a.points,o=a.strokeWidth,c=l[0].y,d=l[l.length-1].y,u=s*Math.abs(c-d),h=jc(l.map(function(f){return f.x||0}));return ze(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(jc(i.map(function(f){return f.x||0})),h)),ze(h)?Z.createElement("rect",{x:0,y:c<d?c:c-u,width:h+(o?parseInt("".concat(o),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(s){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,a,i,l){var o=this.props,c=o.layout,d=o.type,u=o.stroke,h=o.connectNulls,f=o.isRange;o.ref;var m=rW(o,lDe);return Z.createElement(Gt,{clipPath:i?"url(#clipPath-".concat(l,")"):null},Z.createElement(lu,Od({},ot(m,!0),{points:s,connectNulls:h,type:d,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&Z.createElement(lu,Od({},ot(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:s})),u!=="none"&&f&&Z.createElement(lu,Od({},ot(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(s,a){var i=this,l=this.props,o=l.points,c=l.baseLine,d=l.isAnimationActive,u=l.animationBegin,h=l.animationDuration,f=l.animationEasing,m=l.animationId,v=this.state,x=v.prevPoints,w=v.prevBaseLine;return Z.createElement(Li,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var g=j.t;if(x){var b=x.length/o.length,p=o.map(function(_,P){var D=Math.floor(P*b);if(x[D]){var E=x[D],$=Cn(E.x,_.x),A=Cn(E.y,_.y);return Yo(Yo({},_),{},{x:$(g),y:A(g)})}return _}),N;if(ze(c)&&typeof c=="number"){var k=Cn(w,c);N=k(g)}else if(Tt(c)||zm(c)){var C=Cn(w,0);N=C(g)}else N=c.map(function(_,P){var D=Math.floor(P*b);if(w[D]){var E=w[D],$=Cn(E.x,_.x),A=Cn(E.y,_.y);return Yo(Yo({},_),{},{x:$(g),y:A(g)})}return _});return i.renderAreaStatically(p,N,s,a)}return Z.createElement(Gt,null,Z.createElement("defs",null,Z.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(g))),Z.createElement(Gt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(o,c,s,a)))})}},{key:"renderArea",value:function(s,a){var i=this.props,l=i.points,o=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,h=d.prevBaseLine,f=d.totalLength;return c&&l&&l.length&&(!u&&f>0||!Nu(u,l)||!Nu(h,o))?this.renderAreaWithAnimation(s,a):this.renderAreaStatically(l,o,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,l=a.dot,o=a.points,c=a.className,d=a.top,u=a.left,h=a.xAxis,f=a.yAxis,m=a.width,v=a.height,x=a.isAnimationActive,w=a.id;if(i||!o||!o.length)return null;var j=this.state.isAnimationFinished,g=o.length===1,b=Ot("recharts-area",c),p=h&&h.allowDataOverflow,N=f&&f.allowDataOverflow,k=p||N,C=Tt(w)?this.id:w,_=(s=ot(l,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},P=_.r,D=P===void 0?3:P,E=_.strokeWidth,$=E===void 0?2:E,A=B7(l)?l:{},T=A.clipDot,O=T===void 0?!0:T,z=D*2+$;return Z.createElement(Gt,{className:b},p||N?Z.createElement("defs",null,Z.createElement("clipPath",{id:"clipPath-".concat(C)},Z.createElement("rect",{x:p?u:u-m/2,y:N?d:d-v/2,width:p?m:m*2,height:N?v:v*2})),!O&&Z.createElement("clipPath",{id:"clipPath-dots-".concat(C)},Z.createElement("rect",{x:u-z/2,y:d-z/2,width:m+z,height:v+z}))):null,g?null:this.renderArea(k,C),(l||g)&&this.renderDots(k,O,C),(!x||j)&&Cl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:s.points!==a.curPoints||s.baseLine!==a.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(y.PureComponent);tW=Ai;yl(Ai,"displayName","Area");yl(Ai,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!_i.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});yl(Ai,"getBaseValue",function(e,t,n,s){var a=e.layout,i=e.baseValue,l=t.props.baseValue,o=l??i;if(ze(o)&&typeof o=="number")return o;var c=a==="horizontal"?s:n,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return o==="dataMin"?h:o==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return o==="dataMin"?d[0]:o==="dataMax"?d[1]:d[0]});yl(Ai,"getComposedData",function(e){var t=e.props,n=e.item,s=e.xAxis,a=e.yAxis,i=e.xAxisTicks,l=e.yAxisTicks,o=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,f=e.offset,m=t.layout,v=d&&d.length,x=tW.getBaseValue(t,n,s,a),w=m==="horizontal",j=!1,g=h.map(function(p,N){var k;v?k=d[u+N]:(k=an(p,c),Array.isArray(k)?j=!0:k=[x,k]);var C=k[1]==null||v&&an(p,c)==null;return w?{x:aj({axis:s,ticks:i,bandSize:o,entry:p,index:N}),y:C?null:a.scale(k[1]),value:k,payload:p}:{x:C?null:s.scale(k[1]),y:aj({axis:a,ticks:l,bandSize:o,entry:p,index:N}),value:k,payload:p}}),b;return v||j?b=g.map(function(p){var N=Array.isArray(p.value)?p.value[0]:null;return w?{x:p.x,y:N!=null&&p.y!=null?a.scale(N):null}:{x:N!=null?s.scale(N):null,y:p.y}}):b=w?a.scale(x):s.scale(x),Yo({points:g,baseLine:b,layout:m,isRange:j},f)});yl(Ai,"renderDotItem",function(e,t){var n;if(Z.isValidElement(e))n=Z.cloneElement(e,t);else if(gt(e))n=e(t);else{var s=Ot("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=rW(t,oDe);n=Z.createElement(ty,Od({},i,{key:a,className:s}))}return n});function um(e){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(e)}function gDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vDe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,lW(s.key),s)}}function yDe(e,t,n){return t&&vDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bDe(e,t,n){return t=Tj(t),jDe(e,aW()?Reflect.construct(t,n||[],Tj(e).constructor):t.apply(e,n))}function jDe(e,t){if(t&&(um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wDe(e)}function wDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aW=function(){return!!e})()}function Tj(e){return Tj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tj(e)}function NDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S_(e,t)}function S_(e,t){return S_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},S_(e,t)}function iW(e,t,n){return t=lW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lW(e){var t=kDe(e,"string");return um(t)=="symbol"?t:t+""}function kDe(e,t){if(um(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(um(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C_(){return C_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},C_.apply(this,arguments)}function SDe(e){var t=e.xAxisId,n=A4(),s=T4(),a=Bq(t);return a==null?null:y.createElement(Xm,C_({},a,{className:Ot("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return fo(l,!0)}}))}var Cs=function(e){function t(){return gDe(this,t),bDe(this,t,arguments)}return NDe(t,e),yDe(t,[{key:"render",value:function(){return y.createElement(SDe,this.props)}}])}(y.Component);iW(Cs,"displayName","XAxis");iW(Cs,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function hm(e){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hm(e)}function CDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _De(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,dW(s.key),s)}}function PDe(e,t,n){return t&&_De(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ADe(e,t,n){return t=Ej(t),TDe(e,oW()?Reflect.construct(t,n||[],Ej(e).constructor):t.apply(e,n))}function TDe(e,t){if(t&&(hm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EDe(e)}function EDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oW=function(){return!!e})()}function Ej(e){return Ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ej(e)}function ODe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&__(e,t)}function __(e,t){return __=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},__(e,t)}function cW(e,t,n){return t=dW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dW(e){var t=RDe(e,"string");return hm(t)=="symbol"?t:t+""}function RDe(e,t){if(hm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(hm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P_(){return P_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},P_.apply(this,arguments)}var DDe=function(t){var n=t.yAxisId,s=A4(),a=T4(),i=zq(n);return i==null?null:y.createElement(Xm,P_({},i,{className:Ot("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(o){return fo(o,!0)}}))},_s=function(e){function t(){return CDe(this,t),ADe(this,t,arguments)}return ODe(t,e),PDe(t,[{key:"render",value:function(){return y.createElement(DDe,this.props)}}])}(y.Component);cW(_s,"displayName","YAxis");cW(_s,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function jI(e){return FDe(e)||IDe(e)||$De(e)||MDe()}function MDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $De(e,t){if(e){if(typeof e=="string")return A_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A_(e,t)}}function IDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FDe(e){if(Array.isArray(e))return A_(e)}function A_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var T_=function(t,n,s,a,i){var l=ya(t,O4),o=ya(t,J1),c=[].concat(jI(l),jI(o)),d=ya(t,tN),u="".concat(a,"Id"),h=a[0],f=n;if(c.length&&(f=c.reduce(function(x,w){if(w.props[u]===s&&_l(w.props,"extendDomain")&&ze(w.props[h])){var j=w.props[h];return[Math.min(x[0],j),Math.max(x[1],j)]}return x},f)),d.length){var m="".concat(h,"1"),v="".concat(h,"2");f=d.reduce(function(x,w){if(w.props[u]===s&&_l(w.props,"extendDomain")&&ze(w.props[m])&&ze(w.props[v])){var j=w.props[m],g=w.props[v];return[Math.min(x[0],j,g),Math.max(x[1],j,g)]}return x},f)}return i&&i.length&&(f=i.reduce(function(x,w){return ze(w)?[Math.min(x[0],w),Math.max(x[1],w)]:x},f)),f},uW={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new a(u,h||c,f),v=n?n+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},o.prototype.listeners=function(d){var u=n?n+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,v=new Array(m);f<m;f++)v[f]=h[f].fn;return v},o.prototype.listenerCount=function(d){var u=n?n+d:d,h=this._events[u];return h?h.fn?1:h.length:0},o.prototype.emit=function(d,u,h,f,m,v){var x=n?n+d:d;if(!this._events[x])return!1;var w=this._events[x],j=arguments.length,g,b;if(w.fn){switch(w.once&&this.removeListener(d,w.fn,void 0,!0),j){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,h),!0;case 4:return w.fn.call(w.context,u,h,f),!0;case 5:return w.fn.call(w.context,u,h,f,m),!0;case 6:return w.fn.call(w.context,u,h,f,m,v),!0}for(b=1,g=new Array(j-1);b<j;b++)g[b-1]=arguments[b];w.fn.apply(w.context,g)}else{var p=w.length,N;for(b=0;b<p;b++)switch(w[b].once&&this.removeListener(d,w[b].fn,void 0,!0),j){case 1:w[b].fn.call(w[b].context);break;case 2:w[b].fn.call(w[b].context,u);break;case 3:w[b].fn.call(w[b].context,u,h);break;case 4:w[b].fn.call(w[b].context,u,h,f);break;default:if(!g)for(N=1,g=new Array(j-1);N<j;N++)g[N-1]=arguments[N];w[b].fn.apply(w[b].context,g)}}return!0},o.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},o.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},o.prototype.removeListener=function(d,u,h,f){var m=n?n+d:d;if(!this._events[m])return this;if(!u)return l(this,m),this;var v=this._events[m];if(v.fn)v.fn===u&&(!f||v.once)&&(!h||v.context===h)&&l(this,m);else{for(var x=0,w=[],j=v.length;x<j;x++)(v[x].fn!==u||f&&!v[x].once||h&&v[x].context!==h)&&w.push(v[x]);w.length?this._events[m]=w.length===1?w[0]:w:l(this,m)}return this},o.prototype.removeAllListeners=function(d){var u;return d?(u=n?n+d:d,this._events[u]&&l(this,u)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o})(uW);var LDe=uW.exports;const UDe=Qt(LDe);var Lk=new UDe,Uk="recharts.syncMouseEvents";function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}function BDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zDe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,hW(s.key),s)}}function VDe(e,t,n){return t&&zDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bk(e,t,n){return t=hW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hW(e){var t=qDe(e,"string");return Rg(t)=="symbol"?t:t+""}function qDe(e,t){if(Rg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Rg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var WDe=function(){function e(){BDe(this,e),Bk(this,"activeIndex",0),Bk(this,"coordinateList",[]),Bk(this,"layout","horizontal")}return VDe(e,[{key:"setDetails",value:function(n){var s,a=n.coordinateList,i=a===void 0?null:a,l=n.container,o=l===void 0?null:l,c=n.layout,d=c===void 0?null:c,u=n.offset,h=u===void 0?null:u,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(s=i??this.coordinateList)!==null&&s!==void 0?s:[],this.container=o??this.container,this.layout=d??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,l=a.y,o=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,h=i+c+d,f=l+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function HDe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],a=e==null?void 0:e[1];if(s&&a&&ze(s)&&ze(a))return!0}return!1}function KDe(e,t,n,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function fW(e){var t=e.cx,n=e.cy,s=e.radius,a=e.startAngle,i=e.endAngle,l=Er(t,n,s,a),o=Er(t,n,s,i);return{points:[l,o],cx:t,cy:n,radius:s,startAngle:a,endAngle:i}}function GDe(e,t,n){var s,a,i,l;if(e==="horizontal")s=t.x,i=s,a=n.top,l=n.top+n.height;else if(e==="vertical")a=t.y,l=a,s=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,h=t.angle,f=Er(o,c,d,h),m=Er(o,c,u,h);s=f.x,a=f.y,i=m.x,l=m.y}else return fW(t);return[{x:s,y:a},{x:i,y:l}]}function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}function wI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function n0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(n),!0).forEach(function(s){YDe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function YDe(e,t,n){return t=XDe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XDe(e){var t=ZDe(e,"string");return Dg(t)=="symbol"?t:t+""}function ZDe(e,t){if(Dg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Dg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QDe(e){var t,n,s=e.element,a=e.tooltipEventType,i=e.isActive,l=e.activeCoordinate,o=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,h=e.layout,f=e.chartName,m=(t=s.props.cursor)!==null&&t!==void 0?t:(n=s.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!s||!m||!i||!l||f!=="ScatterChart"&&a!=="axis")return null;var v,x=lu;if(f==="ScatterChart")v=l,x=iTe;else if(f==="BarChart")v=KDe(h,l,c,u),x=k4;else if(h==="radial"){var w=fW(l),j=w.cx,g=w.cy,b=w.radius,p=w.startAngle,N=w.endAngle;v={cx:j,cy:g,startAngle:p,endAngle:N,innerRadius:b,outerRadius:b},x=iq}else v={points:GDe(h,l,c)},x=lu;var k=n0(n0(n0(n0({stroke:"#ccc",pointerEvents:"none"},c),v),ot(m,!1)),{},{payload:o,payloadIndex:d,className:Ot("recharts-tooltip-cursor",m.className)});return y.isValidElement(m)?y.cloneElement(m,k):y.createElement(x,k)}var JDe=["item"],eMe=["children","className","width","height","style","compact","title","desc"];function fm(e){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fm(e)}function Ch(){return Ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ch.apply(this,arguments)}function NI(e,t){return nMe(e)||rMe(e,t)||pW(e,t)||tMe()}function tMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rMe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function nMe(e){if(Array.isArray(e))return e}function kI(e,t){if(e==null)return{};var n=sMe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function sMe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function aMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iMe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,xW(s.key),s)}}function lMe(e,t,n){return t&&iMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oMe(e,t,n){return t=Oj(t),cMe(e,mW()?Reflect.construct(t,n||[],Oj(e).constructor):t.apply(e,n))}function cMe(e,t){if(t&&(fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dMe(e)}function dMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mW=function(){return!!e})()}function Oj(e){return Oj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Oj(e)}function uMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E_(e,t)}function E_(e,t){return E_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},E_(e,t)}function mm(e){return mMe(e)||fMe(e)||pW(e)||hMe()}function hMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pW(e,t){if(e){if(typeof e=="string")return O_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O_(e,t)}}function fMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mMe(e){if(Array.isArray(e))return O_(e)}function O_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function SI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SI(Object(n),!0).forEach(function(s){xt(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function xt(e,t,n){return t=xW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xW(e){var t=pMe(e,"string");return fm(t)=="symbol"?t:t+""}function pMe(e,t){if(fm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(fm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xMe={xAxis:["bottom","top"],yAxis:["left","right"]},gMe={width:"100%",height:"100%"},gW={x:0,y:0};function s0(e){return e}var vMe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},yMe=function(t,n,s,a){var i=n.find(function(u){return u&&u.index===s});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var l=i.coordinate,o=a.radius;return Se(Se(Se({},a),Er(a.cx,a.cy,o,l)),{},{angle:l,radius:o})}var c=i.coordinate,d=a.angle;return Se(Se(Se({},a),Er(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return gW},rN=function(t,n){var s=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,l=(s??[]).reduce(function(o,c){var d=c.props.data;return d&&d.length?[].concat(mm(o),mm(d)):o},[]);return l.length>0?l:t&&t.length&&ze(a)&&ze(i)?t.slice(a,i+1):[]};function vW(e){return e==="number"?[0,"auto"]:void 0}var R_=function(t,n,s,a){var i=t.graphicalItems,l=t.tooltipAxis,o=rN(n,t);return s<0||!i||!i.length||s>=o.length?null:i.reduce(function(c,d){var u,h=(u=d.props.data)!==null&&u!==void 0?u:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(l.dataKey&&!l.allowDuplicatedCategory){var m=h===void 0?o:h;f=Eb(m,l.dataKey,a)}else f=h&&h[s]||o[s];return f?[].concat(mm(c),[eq(d,f)]):c},[])},CI=function(t,n,s,a){var i=a||{x:t.chartX,y:t.chartY},l=vMe(i,s),o=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=TCe(l,o,d,c);if(u>=0&&d){var h=d[u]&&d[u].value,f=R_(t,n,u,h),m=yMe(s,o,u,i);return{activeTooltipIndex:u,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},bMe=function(t,n){var s=n.axes,a=n.graphicalItems,i=n.axisType,l=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,h=t.children,f=t.stackOffset,m=GV(u,i);return s.reduce(function(v,x){var w,j=x.type.defaultProps!==void 0?Se(Se({},x.type.defaultProps),x.props):x.props,g=j.type,b=j.dataKey,p=j.allowDataOverflow,N=j.allowDuplicatedCategory,k=j.scale,C=j.ticks,_=j.includeHidden,P=j[l];if(v[P])return v;var D=rN(t.data,{graphicalItems:a.filter(function(K){var oe,ge=l in K.props?K.props[l]:(oe=K.type.defaultProps)===null||oe===void 0?void 0:oe[l];return ge===P}),dataStartIndex:c,dataEndIndex:d}),E=D.length,$,A,T;HDe(j.domain,p,g)&&($=HC(j.domain,null,p),m&&(g==="number"||k!=="auto")&&(T=ux(D,b,"category")));var O=vW(g);if(!$||$.length===0){var z,F=(z=j.domain)!==null&&z!==void 0?z:O;if(b){if($=ux(D,b,g),g==="category"&&m){var R=bme($);N&&R?(A=$,$=vj(0,E)):N||($=H$(F,$,x).reduce(function(K,oe){return K.indexOf(oe)>=0?K:[].concat(mm(K),[oe])},[]))}else if(g==="category")N?$=$.filter(function(K){return K!==""&&!Tt(K)}):$=H$(F,$,x).reduce(function(K,oe){return K.indexOf(oe)>=0||oe===""||Tt(oe)?K:[].concat(mm(K),[oe])},[]);else if(g==="number"){var I=MCe(D,a.filter(function(K){var oe,ge,Ne=l in K.props?K.props[l]:(oe=K.type.defaultProps)===null||oe===void 0?void 0:oe[l],Oe="hide"in K.props?K.props.hide:(ge=K.type.defaultProps)===null||ge===void 0?void 0:ge.hide;return Ne===P&&(_||!Oe)}),b,i,u);I&&($=I)}m&&(g==="number"||k!=="auto")&&(T=ux(D,b,"category"))}else m?$=vj(0,E):o&&o[P]&&o[P].hasStack&&g==="number"?$=f==="expand"?[0,1]:JV(o[P].stackGroups,c,d):$=KV(D,a.filter(function(K){var oe=l in K.props?K.props[l]:K.type.defaultProps[l],ge="hide"in K.props?K.props.hide:K.type.defaultProps.hide;return oe===P&&(_||!ge)}),g,u,!0);if(g==="number")$=T_(h,$,P,i,C),F&&($=HC(F,$,p));else if(g==="category"&&F){var Q=F,Y=$.every(function(K){return Q.indexOf(K)>=0});Y&&($=Q)}}return Se(Se({},v),{},xt({},P,Se(Se({},j),{},{axisType:i,domain:$,categoricalDomain:T,duplicateDomain:A,originalDomain:(w=j.domain)!==null&&w!==void 0?w:O,isCategorical:m,layout:u})))},{})},jMe=function(t,n){var s=n.graphicalItems,a=n.Axis,i=n.axisType,l=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,h=t.children,f=rN(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),m=f.length,v=GV(u,i),x=-1;return s.reduce(function(w,j){var g=j.type.defaultProps!==void 0?Se(Se({},j.type.defaultProps),j.props):j.props,b=g[l],p=vW("number");if(!w[b]){x++;var N;return v?N=vj(0,m):o&&o[b]&&o[b].hasStack?(N=JV(o[b].stackGroups,c,d),N=T_(h,N,b,i)):(N=HC(p,KV(f,s.filter(function(k){var C,_,P=l in k.props?k.props[l]:(C=k.type.defaultProps)===null||C===void 0?void 0:C[l],D="hide"in k.props?k.props.hide:(_=k.type.defaultProps)===null||_===void 0?void 0:_.hide;return P===b&&!D}),"number",u),a.defaultProps.allowDataOverflow),N=T_(h,N,b,i)),Se(Se({},w),{},xt({},b,Se(Se({axisType:i},a.defaultProps),{},{hide:!0,orientation:va(xMe,"".concat(i,".").concat(x%2),null),domain:N,originalDomain:p,isCategorical:v,layout:u})))}return w},{})},wMe=function(t,n){var s=n.axisType,a=s===void 0?"xAxis":s,i=n.AxisComp,l=n.graphicalItems,o=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.children,h="".concat(a,"Id"),f=ya(u,i),m={};return f&&f.length?m=bMe(t,{axes:f,graphicalItems:l,axisType:a,axisIdKey:h,stackGroups:o,dataStartIndex:c,dataEndIndex:d}):l&&l.length&&(m=jMe(t,{Axis:i,graphicalItems:l,axisType:a,axisIdKey:h,stackGroups:o,dataStartIndex:c,dataEndIndex:d})),m},NMe=function(t){var n=nc(t),s=fo(n,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:XT(s,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:ij(n,s)}},_I=function(t){var n=t.children,s=t.defaultShowTooltip,a=oa(n,nm),i=0,l=0;return t.data&&t.data.length!==0&&(l=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(l=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!s}},kMe=function(t){return!t||!t.length?!1:t.some(function(n){var s=xo(n&&n.type);return s&&s.indexOf("Bar")>=0})},PI=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},SMe=function(t,n){var s=t.props,a=t.graphicalItems,i=t.xAxisMap,l=i===void 0?{}:i,o=t.yAxisMap,c=o===void 0?{}:o,d=s.width,u=s.height,h=s.children,f=s.margin||{},m=oa(h,nm),v=oa(h,Bh),x=Object.keys(c).reduce(function(N,k){var C=c[k],_=C.orientation;return!C.mirror&&!C.hide?Se(Se({},N),{},xt({},_,N[_]+C.width)):N},{left:f.left||0,right:f.right||0}),w=Object.keys(l).reduce(function(N,k){var C=l[k],_=C.orientation;return!C.mirror&&!C.hide?Se(Se({},N),{},xt({},_,va(N,"".concat(_))+C.height)):N},{top:f.top||0,bottom:f.bottom||0}),j=Se(Se({},w),x),g=j.bottom;m&&(j.bottom+=m.props.height||nm.defaultProps.height),v&&n&&(j=RCe(j,a,s,n));var b=d-j.left-j.right,p=u-j.top-j.bottom;return Se(Se({brushBottom:g},j),{},{width:Math.max(b,0),height:Math.max(p,0)})},CMe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},nN=function(t){var n=t.chartName,s=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,l=t.validateTooltipEventTypes,o=l===void 0?["axis"]:l,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,h=t.defaultProps,f=function(j,g){var b=g.graphicalItems,p=g.stackGroups,N=g.offset,k=g.updateId,C=g.dataStartIndex,_=g.dataEndIndex,P=j.barSize,D=j.layout,E=j.barGap,$=j.barCategoryGap,A=j.maxBarSize,T=PI(D),O=T.numericAxisName,z=T.cateAxisName,F=kMe(b),R=[];return b.forEach(function(I,Q){var Y=rN(j.data,{graphicalItems:[I],dataStartIndex:C,dataEndIndex:_}),K=I.type.defaultProps!==void 0?Se(Se({},I.type.defaultProps),I.props):I.props,oe=K.dataKey,ge=K.maxBarSize,Ne=K["".concat(O,"Id")],Oe=K["".concat(z,"Id")],pe={},Me=c.reduce(function(er,V){var U=g["".concat(V.axisType,"Map")],re=K["".concat(V.axisType,"Id")];U&&U[re]||V.axisType==="zAxis"||Su();var ve=U[re];return Se(Se({},er),{},xt(xt({},V.axisType,ve),"".concat(V.axisType,"Ticks"),fo(ve)))},pe),xe=Me[z],ce=Me["".concat(z,"Ticks")],Ie=p&&p[Ne]&&p[Ne].hasStack&&qCe(I,p[Ne].stackGroups),ie=xo(I.type).indexOf("Bar")>=0,st=ij(xe,ce),G=[],De=F&&ECe({barSize:P,stackGroups:p,totalSize:CMe(Me,z)});if(ie){var me,Be,qe=Tt(ge)?A:ge,Qe=(me=(Be=ij(xe,ce,!0))!==null&&Be!==void 0?Be:qe)!==null&&me!==void 0?me:0;G=OCe({barGap:E,barCategoryGap:$,bandSize:Qe!==st?Qe:st,sizeList:De[Oe],maxBarSize:qe}),Qe!==st&&(G=G.map(function(er){return Se(Se({},er),{},{position:Se(Se({},er.position),{},{offset:er.position.offset-Qe/2})})}))}var Ct=I&&I.type&&I.type.getComposedData;Ct&&R.push({props:Se(Se({},Ct(Se(Se({},Me),{},{displayedData:Y,props:j,dataKey:oe,item:I,bandSize:st,barPosition:G,offset:N,stackedData:Ie,layout:D,dataStartIndex:C,dataEndIndex:_}))),{},xt(xt(xt({key:I.key||"item-".concat(Q)},O,Me[O]),z,Me[z]),"animationId",k)),childIndex:Ome(I,j.children),item:I})}),R},m=function(j,g){var b=j.props,p=j.dataStartIndex,N=j.dataEndIndex,k=j.updateId;if(!UD({props:b}))return null;var C=b.children,_=b.layout,P=b.stackOffset,D=b.data,E=b.reverseStackOrder,$=PI(_),A=$.numericAxisName,T=$.cateAxisName,O=ya(C,s),z=zCe(D,O,"".concat(A,"Id"),"".concat(T,"Id"),P,E),F=c.reduce(function(K,oe){var ge="".concat(oe.axisType,"Map");return Se(Se({},K),{},xt({},ge,wMe(b,Se(Se({},oe),{},{graphicalItems:O,stackGroups:oe.axisType===A&&z,dataStartIndex:p,dataEndIndex:N}))))},{}),R=SMe(Se(Se({},F),{},{props:b,graphicalItems:O}),g==null?void 0:g.legendBBox);Object.keys(F).forEach(function(K){F[K]=u(b,F[K],R,K.replace("Map",""),n)});var I=F["".concat(T,"Map")],Q=NMe(I),Y=f(b,Se(Se({},F),{},{dataStartIndex:p,dataEndIndex:N,updateId:k,graphicalItems:O,stackGroups:z,offset:R}));return Se(Se({formattedGraphicalItems:Y,graphicalItems:O,offset:R,stackGroups:z},Q),F)},v=function(w){function j(g){var b,p,N;return aMe(this,j),N=oMe(this,j,[g]),xt(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),xt(N,"accessibilityManager",new WDe),xt(N,"handleLegendBBoxUpdate",function(k){if(k){var C=N.state,_=C.dataStartIndex,P=C.dataEndIndex,D=C.updateId;N.setState(Se({legendBBox:k},m({props:N.props,dataStartIndex:_,dataEndIndex:P,updateId:D},Se(Se({},N.state),{},{legendBBox:k}))))}}),xt(N,"handleReceiveSyncEvent",function(k,C,_){if(N.props.syncId===k){if(_===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(C)}}),xt(N,"handleBrushChange",function(k){var C=k.startIndex,_=k.endIndex;if(C!==N.state.dataStartIndex||_!==N.state.dataEndIndex){var P=N.state.updateId;N.setState(function(){return Se({dataStartIndex:C,dataEndIndex:_},m({props:N.props,dataStartIndex:C,dataEndIndex:_,updateId:P},N.state))}),N.triggerSyncEvent({dataStartIndex:C,dataEndIndex:_})}}),xt(N,"handleMouseEnter",function(k){var C=N.getMouseInfo(k);if(C){var _=Se(Se({},C),{},{isTooltipActive:!0});N.setState(_),N.triggerSyncEvent(_);var P=N.props.onMouseEnter;gt(P)&&P(_,k)}}),xt(N,"triggeredAfterMouseMove",function(k){var C=N.getMouseInfo(k),_=C?Se(Se({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(_),N.triggerSyncEvent(_);var P=N.props.onMouseMove;gt(P)&&P(_,k)}),xt(N,"handleItemMouseEnter",function(k){N.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),xt(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),xt(N,"handleMouseMove",function(k){k.persist(),N.throttleTriggeredAfterMouseMove(k)}),xt(N,"handleMouseLeave",function(k){N.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};N.setState(C),N.triggerSyncEvent(C);var _=N.props.onMouseLeave;gt(_)&&_(C,k)}),xt(N,"handleOuterEvent",function(k){var C=Eme(k),_=va(N.props,"".concat(C));if(C&&gt(_)){var P,D;/.*touch.*/i.test(C)?D=N.getMouseInfo(k.changedTouches[0]):D=N.getMouseInfo(k),_((P=D)!==null&&P!==void 0?P:{},k)}}),xt(N,"handleClick",function(k){var C=N.getMouseInfo(k);if(C){var _=Se(Se({},C),{},{isTooltipActive:!0});N.setState(_),N.triggerSyncEvent(_);var P=N.props.onClick;gt(P)&&P(_,k)}}),xt(N,"handleMouseDown",function(k){var C=N.props.onMouseDown;if(gt(C)){var _=N.getMouseInfo(k);C(_,k)}}),xt(N,"handleMouseUp",function(k){var C=N.props.onMouseUp;if(gt(C)){var _=N.getMouseInfo(k);C(_,k)}}),xt(N,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),xt(N,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&N.handleMouseDown(k.changedTouches[0])}),xt(N,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&N.handleMouseUp(k.changedTouches[0])}),xt(N,"handleDoubleClick",function(k){var C=N.props.onDoubleClick;if(gt(C)){var _=N.getMouseInfo(k);C(_,k)}}),xt(N,"handleContextMenu",function(k){var C=N.props.onContextMenu;if(gt(C)){var _=N.getMouseInfo(k);C(_,k)}}),xt(N,"triggerSyncEvent",function(k){N.props.syncId!==void 0&&Lk.emit(Uk,N.props.syncId,k,N.eventEmitterSymbol)}),xt(N,"applySyncEvent",function(k){var C=N.props,_=C.layout,P=C.syncMethod,D=N.state.updateId,E=k.dataStartIndex,$=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)N.setState(Se({dataStartIndex:E,dataEndIndex:$},m({props:N.props,dataStartIndex:E,dataEndIndex:$,updateId:D},N.state)));else if(k.activeTooltipIndex!==void 0){var A=k.chartX,T=k.chartY,O=k.activeTooltipIndex,z=N.state,F=z.offset,R=z.tooltipTicks;if(!F)return;if(typeof P=="function")O=P(R,k);else if(P==="value"){O=-1;for(var I=0;I<R.length;I++)if(R[I].value===k.activeLabel){O=I;break}}var Q=Se(Se({},F),{},{x:F.left,y:F.top}),Y=Math.min(A,Q.x+Q.width),K=Math.min(T,Q.y+Q.height),oe=R[O]&&R[O].value,ge=R_(N.state,N.props.data,O),Ne=R[O]?{x:_==="horizontal"?R[O].coordinate:Y,y:_==="horizontal"?K:R[O].coordinate}:gW;N.setState(Se(Se({},k),{},{activeLabel:oe,activeCoordinate:Ne,activePayload:ge,activeTooltipIndex:O}))}else N.setState(k)}),xt(N,"renderCursor",function(k){var C,_=N.state,P=_.isTooltipActive,D=_.activeCoordinate,E=_.activePayload,$=_.offset,A=_.activeTooltipIndex,T=_.tooltipAxisBandSize,O=N.getTooltipEventType(),z=(C=k.props.active)!==null&&C!==void 0?C:P,F=N.props.layout,R=k.key||"_recharts-cursor";return Z.createElement(QDe,{key:R,activeCoordinate:D,activePayload:E,activeTooltipIndex:A,chartName:n,element:k,isActive:z,layout:F,offset:$,tooltipAxisBandSize:T,tooltipEventType:O})}),xt(N,"renderPolarAxis",function(k,C,_){var P=va(k,"type.axisType"),D=va(N.state,"".concat(P,"Map")),E=k.type.defaultProps,$=E!==void 0?Se(Se({},E),k.props):k.props,A=D&&D[$["".concat(P,"Id")]];return y.cloneElement(k,Se(Se({},A),{},{className:Ot(P,A.className),key:k.key||"".concat(C,"-").concat(_),ticks:fo(A,!0)}))}),xt(N,"renderPolarGrid",function(k){var C=k.props,_=C.radialLines,P=C.polarAngles,D=C.polarRadius,E=N.state,$=E.radiusAxisMap,A=E.angleAxisMap,T=nc($),O=nc(A),z=O.cx,F=O.cy,R=O.innerRadius,I=O.outerRadius;return y.cloneElement(k,{polarAngles:Array.isArray(P)?P:fo(O,!0).map(function(Q){return Q.coordinate}),polarRadius:Array.isArray(D)?D:fo(T,!0).map(function(Q){return Q.coordinate}),cx:z,cy:F,innerRadius:R,outerRadius:I,key:k.key||"polar-grid",radialLines:_})}),xt(N,"renderLegend",function(){var k=N.state.formattedGraphicalItems,C=N.props,_=C.children,P=C.width,D=C.height,E=N.props.margin||{},$=P-(E.left||0)-(E.right||0),A=WV({children:_,formattedGraphicalItems:k,legendWidth:$,legendContent:d});if(!A)return null;var T=A.item,O=kI(A,JDe);return y.cloneElement(T,Se(Se({},O),{},{chartWidth:P,chartHeight:D,margin:E,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),xt(N,"renderTooltip",function(){var k,C=N.props,_=C.children,P=C.accessibilityLayer,D=oa(_,tn);if(!D)return null;var E=N.state,$=E.isTooltipActive,A=E.activeCoordinate,T=E.activePayload,O=E.activeLabel,z=E.offset,F=(k=D.props.active)!==null&&k!==void 0?k:$;return y.cloneElement(D,{viewBox:Se(Se({},z),{},{x:z.left,y:z.top}),active:F,label:O,payload:F?T:[],coordinate:A,accessibilityLayer:P})}),xt(N,"renderBrush",function(k){var C=N.props,_=C.margin,P=C.data,D=N.state,E=D.offset,$=D.dataStartIndex,A=D.dataEndIndex,T=D.updateId;return y.cloneElement(k,{key:k.key||"_recharts-brush",onChange:Jy(N.handleBrushChange,k.props.onChange),data:P,x:ze(k.props.x)?k.props.x:E.left,y:ze(k.props.y)?k.props.y:E.top+E.height+E.brushBottom-(_.bottom||0),width:ze(k.props.width)?k.props.width:E.width,startIndex:$,endIndex:A,updateId:"brush-".concat(T)})}),xt(N,"renderReferenceElement",function(k,C,_){if(!k)return null;var P=N,D=P.clipPathId,E=N.state,$=E.xAxisMap,A=E.yAxisMap,T=E.offset,O=k.type.defaultProps||{},z=k.props,F=z.xAxisId,R=F===void 0?O.xAxisId:F,I=z.yAxisId,Q=I===void 0?O.yAxisId:I;return y.cloneElement(k,{key:k.key||"".concat(C,"-").concat(_),xAxis:$[R],yAxis:A[Q],viewBox:{x:T.left,y:T.top,width:T.width,height:T.height},clipPathId:D})}),xt(N,"renderActivePoints",function(k){var C=k.item,_=k.activePoint,P=k.basePoint,D=k.childIndex,E=k.isRange,$=[],A=C.props.key,T=C.item.type.defaultProps!==void 0?Se(Se({},C.item.type.defaultProps),C.item.props):C.item.props,O=T.activeDot,z=T.dataKey,F=Se(Se({index:D,dataKey:z,cx:_.x,cy:_.y,r:4,fill:N4(C.item),strokeWidth:2,stroke:"#fff",payload:_.payload,value:_.value},ot(O,!1)),Ob(O));return $.push(j.renderActiveDot(O,F,"".concat(A,"-activePoint-").concat(D))),P?$.push(j.renderActiveDot(O,Se(Se({},F),{},{cx:P.x,cy:P.y}),"".concat(A,"-basePoint-").concat(D))):E&&$.push(null),$}),xt(N,"renderGraphicChild",function(k,C,_){var P=N.filterFormatItem(k,C,_);if(!P)return null;var D=N.getTooltipEventType(),E=N.state,$=E.isTooltipActive,A=E.tooltipAxis,T=E.activeTooltipIndex,O=E.activeLabel,z=N.props.children,F=oa(z,tn),R=P.props,I=R.points,Q=R.isRange,Y=R.baseLine,K=P.item.type.defaultProps!==void 0?Se(Se({},P.item.type.defaultProps),P.item.props):P.item.props,oe=K.activeDot,ge=K.hide,Ne=K.activeBar,Oe=K.activeShape,pe=!!(!ge&&$&&F&&(oe||Ne||Oe)),Me={};D!=="axis"&&F&&F.props.trigger==="click"?Me={onClick:Jy(N.handleItemMouseEnter,k.props.onClick)}:D!=="axis"&&(Me={onMouseLeave:Jy(N.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:Jy(N.handleItemMouseEnter,k.props.onMouseEnter)});var xe=y.cloneElement(k,Se(Se({},P.props),Me));function ce(V){return typeof A.dataKey=="function"?A.dataKey(V.payload):null}if(pe)if(T>=0){var Ie,ie;if(A.dataKey&&!A.allowDuplicatedCategory){var st=typeof A.dataKey=="function"?ce:"payload.".concat(A.dataKey.toString());Ie=Eb(I,st,O),ie=Q&&Y&&Eb(Y,st,O)}else Ie=I==null?void 0:I[T],ie=Q&&Y&&Y[T];if(Oe||Ne){var G=k.props.activeIndex!==void 0?k.props.activeIndex:T;return[y.cloneElement(k,Se(Se(Se({},P.props),Me),{},{activeIndex:G})),null,null]}if(!Tt(Ie))return[xe].concat(mm(N.renderActivePoints({item:P,activePoint:Ie,basePoint:ie,childIndex:T,isRange:Q})))}else{var De,me=(De=N.getItemByXY(N.state.activeCoordinate))!==null&&De!==void 0?De:{graphicalItem:xe},Be=me.graphicalItem,qe=Be.item,Qe=qe===void 0?k:qe,Ct=Be.childIndex,er=Se(Se(Se({},P.props),Me),{},{activeIndex:Ct});return[y.cloneElement(Qe,er),null,null]}return Q?[xe,null,null]:[xe,null]}),xt(N,"renderCustomized",function(k,C,_){return y.cloneElement(k,Se(Se({key:"recharts-customized-".concat(_)},N.props),N.state))}),xt(N,"renderMap",{CartesianGrid:{handler:s0,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:s0},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:s0},YAxis:{handler:s0},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((b=g.id)!==null&&b!==void 0?b:Uu("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=QT(N.triggeredAfterMouseMove,(p=g.throttleDelay)!==null&&p!==void 0?p:1e3/60),N.state={},N}return uMe(j,w),lMe(j,[{key:"componentDidMount",value:function(){var b,p;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(p=this.props.margin.top)!==null&&p!==void 0?p:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,p=b.children,N=b.data,k=b.height,C=b.layout,_=oa(p,tn);if(_){var P=_.props.defaultIndex;if(!(typeof P!="number"||P<0||P>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[P]&&this.state.tooltipTicks[P].value,E=R_(this.state,N,P,D),$=this.state.tooltipTicks[P].coordinate,A=(this.state.offset.top+k)/2,T=C==="horizontal",O=T?{x:$,y:A}:{y:$,x:A},z=this.state.formattedGraphicalItems.find(function(R){var I=R.item;return I.type.name==="Scatter"});z&&(O=Se(Se({},O),z.props.points[P].tooltipPosition),E=z.props.points[P].tooltipPayload);var F={activeTooltipIndex:P,isTooltipActive:!0,activeLabel:D,activePayload:E,activeCoordinate:O};this.setState(F),this.renderCursor(_),this.accessibilityManager.setIndex(P)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,p){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==p.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var N,k;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(b){lC([oa(b.children,tn)],[oa(this.props.children,tn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=oa(this.props.children,tn);if(b&&typeof b.props.shared=="boolean"){var p=b.props.shared?"axis":"item";return o.indexOf(p)>=0?p:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var p=this.container,N=p.getBoundingClientRect(),k=sNe(N),C={chartX:Math.round(b.pageX-k.left),chartY:Math.round(b.pageY-k.top)},_=N.width/p.offsetWidth||1,P=this.inRange(C.chartX,C.chartY,_);if(!P)return null;var D=this.state,E=D.xAxisMap,$=D.yAxisMap,A=this.getTooltipEventType(),T=CI(this.state,this.props.data,this.props.layout,P);if(A!=="axis"&&E&&$){var O=nc(E).scale,z=nc($).scale,F=O&&O.invert?O.invert(C.chartX):null,R=z&&z.invert?z.invert(C.chartY):null;return Se(Se({},C),{},{xValue:F,yValue:R},T)}return T?Se(Se({},C),T):null}},{key:"inRange",value:function(b,p){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,C=b/N,_=p/N;if(k==="horizontal"||k==="vertical"){var P=this.state.offset,D=C>=P.left&&C<=P.left+P.width&&_>=P.top&&_<=P.top+P.height;return D?{x:C,y:_}:null}var E=this.state,$=E.angleAxisMap,A=E.radiusAxisMap;if($&&A){var T=nc($);return Y$({x:C,y:_},T)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,p=this.getTooltipEventType(),N=oa(b,tn),k={};N&&p==="axis"&&(N.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=Ob(this.props,this.handleOuterEvent);return Se(Se({},C),k)}},{key:"addListener",value:function(){Lk.on(Uk,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Lk.removeListener(Uk,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,p,N){for(var k=this.state.formattedGraphicalItems,C=0,_=k.length;C<_;C++){var P=k[C];if(P.item===b||P.props.key===b.key||p===xo(P.item.type)&&N===P.childIndex)return P}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,p=this.state.offset,N=p.left,k=p.top,C=p.height,_=p.width;return Z.createElement("defs",null,Z.createElement("clipPath",{id:b},Z.createElement("rect",{x:N,y:k,height:C,width:_})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(p,N){var k=NI(N,2),C=k[0],_=k[1];return Se(Se({},p),{},xt({},C,_.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(p,N){var k=NI(N,2),C=k[0],_=k[1];return Se(Se({},p),{},xt({},C,_.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var p;return(p=this.state.xAxisMap)===null||p===void 0||(p=p[b])===null||p===void 0?void 0:p.scale}},{key:"getYScaleByAxisId",value:function(b){var p;return(p=this.state.yAxisMap)===null||p===void 0||(p=p[b])===null||p===void 0?void 0:p.scale}},{key:"getItemByXY",value:function(b){var p=this.state,N=p.formattedGraphicalItems,k=p.activeItem;if(N&&N.length)for(var C=0,_=N.length;C<_;C++){var P=N[C],D=P.props,E=P.item,$=E.type.defaultProps!==void 0?Se(Se({},E.type.defaultProps),E.props):E.props,A=xo(E.type);if(A==="Bar"){var T=(D.data||[]).find(function(R){return UAe(b,R)});if(T)return{graphicalItem:P,payload:T}}else if(A==="RadialBar"){var O=(D.data||[]).find(function(R){return Y$(b,R)});if(O)return{graphicalItem:P,payload:O}}else if(Y1(P,k)||X1(P,k)||Pg(P,k)){var z=P4e({graphicalItem:P,activeTooltipItem:k,itemData:$.data}),F=$.activeIndex===void 0?z:$.activeIndex;return{graphicalItem:Se(Se({},P),{},{childIndex:F}),payload:Pg(P,k)?$.data[z]:P.props.data[z]}}}return null}},{key:"render",value:function(){var b=this;if(!UD(this))return null;var p=this.props,N=p.children,k=p.className,C=p.width,_=p.height,P=p.style,D=p.compact,E=p.title,$=p.desc,A=kI(p,eMe),T=ot(A,!1);if(D)return Z.createElement(nI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Z.createElement(cC,Ch({},T,{width:C,height:_,title:E,desc:$}),this.renderClipPath(),zD(N,this.renderMap)));if(this.props.accessibilityLayer){var O,z;T.tabIndex=(O=this.props.tabIndex)!==null&&O!==void 0?O:0,T.role=(z=this.props.role)!==null&&z!==void 0?z:"application",T.onKeyDown=function(R){b.accessibilityManager.keyboardEvent(R)},T.onFocus=function(){b.accessibilityManager.focus()}}var F=this.parseEventsOfWrapper();return Z.createElement(nI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Z.createElement("div",Ch({className:Ot("recharts-wrapper",k),style:Se({position:"relative",cursor:"default",width:C,height:_},P)},F,{ref:function(I){b.container=I}}),Z.createElement(cC,Ch({},T,{width:C,height:_,title:E,desc:$,style:gMe}),this.renderClipPath(),zD(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(y.Component);xt(v,"displayName",n),xt(v,"defaultProps",Se({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),xt(v,"getDerivedStateFromProps",function(w,j){var g=w.dataKey,b=w.data,p=w.children,N=w.width,k=w.height,C=w.layout,_=w.stackOffset,P=w.margin,D=j.dataStartIndex,E=j.dataEndIndex;if(j.updateId===void 0){var $=_I(w);return Se(Se(Se({},$),{},{updateId:0},m(Se(Se({props:w},$),{},{updateId:0}),j)),{},{prevDataKey:g,prevData:b,prevWidth:N,prevHeight:k,prevLayout:C,prevStackOffset:_,prevMargin:P,prevChildren:p})}if(g!==j.prevDataKey||b!==j.prevData||N!==j.prevWidth||k!==j.prevHeight||C!==j.prevLayout||_!==j.prevStackOffset||!Uh(P,j.prevMargin)){var A=_I(w),T={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},O=Se(Se({},CI(j,b,C)),{},{updateId:j.updateId+1}),z=Se(Se(Se({},A),T),O);return Se(Se(Se({},z),m(Se({props:w},z),j)),{},{prevDataKey:g,prevData:b,prevWidth:N,prevHeight:k,prevLayout:C,prevStackOffset:_,prevMargin:P,prevChildren:p})}if(!lC(p,j.prevChildren)){var F,R,I,Q,Y=oa(p,nm),K=Y&&(F=(R=Y.props)===null||R===void 0?void 0:R.startIndex)!==null&&F!==void 0?F:D,oe=Y&&(I=(Q=Y.props)===null||Q===void 0?void 0:Q.endIndex)!==null&&I!==void 0?I:E,ge=K!==D||oe!==E,Ne=!Tt(b),Oe=Ne&&!ge?j.updateId:j.updateId+1;return Se(Se({updateId:Oe},m(Se(Se({props:w},j),{},{updateId:Oe,dataStartIndex:K,dataEndIndex:oe}),j)),{},{prevChildren:p,dataStartIndex:K,dataEndIndex:oe})}return null}),xt(v,"renderActiveDot",function(w,j,g){var b;return y.isValidElement(w)?b=y.cloneElement(w,j):gt(w)?b=w(j):b=Z.createElement(ty,j),Z.createElement(Gt,{className:"recharts-active-dot",key:g},b)});var x=y.forwardRef(function(j,g){return Z.createElement(v,Ch({},j,{ref:g}))});return x.displayName=v.displayName,x},ry=nN({chartName:"LineChart",GraphicalChild:ls,axisComponents:[{axisType:"xAxis",AxisComp:Cs},{axisType:"yAxis",AxisComp:_s}],formatAxisMap:S4}),D_=nN({chartName:"BarChart",GraphicalChild:To,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Cs},{axisType:"yAxis",AxisComp:_s}],formatAxisMap:S4}),M4=nN({chartName:"PieChart",GraphicalChild:Hi,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:G1},{axisType:"radiusAxis",AxisComp:H1}],formatAxisMap:e_e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),yW=nN({chartName:"AreaChart",GraphicalChild:Ai,axisComponents:[{axisType:"xAxis",AxisComp:Cs},{axisType:"yAxis",AxisComp:_s}],formatAxisMap:S4});function Ll(){const{i18n:e,t}=_r();return{language:e.language||"ru",setLanguage:n=>e.changeLanguage(n),t:n=>t(n)}}const _Me=[{labelKey:"sidebar.dashboard",href:"/admin",icon:Gre,roles:["super_admin"]},{labelKey:"sidebar.users",href:"/admin/users",icon:ar,roles:["super_admin"],badge:3},{labelKey:"sidebar.userAnalytics",href:"/admin/user-analytics",icon:cr,roles:["super_admin"]},{labelKey:"sidebar.roles",href:"/admin/roles",icon:Lt,roles:["super_admin"]},{labelKey:"sidebar.offers",href:"/admin/OffersManagement",icon:Kt,roles:["super_admin","advertiser"]},{labelKey:"sidebar.finances",href:"/admin/finances",icon:Rt,roles:["super_admin","advertiser"]},{labelKey:"sidebar.antifraud",href:"/admin/fraud",icon:Lt,roles:["super_admin"]},{labelKey:"sidebar.postbacks",href:"/super-admin/postbacks",icon:nu,roles:["super_admin","advertiser","affiliate"]},{labelKey:"sidebar.blacklist",href:"/admin/blacklist",icon:qx,roles:["super_admin"]},{labelKey:"sidebar.auditLogs",href:"/admin/audit-logs",icon:Hre,roles:["super_admin"]},{labelKey:"sidebar.systemSettings",href:"/admin/system-settings",icon:fr,roles:["super_admin"]},{labelKey:"sidebar.analytics",href:"/super-admin/analytics",icon:cr,roles:["super_admin","advertiser","affiliate"]},{labelKey:"sidebar.support",href:"/admin/support",icon:Wre,roles:["super_admin","advertiser","affiliate"]}];function xn({className:e}){const{user:t}=Jt(),{t:n}=Ll(),[s]=hs(),{collapsed:a,toggleCollapsed:i}=Os();if(!t)return null;const l=_Me.filter(c=>c.roles.includes(t.role)),o=()=>{switch(t.role){case"super_admin":return"Super Admin";case"advertiser":return"Advertiser";case"affiliate":return"Affiliate";default:return t.role}};return r.jsx("aside",{className:Ae("fixed inset-y-0 left-0 z-[60] bg-white dark:bg-gray-800 border-r border-slate-200 dark:border-gray-600 transform transition-all duration-300 lg:translate-x-0",a?"w-16":"w-64",e),children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:Ae("flex items-center border-b border-slate-200 dark:border-gray-600",a?"px-4 py-4 justify-center":"px-6 py-4 justify-between"),children:[!a&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(Kt,{className:"text-white w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"AffiliateHub"}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:o()})]})]}),r.jsx(M,{variant:"ghost",size:"sm",onClick:i,className:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300","data-testid":"button-toggle-sidebar",children:a?r.jsx(Qc,{className:"w-4 h-4"}):r.jsx(Ri,{className:"w-4 h-4"})})]}),r.jsx("nav",{className:"flex-1 px-3 py-6 space-y-1 overflow-y-auto",children:l.map(c=>{const d=c.icon;return r.jsxs(cl,{href:c.href,className:Ae("flex items-center px-3 py-2 text-sm font-medium rounded-lg group transition-colors relative",s===c.href?"text-white bg-blue-600 dark:bg-blue-700":"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-gray-700",a?"justify-center":""),"data-testid":`nav-${c.labelKey.split(".")[1]}`,title:a?n(c.labelKey):void 0,children:[r.jsx(d,{className:Ae("w-5 h-5",a?"":"mr-3",s===c.href?"text-white":"text-slate-400 dark:text-slate-500")}),!a&&r.jsxs(r.Fragment,{children:[n(c.labelKey),c.badge&&r.jsx("span",{className:"ml-auto bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-300 text-xs font-medium px-2 py-1 rounded-full",children:c.badge})]}),a&&c.badge&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-medium w-5 h-5 rounded-full flex items-center justify-center",children:c.badge})]},c.href)})}),r.jsx("div",{className:"p-3 border-t border-slate-200 dark:border-gray-600",children:r.jsxs("div",{className:Ae("flex items-center",a?"justify-center":"justify-between"),children:[!a&&r.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Тема"}),r.jsx(Hv,{})]})})]})})}function gn({title:e,subtitle:t,children:n}){const{language:s,setLanguage:a,t:i}=Ll(),{user:l,logout:o}=Jt(),c=()=>l!=null&&l.firstName&&(l!=null&&l.lastName)?`${l.firstName} ${l.lastName}`:(l==null?void 0:l.username)||"User",d=()=>{var u;return l!=null&&l.firstName&&(l!=null&&l.lastName)?`${l.firstName[0]}${l.lastName[0]}`.toUpperCase():((u=l==null?void 0:l.username)==null?void 0:u.substring(0,2).toUpperCase())||"U"};return r.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-slate-200 dark:border-gray-600 px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(M,{variant:"ghost",size:"sm",className:"lg:hidden text-slate-600",children:r.jsx("i",{className:"fas fa-bars w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:i(e)}),t&&r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:i(t)})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Hv,{}),r.jsxs(he,{value:s,onValueChange:a,children:[r.jsx(de,{className:"w-[120px] text-sm border-0 bg-transparent","data-testid":"language-switcher",children:r.jsx(fe,{placeholder:i("language.select")})}),r.jsxs(ue,{children:[r.jsxs(S,{value:"en",children:["🇺🇸 ",i("language.english")]}),r.jsxs(S,{value:"ru",children:["🇷🇺 ",i("language.russian")]})]})]}),r.jsxs(M,{variant:"ghost",size:"sm",className:"relative text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-slate-100","data-testid":"button-notifications",children:[r.jsx(In,{className:"w-5 h-5"}),r.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"})]}),r.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm text-green-700","data-testid":"live-traffic",children:"247 online"})]}),r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsxs(M,{variant:"ghost",className:"flex items-center space-x-3 hover:bg-slate-100 p-2 rounded-lg","data-testid":"user-profile-menu",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-medium",children:d()})}),r.jsxs("div",{className:"text-left hidden sm:block",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:c()}),r.jsx("p",{className:"text-xs text-slate-500",children:l==null?void 0:l.email})]}),r.jsx(fr,{className:"w-4 h-4 text-slate-400"})]})}),r.jsxs(Ps,{className:"w-56",align:"end",forceMount:!0,children:[r.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:r.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[r.jsx("p",{className:"font-medium",children:c()}),r.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:l==null?void 0:l.email})]})}),r.jsx(zf,{}),r.jsxs(Ft,{className:"cursor-pointer","data-testid":"menu-profile",children:[r.jsx(Ro,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:i("common.profile","Профиль")})]}),r.jsxs(Ft,{className:"cursor-pointer","data-testid":"menu-settings",children:[r.jsx(fr,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:i("common.settings","Настройки")})]}),r.jsxs(Ft,{className:"cursor-pointer","data-testid":"menu-help",children:[r.jsx(Iv,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:i("navigation.help")})]}),r.jsx(zf,{}),r.jsxs(Ft,{className:"cursor-pointer",onClick:o,"data-testid":"menu-logout",children:[r.jsx(Fv,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:i("common.logout","Выход")})]})]})]}),n]})]})})}const AI=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function TI(){var w,j,g,b,p,N,k,C,_;const{toast:e}=lt();Jt();const{t}=_r(),{isCollapsed:n}=Os(),s=Et(),[a,i]=y.useState("7d"),[l,o]=y.useState("all"),{data:c}=$e({queryKey:["/api/admin/dashboard-metrics",a]}),{data:d=[]}=$e({queryKey:["/api/admin/dashboard-chart",a]}),{data:u=[]}=$e({queryKey:["/api/admin/recent-activities"]}),{data:h=[]}=$e({queryKey:["/api/admin/geo-distribution",a]}),f=P=>{switch(P){case"registration":return r.jsx(Si,{className:"w-4 h-4"});case"offer":return r.jsx(Kt,{className:"w-4 h-4"});case"fraud":return r.jsx(Lt,{className:"w-4 h-4"});case"ticket":return r.jsx(Qn,{className:"w-4 h-4"});default:return r.jsx(ln,{className:"w-4 h-4"})}},m=P=>{switch(P){case"registration":return"text-green-600";case"offer":return"text-blue-600";case"fraud":return"text-red-600";case"ticket":return"text-yellow-600";default:return"text-gray-600"}},v=P=>{switch(P){case"high":return r.jsx(le,{className:"bg-red-100 text-red-800",children:"Высокий"});case"medium":return r.jsx(le,{className:"bg-yellow-100 text-yellow-800",children:"Средний"});case"low":return r.jsx(le,{className:"bg-green-100 text-green-800",children:"Низкий"});default:return r.jsx(le,{children:"Обычный"})}},x=()=>{s.invalidateQueries({queryKey:["/api/admin/dashboard-metrics"]}),s.invalidateQueries({queryKey:["/api/admin/dashboard-chart"]}),s.invalidateQueries({queryKey:["/api/admin/recent-activities"]}),s.invalidateQueries({queryKey:["/api/admin/geo-distribution"]}),e({title:t("dashboard.data.updated"),description:t("dashboard.data.updateDesc")})};return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${n?"ml-16":"ml-64"}`,children:[r.jsx(gn,{title:"Дашборд владельца"}),r.jsxs("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 dark:bg-gray-900 p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["🧭 ",t("dashboard.title")]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t("dashboard.subtitle")})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs(M,{variant:"outline",onClick:x,"data-testid":"button-refresh",title:t("dashboard.refresh"),children:[r.jsx(Vt,{className:"w-4 h-4 mr-2"}),t("dashboard.refresh")]}),r.jsxs(he,{value:a,onValueChange:i,children:[r.jsx(de,{className:"w-40",title:"Период",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"1d",children:t("dashboard.period.today")}),r.jsx(S,{value:"7d",children:t("dashboard.period.7days")}),r.jsx(S,{value:"30d",children:t("dashboard.period.30days")}),r.jsx(S,{value:"90d",children:t("dashboard.period.90days")})]})]}),r.jsxs(he,{value:l,onValueChange:o,children:[r.jsx(de,{className:"w-32",title:"География",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:t("dashboard.geo.all")}),r.jsx(S,{value:"RU",children:t("dashboard.geo.russia")}),r.jsx(S,{value:"US",children:t("dashboard.geo.usa")}),r.jsx(S,{value:"EU",children:t("dashboard.geo.europe")})]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6 mb-8",children:[r.jsx(W,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:r.jsx(ar,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t("dashboard.metrics.activePartners")}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((w=c==null?void 0:c.activePartners)==null?void 0:w.toLocaleString())||"0"}),(c==null?void 0:c.partnersGrowth)&&r.jsxs("div",{className:"flex items-center mt-1",children:[c.partnersGrowth>0?r.jsx(Ma,{className:"w-4 h-4 text-green-500"}):r.jsx(lo,{className:"w-4 h-4 text-red-500"}),r.jsxs("span",{className:`text-sm ${c.partnersGrowth>0?"text-green-600":"text-red-600"}`,children:[c.partnersGrowth>0?"+":"",c.partnersGrowth.toFixed(1),"%"]})]})]})]})})}),r.jsx(W,{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:r.jsx(Kt,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t("dashboard.metrics.activeOffers")}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((j=c==null?void 0:c.activeOffers)==null?void 0:j.toLocaleString())||"0"}),(c==null?void 0:c.offersGrowth)&&r.jsxs("div",{className:"flex items-center mt-1",children:[c.offersGrowth>0?r.jsx(Ma,{className:"w-4 h-4 text-green-500"}):r.jsx(lo,{className:"w-4 h-4 text-red-500"}),r.jsxs("span",{className:`text-sm ${c.offersGrowth>0?"text-green-600":"text-red-600"}`,children:[c.offersGrowth>0?"+":"",c.offersGrowth.toFixed(1),"%"]})]})]})]})})}),r.jsx(W,{className:"bg-gradient-to-br from-purple-50 to-violet-50 dark:from-purple-900/20 dark:to-violet-900/20",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:r.jsx(Jc,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t("dashboard.metrics.todayClicks")}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((g=c==null?void 0:c.todayClicks)==null?void 0:g.toLocaleString())||"0"}),(c==null?void 0:c.clicksGrowth)&&r.jsxs("div",{className:"flex items-center mt-1",children:[c.clicksGrowth>0?r.jsx(Ma,{className:"w-4 h-4 text-green-500"}):r.jsx(lo,{className:"w-4 h-4 text-red-500"}),r.jsxs("span",{className:`text-sm ${c.clicksGrowth>0?"text-green-600":"text-red-600"}`,children:[c.clicksGrowth>0?"+":"",c.clicksGrowth.toFixed(1),"%"]})]})]})]})})}),r.jsx(W,{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:r.jsx(Cr,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t("dashboard.metrics.conversions")}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((b=c==null?void 0:c.conversions)==null?void 0:b.toLocaleString())||"0"}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx(Ma,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{className:"text-sm text-green-600",children:"+8%"})]})]})]})})}),r.jsx(W,{className:"bg-gradient-to-br from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-yellow-500 rounded-lg",children:r.jsx(Rt,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t("dashboard.metrics.platformRevenue")}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",((p=c==null?void 0:c.platformRevenue)==null?void 0:p.toLocaleString())||"0"]}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx(Ma,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{className:"text-sm text-green-600",children:"+15%"})]})]})]})})}),r.jsx(W,{className:"bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-red-500 rounded-lg",children:r.jsx(qa,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t("dashboard.metrics.fraudRate")}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[((N=c==null?void 0:c.fraudRate)==null?void 0:N.toFixed(1))||"0.0","%"]}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx(lo,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{className:"text-sm text-green-600",children:"-2%"})]})]})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx(W,{className:"bg-gradient-to-br from-cyan-50 to-cyan-100 dark:from-cyan-900/20 dark:to-cyan-800/20 border-cyan-200 dark:border-cyan-700",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-cyan-700 dark:text-cyan-300",children:"CR (Conversion Rate)"}),r.jsxs("p",{className:"text-3xl font-bold text-cyan-900 dark:text-cyan-100",children:[((k=c==null?void 0:c.cr)==null?void 0:k.toFixed(2))||"0.00","%"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(su,{value:(c==null?void 0:c.cr)||31.3,className:"w-16"}),r.jsx("p",{className:"text-sm text-cyan-600 dark:text-cyan-400 mt-1",children:"Целевой: 3.5%"})]})]})})}),r.jsx(W,{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 border-emerald-200 dark:border-emerald-700",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-emerald-700 dark:text-emerald-300",children:"EPC (Earnings Per Click)"}),r.jsxs("p",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:["$",((C=c==null?void 0:c.epc)==null?void 0:C.toFixed(2))||"2.97"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(su,{value:((c==null?void 0:c.epc)||2.97)/5*100,className:"w-16"}),r.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 mt-1",children:"Целевой: $2.5"})]})]})})}),r.jsx(W,{className:"bg-gradient-to-br from-rose-50 to-rose-100 dark:from-rose-900/20 dark:to-rose-800/20 border-rose-200 dark:border-rose-700",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-rose-700 dark:text-rose-300",children:"ROI (Return on Investment)"}),r.jsxs("p",{className:"text-3xl font-bold text-rose-900 dark:text-rose-100",children:[((_=c==null?void 0:c.roi)==null?void 0:_.toFixed(0))||"167","%"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(su,{value:Math.min(((c==null?void 0:c.roi)||167)/2,100),className:"w-16"}),r.jsx("p",{className:"text-sm text-rose-600 dark:text-rose-400 mt-1",children:"Целевой: 150%"})]})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[r.jsxs(W,{className:"lg:col-span-2",children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(cr,{className:"w-5 h-5"}),t("dashboard.charts.trafficTitle")]}),r.jsx(Je,{children:t("dashboard.charts.trafficDesc")})]}),r.jsx(H,{children:r.jsx("div",{className:"h-80",children:r.jsx(pa,{width:"100%",height:"100%",children:r.jsxs(ry,{data:d,children:[r.jsx(Pi,{strokeDasharray:"3 3"}),r.jsx(Cs,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(ls,{type:"monotone",dataKey:"clicks",stroke:"#8884d8",strokeWidth:2,name:"Клики"}),r.jsx(ls,{type:"monotone",dataKey:"leads",stroke:"#82ca9d",strokeWidth:2,name:"Лиды"}),r.jsx(ls,{type:"monotone",dataKey:"conversions",stroke:"#ffc658",strokeWidth:2,name:"Конверсии"})]})})})})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Rt,{className:"w-5 h-5"}),t("dashboard.charts.revenueTitle")]}),r.jsx(Je,{children:t("dashboard.charts.revenueDesc")})]}),r.jsx(H,{children:r.jsx("div",{className:"h-64",children:r.jsx(pa,{width:"100%",height:"100%",children:r.jsxs(yW,{data:d,children:[r.jsx(Pi,{strokeDasharray:"3 3"}),r.jsx(Cs,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(Ai,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})})})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(ln,{className:"w-5 h-5"}),t("dashboard.charts.geoTitle")]}),r.jsx(Je,{children:t("dashboard.charts.geoDesc")})]}),r.jsx(H,{children:r.jsx("div",{className:"h-64",children:r.jsx(pa,{width:"100%",height:"100%",children:r.jsxs(M4,{children:[r.jsx(Hi,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:({name:P,percent:D})=>`${P} ${(D*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:h.map((P,D)=>r.jsx(Hm,{fill:AI[D%AI.length]},`cell-${D}`))}),r.jsx(tn,{})]})})})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(W,{className:"lg:col-span-2",children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(In,{className:"w-5 h-5"}),t("dashboard.activities.title")]}),r.jsx(Je,{children:t("dashboard.activities.desc")})]}),r.jsx(H,{children:r.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:u.map(P=>r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800",children:[r.jsx("div",{className:`p-1 rounded ${m(P.type)}`,children:f(P.type)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:P.title}),v(P.priority)]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:P.description}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(P.timestamp).toLocaleString("ru-RU")})]})]},P.id))})})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"w-5 h-5"}),t("dashboard.quickActions.title")]}),r.jsx(Je,{children:t("dashboard.quickActions.desc")})]}),r.jsx(H,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs(M,{className:"w-full justify-start",variant:"outline",onClick:()=>window.location.href="/admin/OffersManagement","data-testid":"quick-action-add-offer",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),t("dashboard.quickActions.addOffer")]}),r.jsxs(M,{className:"w-full justify-start",variant:"outline",onClick:()=>window.location.href="/admin/users","data-testid":"quick-action-add-user",children:[r.jsx(Si,{className:"w-4 h-4 mr-2"}),t("dashboard.quickActions.addUser")]}),r.jsxs(M,{className:"w-full justify-start",variant:"outline",onClick:()=>window.location.href="/admin/postbacks","data-testid":"quick-action-postback",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),t("dashboard.quickActions.postback")]}),r.jsxs(M,{className:"w-full justify-start",variant:"outline",onClick:()=>window.location.href="/admin/analytics","data-testid":"quick-action-analytics",children:[r.jsx(cr,{className:"w-4 h-4 mr-2"}),t("dashboard.quickActions.analytics")]}),r.jsxs(M,{className:"w-full justify-start",variant:"outline",onClick:()=>window.location.href="/admin/fraud","data-testid":"quick-action-fraud",children:[r.jsx(Lt,{className:"w-4 h-4 mr-2"}),t("dashboard.quickActions.fraud")]}),r.jsxs(M,{className:"w-full justify-start",variant:"outline",onClick:()=>window.location.href="/admin/finances","data-testid":"quick-action-finances",children:[r.jsx(hr,{className:"w-4 h-4 mr-2"}),t("dashboard.quickActions.finances")]})]})})]})]})]})]})]})}const ne=y.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:Ae("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...n}));ne.displayName="Input";const Dt=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:n,className:Ae("w-full caption-bottom text-sm",e),...t})}));Dt.displayName="Table";const Mt=y.forwardRef(({className:e,...t},n)=>r.jsx("thead",{ref:n,className:Ae("[&_tr]:border-b",e),...t}));Mt.displayName="TableHeader";const $t=y.forwardRef(({className:e,...t},n)=>r.jsx("tbody",{ref:n,className:Ae("[&_tr:last-child]:border-0",e),...t}));$t.displayName="TableBody";const PMe=y.forwardRef(({className:e,...t},n)=>r.jsx("tfoot",{ref:n,className:Ae("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));PMe.displayName="TableFooter";const Re=y.forwardRef(({className:e,...t},n)=>r.jsx("tr",{ref:n,className:Ae("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Re.displayName="TableRow";const J=y.forwardRef(({className:e,...t},n)=>r.jsx("th",{ref:n,className:Ae("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));J.displayName="TableHead";const q=y.forwardRef(({className:e,...t},n)=>r.jsx("td",{ref:n,className:Ae("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));q.displayName="TableCell";const AMe=y.forwardRef(({className:e,...t},n)=>r.jsx("caption",{ref:n,className:Ae("mt-4 text-sm text-muted-foreground",e),...t}));AMe.displayName="TableCaption";var $4="Dialog",[bW,jW]=Bn($4),[TMe,Ki]=bW($4),wW=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,o=y.useRef(null),c=y.useRef(null),[d=!1,u]=Oi({prop:s,defaultProp:a,onChange:i});return r.jsx(TMe,{scope:t,triggerRef:o,contentRef:c,contentId:Xn(),titleId:Xn(),descriptionId:Xn(),open:d,onOpenChange:u,onOpenToggle:y.useCallback(()=>u(h=>!h),[u]),modal:l,children:n})};wW.displayName=$4;var NW="DialogTrigger",kW=y.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Ki(NW,n),i=St(t,a.triggerRef);return r.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":L4(a.open),...s,ref:i,onClick:Le(e.onClick,a.onOpenToggle)})});kW.displayName=NW;var I4="DialogPortal",[EMe,SW]=bW(I4,{forceMount:void 0}),CW=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:a}=e,i=Ki(I4,t);return r.jsx(EMe,{scope:t,forceMount:n,children:y.Children.map(s,l=>r.jsx(zn,{present:n||i.open,children:r.jsx(Am,{asChild:!0,container:a,children:l})}))})};CW.displayName=I4;var Rj="DialogOverlay",_W=y.forwardRef((e,t)=>{const n=SW(Rj,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,i=Ki(Rj,e.__scopeDialog);return i.modal?r.jsx(zn,{present:s||i.open,children:r.jsx(RMe,{...a,ref:t})}):null});_W.displayName=Rj;var OMe=Fc("DialogOverlay.RemoveScroll"),RMe=y.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Ki(Rj,n);return r.jsx(Vv,{as:OMe,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(Ze.div,{"data-state":L4(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),_u="DialogContent",PW=y.forwardRef((e,t)=>{const n=SW(_u,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,i=Ki(_u,e.__scopeDialog);return r.jsx(zn,{present:s||i.open,children:i.modal?r.jsx(DMe,{...a,ref:t}):r.jsx(MMe,{...a,ref:t})})});PW.displayName=_u;var DMe=y.forwardRef((e,t)=>{const n=Ki(_u,e.__scopeDialog),s=y.useRef(null),a=St(t,n.contentRef,s);return y.useEffect(()=>{const i=s.current;if(i)return a1(i)},[]),r.jsx(AW,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Le(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Le(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,o=l.button===0&&l.ctrlKey===!0;(l.button===2||o)&&i.preventDefault()}),onFocusOutside:Le(e.onFocusOutside,i=>i.preventDefault())})}),MMe=y.forwardRef((e,t)=>{const n=Ki(_u,e.__scopeDialog),s=y.useRef(!1),a=y.useRef(!1);return r.jsx(AW,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=e.onCloseAutoFocus)==null||l.call(e,i),i.defaultPrevented||(s.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),AW=y.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=e,o=Ki(_u,n),c=y.useRef(null),d=St(t,c);return r1(),r.jsxs(r.Fragment,{children:[r.jsx(zv,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx($u,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":L4(o.open),...l,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(IMe,{titleId:o.titleId}),r.jsx(LMe,{contentRef:c,descriptionId:o.descriptionId})]})]})}),F4="DialogTitle",TW=y.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Ki(F4,n);return r.jsx(Ze.h2,{id:a.titleId,...s,ref:t})});TW.displayName=F4;var EW="DialogDescription",OW=y.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Ki(EW,n);return r.jsx(Ze.p,{id:a.descriptionId,...s,ref:t})});OW.displayName=EW;var RW="DialogClose",DW=y.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Ki(RW,n);return r.jsx(Ze.button,{type:"button",...s,ref:t,onClick:Le(e.onClick,()=>a.onOpenChange(!1))})});DW.displayName=RW;function L4(e){return e?"open":"closed"}var MW="DialogTitleWarning",[$Me,$W]=Ote(MW,{contentName:_u,titleName:F4,docsSlug:"dialog"}),IMe=({titleId:e})=>{const t=$W(MW),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return y.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},FMe="DialogDescriptionWarning",LMe=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${$W(FMe).contentName}}.`;return y.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},U4=wW,IW=kW,B4=CW,sN=_W,aN=PW,z4=TW,V4=OW,q4=DW;const jt=U4,Xa=IW,UMe=B4,FW=y.forwardRef(({className:e,...t},n)=>r.jsx(sN,{ref:n,className:Ae("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));FW.displayName=sN.displayName;const vt=y.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(UMe,{children:[r.jsx(FW,{}),r.jsxs(aN,{ref:s,className:Ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,r.jsxs(q4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Tn,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));vt.displayName=aN.displayName;const yt=({className:e,...t})=>r.jsx("div",{className:Ae("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});yt.displayName="DialogHeader";const vo=({className:e,...t})=>r.jsx("div",{className:Ae("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});vo.displayName="DialogFooter";const bt=y.forwardRef(({className:e,...t},n)=>r.jsx(z4,{ref:n,className:Ae("text-lg font-semibold leading-none tracking-tight",e),...t}));bt.displayName=z4.displayName;const Ur=y.forwardRef(({className:e,...t},n)=>r.jsx(V4,{ref:n,className:Ae("text-sm text-muted-foreground",e),...t}));Ur.displayName=V4.displayName;var BMe="Label",LW=y.forwardRef((e,t)=>r.jsx(Ze.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));LW.displayName=BMe;var UW=LW;const zMe=$v("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),L=y.forwardRef(({className:e,...t},n)=>r.jsx(UW,{ref:n,className:Ae(zMe(),e),...t}));L.displayName=UW.displayName;const pt=y.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:Ae("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));pt.displayName="Textarea";function zk(){var ve,_e,Pe,X;const{t:e,language:t}=Ll(),{toast:n}=lt(),{isCollapsed:s}=Os(),a=Et(),[i,l]=y.useState({search:"",role:"all",status:"all",userType:"all",country:"",dateFrom:"",dateTo:"",lastActivityFrom:"",lastActivityTo:"",geoIP:"",page:1,limit:20,sortBy:"createdAt",sortOrder:"desc"}),[o,c]=y.useState([]),[d,u]=y.useState(""),[h,f]=y.useState(!1),[m,v]=y.useState(null),[x,w]=y.useState(!1),[j,g]=y.useState(!1),[b,p]=y.useState(!1),[N,k]=y.useState(!1),[C,_]=y.useState(!1),[P,D]=y.useState(null),[E,$]=y.useState("soft"),[A,T]=y.useState("block"),[O,z]=y.useState(""),[F,R]=y.useState({firstName:"",lastName:"",email:"",role:"affiliate",country:"",isActive:!0,twoFactorEnabled:!1,ipRestrictions:"",geoRestrictions:"",advertiserName:""}),[I,Q]=y.useState({username:"",email:"",password:"",firstName:"",lastName:"",role:"affiliate",userType:"affiliate",country:"",advertiserName:""}),Y=y.useCallback(ee=>{l(ke=>({...ke,search:ee,page:1}))},[]),K=y.useCallback((ee,ke)=>{l(Fe=>({...Fe,[ee]:ke,page:1}))},[]),oe=ee=>{const ke=i.sortBy===ee&&i.sortOrder==="asc"?"desc":"asc";l({...i,sortBy:ee,sortOrder:ke})},ge=ee=>i.sortBy!==ee?"↕️":i.sortOrder==="asc"?"↑":"↓",Ne=ee=>{v(ee),f(!0)},Oe=ee=>Xt(new Date(ee),"dd.MM.yyyy HH:mm",{locale:t==="ru"?gl:t1}),{data:pe,isLoading:Me,refetch:xe}=$e({queryKey:["/api/admin/users",i],queryFn:async()=>{const ee=new URLSearchParams;Object.entries(i).forEach(([Fe,or])=>{or&&or!=="all"&&ee.append(Fe,or.toString())});const ke=await fetch(`/api/admin/users?${ee.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!ke.ok)throw new Error("Failed to fetch users");return ke.json()}}),ce=Ee({mutationFn:async({userId:ee,reason:ke})=>Te(`/api/admin/users/${ee}/block`,"POST",{reason:ke}),onSuccess:()=>{n({title:"Пользователь заблокирован",description:"Пользователь успешно заблокирован"}),a.invalidateQueries({queryKey:["/api/admin/users"]}),f(!1),u("")}}),Ie=Ee({mutationFn:async ee=>Te(`/api/admin/users/${ee}/unblock`,"POST"),onSuccess:()=>{n({title:"Пользователь разблокирован",description:"Пользователь успешно разблокирован"}),a.invalidateQueries({queryKey:["/api/admin/users"]})}}),ie=Ee({mutationFn:async ee=>Te(`/api/admin/users/${ee}/force-logout`,"POST"),onSuccess:()=>{n({title:"Сессии завершены",description:"Все сессии пользователя успешно завершены"}),a.invalidateQueries({queryKey:["/api/admin/users"]})}}),st=Ee({mutationFn:async ee=>Te(`/api/admin/users/${ee}/reset-password`,"POST"),onSuccess:()=>{n({title:"Пароль сброшен",description:"Новый пароль отправлен на email пользователя"}),a.invalidateQueries({queryKey:["/api/admin/users"]})}}),G=Ee({mutationFn:async({userId:ee,userData:ke})=>Te(`/api/admin/users/${ee}`,"PATCH",ke),onSuccess:()=>{n({title:"Пользователь обновлен",description:"Данные пользователя успешно обновлены"}),a.invalidateQueries({queryKey:["/api/admin/users"]}),w(!1)}}),De=Ee({mutationFn:async({userId:ee,type:ke})=>Te(`/api/admin/users/${ee}`,"DELETE",{deleteType:ke}),onSuccess:()=>{n({title:"Пользователь удален",description:E==="soft"?"Пользователь перемещен в архив":"Пользователь полностью удален"}),a.invalidateQueries({queryKey:["/api/admin/users"]}),p(!1)}});Ee({mutationFn:async({userId:ee,enabled:ke})=>Te(`/api/admin/users/${ee}/2fa`,"PATCH",{enabled:ke}),onSuccess:()=>{n({title:"2FA настроена",description:"Настройки двухфакторной аутентификации обновлены"}),a.invalidateQueries({queryKey:["/api/admin/users"]})}}),Ee({mutationFn:async({userId:ee,restrictions:ke})=>Te(`/api/admin/users/${ee}/restrictions`,"PATCH",ke),onSuccess:()=>{n({title:"Ограничения обновлены",description:"IP и GEO ограничения успешно применены"}),a.invalidateQueries({queryKey:["/api/admin/users"]})}});const me=()=>{m&&d.trim()&&ce.mutate({userId:m,reason:d})},Be=ee=>{D(ee),R({firstName:ee.firstName||"",lastName:ee.lastName||"",email:ee.email,role:ee.role,country:ee.country||"",isActive:ee.isActive,twoFactorEnabled:!1,ipRestrictions:"",geoRestrictions:"",advertiserName:ee.advertiserName||""}),w(!0)},qe=ee=>{D(ee),p(!0)},Qe=()=>{P&&De.mutate({userId:P.id,type:E})},Ct=()=>{P&&G.mutate({userId:P.id,userData:F})},er=()=>{U.mutate(I)},V=()=>{o.length!==0&&re.mutate({action:A,userIds:o,reason:O})},U=Ee({mutationFn:async ee=>Te("/api/admin/users","POST",ee),onSuccess:()=>{n({title:"Пользователь создан",description:"Новый пользователь успешно создан"}),a.invalidateQueries({queryKey:["/api/admin/users"]}),k(!1),Q({username:"",email:"",password:"",firstName:"",lastName:"",role:"affiliate",userType:"affiliate",country:"",advertiserName:""})}}),re=Ee({mutationFn:async({action:ee,userIds:ke,reason:Fe})=>{switch(ee){case"block":return Te("/api/admin/users/bulk-block","POST",{userIds:ke,reason:Fe});case"unblock":return Te("/api/admin/users/bulk-unblock","POST",{userIds:ke});case"delete":return Te("/api/admin/users/bulk-delete","POST",{userIds:ke,deleteType:"soft"});default:throw new Error("Unknown bulk action")}},onSuccess:()=>{n({title:"Массовая операция завершена",description:`Операция выполнена для ${o.length} пользователей`}),a.invalidateQueries({queryKey:["/api/admin/users"]}),c([]),_(!1),z("")}});return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${s?"ml-0 lg:ml-16":"ml-0 lg:ml-64"}`,children:[r.jsx(gn,{title:"Управление пользователями"}),r.jsx("main",{className:"flex-1 overflow-auto",children:r.jsxs("div",{className:"space-y-6 p-4 sm:p-6 max-w-full",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Управление пользователями"}),r.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Управляйте пользователями системы, их ролями и настройками"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(M,{onClick:()=>k(!0),children:[r.jsx(Zt,{className:"mr-2 h-4 w-4"}),"Создать пользователя"]}),o.length>0&&r.jsxs(M,{variant:"outline",onClick:()=>_(!0),className:"border-orange-200 text-orange-700 hover:bg-orange-50",children:[r.jsx(Lt,{className:"mr-2 h-4 w-4"}),"Массовые действия (",o.length,")"]})]})]}),r.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Всего пользователей"}),r.jsx(Ro,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold",children:Array.isArray(pe==null?void 0:pe.data)?pe.data.length:0})})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Активных"}),r.jsx(Lt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600",children:Array.isArray(pe==null?void 0:pe.data)?pe.data.filter(ee=>ee.isActive).length:0})})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Заблокированных"}),r.jsx(qx,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold text-red-600",children:Array.isArray(pe==null?void 0:pe.data)?pe.data.filter(ee=>!ee.isActive).length:0})})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Новых сегодня"}),r.jsx(Ls,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Array.isArray(pe==null?void 0:pe.data)?pe.data.filter(ee=>{const ke=new Date().toDateString();return new Date(ee.createdAt).toDateString()===ke}).length:0})})]})]}),r.jsx(W,{children:r.jsx(H,{className:"p-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(ne,{placeholder:"Поиск по email, ID, имени...",value:i.search,onChange:ee=>Y(ee.target.value),className:"pl-10"})]}),r.jsxs(he,{value:i.role,onValueChange:ee=>K("role",ee),children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите роль"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все роли"}),r.jsx(S,{value:"super_admin",children:"Супер-админ"}),r.jsx(S,{value:"advertiser",children:"Рекламодатель"}),r.jsx(S,{value:"affiliate",children:"Партнер"}),r.jsx(S,{value:"staff",children:"Сотрудник"})]})]}),r.jsxs(he,{value:i.status,onValueChange:ee=>K("status",ee),children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите статус"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все статусы"}),r.jsx(S,{value:"active",children:"Активные"}),r.jsx(S,{value:"blocked",children:"Заблокированные"}),r.jsx(S,{value:"inactive",children:"Неактивные"})]})]}),r.jsxs(he,{value:i.userType,onValueChange:ee=>K("userType",ee),children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Тип пользователя"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все типы"}),r.jsx(S,{value:"affiliate",children:"Партнер"}),r.jsx(S,{value:"advertiser",children:"Рекламодатель"}),r.jsx(S,{value:"admin",children:"Администратор"})]})]}),r.jsx(ne,{placeholder:"Страна",value:i.country,onChange:ee=>K("country",ee.target.value)}),r.jsx(ne,{placeholder:"Geo IP",value:i.geoIP,onChange:ee=>K("geoIP",ee.target.value)})]}),r.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Дата регистрации от:"}),r.jsx(ne,{type:"date",value:i.dateFrom,onChange:ee=>K("dateFrom",ee.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Дата регистрации до:"}),r.jsx(ne,{type:"date",value:i.dateTo,onChange:ee=>K("dateTo",ee.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Последний вход от:"}),r.jsx(ne,{type:"date",value:i.lastActivityFrom,onChange:ee=>K("lastActivityFrom",ee.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Последний вход до:"}),r.jsx(ne,{type:"date",value:i.lastActivityTo,onChange:ee=>K("lastActivityTo",ee.target.value),className:"mt-1"})]}),r.jsxs("div",{className:"flex items-end gap-2",children:[r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{l({search:"",role:"all",status:"all",userType:"all",country:"",dateFrom:"",dateTo:"",lastActivityFrom:"",lastActivityTo:"",geoIP:"",page:1,limit:20,sortBy:"createdAt",sortOrder:"desc"})},children:[r.jsx(Ks,{className:"h-4 w-4 mr-1"}),"Сбросить"]}),r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>xe(),children:[r.jsx(Vt,{className:"h-4 w-4 mr-1"}),"Обновить"]}),r.jsxs(M,{variant:"outline",size:"sm",children:[r.jsx(vr,{className:"h-4 w-4 mr-1"}),"Экспорт"]})]})]})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{className:"w-12",children:r.jsx("input",{type:"checkbox",className:"rounded",checked:o.length===((ve=pe==null?void 0:pe.data)==null?void 0:ve.length)&&((_e=pe==null?void 0:pe.data)==null?void 0:_e.length)>0,onChange:ee=>{var ke;ee.target.checked?c(((ke=pe==null?void 0:pe.data)==null?void 0:ke.map(Fe=>Fe.id))||[]):c([])}})}),r.jsxs(J,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>oe("id"),children:["ID ",ge("id")]}),r.jsxs(J,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>oe("userType"),children:["Тип ",ge("userType")]}),r.jsxs(J,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>oe("username"),children:["Название аккаунта / Имя ",ge("username")]}),r.jsxs(J,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>oe("email"),children:["Email / Telegram ",ge("email")]}),r.jsxs(J,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>oe("role"),children:["Роль ",ge("role")]}),r.jsxs(J,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>oe("status"),children:["Статус ",ge("status")]}),r.jsxs(J,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>oe("createdAt"),children:["Дата регистрации ",ge("createdAt")]}),r.jsxs(J,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>oe("lastLoginAt"),children:["Последний вход (IP) ",ge("lastLoginAt")]}),r.jsxs(J,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>oe("advertiserName"),children:["Привязанный рекламодатель ",ge("advertiserName")]}),r.jsx(J,{className:"text-right",children:"Действия"})]})}),r.jsx($t,{children:Me?r.jsx(Re,{children:r.jsx(q,{colSpan:11,className:"text-center py-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Загрузка..."]})})}):((Pe=pe==null?void 0:pe.data)==null?void 0:Pe.length)===0?r.jsx(Re,{children:r.jsx(q,{colSpan:11,className:"text-center py-8",children:"Пользователи не найдены"})}):(X=pe==null?void 0:pe.data)==null?void 0:X.map(ee=>r.jsxs(Re,{children:[r.jsx(q,{children:r.jsx("input",{type:"checkbox",className:"rounded",checked:o.includes(ee.id),onChange:ke=>{ke.target.checked?c([...o,ee.id]):c(o.filter(Fe=>Fe!==ee.id))}})}),r.jsxs(q,{className:"font-mono text-xs",children:[ee.id.substring(0,8),"..."]}),r.jsx(q,{children:r.jsx(le,{variant:ee.userType==="advertiser"?"default":ee.userType==="affiliate"?"secondary":ee.userType==="staff"?"outline":"destructive",children:ee.userType==="advertiser"?"Рекламодатель":ee.userType==="affiliate"?"Партнёр":ee.userType==="staff"?"Сотрудник":"Админ"})}),r.jsx(q,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:ee.username}),(ee.firstName||ee.lastName)&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:[ee.firstName," ",ee.lastName]})]})}),r.jsx(q,{children:r.jsx("div",{className:"text-sm",children:ee.email})}),r.jsx(q,{children:r.jsx(le,{variant:"outline",className:ee.role==="super_admin"?"bg-purple-100 text-purple-800 border-purple-200":ee.role==="advertiser"?"bg-blue-100 text-blue-800 border-blue-200":ee.role==="affiliate"?"bg-green-100 text-green-800 border-green-200":ee.role==="staff"?"bg-orange-100 text-orange-800 border-orange-200":"bg-gray-100 text-gray-800 border-gray-200",children:ee.role==="super_admin"?"Супер-админ":ee.role==="advertiser"?"Рекламодатель":ee.role==="affiliate"?"Партнёр":ee.role==="staff"?"Сотрудник":ee.role})}),r.jsx(q,{children:r.jsx(le,{variant:ee.isActive?"default":"destructive",children:ee.isActive?"Активен":"Заблокирован"})}),r.jsx(q,{children:r.jsx("div",{className:"text-sm",children:Oe(ee.createdAt)})}),r.jsx(q,{children:r.jsx("div",{className:"text-sm",children:ee.lastLoginAt?r.jsxs(r.Fragment,{children:[r.jsx("div",{children:Oe(ee.lastLoginAt)}),ee.lastLoginIP&&r.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:ee.lastLoginIP})]}):r.jsx("span",{className:"text-muted-foreground",children:"Никогда"})})}),r.jsx(q,{children:ee.advertiserName?r.jsx(le,{variant:"outline",className:"bg-indigo-100 text-indigo-800 border-indigo-200",children:ee.advertiserName}):r.jsx(le,{variant:"outline",className:"bg-gray-100 text-gray-500 border-gray-200",children:"Не привязан"})}),r.jsx(q,{className:"text-right",children:r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsx(M,{variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(Wx,{className:"h-4 w-4"})})}),r.jsxs(Ps,{align:"end",children:[r.jsxs(Ft,{onClick:()=>{D(ee),g(!0)},children:[r.jsx(hr,{className:"mr-2 h-4 w-4"}),"Просмотр"]}),r.jsxs(Ft,{onClick:()=>Be(ee),children:[r.jsx(cs,{className:"mr-2 h-4 w-4"}),"Редактировать"]}),ee.isActive?r.jsxs(Ft,{onClick:()=>Ne(ee.id),children:[r.jsx(qx,{className:"mr-2 h-4 w-4"}),"Заблокировать"]}):r.jsxs(Ft,{onClick:()=>Ie.mutate(ee.id),children:[r.jsx(ine,{className:"mr-2 h-4 w-4"}),"Разблокировать"]}),r.jsxs(Ft,{onClick:()=>ie.mutate(ee.id),children:[r.jsx(Fv,{className:"mr-2 h-4 w-4"}),"Завершить сессии"]}),r.jsxs(Ft,{onClick:()=>st.mutate(ee.id),children:[r.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Сбросить пароль"]}),r.jsxs(Ft,{onClick:()=>qe(ee),className:"text-red-600",children:[r.jsx(wr,{className:"mr-2 h-4 w-4"}),"Удалить"]})]})]})})]},ee.id))})]})})})}),r.jsx(jt,{open:h,onOpenChange:f,children:r.jsxs(vt,{children:[r.jsx(yt,{children:r.jsx(bt,{children:"Заблокировать пользователя"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"blockReason",children:"Причина блокировки"}),r.jsx(pt,{id:"blockReason",placeholder:"Укажите причину блокировки...",value:d,onChange:ee=>u(ee.target.value)})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{variant:"outline",onClick:()=>f(!1),children:"Отмена"}),r.jsx(M,{variant:"destructive",onClick:me,disabled:!d.trim()||ce.isPending,children:ce.isPending?r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}):"Заблокировать"})]})]})]})}),r.jsx(jt,{open:x,onOpenChange:w,children:r.jsxs(vt,{className:"max-w-2xl",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Редактировать пользователя"})}),r.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Имя"}),r.jsx(ne,{value:F.firstName,onChange:ee=>R({...F,firstName:ee.target.value}),placeholder:"Введите имя"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Фамилия"}),r.jsx(ne,{value:F.lastName,onChange:ee=>R({...F,lastName:ee.target.value}),placeholder:"Введите фамилию"})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Email"}),r.jsx(ne,{type:"email",value:F.email,onChange:ee=>R({...F,email:ee.target.value}),placeholder:"email@example.com"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Роль"}),r.jsxs(he,{value:F.role,onValueChange:ee=>R({...F,role:ee}),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"super_admin",children:"Супер-админ"}),r.jsx(S,{value:"advertiser",children:"Рекламодатель"}),r.jsx(S,{value:"affiliate",children:"Партнер"}),r.jsx(S,{value:"staff",children:"Сотрудник"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Страна"}),r.jsx(ne,{value:F.country,onChange:ee=>R({...F,country:ee.target.value}),placeholder:"Россия"})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Привязанный рекламодатель"}),r.jsx(ne,{value:F.advertiserName,onChange:ee=>R({...F,advertiserName:ee.target.value}),placeholder:"Название рекламодателя"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"IP ограничения (через запятую)"}),r.jsx(pt,{value:F.ipRestrictions,onChange:ee=>R({...F,ipRestrictions:ee.target.value}),placeholder:"192.168.1.1, 10.0.0.0/24",rows:2})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"GEO ограничения (коды стран через запятую)"}),r.jsx(pt,{value:F.geoRestrictions,onChange:ee=>R({...F,geoRestrictions:ee.target.value}),placeholder:"RU, BY, KZ",rows:2})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:F.isActive,onChange:ee=>R({...F,isActive:ee.target.checked})}),r.jsx(L,{htmlFor:"isActive",children:"Активный пользователь"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"twoFactorEnabled",checked:F.twoFactorEnabled,onChange:ee=>R({...F,twoFactorEnabled:ee.target.checked})}),r.jsx(L,{htmlFor:"twoFactorEnabled",children:"2FA включена"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{variant:"outline",onClick:()=>w(!1),children:"Отмена"}),r.jsxs(M,{onClick:Ct,disabled:G.isPending,children:[G.isPending?r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Сохранить"]})]})]})}),r.jsx(jt,{open:j,onOpenChange:g,children:r.jsxs(vt,{className:"max-w-2xl",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Профиль пользователя"})}),P&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"ID пользователя"}),r.jsx("div",{className:"font-mono text-sm bg-gray-100 p-2 rounded",children:P.id})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Имя пользователя"}),r.jsx("div",{className:"font-medium",children:P.username})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Email"}),r.jsx("div",{children:P.email})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Роль"}),r.jsx(le,{variant:"outline",children:P.role})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Статус"}),r.jsx(le,{variant:P.isActive?"default":"destructive",children:P.isActive?"Активен":"Заблокирован"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Страна"}),r.jsx("div",{children:P.country||"Не указана"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Дата регистрации"}),r.jsx("div",{children:Oe(P.createdAt)})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Последний вход"}),r.jsxs("div",{children:[P.lastLoginAt?Oe(P.lastLoginAt):"Никогда",P.lastLoginIP&&r.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:P.lastLoginIP})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Привязанный рекламодатель"}),r.jsx("div",{children:P.advertiserName||"Не привязан"})]})]})]})}),r.jsx(jt,{open:b,onOpenChange:p,children:r.jsxs(vt,{children:[r.jsx(yt,{children:r.jsx(bt,{children:"Удаление пользователя"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Выберите тип удаления для пользователя: ",r.jsx("strong",{children:P==null?void 0:P.username})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"radio",id:"soft-delete",name:"deleteType",checked:E==="soft",onChange:()=>$("soft")}),r.jsxs(L,{htmlFor:"soft-delete",className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:"Мягкое удаление (архив)"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Пользователь будет перемещен в архив, данные сохранятся"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"radio",id:"hard-delete",name:"deleteType",checked:E==="hard",onChange:()=>$("hard")}),r.jsxs(L,{htmlFor:"hard-delete",className:"flex-1",children:[r.jsx("div",{className:"font-medium text-red-600",children:"Полное удаление"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Все данные пользователя будут безвозвратно удалены"})]})]})]}),E==="hard"&&r.jsx("div",{className:"bg-red-50 border border-red-200 p-3 rounded",children:r.jsx("div",{className:"text-sm text-red-800",children:"⚠️ Внимание! Это действие нельзя отменить. Все данные пользователя, включая статистику и историю, будут полностью удалены."})})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{variant:"outline",onClick:()=>p(!1),children:"Отмена"}),r.jsxs(M,{variant:E==="hard"?"destructive":"default",onClick:Qe,disabled:De.isPending,children:[De.isPending?r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}):null,E==="soft"?"В архив":"Удалить навсегда"]})]})]})}),r.jsx(jt,{open:N,onOpenChange:k,children:r.jsxs(vt,{className:"max-w-2xl",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Создать нового пользователя"})}),r.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Имя пользователя *"}),r.jsx(ne,{value:I.username,onChange:ee=>Q({...I,username:ee.target.value}),placeholder:"username",required:!0})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Email *"}),r.jsx(ne,{type:"email",value:I.email,onChange:ee=>Q({...I,email:ee.target.value}),placeholder:"email@example.com",required:!0})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Пароль *"}),r.jsx(ne,{type:"password",value:I.password,onChange:ee=>Q({...I,password:ee.target.value}),placeholder:"Введите пароль",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Имя"}),r.jsx(ne,{value:I.firstName,onChange:ee=>Q({...I,firstName:ee.target.value}),placeholder:"Введите имя"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Фамилия"}),r.jsx(ne,{value:I.lastName,onChange:ee=>Q({...I,lastName:ee.target.value}),placeholder:"Введите фамилию"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Роль"}),r.jsxs(he,{value:I.role,onValueChange:ee=>Q({...I,role:ee}),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"super_admin",children:"Супер-админ"}),r.jsx(S,{value:"advertiser",children:"Рекламодатель"}),r.jsx(S,{value:"affiliate",children:"Партнер"}),r.jsx(S,{value:"staff",children:"Сотрудник"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Тип пользователя"}),r.jsxs(he,{value:I.userType,onValueChange:ee=>Q({...I,userType:ee}),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"advertiser",children:"Рекламодатель"}),r.jsx(S,{value:"affiliate",children:"Партнер"}),r.jsx(S,{value:"staff",children:"Сотрудник"}),r.jsx(S,{value:"admin",children:"Администратор"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Страна"}),r.jsx(ne,{value:I.country,onChange:ee=>Q({...I,country:ee.target.value}),placeholder:"Россия"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Привязанный рекламодатель"}),r.jsx(ne,{value:I.advertiserName,onChange:ee=>Q({...I,advertiserName:ee.target.value}),placeholder:"Название рекламодателя"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{variant:"outline",onClick:()=>k(!1),children:"Отмена"}),r.jsxs(M,{onClick:er,disabled:U.isPending||!I.username||!I.email||!I.password,children:[U.isPending?r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Создать пользователя"]})]})]})}),r.jsx(jt,{open:C,onOpenChange:_,children:r.jsxs(vt,{children:[r.jsx(yt,{children:r.jsx(bt,{children:"Массовые действия"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Выбрано пользователей: ",r.jsx("strong",{children:o.length})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Выберите действие"}),r.jsxs(he,{value:A,onValueChange:ee=>T(ee),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"block",children:"Заблокировать пользователей"}),r.jsx(S,{value:"unblock",children:"Разблокировать пользователей"}),r.jsx(S,{value:"delete",children:"Удалить пользователей (в архив)"})]})]})]}),(A==="block"||A==="delete")&&r.jsxs("div",{children:[r.jsx(L,{children:"Причина"}),r.jsx(pt,{value:O,onChange:ee=>z(ee.target.value),placeholder:"Укажите причину...",required:A==="block"})]}),A==="delete"&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded",children:r.jsx("div",{className:"text-sm text-yellow-800",children:"⚠️ Пользователи будут перемещены в архив (мягкое удаление)"})})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{variant:"outline",onClick:()=>_(!1),children:"Отмена"}),r.jsxs(M,{variant:A==="delete"?"destructive":"default",onClick:V,disabled:re.isPending||A==="block"&&!O.trim(),children:[re.isPending?r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}):null,A==="block"?"Заблокировать":A==="unblock"?"Разблокировать":"Удалить в архив"]})]})]})})]})})]})]})}var W4="Checkbox",[VMe,Qqe]=Bn(W4),[qMe,WMe]=VMe(W4),BW=y.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:d,form:u,...h}=e,[f,m]=y.useState(null),v=St(t,p=>m(p)),x=y.useRef(!1),w=f?u||!!f.closest("form"):!0,[j=!1,g]=Oi({prop:a,defaultProp:i,onChange:d}),b=y.useRef(j);return y.useEffect(()=>{const p=f==null?void 0:f.form;if(p){const N=()=>g(b.current);return p.addEventListener("reset",N),()=>p.removeEventListener("reset",N)}},[f,g]),r.jsxs(qMe,{scope:n,state:j,disabled:o,children:[r.jsx(Ze.button,{type:"button",role:"checkbox","aria-checked":Mc(j)?"mixed":j,"aria-required":l,"data-state":qW(j),"data-disabled":o?"":void 0,disabled:o,value:c,...h,ref:v,onKeyDown:Le(e.onKeyDown,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:Le(e.onClick,p=>{g(N=>Mc(N)?!0:!N),w&&(x.current=p.isPropagationStopped(),x.current||p.stopPropagation())})}),w&&r.jsx(HMe,{control:f,bubbles:!x.current,name:s,value:c,checked:j,required:l,disabled:o,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Mc(i)?!1:i})]})});BW.displayName=W4;var zW="CheckboxIndicator",VW=y.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...a}=e,i=WMe(zW,n);return r.jsx(zn,{present:s||Mc(i.state)||i.state===!0,children:r.jsx(Ze.span,{"data-state":qW(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});VW.displayName=zW;var HMe=e=>{const{control:t,checked:n,bubbles:s=!0,defaultChecked:a,...i}=e,l=y.useRef(null),o=c1(n),c=Yw(t);y.useEffect(()=>{const u=l.current,h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(o!==n&&m){const v=new Event("click",{bubbles:s});u.indeterminate=Mc(n),m.call(u,Mc(n)?!1:n),u.dispatchEvent(v)}},[o,n,s]);const d=y.useRef(Mc(n)?!1:n);return r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...i,tabIndex:-1,ref:l,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Mc(e){return e==="indeterminate"}function qW(e){return Mc(e)?"indeterminate":e?"checked":"unchecked"}var WW=BW,KMe=VW;const on=y.forwardRef(({className:e,...t},n)=>r.jsx(WW,{ref:n,className:Ae("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(KMe,{className:Ae("flex items-center justify-center text-current"),children:r.jsx(fn,{className:"h-4 w-4"})})}));on.displayName=WW.displayName;const GMe={ru:{rolesManagement:"Управление ролями",rolesDescription:"Создание и настройка пользовательских ролей с правами доступа",createRole:"Создать роль",totalRoles:"Всего ролей",globalRoles:"Глобальные роли",advertiserRoles:"Роли рекламодателей",activeRoles:"Активные роли",searchPlaceholder:"Поиск ролей...",allRoles:"Все роли",global:"Глобальные",advertiser:"Рекламодателей",name:"Название",description:"Описание",scope:"Область действия",permissions:"Права доступа",restrictions:"Ограничения",assignedUsers:"Назначенные пользователи",status:"Статус",actions:"Действия",view:"Просмотр",edit:"Редактировать",delete:"Удалить",active:"Активна",inactive:"Неактивна",globalRole:"Глобальная",advertiserRole:"Рекламодателя",ipRestrictions:"IP ограничения",geoRestrictions:"Гео ограничения",timeRestrictions:"Временные ограничения",noRoles:"Роли не найдены",noRolesDescription:"Роли, соответствующие критериям поиска, не найдены.",roleCreated:"Роль создана",roleCreatedDescription:"Новая роль успешно создана",roleUpdated:"Роль обновлена",roleUpdatedDescription:"Роль успешно обновлена",roleDeleted:"Роль удалена",roleDeletedDescription:"Роль успешно удалена",permissionCategories:{analytics:"Аналитика",offers:"Офферы",users:"Пользователи",finances:"Финансы",api:"API",security:"Безопасность",system:"Система"},permissionNames:{view_statistics:"Просмотр статистики",manage_offers:"Управление офферами",manage_users:"Управление пользователями",access_finances:"Доступ к финансам",manage_postbacks:"Управление постбеками / API",view_fraud_alerts:"Просмотр фрод-алертов",manage_system:"Управление системой"},permissionDescriptions:{view_statistics:"Доступ к просмотру аналитики и отчетов",manage_offers:"Создание, редактирование и удаление офферов",manage_users:"Создание, редактирование и управление пользователями",access_finances:"Просмотр и управление финансовыми операциями",manage_postbacks:"Настройка постбеков и API интеграций",view_fraud_alerts:"Доступ к системе обнаружения мошенничества",manage_system:"Доступ к системным настройкам"}},en:{rolesManagement:"Roles Management",rolesDescription:"Create and configure user roles with access permissions",createRole:"Create Role",totalRoles:"Total Roles",globalRoles:"Global Roles",advertiserRoles:"Advertiser Roles",activeRoles:"Active Roles",searchPlaceholder:"Search roles...",allRoles:"All Roles",global:"Global",advertiser:"Advertiser",name:"Name",description:"Description",scope:"Scope",permissions:"Permissions",restrictions:"Restrictions",assignedUsers:"Assigned Users",status:"Status",actions:"Actions",view:"View",edit:"Edit",delete:"Delete",active:"Active",inactive:"Inactive",globalRole:"Global",advertiserRole:"Advertiser",ipRestrictions:"IP Restrictions",geoRestrictions:"Geo Restrictions",timeRestrictions:"Time Restrictions",noRoles:"No roles found",noRolesDescription:"No roles matching the search criteria were found.",roleCreated:"Role Created",roleCreatedDescription:"New role successfully created",roleUpdated:"Role Updated",roleUpdatedDescription:"Role successfully updated",roleDeleted:"Role Deleted",roleDeletedDescription:"Role successfully deleted",permissionCategories:{analytics:"Analytics",offers:"Offers",users:"Users",finances:"Finances",api:"API",security:"Security",system:"System"},permissionNames:{view_statistics:"View Statistics",manage_offers:"Manage Offers",manage_users:"Manage Users",access_finances:"Access Finances",manage_postbacks:"Manage Postbacks / API",view_fraud_alerts:"View Fraud Alerts",manage_system:"Manage System"},permissionDescriptions:{view_statistics:"Access to view analytics and reports",manage_offers:"Create, edit and delete offers",manage_users:"Create, edit and manage users",access_finances:"View and manage financial operations",manage_postbacks:"Configure postbacks and API integrations",view_fraud_alerts:"Access to fraud detection system",manage_system:"Access to system settings"}}},Vk=[{id:"view_statistics",name:"Просмотр статистики",description:"Доступ к просмотру аналитики и отчетов",category:"Аналитика",icon:cr},{id:"manage_offers",name:"Управление офферами",description:"Создание, редактирование и удаление офферов",category:"Офферы",icon:Kt},{id:"manage_users",name:"Управление пользователями",description:"Создание, редактирование и управление пользователями",category:"Пользователи",icon:ar},{id:"access_finances",name:"Доступ к финансам",description:"Просмотр и управление финансовыми операциями",category:"Финансы",icon:Rt},{id:"manage_postbacks",name:"Управление постбеками / API",description:"Настройка постбеков и API интеграций",category:"API",icon:nu},{id:"view_fraud_alerts",name:"Просмотр фрод-алертов",description:"Доступ к системе обнаружения мошенничества",category:"Безопасность",icon:Lt},{id:"manage_system",name:"Управление системой",description:"Доступ к системным настройкам",category:"Система",icon:dr}];function YMe(){var F,R,I,Q;const{t:e,language:t}=Ll(),{toast:n}=lt(),{isCollapsed:s}=Os(),a=Et(),i=GMe[t],[l,o]=y.useState(""),[c,d]=y.useState("all"),[u,h]=y.useState(!1),[f,m]=y.useState(!1),[v,x]=y.useState(!1),[w,j]=y.useState(null),[g,b]=y.useState({name:"",description:"",permissions:[],advertiserId:null,ipRestrictions:"",geoRestrictions:"",timeRestrictions:{startTime:"",endTime:"",allowedDays:[]}}),{data:p,isLoading:N,refetch:k}=$e({queryKey:["/api/admin/roles",l,c],queryFn:async()=>{const Y=new URLSearchParams;l&&Y.append("search",l),c!=="all"&&Y.append("scope",c);const K=await fetch(`/api/admin/roles?${Y.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!K.ok)throw new Error("Failed to fetch roles");return K.json()}}),{data:C}=$e({queryKey:["/api/admin/users",{role:"advertiser"}],queryFn:async()=>{const Y=await fetch("/api/admin/users?role=advertiser",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!Y.ok)throw new Error("Failed to fetch advertisers");return Y.json()}}),_=Ee({mutationFn:async Y=>Te("/api/admin/roles","POST",Y),onSuccess:()=>{n({title:i.roleCreated,description:i.roleCreatedDescription}),a.invalidateQueries({queryKey:["/api/admin/roles"]}),h(!1),E()}}),P=Ee({mutationFn:async({roleId:Y,roleData:K})=>Te(`/api/admin/roles/${Y}`,"PATCH",K),onSuccess:()=>{n({title:i.roleUpdated,description:i.roleUpdatedDescription}),a.invalidateQueries({queryKey:["/api/admin/roles"]}),m(!1)}}),D=Ee({mutationFn:async Y=>Te(`/api/admin/roles/${Y}`,"DELETE"),onSuccess:()=>{n({title:i.roleDeleted,description:i.roleDeletedDescription}),a.invalidateQueries({queryKey:["/api/admin/roles"]})}}),E=()=>{b({name:"",description:"",permissions:[],advertiserId:null,ipRestrictions:"",geoRestrictions:"",timeRestrictions:{startTime:"",endTime:"",allowedDays:[]}})},$=()=>{const Y={...g,ipRestrictions:g.ipRestrictions.split(",").map(K=>K.trim()).filter(Boolean),geoRestrictions:g.geoRestrictions.split(",").map(K=>K.trim()).filter(Boolean)};_.mutate(Y)},A=Y=>{var K,oe;j(Y),b({name:Y.name,description:Y.description,permissions:Y.permissions,advertiserId:Y.advertiserId,ipRestrictions:((K=Y.ipRestrictions)==null?void 0:K.join(", "))||"",geoRestrictions:((oe=Y.geoRestrictions)==null?void 0:oe.join(", "))||"",timeRestrictions:Y.timeRestrictions||{startTime:"",endTime:"",allowedDays:[]}}),m(!0)},T=()=>{if(!w)return;const Y={...g,ipRestrictions:g.ipRestrictions.split(",").map(K=>K.trim()).filter(Boolean),geoRestrictions:g.geoRestrictions.split(",").map(K=>K.trim()).filter(Boolean)};P.mutate({roleId:w.id,roleData:Y})},O=Y=>{b(K=>({...K,permissions:K.permissions.includes(Y)?K.permissions.filter(oe=>oe!==Y):[...K.permissions,Y]}))},z=Vk.reduce((Y,K)=>(Y[K.category]||(Y[K.category]=[]),Y[K.category].push(K),Y),{});return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${s?"ml-0 lg:ml-16":"ml-0 lg:ml-64"}`,children:[r.jsx(gn,{title:i.rolesManagement}),r.jsx("main",{className:"flex-1 overflow-auto",children:r.jsxs("div",{className:"space-y-6 p-4 sm:p-6 max-w-full",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:i.rolesManagement}),r.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:i.rolesDescription})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:r.jsxs(M,{onClick:()=>h(!0),children:[r.jsx(Zt,{className:"mr-2 h-4 w-4"}),i.createRole]})})]}),r.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:i.totalRoles}),r.jsx(Lt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold",children:(p==null?void 0:p.length)||0})})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:i.globalRoles}),r.jsx(dr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(p==null?void 0:p.filter(Y=>!Y.advertiserId).length)||0})})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:i.advertiserRoles}),r.jsx(ar,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600",children:(p==null?void 0:p.filter(Y=>Y.advertiserId).length)||0})})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:i.activeRoles}),r.jsx(Lt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600",children:(p==null?void 0:p.filter(Y=>Y.isActive).length)||0})})]})]}),r.jsx(W,{children:r.jsx(H,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(ne,{placeholder:i.searchPlaceholder,value:l,onChange:Y=>o(Y.target.value),className:"pl-10"})]}),r.jsxs(he,{value:c,onValueChange:d,children:[r.jsx(de,{className:"w-[200px]",children:r.jsx(fe,{placeholder:"Область действия"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:i.allRoles}),r.jsx(S,{value:"global",children:i.global}),r.jsx(S,{value:"advertiser",children:i.advertiser})]})]}),r.jsxs(M,{variant:"outline",onClick:()=>k(),children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),t==="ru"?"Обновить":"Refresh"]})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:i.name}),r.jsx(J,{children:i.description}),r.jsx(J,{children:i.scope}),r.jsx(J,{children:i.permissions}),r.jsx(J,{children:i.restrictions}),r.jsx(J,{children:i.assignedUsers}),r.jsx(J,{children:i.status}),r.jsx(J,{className:"text-right",children:i.actions})]})}),r.jsx($t,{children:N?r.jsx(Re,{children:r.jsx(q,{colSpan:8,className:"text-center py-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}),t==="ru"?"Загрузка...":"Loading..."]})})}):(p==null?void 0:p.length)===0?r.jsx(Re,{children:r.jsx(q,{colSpan:8,className:"text-center py-8",children:i.noRoles})}):p==null?void 0:p.map(Y=>{var K,oe;return r.jsxs(Re,{children:[r.jsx(q,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:Y.name}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",Y.id.substring(0,8),"..."]})]})}),r.jsx(q,{children:r.jsx("div",{className:"max-w-xs truncate",children:Y.description||"Описание отсутствует"})}),r.jsxs(q,{children:[r.jsx(le,{variant:Y.advertiserId?"secondary":"default",className:Y.advertiserId?"bg-orange-100 text-orange-800 border-orange-200":"bg-blue-100 text-blue-800 border-blue-200",children:Y.advertiserId?i.advertiserRole:i.globalRole}),Y.advertiserName&&r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:Y.advertiserName})]}),r.jsx(q,{children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[Y.permissions.slice(0,3).map(ge=>{var Oe;const Ne=pe=>pe.includes("statistics")?"bg-green-100 text-green-800 border-green-200":pe.includes("offers")?"bg-purple-100 text-purple-800 border-purple-200":pe.includes("users")?"bg-blue-100 text-blue-800 border-blue-200":pe.includes("finance")?"bg-yellow-100 text-yellow-800 border-yellow-200":pe.includes("api")?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200";return r.jsx(le,{variant:"outline",className:`text-xs ${Ne(ge)}`,children:((Oe=Vk.find(pe=>pe.id===ge))==null?void 0:Oe.name.split(" ")[0])||ge},ge)}),Y.permissions.length>3&&r.jsxs(le,{variant:"outline",className:"text-xs bg-gray-100 text-gray-800 border-gray-200",children:["+",Y.permissions.length-3]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex gap-1",children:[((K=Y.ipRestrictions)==null?void 0:K.length)>0&&r.jsxs(le,{variant:"outline",className:"text-xs bg-red-100 text-red-800 border-red-200",children:[r.jsx(Qre,{className:"h-3 w-3 mr-1"}),"IP"]}),((oe=Y.geoRestrictions)==null?void 0:oe.length)>0&&r.jsxs(le,{variant:"outline",className:"text-xs bg-yellow-100 text-yellow-800 border-yellow-200",children:[r.jsx(Lv,{className:"h-3 w-3 mr-1"}),"GEO"]}),Y.timeRestrictions&&r.jsxs(le,{variant:"outline",className:"text-xs bg-purple-100 text-purple-800 border-purple-200",children:[r.jsx(lr,{className:"h-3 w-3 mr-1"}),"Время"]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ar,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(le,{variant:"outline",className:`text-xs ${(Y.assignedUsers||0)>10?"bg-green-100 text-green-800 border-green-200":(Y.assignedUsers||0)>5?"bg-yellow-100 text-yellow-800 border-yellow-200":(Y.assignedUsers||0)>0?"bg-blue-100 text-blue-800 border-blue-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:Y.assignedUsers||0})]})}),r.jsx(q,{children:r.jsx(le,{variant:Y.isActive?"default":"destructive",className:`text-xs ${Y.isActive?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200"}`,children:Y.isActive?i.active:i.inactive})}),r.jsx(q,{className:"text-right",children:r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsx(M,{variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(Wx,{className:"h-4 w-4"})})}),r.jsxs(Ps,{align:"end",children:[r.jsxs(Ft,{onClick:()=>{j(Y),x(!0)},children:[r.jsx(hr,{className:"mr-2 h-4 w-4"}),i.view]}),r.jsxs(Ft,{onClick:()=>A(Y),children:[r.jsx(cs,{className:"mr-2 h-4 w-4"}),i.edit]}),r.jsxs(Ft,{onClick:()=>D.mutate(Y.id),className:"text-red-600",children:[r.jsx(wr,{className:"mr-2 h-4 w-4"}),i.delete]})]})]})})]},Y.id)})})]})})})}),r.jsx(jt,{open:u,onOpenChange:h,children:r.jsxs(vt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(yt,{children:r.jsx(bt,{children:i.createRole})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Основная информация"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Название роли *"}),r.jsx(ne,{value:g.name,onChange:Y=>b({...g,name:Y.target.value}),placeholder:"Менеджер партнёров",required:!0})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Область действия"}),r.jsxs(he,{value:g.advertiserId||"global",onValueChange:Y=>b({...g,advertiserId:Y==="global"?null:Y}),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"global",children:"Глобальная роль"}),(F=C==null?void 0:C.data)==null?void 0:F.map(Y=>r.jsxs(S,{value:Y.id,children:[Y.username," (",Y.email,")"]},Y.id))]})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Описание"}),r.jsx(pt,{value:g.description,onChange:Y=>b({...g,description:Y.target.value}),placeholder:"Описание роли и её назначения...",rows:3})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Права доступа"}),r.jsx("div",{className:"grid gap-6",children:Object.entries(z).map(([Y,K])=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:Y}),r.jsx("div",{className:"grid gap-3",children:K.map(oe=>{const ge=oe.icon;return r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(on,{id:oe.id,checked:g.permissions.includes(oe.id),onCheckedChange:()=>O(oe.id)}),r.jsxs("div",{className:"flex items-start space-x-2 flex-1",children:[r.jsx(ge,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:oe.id,className:"font-medium",children:oe.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:oe.description})]})]})]},oe.id)})})]},Y))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Ограничения доступа"}),r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"IP ограничения"}),r.jsx(ne,{value:g.ipRestrictions,onChange:Y=>b({...g,ipRestrictions:Y.target.value}),placeholder:"192.168.1.1, 10.0.0.0/24 (через запятую)"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Оставьте пустым для доступа с любых IP-адресов"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"GEO ограничения"}),r.jsx(ne,{value:g.geoRestrictions,onChange:Y=>b({...g,geoRestrictions:Y.target.value}),placeholder:"RU, BY, KZ (коды стран через запятую)"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Оставьте пустым для доступа из любых стран"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Время входа с"}),r.jsx(ne,{type:"time",value:g.timeRestrictions.startTime,onChange:Y=>b({...g,timeRestrictions:{...g.timeRestrictions,startTime:Y.target.value}})})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Время входа до"}),r.jsx(ne,{type:"time",value:g.timeRestrictions.endTime,onChange:Y=>b({...g,timeRestrictions:{...g.timeRestrictions,endTime:Y.target.value}})})]})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(M,{variant:"outline",onClick:()=>h(!1),children:"Отмена"}),r.jsxs(M,{onClick:$,disabled:_.isPending||!g.name||g.permissions.length===0,children:[_.isPending?r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Создать роль"]})]})]})}),r.jsx(jt,{open:f,onOpenChange:m,children:r.jsxs(vt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Редактировать роль"})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Основная информация"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Название роли *"}),r.jsx(ne,{value:g.name,onChange:Y=>b({...g,name:Y.target.value}),placeholder:"Менеджер партнёров",required:!0})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Область действия"}),r.jsxs(he,{value:g.advertiserId||"global",onValueChange:Y=>b({...g,advertiserId:Y==="global"?null:Y}),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"global",children:"Глобальная роль"}),(R=C==null?void 0:C.data)==null?void 0:R.map(Y=>r.jsxs(S,{value:Y.id,children:[Y.username," (",Y.email,")"]},Y.id))]})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Описание"}),r.jsx(pt,{value:g.description,onChange:Y=>b({...g,description:Y.target.value}),placeholder:"Описание роли и её назначения...",rows:3})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Права доступа"}),r.jsx("div",{className:"grid gap-6",children:Object.entries(z).map(([Y,K])=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:Y}),r.jsx("div",{className:"grid gap-3",children:K.map(oe=>{const ge=oe.icon;return r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(on,{id:`edit-${oe.id}`,checked:g.permissions.includes(oe.id),onCheckedChange:()=>O(oe.id)}),r.jsxs("div",{className:"flex items-start space-x-2 flex-1",children:[r.jsx(ge,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:`edit-${oe.id}`,className:"font-medium",children:oe.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:oe.description})]})]})]},oe.id)})})]},Y))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Ограничения доступа"}),r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"IP ограничения"}),r.jsx(ne,{value:g.ipRestrictions,onChange:Y=>b({...g,ipRestrictions:Y.target.value}),placeholder:"192.168.1.1, 10.0.0.0/24 (через запятую)"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"GEO ограничения"}),r.jsx(ne,{value:g.geoRestrictions,onChange:Y=>b({...g,geoRestrictions:Y.target.value}),placeholder:"RU, BY, KZ (коды стран через запятую)"})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(M,{variant:"outline",onClick:()=>m(!1),children:"Отмена"}),r.jsxs(M,{onClick:T,disabled:P.isPending||!g.name||g.permissions.length===0,children:[P.isPending?r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Обновить роль"]})]})]})}),r.jsx(jt,{open:v,onOpenChange:x,children:r.jsxs(vt,{className:"max-w-2xl",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Детали роли"})}),w&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Название"}),r.jsx("div",{className:"font-medium",children:w.name})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Область действия"}),r.jsx(le,{variant:w.advertiserId?"secondary":"default",children:w.advertiserId?"Рекламодатель":"Глобальная"})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Описание"}),r.jsx("div",{children:w.description||"Описание отсутствует"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Права доступа"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:w.permissions.map(Y=>{var K;return r.jsx(le,{variant:"outline",children:((K=Vk.find(oe=>oe.id===Y))==null?void 0:K.name)||Y},Y)})})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Ограничения"}),r.jsxs("div",{className:"space-y-2 mt-2",children:[((I=w.ipRestrictions)==null?void 0:I.length)>0&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"IP: "}),r.jsx("span",{className:"text-sm",children:w.ipRestrictions.join(", ")})]}),((Q=w.geoRestrictions)==null?void 0:Q.length)>0&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"GEO: "}),r.jsx("span",{className:"text-sm",children:w.geoRestrictions.join(", ")})]})]})]})]})]})})]})})]})]})}function XMe(e,t){const[n,s]=y.useState(e);return y.useEffect(()=>{const a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t]),n}var H4="Tabs",[ZMe,Jqe]=Bn(H4,[s1]),HW=s1(),[QMe,K4]=ZMe(H4),KW=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=e,u=Mm(o),[h,f]=Oi({prop:s,onChange:a,defaultProp:i});return r.jsx(QMe,{scope:n,baseId:Xn(),value:h,onValueChange:f,orientation:l,dir:u,activationMode:c,children:r.jsx(Ze.div,{dir:u,"data-orientation":l,...d,ref:t})})});KW.displayName=H4;var GW="TabsList",YW=y.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...a}=e,i=K4(GW,n),l=HW(n);return r.jsx(P9,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:s,children:r.jsx(Ze.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});YW.displayName=GW;var XW="TabsTrigger",ZW=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...i}=e,l=K4(XW,n),o=HW(n),c=eH(l.baseId,s),d=tH(l.baseId,s),u=s===l.value;return r.jsx(A9,{asChild:!0,...o,focusable:!a,active:u,children:r.jsx(Ze.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Le(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?l.onValueChange(s):h.preventDefault()}),onKeyDown:Le(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&l.onValueChange(s)}),onFocus:Le(e.onFocus,()=>{const h=l.activationMode!=="manual";!u&&!a&&h&&l.onValueChange(s)})})})});ZW.displayName=XW;var QW="TabsContent",JW=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:a,children:i,...l}=e,o=K4(QW,n),c=eH(o.baseId,s),d=tH(o.baseId,s),u=s===o.value,h=y.useRef(u);return y.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),r.jsx(zn,{present:a||u,children:({present:f})=>r.jsx(Ze.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});JW.displayName=QW;function eH(e,t){return`${e}-trigger-${t}`}function tH(e,t){return`${e}-content-${t}`}var JMe=KW,rH=YW,nH=ZW,sH=JW;const Zr=JMe,Vr=y.forwardRef(({className:e,...t},n)=>r.jsx(rH,{ref:n,className:Ae("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Vr.displayName=rH.displayName;const We=y.forwardRef(({className:e,...t},n)=>r.jsx(nH,{ref:n,className:Ae("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));We.displayName=nH.displayName;const He=y.forwardRef(({className:e,...t},n)=>r.jsx(sH,{ref:n,className:Ae("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));He.displayName=sH.displayName;var G4="Switch",[e$e,eWe]=Bn(G4),[t$e,r$e]=e$e(G4),aH=y.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:d,form:u,...h}=e,[f,m]=y.useState(null),v=St(t,b=>m(b)),x=y.useRef(!1),w=f?u||!!f.closest("form"):!0,[j=!1,g]=Oi({prop:a,defaultProp:i,onChange:d});return r.jsxs(t$e,{scope:n,checked:j,disabled:o,children:[r.jsx(Ze.button,{type:"button",role:"switch","aria-checked":j,"aria-required":l,"data-state":oH(j),"data-disabled":o?"":void 0,disabled:o,value:c,...h,ref:v,onClick:Le(e.onClick,b=>{g(p=>!p),w&&(x.current=b.isPropagationStopped(),x.current||b.stopPropagation())})}),w&&r.jsx(n$e,{control:f,bubbles:!x.current,name:s,value:c,checked:j,required:l,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});aH.displayName=G4;var iH="SwitchThumb",lH=y.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,a=r$e(iH,n);return r.jsx(Ze.span,{"data-state":oH(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});lH.displayName=iH;var n$e=e=>{const{control:t,checked:n,bubbles:s=!0,...a}=e,i=y.useRef(null),l=c1(n),o=Yw(t);return y.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&h){const f=new Event("click",{bubbles:s});h.call(c,n),c.dispatchEvent(f)}},[l,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:i,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function oH(e){return e?"checked":"unchecked"}var cH=aH,s$e=lH;const Ye=y.forwardRef(({className:e,...t},n)=>r.jsx(cH,{className:Ae("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:r.jsx(s$e,{className:Ae("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ye.displayName=cH.displayName;var ny=e=>e.type==="checkbox",Rd=e=>e instanceof Date,js=e=>e==null;const dH=e=>typeof e=="object";var cn=e=>!js(e)&&!Array.isArray(e)&&dH(e)&&!Rd(e),uH=e=>cn(e)&&e.target?ny(e.target)?e.target.checked:e.target.value:e,a$e=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,hH=(e,t)=>e.has(a$e(t)),i$e=e=>{const t=e.constructor&&e.constructor.prototype;return cn(t)&&t.hasOwnProperty("isPrototypeOf")},Y4=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Wn(e){let t;const n=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Y4&&(e instanceof Blob||s))&&(n||cn(e)))if(t=n?[]:{},!n&&!i$e(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Wn(e[a]));else return e;return t}var iN=e=>Array.isArray(e)?e.filter(Boolean):[],rn=e=>e===void 0,Ge=(e,t,n)=>{if(!t||!cn(e))return n;const s=iN(t.split(/[,[\].]+?/)).reduce((a,i)=>js(a)?a:a[i],e);return rn(s)||s===e?rn(e[t])?n:e[t]:s},ca=e=>typeof e=="boolean",X4=e=>/^\w*$/.test(e),fH=e=>iN(e.replace(/["|']|\]/g,"").split(/\.|\[/)),xr=(e,t,n)=>{let s=-1;const a=X4(t)?[t]:fH(t),i=a.length,l=i-1;for(;++s<i;){const o=a[s];let c=n;if(s!==l){const d=e[o];c=cn(d)||Array.isArray(d)?d:isNaN(+a[s+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const Dj={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},vi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ql={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},mH=Z.createContext(null),lN=()=>Z.useContext(mH),l$e=e=>{const{children:t,...n}=e;return Z.createElement(mH.Provider,{value:n},t)};var pH=(e,t,n,s=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const l=i;return t._proxyFormState[l]!==vi.all&&(t._proxyFormState[l]=!s||vi.all),n&&(n[l]=!0),e[l]}});return a};function o$e(e){const t=lN(),{control:n=t.control,disabled:s,name:a,exact:i}=e||{},[l,o]=Z.useState(n._formState),c=Z.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=Z.useRef(a);return d.current=a,Z.useEffect(()=>n._subscribe({name:d.current,formState:c.current,exact:i,callback:u=>{!s&&o({...n._formState,...u})}}),[n,s,i]),Z.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),Z.useMemo(()=>pH(l,n,c.current,!1),[l,n])}var bl=e=>typeof e=="string",xH=(e,t,n,s,a)=>bl(e)?(s&&t.watch.add(e),Ge(n,e,a)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),Ge(n,i))):(s&&(t.watchAll=!0),n);function c$e(e){const t=lN(),{control:n=t.control,name:s,defaultValue:a,disabled:i,exact:l}=e||{},o=Z.useRef(s),c=Z.useRef(a);o.current=s,Z.useEffect(()=>n._subscribe({name:o.current,formState:{values:!0},exact:l,callback:h=>!i&&u(xH(o.current,n._names,h.values||n._formValues,!1,c.current))}),[n,i,l]);const[d,u]=Z.useState(n._getWatch(s,a));return Z.useEffect(()=>n._removeUnmounted()),d}function d$e(e){const t=lN(),{name:n,disabled:s,control:a=t.control,shouldUnregister:i}=e,l=hH(a._names.array,n),o=c$e({control:a,name:n,defaultValue:Ge(a._formValues,n,Ge(a._defaultValues,n,e.defaultValue)),exact:!0}),c=o$e({control:a,name:n,exact:!0}),d=Z.useRef(e),u=Z.useRef(a.register(n,{...e.rules,value:o,...ca(e.disabled)?{disabled:e.disabled}:{}})),h=Z.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ge(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ge(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ge(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ge(c.validatingFields,n)},error:{enumerable:!0,get:()=>Ge(c.errors,n)}}),[c,n]),f=Z.useCallback(w=>u.current.onChange({target:{value:uH(w),name:n},type:Dj.CHANGE}),[n]),m=Z.useCallback(()=>u.current.onBlur({target:{value:Ge(a._formValues,n),name:n},type:Dj.BLUR}),[n,a._formValues]),v=Z.useCallback(w=>{const j=Ge(a._fields,n);j&&w&&(j._f.ref={focus:()=>w.focus(),select:()=>w.select(),setCustomValidity:g=>w.setCustomValidity(g),reportValidity:()=>w.reportValidity()})},[a._fields,n]),x=Z.useMemo(()=>({name:n,value:o,...ca(s)||c.disabled?{disabled:c.disabled||s}:{},onChange:f,onBlur:m,ref:v}),[n,s,c.disabled,f,m,v,o]);return Z.useEffect(()=>{const w=a._options.shouldUnregister||i;a.register(n,{...d.current.rules,...ca(d.current.disabled)?{disabled:d.current.disabled}:{}});const j=(g,b)=>{const p=Ge(a._fields,g);p&&p._f&&(p._f.mount=b)};if(j(n,!0),w){const g=Wn(Ge(a._options.defaultValues,n));xr(a._defaultValues,n,g),rn(Ge(a._formValues,n))&&xr(a._formValues,n,g)}return!l&&a.register(n),()=>{(l?w&&!a._state.action:w)?a.unregister(n):j(n,!1)}},[n,a,l,i]),Z.useEffect(()=>{a._setDisabledField({disabled:s,name:n})},[s,n,a]),Z.useMemo(()=>({field:x,formState:c,fieldState:h}),[x,c,h])}const u$e=e=>e.render(d$e(e));var gH=(e,t,n,s,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:a||!0}}:{},xx=e=>Array.isArray(e)?e:[e],EI=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},M_=e=>js(e)||!dH(e);function sc(e,t){if(M_(e)||M_(t))return e===t;if(Rd(e)&&Rd(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(const a of n){const i=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const l=t[a];if(Rd(i)&&Rd(l)||cn(i)&&cn(l)||Array.isArray(i)&&Array.isArray(l)?!sc(i,l):i!==l)return!1}}return!0}var ys=e=>cn(e)&&!Object.keys(e).length,Z4=e=>e.type==="file",yi=e=>typeof e=="function",Mj=e=>{if(!Y4)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},vH=e=>e.type==="select-multiple",Q4=e=>e.type==="radio",h$e=e=>Q4(e)||ny(e),qk=e=>Mj(e)&&e.isConnected;function f$e(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=rn(e)?s++:e[t[s++]];return e}function m$e(e){for(const t in e)if(e.hasOwnProperty(t)&&!rn(e[t]))return!1;return!0}function bn(e,t){const n=Array.isArray(t)?t:X4(t)?[t]:fH(t),s=n.length===1?e:f$e(e,n),a=n.length-1,i=n[a];return s&&delete s[i],a!==0&&(cn(s)&&ys(s)||Array.isArray(s)&&m$e(s))&&bn(e,n.slice(0,-1)),e}var yH=e=>{for(const t in e)if(yi(e[t]))return!0;return!1};function $j(e,t={}){const n=Array.isArray(e);if(cn(e)||n)for(const s in e)Array.isArray(e[s])||cn(e[s])&&!yH(e[s])?(t[s]=Array.isArray(e[s])?[]:{},$j(e[s],t[s])):js(e[s])||(t[s]=!0);return t}function bH(e,t,n){const s=Array.isArray(e);if(cn(e)||s)for(const a in e)Array.isArray(e[a])||cn(e[a])&&!yH(e[a])?rn(t)||M_(n[a])?n[a]=Array.isArray(e[a])?$j(e[a],[]):{...$j(e[a])}:bH(e[a],js(t)?{}:t[a],n[a]):n[a]=!sc(e[a],t[a]);return n}var Ap=(e,t)=>bH(e,t,$j(t));const OI={value:!1,isValid:!1},RI={value:!0,isValid:!0};var jH=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!rn(e[0].attributes.value)?rn(e[0].value)||e[0].value===""?RI:{value:e[0].value,isValid:!0}:RI:OI}return OI},wH=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>rn(e)?e:t?e===""?NaN:e&&+e:n&&bl(e)?new Date(e):s?s(e):e;const DI={isValid:!1,value:null};var NH=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,DI):DI;function MI(e){const t=e.ref;return Z4(t)?t.files:Q4(t)?NH(e.refs).value:vH(t)?[...t.selectedOptions].map(({value:n})=>n):ny(t)?jH(e.refs).value:wH(rn(t.value)?e.ref.value:t.value,e)}var p$e=(e,t,n,s)=>{const a={};for(const i of e){const l=Ge(t,i);l&&xr(a,i,l._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:s}},Ij=e=>e instanceof RegExp,Tp=e=>rn(e)?e:Ij(e)?e.source:cn(e)?Ij(e.value)?e.value.source:e.value:e,$I=e=>({isOnSubmit:!e||e===vi.onSubmit,isOnBlur:e===vi.onBlur,isOnChange:e===vi.onChange,isOnAll:e===vi.all,isOnTouch:e===vi.onTouched});const II="AsyncFunction";var x$e=e=>!!e&&!!e.validate&&!!(yi(e.validate)&&e.validate.constructor.name===II||cn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===II)),g$e=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),FI=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const gx=(e,t,n,s)=>{for(const a of n||Object.keys(e)){const i=Ge(e,a);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],a)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(gx(o,t))break}else if(cn(o)&&gx(o,t))break}}};function LI(e,t,n){const s=Ge(e,n);if(s||X4(n))return{error:s,name:n};const a=n.split(".");for(;a.length;){const i=a.join("."),l=Ge(t,i),o=Ge(e,i);if(l&&!Array.isArray(l)&&n!==i)return{name:n};if(o&&o.type)return{name:i,error:o};a.pop()}return{name:n}}var v$e=(e,t,n,s)=>{n(e);const{name:a,...i}=e;return ys(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!s||vi.all))},y$e=(e,t,n)=>!e||!t||e===t||xx(e).some(s=>s&&(n?s===t:s.startsWith(t)||t.startsWith(s))),b$e=(e,t,n,s,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(t||e):(n?s.isOnBlur:a.isOnBlur)?!e:(n?s.isOnChange:a.isOnChange)?e:!0,j$e=(e,t)=>!iN(Ge(e,t)).length&&bn(e,t),w$e=(e,t,n)=>{const s=xx(Ge(e,n));return xr(s,"root",t[n]),xr(e,n,s),e},L0=e=>bl(e);function UI(e,t,n="validate"){if(L0(e)||Array.isArray(e)&&e.every(L0)||ca(e)&&!e)return{type:n,message:L0(e)?e:"",ref:t}}var sh=e=>cn(e)&&!Ij(e)?e:{value:e,message:""},BI=async(e,t,n,s,a,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:h,max:f,pattern:m,validate:v,name:x,valueAsNumber:w,mount:j}=e._f,g=Ge(n,x);if(!j||t.has(x))return{};const b=o?o[0]:l,p=$=>{a&&b.reportValidity&&(b.setCustomValidity(ca($)?"":$||""),b.reportValidity())},N={},k=Q4(l),C=ny(l),_=k||C,P=(w||Z4(l))&&rn(l.value)&&rn(g)||Mj(l)&&l.value===""||g===""||Array.isArray(g)&&!g.length,D=gH.bind(null,x,s,N),E=($,A,T,O=ql.maxLength,z=ql.minLength)=>{const F=$?A:T;N[x]={type:$?O:z,message:F,ref:l,...D($?O:z,F)}};if(i?!Array.isArray(g)||!g.length:c&&(!_&&(P||js(g))||ca(g)&&!g||C&&!jH(o).isValid||k&&!NH(o).isValid)){const{value:$,message:A}=L0(c)?{value:!!c,message:c}:sh(c);if($&&(N[x]={type:ql.required,message:A,ref:b,...D(ql.required,A)},!s))return p(A),N}if(!P&&(!js(h)||!js(f))){let $,A;const T=sh(f),O=sh(h);if(!js(g)&&!isNaN(g)){const z=l.valueAsNumber||g&&+g;js(T.value)||($=z>T.value),js(O.value)||(A=z<O.value)}else{const z=l.valueAsDate||new Date(g),F=Q=>new Date(new Date().toDateString()+" "+Q),R=l.type=="time",I=l.type=="week";bl(T.value)&&g&&($=R?F(g)>F(T.value):I?g>T.value:z>new Date(T.value)),bl(O.value)&&g&&(A=R?F(g)<F(O.value):I?g<O.value:z<new Date(O.value))}if(($||A)&&(E(!!$,T.message,O.message,ql.max,ql.min),!s))return p(N[x].message),N}if((d||u)&&!P&&(bl(g)||i&&Array.isArray(g))){const $=sh(d),A=sh(u),T=!js($.value)&&g.length>+$.value,O=!js(A.value)&&g.length<+A.value;if((T||O)&&(E(T,$.message,A.message),!s))return p(N[x].message),N}if(m&&!P&&bl(g)){const{value:$,message:A}=sh(m);if(Ij($)&&!g.match($)&&(N[x]={type:ql.pattern,message:A,ref:l,...D(ql.pattern,A)},!s))return p(A),N}if(v){if(yi(v)){const $=await v(g,n),A=UI($,b);if(A&&(N[x]={...A,...D(ql.validate,A.message)},!s))return p(A.message),N}else if(cn(v)){let $={};for(const A in v){if(!ys($)&&!s)break;const T=UI(await v[A](g,n),b,A);T&&($={...T,...D(A,T.message)},p(T.message),s&&(N[x]=$))}if(!ys($)&&(N[x]={ref:b,...$},!s))return N}}return p(!0),N};const N$e={mode:vi.onSubmit,reValidateMode:vi.onChange,shouldFocusError:!0};function k$e(e={}){let t={...N$e,...e},n={submitCount:0,isDirty:!1,isLoading:yi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const s={};let a=cn(t.defaultValues)||cn(t.values)?Wn(t.values||t.defaultValues)||{}:{},i=t.shouldUnregister?{}:Wn(a),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const f={array:EI(),state:EI()},m=$I(t.mode),v=$I(t.reValidateMode),x=t.criteriaMode===vi.all,w=V=>U=>{clearTimeout(d),d=setTimeout(V,U)},j=async V=>{if(!t.disabled&&(u.isValid||h.isValid||V)){const U=t.resolver?ys((await P()).errors):await E(s,!0);U!==n.isValid&&f.state.next({isValid:U})}},g=(V,U)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((V||Array.from(o.mount)).forEach(re=>{re&&(U?xr(n.validatingFields,re,U):bn(n.validatingFields,re))}),f.state.next({validatingFields:n.validatingFields,isValidating:!ys(n.validatingFields)}))},b=(V,U=[],re,ve,_e=!0,Pe=!0)=>{if(ve&&re&&!t.disabled){if(l.action=!0,Pe&&Array.isArray(Ge(s,V))){const X=re(Ge(s,V),ve.argA,ve.argB);_e&&xr(s,V,X)}if(Pe&&Array.isArray(Ge(n.errors,V))){const X=re(Ge(n.errors,V),ve.argA,ve.argB);_e&&xr(n.errors,V,X),j$e(n.errors,V)}if((u.touchedFields||h.touchedFields)&&Pe&&Array.isArray(Ge(n.touchedFields,V))){const X=re(Ge(n.touchedFields,V),ve.argA,ve.argB);_e&&xr(n.touchedFields,V,X)}(u.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Ap(a,i)),f.state.next({name:V,isDirty:A(V,U),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else xr(i,V,U)},p=(V,U)=>{xr(n.errors,V,U),f.state.next({errors:n.errors})},N=V=>{n.errors=V,f.state.next({errors:n.errors,isValid:!1})},k=(V,U,re,ve)=>{const _e=Ge(s,V);if(_e){const Pe=Ge(i,V,rn(re)?Ge(a,V):re);rn(Pe)||ve&&ve.defaultChecked||U?xr(i,V,U?Pe:MI(_e._f)):z(V,Pe),l.mount&&j()}},C=(V,U,re,ve,_e)=>{let Pe=!1,X=!1;const ee={name:V};if(!t.disabled){if(!re||ve){(u.isDirty||h.isDirty)&&(X=n.isDirty,n.isDirty=ee.isDirty=A(),Pe=X!==ee.isDirty);const ke=sc(Ge(a,V),U);X=!!Ge(n.dirtyFields,V),ke?bn(n.dirtyFields,V):xr(n.dirtyFields,V,!0),ee.dirtyFields=n.dirtyFields,Pe=Pe||(u.dirtyFields||h.dirtyFields)&&X!==!ke}if(re){const ke=Ge(n.touchedFields,V);ke||(xr(n.touchedFields,V,re),ee.touchedFields=n.touchedFields,Pe=Pe||(u.touchedFields||h.touchedFields)&&ke!==re)}Pe&&_e&&f.state.next(ee)}return Pe?ee:{}},_=(V,U,re,ve)=>{const _e=Ge(n.errors,V),Pe=(u.isValid||h.isValid)&&ca(U)&&n.isValid!==U;if(t.delayError&&re?(c=w(()=>p(V,re)),c(t.delayError)):(clearTimeout(d),c=null,re?xr(n.errors,V,re):bn(n.errors,V)),(re?!sc(_e,re):_e)||!ys(ve)||Pe){const X={...ve,...Pe&&ca(U)?{isValid:U}:{},errors:n.errors,name:V};n={...n,...X},f.state.next(X)}},P=async V=>{g(V,!0);const U=await t.resolver(i,t.context,p$e(V||o.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return g(V),U},D=async V=>{const{errors:U}=await P(V);if(V)for(const re of V){const ve=Ge(U,re);ve?xr(n.errors,re,ve):bn(n.errors,re)}else n.errors=U;return U},E=async(V,U,re={valid:!0})=>{for(const ve in V){const _e=V[ve];if(_e){const{_f:Pe,...X}=_e;if(Pe){const ee=o.array.has(Pe.name),ke=_e._f&&x$e(_e._f);ke&&u.validatingFields&&g([ve],!0);const Fe=await BI(_e,o.disabled,i,x,t.shouldUseNativeValidation&&!U,ee);if(ke&&u.validatingFields&&g([ve]),Fe[Pe.name]&&(re.valid=!1,U))break;!U&&(Ge(Fe,Pe.name)?ee?w$e(n.errors,Fe,Pe.name):xr(n.errors,Pe.name,Fe[Pe.name]):bn(n.errors,Pe.name))}!ys(X)&&await E(X,U,re)}}return re.valid},$=()=>{for(const V of o.unMount){const U=Ge(s,V);U&&(U._f.refs?U._f.refs.every(re=>!qk(re)):!qk(U._f.ref))&&xe(V)}o.unMount=new Set},A=(V,U)=>!t.disabled&&(V&&U&&xr(i,V,U),!sc(K(),a)),T=(V,U,re)=>xH(V,o,{...l.mount?i:rn(U)?a:bl(V)?{[V]:U}:U},re,U),O=V=>iN(Ge(l.mount?i:a,V,t.shouldUnregister?Ge(a,V,[]):[])),z=(V,U,re={})=>{const ve=Ge(s,V);let _e=U;if(ve){const Pe=ve._f;Pe&&(!Pe.disabled&&xr(i,V,wH(U,Pe)),_e=Mj(Pe.ref)&&js(U)?"":U,vH(Pe.ref)?[...Pe.ref.options].forEach(X=>X.selected=_e.includes(X.value)):Pe.refs?ny(Pe.ref)?Pe.refs.length>1?Pe.refs.forEach(X=>(!X.defaultChecked||!X.disabled)&&(X.checked=Array.isArray(_e)?!!_e.find(ee=>ee===X.value):_e===X.value)):Pe.refs[0]&&(Pe.refs[0].checked=!!_e):Pe.refs.forEach(X=>X.checked=X.value===_e):Z4(Pe.ref)?Pe.ref.value="":(Pe.ref.value=_e,Pe.ref.type||f.state.next({name:V,values:Wn(i)})))}(re.shouldDirty||re.shouldTouch)&&C(V,_e,re.shouldTouch,re.shouldDirty,!0),re.shouldValidate&&Y(V)},F=(V,U,re)=>{for(const ve in U){const _e=U[ve],Pe=`${V}.${ve}`,X=Ge(s,Pe);(o.array.has(V)||cn(_e)||X&&!X._f)&&!Rd(_e)?F(Pe,_e,re):z(Pe,_e,re)}},R=(V,U,re={})=>{const ve=Ge(s,V),_e=o.array.has(V),Pe=Wn(U);xr(i,V,Pe),_e?(f.array.next({name:V,values:Wn(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&re.shouldDirty&&f.state.next({name:V,dirtyFields:Ap(a,i),isDirty:A(V,Pe)})):ve&&!ve._f&&!js(Pe)?F(V,Pe,re):z(V,Pe,re),FI(V,o)&&f.state.next({...n}),f.state.next({name:l.mount?V:void 0,values:Wn(i)})},I=async V=>{l.mount=!0;const U=V.target;let re=U.name,ve=!0;const _e=Ge(s,re),Pe=X=>{ve=Number.isNaN(X)||Rd(X)&&isNaN(X.getTime())||sc(X,Ge(i,re,X))};if(_e){let X,ee;const ke=U.type?MI(_e._f):uH(V),Fe=V.type===Dj.BLUR||V.type===Dj.FOCUS_OUT,or=!g$e(_e._f)&&!t.resolver&&!Ge(n.errors,re)&&!_e._f.deps||b$e(Fe,Ge(n.touchedFields,re),n.isSubmitted,v,m),Rr=FI(re,o,Fe);xr(i,re,ke),Fe?(_e._f.onBlur&&_e._f.onBlur(V),c&&c(0)):_e._f.onChange&&_e._f.onChange(V);const _t=C(re,ke,Fe),mr=!ys(_t)||Rr;if(!Fe&&f.state.next({name:re,type:V.type,values:Wn(i)}),or)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?Fe&&j():Fe||j()),mr&&f.state.next({name:re,...Rr?{}:_t});if(!Fe&&Rr&&f.state.next({...n}),t.resolver){const{errors:Ht}=await P([re]);if(Pe(ke),ve){const ka=LI(n.errors,s,re),ea=LI(Ht,s,ka.name||re);X=ea.error,re=ea.name,ee=ys(Ht)}}else g([re],!0),X=(await BI(_e,o.disabled,i,x,t.shouldUseNativeValidation))[re],g([re]),Pe(ke),ve&&(X?ee=!1:(u.isValid||h.isValid)&&(ee=await E(s,!0)));ve&&(_e._f.deps&&Y(_e._f.deps),_(re,ee,X,_t))}},Q=(V,U)=>{if(Ge(n.errors,U)&&V.focus)return V.focus(),1},Y=async(V,U={})=>{let re,ve;const _e=xx(V);if(t.resolver){const Pe=await D(rn(V)?V:_e);re=ys(Pe),ve=V?!_e.some(X=>Ge(Pe,X)):re}else V?(ve=(await Promise.all(_e.map(async Pe=>{const X=Ge(s,Pe);return await E(X&&X._f?{[Pe]:X}:X)}))).every(Boolean),!(!ve&&!n.isValid)&&j()):ve=re=await E(s);return f.state.next({...!bl(V)||(u.isValid||h.isValid)&&re!==n.isValid?{}:{name:V},...t.resolver||!V?{isValid:re}:{},errors:n.errors}),U.shouldFocus&&!ve&&gx(s,Q,V?_e:o.mount),ve},K=V=>{const U={...l.mount?i:a};return rn(V)?U:bl(V)?Ge(U,V):V.map(re=>Ge(U,re))},oe=(V,U)=>({invalid:!!Ge((U||n).errors,V),isDirty:!!Ge((U||n).dirtyFields,V),error:Ge((U||n).errors,V),isValidating:!!Ge(n.validatingFields,V),isTouched:!!Ge((U||n).touchedFields,V)}),ge=V=>{V&&xx(V).forEach(U=>bn(n.errors,U)),f.state.next({errors:V?n.errors:{}})},Ne=(V,U,re)=>{const ve=(Ge(s,V,{_f:{}})._f||{}).ref,_e=Ge(n.errors,V)||{},{ref:Pe,message:X,type:ee,...ke}=_e;xr(n.errors,V,{...ke,...U,ref:ve}),f.state.next({name:V,errors:n.errors,isValid:!1}),re&&re.shouldFocus&&ve&&ve.focus&&ve.focus()},Oe=(V,U)=>yi(V)?f.state.subscribe({next:re=>V(T(void 0,U),re)}):T(V,U,!0),pe=V=>f.state.subscribe({next:U=>{y$e(V.name,U.name,V.exact)&&v$e(U,V.formState||u,Qe,V.reRenderRoot)&&V.callback({values:{...i},...n,...U})}}).unsubscribe,Me=V=>(l.mount=!0,h={...h,...V.formState},pe({...V,formState:h})),xe=(V,U={})=>{for(const re of V?xx(V):o.mount)o.mount.delete(re),o.array.delete(re),U.keepValue||(bn(s,re),bn(i,re)),!U.keepError&&bn(n.errors,re),!U.keepDirty&&bn(n.dirtyFields,re),!U.keepTouched&&bn(n.touchedFields,re),!U.keepIsValidating&&bn(n.validatingFields,re),!t.shouldUnregister&&!U.keepDefaultValue&&bn(a,re);f.state.next({values:Wn(i)}),f.state.next({...n,...U.keepDirty?{isDirty:A()}:{}}),!U.keepIsValid&&j()},ce=({disabled:V,name:U})=>{(ca(V)&&l.mount||V||o.disabled.has(U))&&(V?o.disabled.add(U):o.disabled.delete(U))},Ie=(V,U={})=>{let re=Ge(s,V);const ve=ca(U.disabled)||ca(t.disabled);return xr(s,V,{...re||{},_f:{...re&&re._f?re._f:{ref:{name:V}},name:V,mount:!0,...U}}),o.mount.add(V),re?ce({disabled:ca(U.disabled)?U.disabled:t.disabled,name:V}):k(V,!0,U.value),{...ve?{disabled:U.disabled||t.disabled}:{},...t.progressive?{required:!!U.required,min:Tp(U.min),max:Tp(U.max),minLength:Tp(U.minLength),maxLength:Tp(U.maxLength),pattern:Tp(U.pattern)}:{},name:V,onChange:I,onBlur:I,ref:_e=>{if(_e){Ie(V,U),re=Ge(s,V);const Pe=rn(_e.value)&&_e.querySelectorAll&&_e.querySelectorAll("input,select,textarea")[0]||_e,X=h$e(Pe),ee=re._f.refs||[];if(X?ee.find(ke=>ke===Pe):Pe===re._f.ref)return;xr(s,V,{_f:{...re._f,...X?{refs:[...ee.filter(qk),Pe,...Array.isArray(Ge(a,V))?[{}]:[]],ref:{type:Pe.type,name:V}}:{ref:Pe}}}),k(V,!1,void 0,Pe)}else re=Ge(s,V,{}),re._f&&(re._f.mount=!1),(t.shouldUnregister||U.shouldUnregister)&&!(hH(o.array,V)&&l.action)&&o.unMount.add(V)}}},ie=()=>t.shouldFocusError&&gx(s,Q,o.mount),st=V=>{ca(V)&&(f.state.next({disabled:V}),gx(s,(U,re)=>{const ve=Ge(s,re);ve&&(U.disabled=ve._f.disabled||V,Array.isArray(ve._f.refs)&&ve._f.refs.forEach(_e=>{_e.disabled=ve._f.disabled||V}))},0,!1))},G=(V,U)=>async re=>{let ve;re&&(re.preventDefault&&re.preventDefault(),re.persist&&re.persist());let _e=Wn(i);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:Pe,values:X}=await P();n.errors=Pe,_e=X}else await E(s);if(o.disabled.size)for(const Pe of o.disabled)xr(_e,Pe,void 0);if(bn(n.errors,"root"),ys(n.errors)){f.state.next({errors:{}});try{await V(_e,re)}catch(Pe){ve=Pe}}else U&&await U({...n.errors},re),ie(),setTimeout(ie);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ys(n.errors)&&!ve,submitCount:n.submitCount+1,errors:n.errors}),ve)throw ve},De=(V,U={})=>{Ge(s,V)&&(rn(U.defaultValue)?R(V,Wn(Ge(a,V))):(R(V,U.defaultValue),xr(a,V,Wn(U.defaultValue))),U.keepTouched||bn(n.touchedFields,V),U.keepDirty||(bn(n.dirtyFields,V),n.isDirty=U.defaultValue?A(V,Wn(Ge(a,V))):A()),U.keepError||(bn(n.errors,V),u.isValid&&j()),f.state.next({...n}))},me=(V,U={})=>{const re=V?Wn(V):a,ve=Wn(re),_e=ys(V),Pe=_e?a:ve;if(U.keepDefaultValues||(a=re),!U.keepValues){if(U.keepDirtyValues){const X=new Set([...o.mount,...Object.keys(Ap(a,i))]);for(const ee of Array.from(X))Ge(n.dirtyFields,ee)?xr(Pe,ee,Ge(i,ee)):R(ee,Ge(Pe,ee))}else{if(Y4&&rn(V))for(const X of o.mount){const ee=Ge(s,X);if(ee&&ee._f){const ke=Array.isArray(ee._f.refs)?ee._f.refs[0]:ee._f.ref;if(Mj(ke)){const Fe=ke.closest("form");if(Fe){Fe.reset();break}}}}for(const X of o.mount)R(X,Ge(Pe,X))}i=Wn(Pe),f.array.next({values:{...Pe}}),f.state.next({values:{...Pe}})}o={mount:U.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!U.keepIsValid||!!U.keepDirtyValues,l.watch=!!t.shouldUnregister,f.state.next({submitCount:U.keepSubmitCount?n.submitCount:0,isDirty:_e?!1:U.keepDirty?n.isDirty:!!(U.keepDefaultValues&&!sc(V,a)),isSubmitted:U.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:_e?{}:U.keepDirtyValues?U.keepDefaultValues&&i?Ap(a,i):n.dirtyFields:U.keepDefaultValues&&V?Ap(a,V):U.keepDirty?n.dirtyFields:{},touchedFields:U.keepTouched?n.touchedFields:{},errors:U.keepErrors?n.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Be=(V,U)=>me(yi(V)?V(i):V,U),qe=(V,U={})=>{const re=Ge(s,V),ve=re&&re._f;if(ve){const _e=ve.refs?ve.refs[0]:ve.ref;_e.focus&&(_e.focus(),U.shouldSelect&&yi(_e.select)&&_e.select())}},Qe=V=>{n={...n,...V}},er={control:{register:Ie,unregister:xe,getFieldState:oe,handleSubmit:G,setError:Ne,_subscribe:pe,_runSchema:P,_getWatch:T,_getDirty:A,_setValid:j,_setFieldArray:b,_setDisabledField:ce,_setErrors:N,_getFieldArray:O,_reset:me,_resetDefaultValues:()=>yi(t.defaultValues)&&t.defaultValues().then(V=>{Be(V,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:$,_disableForm:st,_subjects:f,_proxyFormState:u,get _fields(){return s},get _formValues(){return i},get _state(){return l},set _state(V){l=V},get _defaultValues(){return a},get _names(){return o},set _names(V){o=V},get _formState(){return n},get _options(){return t},set _options(V){t={...t,...V}}},subscribe:Me,trigger:Y,register:Ie,handleSubmit:G,watch:Oe,setValue:R,getValues:K,reset:Be,resetField:De,clearErrors:ge,unregister:xe,setError:Ne,setFocus:qe,getFieldState:oe};return{...er,formControl:er}}function Zm(e={}){const t=Z.useRef(void 0),n=Z.useRef(void 0),[s,a]=Z.useState({isDirty:!1,isValidating:!1,isLoading:yi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:yi(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:k$e(e),formState:s},e.formControl&&e.defaultValues&&!yi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const i=t.current.control;return i._options=e,Z.useLayoutEffect(()=>i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0}),[i]),Z.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Z.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==s.isDirty&&i._subjects.state.next({isDirty:l})}},[i,s.isDirty]),Z.useEffect(()=>{e.values&&!sc(e.values,n.current)?(i._reset(e.values,i._options.resetOptions),n.current=e.values,a(l=>({...l}))):i._resetDefaultValues()},[e.values,i]),Z.useEffect(()=>{e.errors&&!ys(e.errors)&&i._setErrors(e.errors)},[e.errors,i]),Z.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),Z.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[e.shouldUnregister,i]),t.current.formState=pH(s,i),t.current}const Qm=l$e,kH=y.createContext({}),dt=({...e})=>r.jsx(kH.Provider,{value:{name:e.name},children:r.jsx(u$e,{...e})}),oN=()=>{const e=y.useContext(kH),t=y.useContext(SH),{getFieldState:n,formState:s}=lN(),a=n(e.name,s);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},SH=y.createContext({}),ct=y.forwardRef(({className:e,...t},n)=>{const s=y.useId();return r.jsx(SH.Provider,{value:{id:s},children:r.jsx("div",{ref:n,className:Ae("space-y-2",e),...t})})});ct.displayName="FormItem";const ut=y.forwardRef(({className:e,...t},n)=>{const{error:s,formItemId:a}=oN();return r.jsx(L,{ref:n,className:Ae(s&&"text-destructive",e),htmlFor:a,...t})});ut.displayName="FormLabel";const ft=y.forwardRef(({...e},t)=>{const{error:n,formItemId:s,formDescriptionId:a,formMessageId:i}=oN();return r.jsx(q8,{ref:t,id:s,"aria-describedby":n?`${a} ${i}`:`${a}`,"aria-invalid":!!n,...e})});ft.displayName="FormControl";const S$e=y.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:s}=oN();return r.jsx("p",{ref:n,id:s,className:Ae("text-sm text-muted-foreground",e),...t})});S$e.displayName="FormDescription";const mt=y.forwardRef(({className:e,children:t,...n},s)=>{const{error:a,formMessageId:i}=oN(),l=a?String((a==null?void 0:a.message)??""):t;return l?r.jsx("p",{ref:s,id:i,className:Ae("text-sm font-medium text-destructive",e),...n,children:l}):null});mt.displayName="FormMessage";const zI=(e,t,n)=>{if(e&&"reportValidity"in e){const s=Ge(n,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},CH=(e,t)=>{for(const n in t.fields){const s=t.fields[n];s&&s.ref&&"reportValidity"in s.ref?zI(s.ref,n,e):s.refs&&s.refs.forEach(a=>zI(a,n,e))}},C$e=(e,t)=>{t.shouldUseNativeValidation&&CH(e,t);const n={};for(const s in e){const a=Ge(t.fields,s),i=Object.assign(e[s]||{},{ref:a&&a.ref});if(_$e(t.names||Object.keys(e),s)){const l=Object.assign({},Ge(n,s));xr(l,"root",i),xr(n,s,l)}else xr(n,s,i)}return n},_$e=(e,t)=>e.some(n=>n.startsWith(t+"."));var P$e=function(e,t){for(var n={};e.length;){var s=e[0],a=s.code,i=s.message,l=s.path.join(".");if(!n[l])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];n[l]={message:o.message,type:o.code}}else n[l]={message:i,type:a};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var c=n[l].types,d=c&&c[s.code];n[l]=gH(l,t,n,a,d?[].concat(d,s.message):s.message)}e.shift()}return n},Jm=function(e,t,n){return n===void 0&&(n={}),function(s,a,i){try{return Promise.resolve(function(l,o){try{var c=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(d){return i.shouldUseNativeValidation&&CH({},i),{errors:{},values:n.raw?s:d}})}catch(d){return o(d)}return c&&c.then?c.then(void 0,o):c}(0,function(l){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(l))return{values:{},errors:C$e(P$e(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}},sr;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const l of a)i[l]=l;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),l={};for(const o of i)l[o]=a[o];return e.objectValues(l)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&i.push(l);return i},e.find=(a,i)=>{for(const l of a)if(i(l))return l},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function s(a,i=" | "){return a.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}e.joinValues=s,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(sr||(sr={}));var $_;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})($_||($_={}));const et=sr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zl=e=>{switch(typeof e){case"undefined":return et.undefined;case"string":return et.string;case"number":return isNaN(e)?et.nan:et.number;case"boolean":return et.boolean;case"function":return et.function;case"bigint":return et.bigint;case"symbol":return et.symbol;case"object":return Array.isArray(e)?et.array:e===null?et.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?et.promise:typeof Map<"u"&&e instanceof Map?et.map:typeof Set<"u"&&e instanceof Set?et.set:typeof Date<"u"&&e instanceof Date?et.date:et.object;default:return et.unknown}},Ue=sr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),A$e=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ba extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},s={_errors:[]},a=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(a);else if(l.code==="invalid_return_type")a(l.returnTypeError);else if(l.code==="invalid_arguments")a(l.argumentsError);else if(l.path.length===0)s._errors.push(n(l));else{let o=s,c=0;for(;c<l.path.length;){const d=l.path[c];c===l.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(n(l))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return a(this),s}static assert(t){if(!(t instanceof ba))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,sr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},s=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):s.push(t(a));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}ba.create=e=>new ba(e);const pm=(e,t)=>{let n;switch(e.code){case Ue.invalid_type:e.received===et.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,sr.jsonStringifyReplacer)}`;break;case Ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${sr.joinValues(e.keys,", ")}`;break;case Ue.invalid_union:n="Invalid input";break;case Ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${sr.joinValues(e.options)}`;break;case Ue.invalid_enum_value:n=`Invalid enum value. Expected ${sr.joinValues(e.options)}, received '${e.received}'`;break;case Ue.invalid_arguments:n="Invalid function arguments";break;case Ue.invalid_return_type:n="Invalid function return type";break;case Ue.invalid_date:n="Invalid date";break;case Ue.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:sr.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Ue.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Ue.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Ue.custom:n="Invalid input";break;case Ue.invalid_intersection_types:n="Intersection results could not be merged";break;case Ue.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Ue.not_finite:n="Number must be finite";break;default:n=t.defaultError,sr.assertNever(e)}return{message:n}};let _H=pm;function T$e(e){_H=e}function Fj(){return _H}const Lj=e=>{const{data:t,path:n,errorMaps:s,issueData:a}=e,i=[...n,...a.path||[]],l={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const c=s.filter(d=>!!d).slice().reverse();for(const d of c)o=d(l,{data:t,defaultError:o}).message;return{...a,path:i,message:o}},E$e=[];function Xe(e,t){const n=Fj(),s=Lj({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===pm?void 0:pm].filter(a=>!!a)});e.common.issues.push(s)}class ds{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const s=[];for(const a of n){if(a.status==="aborted")return kt;a.status==="dirty"&&t.dirty(),s.push(a.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,n){const s=[];for(const a of n){const i=await a.key,l=await a.value;s.push({key:i,value:l})}return ds.mergeObjectSync(t,s)}static mergeObjectSync(t,n){const s={};for(const a of n){const{key:i,value:l}=a;if(i.status==="aborted"||l.status==="aborted")return kt;i.status==="dirty"&&t.dirty(),l.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||a.alwaysSet)&&(s[i.value]=l.value)}return{status:t.value,value:s}}}const kt=Object.freeze({status:"aborted"}),_h=e=>({status:"dirty",value:e}),As=e=>({status:"valid",value:e}),I_=e=>e.status==="aborted",F_=e=>e.status==="dirty",Pu=e=>e.status==="valid",Mg=e=>typeof Promise<"u"&&e instanceof Promise;function Uj(e,t,n,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function PH(e,t,n,s,a){if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var it;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(it||(it={}));var qp,Wp;class Rl{constructor(t,n,s,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=s,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const VI=(e,t)=>{if(Pu(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ba(e.common.issues);return this._error=n,this._error}}};function Ut(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:s,description:a}=e;if(t&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(l,o)=>{var c,d;const{message:u}=e;return l.code==="invalid_enum_value"?{message:u??o.defaultError}:typeof o.data>"u"?{message:(c=u??s)!==null&&c!==void 0?c:o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:(d=u??n)!==null&&d!==void 0?d:o.defaultError}},description:a}}class Wt{get description(){return this._def.description}_getType(t){return Zl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Zl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ds,ctx:{common:t.parent.common,data:t.data,parsedType:Zl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Mg(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const s=this.safeParse(t,n);if(s.success)return s.data;throw s.error}safeParse(t,n){var s;const a={common:{issues:[],async:(s=n==null?void 0:n.async)!==null&&s!==void 0?s:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Zl(t)},i=this._parseSync({data:t,path:a.path,parent:a});return VI(a,i)}"~validate"(t){var n,s;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Zl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return Pu(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((s=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>Pu(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const s=await this.safeParseAsync(t,n);if(s.success)return s.data;throw s.error}async safeParseAsync(t,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Zl(t)},a=this._parse({data:t,path:s.path,parent:s}),i=await(Mg(a)?a:Promise.resolve(a));return VI(s,i)}refine(t,n){const s=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const l=t(a),o=()=>i.addIssue({code:Ue.custom,...s(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(t,n){return this._refinement((s,a)=>t(s)?!0:(a.addIssue(typeof n=="function"?n(s,a):n),!1))}_refinement(t){return new Ui({schema:this,typeName:wt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Pl.create(this,this._def)}nullable(){return Wc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ti.create(this)}promise(){return gm.create(this,this._def)}or(t){return Lg.create([this,t],this._def)}and(t){return Ug.create(this,t,this._def)}transform(t){return new Ui({...Ut(this._def),schema:this,typeName:wt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Wg({...Ut(this._def),innerType:this,defaultValue:n,typeName:wt.ZodDefault})}brand(){return new J4({typeName:wt.ZodBranded,type:this,...Ut(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Hg({...Ut(this._def),innerType:this,catchValue:n,typeName:wt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return sy.create(this,t)}readonly(){return Kg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const O$e=/^c[^\s-]{8,}$/i,R$e=/^[0-9a-z]+$/,D$e=/^[0-9A-HJKMNP-TV-Z]{26}$/i,M$e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$$e=/^[a-z0-9_-]{21}$/i,I$e=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,F$e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,L$e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,U$e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Wk;const B$e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,z$e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,V$e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,q$e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,W$e=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,H$e=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,AH="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",K$e=new RegExp(`^${AH}$`);function TH(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function G$e(e){return new RegExp(`^${TH(e)}$`)}function EH(e){let t=`${AH}T${TH(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Y$e(e,t){return!!((t==="v4"||!t)&&B$e.test(e)||(t==="v6"||!t)&&V$e.test(e))}function X$e(e,t){if(!I$e.test(e))return!1;try{const[n]=e.split("."),s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(s));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function Z$e(e,t){return!!((t==="v4"||!t)&&z$e.test(e)||(t==="v6"||!t)&&q$e.test(e))}class ji extends Wt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==et.string){const i=this._getOrReturnCtx(t);return Xe(i,{code:Ue.invalid_type,expected:et.string,received:i.parsedType}),kt}const s=new ds;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Xe(a,{code:Ue.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Xe(a,{code:Ue.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const l=t.data.length>i.value,o=t.data.length<i.value;(l||o)&&(a=this._getOrReturnCtx(t,a),l?Xe(a,{code:Ue.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&Xe(a,{code:Ue.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")L$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"email",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")Wk||(Wk=new RegExp(U$e,"u")),Wk.test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"emoji",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")M$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"uuid",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")$$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"nanoid",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")O$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"cuid",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")R$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"cuid2",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")D$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"ulid",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Xe(a,{validation:"url",code:Ue.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"regex",code:Ue.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Xe(a,{code:Ue.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Xe(a,{code:Ue.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Xe(a,{code:Ue.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?EH(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{code:Ue.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?K$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{code:Ue.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?G$e(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{code:Ue.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?F$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"duration",code:Ue.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?Y$e(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"ip",code:Ue.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?X$e(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"jwt",code:Ue.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?Z$e(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"cidr",code:Ue.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?W$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"base64",code:Ue.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?H$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Xe(a,{validation:"base64url",code:Ue.invalid_string,message:i.message}),s.dirty()):sr.assertNever(i);return{status:s.value,value:t.data}}_regex(t,n,s){return this.refinement(a=>t.test(a),{validation:n,code:Ue.invalid_string,...it.errToObj(s)})}_addCheck(t){return new ji({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...it.errToObj(t)})}url(t){return this._addCheck({kind:"url",...it.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...it.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...it.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...it.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...it.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...it.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...it.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...it.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...it.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...it.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...it.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...it.errToObj(t)})}datetime(t){var n,s;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(s=t==null?void 0:t.local)!==null&&s!==void 0?s:!1,...it.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...it.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...it.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...it.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...it.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...it.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...it.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...it.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...it.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...it.errToObj(n)})}nonempty(t){return this.min(1,it.errToObj(t))}trim(){return new ji({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ji({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ji({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ji.create=e=>{var t;return new ji({checks:[],typeName:wt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ut(e)})};function Q$e(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,a=n>s?n:s,i=parseInt(e.toFixed(a).replace(".","")),l=parseInt(t.toFixed(a).replace(".",""));return i%l/Math.pow(10,a)}class zc extends Wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==et.number){const i=this._getOrReturnCtx(t);return Xe(i,{code:Ue.invalid_type,expected:et.number,received:i.parsedType}),kt}let s;const a=new ds;for(const i of this._def.checks)i.kind==="int"?sr.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),Xe(s,{code:Ue.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(s=this._getOrReturnCtx(t,s),Xe(s,{code:Ue.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(s=this._getOrReturnCtx(t,s),Xe(s,{code:Ue.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?Q$e(t.data,i.value)!==0&&(s=this._getOrReturnCtx(t,s),Xe(s,{code:Ue.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),Xe(s,{code:Ue.not_finite,message:i.message}),a.dirty()):sr.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,it.toString(n))}gt(t,n){return this.setLimit("min",t,!1,it.toString(n))}lte(t,n){return this.setLimit("max",t,!0,it.toString(n))}lt(t,n){return this.setLimit("max",t,!1,it.toString(n))}setLimit(t,n,s,a){return new zc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:it.toString(a)}]})}_addCheck(t){return new zc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:it.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:it.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:it.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:it.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:it.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:it.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:it.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:it.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:it.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&sr.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(n)&&Number.isFinite(t)}}zc.create=e=>new zc({checks:[],typeName:wt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ut(e)});class Vc extends Wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==et.bigint)return this._getInvalidInput(t);let s;const a=new ds;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(s=this._getOrReturnCtx(t,s),Xe(s,{code:Ue.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(s=this._getOrReturnCtx(t,s),Xe(s,{code:Ue.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),Xe(s,{code:Ue.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):sr.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Xe(n,{code:Ue.invalid_type,expected:et.bigint,received:n.parsedType}),kt}gte(t,n){return this.setLimit("min",t,!0,it.toString(n))}gt(t,n){return this.setLimit("min",t,!1,it.toString(n))}lte(t,n){return this.setLimit("max",t,!0,it.toString(n))}lt(t,n){return this.setLimit("max",t,!1,it.toString(n))}setLimit(t,n,s,a){return new Vc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:it.toString(a)}]})}_addCheck(t){return new Vc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:it.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:it.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:it.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:it.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:it.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Vc.create=e=>{var t;return new Vc({checks:[],typeName:wt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ut(e)})};class $g extends Wt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==et.boolean){const s=this._getOrReturnCtx(t);return Xe(s,{code:Ue.invalid_type,expected:et.boolean,received:s.parsedType}),kt}return As(t.data)}}$g.create=e=>new $g({typeName:wt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ut(e)});class Au extends Wt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==et.date){const i=this._getOrReturnCtx(t);return Xe(i,{code:Ue.invalid_type,expected:et.date,received:i.parsedType}),kt}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Xe(i,{code:Ue.invalid_date}),kt}const s=new ds;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Xe(a,{code:Ue.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Xe(a,{code:Ue.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):sr.assertNever(i);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Au({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:it.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:it.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Au.create=e=>new Au({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:wt.ZodDate,...Ut(e)});class Bj extends Wt{_parse(t){if(this._getType(t)!==et.symbol){const s=this._getOrReturnCtx(t);return Xe(s,{code:Ue.invalid_type,expected:et.symbol,received:s.parsedType}),kt}return As(t.data)}}Bj.create=e=>new Bj({typeName:wt.ZodSymbol,...Ut(e)});class Ig extends Wt{_parse(t){if(this._getType(t)!==et.undefined){const s=this._getOrReturnCtx(t);return Xe(s,{code:Ue.invalid_type,expected:et.undefined,received:s.parsedType}),kt}return As(t.data)}}Ig.create=e=>new Ig({typeName:wt.ZodUndefined,...Ut(e)});class Fg extends Wt{_parse(t){if(this._getType(t)!==et.null){const s=this._getOrReturnCtx(t);return Xe(s,{code:Ue.invalid_type,expected:et.null,received:s.parsedType}),kt}return As(t.data)}}Fg.create=e=>new Fg({typeName:wt.ZodNull,...Ut(e)});class xm extends Wt{constructor(){super(...arguments),this._any=!0}_parse(t){return As(t.data)}}xm.create=e=>new xm({typeName:wt.ZodAny,...Ut(e)});class ou extends Wt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return As(t.data)}}ou.create=e=>new ou({typeName:wt.ZodUnknown,...Ut(e)});class Eo extends Wt{_parse(t){const n=this._getOrReturnCtx(t);return Xe(n,{code:Ue.invalid_type,expected:et.never,received:n.parsedType}),kt}}Eo.create=e=>new Eo({typeName:wt.ZodNever,...Ut(e)});class zj extends Wt{_parse(t){if(this._getType(t)!==et.undefined){const s=this._getOrReturnCtx(t);return Xe(s,{code:Ue.invalid_type,expected:et.void,received:s.parsedType}),kt}return As(t.data)}}zj.create=e=>new zj({typeName:wt.ZodVoid,...Ut(e)});class Ti extends Wt{_parse(t){const{ctx:n,status:s}=this._processInputParams(t),a=this._def;if(n.parsedType!==et.array)return Xe(n,{code:Ue.invalid_type,expected:et.array,received:n.parsedType}),kt;if(a.exactLength!==null){const l=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(l||o)&&(Xe(n,{code:l?Ue.too_big:Ue.too_small,minimum:o?a.exactLength.value:void 0,maximum:l?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),s.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Xe(n,{code:Ue.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),s.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Xe(n,{code:Ue.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((l,o)=>a.type._parseAsync(new Rl(n,l,n.path,o)))).then(l=>ds.mergeArray(s,l));const i=[...n.data].map((l,o)=>a.type._parseSync(new Rl(n,l,n.path,o)));return ds.mergeArray(s,i)}get element(){return this._def.type}min(t,n){return new Ti({...this._def,minLength:{value:t,message:it.toString(n)}})}max(t,n){return new Ti({...this._def,maxLength:{value:t,message:it.toString(n)}})}length(t,n){return new Ti({...this._def,exactLength:{value:t,message:it.toString(n)}})}nonempty(t){return this.min(1,t)}}Ti.create=(e,t)=>new Ti({type:e,minLength:null,maxLength:null,exactLength:null,typeName:wt.ZodArray,...Ut(t)});function lh(e){if(e instanceof Wr){const t={};for(const n in e.shape){const s=e.shape[n];t[n]=Pl.create(lh(s))}return new Wr({...e._def,shape:()=>t})}else return e instanceof Ti?new Ti({...e._def,type:lh(e.element)}):e instanceof Pl?Pl.create(lh(e.unwrap())):e instanceof Wc?Wc.create(lh(e.unwrap())):e instanceof Dl?Dl.create(e.items.map(t=>lh(t))):e}class Wr extends Wt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=sr.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==et.object){const d=this._getOrReturnCtx(t);return Xe(d,{code:Ue.invalid_type,expected:et.object,received:d.parsedType}),kt}const{status:s,ctx:a}=this._processInputParams(t),{shape:i,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof Eo&&this._def.unknownKeys==="strip"))for(const d in a.data)l.includes(d)||o.push(d);const c=[];for(const d of l){const u=i[d],h=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Rl(a,h,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Eo){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")o.length>0&&(Xe(a,{code:Ue.unrecognized_keys,keys:o}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of o){const h=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Rl(a,h,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const h=await u.key,f=await u.value;d.push({key:h,value:f,alwaysSet:u.alwaysSet})}return d}).then(d=>ds.mergeObjectSync(s,d)):ds.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return it.errToObj,new Wr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,s)=>{var a,i,l,o;const c=(l=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,s).message)!==null&&l!==void 0?l:s.defaultError;return n.code==="unrecognized_keys"?{message:(o=it.errToObj(t).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new Wr({...this._def,unknownKeys:"strip"})}passthrough(){return new Wr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Wr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Wr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:wt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Wr({...this._def,catchall:t})}pick(t){const n={};return sr.objectKeys(t).forEach(s=>{t[s]&&this.shape[s]&&(n[s]=this.shape[s])}),new Wr({...this._def,shape:()=>n})}omit(t){const n={};return sr.objectKeys(this.shape).forEach(s=>{t[s]||(n[s]=this.shape[s])}),new Wr({...this._def,shape:()=>n})}deepPartial(){return lh(this)}partial(t){const n={};return sr.objectKeys(this.shape).forEach(s=>{const a=this.shape[s];t&&!t[s]?n[s]=a:n[s]=a.optional()}),new Wr({...this._def,shape:()=>n})}required(t){const n={};return sr.objectKeys(this.shape).forEach(s=>{if(t&&!t[s])n[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof Pl;)i=i._def.innerType;n[s]=i}}),new Wr({...this._def,shape:()=>n})}keyof(){return OH(sr.objectKeys(this.shape))}}Wr.create=(e,t)=>new Wr({shape:()=>e,unknownKeys:"strip",catchall:Eo.create(),typeName:wt.ZodObject,...Ut(t)});Wr.strictCreate=(e,t)=>new Wr({shape:()=>e,unknownKeys:"strict",catchall:Eo.create(),typeName:wt.ZodObject,...Ut(t)});Wr.lazycreate=(e,t)=>new Wr({shape:e,unknownKeys:"strip",catchall:Eo.create(),typeName:wt.ZodObject,...Ut(t)});class Lg extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t),s=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const l=i.map(o=>new ba(o.ctx.common.issues));return Xe(n,{code:Ue.invalid_union,unionErrors:l}),kt}if(n.common.async)return Promise.all(s.map(async i=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(a);{let i;const l=[];for(const c of s){const d={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=l.map(c=>new ba(c));return Xe(n,{code:Ue.invalid_union,unionErrors:o}),kt}}get options(){return this._def.options}}Lg.create=(e,t)=>new Lg({options:e,typeName:wt.ZodUnion,...Ut(t)});const Kl=e=>e instanceof zg?Kl(e.schema):e instanceof Ui?Kl(e.innerType()):e instanceof Vg?[e.value]:e instanceof qc?e.options:e instanceof qg?sr.objectValues(e.enum):e instanceof Wg?Kl(e._def.innerType):e instanceof Ig?[void 0]:e instanceof Fg?[null]:e instanceof Pl?[void 0,...Kl(e.unwrap())]:e instanceof Wc?[null,...Kl(e.unwrap())]:e instanceof J4||e instanceof Kg?Kl(e.unwrap()):e instanceof Hg?Kl(e._def.innerType):[];class cN extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==et.object)return Xe(n,{code:Ue.invalid_type,expected:et.object,received:n.parsedType}),kt;const s=this.discriminator,a=n.data[s],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Xe(n,{code:Ue.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),kt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,s){const a=new Map;for(const i of n){const l=Kl(i.shape[t]);if(!l.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of l){if(a.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);a.set(o,i)}}return new cN({typeName:wt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...Ut(s)})}}function L_(e,t){const n=Zl(e),s=Zl(t);if(e===t)return{valid:!0,data:e};if(n===et.object&&s===et.object){const a=sr.objectKeys(t),i=sr.objectKeys(e).filter(o=>a.indexOf(o)!==-1),l={...e,...t};for(const o of i){const c=L_(e[o],t[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(n===et.array&&s===et.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const l=e[i],o=t[i],c=L_(l,o);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return n===et.date&&s===et.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ug extends Wt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t),a=(i,l)=>{if(I_(i)||I_(l))return kt;const o=L_(i.value,l.value);return o.valid?((F_(i)||F_(l))&&n.dirty(),{status:n.value,value:o.data}):(Xe(s,{code:Ue.invalid_intersection_types}),kt)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,l])=>a(i,l)):a(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Ug.create=(e,t,n)=>new Ug({left:e,right:t,typeName:wt.ZodIntersection,...Ut(n)});class Dl extends Wt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==et.array)return Xe(s,{code:Ue.invalid_type,expected:et.array,received:s.parsedType}),kt;if(s.data.length<this._def.items.length)return Xe(s,{code:Ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),kt;!this._def.rest&&s.data.length>this._def.items.length&&(Xe(s,{code:Ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...s.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Rl(s,l,s.path,o)):null}).filter(l=>!!l);return s.common.async?Promise.all(i).then(l=>ds.mergeArray(n,l)):ds.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Dl({...this._def,rest:t})}}Dl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Dl({items:e,typeName:wt.ZodTuple,rest:null,...Ut(t)})};class Bg extends Wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==et.object)return Xe(s,{code:Ue.invalid_type,expected:et.object,received:s.parsedType}),kt;const a=[],i=this._def.keyType,l=this._def.valueType;for(const o in s.data)a.push({key:i._parse(new Rl(s,o,s.path,o)),value:l._parse(new Rl(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?ds.mergeObjectAsync(n,a):ds.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,s){return n instanceof Wt?new Bg({keyType:t,valueType:n,typeName:wt.ZodRecord,...Ut(s)}):new Bg({keyType:ji.create(),valueType:t,typeName:wt.ZodRecord,...Ut(n)})}}class Vj extends Wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==et.map)return Xe(s,{code:Ue.invalid_type,expected:et.map,received:s.parsedType}),kt;const a=this._def.keyType,i=this._def.valueType,l=[...s.data.entries()].map(([o,c],d)=>({key:a._parse(new Rl(s,o,s.path,[d,"key"])),value:i._parse(new Rl(s,c,s.path,[d,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return kt;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(d.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const c of l){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return kt;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(d.value,u.value)}return{status:n.value,value:o}}}}Vj.create=(e,t,n)=>new Vj({valueType:t,keyType:e,typeName:wt.ZodMap,...Ut(n)});class Tu extends Wt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==et.set)return Xe(s,{code:Ue.invalid_type,expected:et.set,received:s.parsedType}),kt;const a=this._def;a.minSize!==null&&s.data.size<a.minSize.value&&(Xe(s,{code:Ue.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&s.data.size>a.maxSize.value&&(Xe(s,{code:Ue.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function l(c){const d=new Set;for(const u of c){if(u.status==="aborted")return kt;u.status==="dirty"&&n.dirty(),d.add(u.value)}return{status:n.value,value:d}}const o=[...s.data.values()].map((c,d)=>i._parse(new Rl(s,c,s.path,d)));return s.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(t,n){return new Tu({...this._def,minSize:{value:t,message:it.toString(n)}})}max(t,n){return new Tu({...this._def,maxSize:{value:t,message:it.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Tu.create=(e,t)=>new Tu({valueType:e,minSize:null,maxSize:null,typeName:wt.ZodSet,...Ut(t)});class qh extends Wt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==et.function)return Xe(n,{code:Ue.invalid_type,expected:et.function,received:n.parsedType}),kt;function s(o,c){return Lj({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Fj(),pm].filter(d=>!!d),issueData:{code:Ue.invalid_arguments,argumentsError:c}})}function a(o,c){return Lj({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Fj(),pm].filter(d=>!!d),issueData:{code:Ue.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof gm){const o=this;return As(async function(...c){const d=new ba([]),u=await o._def.args.parseAsync(c,i).catch(m=>{throw d.addIssue(s(c,m)),d}),h=await Reflect.apply(l,this,u);return await o._def.returns._def.type.parseAsync(h,i).catch(m=>{throw d.addIssue(a(h,m)),d})})}else{const o=this;return As(function(...c){const d=o._def.args.safeParse(c,i);if(!d.success)throw new ba([s(c,d.error)]);const u=Reflect.apply(l,this,d.data),h=o._def.returns.safeParse(u,i);if(!h.success)throw new ba([a(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new qh({...this._def,args:Dl.create(t).rest(ou.create())})}returns(t){return new qh({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,s){return new qh({args:t||Dl.create([]).rest(ou.create()),returns:n||ou.create(),typeName:wt.ZodFunction,...Ut(s)})}}class zg extends Wt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}zg.create=(e,t)=>new zg({getter:e,typeName:wt.ZodLazy,...Ut(t)});class Vg extends Wt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Xe(n,{received:n.data,code:Ue.invalid_literal,expected:this._def.value}),kt}return{status:"valid",value:t.data}}get value(){return this._def.value}}Vg.create=(e,t)=>new Vg({value:e,typeName:wt.ZodLiteral,...Ut(t)});function OH(e,t){return new qc({values:e,typeName:wt.ZodEnum,...Ut(t)})}class qc extends Wt{constructor(){super(...arguments),qp.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),s=this._def.values;return Xe(n,{expected:sr.joinValues(s),received:n.parsedType,code:Ue.invalid_type}),kt}if(Uj(this,qp)||PH(this,qp,new Set(this._def.values)),!Uj(this,qp).has(t.data)){const n=this._getOrReturnCtx(t),s=this._def.values;return Xe(n,{received:n.data,code:Ue.invalid_enum_value,options:s}),kt}return As(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return qc.create(t,{...this._def,...n})}exclude(t,n=this._def){return qc.create(this.options.filter(s=>!t.includes(s)),{...this._def,...n})}}qp=new WeakMap;qc.create=OH;class qg extends Wt{constructor(){super(...arguments),Wp.set(this,void 0)}_parse(t){const n=sr.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==et.string&&s.parsedType!==et.number){const a=sr.objectValues(n);return Xe(s,{expected:sr.joinValues(a),received:s.parsedType,code:Ue.invalid_type}),kt}if(Uj(this,Wp)||PH(this,Wp,new Set(sr.getValidEnumValues(this._def.values))),!Uj(this,Wp).has(t.data)){const a=sr.objectValues(n);return Xe(s,{received:s.data,code:Ue.invalid_enum_value,options:a}),kt}return As(t.data)}get enum(){return this._def.values}}Wp=new WeakMap;qg.create=(e,t)=>new qg({values:e,typeName:wt.ZodNativeEnum,...Ut(t)});class gm extends Wt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==et.promise&&n.common.async===!1)return Xe(n,{code:Ue.invalid_type,expected:et.promise,received:n.parsedType}),kt;const s=n.parsedType===et.promise?n.data:Promise.resolve(n.data);return As(s.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}gm.create=(e,t)=>new gm({type:e,typeName:wt.ZodPromise,...Ut(t)});class Ui extends Wt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===wt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:s}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:l=>{Xe(s,l),l.fatal?n.abort():n.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const l=a.transform(s.data,i);if(s.common.async)return Promise.resolve(l).then(async o=>{if(n.value==="aborted")return kt;const c=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return c.status==="aborted"?kt:c.status==="dirty"||n.value==="dirty"?_h(c.value):c});{if(n.value==="aborted")return kt;const o=this._def.schema._parseSync({data:l,path:s.path,parent:s});return o.status==="aborted"?kt:o.status==="dirty"||n.value==="dirty"?_h(o.value):o}}if(a.type==="refinement"){const l=o=>{const c=a.refinement(o,i);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?kt:(o.status==="dirty"&&n.dirty(),l(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?kt:(o.status==="dirty"&&n.dirty(),l(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Pu(l))return l;const o=a.transform(l.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>Pu(l)?Promise.resolve(a.transform(l.value,i)).then(o=>({status:n.value,value:o})):l);sr.assertNever(a)}}Ui.create=(e,t,n)=>new Ui({schema:e,typeName:wt.ZodEffects,effect:t,...Ut(n)});Ui.createWithPreprocess=(e,t,n)=>new Ui({schema:t,effect:{type:"preprocess",transform:e},typeName:wt.ZodEffects,...Ut(n)});class Pl extends Wt{_parse(t){return this._getType(t)===et.undefined?As(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Pl.create=(e,t)=>new Pl({innerType:e,typeName:wt.ZodOptional,...Ut(t)});class Wc extends Wt{_parse(t){return this._getType(t)===et.null?As(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Wc.create=(e,t)=>new Wc({innerType:e,typeName:wt.ZodNullable,...Ut(t)});class Wg extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t);let s=n.data;return n.parsedType===et.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Wg.create=(e,t)=>new Wg({innerType:e,typeName:wt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ut(t)});class Hg extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t),s={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Mg(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ba(s.common.issues)},input:s.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ba(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Hg.create=(e,t)=>new Hg({innerType:e,typeName:wt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ut(t)});class qj extends Wt{_parse(t){if(this._getType(t)!==et.nan){const s=this._getOrReturnCtx(t);return Xe(s,{code:Ue.invalid_type,expected:et.nan,received:s.parsedType}),kt}return{status:"valid",value:t.data}}}qj.create=e=>new qj({typeName:wt.ZodNaN,...Ut(e)});const J$e=Symbol("zod_brand");class J4 extends Wt{_parse(t){const{ctx:n}=this._processInputParams(t),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class sy extends Wt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?kt:i.status==="dirty"?(n.dirty(),_h(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const a=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?kt:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:s.path,parent:s})}}static create(t,n){return new sy({in:t,out:n,typeName:wt.ZodPipeline})}}class Kg extends Wt{_parse(t){const n=this._def.innerType._parse(t),s=a=>(Pu(a)&&(a.value=Object.freeze(a.value)),a);return Mg(n)?n.then(a=>s(a)):s(n)}unwrap(){return this._def.innerType}}Kg.create=(e,t)=>new Kg({innerType:e,typeName:wt.ZodReadonly,...Ut(t)});function qI(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function RH(e,t={},n){return e?xm.create().superRefine((s,a)=>{var i,l;const o=e(s);if(o instanceof Promise)return o.then(c=>{var d,u;if(!c){const h=qI(t,s),f=(u=(d=h.fatal)!==null&&d!==void 0?d:n)!==null&&u!==void 0?u:!0;a.addIssue({code:"custom",...h,fatal:f})}});if(!o){const c=qI(t,s),d=(l=(i=c.fatal)!==null&&i!==void 0?i:n)!==null&&l!==void 0?l:!0;a.addIssue({code:"custom",...c,fatal:d})}}):xm.create()}const e5e={object:Wr.lazycreate};var wt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(wt||(wt={}));const t5e=(e,t={message:`Input not instance of ${e.name}`})=>RH(n=>n instanceof e,t),DH=ji.create,MH=zc.create,r5e=qj.create,n5e=Vc.create,$H=$g.create,s5e=Au.create,a5e=Bj.create,i5e=Ig.create,l5e=Fg.create,o5e=xm.create,c5e=ou.create,d5e=Eo.create,u5e=zj.create,h5e=Ti.create,f5e=Wr.create,m5e=Wr.strictCreate,p5e=Lg.create,x5e=cN.create,g5e=Ug.create,v5e=Dl.create,y5e=Bg.create,b5e=Vj.create,j5e=Tu.create,w5e=qh.create,N5e=zg.create,k5e=Vg.create,S5e=qc.create,C5e=qg.create,_5e=gm.create,WI=Ui.create,P5e=Pl.create,A5e=Wc.create,T5e=Ui.createWithPreprocess,E5e=sy.create,O5e=()=>DH().optional(),R5e=()=>MH().optional(),D5e=()=>$H().optional(),M5e={string:e=>ji.create({...e,coerce:!0}),number:e=>zc.create({...e,coerce:!0}),boolean:e=>$g.create({...e,coerce:!0}),bigint:e=>Vc.create({...e,coerce:!0}),date:e=>Au.create({...e,coerce:!0})},$5e=kt;var Ke=Object.freeze({__proto__:null,defaultErrorMap:pm,setErrorMap:T$e,getErrorMap:Fj,makeIssue:Lj,EMPTY_PATH:E$e,addIssueToContext:Xe,ParseStatus:ds,INVALID:kt,DIRTY:_h,OK:As,isAborted:I_,isDirty:F_,isValid:Pu,isAsync:Mg,get util(){return sr},get objectUtil(){return $_},ZodParsedType:et,getParsedType:Zl,ZodType:Wt,datetimeRegex:EH,ZodString:ji,ZodNumber:zc,ZodBigInt:Vc,ZodBoolean:$g,ZodDate:Au,ZodSymbol:Bj,ZodUndefined:Ig,ZodNull:Fg,ZodAny:xm,ZodUnknown:ou,ZodNever:Eo,ZodVoid:zj,ZodArray:Ti,ZodObject:Wr,ZodUnion:Lg,ZodDiscriminatedUnion:cN,ZodIntersection:Ug,ZodTuple:Dl,ZodRecord:Bg,ZodMap:Vj,ZodSet:Tu,ZodFunction:qh,ZodLazy:zg,ZodLiteral:Vg,ZodEnum:qc,ZodNativeEnum:qg,ZodPromise:gm,ZodEffects:Ui,ZodTransformer:Ui,ZodOptional:Pl,ZodNullable:Wc,ZodDefault:Wg,ZodCatch:Hg,ZodNaN:qj,BRAND:J$e,ZodBranded:J4,ZodPipeline:sy,ZodReadonly:Kg,custom:RH,Schema:Wt,ZodSchema:Wt,late:e5e,get ZodFirstPartyTypeKind(){return wt},coerce:M5e,any:o5e,array:h5e,bigint:n5e,boolean:$H,date:s5e,discriminatedUnion:x5e,effect:WI,enum:S5e,function:w5e,instanceof:t5e,intersection:g5e,lazy:N5e,literal:k5e,map:b5e,nan:r5e,nativeEnum:C5e,never:d5e,null:l5e,nullable:A5e,number:MH,object:f5e,oboolean:D5e,onumber:R5e,optional:P5e,ostring:O5e,pipeline:E5e,preprocess:T5e,promise:_5e,record:y5e,set:j5e,strictObject:m5e,string:DH,symbol:a5e,transformer:WI,tuple:v5e,undefined:i5e,union:p5e,unknown:c5e,void:u5e,NEVER:$5e,ZodIssueCode:Ue,quotelessJson:A$e,ZodError:ba});const I5e=Ke.object({name:Ke.string().min(1,"Название оффера обязательно"),category:Ke.string().min(1,"Категория обязательна"),description_ru:Ke.string().optional(),description_en:Ke.string().optional(),goals_ru:Ke.string().optional(),goals_en:Ke.string().optional(),logo:Ke.string().optional(),status:Ke.string().default("draft"),payoutType:Ke.string().default("cpa"),currency:Ke.string().default("USD"),landingPages:Ke.array(Ke.object({name:Ke.string().min(1,"Название обязательно"),url:Ke.string().url("Неверный URL"),payoutAmount:Ke.number().min(0,"Сумма должна быть положительной"),currency:Ke.string().default("USD"),geo:Ke.string().optional()})).default([{name:"Основная страница",url:"",payoutAmount:0,currency:"USD",geo:""}]),kpiConditions_ru:Ke.string().optional(),kpiConditions_en:Ke.string().optional(),allowedTrafficSources:Ke.array(Ke.string()).default([]),allowedApps:Ke.array(Ke.string()).default([]),dailyLimit:Ke.number().optional(),monthlyLimit:Ke.number().optional(),antifraudEnabled:Ke.boolean().default(!0),autoApprovePartners:Ke.boolean().default(!1)});function F5e({onSuccess:e}){const{t,i18n:n}=_r();n.language;const{toast:s}=lt(),a=Et(),i=Zm({resolver:Jm(I5e),defaultValues:{name:"",category:"",description_ru:"",description_en:"",goals_ru:"",goals_en:"",logo:"",status:"draft",landingPages:[{name:"Основная страница",url:"",payoutAmount:0,currency:"USD",geo:""}],payoutType:"cpa",currency:"USD",kpiConditions_ru:"",kpiConditions_en:"",allowedTrafficSources:[],allowedApps:[],antifraudEnabled:!0,autoApprovePartners:!1}}),l=Ee({mutationFn:async d=>{const u={...d,description:{ru:d.description_ru||"",en:d.description_en||""},goals:{ru:d.goals_ru||"",en:d.goals_en||""},kpiConditions:{ru:d.kpiConditions_ru||"",en:d.kpiConditions_en||""},trafficSources:d.allowedTrafficSources||[],allowedApps:d.allowedApps||[]};return console.log("Sending offer data:",u),await Te("/api/admin/offers","POST",u)},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),s({title:t("success"),description:t("offer_created_successfully")}),e(),i.reset()},onError:d=>{s({title:t("error"),description:d.message||t("failed_to_create_offer"),variant:"destructive"})}}),o=["gambling","finance","nutra","dating","sweepstakes","crypto","e-commerce","mobile","games","software"],c=["facebook_ads","google_ads","tiktok_ads","instagram_ads","snapchat_ads","twitter_ads","pinterest_ads","reddit_ads","linkedin_ads","mytarget","push_traffic","inpage_push","calendar_push","sms_push","outbrain","taboola","mgid","revcontent","adnow","pop_traffic","email_marketing","seo_organic","mobile_app","influencer","teaser_networks","uac","pps","kmc","other"];return r.jsx(Qm,{...i,children:r.jsxs("form",{onSubmit:i.handleSubmit(d=>l.mutate(d)),className:"space-y-6",children:[r.jsx(dt,{control:i.control,name:"name",render:({field:d})=>r.jsxs(ct,{children:[r.jsxs(ut,{children:[t("offer_name")," *"]}),r.jsx(ft,{children:r.jsx(ne,{...d,placeholder:t("offer_name_placeholder"),"data-testid":"input-offer-name"})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(dt,{control:i.control,name:"category",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:t("category")}),r.jsxs(he,{onValueChange:d.onChange,defaultValue:d.value,children:[r.jsx(ft,{children:r.jsx(de,{"data-testid":"select-category",children:r.jsx(fe,{placeholder:t("select_category")})})}),r.jsx(ue,{children:o.map(u=>r.jsx(S,{value:u,children:u.charAt(0).toUpperCase()+u.slice(1)},u))})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:"status",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:t("status")}),r.jsxs(he,{onValueChange:d.onChange,defaultValue:d.value,children:[r.jsx(ft,{children:r.jsx(de,{"data-testid":"select-status",children:r.jsx(fe,{})})}),r.jsxs(ue,{children:[r.jsx(S,{value:"draft",children:t("draft")}),r.jsx(S,{value:"pending",children:t("waiting")}),r.jsx(S,{value:"active",children:t("active")}),r.jsx(S,{value:"paused",children:t("paused")})]})]}),r.jsx(mt,{})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(L,{className:"text-base font-medium",children:t("description")}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(dt,{control:i.control,name:"description_ru",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Описание (Русский)"}),r.jsx(ft,{children:r.jsx(pt,{...d,placeholder:"Описание оффера на русском языке",rows:3,"data-testid":"textarea-description-ru"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:"description_en",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Description (English)"}),r.jsx(ft,{children:r.jsx(pt,{...d,placeholder:"Offer description in English",rows:3,"data-testid":"textarea-description-en"})}),r.jsx(mt,{})]})})]})]}),r.jsx(dt,{control:i.control,name:"logo",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:t("offer_logo")}),r.jsx(ft,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(M,{type:"button",variant:"outline",onClick:()=>{const u=document.createElement("input");u.type="file",u.accept="image/*",u.onchange=h=>{var m;const f=(m=h.target.files)==null?void 0:m[0];if(f){if(f.size>2*1024*1024){alert(t("file_size_too_large"));return}const v=new FileReader;v.onload=()=>{d.onChange(v.result)},v.readAsDataURL(f)}},u.click()},"data-testid":"button-choose-logo",children:t("choose_file")}),d.value&&r.jsx("span",{className:"text-sm text-muted-foreground",children:t("file_selected")})]}),d.value&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:d.value,alt:t("logo"),className:"h-16 w-16 object-cover rounded border"}),r.jsx(M,{type:"button",variant:"outline",size:"sm",onClick:()=>d.onChange(""),title:t("remove_logo"),children:t("remove_logo")})]})]})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{className:"text-base font-medium",children:t("landing_pages")}),r.jsxs(M,{type:"button",className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-200",size:"sm",onClick:()=>{const d=i.getValues("landingPages");i.setValue("landingPages",[...d,{name:"",url:"",payoutAmount:0,currency:"USD",geo:""}])},"data-testid":"button-add-landing-page",title:"Добавить новую посадочную страницу",children:[r.jsx(Ire,{className:"w-4 h-4 mr-2"}),"Добавить страницу"]})]}),r.jsx("div",{className:"space-y-3",children:i.watch("landingPages").map((d,u)=>r.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 dark:bg-gray-800",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[r.jsx(dt,{control:i.control,name:`landingPages.${u}.name`,render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{className:"text-sm",children:t("landing_name")}),r.jsx(ft,{children:r.jsx(ne,{...h,placeholder:t("main_page"),"data-testid":`input-landing-name-${u}`})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:`landingPages.${u}.url`,render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{className:"text-sm",children:"URL"}),r.jsx(ft,{children:r.jsx(ne,{...h,placeholder:t("url_placeholder"),"data-testid":`input-landing-url-${u}`})}),r.jsx(mt,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[r.jsx(dt,{control:i.control,name:`landingPages.${u}.payoutAmount`,render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{className:"text-sm",children:t("payout_amount")}),r.jsx(ft,{children:r.jsx(ne,{...h,type:"number",step:"0.01",value:h.value||"",onChange:f=>h.onChange(parseFloat(f.target.value)||0),onWheel:f=>f.currentTarget.blur(),placeholder:"0.00","data-testid":`input-landing-payout-${u}`,className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:`landingPages.${u}.currency`,render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{className:"text-sm",children:t("currency")}),r.jsxs(he,{onValueChange:h.onChange,defaultValue:h.value,children:[r.jsx(ft,{children:r.jsx(de,{"data-testid":`select-landing-currency-${u}`,children:r.jsx(fe,{})})}),r.jsxs(ue,{children:[r.jsx(S,{value:"USD",children:"USD"}),r.jsx(S,{value:"EUR",children:"EUR"}),r.jsx(S,{value:"GBP",children:"GBP"}),r.jsx(S,{value:"RUB",children:"RUB"})]})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:`landingPages.${u}.geo`,render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{className:"text-sm",children:t("geo")}),r.jsx(ft,{children:r.jsx(ne,{...h,placeholder:t("geo_placeholder"),"data-testid":`input-landing-geo-${u}`})}),r.jsx(mt,{})]})}),r.jsx("div",{className:"flex justify-end",children:i.watch("landingPages").length>1&&r.jsx(M,{type:"button",variant:"outline",size:"sm",onClick:()=>{const h=i.getValues("landingPages");i.setValue("landingPages",h.filter((f,m)=>m!==u))},"data-testid":`button-remove-landing-page-${u}`,title:t("remove_landing_page"),children:r.jsx(wr,{className:"w-4 h-4"})})})]})]},u))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(dt,{control:i.control,name:"payoutType",render:({field:d})=>r.jsxs(ct,{children:[r.jsxs(ut,{children:[t("payout_type")," (",t("default"),")"]}),r.jsxs(he,{onValueChange:d.onChange,defaultValue:d.value,children:[r.jsx(ft,{children:r.jsx(de,{"data-testid":"select-payout-type",children:r.jsx(fe,{})})}),r.jsxs(ue,{children:[r.jsx(S,{value:"cpa",children:"CPA - Cost Per Action"}),r.jsx(S,{value:"cps",children:"CPS - Cost Per Sale"}),r.jsx(S,{value:"cpl",children:"CPL - Cost Per Lead"}),r.jsx(S,{value:"cpm",children:"CPM - Cost Per Mile"}),r.jsx(S,{value:"cpc",children:"CPC - Cost Per Click"}),r.jsx(S,{value:"cpi",children:"CPI - Cost Per Install"}),r.jsx(S,{value:"cro",children:"CRO - Cost Per Registration"}),r.jsx(S,{value:"revshare",children:"RevShare - Revenue Share"}),r.jsx(S,{value:"hybrid",children:"Hybrid"}),r.jsx(S,{value:"fixed",children:"Fixed"})]})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:"currency",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:t("default_currency")}),r.jsxs(he,{onValueChange:d.onChange,defaultValue:d.value,children:[r.jsx(ft,{children:r.jsx(de,{"data-testid":"select-currency",children:r.jsx(fe,{})})}),r.jsxs(ue,{children:[r.jsx(S,{value:"USD",children:"USD"}),r.jsx(S,{value:"EUR",children:"EUR"}),r.jsx(S,{value:"GBP",children:"GBP"})]})]}),r.jsx(mt,{})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(L,{className:"text-base font-medium",children:t("kpi_conditions")}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(dt,{control:i.control,name:"kpiConditions_ru",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"KPI условия (Русский)"}),r.jsx(ft,{children:r.jsx(pt,{...d,placeholder:"Условия KPI на русском языке",rows:2,"data-testid":"textarea-kpi-conditions-ru"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:"kpiConditions_en",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"KPI Conditions (English)"}),r.jsx(ft,{children:r.jsx(pt,{...d,placeholder:"KPI conditions in English",rows:2,"data-testid":"textarea-kpi-conditions-en"})}),r.jsx(mt,{})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(L,{className:"text-base font-medium",children:t("offer_goals")}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(dt,{control:i.control,name:"goals_ru",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Цели (Русский)"}),r.jsx(ft,{children:r.jsx(pt,{...d,placeholder:"Цели оффера на русском языке",rows:2,"data-testid":"textarea-goals-ru"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:"goals_en",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Goals (English)"}),r.jsx(ft,{children:r.jsx(pt,{...d,placeholder:"Offer goals in English",rows:2,"data-testid":"textarea-goals-en"})}),r.jsx(mt,{})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(L,{className:"text-base font-medium",children:t("allowed_traffic_sources")}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 max-h-60 overflow-y-auto border rounded-md p-3",children:c.map(d=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(on,{id:`source-${d}`,checked:i.watch("allowedTrafficSources").includes(d),onCheckedChange:u=>{const h=i.getValues("allowedTrafficSources");u?i.setValue("allowedTrafficSources",[...h,d]):i.setValue("allowedTrafficSources",h.filter(f=>f!==d))}}),r.jsx(L,{htmlFor:`source-${d}`,className:"text-sm",children:d.replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase())})]},d))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(L,{className:"text-base font-medium",children:t("allowed_apps")}),r.jsx(dt,{control:i.control,name:"allowedApps",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ft,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs(he,{onValueChange:u=>{const h=d.value||[];h.includes(u)||d.onChange([...h,u])},children:[r.jsx(de,{"data-testid":"select-allowed-apps",children:r.jsx(fe,{placeholder:t("select_app")})}),r.jsxs(ue,{children:[r.jsx(S,{value:"PWA apps",children:t("pwa_apps")}),r.jsx(S,{value:"WebView apps",children:t("webview_apps")}),r.jsx(S,{value:"Native Android (.apk) apps",children:t("android_apps")}),r.jsx(S,{value:"iOS apps",children:t("ios_apps")}),r.jsx(S,{value:"Mobile apps",children:t("mobile_apps")}),r.jsx(S,{value:"Desktop apps",children:t("desktop_apps")}),r.jsx(S,{value:"Web apps",children:t("web_apps")}),r.jsx(S,{value:"Telegram bots",children:t("telegram_bots")}),r.jsx(S,{value:"Browser extensions",children:t("browser_extensions")}),r.jsx(S,{value:"Chrome extensions",children:t("chrome_extensions")}),r.jsx(S,{value:"Firefox extensions",children:t("firefox_extensions")})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ne,{placeholder:t("custom_app_placeholder"),onKeyDown:u=>{if(u.key==="Enter"){u.preventDefault();const h=u.currentTarget.value.trim();if(h){const f=d.value||[];f.includes(h)||d.onChange([...f,h]),u.currentTarget.value=""}}},"data-testid":"input-custom-app"}),r.jsx(M,{type:"button",variant:"outline",onClick:u=>{const h=u.currentTarget.previousElementSibling,f=h.value.trim();if(f){const m=d.value||[];m.includes(f)||d.onChange([...m,f]),h.value=""}},"data-testid":"button-add-custom-app",children:t("add")})]}),d.value&&d.value.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:d.value.map((u,h)=>r.jsxs(le,{variant:"secondary",className:"flex items-center gap-1",children:[u,r.jsx(M,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>{const f=d.value||[];d.onChange(f.filter((m,v)=>v!==h))},children:"×"})]},h))})]})}),r.jsx(mt,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(dt,{control:i.control,name:"dailyLimit",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:t("daily_limit")}),r.jsx(ft,{children:r.jsx(ne,{...d,type:"number",value:d.value||"",onChange:u=>d.onChange(u.target.value?parseInt(u.target.value):void 0),onWheel:u=>u.currentTarget.blur(),placeholder:t("unlimited"),"data-testid":"input-daily-limit",className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:"monthlyLimit",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:t("monthly_limit")}),r.jsx(ft,{children:r.jsx(ne,{...d,type:"number",value:d.value||"",onChange:u=>d.onChange(u.target.value?parseInt(u.target.value):void 0),onWheel:u=>u.currentTarget.blur(),placeholder:t("unlimited"),"data-testid":"input-monthly-limit",className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})}),r.jsx(mt,{})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(dt,{control:i.control,name:"antifraudEnabled",render:({field:d})=>r.jsxs(ct,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsx("div",{className:"space-y-0.5",children:r.jsx(ut,{className:"text-base",children:t("antifraud_enabled")})}),r.jsx(ft,{children:r.jsx(Ye,{checked:d.value,onCheckedChange:d.onChange,"data-testid":"switch-antifraud"})})]})}),r.jsx(dt,{control:i.control,name:"autoApprovePartners",render:({field:d})=>r.jsxs(ct,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsx("div",{className:"space-y-0.5",children:r.jsx(ut,{className:"text-base",children:t("auto_approve_partners")})}),r.jsx(ft,{children:r.jsx(Ye,{checked:d.value,onCheckedChange:d.onChange,"data-testid":"switch-auto-approve"})})]})})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-6",children:[r.jsx(M,{type:"button",variant:"outline",onClick:e,children:t("cancel")}),r.jsx(M,{type:"submit",disabled:l.isPending,"data-testid":"button-submit-offer",children:l.isPending?t("creating"):t("create_offer")})]})]})})}function L5e(){var ve,_e,Pe;const{t:e,i18n:t}=_r(),n=t.language,{toast:s}=lt(),a=Et(),[,i]=hs(),{isCollapsed:l}=Os(),[o,c]=y.useState(null),[d,u]=y.useState({}),h=async(X,ee)=>{try{await navigator.clipboard.writeText(X),u(ke=>({...ke,[ee]:!0})),s({title:"URL скопирован",description:"URL успешно скопирован в буфер обмена"}),setTimeout(()=>{u(ke=>({...ke,[ee]:!1}))},2e3)}catch{s({title:"Ошибка",description:"Не удалось скопировать URL",variant:"destructive"})}},[f,m]=y.useState(null),[v,x]=y.useState(!1),[w,j]=y.useState(!1),[g,b]=y.useState([]),[p,N]=y.useState(!1),[k,C]=y.useState(!1),[_,P]=y.useState(!1),[D,E]=y.useState(!1),[$,A]=y.useState(null),[T,O]=y.useState("");XMe(T,300);const[z,F]=y.useState("all"),[R,I]=y.useState("all"),[Q,Y]=y.useState("all"),[K,oe]=y.useState("all"),{data:ge=[]}=$e({queryKey:["/api/admin/offers"]}),Ne=ge.sort((X,ee)=>new Date(ee.createdAt).getTime()-new Date(X.createdAt).getTime()).filter(X=>{var _t,mr;const ee=!T||X.name.toLowerCase().includes(T.toLowerCase())||(typeof X.description=="object"?getMultilingualText(X.description,n,"").toLowerCase().includes(T.toLowerCase()):(_t=X.description)==null?void 0:_t.toLowerCase().includes(T.toLowerCase()))||((mr=X.advertiserName)==null?void 0:mr.toLowerCase().includes(T.toLowerCase())),ke=!K||K==="all"||X.name===K,Fe=z==="all"||X.status===z,or=R==="all"||X.category===R,Rr=Q==="all"||X.advertiserId===Q;return ee&&ke&&Fe&&or&&Rr}),Oe=!ge.length,{data:pe=[]}=$e({queryKey:["/api/admin/offer-logs",o==null?void 0:o.id],enabled:!!(o!=null&&o.id)}),{data:Me}=$e({queryKey:["/api/admin/offer-stats",o==null?void 0:o.id],enabled:!!(o!=null&&o.id)}),xe=Ee({mutationFn:async({offerId:X,action:ee,comment:ke})=>(await Te(`/api/admin/offers/${X}/moderate`,"POST",{action:ee,comment:ke})).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),N(!1),s({title:e("success"),description:e("operation_completed")})},onError:X=>{s({title:e("error"),description:X.message,variant:"destructive"})}}),ce=Ee({mutationFn:async X=>(await Te("/api/admin/offers/bulk-activate","POST",{offerIds:X})).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),b([]),P(!1),s({title:"Успех",description:`Активировано офферов: ${g.length}`})},onError:X=>{s({title:"Ошибка",description:X.message||"Не удалось активировать офферы",variant:"destructive"})}}),Ie=Ee({mutationFn:async X=>(await Te("/api/admin/offers/bulk-pause","POST",{offerIds:X})).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),b([]),P(!1),s({title:"Успех",description:`Остановлено офферов: ${g.length}`})},onError:X=>{s({title:"Ошибка",description:X.message||"Не удалось остановить офферы",variant:"destructive"})}}),ie=Ee({mutationFn:async X=>(await Te("/api/admin/offers/bulk-delete","POST",{offerIds:X})).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),b([]),P(!1),s({title:"Успех",description:`Удалено офферов: ${g.length}`})},onError:X=>{s({title:"Ошибка",description:X.message||"Не удалось удалить офферы",variant:"destructive"})}}),st=(X,ee)=>{b(ee?ke=>[...ke,X]:ke=>ke.filter(Fe=>Fe!==X))},G=X=>{b(X?Ne.map(ee=>ee.id):[])};y.useEffect(()=>{P(g.length>0)},[g]);const De=Ee({mutationFn:async X=>(await Te("PUT",`/api/admin/offers/${X.id}`,X)).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),x(!1),s({title:e("success"),description:e("data_updated")})},onError:X=>{s({title:e("error"),description:X.message,variant:"destructive"})}}),me=Ee({mutationFn:async X=>(await Te(`/api/admin/offers/${X}`,"DELETE")).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),s({title:"Успех",description:"Оффер успешно удален"})},onError:X=>{s({title:"Ошибка",description:X.message||"Не удалось удалить оффер",variant:"destructive"})}}),Be=()=>{try{const ee=(g.length>0?Ne.filter(_t=>g.includes(_t.id)):Ne).map(_t=>({id:_t.id,name:_t.name,category:_t.category,description:typeof _t.description=="object"?getMultilingualText(_t.description,n,""):_t.description,status:_t.status,payoutType:_t.payoutType,geoPricing:_t.geoPricing,landingPages:_t.landingPages,allowedTrafficSources:_t.trafficSources,allowedApplications:_t.allowedApps,kycRequired:_t.kycRequired,isPrivate:_t.isPrivate,restrictions:_t.restrictions,createdAt:_t.createdAt,advertiserId:_t.advertiserId})),ke=JSON.stringify(ee,null,2),Fe=new Blob([ke],{type:"application/json"}),or=URL.createObjectURL(Fe),Rr=document.createElement("a");Rr.href=or,Rr.download=`offers_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Rr),Rr.click(),document.body.removeChild(Rr),URL.revokeObjectURL(or),s({title:"Успех",description:`Экспортировано ${ee.length} офферов`}),b([])}catch{s({title:"Ошибка",description:"Не удалось экспортировать офферы",variant:"destructive"})}},qe=Ne.length>0&&g.length===Ne.length,Qe=g.length>0&&g.length<Ne.length,Ct=async X=>{try{const ee=await X.text(),ke=JSON.parse(ee);if(!Array.isArray(ke))throw new Error("Файл должен содержать массив офферов");if((await Te("POST","/api/admin/offers/import",{offers:ke})).ok)a.invalidateQueries({queryKey:["/api/admin/offers"]}),j(!1),s({title:"Успех",description:`Импортировано ${ke.length} офферов`});else throw new Error("Ошибка импорта на сервере")}catch(ee){s({title:"Ошибка",description:ee.message||"Не удалось импортировать офферы",variant:"destructive"})}},er=(X,ee,ke,Fe)=>{if(Fe)return r.jsx(le,{variant:"secondary",children:e("archived")});if(ke)return r.jsx(le,{variant:"destructive",children:e("blocked")});switch(X){case"active":return r.jsx(le,{className:"bg-green-500 hover:bg-green-600 text-white",children:e("active")});case"paused":return r.jsx(le,{className:"bg-red-500 hover:bg-red-600 text-white",children:e("paused")});case"pending":return r.jsx(le,{className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:e("pending")});case"draft":return r.jsx(le,{variant:"outline",children:e("draft")});default:return r.jsx(le,{variant:"outline",children:e(X)})}},V=Ee({mutationFn:async({offerId:X,status:ee})=>await(await Te(`/api/admin/offers/${X}`,"PUT",{status:ee})).json(),onSuccess:X=>{a.setQueryData(["/api/admin/offers"],ee=>ee&&ee.map(ke=>ke.id===X.id?{...ke,status:X.status}:ke)),E(!1),A(null),s({title:e("success"),description:e("status_changed_successfully")})},onError:X=>{s({title:e("error"),description:e("failed_to_change_status"),variant:"destructive"})}}),U=(X,ee)=>{o&&xe.mutate({offerId:o.id,action:X,comment:ee})},re=X=>{f&&m({...f,...X})};return Oe?r.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx(gn,{title:"",subtitle:""}),r.jsx("main",{className:"flex-1 p-6",children:r.jsx("div",{className:"flex items-center justify-center p-8",children:e("loading")})})]})]}):r.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${l?"lg:ml-16":"lg:ml-64"}`,children:[r.jsx(gn,{title:"",subtitle:""}),r.jsx("main",{className:"flex-1 p-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx("h1",{className:"text-3xl font-bold",children:"OffersManagement"})}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(jt,{open:k,onOpenChange:C,children:[r.jsx(Xa,{asChild:!0,children:r.jsxs(M,{"data-testid":"button-create-offer",title:e("create_offer_button"),children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),e("create_offer_button")]})}),r.jsxs(vt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(yt,{children:[r.jsx(bt,{children:e("create_new_offer")}),r.jsx(Ur,{children:e("fill_offer_information")})]}),r.jsx(F5e,{onSuccess:()=>C(!1)})]})]})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"w-5 h-5"}),e("filters")]})}),r.jsx(H,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{placeholder:e("search"),value:T,onChange:X=>O(X.target.value),className:"pl-10","data-testid":"input-search-offers"})]}),r.jsxs(he,{value:K,onValueChange:oe,children:[r.jsx(de,{"data-testid":"select-offer-name",title:e("offer_name_filter_tooltip"),children:r.jsx(fe,{placeholder:e("all_offers")})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:e("all_offers")}),ge==null?void 0:ge.map(X=>r.jsx(S,{value:X.name,children:X.name},X.id))]})]}),r.jsxs(he,{value:z,onValueChange:F,children:[r.jsx(de,{"data-testid":"select-status-filter",title:e("status_filter_tooltip"),children:r.jsx(fe,{placeholder:e("status")})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:e("all_statuses_filter")}),r.jsx(S,{value:"active",children:e("active")}),r.jsx(S,{value:"paused",children:e("paused")}),r.jsx(S,{value:"pending",children:e("waiting")}),r.jsx(S,{value:"draft",children:e("draft")})]})]}),r.jsxs(he,{value:R,onValueChange:I,children:[r.jsx(de,{"data-testid":"select-category-filter",title:e("category_filter_tooltip"),children:r.jsx(fe,{placeholder:e("category")})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:e("all_categories_filter")}),r.jsx(S,{value:"gambling",children:e("gambling")}),r.jsx(S,{value:"finance",children:e("finance")}),r.jsx(S,{value:"nutra",children:e("nutra")}),r.jsx(S,{value:"dating",children:e("dating")}),r.jsx(S,{value:"sweepstakes",children:e("sweepstakes")}),r.jsx(S,{value:"crypto",children:e("crypto")}),r.jsx(S,{value:"e-commerce",children:e("e_commerce")}),r.jsx(S,{value:"mobile",children:e("mobile")}),r.jsx(S,{value:"games",children:e("games")}),r.jsx(S,{value:"software",children:e("software")})]})]}),r.jsxs(he,{value:Q,onValueChange:Y,children:[r.jsx(de,{"data-testid":"select-advertiser-filter",title:e("advertiser_filter_tooltip"),children:r.jsx(fe,{placeholder:e("advertiser")})}),r.jsx(ue,{children:r.jsx(S,{value:"all",children:e("all_advertisers_filter")})})]})]})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(ae,{children:[e("offers")," (",Ne.length,")"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(M,{size:"sm",variant:"outline",onClick:Be,className:"border-green-600 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20","data-testid":"button-export-offers",disabled:Ne.length===0,title:e("export_csv_tooltip"),children:[r.jsx(vr,{className:"w-4 h-4 mr-2"}),g.length>0?`${e("export")} (${g.length})`:e("export")]}),r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>j(!0),className:"border-purple-600 text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/20","data-testid":"button-import-offers",title:e("import_csv_tooltip"),children:[r.jsx(pl,{className:"w-4 h-4 mr-2"}),e("import")]})]})]})}),r.jsxs(H,{children:[_&&r.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(fn,{className:"w-5 h-5 text-blue-600"}),r.jsxs("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[e("selected_offers"),": ",g.length]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>ce.mutate(g),disabled:ce.isPending,className:"border-green-600 text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20",title:e("activate_selected_tooltip"),children:[r.jsx(HA,{className:"w-4 h-4 mr-1"}),e("activate")]}),r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>Ie.mutate(g),disabled:Ie.isPending,className:"border-yellow-600 text-yellow-700 hover:bg-yellow-50 dark:hover:bg-yellow-900/20",title:e("pause_selected_tooltip"),children:[r.jsx(WA,{className:"w-4 h-4 mr-1"}),e("pause")]}),r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>ie.mutate(g),disabled:ie.isPending,className:"border-red-600 text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",title:e("delete_selected_tooltip"),children:[r.jsx(wr,{className:"w-4 h-4 mr-1"}),e("delete")]}),r.jsxs(M,{size:"sm",variant:"ghost",onClick:()=>{b([]),P(!1)},className:"text-gray-600 hover:text-gray-800",title:e("cancel_selection_tooltip"),children:[r.jsx(zt,{className:"w-4 h-4 mr-1"}),e("cancel")]})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{className:"w-12",children:r.jsx(on,{checked:qe,onCheckedChange:G,"data-testid":"checkbox-select-all",className:Qe?"data-[state=checked]:bg-blue-600":"",ref:X=>{X&&(X.indeterminate=Qe)}})}),r.jsx(J,{children:e("offer_name")}),r.jsx(J,{children:e("advertiser")}),r.jsx(J,{children:e("category")}),r.jsx(J,{children:e("payout")}),r.jsx(J,{children:e("traffic_sources_column")}),r.jsx(J,{children:e("allowed_apps_column")}),r.jsx(J,{children:e("status")}),r.jsx(J,{children:e("created")}),r.jsx(J,{children:e("actions")})]})}),r.jsx($t,{children:Ne.map(X=>{var ee,ke,Fe,or,Rr;return r.jsxs(Re,{children:[r.jsx(q,{children:r.jsx(on,{checked:g.includes(X.id),onCheckedChange:_t=>st(X.id,_t),"data-testid":`checkbox-select-${X.id}`})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[X.logo&&r.jsx("img",{src:X.logo,alt:X.name,className:"w-8 h-8 rounded object-cover",onError:_t=>{_t.target.style.display="none"}}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium cursor-pointer hover:text-blue-600 hover:underline transition-colors",onClick:()=>i(`/admin/OfferDetails/${X.id}`),"data-testid":`link-offer-name-${X.id}`,title:"Открыть детали оффера",children:X.name}),r.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-48",children:getMultilingualText(X.description,n,e("not_specified"))})]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{children:X.advertiserName||"Unknown"}),r.jsx("div",{className:"text-muted-foreground text-xs",children:X.advertiserId.slice(0,8)})]})}),r.jsxs(q,{children:[(()=>{const mr=(ea=>{switch(ea==null?void 0:ea.toLowerCase()){case"gambling":return"bg-red-100 text-red-800 border-red-200";case"finance":return"bg-green-100 text-green-800 border-green-200";case"nutra":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"dating":return"bg-pink-100 text-pink-800 border-pink-200";case"sweepstakes":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"crypto":return"bg-orange-100 text-orange-800 border-orange-200";case"e-commerce":return"bg-blue-100 text-blue-800 border-blue-200";case"mobile":return"bg-purple-100 text-purple-800 border-purple-200";case"games":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"software":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}})(X.category),ka={gambling:e("gambling"),finance:e("finance"),nutra:e("nutra"),dating:e("dating"),sweepstakes:e("sweepstakes"),crypto:e("crypto"),"e-commerce":e("e_commerce"),mobile:e("mobile"),games:e("games"),software:e("software")}[X.category]||X.category;return r.jsx(le,{className:`${mr} border text-xs`,children:ka})})(),X.vertical&&r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:X.vertical})]}),r.jsx(q,{children:X.landingPages&&X.landingPages.length>0?r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-bold text-green-600 uppercase mb-1",children:X.payoutType}),r.jsx("div",{className:`text-sm font-medium ${((ee=X.landingPages)==null?void 0:ee.length)>=3?"grid grid-cols-2 gap-1":"space-x-1"}`,children:(ke=X.landingPages)==null?void 0:ke.map((_t,mr)=>{var Fo,It;const ka={us:"🇺🇸",gb:"🇬🇧",uk:"🇬🇧",it:"🇮🇹",de:"🇩🇪",fr:"🇫🇷",es:"🇪🇸",ca:"🇨🇦",au:"🇦🇺",br:"🇧🇷",mx:"🇲🇽",jp:"🇯🇵",kr:"🇰🇷",in:"🇮🇳",ru:"🇷🇺",cn:"🇨🇳"}[((Fo=_t.geo)==null?void 0:Fo.toLowerCase())||""]||"🌍",ea=(_t.geo||"XX").toUpperCase(),od={USD:"$",EUR:"€",GBP:"£",RUB:"₽",JPY:"¥",CNY:"¥",KRW:"₩",INR:"₹",CAD:"C$",AUD:"A$",BRL:"R$",MXN:"$"}[_t.currency]||_t.currency;return r.jsxs("span",{className:`text-xs ${(((It=X.landingPages)==null?void 0:It.length)||0)>=3?"block":"inline-block mr-1"}`,children:[ka,ea,"-",_t.payoutAmount,od]},mr)})})]}):r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-bold text-green-600 uppercase mb-1",children:X.payoutType}),r.jsxs("div",{className:"font-medium",children:["$",X.payout]})]})}),r.jsx(q,{children:r.jsx("div",{className:"text-xs space-y-1",children:X.trafficSources&&X.trafficSources.length>0?r.jsxs("div",{className:"space-y-1",children:[Array.from({length:Math.ceil(Math.min(X.trafficSources.length,4)/2)},(_t,mr)=>r.jsx("div",{className:"flex gap-1",children:X.trafficSources.slice(mr*2,(mr+1)*2).map((Ht,ka)=>{const qu={facebook_ads:"Facebook",google_ads:"Google",instagram_ads:"Instagram",tiktok_ads:"TikTok",youtube_ads:"YouTube",twitter_ads:"Twitter",linkedin_ads:"LinkedIn",pinterest_ads:"Pinterest",snapchat_ads:"Snapchat",reddit_ads:"Reddit",mytarget:"MyTarget",push_traffic:"Push",inpage_push:"InPage",calendar_push:"Calendar",sms_push:"SMS Push",outbrain:"Outbrain",taboola:"Taboola",mgid:"MGID",revcontent:"RevContent",adnow:"AdNow",pop_traffic:"Pop",email_marketing:"Email",seo_organic:"SEO",mobile_app:"Mobile",influencer:"Influencer",teaser_networks:"Teaser",uac:"UAC",pps:"PPS",kmc:"KMC",other:"Other"}[Ht]||Ht,Fo=(It=>It.includes("facebook")||It.includes("instagram")?"bg-blue-100 text-blue-800":It.includes("google")||It.includes("youtube")?"bg-red-100 text-red-800":It.includes("tiktok")?"bg-black text-white":It.includes("twitter")||It.includes("linkedin")?"bg-cyan-100 text-cyan-800":It.includes("pinterest")?"bg-red-100 text-red-800":It.includes("snapchat")?"bg-yellow-100 text-yellow-800":It.includes("push")||It.includes("pop")?"bg-orange-100 text-orange-800":It.includes("email")||It.includes("sms")?"bg-green-100 text-green-800":It.includes("outbrain")||It.includes("taboola")||It.includes("mgid")||It.includes("revcontent")||It.includes("adnow")?"bg-purple-100 text-purple-800":It.includes("seo")||It.includes("organic")?"bg-emerald-100 text-emerald-800":It.includes("influencer")||It.includes("teaser")?"bg-pink-100 text-pink-800":"bg-gray-100 text-gray-800")(Ht);return r.jsx(le,{className:`text-xs whitespace-nowrap ${Fo} border-0`,children:qu},mr*2+ka)})},mr)),X.trafficSources.length>4&&r.jsxs("div",{className:"text-muted-foreground text-xs",children:["+",X.trafficSources.length-4," ",e("more")]})]}):r.jsx("span",{className:"text-muted-foreground",children:e("not_specified")})})}),r.jsx(q,{children:r.jsx("div",{className:"text-xs space-y-1",children:X.allowedApps&&Array.isArray(X.allowedApps)&&X.allowedApps.length>0?r.jsxs("div",{className:"space-y-1",children:[Array.from({length:Math.ceil(Math.min(((Fe=X.allowedApps)==null?void 0:Fe.length)||0,4)/2)},(_t,mr)=>r.jsx("div",{className:"flex gap-1",children:(X.allowedApps||[]).slice(mr*2,(mr+1)*2).map((Ht,ka)=>{const qu={"PWA apps":"PWA","WebView apps":"WebView","Native Android (.apk) apps":"Android","iOS apps":"iOS","Mobile apps":"Mobile","Desktop apps":"Desktop","Web apps":"Web","Telegram bots":"Telegram","Browser extensions":"Extensions","Chrome extensions":"Chrome Ext","Firefox extensions":"Firefox Ext"}[Ht]||Ht,od=["bg-blue-100 text-blue-800","bg-green-100 text-green-800","bg-purple-100 text-purple-800","bg-orange-100 text-orange-800"],Fo=od[(mr*2+ka)%od.length];return r.jsx(le,{className:`text-xs whitespace-nowrap ${Fo} border-0`,children:qu},mr*2+ka)})},mr)),(((or=X.allowedApps)==null?void 0:or.length)||0)>4&&r.jsxs("div",{className:"text-muted-foreground text-xs",children:["+",(((Rr=X.allowedApps)==null?void 0:Rr.length)||0)-4," ",e("more")]})]}):r.jsx("span",{className:"text-muted-foreground",children:e("not_specified")})})}),r.jsx(q,{children:r.jsx("div",{className:"cursor-pointer",onClick:()=>{A(X),E(!0)},children:er(X.status,X.moderationStatus,X.isBlocked,X.isArchived)})}),r.jsx(q,{children:r.jsx("div",{className:"text-sm",children:new Date(X.createdAt).toLocaleDateString()})}),r.jsx(q,{children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>i(`/admin/OfferDetails/${X.id}`),className:"h-8 w-8 p-0 hover:bg-blue-50 dark:hover:bg-blue-900/20","data-testid":`button-view-offer-${X.id}`,title:e("view_details"),children:r.jsx(hr,{className:"w-4 h-4 text-blue-600"})}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{m(X),x(!0)},className:"h-8 w-8 p-0 hover:bg-green-50 dark:hover:bg-green-900/20","data-testid":`button-edit-offer-${X.id}`,title:e("edit_offer_action"),children:r.jsx(cs,{className:"w-4 h-4 text-green-600"})}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{confirm(e("confirm_delete_offer"))&&me.mutate(X.id)},className:"h-8 w-8 p-0 hover:bg-red-50 dark:hover:bg-red-900/20","data-testid":`button-delete-offer-${X.id}`,disabled:me.isPending,title:e("delete_offer"),children:r.jsx(wr,{className:"w-4 h-4 text-red-600"})})]})})]},X.id)})})]})})]})]}),o&&r.jsx(jt,{open:!!o,onOpenChange:()=>c(null),children:r.jsxs(vt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(yt,{children:[r.jsx(bt,{children:o.name}),r.jsx(Ur,{children:o.description})]}),r.jsxs(Zr,{defaultValue:"details",className:"w-full",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-4",children:[r.jsx(We,{value:"details",children:e("details")}),r.jsx(We,{value:"analytics",children:e("analytics")}),r.jsx(We,{value:"creatives",children:e("creatives")}),r.jsx(We,{value:"history",children:e("history")})]}),r.jsxs(He,{value:"details",className:"space-y-4",children:[o.logo&&r.jsxs("div",{children:[r.jsx(L,{children:e("logo")}),r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:o.logo,alt:o.name,className:"w-16 h-16 rounded object-cover border"})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:e("category")}),r.jsx("div",{className:"font-medium",children:(()=>{const ee=(or=>{switch(or==null?void 0:or.toLowerCase()){case"gambling":return"bg-red-100 text-red-800 border-red-200";case"finance":return"bg-green-100 text-green-800 border-green-200";case"nutra":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"dating":return"bg-pink-100 text-pink-800 border-pink-200";case"sweepstakes":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"crypto":return"bg-orange-100 text-orange-800 border-orange-200";case"e-commerce":return"bg-blue-100 text-blue-800 border-blue-200";case"mobile":return"bg-purple-100 text-purple-800 border-purple-200";case"games":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"software":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}})(o.category),Fe={gambling:e("gambling"),finance:e("finance"),nutra:e("nutra"),dating:e("dating"),sweepstakes:e("sweepstakes"),crypto:e("crypto"),"e-commerce":e("e_commerce"),mobile:e("mobile"),games:e("games"),software:e("software")}[o.category]||o.category;return r.jsx(le,{className:`${ee} border inline-block`,children:Fe})})()})]}),r.jsxs("div",{children:[r.jsx(L,{children:e("vertical")}),r.jsx("div",{className:"font-medium",children:o.vertical||"N/A"})]}),r.jsxs("div",{children:[r.jsx(L,{children:e("payout")}),r.jsxs("div",{className:"font-medium",children:["$",o.payout," ",o.payoutType]})]}),r.jsxs("div",{children:[r.jsx(L,{children:e("countries")}),r.jsx("div",{className:"font-medium",children:Array.isArray(o.countries)&&o.countries.length>0?o.countries.join(", "):e("all_countries")})]})]}),o.landingPages&&o.landingPages.length>0&&r.jsxs("div",{children:[r.jsx(L,{children:"Лендинги и цены по гео"}),r.jsx("div",{className:"mt-2 space-y-2",children:o.landingPages.map((X,ee)=>{var mr;const Fe={us:"🇺🇸",gb:"🇬🇧",uk:"🇬🇧",it:"🇮🇹",de:"🇩🇪",fr:"🇫🇷",es:"🇪🇸",ca:"🇨🇦",au:"🇦🇺",br:"🇧🇷",mx:"🇲🇽",jp:"🇯🇵",kr:"🇰🇷",in:"🇮🇳",ru:"🇷🇺",cn:"🇨🇳"}[((mr=X.geo)==null?void 0:mr.toLowerCase())||""]||"🌍",or=(X.geo||"XX").toUpperCase(),_t={USD:"$",EUR:"€",GBP:"£",RUB:"₽",JPY:"¥",CNY:"¥",KRW:"₩",INR:"₹",CAD:"C$",AUD:"A$",BRL:"R$",MXN:"$"}[X.currency]||X.currency;return r.jsx("div",{className:"border rounded p-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"font-medium flex items-center gap-2",children:[r.jsxs("span",{children:[Fe," ",or]}),r.jsx("span",{children:X.name})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx("span",{className:"break-all",children:X.url}),r.jsx(M,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100 hover:text-blue-600",onClick:()=>h(X.url,`modal-landing-${ee}`),title:"Копировать URL",children:d[`modal-landing-${ee}`]?r.jsx(fn,{className:"w-4 h-4 text-green-600"}):r.jsx(Yr,{className:"w-4 h-4 text-blue-600"})})]})]}),r.jsxs("div",{className:"text-right ml-4",children:[r.jsxs("div",{className:"font-medium text-lg",children:[Fe,or,"-",X.payoutAmount,_t]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:X.currency})]})]})},ee)})})]}),r.jsxs("div",{children:[r.jsx(L,{children:e("landing_page")}),r.jsx("div",{className:"font-medium break-all",children:o.landingPageUrl||"Не указано"})]}),o.trafficSources&&o.trafficSources.length>0&&r.jsxs("div",{children:[r.jsx(L,{children:"Разрешенные источники трафика"}),r.jsx("div",{className:"mt-2 space-y-2",children:Array.from({length:Math.ceil(o.trafficSources.length/2)},(X,ee)=>r.jsx("div",{className:"flex gap-2",children:o.trafficSources.slice(ee*2,(ee+1)*2).map((ke,Fe)=>{const Rr={facebook_ads:"Facebook Ads",google_ads:"Google Ads",instagram_ads:"Instagram Ads",tiktok_ads:"TikTok Ads",youtube_ads:"YouTube Ads",twitter_ads:"Twitter Ads",linkedin_ads:"LinkedIn Ads",pinterest_ads:"Pinterest Ads",snapchat_ads:"Snapchat Ads",reddit_ads:"Reddit Ads",mytarget:"MyTarget",push_traffic:"Push трафик",inpage_push:"InPage Push",calendar_push:"Calendar Push",sms_push:"SMS Push",outbrain:"Outbrain",taboola:"Taboola",mgid:"MGID",revcontent:"RevContent",adnow:"AdNow",pop_traffic:"Pop трафик",email_marketing:"Email маркетинг",seo_organic:"SEO органический",mobile_app:"Мобильные приложения",influencer:"Инфлюенсер маркетинг",teaser_networks:"Тизерные сети",uac:"UAC",pps:"PPS",kmc:"KMC",other:"Другое"}[ke]||ke,mr=(Ht=>Ht.includes("facebook")||Ht.includes("instagram")?"bg-blue-100 text-blue-800 border-blue-200":Ht.includes("google")||Ht.includes("youtube")?"bg-red-100 text-red-800 border-red-200":Ht.includes("tiktok")?"bg-gray-800 text-white border-gray-900":Ht.includes("twitter")||Ht.includes("linkedin")?"bg-cyan-100 text-cyan-800 border-cyan-200":Ht.includes("pinterest")?"bg-red-100 text-red-800 border-red-200":Ht.includes("snapchat")?"bg-yellow-100 text-yellow-800 border-yellow-200":Ht.includes("push")||Ht.includes("pop")?"bg-orange-100 text-orange-800 border-orange-200":Ht.includes("email")||Ht.includes("sms")?"bg-green-100 text-green-800 border-green-200":Ht.includes("outbrain")||Ht.includes("taboola")||Ht.includes("mgid")||Ht.includes("revcontent")||Ht.includes("adnow")?"bg-purple-100 text-purple-800 border-purple-200":Ht.includes("seo")||Ht.includes("organic")?"bg-emerald-100 text-emerald-800 border-emerald-200":Ht.includes("influencer")||Ht.includes("teaser")?"bg-pink-100 text-pink-800 border-pink-200":Ht.includes("mytarget")||Ht.includes("reddit")?"bg-indigo-100 text-indigo-800 border-indigo-200":"bg-gray-100 text-gray-800 border-gray-200")(ke);return r.jsx(le,{className:`${mr} border`,children:Rr},ee*2+Fe)})},ee))})]}),o.allowedApps&&Array.isArray(o.allowedApps)&&o.allowedApps.length>0&&r.jsxs("div",{children:[r.jsx(L,{children:"Разрешенные приложения"}),r.jsx("div",{className:"mt-2 space-y-2",children:Array.from({length:Math.ceil((((ve=o.allowedApps)==null?void 0:ve.length)||0)/2)},(X,ee)=>r.jsx("div",{className:"flex gap-2",children:(o.allowedApps||[]).slice(ee*2,(ee+1)*2).map((ke,Fe)=>{const Rr={"PWA apps":"PWA приложения","WebView apps":"WebView приложения","Native Android (.apk) apps":"Android приложения (.apk)","iOS apps":"iOS приложения","Mobile apps":"Мобильные приложения","Desktop apps":"Настольные приложения","Web apps":"Веб приложения","Telegram bots":"Telegram боты","Browser extensions":"Браузерные расширения","Chrome extensions":"Расширения Chrome","Firefox extensions":"Расширения Firefox"}[ke]||ke,_t=["bg-blue-100 text-blue-800 border-blue-200","bg-green-100 text-green-800 border-green-200","bg-purple-100 text-purple-800 border-purple-200","bg-orange-100 text-orange-800 border-orange-200","bg-red-100 text-red-800 border-red-200","bg-indigo-100 text-indigo-800 border-indigo-200"],mr=_t[(ee*2+Fe)%_t.length];return r.jsx(le,{className:`${mr} border`,children:Rr},ee*2+Fe)})},ee))})]}),r.jsxs("div",{children:[r.jsx(L,{children:e("restrictions")}),r.jsx("div",{className:"font-medium",children:o.restrictions||e("no_restrictions")})]})]}),r.jsx(He,{value:"analytics",className:"space-y-4",children:Me?r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs(W,{children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-sm font-medium",children:e("clicks")})}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold",children:(Me==null?void 0:Me.clicks)||0})})]}),r.jsxs(W,{children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-sm font-medium",children:e("conversions")})}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold",children:(Me==null?void 0:Me.conversions)||0})})]}),r.jsxs(W,{children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-sm font-medium",children:e("cr")})}),r.jsx(H,{children:r.jsxs("div",{className:"text-2xl font-bold",children:[(Me==null?void 0:Me.cr)||"0.00","%"]})})]}),r.jsxs(W,{children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-sm font-medium",children:e("epc")})}),r.jsx(H,{children:r.jsxs("div",{className:"text-2xl font-bold",children:["$",(Me==null?void 0:Me.epc)||"0.00"]})})]})]}):r.jsx("div",{className:"text-center py-8",children:e("no_data")})}),r.jsx(He,{value:"creatives",className:"space-y-4",children:r.jsx("div",{className:"text-center py-8",children:e("no_creatives_available")})}),r.jsx(He,{value:"history",className:"space-y-4",children:Array.isArray(pe)&&pe.length>0?r.jsx("div",{className:"space-y-2",children:pe.map(X=>r.jsx("div",{className:"border rounded p-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:X.action}),X.fieldChanged&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:[X.fieldChanged,": ",X.oldValue," → ",X.newValue]}),X.comment&&r.jsx("div",{className:"text-sm mt-1",children:X.comment})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("div",{children:X.userName}),r.jsx("div",{children:new Date(X.createdAt).toLocaleString()})]})]})},X.id))}):r.jsx("div",{className:"text-center py-8",children:e("no_history_available")})})]})]})}),f&&r.jsx(jt,{open:v,onOpenChange:X=>{x(X),X||m(null)},children:r.jsxs(vt,{className:"max-w-6xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(yt,{children:[r.jsxs(bt,{children:["Редактировать оффер: ",f.name]}),r.jsx(Ur,{children:"Полное редактирование всех параметров оффера"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Название оффера"}),r.jsx(ne,{defaultValue:f.name,onChange:X=>re({name:X.target.value}),placeholder:"Введите название оффера"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Категория"}),r.jsxs(he,{defaultValue:f.category,onValueChange:X=>re({category:X}),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"gambling",children:"Гемблинг"}),r.jsx(S,{value:"finance",children:"Финансы"}),r.jsx(S,{value:"nutra",children:"Нутра"}),r.jsx(S,{value:"dating",children:"Знакомства"}),r.jsx(S,{value:"sweepstakes",children:"Лотереи"}),r.jsx(S,{value:"crypto",children:"Криптовалюты"}),r.jsx(S,{value:"e-commerce",children:"E-commerce"}),r.jsx(S,{value:"mobile",children:"Мобильные"}),r.jsx(S,{value:"gaming",children:"Игры"}),r.jsx(S,{value:"software",children:"ПО"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Описание"}),r.jsx(pt,{defaultValue:f.description,onChange:X=>re({description:X.target.value}),placeholder:"Описание оффера",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Статус"}),r.jsxs(he,{defaultValue:f.status,onValueChange:X=>re({status:X}),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"active",children:"Активен"}),r.jsx(S,{value:"paused",children:"Остановлен"}),r.jsx(S,{value:"pending",children:"Ожидает"}),r.jsx(S,{value:"draft",children:"Черновик"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Тип выплаты"}),r.jsxs(he,{defaultValue:f.payoutType,onValueChange:X=>re({payoutType:X}),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"CPA",children:"CPA"}),r.jsx(S,{value:"CPS",children:"CPS"}),r.jsx(S,{value:"CPL",children:"CPL"}),r.jsx(S,{value:"CRL",children:"CRL"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Валюта"}),r.jsxs(he,{defaultValue:f.currency,onValueChange:X=>re({currency:X}),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"USD",children:"USD"}),r.jsx(S,{value:"EUR",children:"EUR"}),r.jsx(S,{value:"RUB",children:"RUB"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"URL логотипа"}),r.jsx(ne,{defaultValue:f.logo||"",onChange:X=>re({logo:X.target.value}),placeholder:"https://example.com/logo.png"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"KPI условия"}),r.jsx(pt,{defaultValue:f.kpiConditions||"",onChange:X=>re({kpiConditions:X.target.value}),placeholder:"Условия достижения KPI",rows:2})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Дневной лимит"}),r.jsx(ne,{type:"number",defaultValue:((_e=f.dailyLimit)==null?void 0:_e.toString())||"",onChange:X=>re({dailyLimit:X.target.value?parseInt(X.target.value):void 0}),placeholder:"Без ограничений"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Месячный лимит"}),r.jsx(ne,{type:"number",defaultValue:((Pe=f.monthlyLimit)==null?void 0:Pe.toString())||"",onChange:X=>re({monthlyLimit:X.target.value?parseInt(X.target.value):void 0}),placeholder:"Без ограничений"})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Разрешенные источники трафика"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:["Facebook","Google","TikTok","Instagram","YouTube","Twitter","LinkedIn","Snapchat","Pinterest"].map(X=>{var ee;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`traffic-${X}`,checked:((ee=f.trafficSources)==null?void 0:ee.includes(X))||!1,onChange:ke=>{const Fe=f.trafficSources||[],or=ke.target.checked?[...Fe,X]:Fe.filter(Rr=>Rr!==X);re({trafficSources:or})},className:"rounded border-gray-300"}),r.jsx("label",{htmlFor:`traffic-${X}`,className:"text-sm",children:X})]},X)})})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Разрешенные приложения"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:["Мобильные приложения","Веб-приложения","Telegram боты","Браузерные расширения","Desktop приложения","PWA"].map(X=>{var ee;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`app-${X}`,checked:((ee=f.allowedApps)==null?void 0:ee.includes(X))||!1,onChange:ke=>{const Fe=f.allowedApps||[],or=ke.target.checked?[...Fe,X]:Fe.filter(Rr=>Rr!==X);re({allowedApps:or})},className:"rounded border-gray-300"}),r.jsx("label",{htmlFor:`app-${X}`,className:"text-sm",children:X})]},X)})})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Landing Pages"}),r.jsxs("div",{className:"space-y-3 mt-2",children:[(f.landingPages||[]).map((X,ee)=>r.jsxs("div",{className:"space-y-3 p-3 border rounded",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(ne,{placeholder:"Название",defaultValue:X.name,onChange:ke=>{const Fe=[...f.landingPages||[]];Fe[ee]={...X,name:ke.target.value},re({landingPages:Fe})}}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ne,{placeholder:"URL",defaultValue:X.url,className:"flex-1",onChange:ke=>{const Fe=[...f.landingPages||[]];Fe[ee]={...X,url:ke.target.value},re({landingPages:Fe})}}),X.url&&r.jsx(M,{type:"button",variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100 hover:text-blue-600",onClick:()=>h(X.url,`edit-landing-${ee}`),title:"Копировать URL",children:d[`edit-landing-${ee}`]?r.jsx(fn,{className:"w-4 h-4 text-green-600"}):r.jsx(Yr,{className:"w-4 h-4 text-blue-600"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(ne,{type:"number",placeholder:"Сумма",defaultValue:X.payoutAmount.toString(),onChange:ke=>{const Fe=[...f.landingPages||[]];Fe[ee]={...X,payoutAmount:parseFloat(ke.target.value)||0},re({landingPages:Fe})}}),r.jsx(ne,{placeholder:"GEO",defaultValue:X.geo,onChange:ke=>{const Fe=[...f.landingPages||[]];Fe[ee]={...X,geo:ke.target.value},re({landingPages:Fe})}})]})]},ee)),r.jsx(M,{type:"button",variant:"outline",onClick:()=>{const X=[...f.landingPages||[],{name:"",url:"",payoutAmount:0,currency:f.currency,geo:""}];re({landingPages:X})},title:"Добавить новую лендинг страницу",children:"Добавить Landing Page"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Ограничения"}),r.jsx(pt,{defaultValue:f.restrictions||"",onChange:X=>re({restrictions:X.target.value}),placeholder:"Ограничения по траффику",rows:2})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Комментарий модерации"}),r.jsx(pt,{defaultValue:f.moderationComment||"",onChange:X=>re({moderationComment:X.target.value}),placeholder:"Комментарий модератора",rows:2})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-base",children:"Защита от фрода"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Включить автоматическую защиту от мошенничества"})]}),r.jsx(Ye,{defaultChecked:f.antifraudEnabled||!1,onCheckedChange:X=>re({antifraudEnabled:X})})]}),r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-base",children:"Автоодобрение партнеров"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Автоматически одобрять новых партнеров"})]}),r.jsx(Ye,{defaultChecked:f.autoApprovePartners||!1,onCheckedChange:X=>re({autoApprovePartners:X})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-base",children:"KYC обязателен"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Требовать верификацию партнеров"})]}),r.jsx(Ye,{defaultChecked:f.kycRequired||!1,onCheckedChange:X=>re({kycRequired:X})})]}),r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-base",children:"Приватный оффер"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Скрыть от публичного просмотра"})]}),r.jsx(Ye,{defaultChecked:f.isPrivate||!1,onCheckedChange:X=>re({isPrivate:X})})]}),r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-base",children:"Smartlink"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Включить умную маршрутизацию"})]}),r.jsx(Ye,{defaultChecked:f.smartlinkEnabled||!1,onCheckedChange:X=>re({smartlinkEnabled:X})})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(M,{variant:"outline",onClick:()=>x(!1),children:"Отмена"}),r.jsx(M,{onClick:()=>{f&&De.mutate(f)},disabled:De.isPending,children:De.isPending?"Сохранение...":"Сохранить изменения"})]})]})]})}),$&&r.jsx(jt,{open:D,onOpenChange:E,children:r.jsxs(vt,{children:[r.jsxs(yt,{children:[r.jsx(bt,{children:e("change_offer_status")}),r.jsxs(Ur,{children:[e("select_new_status_for"),' "',$.name,'"']})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(M,{variant:$.status==="active"?"default":"outline",className:$.status==="active"?"bg-green-500 hover:bg-green-600":"border-green-500 text-green-600 hover:bg-green-50",onClick:()=>V.mutate({offerId:$.id,status:"active"}),disabled:V.isPending,"data-testid":"button-status-active",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e("active")]})}),r.jsx(M,{variant:$.status==="paused"?"default":"outline",className:$.status==="paused"?"bg-red-500 hover:bg-red-600":"border-red-500 text-red-600 hover:bg-red-50",onClick:()=>V.mutate({offerId:$.id,status:"paused"}),disabled:V.isPending,"data-testid":"button-status-paused",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e("paused")]})}),r.jsx(M,{variant:$.status==="pending"?"default":"outline",className:$.status==="pending"?"bg-yellow-500 hover:bg-yellow-600":"border-yellow-500 text-yellow-600 hover:bg-yellow-50",onClick:()=>V.mutate({offerId:$.id,status:"pending"}),disabled:V.isPending,"data-testid":"button-status-pending",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e("pending")]})}),r.jsx(M,{variant:$.status==="draft"?"default":"outline",onClick:()=>V.mutate({offerId:$.id,status:"draft"}),disabled:V.isPending,"data-testid":"button-status-draft",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),e("draft")]})})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[e("current_status"),": ",r.jsx("strong",{children:e($.status)})]})]})]})}),o&&r.jsx(jt,{open:p,onOpenChange:N,children:r.jsxs(vt,{children:[r.jsxs(yt,{children:[r.jsx(bt,{children:e("moderate_offer")}),r.jsx(Ur,{children:o.name})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(M,{onClick:()=>U("approve"),className:"flex-1",disabled:xe.isPending,"data-testid":"button-approve-offer",children:[r.jsx(nr,{className:"w-4 h-4 mr-2"}),e("approve")]}),r.jsxs(M,{variant:"destructive",onClick:()=>U("reject"),className:"flex-1",disabled:xe.isPending,"data-testid":"button-reject-offer",children:[r.jsx(zt,{className:"w-4 h-4 mr-2"}),e("reject")]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(M,{variant:"outline",onClick:()=>U("needs_revision"),className:"flex-1",disabled:xe.isPending,"data-testid":"button-needs-revision-offer",children:[r.jsx(qa,{className:"w-4 h-4 mr-2"}),e("needs_revision")]}),r.jsxs(M,{variant:"outline",onClick:()=>U("archive"),className:"flex-1",disabled:xe.isPending,"data-testid":"button-archive-offer",children:[r.jsx(zA,{className:"w-4 h-4 mr-2"}),e("archive")]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"moderationComment",children:e("comment")}),r.jsx(pt,{id:"moderationComment",placeholder:e("enter_moderation_comment"),"data-testid":"textarea-moderation-comment"})]})]})]})}),r.jsx(jt,{open:w,onOpenChange:j,children:r.jsxs(vt,{children:[r.jsxs(yt,{children:[r.jsx(bt,{children:"Импорт офферов"}),r.jsx(Ur,{children:"Выберите JSON файл с офферами для импорта"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"importFile",children:"Файл офферов (JSON)"}),r.jsx(ne,{id:"importFile",type:"file",accept:".json",onChange:X=>{var ke;const ee=(ke=X.target.files)==null?void 0:ke[0];ee&&Ct(ee)},"data-testid":"input-import-file"})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("p",{children:"Файл должен содержать массив объектов офферов в формате JSON."}),r.jsx("p",{children:"Поддерживаемые поля: name, category, description, status, payoutType, geoPricing, и другие."})]})]})]})})]})})]})]})}const IH=y.memo(({currentPage:e,onNavigateToPartner:t,onNavigateToGeo:n,onNavigateToFraud:s,dateFilter:a,offerId:i})=>{const l=y.useMemo(()=>Array.from({length:10},(u,h)=>{const f=(e-1)*10+h;return{date:new Date(Date.now()-f*24*60*60*1e3).toLocaleDateString("ru-RU"),uniques:Math.floor(Math.random()*500)+100+f*10,cr_value:`$${(Math.random()*100+20+f*2).toFixed(2)}`,epc_value:`$${(Math.random()*2+.1+f*.05).toFixed(3)}`,registrations:Math.floor(Math.random()*80)+20+f*5,deposits:Math.floor(Math.random()*25)+8+f*2,geo:`🇺🇸 US (${(Math.random()*12+2).toFixed(1)}%)`,fraud_rejects:Math.floor(Math.random()*20)+1,partner:`П#${f+1}`}}),[e]),o=y.useCallback(u=>{t(u)},[t]),c=y.useCallback(u=>{n(u)},[n]),d=y.useCallback(()=>{i&&s(i)},[s,i]);return r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Дата"}),r.jsx(J,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ar,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),"Уники"]})}),r.jsx(J,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Rt,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"CR$"]})}),r.jsx(J,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Cr,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),"EPC$"]})}),r.jsx(J,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Mi,{className:"w-4 h-4 text-cyan-600 dark:text-cyan-400"}),"REG"]})}),r.jsx(J,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Tm,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),"DEP"]})}),r.jsx(J,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(dr,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),"GEO"]})}),r.jsx(J,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Lt,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),"Фрод-Отклонение"]})}),r.jsx(J,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ar,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"}),"Партнер"]})})]})}),r.jsx($t,{children:l.map((u,h)=>r.jsxs(Re,{children:[r.jsx(q,{className:"font-medium",children:u.date}),r.jsx(q,{className:"text-blue-600 dark:text-blue-400 font-medium",children:u.uniques}),r.jsx(q,{className:"text-green-600 dark:text-green-400 font-medium",children:u.cr_value}),r.jsx(q,{className:"text-purple-600 dark:text-purple-400 font-medium",children:u.epc_value}),r.jsx(q,{className:"text-cyan-600 dark:text-cyan-400 font-medium",children:u.registrations}),r.jsx(q,{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:u.deposits}),r.jsx(q,{className:"text-orange-600 dark:text-orange-400 font-medium",children:r.jsxs("button",{onClick:()=>c("US"),className:"flex items-center gap-1 hover:underline hover:bg-orange-50 dark:hover:bg-orange-900/20 px-2 py-1 rounded transition-all duration-200 cursor-pointer group",title:"Перейти к аналитике по гео",children:[r.jsx(dr,{className:"w-3 h-3 opacity-60 group-hover:opacity-100 transition-opacity"}),u.geo,r.jsx(cr,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity ml-1"})]})}),r.jsx(q,{className:"text-red-600 dark:text-red-400 font-medium",children:r.jsxs("button",{onClick:d,className:"flex items-center gap-1 hover:underline hover:bg-red-50 dark:hover:bg-red-900/20 px-2 py-1 rounded transition-all duration-200 cursor-pointer group",title:"Перейти к управлению фродом",children:[r.jsx(Lt,{className:"w-3 h-3 opacity-60 group-hover:opacity-100 transition-opacity"}),u.fraud_rejects,r.jsx(hr,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity ml-1"})]})}),r.jsx(q,{className:"text-indigo-600 dark:text-indigo-400 font-medium",children:r.jsxs("button",{onClick:()=>o(u.partner),className:"flex items-center gap-1 hover:underline hover:bg-indigo-50 dark:hover:bg-indigo-900/20 px-2 py-1 rounded transition-all duration-200 cursor-pointer group",title:"Перейти к управлению партнером",children:[r.jsx(ar,{className:"w-3 h-3 opacity-60 group-hover:opacity-100 transition-opacity"}),u.partner,r.jsx(hr,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity ml-1"})]})})]},`${e}-${h}`))})]})});IH.displayName="OptimizedAnalyticsTable";function U5e(){var er;const[,e]=hs(),t=Rv(),{t:n,i18n:s}=_r(),a=s.language,{isCollapsed:i}=Os(),[l,o]=y.useState("details"),[c,d]=y.useState([]),[u,h]=y.useState(!1),f=y.useRef(null),{toast:m}=lt(),[v,x]=y.useState("7"),[w,j]=y.useState(""),[g,b]=y.useState(""),[p,N]=y.useState("all"),[k,C]=y.useState(""),[_,P]=y.useState("all"),[D,E]=y.useState(""),[$,A]=y.useState("all"),[T,O]=y.useState(""),[z,F]=y.useState("all"),[R,I]=y.useState(""),[Q,Y]=y.useState({uniques:1}),[K,oe]=y.useState(!1),[ge,Ne]=y.useState({}),Oe=async(V,U)=>{try{await navigator.clipboard.writeText(V),Ne(re=>({...re,[U]:!0})),m({title:n("url_copied"),description:n("url_copied_success")}),setTimeout(()=>{Ne(re=>({...re,[U]:!1}))},2e3)}catch{m({title:n("copy_error"),description:n("copy_error_message"),variant:"destructive"})}},pe=t.id,{data:Me=[],isLoading:xe}=$e({queryKey:["/api/admin/offers"],enabled:!!pe}),ce=Me.find(V=>V.id===pe),{data:Ie}=$e({queryKey:["/api/admin/offer-stats",pe],enabled:!!pe}),ie=Ie;if(xe)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:n("loading")})]})});if(!ce)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600",children:n("offer_not_found")}),r.jsx(M,{onClick:()=>e("/admin/OffersManagement"),className:"mt-4",children:n("back_to_offers")})]})});const st=V=>({gambling:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",finance:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",nutra:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400",dating:"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-400",lottery:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",crypto:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",ecommerce:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",mobile:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",gaming:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/20 dark:text-indigo-400",software:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"})[V]||"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",G=V=>({active:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",draft:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",blocked:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",archived:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400"})[V]||"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",De=V=>{if(!V||!Array.isArray(V))return[];const U={Facebook:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",Instagram:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",Google:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",YouTube:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",TikTok:"bg-gray-900 text-white dark:bg-gray-800 dark:text-gray-200",Twitter:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/20 dark:text-cyan-400",LinkedIn:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/20 dark:text-cyan-400",Push:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",Pop:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",Email:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",SMS:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",Native:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",SEO:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400",Organic:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400",Influencer:"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-400",Teaser:"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-400"};return V.map((re,ve)=>({name:re,color:U[re]||"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}))},me=V=>{if(!V||!Array.isArray(V))return[];const U={web:"Веб-сайты",mobile_app:"Мобильные приложения",social_media:"Социальные сети",email:"Email рассылки",sms:"SMS рассылки",telegram_bots:"Telegram боты",browser_extensions:"Браузерные расширения",push_notifications:"Push уведомления",popup_ads:"Popup реклама",banner_ads:"Баннерная реклама",video_ads:"Видео реклама",native_ads:"Нативная реклама"},re=["bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400","bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400","bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400","bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400"];return V.map((ve,_e)=>({name:U[ve]||ve,color:re[_e%re.length]}))},Be=async V=>{const U=V.target.files;if(!(!U||U.length===0)){h(!0);try{const re=new FormData;Array.from(U).forEach((_e,Pe)=>{re.append(`creative_${Pe}`,_e)}),re.append("offerId",ce.id),await new Promise(_e=>setTimeout(_e,2e3));const ve=Array.from(U).map((_e,Pe)=>({id:Date.now()+Pe,name:_e.name,size:_e.size,type:_e.type,url:URL.createObjectURL(_e),uploadedAt:new Date().toISOString()}));d(_e=>[..._e,...ve]),m({title:"Успех",description:`Загружено ${U.length} файлов`})}catch{m({title:"Ошибка",description:"Не удалось загрузить файлы",variant:"destructive"})}finally{h(!1),f.current&&(f.current.value="")}}},qe=()=>{var V;(V=f.current)==null||V.click()},Qe=V=>{d(U=>U.filter(re=>re.id!==V)),m({title:"Удалено",description:"Креатив удален"})},Ct=V=>{if(V===0)return"0 Bytes";const U=1024,re=["Bytes","KB","MB","GB"],ve=Math.floor(Math.log(V)/Math.log(U));return parseFloat((V/Math.pow(U,ve)).toFixed(2))+" "+re[ve]};return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${i?"lg:ml-16":"lg:ml-64"}`,children:[r.jsx(gn,{title:"",subtitle:""}),r.jsx("main",{className:"flex-1 p-6",children:r.jsxs("div",{className:"container mx-auto px-6 py-8 max-w-6xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-6",children:"OfferDetails"}),r.jsxs(M,{variant:"ghost",onClick:()=>e("/admin/OffersManagement"),className:"mb-4 hover:bg-gray-100 dark:hover:bg-gray-800",title:n("back_to_offers"),children:[r.jsx(yc,{className:"w-4 h-4 mr-2"}),n("back_to_offers")]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"mb-2",children:r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ce.name})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(le,{className:G(ce.status),children:n(ce.status)}),r.jsx(le,{className:st(ce.category),children:n(ce.category)}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[r.jsx(Ls,{className:"w-4 h-4"}),r.jsx("span",{children:new Date(ce.createdAt).toLocaleDateString("ru-RU")})]})]})]}),r.jsx("div",{className:"flex items-center gap-4",children:ce.logo&&r.jsx("img",{src:ce.logo,alt:ce.name,className:"w-20 h-20 object-contain rounded-lg border border-gray-200 dark:border-gray-700"})})]})]}),r.jsxs(Zr,{value:l,onValueChange:o,className:"space-y-6",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-4 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[r.jsxs(We,{value:"details",className:"flex items-center gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700",children:[r.jsx(Kt,{className:"w-4 h-4"}),n("details")]}),r.jsxs(We,{value:"analytics",className:"flex items-center gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700",children:[r.jsx(cr,{className:"w-4 h-4"}),n("analytics")]}),r.jsxs(We,{value:"creatives",className:"flex items-center gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700",children:[r.jsx(co,{className:"w-4 h-4"}),n("creatives")]}),r.jsxs(We,{value:"history",className:"flex items-center gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700",children:[r.jsx(lr,{className:"w-4 h-4"}),n("history")]})]}),r.jsx(He,{value:"details",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[ce.kpiConditions&&r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(cr,{className:"w-5 h-5"}),n("kpi_description")]})}),r.jsx(H,{children:r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 break-words overflow-hidden",children:getMultilingualText(ce.kpiConditions,a,n("not_specified"))})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(dr,{className:"w-5 h-5"}),n("preview_url")]})}),r.jsx(H,{children:ce.landingPages&&ce.landingPages.length>0?r.jsx("div",{className:"space-y-4",children:ce.landingPages.map((V,U)=>{var re;return r.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:V.name||`${n("preview_url")} ${U+1}`}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 truncate",children:[r.jsx(dr,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"font-mono truncate",children:V.url})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(M,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100 hover:text-blue-600",onClick:()=>Oe(V.url,`landing-${U}`),title:n("copy_link"),children:ge[`landing-${U}`]?r.jsx(fn,{className:"w-4 h-4 text-green-600"}):r.jsx(Yr,{className:"w-4 h-4 text-blue-600"})}),r.jsx(M,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-purple-100 hover:text-purple-600",asChild:!0,title:n("preview_url"),children:r.jsx("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",children:r.jsx(hr,{className:"w-4 h-4 text-purple-600"})})})]})]}),r.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-center",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:"Выплата"}),r.jsx("div",{className:"text-xl font-bold text-green-700 dark:text-green-300",children:(()=>{const ve=ce.currency==="USD"?"$":ce.currency==="EUR"?"€":ce.currency==="RUB"?"₽":"";return V.payoutAmount?`${ve}${V.payoutAmount}`:V.payout&&V.payout!=="0.00"?`${ve}${V.payout}`:ce.payout&&ce.payout!=="0.00"?`${ve}${ce.payout}`:`${ve}0`})()})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:"Валюта"}),r.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:ce.currency||"USD"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:"Тип"}),r.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:((re=ce.payoutType)==null?void 0:re.toUpperCase())||"CPA"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:"Гео"}),r.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:(()=>{const ve={us:"🇺🇸",gb:"🇬🇧",de:"🇩🇪",fr:"🇫🇷",es:"🇪🇸",it:"🇮🇹",ca:"🇨🇦",au:"🇦🇺",br:"🇧🇷",mx:"🇲🇽",ru:"🇷🇺",ua:"🇺🇦",pl:"🇵🇱",nl:"🇳🇱",se:"🇸🇪",no:"🇳🇴",dk:"🇩🇰",fi:"🇫🇮",jp:"🇯🇵",kr:"🇰🇷",cn:"🇨🇳",in:"🇮🇳",th:"🇹🇭",vn:"🇻🇳"};if(V.geo){const _e=V.geo.toLowerCase(),Pe=ve[_e]||"🌍";return r.jsxs("span",{className:"text-sm",children:[Pe,_e.toUpperCase(),"-",V.payoutAmount||0,"$"]})}return r.jsx("span",{className:"text-sm",children:"Не указано"})})()})]})]})})]},U)})}):r.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-center text-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:"Выплата"}),r.jsx("div",{className:"text-xl font-bold text-green-700 dark:text-green-300",children:ce.payout&&ce.payout!=="0.00"?`${ce.currency==="USD"?"$":ce.currency==="EUR"?"€":ce.currency==="RUB"?"₽":""}${ce.payout}`:ce.geoPricing&&Array.isArray(ce.geoPricing)&&ce.geoPricing.length>0?`${ce.currency==="USD"?"$":ce.currency==="EUR"?"€":ce.currency==="RUB"?"₽":""}${ce.geoPricing[0].payout}`:`${ce.currency==="USD"?"$":ce.currency==="EUR"?"€":ce.currency==="RUB"?"₽":"$"}0`})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:n("currency")}),r.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:ce.currency||"USD"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:n("type")}),r.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:((er=ce.payoutType)==null?void 0:er.toUpperCase())||"CPA"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:n("geo")}),r.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:(()=>{let V=[];if(ce.geoPricing&&Array.isArray(ce.geoPricing)&&ce.geoPricing.length>0?V=ce.geoPricing.map(re=>re.country).filter(Boolean):ce.countries&&Array.isArray(ce.countries)&&ce.countries.length>0&&(V=ce.countries),V.length===0)return r.jsx("span",{className:"text-sm",children:n("not_specified")});const U={US:"🇺🇸",GB:"🇬🇧",DE:"🇩🇪",FR:"🇫🇷",ES:"🇪🇸",IT:"🇮🇹",CA:"🇨🇦",AU:"🇦🇺",BR:"🇧🇷",MX:"🇲🇽",RU:"🇷🇺",UA:"🇺🇦",PL:"🇵🇱",NL:"🇳🇱",SE:"🇸🇪",NO:"🇳🇴",DK:"🇩🇰",FI:"🇫🇮",JP:"🇯🇵",KR:"🇰🇷",CN:"🇨🇳",IN:"🇮🇳",TH:"🇹🇭",VN:"🇻🇳"};return r.jsxs("div",{className:"flex flex-wrap justify-center gap-1",children:[V.slice(0,3).map((re,ve)=>r.jsxs("span",{className:"text-sm",children:[U[re]||"🌍",re]},ve)),V.length>3&&r.jsxs("span",{className:"text-sm",children:["+",V.length-3]})]})})()})]})]})})})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(cr,{className:"w-5 h-5"}),n("analytics")]})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:(ie==null?void 0:ie.clicks)||0}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("clicks")})]}),r.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:(ie==null?void 0:ie.conversions)||0}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("conversions")})]})]}),r.jsxs("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:ie!=null&&ie.cr?`${ie.cr}%`:"0%"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CR"})]}),r.jsxs("div",{className:"text-center p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[r.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:["$",(ie==null?void 0:ie.revenue)||0]}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("revenue")})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Lv,{className:"w-5 h-5"}),n("additional_info")]})}),r.jsxs(H,{className:"space-y-3",children:[ce.dailyLimit&&r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("daily_limit")}),r.jsxs(le,{variant:"secondary",children:[ce.dailyLimit," ",n("conversions")]})]}),ce.vertical&&r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("vertical")}),r.jsx(le,{variant:"secondary",children:ce.vertical})]})]})]}),ce.goals&&r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Kt,{className:"w-5 h-5"}),n("offer_goals")]})}),r.jsx(H,{children:r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 break-words overflow-hidden",children:getMultilingualText(ce.goals,a,n("not_specified"))})})]}),ce.description&&r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Qn,{className:"w-5 h-5"}),n("description")]})}),r.jsx(H,{children:r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 break-words overflow-hidden max-h-32 overflow-y-auto",children:getMultilingualText(ce.description,a,n("not_specified"))})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(cr,{className:"w-5 h-5"}),n("traffic_sources")]})}),r.jsx(H,{children:ce.trafficSources&&Array.isArray(ce.trafficSources)&&ce.trafficSources.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:De(ce.trafficSources).map((V,U)=>r.jsx(le,{className:V.color,children:V.name},U))}):r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n("traffic_sources_not_specified")})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Lt,{className:"w-5 h-5"}),n("allowed_applications")]})}),r.jsx(H,{children:ce.allowedApps&&Array.isArray(ce.allowedApps)&&ce.allowedApps.length>0?r.jsx("div",{className:"grid grid-cols-2 gap-2",children:me(ce.allowedApps).map((V,U)=>r.jsx(le,{className:V.color,children:V.name},U))}):r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n("allowed_apps_not_specified")})})]})]})]})}),r.jsxs(He,{value:"analytics",className:"space-y-6",children:[r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"w-5 h-5"}),"Фильтры аналитики"]})}),r.jsxs(H,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(Ls,{className:"w-4 h-4"}),"Период"]}),r.jsxs(he,{value:v,onValueChange:x,children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите период"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"1",children:"Сегодня"}),r.jsx(S,{value:"7",children:"7 дней"}),r.jsx(S,{value:"30",children:"30 дней"}),r.jsx(S,{value:"90",children:"90 дней"}),r.jsx(S,{value:"365",children:"Год"}),r.jsx(S,{value:"all",children:"Все время"}),r.jsx(S,{value:"custom",children:"Пользовательский"})]})]}),v==="custom"&&r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-500",children:"От"}),r.jsx(ne,{type:"date",value:w,onChange:V=>j(V.target.value),className:"text-xs"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-500",children:"До"}),r.jsx(ne,{type:"date",value:g,onChange:V=>b(V.target.value),className:"text-xs"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(dr,{className:"w-4 h-4"}),"География"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(ne,{placeholder:"Поиск стран...",value:k,onChange:V=>C(V.target.value),className:"text-sm"}),r.jsxs(he,{value:p,onValueChange:N,children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите страну"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все страны"}),[{code:"US",name:"США",flag:"🇺🇸"},{code:"GB",name:"Великобритания",flag:"🇬🇧"},{code:"DE",name:"Германия",flag:"🇩🇪"},{code:"FR",name:"Франция",flag:"🇫🇷"},{code:"CA",name:"Канада",flag:"🇨🇦"},{code:"AU",name:"Австралия",flag:"🇦🇺"},{code:"RU",name:"Россия",flag:"🇷🇺"},{code:"BR",name:"Бразилия",flag:"🇧🇷"},{code:"IT",name:"Италия",flag:"🇮🇹"},{code:"ES",name:"Испания",flag:"🇪🇸"},{code:"PL",name:"Польша",flag:"🇵🇱"},{code:"NL",name:"Нидерланды",flag:"🇳🇱"},{code:"SE",name:"Швеция",flag:"🇸🇪"},{code:"NO",name:"Норвегия",flag:"🇳🇴"},{code:"DK",name:"Дания",flag:"🇩🇰"},{code:"FI",name:"Финляндия",flag:"🇫🇮"},{code:"CH",name:"Швейцария",flag:"🇨🇭"},{code:"AT",name:"Австрия",flag:"🇦🇹"},{code:"BE",name:"Бельгия",flag:"🇧🇪"},{code:"PT",name:"Португалия",flag:"🇵🇹"},{code:"IE",name:"Ирландия",flag:"🇮🇪"},{code:"CZ",name:"Чехия",flag:"🇨🇿"},{code:"HU",name:"Венгрия",flag:"🇭🇺"},{code:"GR",name:"Греция",flag:"🇬🇷"},{code:"JP",name:"Япония",flag:"🇯🇵"},{code:"KR",name:"Корея",flag:"🇰🇷"},{code:"CN",name:"Китай",flag:"🇨🇳"},{code:"IN",name:"Индия",flag:"🇮🇳"},{code:"SG",name:"Сингапур",flag:"🇸🇬"},{code:"HK",name:"Гонконг",flag:"🇭🇰"},{code:"TW",name:"Тайвань",flag:"🇹🇼"},{code:"TH",name:"Таиланд",flag:"🇹🇭"},{code:"MY",name:"Малайзия",flag:"🇲🇾"},{code:"ID",name:"Индонезия",flag:"🇮🇩"},{code:"PH",name:"Филиппины",flag:"🇵🇭"},{code:"VN",name:"Вьетнам",flag:"🇻🇳"},{code:"MX",name:"Мексика",flag:"🇲🇽"},{code:"AR",name:"Аргентина",flag:"🇦🇷"},{code:"CL",name:"Чили",flag:"🇨🇱"},{code:"CO",name:"Колумбия",flag:"🇨🇴"},{code:"PE",name:"Перу",flag:"🇵🇪"},{code:"ZA",name:"ЮАР",flag:"🇿🇦"},{code:"EG",name:"Египет",flag:"🇪🇬"},{code:"NG",name:"Нигерия",flag:"🇳🇬"},{code:"KE",name:"Кения",flag:"🇰🇪"},{code:"IL",name:"Израиль",flag:"🇮🇱"},{code:"AE",name:"ОАЭ",flag:"🇦🇪"},{code:"SA",name:"Саудовская Аравия",flag:"🇸🇦"},{code:"TR",name:"Турция",flag:"🇹🇷"},{code:"UA",name:"Украина",flag:"🇺🇦"},{code:"BY",name:"Беларусь",flag:"🇧🇾"},{code:"KZ",name:"Казахстан",flag:"🇰🇿"},{code:"UZ",name:"Узбекистан",flag:"🇺🇿"}].filter(U=>k===""||U.name.toLowerCase().includes(k.toLowerCase())||U.code.toLowerCase().includes(k.toLowerCase())).map(U=>r.jsxs(S,{value:U.code,children:[U.flag," ",U.name]},U.code))]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(Di,{className:"w-4 h-4"}),"Устройства"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(ne,{placeholder:"Поиск устройств...",value:D,onChange:V=>E(V.target.value),className:"text-sm"}),r.jsxs(he,{value:_,onValueChange:P,children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите устройство"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все устройства"}),[{value:"desktop",name:"Десктоп",icon:"🖥️"},{value:"mobile",name:"Мобильные",icon:"📱"},{value:"tablet",name:"Планшеты",icon:"📲"},{value:"ios",name:"iOS",icon:"🍎"},{value:"android",name:"Android",icon:"🤖"},{value:"windows",name:"Windows",icon:"🪟"},{value:"macos",name:"macOS",icon:"🍎"},{value:"linux",name:"Linux",icon:"🐧"},{value:"smart-tv",name:"Smart TV",icon:"📺"},{value:"console",name:"Игровые консоли",icon:"🎮"}].filter(U=>D===""||U.name.toLowerCase().includes(D.toLowerCase())||U.value.toLowerCase().includes(D.toLowerCase())).map(U=>r.jsxs(S,{value:U.value,children:[U.icon," ",U.name]},U.value))]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(Tm,{className:"w-4 h-4"}),"Рекламодатель"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(ne,{placeholder:"Поиск рекламодателей...",value:T,onChange:V=>O(V.target.value),className:"text-sm"}),r.jsxs(he,{value:$,onValueChange:A,children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите рекламодателя"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все рекламодатели"}),[{id:"advertiser1",name:"Advertiser Corp"},{id:"advertiser2",name:"Global Marketing Ltd"},{id:"advertiser3",name:"Digital Ads Inc"},{id:"advertiser4",name:"Performance Media"},{id:"advertiser5",name:"MediaMax Solutions"},{id:"advertiser6",name:"AdTech Partners"},{id:"advertiser7",name:"Revenue Network"},{id:"advertiser8",name:"Conversion Masters"},{id:"advertiser9",name:"Traffic Universe"},{id:"advertiser10",name:"Lead Generation Pro"}].filter(U=>T===""||U.name.toLowerCase().includes(T.toLowerCase())||U.id.toLowerCase().includes(T.toLowerCase())).map(U=>r.jsx(S,{value:U.id,children:U.name},U.id))]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(Mi,{className:"w-4 h-4"}),"Партнер"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(ne,{placeholder:"Поиск партнеров...",value:R,onChange:V=>I(V.target.value),className:"text-sm"}),r.jsxs(he,{value:z,onValueChange:F,children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите партнера"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все партнеры"}),[{id:"partner1",name:"TopAffiliates Pro"},{id:"partner2",name:"Performance Partners"},{id:"partner3",name:"Digital Media Network"},{id:"partner4",name:"Elite Affiliates"},{id:"partner5",name:"Global Traffic Hub"},{id:"partner6",name:"MediaBuyers United"},{id:"partner7",name:"Conversion Leaders"},{id:"partner8",name:"Traffic Masters"},{id:"partner9",name:"Revenue Rockets"},{id:"partner10",name:"Lead Champions"},{id:"partner11",name:"AdVantage Group"},{id:"partner12",name:"Performance Elite"},{id:"partner13",name:"Digital Success"},{id:"partner14",name:"Growth Partners"},{id:"partner15",name:"Media Professionals"}].filter(U=>R===""||U.name.toLowerCase().includes(R.toLowerCase())||U.id.toLowerCase().includes(R.toLowerCase())).map(U=>r.jsx(S,{value:U.id,children:U.name},U.id))]})]})]})]})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Активные фильтры:"}),v!=="all"&&r.jsx(le,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:v==="1"?"Сегодня":v==="7"?"7 дней":v==="30"?"30 дней":v==="90"?"90 дней":v==="365"?"Год":"Все время"}),p!=="all"&&r.jsx(le,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:p==="US"?"🇺🇸 США":p==="GB"?"🇬🇧 Великобритания":p==="DE"?"🇩🇪 Германия":p==="FR"?"🇫🇷 Франция":p==="CA"?"🇨🇦 Канада":p==="AU"?"🇦🇺 Австралия":p==="RU"?"🇷🇺 Россия":p==="BR"?"🇧🇷 Бразилия":p}),_!=="all"&&r.jsx(le,{variant:"secondary",className:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:_==="desktop"?"🖥️ Десктоп":_==="mobile"?"📱 Мобильные":_==="tablet"?"📱 Планшеты":_==="ios"?"🍎 iOS":_==="android"?"🤖 Android":_}),$!=="all"&&r.jsx(le,{variant:"secondary",className:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",children:$==="advertiser1"?"Advertiser Corp":$==="advertiser2"?"Global Marketing Ltd":$==="advertiser3"?"Digital Ads Inc":$==="advertiser4"?"Performance Media":$}),z!=="all"&&r.jsx(le,{variant:"secondary",className:"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-400",children:z==="partner1"?"TopAffiliates Pro":z==="partner2"?"Performance Partners":z==="partner3"?"Digital Media Network":z==="partner4"?"Elite Affiliates":z==="partner5"?"Global Traffic Hub":z}),v==="all"&&p==="all"&&_==="all"&&$==="all"&&z==="all"&&r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Нет активных фильтров"})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(W,{children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:r.jsx(hr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Клики"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(ie==null?void 0:ie.clicks)||0}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Всего переходов"})]})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:r.jsx(ar,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Конверсии"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(ie==null?void 0:ie.conversions)||0}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Целевые действия"})]})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:r.jsx(cr,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"CR %"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ie!=null&&ie.cr?`${ie.cr}%`:"0%"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Конверсия"})]})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:r.jsx(Rt,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Доход"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",(ie==null?void 0:ie.revenue)||0]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Общая выручка"})]})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2 text-lg",children:[r.jsx(Cr,{className:"w-5 h-5"}),"Эффективность"]})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CTR"}),r.jsx("span",{className:"text-sm font-medium",children:ie!=null&&ie.clicks&&(ie==null?void 0:ie.clicks)>0?`${((ie.conversions||0)/ie.clicks*100).toFixed(2)}%`:"0%"})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ARPU"}),r.jsxs("span",{className:"text-sm font-medium",children:["$",ie!=null&&ie.conversions&&ie.conversions>0?((ie.revenue||0)/ie.conversions).toFixed(2):"0"]})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"EPC"}),r.jsxs("span",{className:"text-sm font-medium",children:["$",ie!=null&&ie.clicks&&ie.clicks>0?((ie.revenue||0)/ie.clicks).toFixed(3):"0"]})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2 text-lg",children:[r.jsx(Ls,{className:"w-5 h-5"}),"Активность"]})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Сегодня"}),r.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:["+",Math.floor(((ie==null?void 0:ie.clicks)||0)*.1)]})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Вчера"}),r.jsx("span",{className:"text-sm font-medium",children:Math.floor(((ie==null?void 0:ie.clicks)||0)*.15)})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"7 дней"}),r.jsx("span",{className:"text-sm font-medium",children:Math.floor(((ie==null?void 0:ie.clicks)||0)*.8)})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2 text-lg",children:[r.jsx(Kt,{className:"w-5 h-5"}),"Качество"]})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Рейтинг"}),r.jsx("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"★ 4.2"})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Отказы"}),r.jsx("span",{className:"text-sm font-medium",children:"12%"})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Время на сайте"}),r.jsx("span",{className:"text-sm font-medium",children:"2:34"})]})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cr,{className:"w-5 h-5"}),"Детальная аналитика"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{const V=Array.from({length:10},(Pe,X)=>{const ke=((Q.uniques||1)-1)*10+X;return{Дата:new Date(Date.now()-ke*24*60*60*1e3).toLocaleDateString("ru-RU"),Уники:Math.floor(Math.random()*500)+100+ke*10,CR$:`$${(Math.random()*100+20+ke*2).toFixed(2)}`,EPC$:`$${(Math.random()*2+.1+ke*.05).toFixed(3)}`,REG:Math.floor(Math.random()*80)+20+ke*5,DEP:Math.floor(Math.random()*25)+8+ke*2,GEO:`US (${(Math.random()*12+2).toFixed(1)}%)`,"Фрод-Отклонение":Math.floor(Math.random()*20)+1,Партнер:`П#${ke+1}`}}),U=["\uFEFF"+Object.keys(V[0]).join(","),...V.map(Pe=>Object.values(Pe).join(","))].join(`
`),re=new Blob([U],{type:"text/csv;charset=utf-8;"}),ve=document.createElement("a"),_e=URL.createObjectURL(re);ve.setAttribute("href",_e),ve.setAttribute("download",`analytics_${new Date().toISOString().split("T")[0]}.csv`),ve.style.visibility="hidden",document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),m({title:"Экспорт завершен",description:"Таблица аналитики экспортирована в CSV файл"})},className:"flex items-center gap-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20",title:"Экспортировать таблицу в CSV",children:[r.jsx(vr,{className:"w-4 h-4"}),"Экспорт CSV"]}),r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{const V=Array.from({length:10},(Pe,X)=>{const ke=((Q.uniques||1)-1)*10+X;return{Дата:new Date(Date.now()-ke*24*60*60*1e3).toLocaleDateString("ru-RU"),Уники:Math.floor(Math.random()*500)+100+ke*10,CR$:(Math.random()*100+20+ke*2).toFixed(2),EPC$:(Math.random()*2+.1+ke*.05).toFixed(3),REG:Math.floor(Math.random()*80)+20+ke*5,DEP:Math.floor(Math.random()*25)+8+ke*2,GEO:`US (${(Math.random()*12+2).toFixed(1)}%)`,"Фрод-Отклонение":Math.floor(Math.random()*20)+1,Партнер:`П#${ke+1}`}}),U=[Object.keys(V[0]).join("	"),...V.map(Pe=>Object.values(Pe).join("	"))].join(`
`),re=new Blob([U],{type:"application/vnd.ms-excel;charset=utf-8;"}),ve=document.createElement("a"),_e=URL.createObjectURL(re);ve.setAttribute("href",_e),ve.setAttribute("download",`analytics_${new Date().toISOString().split("T")[0]}.xls`),ve.style.visibility="hidden",document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),m({title:"Экспорт завершен",description:"Таблица аналитики экспортирована в Excel файл"})},className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20",title:"Экспортировать таблицу в Excel",children:[r.jsx(Qn,{className:"w-4 h-4"}),"Экспорт Excel"]})]})]})}),r.jsxs(H,{children:[r.jsx(IH,{currentPage:Q.uniques,onNavigateToPartner:V=>{e(`/super-admin/users?filter=affiliate&search=${V}`)},onNavigateToGeo:V=>{e(`/super-admin/analytics?geo=${V}&date=${v}`)},onNavigateToFraud:V=>{e(`/super-admin/fraud-alerts?offer=${V}&date=${v}`)},dateFilter:v,offerId:t.id||""}),r.jsxs("div",{className:"flex justify-center mt-4 gap-2",children:[Q.uniques>1&&r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>Y(V=>({...V,uniques:V.uniques-1})),children:["← Страница ",Q.uniques-1]}),r.jsxs("span",{className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400",children:["Страница ",Q.uniques]}),r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>Y(V=>({...V,uniques:V.uniques+1})),children:["Страница ",Q.uniques+1," →"]})]})]})]})]}),r.jsx(He,{value:"creatives",className:"space-y-6",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(co,{className:"w-5 h-5"}),"Рекламные материалы"]}),r.jsx(M,{onClick:qe,disabled:u,className:"bg-blue-600 hover:bg-blue-700 text-white",children:u?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Загрузка..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pl,{className:"w-4 h-4 mr-2"}),"Загрузить файлы"]})})]})}),r.jsxs(H,{children:[r.jsx("input",{ref:f,type:"file",multiple:!0,accept:"image/*,video/*,.pdf,.zip,.rar",onChange:Be,className:"hidden"}),c.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(co,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Креативы не загружены"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Загрузите баннеры, изображения, видео и другие рекламные материалы"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Поддерживаются форматы: JPG, PNG, GIF, MP4, PDF, ZIP, RAR"})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Загружено файлов: ",c.length]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(V=>{var U;return r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:V.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:Ct(V.size)})]}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>Qe(V.id),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",title:"Удалить креатив",children:r.jsx(Tn,{className:"w-4 h-4"})})]}),V.type.startsWith("image/")?r.jsx("div",{className:"mb-3",children:r.jsx("img",{src:V.url,alt:V.name,className:"w-full h-32 object-cover rounded border"})}):r.jsx("div",{className:"mb-3 h-32 bg-gray-100 dark:bg-gray-700 rounded border flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(co,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:((U=V.type.split("/")[1])==null?void 0:U.toUpperCase())||"FILE"})]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(V.uploadedAt).toLocaleDateString("ru-RU")}),r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{const re=document.createElement("a");re.href=V.url,re.download=V.name,re.click()},className:"h-7 px-2 text-xs",children:[r.jsx(vr,{className:"w-3 h-3 mr-1"}),"Скачать"]})]})]},V.id)})})]})]})]})}),r.jsx(He,{value:"history",className:"space-y-6",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(lr,{className:"w-5 h-5"}),"История изменений"]})}),r.jsx(H,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-full",children:r.jsx(Ls,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Оффер создан"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(ce.createdAt).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Дополнительная история изменений будет отображаться здесь"})})]})})]})})]})]})})]}),r.jsx(jt,{open:K,onOpenChange:oe,children:r.jsxs(vt,{className:"max-w-6xl max-h-[80vh] overflow-y-auto",children:[r.jsx(yt,{children:r.jsxs(bt,{children:["Редактировать оффер: ",ce.name]})}),r.jsx(B5e,{offer:ce,onSuccess:()=>oe(!1)})]})})]})}function B5e({offer:e,onSuccess:t}){const{toast:n}=lt(),s=Et(),{language:a}=useLanguage(),i=Ke.object({name:Ke.string().min(1,"Название обязательно"),description:Ke.string().min(1,"Описание обязательно"),category:Ke.string().min(1,"Категория обязательна"),status:Ke.string().min(1,"Статус обязателен"),payoutType:Ke.string().min(1,"Тип выплаты обязателен"),currency:Ke.string().min(1,"Валюта обязательна"),logo:Ke.string().optional(),kpiConditions:Ke.string().optional(),allowedTrafficSources:Ke.array(Ke.string()).optional(),allowedApps:Ke.array(Ke.string()).optional(),antifraudEnabled:Ke.boolean().optional(),autoApprovePartners:Ke.boolean().optional(),dailyLimit:Ke.number().optional(),monthlyLimit:Ke.number().optional(),landingPages:Ke.array(Ke.object({name:Ke.string(),url:Ke.string(),payoutAmount:Ke.number(),currency:Ke.string(),geo:Ke.string().optional()})).optional()}),l=Zm({resolver:Jm(i),defaultValues:{name:e.name||"",description:typeof e.description=="object"?getMultilingualText(e.description,a,""):e.description||"",category:e.category||"",status:e.status||"draft",payoutType:e.payoutType||"cpa",currency:e.currency||"USD",logo:e.logo||"",kpiConditions:typeof e.kpiConditions=="object"?getMultilingualText(e.kpiConditions,a,""):e.kpiConditions||"",allowedTrafficSources:e.trafficSources||[],allowedApps:e.allowedApps||[],antifraudEnabled:e.antifraudEnabled||!0,autoApprovePartners:e.autoApprovePartners||!1,dailyLimit:e.dailyLimit||void 0,monthlyLimit:e.monthlyLimit||void 0,landingPages:e.landingPages||[{name:"Основная страница",url:"",payoutAmount:0,currency:"USD",geo:""}]}}),o=Ee({mutationFn:async d=>{const u={...d,trafficSources:d.allowedTrafficSources||[],allowedApps:d.allowedApps||[]};return await Te(`/api/admin/offers/${e.id}`,"PUT",u)},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/offers"]}),s.invalidateQueries({queryKey:[`/api/admin/offer-stats/${e.id}`]}),n({title:"Успех",description:"Оффер успешно обновлен"}),t()},onError:d=>{n({title:"Ошибка",description:d.message||"Не удалось обновить оффер",variant:"destructive"})}}),c=d=>{o.mutate(d)};return r.jsx(Qm,{...l,children:r.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(dt,{control:l.control,name:"name",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Название оффера"}),r.jsx(ft,{children:r.jsx(ne,{...d,placeholder:"Введите название оффера"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:l.control,name:"category",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Категория"}),r.jsxs(he,{onValueChange:d.onChange,defaultValue:d.value,children:[r.jsx(ft,{children:r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите категорию"})})}),r.jsxs(ue,{children:[r.jsx(S,{value:"gambling",children:"Гемблинг"}),r.jsx(S,{value:"finance",children:"Финансы"}),r.jsx(S,{value:"nutra",children:"Нутра"}),r.jsx(S,{value:"dating",children:"Знакомства"}),r.jsx(S,{value:"lottery",children:"Лотереи"}),r.jsx(S,{value:"crypto",children:"Криптовалюты"}),r.jsx(S,{value:"ecommerce",children:"E-commerce"}),r.jsx(S,{value:"mobile",children:"Мобильные"}),r.jsx(S,{value:"gaming",children:"Игры"}),r.jsx(S,{value:"software",children:"ПО"})]})]}),r.jsx(mt,{})]})})]}),r.jsx(dt,{control:l.control,name:"description",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Описание"}),r.jsx(ft,{children:r.jsx(pt,{...d,placeholder:"Подробное описание оффера",rows:3})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(dt,{control:l.control,name:"status",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Статус"}),r.jsxs(he,{onValueChange:d.onChange,defaultValue:d.value,children:[r.jsx(ft,{children:r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите статус"})})}),r.jsxs(ue,{children:[r.jsx(S,{value:"draft",children:"Черновик"}),r.jsx(S,{value:"active",children:"Активен"}),r.jsx(S,{value:"pending",children:"Ожидает"}),r.jsx(S,{value:"blocked",children:"Заблокирован"}),r.jsx(S,{value:"archived",children:"Архивный"})]})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:l.control,name:"payoutType",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Тип выплаты"}),r.jsxs(he,{onValueChange:d.onChange,defaultValue:d.value,children:[r.jsx(ft,{children:r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите тип"})})}),r.jsxs(ue,{children:[r.jsx(S,{value:"cpa",children:"CPA (за действие)"}),r.jsx(S,{value:"cps",children:"CPS (от продажи)"}),r.jsx(S,{value:"crl",children:"CRL (RevShare)"})]})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:l.control,name:"currency",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Валюта"}),r.jsxs(he,{onValueChange:d.onChange,defaultValue:d.value,children:[r.jsx(ft,{children:r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите валюту"})})}),r.jsxs(ue,{children:[r.jsx(S,{value:"USD",children:"USD"}),r.jsx(S,{value:"EUR",children:"EUR"}),r.jsx(S,{value:"RUB",children:"RUB"})]})]}),r.jsx(mt,{})]})})]}),r.jsx(dt,{control:l.control,name:"logo",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"URL логотипа"}),r.jsx(ft,{children:r.jsx(ne,{...d,placeholder:"https://example.com/logo.png"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:l.control,name:"kpiConditions",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"KPI условия"}),r.jsx(ft,{children:r.jsx(pt,{...d,placeholder:"Условия достижения KPI",rows:2})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(dt,{control:l.control,name:"dailyLimit",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Дневной лимит"}),r.jsx(ft,{children:r.jsx(ne,{type:"number",...d,value:d.value||"",onChange:u=>d.onChange(u.target.value?parseInt(u.target.value):void 0),placeholder:"Без ограничений"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:l.control,name:"monthlyLimit",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Месячный лимит"}),r.jsx(ft,{children:r.jsx(ne,{type:"number",...d,value:d.value||"",onChange:u=>d.onChange(u.target.value?parseInt(u.target.value):void 0),placeholder:"Без ограничений"})}),r.jsx(mt,{})]})})]}),r.jsx(dt,{control:l.control,name:"allowedTrafficSources",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Разрешенные источники трафика"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:["facebook_ads","google_ads","tiktok_ads","instagram_ads","youtube_ads","twitter_ads","linkedin_ads","snapchat_ads","pinterest_ads","reddit_ads","mytarget","push_traffic","pop_traffic","email_marketing","seo_organic","mobile_app","influencer","teaser_networks"].map(u=>{var f;const h={facebook_ads:"Facebook Ads",google_ads:"Google Ads",tiktok_ads:"TikTok Ads",instagram_ads:"Instagram Ads",youtube_ads:"YouTube Ads",twitter_ads:"Twitter Ads",linkedin_ads:"LinkedIn Ads",snapchat_ads:"Snapchat Ads",pinterest_ads:"Pinterest Ads",reddit_ads:"Reddit Ads",mytarget:"MyTarget",push_traffic:"Push трафик",pop_traffic:"Pop трафик",email_marketing:"Email маркетинг",seo_organic:"SEO органический",mobile_app:"Мобильные приложения",influencer:"Инфлюенсер маркетинг",teaser_networks:"Тизерные сети"};return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(on,{id:`traffic-${u}`,checked:((f=d.value)==null?void 0:f.includes(u))||!1,onCheckedChange:m=>{const v=d.value||[],x=m?[...v,u]:v.filter(w=>w!==u);d.onChange(x)}}),r.jsx("label",{htmlFor:`traffic-${u}`,className:"text-sm cursor-pointer",children:h[u]||u})]},u)})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:l.control,name:"allowedApps",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Разрешенные приложения"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:["Mobile apps","Web apps","Desktop apps","PWA apps","WebView apps","Native Android (.apk) apps","iOS apps","Telegram bots","Browser extensions"].map(u=>{var f;const h={"Mobile apps":"Мобильные приложения","Web apps":"Веб-приложения","Desktop apps":"Desktop приложения","PWA apps":"PWA приложения","WebView apps":"WebView приложения","Native Android (.apk) apps":"Android приложения (.apk)","iOS apps":"iOS приложения","Telegram bots":"Telegram боты","Browser extensions":"Браузерные расширения"};return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(on,{id:`app-${u}`,checked:((f=d.value)==null?void 0:f.includes(u))||!1,onCheckedChange:m=>{const v=d.value||[],x=m?[...v,u]:v.filter(w=>w!==u);d.onChange(x)}}),r.jsx("label",{htmlFor:`app-${u}`,className:"text-sm cursor-pointer",children:h[u]||u})]},u)})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:l.control,name:"landingPages",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Landing Pages"}),r.jsxs("div",{className:"space-y-3 mt-2",children:[(d.value||[]).map((u,h)=>{var f;return r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 p-3 border rounded",children:[r.jsx(ne,{placeholder:"Название",value:u.name,onChange:m=>{const v=[...d.value||[]];v[h]={...u,name:m.target.value},d.onChange(v)}}),r.jsx(ne,{placeholder:"URL",value:u.url,onChange:m=>{const v=[...d.value||[]];v[h]={...u,url:m.target.value},d.onChange(v)}}),r.jsx(ne,{type:"number",placeholder:"Сумма",value:((f=u.payoutAmount)==null?void 0:f.toString())||"",onChange:m=>{const v=[...d.value||[]];v[h]={...u,payoutAmount:parseFloat(m.target.value)||0},d.onChange(v)}}),r.jsx(ne,{placeholder:"GEO",value:u.geo||"",onChange:m=>{const v=[...d.value||[]];v[h]={...u,geo:m.target.value},d.onChange(v)}})]},h)}),r.jsx(M,{type:"button",variant:"outline",onClick:()=>{const u=[...d.value||[],{name:"",url:"",payoutAmount:0,currency:l.getValues("currency")||"USD",geo:""}];d.onChange(u)},children:"Добавить Landing Page"})]}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(dt,{control:l.control,name:"antifraudEnabled",render:({field:d})=>r.jsxs(ct,{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(ut,{className:"text-base",children:"Защита от фрода"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Включить автоматическую защиту от мошенничества"})]}),r.jsx(ft,{children:r.jsx(Ye,{checked:d.value,onCheckedChange:d.onChange})})]})}),r.jsx(dt,{control:l.control,name:"autoApprovePartners",render:({field:d})=>r.jsxs(ct,{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(ut,{className:"text-base",children:"Автоодобрение партнеров"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Автоматически одобрять новых партнеров"})]}),r.jsx(ft,{children:r.jsx(Ye,{checked:d.value,onCheckedChange:d.onChange})})]})})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(M,{type:"button",variant:"outline",onClick:t,children:"Отмена"}),r.jsx(M,{type:"submit",disabled:o.isPending,children:o.isPending?"Сохранение...":"Сохранить изменения"})]})]})})}function z5e(){var qe,Qe,Ct,er,V;const{toast:e}=lt(),{token:t}=Jt(),{isCollapsed:n}=Os(),s=Et(),[a,i]=y.useState("dashboard"),[l,o]=y.useState(""),[c,d]=y.useState("all"),[u,h]=y.useState(!1),[f,m]=y.useState(!1);y.useState(null);const[v,x]=y.useState(""),[w,j]=y.useState(""),[g,b]=y.useState(""),[p,N]=y.useState("all"),[k,C]=y.useState("all"),[_,P]=y.useState("all"),[D,E]=y.useState("30d"),[$,A]=y.useState([]),[T,O]=y.useState(!1);y.useState(!1);const[z,F]=y.useState(null),[R,I]=y.useState(null);y.useState("");const{data:Q}=$e({queryKey:["/api/admin/financial-metrics",D],queryFn:async()=>{const U=await fetch(`/api/admin/financial-metrics/${D}`,{headers:{Authorization:`Bearer ${t}`}});if(!U.ok)throw new Error("Failed to fetch financial metrics");return U.json()},staleTime:30*1e3,gcTime:2*60*1e3,refetchOnWindowFocus:!0}),{data:Y=[]}=$e({queryKey:["/api/admin/finances",{status:c,type:p,currency:k,method:_,search:l}],queryFn:async()=>{const U=await fetch("/api/admin/finances",{headers:{Authorization:`Bearer ${t}`}});if(!U.ok)throw new Error("Failed to fetch transactions");return U.json()},staleTime:30*1e3,gcTime:2*60*1e3}),{data:K=[]}=$e({queryKey:["/api/admin/payout-requests",{status:c,currency:k,method:_,search:l}],queryFn:async()=>{const U=await fetch("/api/admin/payout-requests",{headers:{Authorization:`Bearer ${t}`}});if(!U.ok)throw new Error("Failed to fetch payout requests");return U.json()},staleTime:30*1e3,gcTime:2*60*1e3}),{data:oe=[]}=$e({queryKey:["/api/admin/deposits",{status:c,currency:k,method:_,search:l,period:D}],queryFn:async()=>{const U=await fetch("/api/admin/deposits",{headers:{Authorization:`Bearer ${t}`}});if(!U.ok)throw new Error("Failed to fetch deposits");return U.json()},staleTime:30*1e3,gcTime:2*60*1e3}),{data:ge=[]}=$e({queryKey:["/api/admin/commission-data",{period:D}],queryFn:async()=>{const U=await fetch("/api/admin/commission-data",{headers:{Authorization:`Bearer ${t}`}});if(!U.ok)throw new Error("Failed to fetch commission data");return U.json()},staleTime:30*1e3,gcTime:2*60*1e3}),{data:Ne=[]}=$e({queryKey:["/api/admin/financial-chart",D],queryFn:async()=>{const U=await fetch(`/api/admin/financial-chart/${D}`,{headers:{Authorization:`Bearer ${t}`}});if(!U.ok)throw new Error("Failed to fetch chart data");return U.json()},staleTime:30*1e3,gcTime:2*60*1e3,refetchOnWindowFocus:!0}),{data:Oe=[]}=$e({queryKey:["/api/admin/crypto-portfolio"],queryFn:async()=>{const U=await fetch("/api/admin/crypto-portfolio",{headers:{Authorization:`Bearer ${t}`}});if(!U.ok)throw new Error("Failed to fetch crypto portfolio");return U.json()}}),{data:pe=[]}=$e({queryKey:["/api/admin/crypto-wallets"],queryFn:async()=>{const U=await fetch("/api/admin/crypto-wallets",{headers:{Authorization:`Bearer ${t}`}});if(!U.ok)throw new Error("Failed to fetch crypto wallets");return U.json()}}),Me=Ee({mutationFn:async({transactionId:U,status:re,note:ve})=>{const _e=await fetch(`/api/admin/transactions/${U}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({status:re,note:ve})});if(!_e.ok)throw new Error("Failed to update transaction");return _e.json()},onSuccess:()=>{s.invalidateQueries({predicate:U=>{const re=U.queryKey[0];return(re==null?void 0:re.includes("/api/admin/financial"))||(re==null?void 0:re.includes("/api/admin/finances"))||(re==null?void 0:re.includes("/api/admin/payout-requests"))||(re==null?void 0:re.includes("/api/admin/deposits"))||(re==null?void 0:re.includes("/api/admin/commission-data"))}}),e({title:"Успешно",description:"Статус транзакции обновлён"})}}),xe=Ee({mutationFn:async({payoutId:U,action:re,note:ve})=>{const _e=await fetch(`/api/admin/payouts/${U}/${re}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({note:ve})});if(!_e.ok)throw new Error("Failed to process payout");return _e.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/payout-requests"]}),s.invalidateQueries({queryKey:["/api/admin/financial-metrics"]}),e({title:"Успешно",description:"Выплата обработана"})}}),ce=Ee({mutationFn:async U=>{const re=await fetch("/api/admin/invoices",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(U)});if(!re.ok)throw new Error("Failed to create invoice");return re.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/deposits"]}),O(!1),e({title:"Инвойс создан",description:"Уведомление отправлено рекламодателю"})}}),Ie=Y.filter(U=>{var ee;const re=!l||U.user.username.toLowerCase().includes(l.toLowerCase())||U.user.email.toLowerCase().includes(l.toLowerCase())||U.id.toLowerCase().includes(l.toLowerCase())||((ee=U.description)==null?void 0:ee.toLowerCase().includes(l.toLowerCase())),ve=c==="all"||U.status===c,_e=p==="all"||U.type===p,Pe=k==="all"||U.currency===k,X=_==="all"||U.paymentMethod===_;return re&&ve&&_e&&Pe&&X}),ie=K.filter(U=>{const re=!l||U.user.username.toLowerCase().includes(l.toLowerCase())||U.user.email.toLowerCase().includes(l.toLowerCase())||U.walletAddress.toLowerCase().includes(l.toLowerCase()),ve=c==="all"||U.status===c,_e=k==="all"||U.currency===k,Pe=_==="all"||U.paymentMethod===_;return re&&ve&&_e&&Pe}),st=U=>{const re={completed:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",icon:nr},pending:{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",icon:lr},processing:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",icon:Vt},failed:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",icon:zt},cancelled:{color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",icon:zt},approved:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",icon:nr},rejected:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",icon:zt}},ve=re[U]||re.pending,_e=ve.icon;return r.jsxs(le,{className:`${ve.color} flex items-center gap-1`,children:[r.jsx(_e,{className:"w-3 h-3"}),U]})},G=U=>({deposit:r.jsx(Ma,{className:"w-4 h-4 text-green-600"}),payout:r.jsx(lo,{className:"w-4 h-4 text-red-600"}),hold:r.jsx(lr,{className:"w-4 h-4 text-yellow-600"}),cancel:r.jsx(zt,{className:"w-4 h-4 text-gray-600"}),correction:r.jsx(cs,{className:"w-4 h-4 text-blue-600"})})[U]||r.jsx(Rt,{className:"w-4 h-4"}),De=U=>({USDT:r.jsx(cd,{className:"w-4 h-4 text-green-600"}),BTC:r.jsx(cd,{className:"w-4 h-4 text-orange-600"}),ETH:r.jsx(cd,{className:"w-4 h-4 text-blue-600"}),Crypto:r.jsx(cd,{className:"w-4 h-4 text-purple-600"}),Wire:r.jsx(gU,{className:"w-4 h-4 text-blue-600"}),Card:r.jsx(ox,{className:"w-4 h-4 text-green-600"}),Payeer:r.jsx(Rc,{className:"w-4 h-4 text-red-600"}),Qiwi:r.jsx(Di,{className:"w-4 h-4 text-orange-600"}),YuMoney:r.jsx(Sre,{className:"w-4 h-4 text-purple-600"})})[U]||r.jsx(dr,{className:"w-4 h-4"}),me=U=>{let re=[],ve="";switch(U){case"transactions":re=Ie,ve="transactions";break;case"payouts":re=ie,ve="payouts";break;case"deposits":re=oe,ve="deposits";break;default:return}const Pe=[(U==="transactions"?["ID","Тип","Пользователь","Сумма","Валюта","Статус","Дата"]:U==="payouts"?["ID","Пользователь","Сумма","Валюта","Кошелёк","Статус","Дата"]:["ID","Пользователь","Сумма","Валюта","Статус","Дата"]).join(","),...re.map(Fe=>{var or;return U==="transactions"?[Fe.id,Fe.type,Fe.user.username,Fe.amount,Fe.currency,Fe.status,new Date(Fe.createdAt).toLocaleDateString()].join(","):U==="payouts"?[Fe.id,Fe.user.username,Fe.amount,Fe.currency,Fe.walletAddress,Fe.status,new Date(Fe.requestedAt).toLocaleDateString()].join(","):[Fe.id,((or=Fe.user)==null?void 0:or.username)||"N/A",Fe.amount,Fe.currency,Fe.status,new Date(Fe.createdAt).toLocaleDateString()].join(",")})].join(`
`),X=new Blob([Pe],{type:"text/csv;charset=utf-8;"}),ee=document.createElement("a"),ke=URL.createObjectURL(X);ee.setAttribute("href",ke),ee.setAttribute("download",`${ve}_${new Date().toISOString().split("T")[0]}.csv`),ee.style.visibility="hidden",document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),e({title:"Экспорт завершён",description:`Файл ${ve}.csv успешно скачан`})},Be=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${n?"ml-16":"ml-64"}`,children:[r.jsx(gn,{title:"Финансы"}),r.jsxs("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 dark:bg-gray-900 p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"💰 Финансы"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Управление финансами платформы и выплатами"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(M,{variant:"outline",onClick:()=>me(a),"data-testid":"button-export",title:"Экспорт данных",children:[r.jsx(vr,{className:"w-4 h-4 mr-2"}),"Экспорт"]}),r.jsxs(he,{value:D,onValueChange:E,children:[r.jsx(de,{className:"w-32",title:"Период",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"7d",children:"7 дней"}),r.jsx(S,{value:"30d",children:"30 дней"}),r.jsx(S,{value:"90d",children:"90 дней"}),r.jsx(S,{value:"1y",children:"1 год"})]})]})]})]})}),r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-1",children:r.jsx("div",{className:"flex space-x-1 overflow-x-auto",children:[{id:"dashboard",label:"📊 Дашборд",icon:cr},{id:"transactions",label:"🧾 Транзакции",icon:ox},{id:"payouts",label:"💳 Выплаты",icon:Is},{id:"deposits",label:"🧮 Пополнения",icon:Ma},{id:"commission",label:"📦 Комиссия",icon:Rt},{id:"crypto",label:"₿ Криптокошельки",icon:cd},{id:"reports",label:"📁 Отчёты",icon:Qn}].map(U=>{const re=U.icon;return r.jsxs("button",{onClick:()=>i(U.id),className:`flex items-center space-x-2 py-3 px-4 rounded-md transition-all ${a===U.id?"bg-blue-500 text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,"data-testid":`tab-${U.id}`,children:[r.jsx(re,{className:"w-4 h-4"}),r.jsx("span",{className:"whitespace-nowrap text-sm font-medium",children:U.label})]},U.id)})})})}),r.jsxs("div",{className:"space-y-6",children:[a==="dashboard"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(W,{className:"w-full",children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Баланс платформы"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",((qe=Q==null?void 0:Q.platformBalance)==null?void 0:qe.toLocaleString())||"0"]}),r.jsx("div",{className:"text-sm text-gray-500",children:"USD • EUR • USDT • BTC"})]}),r.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-lg",children:r.jsx(Rc,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})})]}),r.jsxs(W,{className:"w-full",children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Доход от рекламодателей"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",((Qe=Q==null?void 0:Q.advertiserRevenue)==null?void 0:Qe.toLocaleString())||"0"]}),r.jsxs("div",{className:"flex items-center text-sm text-green-600 dark:text-green-400",children:[r.jsx(Cr,{className:"w-4 h-4 mr-1"}),"+12.5%"]})]}),r.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:r.jsx(Ma,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})})]}),r.jsxs(W,{className:"w-full",children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Выплаты партнёрам"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",((Ct=Q==null?void 0:Q.partnerPayouts)==null?void 0:Ct.toLocaleString())||"0"]}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Выплачено: $",(Q==null?void 0:Q.paidOut)||"0"," • В холде: $",(Q==null?void 0:Q.onHold)||"0"]})]}),r.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900 rounded-lg",children:r.jsx(lo,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]})})]}),r.jsxs(W,{className:"w-full",children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Комиссия платформы"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",((er=Q==null?void 0:Q.platformCommission)==null?void 0:er.toLocaleString())||"0"]}),r.jsxs("div",{className:"flex items-center text-sm text-green-600 dark:text-green-400",children:[r.jsx(Cr,{className:"w-4 h-4 mr-1"}),"+8.2%"]})]}),r.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-lg",children:r.jsx(Rt,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]})})]})]}),r.jsxs(W,{className:"w-full",children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(cr,{className:"w-5 h-5"}),"Финансовые потоки по дням"]}),r.jsx(Je,{children:"Доходы и расходы за выбранный период"})]}),r.jsx(H,{children:r.jsx("div",{className:"h-80 w-full",children:r.jsx(pa,{width:"100%",height:"100%",children:r.jsxs(ry,{data:Ne,children:[r.jsx(Pi,{strokeDasharray:"3 3"}),r.jsx(Cs,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(ls,{type:"monotone",dataKey:"income",stroke:"#10B981",strokeWidth:2,name:"Доходы"}),r.jsx(ls,{type:"monotone",dataKey:"expenses",stroke:"#EF4444",strokeWidth:2,name:"Расходы"})]})})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(W,{className:"w-full",children:[r.jsx(se,{children:r.jsx(ae,{children:"Распределение по валютам"})}),r.jsx(H,{children:r.jsx("div",{className:"h-64",children:r.jsx(pa,{width:"100%",height:"100%",children:r.jsxs(M4,{children:[r.jsx(Hi,{data:(Q==null?void 0:Q.currencyDistribution)||[],cx:"50%",cy:"50%",labelLine:!1,label:({name:U,percent:re})=>`${U} ${(re*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:((Q==null?void 0:Q.currencyDistribution)||[]).map((U,re)=>r.jsx(Hm,{fill:Be[re%Be.length]},`cell-${re}`))}),r.jsx(tn,{})]})})})})]}),r.jsxs(W,{className:"w-full",children:[r.jsx(se,{children:r.jsx(ae,{children:"Методы платежей"})}),r.jsx(H,{children:r.jsx("div",{className:"space-y-3",children:((Q==null?void 0:Q.paymentMethods)||[]).map((U,re)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[De(U.name),r.jsx("span",{className:"font-medium",children:U.name})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-bold",children:["$",U.amount.toLocaleString()]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[U.count," транзакций"]})]})]},U.name))})})]})]})]}),a==="transactions"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx(W,{className:"w-full",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск транзакций...",value:l,onChange:U=>o(U.target.value),className:"pl-10","data-testid":"input-search-transactions",title:"Поиск транзакций"})]}),r.jsxs(he,{value:c,onValueChange:d,children:[r.jsx(de,{title:"Фильтр по статусу",children:r.jsx(fe,{placeholder:"Статус"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все статусы"}),r.jsx(S,{value:"completed",children:"Выполнено"}),r.jsx(S,{value:"pending",children:"Ожидает"}),r.jsx(S,{value:"processing",children:"В обработке"}),r.jsx(S,{value:"failed",children:"Ошибка"}),r.jsx(S,{value:"cancelled",children:"Отменено"})]})]}),r.jsxs(he,{value:p,onValueChange:N,children:[r.jsx(de,{title:"Фильтр по типу",children:r.jsx(fe,{placeholder:"Тип"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все типы"}),r.jsx(S,{value:"deposit",children:"Пополнение"}),r.jsx(S,{value:"payout",children:"Выплата"}),r.jsx(S,{value:"hold",children:"Холд"}),r.jsx(S,{value:"cancel",children:"Отмена"}),r.jsx(S,{value:"correction",children:"Корректировка"})]})]}),r.jsxs(he,{value:k,onValueChange:C,children:[r.jsx(de,{title:"Фильтр по валюте",children:r.jsx(fe,{placeholder:"Валюта"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все валюты"}),r.jsx(S,{value:"USD",children:"USD"}),r.jsx(S,{value:"EUR",children:"EUR"}),r.jsx(S,{value:"USDT",children:"USDT"}),r.jsx(S,{value:"BTC",children:"BTC"})]})]}),r.jsxs(he,{value:_,onValueChange:P,children:[r.jsx(de,{title:"Фильтр по методу",children:r.jsx(fe,{placeholder:"Метод"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все методы"}),r.jsx(S,{value:"USDT",children:"USDT"}),r.jsx(S,{value:"Crypto",children:"Crypto"}),r.jsx(S,{value:"Wire",children:"Wire"}),r.jsx(S,{value:"Card",children:"Card"}),r.jsx(S,{value:"Payeer",children:"Payeer"}),r.jsx(S,{value:"Qiwi",children:"Qiwi"}),r.jsx(S,{value:"YuMoney",children:"ЮMoney"})]})]}),r.jsx(M,{variant:"outline",onClick:()=>{o(""),d("all"),N("all"),C("all"),P("all")},"data-testid":"button-clear-filters",title:"Очистить фильтры",children:"Очистить"})]})})}),r.jsxs(W,{className:"w-full",children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(ox,{className:"w-5 h-5"}),"История транзакций (",Ie.length,")"]})}),r.jsx(H,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"ID"}),r.jsx(J,{children:"Тип"}),r.jsx(J,{children:"Кому / От кого"}),r.jsx(J,{children:"Сумма"}),r.jsx(J,{children:"Дата и время"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Метод оплаты"}),r.jsx(J,{children:"Примечание"}),r.jsx(J,{children:"Действия"})]})}),r.jsx($t,{children:Ie.map(U=>{var re;return r.jsxs(Re,{children:[r.jsxs(q,{className:"font-mono text-sm",children:[U.id.slice(0,8),"..."]}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[G(U.type),r.jsx("span",{className:"capitalize",children:U.type})]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-semibold",children:((re=U.user.firstName)==null?void 0:re.charAt(0))||U.user.username.charAt(0)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:U.user.username}),r.jsx("div",{className:"text-sm text-gray-500",children:U.user.email})]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"font-medium",children:[U.amount>=0?"+":"","$",U.amount.toLocaleString()," ",U.currency]})}),r.jsx(q,{children:r.jsx("div",{className:"text-sm",children:new Date(U.createdAt).toLocaleString("ru-RU")})}),r.jsx(q,{children:st(U.status)}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[De(U.paymentMethod),r.jsx("span",{children:U.paymentMethod})]})}),r.jsx(q,{children:r.jsx("div",{className:"max-w-xs truncate text-sm text-gray-500",children:U.description||"—"})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(M,{size:"icon",variant:"ghost",onClick:()=>{F(U),e({title:"Просмотр транзакции",description:`Детали транзакции ${U.id}`})},title:"Просмотр","data-testid":`button-view-transaction-${U.id}`,children:r.jsx(hr,{className:"w-4 h-4"})}),U.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx(M,{size:"icon",variant:"ghost",onClick:()=>Me.mutate({transactionId:U.id,status:"completed",note:"Approved by admin"}),title:"Одобрить","data-testid":`button-approve-transaction-${U.id}`,children:r.jsx(nr,{className:"w-4 h-4 text-green-600"})}),r.jsx(M,{size:"icon",variant:"ghost",onClick:()=>Me.mutate({transactionId:U.id,status:"failed",note:"Rejected by admin"}),title:"Отклонить","data-testid":`button-reject-transaction-${U.id}`,children:r.jsx(zt,{className:"w-4 h-4 text-red-600"})})]}),r.jsx(M,{size:"icon",variant:"ghost",onClick:()=>Me.mutate({transactionId:U.id,status:"refunded",note:"Refunded by admin"}),title:"Возврат","data-testid":`button-refund-transaction-${U.id}`,children:r.jsx(Vt,{className:"w-4 h-4 text-orange-600"})})]})})]},U.id)})})]})})})]})]}),a==="payouts"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Выплаты партнёрам"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Запросы на выплату от партнёров"})]}),r.jsx("div",{className:"flex space-x-2",children:$.length>0&&r.jsxs(M,{onClick:()=>{$.forEach(U=>{xe.mutate({payoutId:U,action:"approve",note:"Bulk approval by admin"})}),A([]),e({title:"Массовая выплата",description:`${$.length} выплат одобрено`})},className:"bg-green-600 hover:bg-green-700",title:"Массовая выплата","data-testid":"button-bulk-approve",disabled:xe.isPending,children:[r.jsx(Is,{className:"w-4 h-4 mr-2"}),xe.isPending?"Обработка...":`Выплатить выбранные (${$.length})`]})})]}),r.jsx(W,{className:"w-full",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск выплат...",value:l,onChange:U=>o(U.target.value),className:"pl-10",title:"Поиск выплат"})]}),r.jsxs(he,{value:c,onValueChange:d,children:[r.jsx(de,{title:"Фильтр по статусу",children:r.jsx(fe,{placeholder:"Статус"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все статусы"}),r.jsx(S,{value:"pending",children:"Ожидает"}),r.jsx(S,{value:"approved",children:"Одобрено"}),r.jsx(S,{value:"rejected",children:"Отказ"}),r.jsx(S,{value:"completed",children:"Выплачено"})]})]}),r.jsxs(he,{value:k,onValueChange:C,children:[r.jsx(de,{title:"Фильтр по валюте",children:r.jsx(fe,{placeholder:"Валюта"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все валюты"}),r.jsx(S,{value:"USD",children:"USD"}),r.jsx(S,{value:"EUR",children:"EUR"}),r.jsx(S,{value:"USDT",children:"USDT"}),r.jsx(S,{value:"BTC",children:"BTC"})]})]}),r.jsxs(he,{value:_,onValueChange:P,children:[r.jsx(de,{title:"Фильтр по методу",children:r.jsx(fe,{placeholder:"Метод"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все методы"}),r.jsx(S,{value:"USDT",children:"USDT"}),r.jsx(S,{value:"BTC",children:"BTC"}),r.jsx(S,{value:"Qiwi",children:"Qiwi"}),r.jsx(S,{value:"Payeer",children:"Payeer"}),r.jsx(S,{value:"YuMoney",children:"ЮMoney"})]})]}),r.jsx(M,{variant:"outline",onClick:()=>{o(""),d("all"),C("all"),P("all")},title:"Очистить фильтры",children:"Очистить"})]})})}),r.jsxs(W,{className:"w-full",children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"w-5 h-5"}),"Запросы на выплату (",ie.length,")"]})}),r.jsx(H,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{className:"w-12",children:r.jsx(on,{checked:$.length===ie.length&&ie.length>0,onCheckedChange:U=>{A(U?ie.map(re=>re.id):[])},title:"Выбрать все"})}),r.jsx(J,{children:"ФИО / Название"}),r.jsx(J,{children:"Сумма"}),r.jsx(J,{children:"Кошелёк / Реквизиты"}),r.jsx(J,{children:"Метод"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Дата запроса"}),r.jsx(J,{children:"Действия"})]})}),r.jsx($t,{children:ie.map(U=>{var re;return r.jsxs(Re,{children:[r.jsx(q,{children:r.jsx(on,{checked:$.includes(U.id),onCheckedChange:ve=>{A(ve?[...$,U.id]:$.filter(_e=>_e!==U.id))}})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-semibold",children:((re=U.user.firstName)==null?void 0:re.charAt(0))||U.user.username.charAt(0)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:U.user.firstName&&U.user.lastName?`${U.user.firstName} ${U.user.lastName}`:U.user.username}),r.jsx("div",{className:"text-sm text-gray-500",children:U.user.email})]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"font-medium",children:["$",U.amount.toLocaleString()," ",U.currency]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(M,{size:"icon",variant:"ghost",onClick:()=>navigator.clipboard.writeText(U.walletAddress),title:"Копировать адрес",children:r.jsx(Yr,{className:"w-4 h-4"})}),r.jsx("span",{className:"font-mono text-sm max-w-xs truncate",children:U.walletAddress})]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[De(U.paymentMethod),r.jsx("span",{children:U.paymentMethod})]})}),r.jsx(q,{children:st(U.status)}),r.jsx(q,{children:r.jsx("div",{className:"text-sm",children:new Date(U.requestedAt).toLocaleString("ru-RU")})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[U.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx(M,{size:"icon",variant:"ghost",onClick:()=>{I(U),xe.mutate({payoutId:U.id,action:"approve",note:"Approved by admin"})},title:"Одобрить","data-testid":`button-approve-${U.id}`,children:r.jsx(nr,{className:"w-4 h-4 text-green-600"})}),r.jsx(M,{size:"icon",variant:"ghost",onClick:()=>{I(U),xe.mutate({payoutId:U.id,action:"reject",note:"Rejected by admin"})},title:"Отклонить","data-testid":`button-reject-${U.id}`,children:r.jsx(zt,{className:"w-4 h-4 text-red-600"})})]}),U.status==="approved"&&r.jsx(M,{size:"icon",variant:"ghost",onClick:()=>{I(U),xe.mutate({payoutId:U.id,action:"complete",note:"Payment completed by admin"})},title:"Отметить как выплачено","data-testid":`button-complete-${U.id}`,children:r.jsx(Is,{className:"w-4 h-4 text-blue-600"})})]})})]},U.id)})})]})})})]})]}),a==="deposits"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Пополнения от рекламодателей"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"История пополнений и создание инвойсов"})]}),r.jsxs(jt,{open:T,onOpenChange:O,children:[r.jsx(Xa,{asChild:!0,children:r.jsxs(M,{"data-testid":"button-create-invoice",title:"Создать инвойс",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Создать инвойс"]})}),r.jsxs(vt,{children:[r.jsxs(yt,{children:[r.jsx(bt,{children:"Создать инвойс для рекламодателя"}),r.jsx(Ur,{children:"Создайте инвойс для пополнения баланса рекламодателя"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"advertiser",children:"Рекламодатель"}),r.jsxs(he,{children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите рекламодателя"})}),r.jsx(ue,{})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"amount",children:"Сумма"}),r.jsx(ne,{type:"number",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"currency",children:"Валюта"}),r.jsxs(he,{children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите валюту"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"USD",children:"USD"}),r.jsx(S,{value:"EUR",children:"EUR"}),r.jsx(S,{value:"USDT",children:"USDT"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"description",children:"Описание"}),r.jsx(pt,{placeholder:"Описание инвойса..."})]})]}),r.jsxs(vo,{children:[r.jsx(M,{variant:"outline",onClick:()=>O(!1),children:"Отмена"}),r.jsx(M,{onClick:()=>{const U={advertiserId:"adv-1",amount:1e3,currency:"USD",description:"Platform deposit invoice"};ce.mutate(U)},disabled:ce.isPending,"data-testid":"button-submit-invoice",children:ce.isPending?"Создание...":"Создать инвойс"})]})]})]})]}),r.jsxs(W,{className:"w-full",children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Ma,{className:"w-5 h-5"}),"История пополнений (",oe.length,")"]})}),r.jsx(H,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Рекламодатель"}),r.jsx(J,{children:"Сумма"}),r.jsx(J,{children:"Валюта"}),r.jsx(J,{children:"Метод оплаты"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Дата"}),r.jsx(J,{children:"Действия"})]})}),r.jsx($t,{children:oe.map(U=>{var re,ve;return r.jsxs(Re,{children:[r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-semibold",children:((re=U.advertiser)==null?void 0:re.charAt(0))||"A"}),r.jsx("span",{className:"font-medium",children:U.advertiser})]})}),r.jsx(q,{children:r.jsxs("div",{className:"font-medium",children:["$",((ve=U.amount)==null?void 0:ve.toLocaleString())||"0"]})}),r.jsx(q,{children:U.currency}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[De(U.method),r.jsx("span",{children:U.method})]})}),r.jsx(q,{children:st(U.status)}),r.jsx(q,{children:r.jsx("div",{className:"text-sm",children:new Date(U.createdAt).toLocaleString("ru-RU")})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(M,{size:"icon",variant:"ghost",title:"Просмотр","data-testid":`button-view-deposit-${U.id}`,onClick:()=>{e({title:"Просмотр депозита",description:`Депозит ${U.id} от ${U.advertiser}`})},children:r.jsx(hr,{className:"w-4 h-4"})}),U.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx(M,{size:"icon",variant:"ghost",title:"Подтвердить","data-testid":`button-approve-deposit-${U.id}`,onClick:()=>{e({title:"Депозит подтвержден",description:`Депозит ${U.id} успешно подтвержден`})},children:r.jsx(nr,{className:"w-4 h-4 text-green-600"})}),r.jsx(M,{size:"icon",variant:"ghost",title:"Отклонить","data-testid":`button-reject-deposit-${U.id}`,onClick:()=>{e({title:"Депозит отклонен",description:`Депозит ${U.id} отклонен`,variant:"destructive"})},children:r.jsx(zt,{className:"w-4 h-4 text-red-600"})})]})]})})]},U.id)})})]})})})]})]}),a==="commission"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(W,{className:"w-full",children:[r.jsx(se,{children:r.jsx(ae,{className:"text-lg",children:"Общий доход платформы"})}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["$",((V=Q==null?void 0:Q.totalPlatformRevenue)==null?void 0:V.toLocaleString())||"0"]}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"За выбранный период"})]})]}),r.jsxs(W,{className:"w-full",children:[r.jsx(se,{children:r.jsx(ae,{className:"text-lg",children:"Средняя комиссия"})}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[(Q==null?void 0:Q.averageCommission)||"0","%"]}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Процент от оборота"})]})]}),r.jsxs(W,{className:"w-full",children:[r.jsx(se,{children:r.jsx(ae,{className:"text-lg",children:"Прибыль с учётом фрода"})}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[(Q==null?void 0:Q.profitMargin)||"0","%"]}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"С учётом возвратов и холдов"})]})]})]}),r.jsxs(W,{className:"w-full",children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Комиссия по офферам"}),r.jsx(Je,{children:"Доход платформы с каждого оффера"})]}),r.jsx(H,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Оффер"}),r.jsx(J,{children:"Цена рекламодателя"}),r.jsx(J,{children:"Выплата партнёру"}),r.jsx(J,{children:"Комиссия платформы"}),r.jsx(J,{children:"Конверсий"}),r.jsx(J,{children:"Общий доход"})]})}),r.jsx($t,{children:ge.map(U=>{var re;return r.jsxs(Re,{children:[r.jsxs(q,{children:[r.jsx("div",{className:"font-medium",children:U.offerName}),r.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",U.offerId]})]}),r.jsx(q,{children:r.jsxs("div",{className:"font-medium text-green-600",children:["$",U.advertiserPrice]})}),r.jsx(q,{children:r.jsxs("div",{className:"font-medium text-red-600",children:["$",U.partnerPayout]})}),r.jsxs(q,{children:[r.jsxs("div",{className:"font-bold text-blue-600",children:["$",U.platformCommission]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[U.commissionPercent,"%"]})]}),r.jsx(q,{children:r.jsx("div",{className:"font-medium",children:U.conversions})}),r.jsx(q,{children:r.jsxs("div",{className:"font-bold",children:["$",(re=U.totalRevenue)==null?void 0:re.toLocaleString()]})})]},U.offerId)})})]})})})]})]}),a==="crypto"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Oe.map(U=>r.jsx(W,{className:"bg-gradient-to-br from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:r.jsx(cd,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:U.currency}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:parseFloat(U.balance).toFixed(8)})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Заблокировано"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:parseFloat(U.lockedBalance).toFixed(8)})]})]})})},U.currency))}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs(ae,{className:"flex items-center space-x-2",children:[r.jsx(Rc,{className:"w-5 h-5"}),r.jsx("span",{children:"Криптокошельки"})]}),r.jsx(Je,{children:"Управление криптокошельками платформы"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(M,{variant:"outline",onClick:()=>h(!0),"data-testid":"button-deposit-crypto",title:"Пополнить",children:[r.jsx(lo,{className:"w-4 h-4 mr-2"}),"Пополнить"]}),r.jsxs(M,{variant:"outline",onClick:()=>m(!0),"data-testid":"button-withdraw-crypto",title:"Вывести",children:[r.jsx(Ma,{className:"w-4 h-4 mr-2"}),"Вывести"]}),r.jsxs(M,{className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-create-wallet",title:"Создать кошелёк",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Новый кошелёк"]})]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex space-x-4",children:[r.jsxs(he,{children:[r.jsx(de,{className:"w-48",children:r.jsx(fe,{placeholder:"Валюта"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"BTC",children:"Bitcoin (BTC)"}),r.jsx(S,{value:"ETH",children:"Ethereum (ETH)"}),r.jsx(S,{value:"USDT",children:"Tether (USDT)"}),r.jsx(S,{value:"USDC",children:"USD Coin (USDC)"})]})]}),r.jsxs(he,{children:[r.jsx(de,{className:"w-48",children:r.jsx(fe,{placeholder:"Тип кошелька"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"platform",children:"Платформенный"}),r.jsx(S,{value:"user",children:"Пользовательский"})]})]}),r.jsxs(he,{children:[r.jsx(de,{className:"w-48",children:r.jsx(fe,{placeholder:"Статус"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"active",children:"Активный"}),r.jsx(S,{value:"suspended",children:"Приостановлен"}),r.jsx(S,{value:"maintenance",children:"Обслуживание"})]})]})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Валюта"}),r.jsx(J,{children:"Адрес"}),r.jsx(J,{children:"Тип"}),r.jsx(J,{children:"Баланс"}),r.jsx(J,{children:"Заблокировано"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Действия"})]})}),r.jsx($t,{children:pe.map(U=>r.jsxs(Re,{children:[r.jsx(q,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"p-1 bg-orange-100 dark:bg-orange-900/30 rounded",children:r.jsx(cd,{className:"w-4 h-4 text-orange-600"})}),r.jsx("span",{className:"font-medium",children:U.currency})]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:U.address}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(U.address),"data-testid":"button-copy-address",title:"Копировать адрес",children:r.jsx(Yr,{className:"w-4 h-4"})})]})}),r.jsx(q,{children:r.jsx(le,{variant:U.walletType==="platform"?"default":"secondary",children:U.walletType==="platform"?"Платформенный":"Пользовательский"})}),r.jsx(q,{className:"font-mono",children:parseFloat(U.balance).toFixed(8)}),r.jsx(q,{className:"font-mono",children:parseFloat(U.lockedBalance).toFixed(8)}),r.jsx(q,{children:r.jsx(le,{variant:U.status==="active"?"default":U.status==="suspended"?"destructive":"secondary",children:U.status==="active"?"Активный":U.status==="suspended"?"Приостановлен":"Обслуживание"})}),r.jsx(q,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(M,{variant:"ghost",size:"sm","data-testid":"button-sync-wallet",title:"Синхронизировать",children:r.jsx(Vt,{className:"w-4 h-4"})}),r.jsx(M,{variant:"ghost",size:"sm","data-testid":"button-view-wallet",title:"Просмотр",children:r.jsx(hr,{className:"w-4 h-4"})}),r.jsx(M,{variant:"ghost",size:"sm","data-testid":"button-edit-wallet",title:"Редактировать",children:r.jsx(cs,{className:"w-4 h-4"})})]})})]},U.id))})]})})]})})]})]}),a==="reports"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs(W,{className:"w-full",children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Qn,{className:"w-5 h-5"}),"Экспорт транзакций"]}),r.jsx(Je,{children:"Выгрузка всех транзакций в CSV/XLSX"})]}),r.jsx(H,{children:r.jsxs(M,{onClick:()=>{me("transactions"),e({title:"Экспорт транзакций",description:"Файл с транзакциями готовится для скачивания"})},className:"w-full",title:"Экспорт транзакций","data-testid":"button-export-transactions",children:[r.jsx(vr,{className:"w-4 h-4 mr-2"}),"Скачать транзакции"]})})]}),r.jsxs(W,{className:"w-full",children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"w-5 h-5"}),"Экспорт выплат"]}),r.jsx(Je,{children:"Выгрузка данных о выплатах партнёрам"})]}),r.jsx(H,{children:r.jsxs(M,{onClick:()=>{me("payouts"),e({title:"Экспорт выплат",description:"Файл с выплатами готовится для скачивания"})},className:"w-full",title:"Экспорт выплат","data-testid":"button-export-payouts",children:[r.jsx(vr,{className:"w-4 h-4 mr-2"}),"Скачать выплаты"]})})]}),r.jsxs(W,{className:"w-full",children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Rt,{className:"w-5 h-5"}),"Отчёт по комиссии"]}),r.jsx(Je,{children:"Данные о доходах платформы"})]}),r.jsx(H,{children:r.jsxs(M,{onClick:()=>{me("commission"),e({title:"Экспорт комиссии",description:"Файл с данными комиссии готовится для скачивания"})},className:"w-full",title:"Экспорт комиссии","data-testid":"button-export-commission",children:[r.jsx(vr,{className:"w-4 h-4 mr-2"}),"Скачать комиссию"]})})]})]}),r.jsxs(W,{className:"w-full",children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Автоматические отчёты"}),r.jsx(Je,{children:"Настройка автоматической генерации отчётов"})]}),r.jsx(H,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Месячный отчёт по финансам"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Автоматическая отправка каждый месяц"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(le,{className:"bg-green-100 text-green-800",children:"Активен"}),r.jsx(M,{size:"sm",variant:"outline",onClick:()=>{e({title:"Настройка месячного отчёта",description:"Открыта панель настройки автоматических отчётов по финансам"})},"data-testid":"button-configure-monthly-report",title:"Настроить месячный отчёт",children:"Настроить"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Отчёт для бухгалтера"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Еженедельная выгрузка данных"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(le,{className:"bg-gray-100 text-gray-800",children:"Неактивен"}),r.jsx(M,{size:"sm",variant:"outline",onClick:()=>{e({title:"Настройка отчёта для бухгалтера",description:"Открыта панель настройки еженедельных отчётов"})},"data-testid":"button-configure-accounting-report",title:"Настроить отчёт для бухгалтера",children:"Настроить"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Smart-уведомления"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Уведомления о важных событиях"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(le,{className:"bg-green-100 text-green-800",children:"Активен"}),r.jsx(M,{size:"sm",variant:"outline",onClick:()=>{e({title:"Настройка Smart-уведомлений",description:"Открыта панель настройки умных уведомлений"})},"data-testid":"button-configure-smart-notifications",title:"Настроить Smart-уведомления",children:"Настроить"})]})]})]})})]})]})]}),r.jsx(jt,{open:u,onOpenChange:h,children:r.jsxs(vt,{className:"max-w-md",children:[r.jsxs(yt,{children:[r.jsx(bt,{children:"Пополнение криптокошелька"}),r.jsx(Ur,{children:"Внесение средств на выбранный криптокошелёк"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"deposit-currency",children:"Валюта"}),r.jsxs(he,{children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите валюту"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"BTC",children:"Bitcoin (BTC)"}),r.jsx(S,{value:"ETH",children:"Ethereum (ETH)"}),r.jsx(S,{value:"USDT",children:"Tether (USDT)"}),r.jsx(S,{value:"USDC",children:"USD Coin (USDC)"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"deposit-amount",children:"Сумма"}),r.jsx(ne,{id:"deposit-amount",type:"number",step:"0.00000001",placeholder:"0.00000000",value:v,onChange:U=>x(U.target.value)})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"deposit-address",children:"Адрес отправителя"}),r.jsx(ne,{id:"deposit-address",placeholder:"Адрес кошелька отправителя",value:g,onChange:U=>b(U.target.value)})]})]}),r.jsxs(vo,{children:[r.jsx(M,{variant:"outline",onClick:()=>h(!1),children:"Отмена"}),r.jsx(M,{onClick:async()=>{try{if(!(await fetch("/api/admin/crypto-deposit",{method:"POST",body:JSON.stringify({currency:"BTC",amount:parseFloat(v),fromAddress:g}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}})).ok)throw new Error("Failed to deposit");e({title:"Пополнение оформлено",description:`Внесено ${v} BTC`}),h(!1),x(""),b(""),s.invalidateQueries({queryKey:["/api/admin/crypto-portfolio"]})}catch{e({title:"Ошибка пополнения",description:"Не удалось внести средства",variant:"destructive"})}},children:"Пополнить"})]})]})}),r.jsx(jt,{open:f,onOpenChange:m,children:r.jsxs(vt,{className:"max-w-md",children:[r.jsxs(yt,{children:[r.jsx(bt,{children:"Вывод криптовалюты"}),r.jsx(Ur,{children:"Вывод средств с платформенного кошелька"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"withdraw-currency",children:"Валюта"}),r.jsxs(he,{children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите валюту"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"BTC",children:"Bitcoin (BTC)"}),r.jsx(S,{value:"ETH",children:"Ethereum (ETH)"}),r.jsx(S,{value:"USDT",children:"Tether (USDT)"}),r.jsx(S,{value:"USDC",children:"USD Coin (USDC)"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"withdraw-amount",children:"Сумма"}),r.jsx(ne,{id:"withdraw-amount",type:"number",step:"0.00000001",placeholder:"0.00000000",value:w,onChange:U=>j(U.target.value)})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"withdraw-address",children:"Адрес получателя"}),r.jsx(ne,{id:"withdraw-address",placeholder:"Адрес кошелька получателя",value:g,onChange:U=>b(U.target.value)})]})]}),r.jsxs(vo,{children:[r.jsx(M,{variant:"outline",onClick:()=>m(!1),children:"Отмена"}),r.jsx(M,{onClick:async()=>{try{if(!(await fetch("/api/admin/crypto-withdraw",{method:"POST",body:JSON.stringify({currency:"BTC",amount:parseFloat(w),toAddress:g}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}})).ok)throw new Error("Failed to withdraw");e({title:"Вывод оформлен",description:`Выведено ${w} BTC`}),m(!1),j(""),b(""),s.invalidateQueries({queryKey:["/api/admin/crypto-portfolio"]})}catch{e({title:"Ошибка вывода",description:"Не удалось вывести средства",variant:"destructive"})}},children:"Вывести"})]})]})})]})]})]})}function V5e(){var g,b;const{token:e}=Jt(),{t}=Ll(),[n,s]=y.useState(""),[a,i]=y.useState("all"),[l,o]=y.useState("all"),[c,d]=y.useState(null),{data:u,isLoading:h}=$e({queryKey:["/api/admin/fraud-alerts"],queryFn:async()=>{const p=await fetch("/api/admin/fraud-alerts",{headers:{Authorization:`Bearer ${e}`}});if(!p.ok)throw new Error("Failed to fetch fraud alerts");return p.json()}}),f=(u==null?void 0:u.filter(p=>{var _,P,D,E,$,A,T,O;const N=n===""||((P=(_=p.user)==null?void 0:_.username)==null?void 0:P.toLowerCase().includes(n.toLowerCase()))||((E=(D=p.user)==null?void 0:D.email)==null?void 0:E.toLowerCase().includes(n.toLowerCase()))||((A=($=p.offer)==null?void 0:$.name)==null?void 0:A.toLowerCase().includes(n.toLowerCase()))||((T=p.description)==null?void 0:T.toLowerCase().includes(n.toLowerCase()))||((O=p.type)==null?void 0:O.toLowerCase().includes(n.toLowerCase())),k=a==="all"||p.severity===a,C=l==="all"||(p.isResolved?"resolved":"pending")===l;return N&&k&&C}))||[],{data:m}=$e({queryKey:["/api/admin/fraud-metrics"],queryFn:async()=>{const p=await fetch("/api/admin/fraud-metrics",{headers:{Authorization:`Bearer ${e}`}});if(!p.ok)throw new Error("Failed to fetch fraud metrics");return p.json()}}),v=Ee({mutationFn:async({alertId:p,isResolved:N})=>{const k=await fetch(`/api/admin/fraud-alerts/${p}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({isResolved:N})});if(!k.ok)throw new Error("Failed to update fraud alert");return k.json()},onSuccess:()=>{io.invalidateQueries({queryKey:["/api/admin/fraud-alerts"]}),io.invalidateQueries({queryKey:["/api/admin/fraud-metrics"]})}}),x=p=>{switch(p){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},w=p=>{switch(p){case"suspicious_activity":return r.jsx(ln,{className:"w-4 h-4"});case"high_velocity":return r.jsx(Rt,{className:"w-4 h-4"});case"duplicate_conversion":return r.jsx(ar,{className:"w-4 h-4"});case"geo_mismatch":return r.jsx(dr,{className:"w-4 h-4"});default:return r.jsx(qa,{className:"w-4 h-4"})}},j=[{label:"active_alerts",value:((g=m==null?void 0:m.activeAlerts)==null?void 0:g.toString())||"0",change:"+5",changeType:"increase",icon:r.jsx(qa,{className:"w-5 h-5"}),iconBg:"bg-red-50"},{label:"fraud_rate",value:`${(m==null?void 0:m.fraudRate)||"0"}%`,change:"-0.5%",changeType:"decrease",icon:r.jsx(Lt,{className:"w-5 h-5"}),iconBg:"bg-blue-50"},{label:"blocked_revenue",value:`$${(m==null?void 0:m.blockedRevenue)||"0"}`,change:"+$1,250",changeType:"increase",icon:r.jsx(Rt,{className:"w-5 h-5"}),iconBg:"bg-green-50"},{label:"resolved_today",value:((b=m==null?void 0:m.resolvedToday)==null?void 0:b.toString())||"0",change:"+3",changeType:"increase",icon:r.jsx(fn,{className:"w-5 h-5"}),iconBg:"bg-purple-50"}];return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:t("fraud_alerts")}),r.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 dark:bg-gray-900 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t("fraud_detection_management")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t("monitor_investigate_fraud_alerts")})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:j.map((p,N)=>r.jsx(W,{"data-testid":`metric-card-${p.label}`,children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t(p.label)}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white","data-testid":`metric-value-${p.label}`,children:p.value}),r.jsx("p",{className:`text-sm mt-1 ${p.changeType==="increase"?"text-red-600":"text-green-600"}`,children:p.change})]}),r.jsx("div",{className:`${p.iconBg} p-3 rounded-lg`,children:p.icon})]})})},N))}),r.jsx(W,{className:"mb-6",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск по пользователю, офферу или описанию...",value:n,onChange:p=>s(p.target.value),className:"pl-10","data-testid":"input-search-alerts",title:"Поиск алертов"})]}),r.jsxs(he,{value:a,onValueChange:i,children:[r.jsx(de,{className:"w-[180px]","data-testid":"select-filter-severity",title:"Фильтр по важности",children:r.jsx(fe,{placeholder:t("filter_by_severity")})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:t("all_severities")}),r.jsx(S,{value:"high",children:t("high")}),r.jsx(S,{value:"medium",children:t("medium")}),r.jsx(S,{value:"low",children:t("low")})]})]}),r.jsxs(he,{value:l,onValueChange:o,children:[r.jsx(de,{className:"w-[180px]","data-testid":"select-filter-status",title:"Фильтр по статусу",children:r.jsx(fe,{placeholder:t("filter_by_status")})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:t("all_statuses")}),r.jsx(S,{value:"pending",children:t("pending")}),r.jsx(S,{value:"resolved",children:t("resolved")})]})]}),r.jsx(M,{variant:"outline",onClick:()=>{s(""),i("all"),o("all")},"data-testid":"button-clear-filters",title:"Очистить фильтры",children:t("clear_filters")})]})})}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Lt,{className:"w-5 h-5"}),t("fraud_alerts")," (",(f==null?void 0:f.length)||0,")"]})}),r.jsx(H,{children:h?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:t("type")}),r.jsx(J,{children:t("user")}),r.jsx(J,{children:t("offer")}),r.jsx(J,{children:t("severity")}),r.jsx(J,{children:t("status")}),r.jsx(J,{children:t("date")}),r.jsx(J,{className:"text-right",children:t("actions")})]})}),r.jsx($t,{children:f==null?void 0:f.map(p=>{var N,k,C,_,P,D,E,$;return r.jsxs(Re,{"data-testid":`row-alert-${p.id}`,children:[r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[w(p.type),r.jsx("span",{className:"capitalize","data-testid":`text-type-${p.id}`,children:t(p.type)})]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center text-white text-sm font-semibold",children:((k=(N=p.user)==null?void 0:N.firstName)==null?void 0:k.charAt(0))||((_=(C=p.user)==null?void 0:C.username)==null?void 0:_.charAt(0))||"U"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white","data-testid":`text-username-${p.id}`,children:((P=p.user)==null?void 0:P.username)||"Unknown"}),r.jsx("div",{className:"text-sm text-gray-500",children:(D=p.user)==null?void 0:D.email})]})]})}),r.jsx(q,{children:r.jsxs("div",{"data-testid":`text-offer-${p.id}`,children:[((E=p.offer)==null?void 0:E.name)||"Unknown Offer",r.jsx("div",{className:"text-sm text-gray-500",children:($=p.offer)==null?void 0:$.category})]})}),r.jsx(q,{children:r.jsx(le,{className:x(p.severity),"data-testid":`severity-${p.id}`,children:t(p.severity)})}),r.jsx(q,{children:r.jsx(le,{variant:p.isResolved?"default":"secondary","data-testid":`status-${p.id}`,children:p.isResolved?t("resolved"):t("pending")})}),r.jsx(q,{"data-testid":`text-date-${p.id}`,children:new Date(p.createdAt).toLocaleDateString()}),r.jsx(q,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsxs(jt,{children:[r.jsx(Xa,{asChild:!0,children:r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>d(p),"data-testid":`button-view-${p.id}`,children:r.jsx(hr,{className:"w-4 h-4"})})}),r.jsxs(vt,{className:"max-w-2xl",children:[r.jsx(yt,{children:r.jsx(bt,{children:t("fraud_alert_details")})}),c&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("type")}),r.jsx("p",{className:"font-medium",children:t(c.type)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("severity")}),r.jsx(le,{className:x(c.severity),children:t(c.severity)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("description")}),r.jsx("p",{className:"mt-1",children:c.description})]}),c.data&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("additional_data")}),r.jsx("pre",{className:"mt-1 p-3 bg-gray-100 rounded text-sm overflow-auto",children:JSON.stringify(c.data,null,2)})]})]})]})]}),!p.isResolved&&r.jsx(M,{size:"sm",variant:"outline",onClick:()=>v.mutate({alertId:p.id,isResolved:!0}),disabled:v.isPending,"data-testid":`button-resolve-${p.id}`,children:r.jsx(fn,{className:"w-4 h-4"})})]})})]},p.id)})})]})})]})]})})]})]})}function q5e(){const{user:e,token:t}=Jt(),{isCollapsed:n}=Os(),{toast:s}=lt(),a=Et(),[i,l]=y.useState("templates"),[o,c]=y.useState(!1),[d,u]=y.useState(!1),[h,f]=y.useState(!1),[m,v]=y.useState(null),[x,w]=y.useState(null),[j,g]=y.useState({level:"all",status:"all",search:""}),[b,p]=y.useState({status:"all",offerId:"all",dateFrom:"",dateTo:"",search:""}),{data:N=[],isLoading:k}=$e({queryKey:["/api/admin/postback-templates",j],queryFn:async()=>{const I=new URLSearchParams;j.level!=="all"&&I.append("level",j.level),j.status!=="all"&&I.append("status",j.status),j.search&&I.append("search",j.search);const Q=await fetch(`/api/admin/postback-templates?${I}`,{headers:{Authorization:`Bearer ${t}`}});if(!Q.ok)throw new Error("Failed to fetch postback templates");return Q.json()}}),{data:C=[],isLoading:_}=$e({queryKey:["/api/admin/postback-logs",b],queryFn:async()=>{const I=new URLSearchParams;b.status!=="all"&&I.append("status",b.status),b.offerId!=="all"&&I.append("offerId",b.offerId),b.dateFrom&&I.append("dateFrom",b.dateFrom),b.dateTo&&I.append("dateTo",b.dateTo),b.search&&I.append("search",b.search);const Q=await fetch(`/api/admin/postback-logs?${I}`,{headers:{Authorization:`Bearer ${t}`}});if(!Q.ok)throw new Error("Failed to fetch postback logs");return Q.json()}}),{data:P=[]}=$e({queryKey:["/api/admin/offers"],queryFn:async()=>{const I=await fetch("/api/admin/offers",{headers:{Authorization:`Bearer ${t}`}});if(!I.ok)throw new Error("Failed to fetch offers");return I.json()}}),D=Ee({mutationFn:async I=>Te("/api/admin/postback-templates","POST",I),onSuccess:()=>{a.invalidateQueries({predicate:I=>I.queryKey[0]==="/api/admin/postback-templates"}),c(!1),s({title:"Постбек создан",description:"Новый постбек успешно добавлен в систему"})}}),E=Ee({mutationFn:async({id:I,data:Q})=>Te(`/api/admin/postback-templates/${I}`,"PATCH",Q),onSuccess:()=>{a.invalidateQueries({predicate:I=>I.queryKey[0]==="/api/admin/postback-templates"}),u(!1),s({title:"Постбек обновлён",description:"Настройки постбека успешно сохранены"})}}),$=Ee({mutationFn:async I=>Te(`/api/admin/postback-templates/${I}`,"DELETE"),onSuccess:()=>{a.invalidateQueries({predicate:I=>I.queryKey[0]==="/api/admin/postback-templates"}),s({title:"Постбек удалён",description:"Постбек успешно удалён из системы",variant:"destructive"})}}),A=Ee({mutationFn:async I=>Te(`/api/admin/postback-logs/${I}/retry`,"POST"),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/postback-logs"]}),s({title:"Постбек отправлен",description:"Постбек поставлен в очередь на повторную отправку"})}}),T=I=>{const Q={success:"text-green-700 bg-green-50 border-green-200",failed:"text-red-700 bg-red-50 border-red-200",pending:"text-yellow-700 bg-yellow-50 border-yellow-200",retry:"text-blue-700 bg-blue-50 border-blue-200"};return r.jsxs(le,{className:Q[I]||"text-gray-700 bg-gray-50 border-gray-200",children:[I==="success"&&r.jsx(nr,{className:"w-3 h-3 mr-1"}),I==="failed"&&r.jsx(zt,{className:"w-3 h-3 mr-1"}),I==="pending"&&r.jsx(lr,{className:"w-3 h-3 mr-1"}),I==="retry"&&r.jsx(xu,{className:"w-3 h-3 mr-1"}),I==="success"?"Успешно":I==="failed"?"Ошибка":I==="pending"?"Ожидание":"Повтор"]})},O=I=>r.jsxs(le,{variant:I==="global"?"default":"secondary",children:[I==="global"&&r.jsx(dr,{className:"w-3 h-3 mr-1"}),I==="offer"&&r.jsx(Kt,{className:"w-3 h-3 mr-1"}),I==="global"?"Глобальный":"Оффер"]}),z=I=>{navigator.clipboard.writeText(I),s({title:"Скопировано",description:"URL скопирован в буфер обмена"})},F=[{date:"01.08",sent:145,successful:134,failed:11},{date:"02.08",sent:167,successful:159,failed:8},{date:"03.08",sent:189,successful:175,failed:14},{date:"04.08",sent:156,successful:144,failed:12}],R=[{name:"Успешно",value:412,color:"#10b981"},{name:"Ошибка",value:45,color:"#ef4444"},{name:"Ожидание",value:23,color:"#f59e0b"},{name:"Повтор",value:15,color:"#3b82f6"}];return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`transition-all duration-300 ${n?"ml-16":"ml-64"}`,children:[r.jsx(gn,{title:"Постбеки",breadcrumbs:[]}),r.jsxs("main",{className:"p-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Постбеки"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Управление постбеками и отслеживание доставки"})]}),r.jsxs(Zr,{value:i,onValueChange:l,className:"space-y-6",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-3",children:[r.jsxs(We,{value:"templates",className:"flex items-center gap-2",children:[r.jsx(fr,{className:"w-4 h-4"}),"Настройки постбеков"]}),r.jsxs(We,{value:"logs",className:"flex items-center gap-2",children:[r.jsx(ln,{className:"w-4 h-4"}),"История отправки"]}),r.jsxs(We,{value:"analytics",className:"flex items-center gap-2",children:[r.jsx(cr,{className:"w-4 h-4"}),"Аналитика"]})]}),r.jsxs(He,{value:"templates",className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center flex-1",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ne,{placeholder:"Поиск постбеков...",value:j.search,onChange:I=>g(Q=>({...Q,search:I.target.value})),className:"w-64","data-testid":"search-postbacks-input"}),r.jsx(M,{variant:"outline",size:"icon",title:"Фильтровать",children:r.jsx(Ks,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(he,{value:j.level,onValueChange:I=>g(Q=>({...Q,level:I})),children:[r.jsx(de,{className:"w-40","data-testid":"level-filter-select",children:r.jsx(fe,{placeholder:"Уровень"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все уровни"}),r.jsx(S,{value:"global",children:"Глобальный"}),r.jsx(S,{value:"offer",children:"Оффер"})]})]}),r.jsxs(he,{value:j.status,onValueChange:I=>g(Q=>({...Q,status:I})),children:[r.jsx(de,{className:"w-40","data-testid":"status-filter-select",children:r.jsx(fe,{placeholder:"Статус"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все статусы"}),r.jsx(S,{value:"active",children:"Активный"}),r.jsx(S,{value:"inactive",children:"Неактивный"})]})]})]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(M,{onClick:()=>c(!0),className:"bg-blue-600 hover:bg-blue-700","data-testid":"add-postback-btn",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Добавить постбек"]})})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"w-5 h-5"}),"Постбеки (",N.length,")"]}),r.jsx(Je,{children:"Настройка и управление URL для отправки постбеков"})]}),r.jsx(H,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Название"}),r.jsx(J,{children:"Уровень"}),r.jsx(J,{children:"События"}),r.jsx(J,{children:"URL"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Действия"})]})}),r.jsx($t,{children:k?r.jsx(Re,{children:r.jsx(q,{colSpan:6,className:"text-center py-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Vt,{className:"w-4 h-4 animate-spin mr-2"}),"Загрузка постбеков..."]})})}):N.length===0?r.jsx(Re,{children:r.jsx(q,{colSpan:6,className:"text-center py-8",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(fr,{className:"w-8 h-8 text-gray-400"}),r.jsx("p",{className:"text-gray-500",children:"Постбеки не найдены"}),r.jsx(M,{onClick:()=>c(!0),variant:"outline",size:"sm",children:"Добавить первый постбек"})]})})}):N.map(I=>r.jsxs(Re,{children:[r.jsx(q,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:I.name}),I.level==="offer"&&I.offerName&&r.jsxs("div",{className:"text-sm text-gray-500",children:["Оффер: ",I.offerName]})]})}),r.jsx(q,{children:O(I.level)}),r.jsx(q,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:I.events.map(Q=>r.jsx(le,{variant:"outline",className:"text-xs",children:Q==="lead"?"Лид":Q==="sale"?"Продажа":Q==="rejected"?"Отказ":Q==="hold"?"Холд":Q},Q))})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2 max-w-xs",children:[r.jsx("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded truncate flex-1",children:I.url}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>z(I.url),title:"Копировать URL","data-testid":`copy-url-${I.id}`,children:r.jsx(Yr,{className:"w-3 h-3"})})]})}),r.jsx(q,{children:r.jsx(le,{variant:I.isActive?"default":"secondary",className:I.isActive?"text-green-700 bg-green-50 border-green-200":"text-gray-700 bg-gray-50 border-gray-200",children:I.isActive?r.jsxs(r.Fragment,{children:[r.jsx(cne,{className:"w-3 h-3 mr-1"}),"Активный"]}):r.jsxs(r.Fragment,{children:[r.jsx(one,{className:"w-3 h-3 mr-1"}),"Неактивный"]})})}),r.jsx(q,{children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(M,{variant:"outline",size:"sm",onClick:()=>{v(I),u(!0)},title:"Редактировать постбек","data-testid":`edit-postback-${I.id}`,className:"hover:bg-blue-50 hover:text-blue-700 hover:border-blue-300",children:r.jsx(cs,{className:"w-3 h-3"})}),r.jsx(M,{variant:"outline",size:"sm",onClick:()=>$.mutate(I.id),title:"Удалить постбек","data-testid":`delete-postback-${I.id}`,className:"hover:bg-red-50 hover:text-red-700 hover:border-red-300",children:r.jsx(wr,{className:"w-3 h-3"})})]})})]},I.id))})]})})})]})]}),r.jsxs(He,{value:"logs",className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center flex-1",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ne,{placeholder:"Поиск в логах...",value:b.search,onChange:I=>p(Q=>({...Q,search:I.target.value})),className:"w-64","data-testid":"search-logs-input"}),r.jsx(M,{variant:"outline",size:"icon",title:"Фильтровать",children:r.jsx(Ks,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(he,{value:b.status,onValueChange:I=>p(Q=>({...Q,status:I})),children:[r.jsx(de,{className:"w-40","data-testid":"log-status-filter-select",children:r.jsx(fe,{placeholder:"Статус"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все статусы"}),r.jsx(S,{value:"success",children:"Успешно"}),r.jsx(S,{value:"failed",children:"Ошибка"}),r.jsx(S,{value:"pending",children:"Ожидание"}),r.jsx(S,{value:"retry",children:"Повтор"})]})]}),r.jsxs(he,{value:b.offerId,onValueChange:I=>p(Q=>({...Q,offerId:I})),children:[r.jsx(de,{className:"w-48","data-testid":"offer-filter-select",children:r.jsx(fe,{placeholder:"Оффер"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все офферы"}),P.map(I=>r.jsx(S,{value:I.id,children:I.name},I.id))]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(M,{variant:"outline",title:"Экспорт логов","data-testid":"export-logs-btn",children:[r.jsx(vr,{className:"w-4 h-4 mr-2"}),"Экспорт"]}),r.jsx(M,{variant:"outline",title:"Обновить","data-testid":"refresh-logs-btn",children:r.jsx(Vt,{className:"w-4 h-4"})})]})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(ln,{className:"w-5 h-5"}),"История постбеков (",C.length,")"]}),r.jsx(Je,{children:"Детальная информация о доставке постбеков"})]}),r.jsx(H,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Постбек"}),r.jsx(J,{children:"Оффер/Партнёр"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Ответ"}),r.jsx(J,{children:"Время"}),r.jsx(J,{children:"Дата"}),r.jsx(J,{children:"Действия"})]})}),r.jsx($t,{children:_?r.jsx(Re,{children:r.jsx(q,{colSpan:7,className:"text-center py-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Vt,{className:"w-4 h-4 animate-spin mr-2"}),"Загрузка логов..."]})})}):C.length===0?r.jsx(Re,{children:r.jsx(q,{colSpan:7,className:"text-center py-8",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(ln,{className:"w-8 h-8 text-gray-400"}),r.jsx("p",{className:"text-gray-500",children:"Логи не найдены"})]})})}):C.map(I=>r.jsxs(Re,{children:[r.jsxs(q,{children:[r.jsx("div",{className:"font-medium",children:I.postbackName}),r.jsxs("div",{className:"text-sm text-gray-500",children:[I.method," • Попытка ",I.attempt,"/",I.maxAttempts]})]}),r.jsx(q,{children:r.jsxs("div",{children:[I.offerName&&r.jsx("div",{className:"font-medium",children:I.offerName}),I.partnerName&&r.jsx("div",{className:"text-sm text-gray-500",children:I.partnerName})]})}),r.jsx(q,{children:T(I.status)}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[I.responseCode&&r.jsx(le,{variant:I.responseCode<300?"default":"destructive",className:"text-xs",children:I.responseCode}),I.responseTime&&r.jsxs("span",{className:"text-xs text-gray-500",children:[I.responseTime,"ms"]})]})}),r.jsx(q,{children:I.responseTime?`${I.responseTime}ms`:"—"}),r.jsx(q,{children:r.jsx("div",{className:"text-sm",children:new Date(I.createdAt).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"})})}),r.jsx(q,{children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(M,{variant:"outline",size:"sm",onClick:()=>{w(I),f(!0)},title:"Просмотреть детали","data-testid":`view-log-${I.id}`,className:"hover:bg-purple-50 hover:text-purple-700 hover:border-purple-300",children:r.jsx(hr,{className:"w-3 h-3"})}),I.status==="failed"&&r.jsx(M,{variant:"outline",size:"sm",onClick:()=>A.mutate(I.id),title:"Повторить отправку","data-testid":`retry-log-${I.id}`,className:"hover:bg-green-50 hover:text-green-700 hover:border-green-300",children:r.jsx(xu,{className:"w-3 h-3"})})]})})]},I.id))})]})})})]})]}),r.jsxs(He,{value:"analytics",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(W,{children:r.jsxs(H,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Отправлено сегодня"}),r.jsx("p",{className:"text-2xl font-bold",children:"156"})]}),r.jsx(Is,{className:"w-8 h-8 text-blue-600"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"+12% за сутки"})]})}),r.jsx(W,{children:r.jsxs(H,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Успешность"}),r.jsx("p",{className:"text-2xl font-bold",children:"92.3%"})]}),r.jsx(nr,{className:"w-8 h-8 text-green-600"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"+1.2% за неделю"})]})}),r.jsx(W,{children:r.jsxs(H,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Среднее время"}),r.jsx("p",{className:"text-2xl font-bold",children:"247ms"})]}),r.jsx(lr,{className:"w-8 h-8 text-orange-600"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"-15ms за сутки"})]})}),r.jsx(W,{children:r.jsxs(H,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Активных постбеков"}),r.jsx("p",{className:"text-2xl font-bold",children:N.filter(I=>I.isActive).length})]}),r.jsx(fr,{className:"w-8 h-8 text-purple-600"})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["из ",N.length," общих"]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Статистика отправки"}),r.jsx(Je,{children:"Динамика отправки постбеков за последние дни"})]}),r.jsx(H,{children:r.jsx("div",{className:"h-80",children:r.jsx(pa,{width:"100%",height:"100%",children:r.jsxs(ry,{data:F,children:[r.jsx(Pi,{strokeDasharray:"3 3"}),r.jsx(Cs,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(ls,{type:"monotone",dataKey:"sent",stroke:"#3b82f6",strokeWidth:2,name:"Отправлено"}),r.jsx(ls,{type:"monotone",dataKey:"successful",stroke:"#10b981",strokeWidth:2,name:"Успешно"}),r.jsx(ls,{type:"monotone",dataKey:"failed",stroke:"#ef4444",strokeWidth:2,name:"Ошибки"})]})})})})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Распределение статусов"}),r.jsx(Je,{children:"Соотношение успешных и неуспешных отправок"})]}),r.jsx(H,{children:r.jsx("div",{className:"h-80",children:r.jsx(pa,{width:"100%",height:"100%",children:r.jsxs(D_,{data:R,children:[r.jsx(Pi,{strokeDasharray:"3 3"}),r.jsx(Cs,{dataKey:"name"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(To,{dataKey:"value",fill:"#3b82f6"})]})})})})]})]})]})]}),r.jsx(jt,{open:o,onOpenChange:c,children:r.jsxs(vt,{className:"max-w-2xl",children:[r.jsxs(yt,{children:[r.jsx(bt,{children:"Добавить постбек"}),r.jsx(Ur,{children:"Создайте новый постбек для отправки уведомлений о конверсиях"})]}),r.jsx(HI,{onSubmit:I=>D.mutate(I),offers:P,isLoading:D.isPending})]})}),r.jsx(jt,{open:d,onOpenChange:u,children:r.jsxs(vt,{className:"max-w-2xl",children:[r.jsxs(yt,{children:[r.jsx(bt,{children:"Редактировать постбек"}),r.jsxs(Ur,{children:['Изменить настройки постбека "',m==null?void 0:m.name,'"']})]}),m&&r.jsx(HI,{postback:m,onSubmit:I=>E.mutate({id:m.id,data:I}),offers:P,isLoading:E.isPending})]})}),r.jsx(jt,{open:h,onOpenChange:f,children:r.jsxs(vt,{className:"max-w-4xl",children:[r.jsxs(yt,{children:[r.jsx(bt,{children:"Детали постбека"}),r.jsx(Ur,{children:"Подробная информация о доставке постбека"})]}),x&&r.jsx(W5e,{log:x})]})})]})]})]})}function HI({postback:e,onSubmit:t,offers:n,isLoading:s}){const[a,i]=y.useState({name:(e==null?void 0:e.name)||"",level:(e==null?void 0:e.level)||"global",url:(e==null?void 0:e.url)||"",events:(e==null?void 0:e.events)||["sale"],offerId:(e==null?void 0:e.offerId)||"",retryAttempts:(e==null?void 0:e.retryAttempts)||3,timeout:(e==null?void 0:e.timeout)||30,isActive:(e==null?void 0:e.isActive)??!0}),l=[{value:"lead",label:"Лид (Lead)"},{value:"sale",label:"Продажа (Sale)"},{value:"rejected",label:"Отказ (Rejected)"},{value:"hold",label:"Холд (Hold)"}],o=["{click_id}","{status}","{payout}","{offer_id}","{geo}","{device}","{sub1}","{sub2}","{sub3}","{sub4}","{sub5}","{time}"],c=d=>{d.preventDefault(),t(a)};return r.jsxs("form",{onSubmit:c,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"postback-name",children:"Название постбека"}),r.jsx(ne,{id:"postback-name",value:a.name,onChange:d=>i(u=>({...u,name:d.target.value})),placeholder:"Например: Основной трекер",required:!0,"data-testid":"postback-name-input"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"postback-level",children:"Уровень"}),r.jsxs(he,{value:a.level,onValueChange:d=>i(u=>({...u,level:d})),children:[r.jsx(de,{id:"postback-level","data-testid":"postback-level-select",children:r.jsx(fe,{placeholder:"Выберите уровень"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"global",children:"Глобальный"}),r.jsx(S,{value:"offer",children:"Оффер"})]})]})]})]}),a.level==="offer"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"postback-offer",children:"Оффер"}),r.jsxs(he,{value:a.offerId,onValueChange:d=>i(u=>({...u,offerId:d})),children:[r.jsx(de,{id:"postback-offer","data-testid":"postback-offer-select",children:r.jsx(fe,{placeholder:"Выберите оффер"})}),r.jsx(ue,{children:n.map(d=>r.jsx(S,{value:d.id,children:d.name},d.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"postback-url",children:"URL постбека"}),r.jsx(ne,{id:"postback-url",value:a.url,onChange:d=>i(u=>({...u,url:d.target.value})),placeholder:"https://tracker.com/postback?click_id={click_id}&status={status}&payout={payout}",required:!0,"data-testid":"postback-url-input"}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Доступные параметры: ",o.join(", ")]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"События для отправки"}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map(d=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(on,{id:`event-${d.value}`,checked:a.events.includes(d.value),onCheckedChange:u=>{i(u?h=>({...h,events:[...h.events,d.value]}):h=>({...h,events:h.events.filter(f=>f!==d.value)}))},"data-testid":`event-${d.value}-checkbox`}),r.jsx(L,{htmlFor:`event-${d.value}`,children:d.label})]},d.value))})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"retry-attempts",children:"Попытки повтора"}),r.jsx(ne,{id:"retry-attempts",type:"number",min:"1",max:"10",value:a.retryAttempts,onChange:d=>i(u=>({...u,retryAttempts:parseInt(d.target.value)})),"data-testid":"retry-attempts-input"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"timeout",children:"Таймаут (сек)"}),r.jsx(ne,{id:"timeout",type:"number",min:"5",max:"120",value:a.timeout,onChange:d=>i(u=>({...u,timeout:parseInt(d.target.value)})),"data-testid":"timeout-input"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"is-active",children:"Статус"}),r.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[r.jsx(on,{id:"is-active",checked:a.isActive,onCheckedChange:d=>i(u=>({...u,isActive:!!d})),"data-testid":"is-active-checkbox"}),r.jsx(L,{htmlFor:"is-active",children:"Активный"})]})]})]}),r.jsx(vo,{children:r.jsx(M,{type:"submit",disabled:s,"data-testid":"save-postback-btn",children:s?r.jsxs(r.Fragment,{children:[r.jsx(Vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Сохранение..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Tl,{className:"w-4 h-4 mr-2"}),"Сохранить"]})})})]})}function W5e({log:e}){const t=n=>{navigator.clipboard.writeText(n)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Постбек"}),r.jsx("p",{className:"text-sm font-medium",children:e.postbackName})]}),r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Статус"}),r.jsxs("div",{className:"flex items-center gap-2",children:[e.status==="success"&&r.jsx(nr,{className:"w-4 h-4 text-green-600"}),e.status==="failed"&&r.jsx(zt,{className:"w-4 h-4 text-red-600"}),e.status==="pending"&&r.jsx(lr,{className:"w-4 h-4 text-yellow-600"}),e.status==="retry"&&r.jsx(xu,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm capitalize",children:e.status})]})]}),r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Время выполнения"}),r.jsx("p",{className:"text-sm",children:e.responseTime?`${e.responseTime}ms`:"—"})]})]}),r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-medium text-gray-600",children:"URL запроса"}),r.jsx("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("code",{className:"text-sm break-all",children:e.url}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>t(e.url),title:"Копировать URL",children:r.jsx(Yr,{className:"w-4 h-4"})})]})})]}),e.responseCode&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Код ответа"}),r.jsx("div",{className:"mt-2",children:r.jsx(le,{variant:e.responseCode<300?"default":"destructive",className:"text-sm",children:e.responseCode})})]}),r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Попытка"}),r.jsxs("p",{className:"text-sm mt-2",children:[e.attempt," из ",e.maxAttempts]})]})]}),e.responseBody&&r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Тело ответа"}),r.jsx("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:r.jsx("pre",{className:"text-xs whitespace-pre-wrap break-words",children:e.responseBody})})]}),e.errorMessage&&r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Сообщение об ошибке"}),r.jsx("div",{className:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:r.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:e.errorMessage})})]}),e.headers&&Object.keys(e.headers).length>0&&r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Заголовки запроса"}),r.jsx("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:r.jsx("div",{className:"space-y-1",children:Object.entries(e.headers).map(([n,s])=>r.jsxs("div",{className:"text-xs",children:[r.jsxs("span",{className:"font-medium",children:[n,":"]})," ",s]},n))})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Создан"}),r.jsx("p",{className:"text-sm",children:new Date(e.createdAt).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),e.completedAt&&r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Завершён"}),r.jsx("p",{className:"text-sm",children:new Date(e.completedAt).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})]})}const H5e=Ke.object({key:Ke.string().min(1,"Key is required"),value:Ke.any(),description:Ke.string().optional(),category:Ke.enum(["fraud","finance","general","security","integration","ui"]),isPublic:Ke.boolean().default(!1)});function K5e(){const{token:e}=Jt(),{t}=Ll(),{toast:n}=lt(),s=Et(),[a,i]=y.useState("all"),[l,o]=y.useState(""),[c,d]=y.useState(!1),[u,h]=y.useState(null),{data:f=[],isLoading:m}=$e({queryKey:["/api/admin/system-settings"],queryFn:async()=>{const k=await fetch("/api/admin/system-settings",{headers:{Authorization:`Bearer ${e}`}});if(!k.ok)throw new Error("Failed to fetch settings");return k.json()}}),v=Ee({mutationFn:async k=>await Te("POST","/api/admin/system-settings",k),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/system-settings"]}),d(!1),j.reset(),n({title:t("success"),description:"System setting created successfully"})},onError:k=>{n({title:t("error"),description:k.message,variant:"destructive"})}}),x=Ee({mutationFn:async({id:k,data:C})=>await Te("PATCH",`/api/admin/system-settings/${k}`,C),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/system-settings"]}),h(null),n({title:t("success"),description:"System setting updated successfully"})},onError:k=>{n({title:t("error"),description:k.message,variant:"destructive"})}}),w=Ee({mutationFn:async k=>await Te("DELETE",`/api/admin/system-settings/${k}`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/system-settings"]}),n({title:t("success"),description:"System setting deleted successfully"})}}),j=Zm({resolver:Jm(H5e),defaultValues:{key:"",value:"",description:"",category:"general",isPublic:!1}}),g=[{value:"all",label:"All Categories",icon:r.jsx(fr,{className:"w-4 h-4"})},{value:"fraud",label:"Fraud Prevention",icon:r.jsx(Lt,{className:"w-4 h-4"})},{value:"finance",label:"Financial",icon:r.jsx(Rt,{className:"w-4 h-4"})},{value:"security",label:"Security",icon:r.jsx(Lt,{className:"w-4 h-4"})},{value:"integration",label:"Integrations",icon:r.jsx(wb,{className:"w-4 h-4"})},{value:"general",label:"General",icon:r.jsx(fr,{className:"w-4 h-4"})},{value:"ui",label:"User Interface",icon:r.jsx(dr,{className:"w-4 h-4"})}],b=f.filter(k=>{var P,D;const C=a==="all"||k.category===a,_=!l||k.key.toLowerCase().includes(l.toLowerCase())||((P=k.description)==null?void 0:P.toLowerCase().includes(l.toLowerCase()))||((D=k.value)==null?void 0:D.toString().toLowerCase().includes(l.toLowerCase()));return C&&_}),p=k=>{switch(k){case"fraud":return"bg-red-100 text-red-800";case"finance":return"bg-green-100 text-green-800";case"security":return"bg-yellow-100 text-yellow-800";case"integration":return"bg-blue-100 text-blue-800";case"ui":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},N=k=>typeof k=="object"?JSON.stringify(k,null,2):String(k);return m?r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"System Settings"}),r.jsx("main",{className:"flex-1 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})]})]}):r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"System Settings"}),r.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[r.jsxs(Zr,{value:a,onValueChange:i,className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Vr,{className:"grid w-full grid-cols-7",children:g.map(k=>r.jsxs(We,{value:k.value,className:"flex items-center gap-2",title:`Фильтр по категории: ${k.label}`,children:[k.icon,r.jsx("span",{className:"hidden sm:inline",children:k.label})]},k.value))}),r.jsxs(jt,{open:c,onOpenChange:d,children:[r.jsx(Xa,{asChild:!0,children:r.jsxs(M,{className:"flex items-center gap-2","data-testid":"button-create-setting",title:"Создать новую настройку",children:[r.jsx(Zt,{className:"w-4 h-4"}),"Add Setting"]})}),r.jsxs(vt,{className:"max-w-md",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Create System Setting"})}),r.jsx(Qm,{...j,children:r.jsxs("form",{onSubmit:j.handleSubmit(k=>v.mutate(k)),className:"space-y-4",children:[r.jsx(dt,{control:j.control,name:"key",render:({field:k})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Setting Key"}),r.jsx(ft,{children:r.jsx(ne,{...k,placeholder:"e.g., fraud.max_clicks_per_hour","data-testid":"input-setting-key"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:j.control,name:"category",render:({field:k})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Category"}),r.jsxs(he,{onValueChange:k.onChange,defaultValue:k.value,children:[r.jsx(ft,{children:r.jsx(de,{"data-testid":"select-setting-category",children:r.jsx(fe,{placeholder:"Select category"})})}),r.jsx(ue,{children:g.slice(1).map(C=>r.jsx(S,{value:C.value,children:C.label},C.value))})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:j.control,name:"value",render:({field:k})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Value"}),r.jsx(ft,{children:r.jsx(pt,{...k,placeholder:"Setting value (JSON for objects)","data-testid":"input-setting-value"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:j.control,name:"description",render:({field:k})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Description"}),r.jsx(ft,{children:r.jsx(ne,{...k,placeholder:"Setting description","data-testid":"input-setting-description"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:j.control,name:"isPublic",render:({field:k})=>r.jsxs(ct,{className:"flex items-center justify-between",children:[r.jsx(ut,{children:"Public Setting"}),r.jsx(ft,{children:r.jsx(Ye,{checked:k.value,onCheckedChange:k.onChange,"data-testid":"switch-setting-public"})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),r.jsx(M,{type:"submit",disabled:v.isPending,children:v.isPending?"Creating...":"Create Setting"})]})]})})]})]})]}),r.jsx(W,{className:"mb-6",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск по ключу, описанию, значению...",value:l,onChange:k=>o(k.target.value),className:"pl-10","data-testid":"input-search-settings",title:"Поиск системных настроек"})]})})}),r.jsxs("div",{className:"grid gap-4",children:[b.map(k=>r.jsxs(W,{className:"hover:shadow-md transition-shadow",children:[r.jsxs(se,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(ae,{className:"text-lg font-mono",children:k.key}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(le,{className:p(k.category),children:k.category}),k.isPublic&&r.jsx(le,{variant:"outline",children:"Public"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(M,{size:"sm",variant:"outline",onClick:()=>h(k),"data-testid":`button-edit-setting-${k.id}`,title:"Редактировать настройку",children:r.jsx(cs,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"outline",onClick:()=>w.mutate(k.id),"data-testid":`button-delete-setting-${k.id}`,title:"Удалить настройку",children:r.jsx(wr,{className:"w-4 h-4"})})]})]}),k.description&&r.jsx(Je,{children:k.description})]}),r.jsxs(H,{children:[r.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-md p-3",children:r.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:N(k.value)})}),r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Last updated: ",new Date(k.updatedAt).toLocaleString()]})]})]},k.id)),b.length===0&&r.jsx(W,{children:r.jsxs(H,{className:"text-center py-8",children:[r.jsx(Ure,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No settings found"}),r.jsx("p",{className:"text-gray-500",children:a==="all"?"No system settings have been configured yet.":`No settings found in the ${a} category.`})]})})]})]}),u&&r.jsx(jt,{open:!!u,onOpenChange:()=>h(null),children:r.jsxs(vt,{className:"max-w-md",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Edit System Setting"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Key"}),r.jsx("div",{className:"font-mono text-sm p-2 bg-gray-100 dark:bg-gray-800 rounded",children:u.key})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Value"}),r.jsx(pt,{value:N(u.value),onChange:k=>h({...u,value:k.target.value}),"data-testid":"input-edit-setting-value"})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{variant:"outline",onClick:()=>h(null),children:"Cancel"}),r.jsxs(M,{onClick:()=>x.mutate({id:u.id,data:{value:u.value}}),disabled:x.isPending,children:[r.jsx(Tl,{className:"w-4 h-4 mr-2"}),x.isPending?"Saving...":"Save Changes"]})]})]})]})})]})]})]})}var Nt=function(){return Nt=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Nt.apply(this,arguments)};function G5e(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function FH(e,t,n){for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}function ay(e){return e.mode==="multiple"}function iy(e){return e.mode==="range"}function dN(e){return e.mode==="single"}var Y5e={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function X5e(e,t){return Xt(e,"LLLL y",t)}function Z5e(e,t){return Xt(e,"d",t)}function Q5e(e,t){return Xt(e,"LLLL",t)}function J5e(e){return"".concat(e)}function eIe(e,t){return Xt(e,"cccccc",t)}function tIe(e,t){return Xt(e,"yyyy",t)}var rIe=Object.freeze({__proto__:null,formatCaption:X5e,formatDay:Z5e,formatMonthCaption:Q5e,formatWeekNumber:J5e,formatWeekdayName:eIe,formatYearCaption:tIe}),nIe=function(e,t,n){return Xt(e,"do MMMM (EEEE)",n)},sIe=function(){return"Month: "},aIe=function(){return"Go to next month"},iIe=function(){return"Go to previous month"},lIe=function(e,t){return Xt(e,"cccc",t)},oIe=function(e){return"Week n. ".concat(e)},cIe=function(){return"Year: "},dIe=Object.freeze({__proto__:null,labelDay:nIe,labelMonthDropdown:sIe,labelNext:aIe,labelPrevious:iIe,labelWeekNumber:oIe,labelWeekday:lIe,labelYearDropdown:cIe});function uIe(){var e="buttons",t=Y5e,n=t1,s={},a={},i=1,l={},o=new Date;return{captionLayout:e,classNames:t,formatters:rIe,labels:dIe,locale:n,modifiersClassNames:s,modifiers:a,numberOfMonths:i,styles:l,today:o,mode:"default"}}function hIe(e){var t=e.fromYear,n=e.toYear,s=e.fromMonth,a=e.toMonth,i=e.fromDate,l=e.toDate;return s?i=Ws(s):t&&(i=new Date(t,0,1)),a?l=e1(a):n&&(l=new Date(n,11,31)),{fromDate:i?Lf(i):void 0,toDate:l?Lf(l):void 0}}var LH=y.createContext(void 0);function fIe(e){var t,n=e.initialProps,s=uIe(),a=hIe(n),i=a.fromDate,l=a.toDate,o=(t=n.captionLayout)!==null&&t!==void 0?t:s.captionLayout;o!=="buttons"&&(!i||!l)&&(o="buttons");var c;(dN(n)||ay(n)||iy(n))&&(c=n.onSelect);var d=Nt(Nt(Nt({},s),n),{captionLayout:o,classNames:Nt(Nt({},s.classNames),n.classNames),components:Nt({},n.components),formatters:Nt(Nt({},s.formatters),n.formatters),fromDate:i,labels:Nt(Nt({},s.labels),n.labels),mode:n.mode||s.mode,modifiers:Nt(Nt({},s.modifiers),n.modifiers),modifiersClassNames:Nt(Nt({},s.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Nt(Nt({},s.styles),n.styles),toDate:l});return r.jsx(LH.Provider,{value:d,children:e.children})}function Or(){var e=y.useContext(LH);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function UH(e){var t=Or(),n=t.locale,s=t.classNames,a=t.styles,i=t.formatters.formatCaption;return r.jsx("div",{className:s.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:n})})}function mIe(e){return r.jsx("svg",Nt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:r.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function BH(e){var t,n,s=e.onChange,a=e.value,i=e.children,l=e.caption,o=e.className,c=e.style,d=Or(),u=(n=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:mIe;return r.jsxs("div",{className:o,style:c,children:[r.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),r.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:s,children:i}),r.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[l,r.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function pIe(e){var t,n=Or(),s=n.fromDate,a=n.toDate,i=n.styles,l=n.locale,o=n.formatters.formatMonthCaption,c=n.classNames,d=n.components,u=n.labels.labelMonthDropdown;if(!s)return r.jsx(r.Fragment,{});if(!a)return r.jsx(r.Fragment,{});var h=[];if(Gie(s,a))for(var f=Ws(s),m=s.getMonth();m<=a.getMonth();m++)h.push(ak(f,m));else for(var f=Ws(new Date),m=0;m<=11;m++)h.push(ak(f,m));var v=function(w){var j=Number(w.target.value),g=ak(Ws(e.displayMonth),j);e.onChange(g)},x=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:BH;return r.jsx(x,{name:"months","aria-label":u(),className:c.dropdown_month,style:i.dropdown_month,onChange:v,value:e.displayMonth.getMonth(),caption:o(e.displayMonth,{locale:l}),children:h.map(function(w){return r.jsx("option",{value:w.getMonth(),children:o(w,{locale:l})},w.getMonth())})})}function xIe(e){var t,n=e.displayMonth,s=Or(),a=s.fromDate,i=s.toDate,l=s.locale,o=s.styles,c=s.classNames,d=s.components,u=s.formatters.formatYearCaption,h=s.labels.labelYearDropdown,f=[];if(!a)return r.jsx(r.Fragment,{});if(!i)return r.jsx(r.Fragment,{});for(var m=a.getFullYear(),v=i.getFullYear(),x=m;x<=v;x++)f.push(uD(m9(new Date),x));var w=function(g){var b=uD(Ws(n),Number(g.target.value));e.onChange(b)},j=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:BH;return r.jsx(j,{name:"years","aria-label":h(),className:c.dropdown_year,style:o.dropdown_year,onChange:w,value:n.getFullYear(),caption:u(n,{locale:l}),children:f.map(function(g){return r.jsx("option",{value:g.getFullYear(),children:u(g,{locale:l})},g.getFullYear())})})}function gIe(e,t){var n=y.useState(e),s=n[0],a=n[1],i=t===void 0?s:t;return[i,a]}function vIe(e){var t=e.month,n=e.defaultMonth,s=e.today,a=t||n||s||new Date,i=e.toDate,l=e.fromDate,o=e.numberOfMonths,c=o===void 0?1:o;if(i&&Bf(i,a)<0){var d=-1*(c-1);a=Fi(i,d)}return l&&Bf(a,l)<0&&(a=l),Ws(a)}function yIe(){var e=Or(),t=vIe(e),n=gIe(t,e.month),s=n[0],a=n[1],i=function(l){var o;if(!e.disableNavigation){var c=Ws(l);a(c),(o=e.onMonthChange)===null||o===void 0||o.call(e,c)}};return[s,i]}function bIe(e,t){for(var n=t.reverseMonths,s=t.numberOfMonths,a=Ws(e),i=Ws(Fi(a,s)),l=Bf(i,a),o=[],c=0;c<l;c++){var d=Fi(a,c);o.push(d)}return n&&(o=o.reverse()),o}function jIe(e,t){if(!t.disableNavigation){var n=t.toDate,s=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,l=s?i:1,o=Ws(e);if(!n)return Fi(o,l);var c=Bf(n,e);if(!(c<i))return Fi(o,l)}}function wIe(e,t){if(!t.disableNavigation){var n=t.fromDate,s=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,l=s?i:1,o=Ws(e);if(!n)return Fi(o,-l);var c=Bf(o,n);if(!(c<=0))return Fi(o,-l)}}var zH=y.createContext(void 0);function NIe(e){var t=Or(),n=yIe(),s=n[0],a=n[1],i=bIe(s,t),l=jIe(s,t),o=wIe(s,t),c=function(h){return i.some(function(f){return cT(h,f)})},d=function(h,f){c(h)||(f&&j9(h,f)?a(Fi(h,1+t.numberOfMonths*-1)):a(h))},u={currentMonth:s,displayMonths:i,goToMonth:a,goToDate:d,previousMonth:o,nextMonth:l,isDateDisplayed:c};return r.jsx(zH.Provider,{value:u,children:e.children})}function ly(){var e=y.useContext(zH);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function KI(e){var t,n=Or(),s=n.classNames,a=n.styles,i=n.components,l=ly().goToMonth,o=function(u){l(Fi(u,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:UH,d=r.jsx(c,{id:e.id,displayMonth:e.displayMonth});return r.jsxs("div",{className:s.caption_dropdowns,style:a.caption_dropdowns,children:[r.jsx("div",{className:s.vhidden,children:d}),r.jsx(pIe,{onChange:o,displayMonth:e.displayMonth}),r.jsx(xIe,{onChange:o,displayMonth:e.displayMonth})]})}function kIe(e){return r.jsx("svg",Nt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:r.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function SIe(e){return r.jsx("svg",Nt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:r.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Wj=y.forwardRef(function(e,t){var n=Or(),s=n.classNames,a=n.styles,i=[s.button_reset,s.button];e.className&&i.push(e.className);var l=i.join(" "),o=Nt(Nt({},a.button_reset),a.button);return e.style&&Object.assign(o,e.style),r.jsx("button",Nt({},e,{ref:t,type:"button",className:l,style:o}))});function CIe(e){var t,n,s=Or(),a=s.dir,i=s.locale,l=s.classNames,o=s.styles,c=s.labels,d=c.labelPrevious,u=c.labelNext,h=s.components;if(!e.nextMonth&&!e.previousMonth)return r.jsx(r.Fragment,{});var f=d(e.previousMonth,{locale:i}),m=[l.nav_button,l.nav_button_previous].join(" "),v=u(e.nextMonth,{locale:i}),x=[l.nav_button,l.nav_button_next].join(" "),w=(t=h==null?void 0:h.IconRight)!==null&&t!==void 0?t:SIe,j=(n=h==null?void 0:h.IconLeft)!==null&&n!==void 0?n:kIe;return r.jsxs("div",{className:l.nav,style:o.nav,children:[!e.hidePrevious&&r.jsx(Wj,{name:"previous-month","aria-label":f,className:m,style:o.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?r.jsx(w,{className:l.nav_icon,style:o.nav_icon}):r.jsx(j,{className:l.nav_icon,style:o.nav_icon})}),!e.hideNext&&r.jsx(Wj,{name:"next-month","aria-label":v,className:x,style:o.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?r.jsx(j,{className:l.nav_icon,style:o.nav_icon}):r.jsx(w,{className:l.nav_icon,style:o.nav_icon})})]})}function GI(e){var t=Or().numberOfMonths,n=ly(),s=n.previousMonth,a=n.nextMonth,i=n.goToMonth,l=n.displayMonths,o=l.findIndex(function(v){return cT(e.displayMonth,v)}),c=o===0,d=o===l.length-1,u=t>1&&(c||!d),h=t>1&&(d||!c),f=function(){s&&i(s)},m=function(){a&&i(a)};return r.jsx(CIe,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:h,nextMonth:a,previousMonth:s,onPreviousClick:f,onNextClick:m})}function _Ie(e){var t,n=Or(),s=n.classNames,a=n.disableNavigation,i=n.styles,l=n.captionLayout,o=n.components,c=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:UH,d;return a?d=r.jsx(c,{id:e.id,displayMonth:e.displayMonth}):l==="dropdown"?d=r.jsx(KI,{displayMonth:e.displayMonth,id:e.id}):l==="dropdown-buttons"?d=r.jsxs(r.Fragment,{children:[r.jsx(KI,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),r.jsx(GI,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=r.jsxs(r.Fragment,{children:[r.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),r.jsx(GI,{displayMonth:e.displayMonth,id:e.id})]}),r.jsx("div",{className:s.caption,style:i.caption,children:d})}function PIe(e){var t=Or(),n=t.footer,s=t.styles,a=t.classNames.tfoot;return n?r.jsx("tfoot",{className:a,style:s.tfoot,children:r.jsx("tr",{children:r.jsx("td",{colSpan:8,children:n})})}):r.jsx(r.Fragment,{})}function AIe(e,t,n){for(var s=n?vu(new Date):Wa(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var l=Gn(s,i);a.push(l)}return a}function TIe(){var e=Or(),t=e.classNames,n=e.styles,s=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,l=e.ISOWeek,o=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=AIe(a,i,l);return r.jsxs("tr",{style:n.head_row,className:t.head_row,children:[s&&r.jsx("td",{style:n.head_cell,className:t.head_cell}),d.map(function(u,h){return r.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(u,{locale:a}),children:o(u,{locale:a})},h)})]})}function EIe(){var e,t=Or(),n=t.classNames,s=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:TIe;return r.jsx("thead",{style:s.head,className:n.head,children:r.jsx(i,{})})}function OIe(e){var t=Or(),n=t.locale,s=t.formatters.formatDay;return r.jsx(r.Fragment,{children:s(e.date,{locale:n})})}var eE=y.createContext(void 0);function RIe(e){if(!ay(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return r.jsx(eE.Provider,{value:t,children:e.children})}return r.jsx(DIe,{initialProps:e.initialProps,children:e.children})}function DIe(e){var t=e.initialProps,n=e.children,s=t.selected,a=t.min,i=t.max,l=function(d,u,h){var f,m;(f=t.onDayClick)===null||f===void 0||f.call(t,d,u,h);var v=!!(u.selected&&a&&(s==null?void 0:s.length)===a);if(!v){var x=!!(!u.selected&&i&&(s==null?void 0:s.length)===i);if(!x){var w=s?FH([],s):[];if(u.selected){var j=w.findIndex(function(g){return Us(d,g)});w.splice(j,1)}else w.push(d);(m=t.onSelect)===null||m===void 0||m.call(t,w,d,u,h)}}},o={disabled:[]};s&&o.disabled.push(function(d){var u=i&&s.length>i-1,h=s.some(function(f){return Us(f,d)});return!!(u&&!h)});var c={selected:s,onDayClick:l,modifiers:o};return r.jsx(eE.Provider,{value:c,children:n})}function tE(){var e=y.useContext(eE);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function MIe(e,t){var n=t||{},s=n.from,a=n.to;return s&&a?Us(a,e)&&Us(s,e)?void 0:Us(a,e)?{from:a,to:void 0}:Us(s,e)?void 0:X2(s,e)?{from:e,to:a}:{from:s,to:e}:a?X2(e,a)?{from:a,to:e}:{from:e,to:a}:s?j9(e,s)?{from:e,to:s}:{from:s,to:e}:{from:e,to:void 0}}var rE=y.createContext(void 0);function $Ie(e){if(!iy(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return r.jsx(rE.Provider,{value:t,children:e.children})}return r.jsx(IIe,{initialProps:e.initialProps,children:e.children})}function IIe(e){var t=e.initialProps,n=e.children,s=t.selected,a=s||{},i=a.from,l=a.to,o=t.min,c=t.max,d=function(m,v,x){var w,j;(w=t.onDayClick)===null||w===void 0||w.call(t,m,v,x);var g=MIe(m,s);(j=t.onSelect)===null||j===void 0||j.call(t,g,m,v,x)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(u.range_start=[i],l?(u.range_end=[l],Us(i,l)||(u.range_middle=[{after:i,before:l}])):u.range_end=[i]):l&&(u.range_start=[l],u.range_end=[l]),o&&(i&&!l&&u.disabled.push({after:hl(i,o-1),before:Gn(i,o-1)}),i&&l&&u.disabled.push({after:i,before:Gn(i,o-1)}),!i&&l&&u.disabled.push({after:hl(l,o-1),before:Gn(l,o-1)})),c){if(i&&!l&&(u.disabled.push({before:Gn(i,-c+1)}),u.disabled.push({after:Gn(i,c-1)})),i&&l){var h=xl(l,i)+1,f=c-h;u.disabled.push({before:hl(i,f)}),u.disabled.push({after:Gn(l,f)})}!i&&l&&(u.disabled.push({before:Gn(l,-c+1)}),u.disabled.push({after:Gn(l,c-1)}))}return r.jsx(rE.Provider,{value:{selected:s,onDayClick:d,modifiers:u},children:n})}function nE(){var e=y.useContext(rE);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function U0(e){return Array.isArray(e)?FH([],e):e!==void 0?[e]:[]}function FIe(e){var t={};return Object.entries(e).forEach(function(n){var s=n[0],a=n[1];t[s]=U0(a)}),t}var Bi;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Bi||(Bi={}));var LIe=Bi.Selected,Wl=Bi.Disabled,UIe=Bi.Hidden,BIe=Bi.Today,Hk=Bi.RangeEnd,Kk=Bi.RangeMiddle,Gk=Bi.RangeStart,zIe=Bi.Outside;function VIe(e,t,n){var s,a=(s={},s[LIe]=U0(e.selected),s[Wl]=U0(e.disabled),s[UIe]=U0(e.hidden),s[BIe]=[e.today],s[Hk]=[],s[Kk]=[],s[Gk]=[],s[zIe]=[],s);return e.fromDate&&a[Wl].push({before:e.fromDate}),e.toDate&&a[Wl].push({after:e.toDate}),ay(e)?a[Wl]=a[Wl].concat(t.modifiers[Wl]):iy(e)&&(a[Wl]=a[Wl].concat(n.modifiers[Wl]),a[Gk]=n.modifiers[Gk],a[Kk]=n.modifiers[Kk],a[Hk]=n.modifiers[Hk]),a}var VH=y.createContext(void 0);function qIe(e){var t=Or(),n=tE(),s=nE(),a=VIe(t,n,s),i=FIe(t.modifiers),l=Nt(Nt({},a),i);return r.jsx(VH.Provider,{value:l,children:e.children})}function qH(){var e=y.useContext(VH);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function WIe(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function HIe(e){return!!(e&&typeof e=="object"&&"from"in e)}function KIe(e){return!!(e&&typeof e=="object"&&"after"in e)}function GIe(e){return!!(e&&typeof e=="object"&&"before"in e)}function YIe(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function XIe(e,t){var n,s=t.from,a=t.to;if(s&&a){var i=xl(a,s)<0;i&&(n=[a,s],s=n[0],a=n[1]);var l=xl(e,s)>=0&&xl(a,e)>=0;return l}return a?Us(a,e):s?Us(s,e):!1}function ZIe(e){return lT(e)}function QIe(e){return Array.isArray(e)&&e.every(lT)}function JIe(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(ZIe(n))return Us(e,n);if(QIe(n))return n.includes(e);if(HIe(n))return XIe(e,n);if(YIe(n))return n.dayOfWeek.includes(e.getDay());if(WIe(n)){var s=xl(n.before,e),a=xl(n.after,e),i=s>0,l=a<0,o=X2(n.before,n.after);return o?l&&i:i||l}return KIe(n)?xl(e,n.after)>0:GIe(n)?xl(n.before,e)>0:typeof n=="function"?n(e):!1})}function sE(e,t,n){var s=Object.keys(t).reduce(function(i,l){var o=t[l];return JIe(e,o)&&i.push(l),i},[]),a={};return s.forEach(function(i){return a[i]=!0}),n&&!cT(e,n)&&(a.outside=!0),a}function e3e(e,t){for(var n=Ws(e[0]),s=e1(e[e.length-1]),a,i,l=n;l<=s;){var o=sE(l,t),c=!o.disabled&&!o.hidden;if(!c){l=Gn(l,1);continue}if(o.selected)return l;o.today&&!i&&(i=l),a||(a=l),l=Gn(l,1)}return i||a}var t3e=365;function WH(e,t){var n=t.moveBy,s=t.direction,a=t.context,i=t.modifiers,l=t.retry,o=l===void 0?{count:0,lastFocused:e}:l,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,h=a.locale,f={day:Gn,week:Y2,month:Fi,year:Iae,startOfWeek:function(w){return a.ISOWeek?vu(w):Wa(w,{locale:h,weekStartsOn:c})},endOfWeek:function(w){return a.ISOWeek?p9(w):oT(w,{locale:h,weekStartsOn:c})}},m=f[n](e,s==="after"?1:-1);s==="before"&&d?m=Fae([d,m]):s==="after"&&u&&(m=Lae([u,m]));var v=!0;if(i){var x=sE(m,i);v=!x.disabled&&!x.hidden}return v?m:o.count>t3e?o.lastFocused:WH(m,{moveBy:n,direction:s,context:a,modifiers:i,retry:Nt(Nt({},o),{count:o.count+1})})}var HH=y.createContext(void 0);function r3e(e){var t=ly(),n=qH(),s=y.useState(),a=s[0],i=s[1],l=y.useState(),o=l[0],c=l[1],d=e3e(t.displayMonths,n),u=a??(o&&t.isDateDisplayed(o))?o:d,h=function(){c(a),i(void 0)},f=function(w){i(w)},m=Or(),v=function(w,j){if(a){var g=WH(a,{moveBy:w,direction:j,context:m,modifiers:n});Us(a,g)||(t.goToDate(g,a),f(g))}},x={focusedDay:a,focusTarget:u,blur:h,focus:f,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return r.jsx(HH.Provider,{value:x,children:e.children})}function aE(){var e=y.useContext(HH);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function n3e(e,t){var n=qH(),s=sE(e,n,t);return s}var iE=y.createContext(void 0);function s3e(e){if(!dN(e.initialProps)){var t={selected:void 0};return r.jsx(iE.Provider,{value:t,children:e.children})}return r.jsx(a3e,{initialProps:e.initialProps,children:e.children})}function a3e(e){var t=e.initialProps,n=e.children,s=function(i,l,o){var c,d,u;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,l,o),l.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,i,l,o);return}(u=t.onSelect)===null||u===void 0||u.call(t,i,i,l,o)},a={selected:t.selected,onDayClick:s};return r.jsx(iE.Provider,{value:a,children:n})}function KH(){var e=y.useContext(iE);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function i3e(e,t){var n=Or(),s=KH(),a=tE(),i=nE(),l=aE(),o=l.focusDayAfter,c=l.focusDayBefore,d=l.focusWeekAfter,u=l.focusWeekBefore,h=l.blur,f=l.focus,m=l.focusMonthBefore,v=l.focusMonthAfter,x=l.focusYearBefore,w=l.focusYearAfter,j=l.focusStartOfWeek,g=l.focusEndOfWeek,b=function(F){var R,I,Q,Y;dN(n)?(R=s.onDayClick)===null||R===void 0||R.call(s,e,t,F):ay(n)?(I=a.onDayClick)===null||I===void 0||I.call(a,e,t,F):iy(n)?(Q=i.onDayClick)===null||Q===void 0||Q.call(i,e,t,F):(Y=n.onDayClick)===null||Y===void 0||Y.call(n,e,t,F)},p=function(F){var R;f(e),(R=n.onDayFocus)===null||R===void 0||R.call(n,e,t,F)},N=function(F){var R;h(),(R=n.onDayBlur)===null||R===void 0||R.call(n,e,t,F)},k=function(F){var R;(R=n.onDayMouseEnter)===null||R===void 0||R.call(n,e,t,F)},C=function(F){var R;(R=n.onDayMouseLeave)===null||R===void 0||R.call(n,e,t,F)},_=function(F){var R;(R=n.onDayPointerEnter)===null||R===void 0||R.call(n,e,t,F)},P=function(F){var R;(R=n.onDayPointerLeave)===null||R===void 0||R.call(n,e,t,F)},D=function(F){var R;(R=n.onDayTouchCancel)===null||R===void 0||R.call(n,e,t,F)},E=function(F){var R;(R=n.onDayTouchEnd)===null||R===void 0||R.call(n,e,t,F)},$=function(F){var R;(R=n.onDayTouchMove)===null||R===void 0||R.call(n,e,t,F)},A=function(F){var R;(R=n.onDayTouchStart)===null||R===void 0||R.call(n,e,t,F)},T=function(F){var R;(R=n.onDayKeyUp)===null||R===void 0||R.call(n,e,t,F)},O=function(F){var R;switch(F.key){case"ArrowLeft":F.preventDefault(),F.stopPropagation(),n.dir==="rtl"?o():c();break;case"ArrowRight":F.preventDefault(),F.stopPropagation(),n.dir==="rtl"?c():o();break;case"ArrowDown":F.preventDefault(),F.stopPropagation(),d();break;case"ArrowUp":F.preventDefault(),F.stopPropagation(),u();break;case"PageUp":F.preventDefault(),F.stopPropagation(),F.shiftKey?x():m();break;case"PageDown":F.preventDefault(),F.stopPropagation(),F.shiftKey?w():v();break;case"Home":F.preventDefault(),F.stopPropagation(),j();break;case"End":F.preventDefault(),F.stopPropagation(),g();break}(R=n.onDayKeyDown)===null||R===void 0||R.call(n,e,t,F)},z={onClick:b,onFocus:p,onBlur:N,onKeyDown:O,onKeyUp:T,onMouseEnter:k,onMouseLeave:C,onPointerEnter:_,onPointerLeave:P,onTouchCancel:D,onTouchEnd:E,onTouchMove:$,onTouchStart:A};return z}function l3e(){var e=Or(),t=KH(),n=tE(),s=nE(),a=dN(e)?t.selected:ay(e)?n.selected:iy(e)?s.selected:void 0;return a}function o3e(e){return Object.values(Bi).includes(e)}function c3e(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(s){var a=e.modifiersClassNames[s];if(a)n.push(a);else if(o3e(s)){var i=e.classNames["day_".concat(s)];i&&n.push(i)}}),n}function d3e(e,t){var n=Nt({},e.styles.day);return Object.keys(t).forEach(function(s){var a;n=Nt(Nt({},n),(a=e.modifiersStyles)===null||a===void 0?void 0:a[s])}),n}function u3e(e,t,n){var s,a,i,l=Or(),o=aE(),c=n3e(e,t),d=i3e(e,c),u=l3e(),h=!!(l.onDayClick||l.mode!=="default");y.useEffect(function(){var k;c.outside||o.focusedDay&&h&&Us(o.focusedDay,e)&&((k=n.current)===null||k===void 0||k.focus())},[o.focusedDay,e,n,h,c.outside]);var f=c3e(l,c).join(" "),m=d3e(l,c),v=!!(c.outside&&!l.showOutsideDays||c.hidden),x=(i=(a=l.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:OIe,w=r.jsx(x,{date:e,displayMonth:t,activeModifiers:c}),j={style:m,className:f,children:w,role:"gridcell"},g=o.focusTarget&&Us(o.focusTarget,e)&&!c.outside,b=o.focusedDay&&Us(o.focusedDay,e),p=Nt(Nt(Nt({},j),(s={disabled:c.disabled,role:"gridcell"},s["aria-selected"]=c.selected,s.tabIndex=b||g?0:-1,s)),d),N={isButton:h,isHidden:v,activeModifiers:c,selectedDays:u,buttonProps:p,divProps:j};return N}function h3e(e){var t=y.useRef(null),n=u3e(e.date,e.displayMonth,t);return n.isHidden?r.jsx("div",{role:"gridcell"}):n.isButton?r.jsx(Wj,Nt({name:"day",ref:t},n.buttonProps)):r.jsx("div",Nt({},n.divProps))}function f3e(e){var t=e.number,n=e.dates,s=Or(),a=s.onWeekNumberClick,i=s.styles,l=s.classNames,o=s.locale,c=s.labels.labelWeekNumber,d=s.formatters.formatWeekNumber,u=d(Number(t),{locale:o});if(!a)return r.jsx("span",{className:l.weeknumber,style:i.weeknumber,children:u});var h=c(Number(t),{locale:o}),f=function(m){a(t,n,m)};return r.jsx(Wj,{name:"week-number","aria-label":h,className:l.weeknumber,style:i.weeknumber,onClick:f,children:u})}function m3e(e){var t,n,s=Or(),a=s.styles,i=s.classNames,l=s.showWeekNumber,o=s.components,c=(t=o==null?void 0:o.Day)!==null&&t!==void 0?t:h3e,d=(n=o==null?void 0:o.WeekNumber)!==null&&n!==void 0?n:f3e,u;return l&&(u=r.jsx("td",{className:i.cell,style:a.cell,children:r.jsx(d,{number:e.weekNumber,dates:e.dates})})),r.jsxs("tr",{className:i.row,style:a.row,children:[u,e.dates.map(function(h){return r.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:r.jsx(c,{displayMonth:e.displayMonth,date:h})},Wie(h))})]})}function YI(e,t,n){for(var s=n!=null&&n.ISOWeek?p9(t):oT(t,n),a=n!=null&&n.ISOWeek?vu(e):Wa(e,n),i=xl(s,a),l=[],o=0;o<=i;o++)l.push(Gn(a,o));var c=l.reduce(function(d,u){var h=n!=null&&n.ISOWeek?g9(u):y9(u,n),f=d.find(function(m){return m.weekNumber===h});return f?(f.dates.push(u),d):(d.push({weekNumber:h,dates:[u]}),d)},[]);return c}function p3e(e,t){var n=YI(Ws(e),e1(e),t);if(t!=null&&t.useFixedWeeks){var s=Kie(e,t);if(s<6){var a=n[n.length-1],i=a.dates[a.dates.length-1],l=Y2(i,6-s),o=YI(Y2(i,1),l,t);n.push.apply(n,o)}}return n}function x3e(e){var t,n,s,a=Or(),i=a.locale,l=a.classNames,o=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,h=a.weekStartsOn,f=a.firstWeekContainsDate,m=a.ISOWeek,v=p3e(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:m,locale:i,weekStartsOn:h,firstWeekContainsDate:f}),x=(t=u==null?void 0:u.Head)!==null&&t!==void 0?t:EIe,w=(n=u==null?void 0:u.Row)!==null&&n!==void 0?n:m3e,j=(s=u==null?void 0:u.Footer)!==null&&s!==void 0?s:PIe;return r.jsxs("table",{id:e.id,className:l.table,style:o.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&r.jsx(x,{}),r.jsx("tbody",{className:l.tbody,style:o.tbody,children:v.map(function(g){return r.jsx(w,{displayMonth:e.displayMonth,dates:g.dates,weekNumber:g.weekNumber},g.weekNumber)})}),r.jsx(j,{displayMonth:e.displayMonth})]})}function g3e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var v3e=g3e()?y.useLayoutEffect:y.useEffect,Yk=!1,y3e=0;function XI(){return"react-day-picker-".concat(++y3e)}function b3e(e){var t,n=e??(Yk?XI():null),s=y.useState(n),a=s[0],i=s[1];return v3e(function(){a===null&&i(XI())},[]),y.useEffect(function(){Yk===!1&&(Yk=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function j3e(e){var t,n,s=Or(),a=s.dir,i=s.classNames,l=s.styles,o=s.components,c=ly().displayMonths,d=b3e(s.id?"".concat(s.id,"-").concat(e.displayIndex):void 0),u=s.id?"".concat(s.id,"-grid-").concat(e.displayIndex):void 0,h=[i.month],f=l.month,m=e.displayIndex===0,v=e.displayIndex===c.length-1,x=!m&&!v;a==="rtl"&&(t=[m,v],v=t[0],m=t[1]),m&&(h.push(i.caption_start),f=Nt(Nt({},f),l.caption_start)),v&&(h.push(i.caption_end),f=Nt(Nt({},f),l.caption_end)),x&&(h.push(i.caption_between),f=Nt(Nt({},f),l.caption_between));var w=(n=o==null?void 0:o.Caption)!==null&&n!==void 0?n:_Ie;return r.jsxs("div",{className:h.join(" "),style:f,children:[r.jsx(w,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),r.jsx(x3e,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function w3e(e){var t=Or(),n=t.classNames,s=t.styles;return r.jsx("div",{className:n.months,style:s.months,children:e.children})}function N3e(e){var t,n,s=e.initialProps,a=Or(),i=aE(),l=ly(),o=y.useState(!1),c=o[0],d=o[1];y.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var h=Nt(Nt({},a.styles.root),a.style),f=Object.keys(s).filter(function(v){return v.startsWith("data-")}).reduce(function(v,x){var w;return Nt(Nt({},v),(w={},w[x]=s[x],w))},{}),m=(n=(t=s.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:w3e;return r.jsx("div",Nt({className:u.join(" "),style:h,dir:a.dir,id:a.id,nonce:s.nonce,title:s.title,lang:s.lang},f,{children:r.jsx(m,{children:l.displayMonths.map(function(v,x){return r.jsx(j3e,{displayIndex:x,displayMonth:v},x)})})}))}function k3e(e){var t=e.children,n=G5e(e,["children"]);return r.jsx(fIe,{initialProps:n,children:r.jsx(NIe,{children:r.jsx(s3e,{initialProps:n,children:r.jsx(RIe,{initialProps:n,children:r.jsx($Ie,{initialProps:n,children:r.jsx(qIe,{children:r.jsx(r3e,{children:t})})})})})})})}function S3e(e){return r.jsx(k3e,Nt({},e,{children:r.jsx(N3e,{initialProps:e})}))}function uN({className:e,classNames:t,showOutsideDays:n=!0,...s}){return r.jsx(S3e,{showOutsideDays:n,className:Ae("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Ae(Yx({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Ae(Yx({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>r.jsx(Ri,{className:"h-4 w-4"}),IconRight:({...a})=>r.jsx(Qc,{className:"h-4 w-4"})},...s})}uN.displayName="Calendar";var lE="Popover",[GH,tWe]=Bn(lE,[ed]),oy=ed(),[C3e,ld]=GH(lE),YH=e=>{const{__scopePopover:t,children:n,open:s,defaultOpen:a,onOpenChange:i,modal:l=!1}=e,o=oy(t),c=y.useRef(null),[d,u]=y.useState(!1),[h=!1,f]=Oi({prop:s,defaultProp:a,onChange:i});return r.jsx(sT,{...o,children:r.jsx(C3e,{scope:t,contentId:Xn(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(m=>!m),[f]),hasCustomAnchor:d,onCustomAnchorAdd:y.useCallback(()=>u(!0),[]),onCustomAnchorRemove:y.useCallback(()=>u(!1),[]),modal:l,children:n})})};YH.displayName=lE;var XH="PopoverAnchor",_3e=y.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=ld(XH,n),i=oy(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=a;return y.useEffect(()=>(l(),()=>o()),[l,o]),r.jsx(Bv,{...i,...s,ref:t})});_3e.displayName=XH;var ZH="PopoverTrigger",QH=y.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=ld(ZH,n),i=oy(n),l=St(t,a.triggerRef),o=r.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":nK(a.open),...s,ref:l,onClick:Le(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:r.jsx(Bv,{asChild:!0,...i,children:o})});QH.displayName=ZH;var oE="PopoverPortal",[P3e,A3e]=GH(oE,{forceMount:void 0}),JH=e=>{const{__scopePopover:t,forceMount:n,children:s,container:a}=e,i=ld(oE,t);return r.jsx(P3e,{scope:t,forceMount:n,children:r.jsx(zn,{present:n||i.open,children:r.jsx(Am,{asChild:!0,container:a,children:s})})})};JH.displayName=oE;var vm="PopoverContent",eK=y.forwardRef((e,t)=>{const n=A3e(vm,e.__scopePopover),{forceMount:s=n.forceMount,...a}=e,i=ld(vm,e.__scopePopover);return r.jsx(zn,{present:s||i.open,children:i.modal?r.jsx(E3e,{...a,ref:t}):r.jsx(O3e,{...a,ref:t})})});eK.displayName=vm;var T3e=Fc("PopoverContent.RemoveScroll"),E3e=y.forwardRef((e,t)=>{const n=ld(vm,e.__scopePopover),s=y.useRef(null),a=St(t,s),i=y.useRef(!1);return y.useEffect(()=>{const l=s.current;if(l)return a1(l)},[]),r.jsx(Vv,{as:T3e,allowPinchZoom:!0,children:r.jsx(tK,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Le(e.onCloseAutoFocus,l=>{var o;l.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Le(e.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,d=o.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Le(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),O3e=y.forwardRef((e,t)=>{const n=ld(vm,e.__scopePopover),s=y.useRef(!1),a=y.useRef(!1);return r.jsx(tK,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=e.onCloseAutoFocus)==null||l.call(e,i),i.defaultPrevented||(s.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),tK=y.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=e,f=ld(vm,n),m=oy(n);return r1(),r.jsx(zv,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx($u,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1),children:r.jsx(Xw,{"data-state":nK(f.open),role:"dialog",id:f.contentId,...m,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),rK="PopoverClose",R3e=y.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=ld(rK,n);return r.jsx(Ze.button,{type:"button",...s,ref:t,onClick:Le(e.onClick,()=>a.onOpenChange(!1))})});R3e.displayName=rK;var D3e="PopoverArrow",M3e=y.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=oy(n);return r.jsx(Zw,{...a,...s,ref:t})});M3e.displayName=D3e;function nK(e){return e?"open":"closed"}var $3e=YH,I3e=QH,F3e=JH,sK=eK;const ym=$3e,bm=I3e,Eu=y.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},a)=>r.jsx(F3e,{children:r.jsx(sK,{ref:a,align:t,sideOffset:n,className:Ae("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));Eu.displayName=sK.displayName;function L3e(){const{token:e}=Jt();Ll();const[t,n]=y.useState(""),[s,a]=y.useState("all"),[i,l]=y.useState("all"),[o,c]=y.useState("all"),[d,u]=y.useState({from:Gn(new Date,-7),to:new Date}),{data:h=[],isLoading:f}=$e({queryKey:["/api/admin/audit-logs",t,s,i,o,d],queryFn:async()=>{const p=new URLSearchParams;t&&p.append("search",t),s!=="all"&&p.append("action",s),i!=="all"&&p.append("resourceType",i),o!=="all"&&p.append("userId",o),d.from&&p.append("startDate",d.from.toISOString()),d.to&&p.append("endDate",d.to.toISOString());const N=await fetch(`/api/admin/audit-logs?${p.toString()}`,{headers:{Authorization:`Bearer ${e}`}});if(!N.ok)throw new Error("Failed to fetch audit logs");return N.json()}}),{data:m=[]}=$e({queryKey:["/api/admin/users"],queryFn:async()=>{const p=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${e}`}});if(!p.ok)throw new Error("Failed to fetch users");return p.json()}}),v=[{value:"all",label:"All Actions"},{value:"create",label:"Create"},{value:"update",label:"Update"},{value:"delete",label:"Delete"},{value:"login",label:"Login"},{value:"logout",label:"Logout"},{value:"view",label:"View"},{value:"approve",label:"Approve"},{value:"reject",label:"Reject"}],x=[{value:"all",label:"All Resources"},{value:"users",label:"Users"},{value:"offers",label:"Offers"},{value:"transactions",label:"Transactions"},{value:"settings",label:"Settings"},{value:"fraud_alerts",label:"Fraud Alerts"},{value:"postbacks",label:"Postbacks"},{value:"blacklist",label:"Blacklist"}],w=p=>{switch(p){case"create":return r.jsx(Zt,{className:"w-4 h-4"});case"update":return r.jsx(cs,{className:"w-4 h-4"});case"delete":return r.jsx(wr,{className:"w-4 h-4"});case"login":return r.jsx(Mi,{className:"w-4 h-4"});case"logout":return r.jsx($f,{className:"w-4 h-4"});case"view":return r.jsx(hr,{className:"w-4 h-4"});case"approve":return r.jsx(Mi,{className:"w-4 h-4"});case"reject":return r.jsx($f,{className:"w-4 h-4"});default:return r.jsx(ln,{className:"w-4 h-4"})}},j=p=>{switch(p){case"create":return"bg-green-100 text-green-800";case"update":return"bg-blue-100 text-blue-800";case"delete":return"bg-red-100 text-red-800";case"login":return"bg-emerald-100 text-emerald-800";case"logout":return"bg-gray-100 text-gray-800";case"view":return"bg-purple-100 text-purple-800";case"approve":return"bg-green-100 text-green-800";case"reject":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=p=>{switch(p){case"users":return r.jsx(ar,{className:"w-4 h-4"});case"offers":return r.jsx(Kt,{className:"w-4 h-4"});case"transactions":return r.jsx(Rt,{className:"w-4 h-4"});case"fraud_alerts":return r.jsx(Lt,{className:"w-4 h-4"});default:return r.jsx(ln,{className:"w-4 h-4"})}},b=()=>{const p=`data:text/csv;charset=utf-8,Timestamp,User,Action,Resource Type,Resource ID,IP Address,Description
`+h.map(C=>`${new Date(C.timestamp).toLocaleString()},${C.userName||C.userId},${C.action},${C.resourceType},${C.resourceId||""},${C.ipAddress||""},${C.description||""}`).join(`
`),N=encodeURI(p),k=document.createElement("a");k.setAttribute("href",N),k.setAttribute("download",`audit_logs_${Xt(new Date,"yyyy-MM-dd")}.csv`),document.body.appendChild(k),k.click(),document.body.removeChild(k)};return f?r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"Audit Logs"}),r.jsx("main",{className:"flex-1 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})]})]}):r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"Audit Logs"}),r.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[r.jsxs(W,{className:"mb-6",children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(ln,{className:"w-5 h-5"}),"Audit Log Filters"]})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Search"}),r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск по логам...",value:t,onChange:p=>n(p.target.value),className:"pl-10","data-testid":"input-search-logs",title:"Поиск в логах аудита"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Action"}),r.jsxs(he,{value:s,onValueChange:a,children:[r.jsx(de,{"data-testid":"select-action-filter",title:"Фильтр по действию",children:r.jsx(fe,{})}),r.jsx(ue,{children:v.map(p=>r.jsx(S,{value:p.value,children:p.label},p.value))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Resource"}),r.jsxs(he,{value:i,onValueChange:l,children:[r.jsx(de,{"data-testid":"select-resource-filter",title:"Фильтр по ресурсу",children:r.jsx(fe,{})}),r.jsx(ue,{children:x.map(p=>r.jsx(S,{value:p.value,children:p.label},p.value))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"User"}),r.jsxs(he,{value:o,onValueChange:c,children:[r.jsx(de,{"data-testid":"select-user-filter",title:"Фильтр по пользователю",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"All Users"}),m.map(p=>r.jsxs(S,{value:p.id,children:[p.username," (",p.role,")"]},p.id))]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),r.jsxs(ym,{children:[r.jsx(bm,{asChild:!0,children:r.jsxs(M,{variant:"outline",className:"w-80 justify-start text-left font-normal",children:[r.jsx(Ls,{className:"mr-2 h-4 w-4"}),d!=null&&d.from?d.to?r.jsxs(r.Fragment,{children:[Xt(d.from,"LLL dd, y")," -"," ",Xt(d.to,"LLL dd, y")]}):Xt(d.from,"LLL dd, y"):r.jsx("span",{children:"Pick a date range"})]})}),r.jsx(Eu,{className:"w-auto p-0",align:"start",children:r.jsx(uN,{initialFocus:!0,mode:"range",defaultMonth:d==null?void 0:d.from,selected:d,onSelect:u,numberOfMonths:2})})]})]}),r.jsx("div",{className:"flex-1"}),r.jsxs(M,{onClick:b,variant:"outline",className:"flex items-center gap-2",children:[r.jsx(vr,{className:"w-4 h-4"}),"Export CSV"]})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{children:["Activity Log (",h.length," entries)"]})}),r.jsxs(H,{children:[r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Timestamp"}),r.jsx(J,{children:"User"}),r.jsx(J,{children:"Action"}),r.jsx(J,{children:"Resource"}),r.jsx(J,{children:"IP Address"}),r.jsx(J,{children:"Description"})]})}),r.jsx($t,{children:h.map(p=>r.jsxs(Re,{children:[r.jsx(q,{className:"font-mono text-sm",children:Xt(new Date(p.timestamp),"MMM dd, HH:mm:ss")}),r.jsx(q,{children:r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:p.userName||"Unknown"}),r.jsx("div",{className:"text-sm text-gray-500",children:p.userRole})]})})}),r.jsx(q,{children:r.jsxs(le,{className:`flex items-center gap-1 ${j(p.action)}`,children:[w(p.action),p.action]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[g(p.resourceType),r.jsx("span",{children:p.resourceType}),p.resourceId&&r.jsxs("span",{className:"text-sm text-gray-500",children:["#",p.resourceId.slice(-8)]})]})}),r.jsx(q,{className:"font-mono text-sm",children:p.ipAddress||"N/A"}),r.jsx(q,{className:"max-w-xs truncate",children:p.description||"No description"})]},p.id))})]}),h.length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ln,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No audit logs found"}),r.jsx("p",{className:"text-gray-500",children:"No activity logs match your current filters."})]})]})]})]})]})]})}const U3e=Ke.object({name:Ke.string().min(1,"Name is required"),url:Ke.string().url("Valid URL is required"),events:Ke.array(Ke.string()).min(1,"At least one event is required"),macros:Ke.record(Ke.string()).optional(),headers:Ke.record(Ke.string()).optional(),retryAttempts:Ke.number().min(0).max(10).default(3),timeout:Ke.number().min(5).max(120).default(30),isActive:Ke.boolean().default(!0)});function B3e(){const{token:e}=Jt(),{t}=_r(),{toast:n}=lt(),s=Et(),[a,i]=y.useState("postbacks"),[l,o]=y.useState(!1);y.useState(null);const{data:c=[],isLoading:d}=$e({queryKey:["/api/admin/global-postbacks"],queryFn:async()=>{const p=await fetch("/api/admin/global-postbacks",{headers:{Authorization:`Bearer ${e}`}});if(!p.ok)throw new Error("Failed to fetch postbacks");return p.json()}}),{data:u=[],isLoading:h}=$e({queryKey:["/api/admin/postback-logs"],queryFn:async()=>{const p=await fetch("/api/admin/postback-logs",{headers:{Authorization:`Bearer ${e}`}});if(!p.ok)throw new Error("Failed to fetch postback logs");return p.json()}}),f=Ee({mutationFn:async p=>await Te("/api/admin/global-postbacks","POST",p),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/global-postbacks"]}),o(!1),x.reset(),n({title:t("success"),description:"Global postback created successfully"})},onError:p=>{n({title:t("error"),description:p.message,variant:"destructive"})}}),m=Ee({mutationFn:async({id:p,data:N})=>await Te("PATCH",`/api/admin/global-postbacks/${p}`,N),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/global-postbacks"]}),n({title:t("success"),description:"Postback updated successfully"})}}),v=Ee({mutationFn:async p=>await Te("POST",`/api/admin/global-postbacks/${p}/test`),onSuccess:()=>{n({title:t("success"),description:"Test postback sent successfully"})},onError:p=>{n({title:t("error"),description:p.message,variant:"destructive"})}}),x=Zm({resolver:Jm(U3e),defaultValues:{name:"",url:"",events:[],macros:{},headers:{},retryAttempts:3,timeout:30,isActive:!0}}),w=[{value:"conversion",label:"Conversion"},{value:"click",label:"Click"},{value:"registration",label:"Registration"},{value:"deposit",label:"Deposit"},{value:"sale",label:"Sale"},{value:"lead",label:"Lead"},{value:"install",label:"Install"}],j=p=>{switch(p){case"sent":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"retry":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},g=p=>{switch(p){case"sent":return r.jsx(nr,{className:"w-4 h-4"});case"pending":return r.jsx(lr,{className:"w-4 h-4"});case"failed":return r.jsx(zt,{className:"w-4 h-4"});case"retry":return r.jsx(xu,{className:"w-4 h-4"});default:return r.jsx(ln,{className:"w-4 h-4"})}};return d||h?r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 overflow-hidden",children:[r.jsx(gn,{title:"Postbacks Management"}),r.jsx("main",{className:"flex-1 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})]})]}):r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"Postbacks Management"}),r.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:r.jsxs(Zr,{value:a,onValueChange:i,className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Vr,{children:[r.jsxs(We,{value:"postbacks",className:"flex items-center gap-2",children:[r.jsx(nu,{className:"w-4 h-4"}),"Global Postbacks"]}),r.jsxs(We,{value:"logs",className:"flex items-center gap-2",children:[r.jsx(ln,{className:"w-4 h-4"}),"Postback Logs"]}),r.jsxs(We,{value:"settings",className:"flex items-center gap-2",children:[r.jsx(fr,{className:"w-4 h-4"}),"Settings"]})]}),a==="postbacks"&&r.jsxs(jt,{open:l,onOpenChange:o,children:[r.jsx(Xa,{asChild:!0,children:r.jsxs(M,{className:"flex items-center gap-2","data-testid":"button-create-postback",title:"Создать глобальный постбэк",children:[r.jsx(Zt,{className:"w-4 h-4"}),"Add Global Postback"]})}),r.jsxs(vt,{className:"max-w-2xl",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Create Global Postback"})}),r.jsx(Qm,{...x,children:r.jsxs("form",{onSubmit:x.handleSubmit(p=>f.mutate(p)),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(dt,{control:x.control,name:"name",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Postback Name"}),r.jsx(ft,{children:r.jsx(ne,{...p,placeholder:"e.g., Analytics Postback","data-testid":"input-postback-name"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:x.control,name:"url",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Postback URL"}),r.jsx(ft,{children:r.jsx(ne,{...p,placeholder:"https://example.com/postback","data-testid":"input-postback-url"})}),r.jsx(mt,{})]})})]}),r.jsx(dt,{control:x.control,name:"events",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Trigger Events"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(N=>r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:p.value.includes(N.value),onChange:k=>{k.target.checked?p.onChange([...p.value,N.value]):p.onChange(p.value.filter(C=>C!==N.value))},className:"rounded"}),r.jsx("span",{className:"text-sm",children:N.label})]},N.value))}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(dt,{control:x.control,name:"retryAttempts",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Retry Attempts"}),r.jsx(ft,{children:r.jsx(ne,{type:"number",...p,onChange:N=>p.onChange(parseInt(N.target.value)),"data-testid":"input-retry-attempts"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:x.control,name:"timeout",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Timeout (seconds)"}),r.jsx(ft,{children:r.jsx(ne,{type:"number",...p,onChange:N=>p.onChange(parseInt(N.target.value)),"data-testid":"input-timeout"})}),r.jsx(mt,{})]})})]}),r.jsx(dt,{control:x.control,name:"isActive",render:({field:p})=>r.jsxs(ct,{className:"flex items-center justify-between",children:[r.jsx(ut,{children:"Active"}),r.jsx(ft,{children:r.jsx(Ye,{checked:p.value,onCheckedChange:p.onChange,"data-testid":"switch-postback-active"})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),r.jsx(M,{type:"submit",disabled:f.isPending,children:f.isPending?"Creating...":"Create Postback"})]})]})})]})]})]}),r.jsxs(He,{value:"postbacks",className:"space-y-4",children:[c.map(p=>r.jsxs(W,{className:"hover:shadow-md transition-shadow",children:[r.jsx(se,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(nu,{className:"w-5 h-5"}),p.name]}),r.jsx(Je,{className:"font-mono text-sm",children:p.url})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(le,{className:p.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:p.isActive?"Active":"Inactive"}),r.jsx(M,{size:"sm",variant:"outline",onClick:()=>v.mutate(p.id),disabled:v.isPending,"data-testid":`button-test-postback-${p.id}`,title:"Тестировать постбэк",children:r.jsx(Ww,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"outline",onClick:()=>m.mutate({id:p.id,data:{isActive:!p.isActive}}),"data-testid":`button-toggle-postback-${p.id}`,title:p.isActive?"Приостановить постбэк":"Активировать постбэк",children:p.isActive?r.jsx(WA,{className:"w-4 h-4"}):r.jsx(HA,{className:"w-4 h-4"})})]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Events"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:p.events&&Array.isArray(p.events)?p.events.map(N=>r.jsx(le,{variant:"outline",className:"text-xs",children:N},N)):r.jsx(le,{variant:"outline",className:"text-xs",children:"No events"})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Settings"}),r.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsxs("div",{children:["Retry: ",p.retryAttempts," times"]}),r.jsxs("div",{children:["Timeout: ",p.timeout,"s"]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Last Updated"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:new Date(p.updatedAt).toLocaleString()})]})]})})]},p.id)),c.length===0&&r.jsx(W,{children:r.jsxs(H,{className:"text-center py-8",children:[r.jsx(nu,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No global postbacks configured"}),r.jsx("p",{className:"text-gray-500",children:"Create your first global postback to start receiving webhook notifications."})]})})]}),r.jsx(He,{value:"logs",className:"space-y-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Recent Postback Activity"})}),r.jsxs(H,{children:[r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Timestamp"}),r.jsx(J,{children:"Postback"}),r.jsx(J,{children:"URL"}),r.jsx(J,{children:"Status"}),r.jsx(J,{children:"HTTP Code"}),r.jsx(J,{children:"Attempts"})]})}),r.jsx($t,{children:u.map(p=>r.jsxs(Re,{children:[r.jsx(q,{className:"font-mono text-sm",children:new Date(p.timestamp).toLocaleString()}),r.jsx(q,{children:p.postbackName||"Unknown"}),r.jsx(q,{className:"font-mono text-sm max-w-xs truncate",children:p.url}),r.jsx(q,{children:r.jsxs(le,{className:`flex items-center gap-1 ${j(p.status)}`,children:[g(p.status),p.status]})}),r.jsx(q,{children:r.jsx("span",{className:`font-mono ${p.httpCode>=400?"text-red-600":"text-green-600"}`,children:p.httpCode||"N/A"})}),r.jsx(q,{children:p.attempt||1})]},p.id))})]}),u.length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ln,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No postback logs"}),r.jsx("p",{className:"text-gray-500",children:"Postback activity will appear here once events start triggering."})]})]})]})}),r.jsx(He,{value:"settings",className:"space-y-4",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"w-5 h-5"}),"Global Postback Settings"]}),r.jsx(Je,{children:"Configure global settings for all postbacks"})]}),r.jsxs(H,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Default Settings"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Default Retry Attempts"}),r.jsx(ne,{type:"number",className:"w-20",defaultValue:"3"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Default Timeout (seconds)"}),r.jsx(ne,{type:"number",className:"w-20",defaultValue:"30"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Enable Logging"}),r.jsx(Ye,{defaultChecked:!0})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Security"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Require HTTPS"}),r.jsx(Ye,{defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Verify SSL Certificates"}),r.jsx(Ye,{defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Rate Limiting"}),r.jsx(Ye,{defaultChecked:!0})]})]})]})]}),r.jsx("div",{className:"pt-4 border-t",children:r.jsxs(M,{className:"flex items-center gap-2",title:"Сохранить настройки",children:[r.jsx(fr,{className:"w-4 h-4"}),"Save Settings"]})})]})]})})]})})]})]})}const z3e=Ke.object({type:Ke.enum(["ip","clickid","subid","device_id","user_agent","domain"]),value:Ke.string().min(1,"Value is required"),reason:Ke.string().optional(),expiresAt:Ke.date().optional()});function V3e(){const{token:e}=Jt(),{t}=_r(),{toast:n}=lt(),s=Et(),[a,i]=y.useState(""),[l,o]=y.useState("all"),[c,d]=y.useState(!1),{data:u=[],isLoading:h}=$e({queryKey:["/api/admin/blacklist",a,l],queryFn:async()=>{const p=new URLSearchParams;a&&p.append("search",a),l!=="all"&&p.append("type",l);const N=await fetch(`/api/admin/blacklist?${p.toString()}`,{headers:{Authorization:`Bearer ${e}`}});if(!N.ok)throw new Error("Failed to fetch blacklist");return N.json()}}),f=Ee({mutationFn:async p=>await Te("/api/admin/blacklist","POST",p),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/blacklist"]}),d(!1),x.reset(),n({title:t("success"),description:"Blacklist entry added successfully"})},onError:p=>{n({title:t("error"),description:p.message,variant:"destructive"})}}),m=Ee({mutationFn:async p=>await Te(`/api/admin/blacklist/${p}`,"DELETE"),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/blacklist"]}),n({title:t("success"),description:"Blacklist entry removed successfully"})}}),v=Ee({mutationFn:async({id:p,isActive:N})=>await Te(`/api/admin/blacklist/${p}`,"PATCH",{isActive:N}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/blacklist"]}),n({title:t("success"),description:"Blacklist entry updated successfully"})}}),x=Zm({resolver:Jm(z3e),defaultValues:{type:"ip",value:"",reason:""}}),w=[{value:"all",label:"All Types",icon:r.jsx(Lt,{className:"w-4 h-4"})},{value:"ip",label:"IP Address",icon:r.jsx(dr,{className:"w-4 h-4"})},{value:"clickid",label:"Click ID",icon:r.jsx(Jc,{className:"w-4 h-4"})},{value:"subid",label:"Sub ID",icon:r.jsx(Ro,{className:"w-4 h-4"})},{value:"device_id",label:"Device ID",icon:r.jsx(Di,{className:"w-4 h-4"})},{value:"user_agent",label:"User Agent",icon:r.jsx(dr,{className:"w-4 h-4"})},{value:"domain",label:"Domain",icon:r.jsx(dr,{className:"w-4 h-4"})}],j=p=>{const N=w.find(k=>k.value===p);return(N==null?void 0:N.icon)||r.jsx(Lt,{className:"w-4 h-4"})},g=p=>{switch(p){case"ip":return"bg-red-100 text-red-800";case"clickid":return"bg-orange-100 text-orange-800";case"subid":return"bg-yellow-100 text-yellow-800";case"device_id":return"bg-blue-100 text-blue-800";case"user_agent":return"bg-purple-100 text-purple-800";case"domain":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},b=p=>p&&new Date(p)<new Date;return h?r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"Blacklist Management"}),r.jsx("main",{className:"flex-1 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})]})]}):r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"Blacklist Management"}),r.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[r.jsxs(W,{className:"mb-6",children:[r.jsx(se,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Lt,{className:"w-5 h-5"}),"Fraud Prevention Blacklist"]}),r.jsx(Je,{children:"Manage blocked IPs, click IDs, and other fraud indicators"})]}),r.jsxs(jt,{open:c,onOpenChange:d,children:[r.jsx(Xa,{asChild:!0,children:r.jsxs(M,{className:"flex items-center gap-2","data-testid":"button-add-blacklist",children:[r.jsx(Zt,{className:"w-4 h-4"}),"Add to Blacklist"]})}),r.jsxs(vt,{className:"max-w-md",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Add Blacklist Entry"})}),r.jsx(Qm,{...x,children:r.jsxs("form",{onSubmit:x.handleSubmit(p=>f.mutate(p)),className:"space-y-4",children:[r.jsx(dt,{control:x.control,name:"type",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Entry Type"}),r.jsxs(he,{onValueChange:p.onChange,defaultValue:p.value,children:[r.jsx(ft,{children:r.jsx(de,{"data-testid":"select-blacklist-type",children:r.jsx(fe,{placeholder:"Select type"})})}),r.jsx(ue,{children:w.slice(1).map(N=>r.jsx(S,{value:N.value,children:r.jsxs("div",{className:"flex items-center gap-2",children:[N.icon,N.label]})},N.value))})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:x.control,name:"value",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Value"}),r.jsx(ft,{children:r.jsx(ne,{...p,placeholder:"e.g., 192.168.1.1 or click_id_123","data-testid":"input-blacklist-value"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:x.control,name:"reason",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Reason (Optional)"}),r.jsx(ft,{children:r.jsx(pt,{...p,placeholder:"Why is this being blacklisted?","data-testid":"input-blacklist-reason"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:x.control,name:"expiresAt",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Expiration Date (Optional)"}),r.jsxs(ym,{children:[r.jsx(bm,{asChild:!0,children:r.jsx(ft,{children:r.jsxs(M,{variant:"outline",className:"w-full pl-3 text-left font-normal","data-testid":"button-select-expiry",children:[p.value?Xt(p.value,"PPP"):r.jsx("span",{children:"No expiration"}),r.jsx(Ls,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),r.jsx(Eu,{className:"w-auto p-0",align:"start",children:r.jsx(uN,{mode:"single",selected:p.value,onSelect:p.onChange,disabled:N=>N<new Date,initialFocus:!0})})]}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),r.jsx(M,{type:"submit",disabled:f.isPending,children:f.isPending?"Adding...":"Add Entry"})]})]})})]})]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск по IP, доменам, ID...",value:a,onChange:p=>i(p.target.value),className:"pl-10","data-testid":"input-search-blacklist",title:"Поиск в черном списке"})]}),r.jsxs(he,{value:l,onValueChange:o,children:[r.jsx(de,{className:"w-48","data-testid":"select-type-filter",title:"Фильтр по типу записи",children:r.jsx(fe,{})}),r.jsx(ue,{children:w.map(p=>r.jsx(S,{value:p.value,children:r.jsxs("div",{className:"flex items-center gap-2",children:[p.icon,p.label]})},p.value))})]})]})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{children:["Blocked Entries (",u.length,")"]})}),r.jsxs(H,{children:[r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Type"}),r.jsx(J,{children:"Value"}),r.jsx(J,{children:"Reason"}),r.jsx(J,{children:"Status"}),r.jsx(J,{children:"Added"}),r.jsx(J,{children:"Expires"}),r.jsx(J,{children:"Actions"})]})}),r.jsx($t,{children:u.map(p=>r.jsxs(Re,{children:[r.jsx(q,{children:r.jsxs(le,{className:`flex items-center gap-1 ${g(p.type)}`,children:[j(p.type),p.type]})}),r.jsx(q,{className:"font-mono text-sm max-w-xs truncate",children:p.value}),r.jsx(q,{className:"max-w-xs truncate",children:p.reason||"No reason provided"}),r.jsx(q,{children:r.jsx("div",{className:"flex items-center gap-2",children:p.isActive&&!b(p.expiresAt)?r.jsxs(le,{className:"bg-red-100 text-red-800 flex items-center gap-1",children:[r.jsx(qa,{className:"w-3 h-3"}),"Active"]}):b(p.expiresAt)?r.jsxs(le,{className:"bg-gray-100 text-gray-800 flex items-center gap-1",children:[r.jsx(lr,{className:"w-3 h-3"}),"Expired"]}):r.jsxs(le,{className:"bg-green-100 text-green-800 flex items-center gap-1",children:[r.jsx(nr,{className:"w-3 h-3"}),"Inactive"]})})}),r.jsx(q,{className:"text-sm text-gray-500",children:Xt(new Date(p.createdAt),"MMM dd, yyyy")}),r.jsx(q,{className:"text-sm text-gray-500",children:p.expiresAt?Xt(new Date(p.expiresAt),"MMM dd, yyyy"):"Never"}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(M,{size:"sm",variant:"outline",onClick:()=>v.mutate({id:p.id,isActive:!p.isActive}),disabled:b(p.expiresAt),"data-testid":`button-toggle-${p.id}`,children:p.isActive?"Disable":"Enable"}),r.jsx(M,{size:"sm",variant:"outline",onClick:()=>m.mutate(p.id),"data-testid":`button-delete-${p.id}`,children:r.jsx(wr,{className:"w-4 h-4"})})]})})]},p.id))})]}),u.length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Lt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No blacklist entries"}),r.jsx("p",{className:"text-gray-500",children:l==="all"?"No entries have been added to the blacklist yet.":`No ${l} entries found in the blacklist.`})]})]})]})]})]})]})}const q3e=[{key:"timestamp",label:"Время",visible:!0,sortable:!0,type:"date",width:140},{key:"ip",label:"IP",visible:!0,sortable:!0,type:"text",width:120},{key:"geo",label:"GEO",visible:!0,sortable:!0,type:"text",width:80},{key:"offerName",label:"Оффер",visible:!0,sortable:!0,type:"text",width:150},{key:"partnerName",label:"Партнер",visible:!0,sortable:!0,type:"text",width:120},{key:"subId1",label:"Sub ID 1",visible:!0,sortable:!0,type:"text",width:100},{key:"subId2",label:"Sub ID 2",visible:!1,sortable:!0,type:"text",width:100},{key:"subId3",label:"Sub ID 3",visible:!1,sortable:!0,type:"text",width:100},{key:"clickId",label:"Click ID",visible:!0,sortable:!0,type:"text",width:120},{key:"traffic_source",label:"Источник",visible:!0,sortable:!0,type:"text",width:120},{key:"campaign",label:"Кампания",visible:!0,sortable:!0,type:"text",width:120},{key:"browser",label:"Браузер",visible:!1,sortable:!0,type:"text",width:100},{key:"device",label:"Устройство",visible:!1,sortable:!0,type:"text",width:100},{key:"os",label:"ОС",visible:!1,sortable:!0,type:"text",width:80},{key:"clicks",label:"Клики",visible:!0,sortable:!0,type:"number",width:80},{key:"uniqueClicks",label:"Уники",visible:!0,sortable:!0,type:"number",width:80},{key:"leads",label:"Лиды",visible:!0,sortable:!0,type:"number",width:80},{key:"conversions",label:"Конверсии",visible:!0,sortable:!0,type:"number",width:100},{key:"revenue",label:"Доход",visible:!0,sortable:!0,type:"currency",width:100},{key:"payout",label:"Выплата",visible:!0,sortable:!0,type:"currency",width:100},{key:"profit",label:"Прибыль",visible:!0,sortable:!0,type:"currency",width:100},{key:"roi",label:"ROI %",visible:!0,sortable:!0,type:"percentage",width:80},{key:"cr",label:"CR %",visible:!0,sortable:!0,type:"percentage",width:80},{key:"epc",label:"EPC $",visible:!0,sortable:!0,type:"currency",width:80},{key:"isBot",label:"Бот",visible:!0,sortable:!0,type:"boolean",width:60},{key:"isFraud",label:"Фрод",visible:!0,sortable:!0,type:"boolean",width:60},{key:"vpnDetected",label:"VPN",visible:!1,sortable:!0,type:"boolean",width:60},{key:"riskScore",label:"Риск",visible:!0,sortable:!0,type:"number",width:80},{key:"postbackReceived",label:"Постбек",visible:!1,sortable:!0,type:"boolean",width:80},{key:"integrationSource",label:"Интеграция",visible:!1,sortable:!0,type:"text",width:100}];function W3e(){const{token:e}=Jt();_r();const{toast:t}=lt(),[n,s]=y.useState("table"),[a,i]=y.useState(""),[l,o]=y.useState(Xt(hl(new Date,7),"yyyy-MM-dd")),[c,d]=y.useState(Xt(new Date,"yyyy-MM-dd")),[u,h]=y.useState("all"),[f,m]=y.useState(q3e),[v,x]=y.useState(null),[w,j]=y.useState(1),[g,b]=y.useState(50),[p,N]=y.useState({}),k=[{value:"all",label:"Все данные"},{value:"today",label:"Сегодня"},{value:"yesterday",label:"Вчера"},{value:"7days",label:"7 дней"},{value:"30days",label:"30 дней"},{value:"bots",label:"Только боты"},{value:"fraud",label:"Только фрод"},{value:"conversions",label:"С конверсиями"},{value:"highRoi",label:"Высокий ROI"},{value:"lowRoi",label:"Низкий ROI"}],{data:C=[],isLoading:_}=$e({queryKey:["/api/admin/analytics",{search:a,dateFrom:l,dateTo:c,quickFilter:u,filters:p,page:w,limit:g,sort:v}],queryFn:async()=>{const z=new URLSearchParams;a&&z.append("search",a),l&&z.append("dateFrom",l),c&&z.append("dateTo",c),u&&u!=="all"&&z.append("quickFilter",u),z.append("page",w.toString()),z.append("limit",g.toString()),Object.entries(p).forEach(([R,I])=>{I&&z.append(`filter_${R}`,I)}),v&&(z.append("sortBy",v.key),z.append("sortOrder",v.direction));const F=await fetch(`/api/admin/analytics?${z}`,{headers:{Authorization:`Bearer ${e}`}});if(!F.ok)throw new Error("Ошибка загрузки аналитики");return F.json()},refetchInterval:3e4}),P=y.useCallback(z=>{m(F=>F.map(R=>R.key===z?{...R,visible:!R.visible}:R))},[]),D=y.useCallback(z=>{x(F=>(F==null?void 0:F.key)===z?F.direction==="asc"?{key:z,direction:"desc"}:null:{key:z,direction:"asc"})},[]),E=y.useCallback(z=>{h(z);const F=new Date;switch(z){case"today":o(Xt(F,"yyyy-MM-dd")),d(Xt(F,"yyyy-MM-dd"));break;case"yesterday":const R=hl(F,1);o(Xt(R,"yyyy-MM-dd")),d(Xt(R,"yyyy-MM-dd"));break;case"7days":o(Xt(hl(F,7),"yyyy-MM-dd")),d(Xt(F,"yyyy-MM-dd"));break;case"30days":o(Xt(hl(F,30),"yyyy-MM-dd")),d(Xt(F,"yyyy-MM-dd"));break;case"bots":N(I=>({...I,isBot:"true"}));break;case"fraud":N(I=>({...I,isFraud:"true"}));break;case"conversions":N(I=>({...I,hasConversions:"true"}));break;case"highRoi":N(I=>({...I,minRoi:"100"}));break;case"lowRoi":N(I=>({...I,maxRoi:"0"}));break;default:N({})}j(1)},[]),$=y.useCallback(async z=>{try{const F=new URLSearchParams;F.append("format",z),F.append("search",a),F.append("dateFrom",l),F.append("dateTo",c),F.append("quickFilter",u);const R=await fetch(`/api/admin/analytics/export?${F}`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({columns:f.filter(K=>K.visible).map(K=>K.key)})});if(!R.ok)throw new Error("Export failed");const I=await R.blob(),Q=window.URL.createObjectURL(I),Y=document.createElement("a");Y.href=Q,Y.download=`analytics_${z}_${new Date().toISOString().split("T")[0]}.${z}`,document.body.appendChild(Y),Y.click(),window.URL.revokeObjectURL(Q),document.body.removeChild(Y),t({title:"Экспорт завершен",description:`Данные экспортированы в формате ${z.toUpperCase()}`})}catch{t({title:"Ошибка экспорта",description:"Не удалось экспортировать данные",variant:"destructive"})}},[a,l,c,u,f,e,t]),A=y.useCallback(()=>{i(""),N({}),h("all"),x(null),j(1),o(Xt(hl(new Date,7),"yyyy-MM-dd")),d(Xt(new Date,"yyyy-MM-dd"))},[]),T=y.useCallback((z,F)=>{if(z==null)return"-";switch(F){case"currency":return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(Number(z));case"percentage":return`${Number(z).toFixed(2)}%`;case"number":return Number(z).toLocaleString("ru-RU");case"boolean":return z?"✓":"✗";case"date":return Xt(new Date(z),"dd.MM.yyyy HH:mm");default:return String(z)}},[]),O=y.useMemo(()=>f.filter(z=>z.visible),[f]);return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 p-6",children:r.jsxs("div",{className:"max-w-full mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Аналитика и Статистика"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Полный анализ эффективности офферов, источников и партнеров"})]}),r.jsxs(Zr,{value:n,onValueChange:s,className:"w-full",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-3 lg:w-[400px]",children:[r.jsxs(We,{value:"table",className:"flex items-center gap-2",children:[r.jsx(cr,{className:"h-4 w-4"}),"Таблица"]}),r.jsx(We,{value:"charts",children:"Графики"}),r.jsx(We,{value:"reports",children:"Отчеты"})]}),r.jsx(He,{value:"table",className:"mt-6",children:r.jsxs(W,{children:[r.jsxs(se,{className:"pb-4",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[r.jsx(ae,{className:"text-xl",children:"Детальная Аналитика"}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-center w-full lg:w-auto",children:[r.jsxs("div",{className:"relative min-w-[300px]",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ne,{placeholder:"Поиск по IP, SubID, ClickID, GEO...",value:a,onChange:z=>i(z.target.value),className:"pl-10","data-testid":"input-analytics-search"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ne,{type:"date",value:l,onChange:z=>o(z.target.value),className:"w-[140px]","data-testid":"input-date-from"}),r.jsx(ne,{type:"date",value:c,onChange:z=>d(z.target.value),className:"w-[140px]","data-testid":"input-date-to"})]}),r.jsxs(he,{value:u,onValueChange:E,children:[r.jsx(de,{className:"w-[160px]","data-testid":"select-quick-filter",children:r.jsx(fe,{placeholder:"Быстрые фильтры"})}),r.jsx(ue,{children:k.map(z=>r.jsx(S,{value:z.value,children:z.label},z.value))})]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between pt-4 border-t",children:[r.jsxs("div",{className:"flex gap-3 items-center",children:[r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsxs(M,{variant:"outline",size:"sm","data-testid":"button-columns",children:[r.jsx(fr,{className:"h-4 w-4 mr-2"}),"Столбцы (",O.length,")"]})}),r.jsx(Ps,{className:"w-56 max-h-[400px] overflow-y-auto",children:f.map(z=>r.jsx(EB,{checked:z.visible,onCheckedChange:()=>P(z.key),children:z.label},z.key))})]}),r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsxs(M,{variant:"outline",size:"sm","data-testid":"button-export",children:[r.jsx(vr,{className:"h-4 w-4 mr-2"}),"Экспорт"]})}),r.jsxs(Ps,{children:[r.jsxs(Ft,{onClick:()=>$("csv"),children:[r.jsx(BR,{className:"h-4 w-4 mr-2"}),"CSV"]}),r.jsxs(Ft,{onClick:()=>$("xlsx"),children:[r.jsx(BR,{className:"h-4 w-4 mr-2"}),"Excel (XLSX)"]}),r.jsxs(Ft,{onClick:()=>$("json"),children:[r.jsx(zre,{className:"h-4 w-4 mr-2"}),"JSON"]})]})]}),r.jsxs(M,{variant:"outline",size:"sm",onClick:A,"data-testid":"button-reset",children:[r.jsx(xu,{className:"h-4 w-4 mr-2"}),"Сброс"]})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Всего записей: ",C.length]})]})]}),r.jsxs(H,{className:"p-0",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{className:"min-w-full",children:[r.jsx(Mt,{children:r.jsx(Re,{className:"bg-gray-50 dark:bg-gray-800",children:O.map(z=>r.jsx(J,{className:`text-left font-medium text-gray-900 dark:text-gray-100 ${z.sortable?"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700":""}`,style:{width:z.width},onClick:()=>z.sortable&&D(z.key),"data-testid":`header-${z.key}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[z.label,(v==null?void 0:v.key)===z.key&&(v.direction==="asc"?r.jsx(Cr,{className:"h-4 w-4"}):r.jsx(KA,{className:"h-4 w-4"}))]})},z.key))})}),r.jsx($t,{children:_?r.jsx(Re,{children:r.jsx(q,{colSpan:O.length,className:"text-center py-8 text-gray-500",children:"Загрузка данных..."})}):C.length===0?r.jsx(Re,{children:r.jsx(q,{colSpan:O.length,className:"text-center py-8 text-gray-500",children:"Нет данных для отображения"})}):C.map(z=>r.jsx(Re,{className:"hover:bg-gray-50 dark:hover:bg-gray-800","data-testid":`row-analytics-${z.id}`,children:O.map(F=>r.jsxs(q,{className:"py-2 px-4 text-sm","data-testid":`cell-${F.key}-${z.id}`,children:[F.key==="geo"&&r.jsx(le,{variant:"outline",className:"font-mono",children:z[F.key]}),F.key==="isBot"&&z.isBot&&r.jsx(le,{variant:"destructive",children:"БОТ"}),F.key==="isFraud"&&z.isFraud&&r.jsx(le,{variant:"destructive",children:"ФРОД"}),F.key==="riskScore"&&r.jsx(le,{variant:z.riskScore>70?"destructive":z.riskScore>40?"secondary":"default",children:z.riskScore}),!["geo","isBot","isFraud","riskScore"].includes(F.key)&&T(z[F.key],F.type)]},`${z.id}-${F.key}`))},z.id))})]})}),r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Показано:"}),r.jsxs(he,{value:g.toString(),onValueChange:z=>b(Number(z)),children:[r.jsx(de,{className:"w-[100px]",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"25",children:"25"}),r.jsx(S,{value:"50",children:"50"}),r.jsx(S,{value:"100",children:"100"}),r.jsx(S,{value:"500",children:"500"})]})]}),r.jsx("span",{className:"text-sm text-gray-500",children:"записей"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(M,{variant:"outline",size:"sm",onClick:()=>j(z=>Math.max(1,z-1)),disabled:w===1,"data-testid":"button-prev-page",children:r.jsx(Ri,{className:"h-4 w-4"})}),r.jsxs("span",{className:"text-sm",children:["Страница ",w]}),r.jsx(M,{variant:"outline",size:"sm",onClick:()=>j(z=>z+1),disabled:C.length<g,"data-testid":"button-next-page",children:r.jsx(Qc,{className:"h-4 w-4"})})]})]})]})]})}),r.jsx(He,{value:"charts",className:"mt-6",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Графики и Визуализации"})}),r.jsx(H,{children:r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Раздел графиков в разработке"})})]})}),r.jsx(He,{value:"reports",className:"mt-6",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Отчеты и Аналитика"})}),r.jsx(H,{children:r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Раздел отчетов в разработке"})})]})})]})]})})}const ZI=[{key:"timestamp",label:"Дата и время",visible:!0,sortable:!0,type:"datetime",width:180},{key:"campaign",label:"Кампания",visible:!0,sortable:!0,type:"text",width:120},{key:"subid",label:"Subid",visible:!0,sortable:!0,type:"text",width:100},{key:"ip",label:"IP",visible:!0,sortable:!0,type:"text",width:120},{key:"offer",label:"Оффер",visible:!0,sortable:!0,type:"text",width:150},{key:"countryFlag",label:"Флаг страны",visible:!0,sortable:!0,type:"text",width:80},{key:"country",label:"Страна",visible:!0,sortable:!0,type:"text",width:100},{key:"region",label:"Регион",visible:!1,sortable:!0,type:"text",width:100},{key:"city",label:"Город",visible:!1,sortable:!0,type:"text",width:100},{key:"osLogo",label:"Логотип ОС",visible:!1,sortable:!0,type:"text",width:80},{key:"connectionType",label:"Тип соединения",visible:!1,sortable:!0,type:"text",width:120},{key:"deviceType",label:"Тип устройства",visible:!0,sortable:!0,type:"text",width:100},{key:"isBot",label:"Бот",visible:!0,sortable:!0,type:"boolean",width:60},{key:"uniqueForCampaign",label:"Уникальный для кампании",visible:!0,sortable:!0,type:"boolean",width:150},{key:"lead",label:"Лид",visible:!0,sortable:!0,type:"boolean",width:60},{key:"sale",label:"Продажа",visible:!0,sortable:!0,type:"boolean",width:80},{key:"revenue",label:"Доход",visible:!0,sortable:!0,type:"currency",width:100},{key:"subId1",label:"Sub ID 1",visible:!0,sortable:!0,type:"text",width:100},{key:"subId2",label:"Sub ID 2",visible:!0,sortable:!0,type:"text",width:100},{key:"subId3",label:"Sub ID 3",visible:!0,sortable:!0,type:"text",width:100},{key:"subId4",label:"Sub ID 4",visible:!0,sortable:!0,type:"text",width:100},{key:"subId5",label:"Sub ID 5",visible:!0,sortable:!0,type:"text",width:100},{key:"subId6",label:"Sub ID 6",visible:!0,sortable:!0,type:"text",width:100},{key:"subId7",label:"Sub ID 7",visible:!0,sortable:!0,type:"text",width:100},{key:"subId8",label:"Sub ID 8",visible:!0,sortable:!0,type:"text",width:100},{key:"subId9",label:"Sub ID 9",visible:!0,sortable:!0,type:"text",width:100},{key:"subId10",label:"Sub ID 10",visible:!0,sortable:!0,type:"text",width:100},{key:"subId11",label:"Sub ID 11",visible:!0,sortable:!0,type:"text",width:100},{key:"subId12",label:"Sub ID 12",visible:!0,sortable:!0,type:"text",width:100},{key:"subId13",label:"Sub ID 13",visible:!0,sortable:!0,type:"text",width:100},{key:"subId14",label:"Sub ID 14",visible:!0,sortable:!0,type:"text",width:100},{key:"subId15",label:"Sub ID 15",visible:!0,sortable:!0,type:"text",width:100},{key:"subId16",label:"Sub ID 16",visible:!0,sortable:!0,type:"text",width:100},{key:"subId17",label:"Sub ID 17",visible:!0,sortable:!0,type:"text",width:100},{key:"subId18",label:"Sub ID 18",visible:!0,sortable:!0,type:"text",width:100},{key:"subId19",label:"Sub ID 19",visible:!0,sortable:!0,type:"text",width:100},{key:"subId20",label:"Sub ID 20",visible:!0,sortable:!0,type:"text",width:100},{key:"subId21",label:"Sub ID 21",visible:!1,sortable:!0,type:"text",width:100},{key:"subId22",label:"Sub ID 22",visible:!1,sortable:!0,type:"text",width:100},{key:"subId23",label:"Sub ID 23",visible:!1,sortable:!0,type:"text",width:100},{key:"subId24",label:"Sub ID 24",visible:!1,sortable:!0,type:"text",width:100},{key:"subId25",label:"Sub ID 25",visible:!1,sortable:!0,type:"text",width:100},{key:"subId26",label:"Sub ID 26",visible:!1,sortable:!0,type:"text",width:100},{key:"subId27",label:"Sub ID 27",visible:!1,sortable:!0,type:"text",width:100},{key:"subId28",label:"Sub ID 28",visible:!1,sortable:!0,type:"text",width:100},{key:"subId29",label:"Sub ID 29",visible:!1,sortable:!0,type:"text",width:100},{key:"subId30",label:"Sub ID 30",visible:!1,sortable:!0,type:"text",width:100},{key:"campaignGroup",label:"Группа кампании",visible:!1,sortable:!0,type:"text",width:120},{key:"landingGroup",label:"Группа лендинга",visible:!1,sortable:!0,type:"text",width:120},{key:"offerGroup",label:"Группа оффера",visible:!1,sortable:!0,type:"text",width:120},{key:"landing",label:"Лендинг",visible:!1,sortable:!0,type:"text",width:120},{key:"partnerNetwork",label:"Партнерская сеть",visible:!1,sortable:!0,type:"text",width:120},{key:"source",label:"Источник",visible:!0,sortable:!0,type:"text",width:120},{key:"stream",label:"Поток",visible:!1,sortable:!0,type:"text",width:100},{key:"site",label:"Сайт",visible:!1,sortable:!0,type:"text",width:120},{key:"xRequestedWith",label:"X-Requested-With",visible:!1,sortable:!0,type:"text",width:150},{key:"referrer",label:"Реферер",visible:!1,sortable:!0,type:"text",width:150},{key:"searchEngine",label:"Поисковик",visible:!1,sortable:!0,type:"text",width:100},{key:"keyword",label:"Ключевик",visible:!1,sortable:!0,type:"text",width:120},{key:"clickId",label:"Click ID",visible:!0,sortable:!0,type:"text",width:120},{key:"visitorCode",label:"Visitor code",visible:!1,sortable:!0,type:"text",width:120},{key:"campaignId",label:"ID кампании",visible:!1,sortable:!0,type:"text",width:120},{key:"campaignGroupId",label:"ID группы кампании",visible:!1,sortable:!0,type:"text",width:150},{key:"offerGroupId",label:"ID группы оффера",visible:!1,sortable:!0,type:"text",width:140},{key:"landingGroupId",label:"ID группы лендинга",visible:!1,sortable:!0,type:"text",width:150},{key:"landingId",label:"ID лендинга",visible:!1,sortable:!0,type:"text",width:120},{key:"offerId",label:"ID оффера",visible:!1,sortable:!0,type:"text",width:120},{key:"networkId",label:"ID рекламной сети",visible:!1,sortable:!0,type:"text",width:140},{key:"sourceId",label:"ID источника",visible:!1,sortable:!0,type:"text",width:120},{key:"streamId",label:"ID потока",visible:!1,sortable:!0,type:"text",width:120},{key:"adCampaignId",label:"Ad Campaign ID",visible:!1,sortable:!0,type:"text",width:140},{key:"externalId",label:"External ID",visible:!1,sortable:!0,type:"text",width:120},{key:"creativeId",label:"Creative ID",visible:!1,sortable:!0,type:"text",width:120},{key:"operator",label:"Оператор",visible:!1,sortable:!0,type:"text",width:100},{key:"provider",label:"Провайдер",visible:!1,sortable:!0,type:"text",width:100},{key:"language",label:"Язык",visible:!1,sortable:!0,type:"text",width:80},{key:"userAgent",label:"User Agent",visible:!1,sortable:!0,type:"text",width:200},{key:"os",label:"Операционная система",visible:!1,sortable:!0,type:"text",width:150},{key:"osVersion",label:"Версия ОС",visible:!1,sortable:!0,type:"text",width:100},{key:"browser",label:"Браузер",visible:!1,sortable:!0,type:"text",width:100},{key:"browserVersion",label:"Версия браузера",visible:!1,sortable:!0,type:"text",width:120},{key:"deviceModel",label:"Модель устройства",visible:!1,sortable:!0,type:"text",width:150},{key:"browserLogo",label:"Логотип браузера",visible:!1,sortable:!0,type:"text",width:120},{key:"ipMasked12",label:"IP 1.2..",visible:!1,sortable:!0,type:"text",width:100},{key:"ipMasked123",label:"IP 1.2.3.*",visible:!1,sortable:!0,type:"text",width:120},{key:"cost",label:"Расход",visible:!1,sortable:!0,type:"currency",width:100},{key:"year",label:"Год",visible:!1,sortable:!0,type:"number",width:80},{key:"month",label:"Месяц",visible:!1,sortable:!0,type:"number",width:80},{key:"week",label:"Неделя",visible:!1,sortable:!0,type:"number",width:80},{key:"dayOfWeek",label:"День недели",visible:!1,sortable:!0,type:"number",width:100},{key:"day",label:"День",visible:!1,sortable:!0,type:"number",width:80},{key:"hour",label:"Час",visible:!1,sortable:!0,type:"number",width:80},{key:"dayAndHour",label:"День и час",visible:!1,sortable:!0,type:"text",width:100},{key:"timeLeftLanding",label:"Время ухода с лендинга",visible:!1,sortable:!0,type:"datetime",width:180},{key:"direction",label:"Направление",visible:!1,sortable:!0,type:"text",width:100},{key:"uniqueForStream",label:"Уникальный для потока",visible:!1,sortable:!0,type:"boolean",width:150},{key:"uniqueGlobally",label:"Уникальный глобально",visible:!1,sortable:!0,type:"boolean",width:150},{key:"emptyReferrer",label:"Пустой реферер",visible:!1,sortable:!0,type:"boolean",width:120},{key:"usingProxy",label:"Используя прокси",visible:!1,sortable:!0,type:"boolean",width:120},{key:"clickOnLanding",label:"Клик на лендинге",visible:!1,sortable:!0,type:"boolean",width:130},{key:"deposit",label:"Депозиты",visible:!0,sortable:!0,type:"boolean",width:80},{key:"registration",label:"Регистрация",visible:!0,sortable:!0,type:"boolean",width:100},{key:"revenueDeposit",label:"Доход (депозит)",visible:!1,sortable:!0,type:"currency",width:120},{key:"revenueRegistration",label:"Доход (регистрация)",visible:!1,sortable:!0,type:"currency",width:140},{key:"rejected",label:"Отклонен",visible:!1,sortable:!0,type:"boolean",width:80},{key:"previousCampaignId",label:"ID предыдущей кампании",visible:!1,sortable:!0,type:"text",width:160},{key:"parentClickSubid",label:"Subid родит. кликов",visible:!1,sortable:!0,type:"text",width:140},{key:"previousCampaign",label:"Предыдущая кампания",visible:!1,sortable:!0,type:"text",width:140},{key:"profitability",label:"Прибыльность",visible:!0,sortable:!0,type:"percentage",width:100},{key:"profit",label:"Прибыль",visible:!0,sortable:!0,type:"currency",width:100},{key:"revenueExpected",label:"Доход (ожидаемый)",visible:!1,sortable:!0,type:"currency",width:140},{key:"revenueConfirmed",label:"Доход (подтвержденный)",visible:!1,sortable:!0,type:"currency",width:160},{key:"revenueRejected",label:"Доход (отклоненный)",visible:!1,sortable:!0,type:"currency",width:150},{key:"upsells",label:"Допродажи",visible:!1,sortable:!0,type:"number",width:100},{key:"timeOnLanding",label:"Время, проведенное на лендинге",visible:!1,sortable:!0,type:"number",width:200}];function H3e(){const{token:e}=Jt();_r();const{toast:t}=lt(),{isCollapsed:n}=Os(),s=Et(),a=ZI.filter((me,Be,qe)=>Be===qe.findIndex(Qe=>Qe.key===me.key));y.useState("table");const[i,l]=y.useState(""),[o,c]=y.useState(Xt(hl(new Date,7),"yyyy-MM-dd")),[d,u]=y.useState(Xt(new Date,"yyyy-MM-dd")),[h,f]=y.useState("all"),[m,v]=y.useState(a),[x,w]=y.useState(null),[j,g]=y.useState(1),[b,p]=y.useState(10),[N,k]=y.useState(!1),[C,_]=y.useState(1),[P,D]=y.useState(0),[E,$]=y.useState(null),[A,T]=y.useState(null),O=y.useRef(0),z=[{value:"all",label:"Все данные"},{value:"today",label:"Сегодня"},{value:"yesterday",label:"Вчера"},{value:"7days",label:"7 дней"},{value:"30days",label:"30 дней"},{value:"bots",label:"Только боты"},{value:"fraud",label:"Только фрод"},{value:"conversions",label:"С конверсиями"},{value:"highRoi",label:"Высокий ROI"},{value:"lowRoi",label:"Низкий ROI"}],{data:F,isLoading:R}=$e({queryKey:["/api/admin/analytics",{search:i,dateFrom:o,dateTo:d,quickFilter:h,page:j,limit:b,sort:x}],queryFn:async()=>{const me=new URLSearchParams;i&&me.append("search",i),o&&me.append("dateFrom",o),d&&me.append("dateTo",d),h&&h!=="all"&&me.append("quickFilter",h),me.append("page",j.toString()),me.append("limit",b.toString()),x&&(me.append("sortBy",x.key),me.append("sortOrder",x.direction));const Be=await fetch(`/api/admin/analytics?${me}`,{headers:{Authorization:`Bearer ${e}`}});if(!Be.ok)throw new Error("Failed to fetch analytics data");const qe=await Be.json();if(Array.isArray(qe)){const Qe=qe.length,Ct=Math.ceil(Qe/b),er=(j-1)*b,V=er+b;return{data:qe.slice(er,V),total:Qe,totalPages:Ct}}return qe}}),I=(F==null?void 0:F.data)||[];y.useEffect(()=>{F&&(D(F.total),_(F.totalPages))},[F]);const Q=me=>{v(Be=>Be.map(qe=>qe.key===me?{...qe,visible:!qe.visible}:qe))},Y=({countryCode:me})=>{if(!me||me==="-")return r.jsx("span",{children:"-"});const Be=qe=>({RU:"🇷🇺",US:"🇺🇸",GB:"🇬🇧",DE:"🇩🇪",FR:"🇫🇷",IT:"🇮🇹",ES:"🇪🇸",PL:"🇵🇱",UA:"🇺🇦",BY:"🇧🇾",KZ:"🇰🇿",UZ:"🇺🇿",KG:"🇰🇬",TJ:"🇹🇯",TM:"🇹🇲",CN:"🇨🇳",JP:"🇯🇵",KR:"🇰🇷",IN:"🇮🇳",TH:"🇹🇭",VN:"🇻🇳",PH:"🇵🇭",ID:"🇮🇩",MY:"🇲🇾",SG:"🇸🇬",AU:"🇦🇺",NZ:"🇳🇿",CA:"🇨🇦",MX:"🇲🇽",BR:"🇧🇷",AR:"🇦🇷",CL:"🇨🇱",CO:"🇨🇴",PE:"🇵🇪",VE:"🇻🇪",TR:"🇹🇷",AE:"🇦🇪",SA:"🇸🇦",IL:"🇮🇱",EG:"🇪🇬",ZA:"🇿🇦",NG:"🇳🇬",KE:"🇰🇪",GH:"🇬🇭",MA:"🇲🇦",NO:"🇳🇴",SE:"🇸🇪",DK:"🇩🇰",FI:"🇫🇮",NL:"🇳🇱",BE:"🇧🇪",CH:"🇨🇭",AT:"🇦🇹",CZ:"🇨🇿",HU:"🇭🇺",RO:"🇷🇴",BG:"🇧🇬",HR:"🇭🇷",RS:"🇷🇸",SI:"🇸🇮",SK:"🇸🇰",LT:"🇱🇹",LV:"🇱🇻",EE:"🇪🇪",IE:"🇮🇪",PT:"🇵🇹",GR:"🇬🇷",CY:"🇨🇾",MT:"🇲🇹",IS:"🇮🇸"})[qe.toUpperCase()]||`🏳️ ${qe}`;return r.jsx("span",{className:"inline-flex items-center gap-1 text-base",title:me,children:Be(me)})},K=({os:me})=>{const qe=(Qe=>{const Ct=(Qe==null?void 0:Qe.toLowerCase())||"";return Ct.includes("windows")?{icon:r.jsx("svg",{className:"w-4 h-4 text-blue-500",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M0 3.4L10.1 2V11.6H0V3.4ZM11.3 1.9L24 0V11.6H11.3V1.9ZM24 12.4V24L11.3 22.1V12.4H24ZM10.1 22.2L0 20.6V12.4H10.1V22.2Z"})}),name:"Windows",color:"text-blue-600"}:Ct.includes("mac")||Ct.includes("darwin")?{icon:r.jsx("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M18.71 19.5C17.88 20.74 17 21.95 15.66 21.97C14.32 22 13.89 21.18 12.37 21.18C10.84 21.18 10.37 21.95 9.1 22C7.79 22.05 6.8 20.68 5.96 19.47C4.25 17 2.94 12.45 4.7 9.39C5.57 7.87 7.13 6.91 8.82 6.88C10.1 6.86 11.32 7.75 12.11 7.75C12.89 7.75 14.37 6.68 15.92 6.84C16.57 6.87 18.39 7.1 19.56 8.82C19.47 8.88 17.39 10.19 17.41 12.63C17.44 15.65 20.06 16.66 20.09 16.67C20.06 16.74 19.67 18.11 18.71 19.5ZM13 3.5C13.73 2.67 14.94 2.04 15.94 2C16.07 3.17 15.6 4.35 14.9 5.19C14.21 6.04 13.07 6.7 11.95 6.61C11.8 5.46 12.36 4.26 13 3.5Z"})}),name:"macOS",color:"text-gray-600"}:Ct.includes("linux")||Ct.includes("ubuntu")?{icon:r.jsx("svg",{className:"w-4 h-4 text-orange-500",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M12.5 2C12.3 2 12.15 2.03 12 2.06C11.85 2.03 11.7 2 11.5 2C10.26 2 9.27 3 9.27 4.22C9.27 4.31 9.28 4.4 9.29 4.5C9.1 4.77 8.95 5.08 8.84 5.42C8.46 6.55 8.46 7.77 8.84 8.9C9.05 9.5 9.37 10.04 9.78 10.5C9.83 10.56 9.88 10.61 9.94 10.66C10.28 11.05 10.69 11.38 11.16 11.63C11.41 11.77 11.69 11.87 11.97 11.95C12.03 11.97 12.1 11.98 12.16 12C12.22 11.98 12.29 11.97 12.35 11.95C12.63 11.87 12.91 11.77 13.16 11.63C13.63 11.38 14.04 11.05 14.38 10.66C14.44 10.61 14.49 10.56 14.54 10.5C14.95 10.04 15.27 9.5 15.48 8.9C15.86 7.77 15.86 6.55 15.48 5.42C15.37 5.08 15.22 4.77 15.03 4.5C15.04 4.4 15.05 4.31 15.05 4.22C15.05 3 14.06 2 12.82 2H12.5Z"})}),name:"Linux",color:"text-orange-600"}:Ct.includes("android")?{icon:r.jsx("svg",{className:"w-4 h-4 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M17.6 9.48L16.38 8.26C16.18 8.06 15.86 8.06 15.66 8.26C15.46 8.46 15.46 8.78 15.66 8.98L16.88 10.2C15.93 10.8 14.8 11.15 13.6 11.15C12.4 11.15 11.27 10.8 10.32 10.2L11.54 8.98C11.74 8.78 11.74 8.46 11.54 8.26C11.34 8.06 11.02 8.06 10.82 8.26L9.6 9.48C8.75 10.33 8.25 11.48 8.25 12.75V17.25C8.25 18.77 9.48 20 11 20H16C17.52 20 18.75 18.77 18.75 17.25V12.75C18.75 11.48 18.25 10.33 17.6 9.48Z"})}),name:"Android",color:"text-green-600"}:Ct.includes("ios")||Ct.includes("iphone")?{icon:r.jsx("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M18.71 19.5C17.88 20.74 17 21.95 15.66 21.97C14.32 22 13.89 21.18 12.37 21.18C10.84 21.18 10.37 21.95 9.1 22C7.79 22.05 6.8 20.68 5.96 19.47C4.25 17 2.94 12.45 4.7 9.39C5.57 7.87 7.13 6.91 8.82 6.88C10.1 6.86 11.32 7.75 12.11 7.75C12.89 7.75 14.37 6.68 15.92 6.84C16.57 6.87 18.39 7.1 19.56 8.82C19.47 8.88 17.39 10.19 17.41 12.63C17.44 15.65 20.06 16.66 20.09 16.67C20.06 16.74 19.67 18.11 18.71 19.5ZM13 3.5C13.73 2.67 14.94 2.04 15.94 2C16.07 3.17 15.6 4.35 14.9 5.19C14.21 6.04 13.07 6.7 11.95 6.61C11.8 5.46 12.36 4.26 13 3.5Z"})}),name:"iOS",color:"text-gray-600"}:{icon:r.jsx("svg",{className:"w-4 h-4 text-gray-500",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M4 6H20V18H4V6ZM20 4H4C2.89 4 2 4.89 2 6V18C2 19.11 2.89 20 4 20H20C21.11 20 22 19.11 22 18V6C22 4.89 21.11 4 20 4Z"})}),name:Qe||"Unknown",color:"text-gray-400"}})(me);return r.jsxs("div",{className:"flex items-center gap-1.5",title:`OS: ${qe.name}`,children:[qe.icon,r.jsx("span",{className:`text-xs font-medium ${qe.color}`,children:qe.name})]})},oe=(me,Be,qe)=>{if(me==null)return"-";if(qe==="countryFlag")return r.jsx(Y,{countryCode:me});if(qe==="country"){const Qe={RU:"Россия",US:"США",DE:"Германия",UA:"Украина",BY:"Беларусь",KZ:"Казахстан",GB:"Великобритания",FR:"Франция",IT:"Италия",ES:"Испания"};return r.jsx("span",{className:"text-sm font-medium",children:Qe[me]||me})}if(qe==="osLogo"||qe==="os")return r.jsx(K,{os:me});switch(Be){case"currency":return`$${Number(me).toFixed(2)}`;case"percentage":return`${Number(me).toFixed(1)}%`;case"boolean":return me?r.jsx("div",{className:"flex items-center justify-center",children:r.jsx(fn,{className:"w-4 h-4 text-green-600"})}):r.jsx("div",{className:"flex items-center justify-center",children:r.jsx(Tn,{className:"w-4 h-4 text-red-600"})});case"datetime":return new Date(me).toLocaleString();case"date":return new Date(me).toLocaleDateString();default:return String(me)}},ge=m.filter(me=>me.visible),Ne=(me,Be)=>{$(Be),me.dataTransfer.effectAllowed="move",me.dataTransfer.setData("text/html",me.currentTarget.outerHTML),O.current=0},Oe=(me,Be)=>{me.preventDefault(),me.dataTransfer.dropEffect="move",E!==null&&E!==Be&&T(Be)},pe=(me,Be)=>{me.preventDefault(),O.current++,E!==null&&E!==Be&&T(Be)},Me=me=>{me.preventDefault(),O.current--,O.current===0&&T(null)},xe=(me,Be)=>{if(me.preventDefault(),E===null||E===Be){$(null),T(null),O.current=0;return}const qe=[...m],Qe=ge[E],Ct=qe.findIndex(ve=>ve.key===Qe.key),er=ge[Be],V=qe.findIndex(ve=>ve.key===er.key),[U]=qe.splice(Ct,1);let re=V;Ct<V?re=V:re=V+1,qe.splice(re,0,U),v(qe),$(null),T(null),O.current=0,t({title:"Колонки переупорядочены",description:`Колонка "${Qe.label}" перемещена`})},ce=()=>{$(null),T(null),O.current=0},Ie=me=>{me>=1&&me<=C&&g(me)},ie=()=>{const Be=[],qe=[];for(let Qe=Math.max(2,j-2);Qe<=Math.min(C-1,j+2);Qe++)Be.push(Qe);return j-2>2?qe.push(1,"..."):qe.push(1),qe.push(...Be),j+2<C-1?qe.push("...",C):C>1&&qe.push(C),qe},st=()=>{try{const me=I.map(V=>{const U={};return ge.forEach(re=>{const ve=V[re.key];re.key==="countryFlag"||re.key==="country"?U[re.label]=ve:re.type==="boolean"?U[re.label]=ve?"Да":"Нет":re.type==="currency"?U[re.label]=`$${Number(ve||0).toFixed(2)}`:re.type==="percentage"?U[re.label]=`${Number(ve||0).toFixed(1)}%`:U[re.label]=ve||"-"}),U}),Be=ge.map(V=>V.label),qe=[Be.join(","),...me.map(V=>Be.map(U=>{const re=V[U];return typeof re=="string"&&(re.includes(",")||re.includes('"'))?`"${re.replace(/"/g,'""')}"`:re}).join(","))].join(`
`),Qe=new Blob([qe],{type:"text/csv;charset=utf-8;"}),Ct=document.createElement("a"),er=URL.createObjectURL(Qe);Ct.setAttribute("href",er),Ct.setAttribute("download",`analytics-${new Date().toISOString().slice(0,10)}.csv`),Ct.style.visibility="hidden",document.body.appendChild(Ct),Ct.click(),document.body.removeChild(Ct),t({title:"Экспорт завершен",description:`Данные экспортированы в CSV файл (${me.length} записей)`})}catch{t({title:"Ошибка экспорта",description:"Не удалось экспортировать данные",variant:"destructive"})}},G=()=>{s.invalidateQueries({queryKey:["/api/admin/analytics"]}),t({title:"Данные обновлены",description:"Аналитические данные успешно обновлены"})},De=()=>{console.log("Reset filters clicked"),l(""),c(Xt(hl(new Date,7),"yyyy-MM-dd")),u(Xt(new Date,"yyyy-MM-dd")),f("all"),g(1),s.invalidateQueries({queryKey:["/api/admin/analytics"]}),t({title:"Фильтры сброшены",description:"Все фильтры возвращены к значениям по умолчанию"})};return r.jsxs("div",{className:"h-screen bg-background overflow-hidden",children:[r.jsx(xn,{}),r.jsxs("div",{className:`h-full flex flex-col transition-all duration-300 ${n?"ml-16":"ml-64"}`,children:[r.jsx(gn,{title:"Аналитика"}),r.jsx("main",{className:"flex-1 overflow-auto p-4",children:r.jsxs("div",{className:"space-y-4 max-w-full",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-3",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Аналитика (Полная версия)"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"Комплексная аналитика с 100+ полями данных"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 shrink-0",children:[r.jsxs(M,{onClick:()=>k(!N),variant:"outline",size:"sm",children:[r.jsx(fr,{className:"w-4 h-4 mr-1"}),"Столбцы (",ge.length,")"]}),r.jsxs(M,{onClick:st,variant:"outline",size:"sm",children:[r.jsx(vr,{className:"w-4 h-4 mr-1"}),"Экспорт"]}),r.jsxs(M,{onClick:G,variant:"outline",size:"sm",disabled:R,children:[r.jsx(Vt,{className:`w-4 h-4 mr-1 ${R?"animate-spin":""}`}),"Обновить"]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsx(W,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:r.jsxs(H,{className:"pt-3 pb-3 px-4",children:[r.jsx("div",{className:"text-lg font-bold",children:I.length}),r.jsx("p",{className:"text-blue-100 text-xs",children:"Всего записей"})]})}),r.jsx(W,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:r.jsxs(H,{className:"pt-3 pb-3 px-4",children:[r.jsx("div",{className:"text-lg font-bold",children:ge.length}),r.jsx("p",{className:"text-green-100 text-xs",children:"Видимых столбцов"})]})}),r.jsx(W,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:r.jsxs(H,{className:"pt-3 pb-3 px-4",children:[r.jsx("div",{className:"text-lg font-bold",children:ZI.length}),r.jsx("p",{className:"text-purple-100 text-xs",children:"Всего полей"})]})}),r.jsx(W,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:r.jsxs(H,{className:"pt-3 pb-3 px-4",children:[r.jsx("div",{className:"text-lg font-bold",children:I.filter(me=>me.isBot).length}),r.jsx("p",{className:"text-red-100 text-xs",children:"Ботов обнаружено"})]})})]}),N&&r.jsxs(W,{className:"bg-white dark:bg-gray-800 border shadow-sm",children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-base",children:"Настройка столбцов"})}),r.jsx(H,{children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 max-h-80 overflow-y-auto",children:m.map(me=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(on,{id:me.key,checked:me.visible,onCheckedChange:()=>Q(me.key)}),r.jsx("label",{htmlFor:me.key,className:"text-xs cursor-pointer",children:me.label})]},me.key))})})]}),r.jsxs(W,{className:"bg-white dark:bg-gray-800 border shadow-sm",children:[r.jsx(se,{className:"pb-2",children:r.jsxs(ae,{className:"flex items-center gap-2 text-base",children:[r.jsx(Ks,{className:"w-4 h-4"}),"Фильтрация данных"]})}),r.jsx(H,{className:"pt-0",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-2 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{placeholder:"Поиск...",value:i,onChange:me=>l(me.target.value),className:"pl-9 h-8 text-sm"})]}),r.jsx("div",{children:r.jsx(ne,{type:"date",value:o,onChange:me=>c(me.target.value),className:"h-8 text-sm",title:"От даты"})}),r.jsx("div",{children:r.jsx(ne,{type:"date",value:d,onChange:me=>u(me.target.value),className:"h-8 text-sm",title:"До даты"})}),r.jsx("div",{children:r.jsxs(he,{value:h,onValueChange:f,children:[r.jsx(de,{className:"h-8 text-sm",children:r.jsx(fe,{placeholder:"Быстрые фильтры"})}),r.jsx(ue,{children:z.map(me=>r.jsx(S,{value:me.value,children:me.label},me.value))})]})}),r.jsx("div",{children:r.jsxs(M,{onClick:De,variant:"outline",className:"h-8 w-full text-sm",size:"sm",children:[r.jsx(xu,{className:"w-3 h-3 mr-1"}),"Сбросить"]})})]})})]}),r.jsxs(W,{className:"bg-white dark:bg-gray-800 border shadow-sm",children:[r.jsx(se,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[r.jsx(ae,{className:"text-xl",children:"Данные аналитики"}),C>1&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(M,{variant:"outline",size:"sm",onClick:()=>Ie(j-1),disabled:j===1,className:"p-1 h-8 w-8",children:r.jsx(Ri,{className:"h-4 w-4"})}),r.jsx("div",{className:"flex items-center gap-1",children:ie().map((me,Be)=>r.jsx(M,{variant:me===j?"default":"outline",size:"sm",onClick:()=>typeof me=="number"&&Ie(me),disabled:me==="...",className:"h-8 w-8 p-0 text-sm",children:me},Be))}),r.jsx(M,{variant:"outline",size:"sm",onClick:()=>Ie(j+1),disabled:j===C,className:"p-1 h-8 w-8",children:r.jsx(Qc,{className:"h-4 w-4"})}),r.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["Стр. ",j," из ",C]})]})]})}),r.jsx(H,{children:R?r.jsx("div",{className:"flex justify-center p-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("div",{className:"min-w-max",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b",children:ge.map((me,Be)=>r.jsx("th",{draggable:!0,onDragStart:qe=>Ne(qe,Be),onDragOver:qe=>Oe(qe,Be),onDragEnter:qe=>pe(qe,Be),onDragLeave:Me,onDrop:qe=>xe(qe,Be),onDragEnd:ce,className:`text-left p-2 font-medium text-sm whitespace-nowrap cursor-grab active:cursor-grabbing transition-colors duration-200 ${E===Be?"opacity-50 bg-blue-50 dark:bg-blue-900/20":A===Be?"bg-blue-100 dark:bg-blue-800/30 border-l-2 border-blue-500":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,style:{width:me.width},title:"Перетащите колонку для изменения порядка",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bw,{className:"w-3 h-3 text-gray-400 opacity-60"}),r.jsx("span",{children:me.label})]})},`${me.key}-${Be}`))})}),r.jsx("tbody",{children:I.map((me,Be)=>r.jsx("tr",{className:"border-b hover:bg-muted/50",children:ge.map((qe,Qe)=>r.jsx("td",{className:"p-2 text-sm whitespace-nowrap",children:oe(me[qe.key],qe.type,qe.key)},`${qe.key}-${Qe}-${me.id||Be}`))},me.id||Be))})]})}),I.length===0&&r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Нет данных для отображения"})]})})]})]})})]})]})}const QI={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-lg"};function Hj({name:e,logo:t,size:n="md",className:s,showTooltip:a=!1}){const[i,l]=y.useState(!1);console.log("OfferLogo debug:",{name:e,logo:t,logoType:typeof t,logoLength:t==null?void 0:t.length,imageError:i,hasLogo:!!t});const o=d=>{if(!d)return"??";const u=d.replace(/[^\w\s\u0400-\u04FF]/g,"").trim().split(/\s+/).filter(h=>h.length>0);return u.length===0?"??":u.length===1?u[0].substring(0,2).toUpperCase():(u[0][0]+u[1][0]).toUpperCase()};if(t&&!i)return r.jsx("div",{className:Ae("relative inline-flex items-center justify-center rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800",QI[n],s),title:a?e:void 0,"data-testid":"offer-logo-image",children:r.jsx("img",{src:t,alt:`Логотип ${e}`,className:"w-full h-full object-cover",onError:()=>l(!0),onLoad:()=>l(!1)})});const c=o(e);return r.jsx("div",{className:Ae("relative inline-flex items-center justify-center rounded-lg font-semibold","bg-gradient-to-br from-blue-500 to-purple-600 text-white","shadow-sm border border-gray-200 dark:border-gray-700",QI[n],s),title:a?e:void 0,"data-testid":"offer-logo-initials",children:c})}const mo={RU:{code:"RU",name:"Россия",flag:"🇷🇺"},US:{code:"US",name:"США",flag:"🇺🇸"},GB:{code:"GB",name:"Великобритания",flag:"🇬🇧"},DE:{code:"DE",name:"Германия",flag:"🇩🇪"},FR:{code:"FR",name:"Франция",flag:"🇫🇷"},IT:{code:"IT",name:"Италия",flag:"🇮🇹"},KZ:{code:"KZ",name:"Казахстан",flag:"🇰🇿"},UA:{code:"UA",name:"Украина",flag:"🇺🇦"},BR:{code:"BR",name:"Бразилия",flag:"🇧🇷"},IN:{code:"IN",name:"Индия",flag:"🇮🇳"},PH:{code:"PH",name:"Филиппины",flag:"🇵🇭"},CA:{code:"CA",name:"Канада",flag:"🇨🇦"},CN:{code:"CN",name:"Китай",flag:"🇨🇳"},TR:{code:"TR",name:"Турция",flag:"🇹🇷"},JP:{code:"JP",name:"Япония",flag:"🇯🇵"},KR:{code:"KR",name:"Южная Корея",flag:"🇰🇷"},AU:{code:"AU",name:"Австралия",flag:"🇦🇺"},MX:{code:"MX",name:"Мексика",flag:"🇲🇽"},AR:{code:"AR",name:"Аргентина",flag:"🇦🇷"},ES:{code:"ES",name:"Испания",flag:"🇪🇸"},PT:{code:"PT",name:"Португалия",flag:"🇵🇹"},NL:{code:"NL",name:"Нидерланды",flag:"🇳🇱"},SE:{code:"SE",name:"Швеция",flag:"🇸🇪"},NO:{code:"NO",name:"Норвегия",flag:"🇳🇴"},DK:{code:"DK",name:"Дания",flag:"🇩🇰"},FI:{code:"FI",name:"Финляндия",flag:"🇫🇮"},PL:{code:"PL",name:"Польша",flag:"🇵🇱"},CZ:{code:"CZ",name:"Чехия",flag:"🇨🇿"},HU:{code:"HU",name:"Венгрия",flag:"🇭🇺"},AT:{code:"AT",name:"Австрия",flag:"🇦🇹"},CH:{code:"CH",name:"Швейцария",flag:"🇨🇭"},BE:{code:"BE",name:"Бельгия",flag:"🇧🇪"},IE:{code:"IE",name:"Ирландия",flag:"🇮🇪"},IL:{code:"IL",name:"Израиль",flag:"🇮🇱"},AE:{code:"AE",name:"ОАЭ",flag:"🇦🇪"},SA:{code:"SA",name:"Саудовская Аравия",flag:"🇸🇦"},TH:{code:"TH",name:"Таиланд",flag:"🇹🇭"},VN:{code:"VN",name:"Вьетнам",flag:"🇻🇳"},ID:{code:"ID",name:"Индонезия",flag:"🇮🇩"},MY:{code:"MY",name:"Малайзия",flag:"🇲🇾"},SG:{code:"SG",name:"Сингапур",flag:"🇸🇬"},ZA:{code:"ZA",name:"ЮАР",flag:"🇿🇦"},NG:{code:"NG",name:"Нигерия",flag:"🇳🇬"},EG:{code:"EG",name:"Египет",flag:"🇪🇬"},CL:{code:"CL",name:"Чили",flag:"🇨🇱"},CO:{code:"CO",name:"Колумбия",flag:"🇨🇴"},PE:{code:"PE",name:"Перу",flag:"🇵🇪"},VE:{code:"VE",name:"Венесуэла",flag:"🇻🇪"},GR:{code:"GR",name:"Греция",flag:"🇬🇷"},HR:{code:"HR",name:"Хорватия",flag:"🇭🇷"},BG:{code:"BG",name:"Болгария",flag:"🇧🇬"},RO:{code:"RO",name:"Румыния",flag:"🇷🇴"},RS:{code:"RS",name:"Сербия",flag:"🇷🇸"},LT:{code:"LT",name:"Литва",flag:"🇱🇹"},LV:{code:"LV",name:"Латвия",flag:"🇱🇻"},EE:{code:"EE",name:"Эстония",flag:"🇪🇪"},SI:{code:"SI",name:"Словения",flag:"🇸🇮"},SK:{code:"SK",name:"Словакия",flag:"🇸🇰"},CY:{code:"CY",name:"Кипр",flag:"🇨🇾"},MT:{code:"MT",name:"Мальта",flag:"🇲🇹"},IS:{code:"IS",name:"Исландия",flag:"🇮🇸"},LU:{code:"LU",name:"Люксембург",flag:"🇱🇺"},MC:{code:"MC",name:"Монако",flag:"🇲🇨"},AD:{code:"AD",name:"Андорра",flag:"🇦🇩"},LI:{code:"LI",name:"Лихтенштейн",flag:"🇱🇮"},SM:{code:"SM",name:"Сан-Марино",flag:"🇸🇲"},VA:{code:"VA",name:"Ватикан",flag:"🇻🇦"},MA:{code:"MA",name:"Марокко",flag:"🇲🇦"},TN:{code:"TN",name:"Тунис",flag:"🇹🇳"},DZ:{code:"DZ",name:"Алжир",flag:"🇩🇿"},LY:{code:"LY",name:"Ливия",flag:"🇱🇾"},SD:{code:"SD",name:"Судан",flag:"🇸🇩"},ET:{code:"ET",name:"Эфиопия",flag:"🇪🇹"},KE:{code:"KE",name:"Кения",flag:"🇰🇪"},TZ:{code:"TZ",name:"Танзания",flag:"🇹🇿"},UG:{code:"UG",name:"Уганда",flag:"🇺🇬"},RW:{code:"RW",name:"Руанда",flag:"🇷🇼"},GH:{code:"GH",name:"Гана",flag:"🇬🇭"},CI:{code:"CI",name:"Кот-д'Ивуар",flag:"🇨🇮"},SN:{code:"SN",name:"Сенегал",flag:"🇸🇳"},CM:{code:"CM",name:"Камерун",flag:"🇨🇲"},IR:{code:"IR",name:"Иран",flag:"🇮🇷"},IQ:{code:"IQ",name:"Ирак",flag:"🇮🇶"},JO:{code:"JO",name:"Иордания",flag:"🇯🇴"},LB:{code:"LB",name:"Ливан",flag:"🇱🇧"},SY:{code:"SY",name:"Сирия",flag:"🇸🇾"},YE:{code:"YE",name:"Йемен",flag:"🇾🇪"},OM:{code:"OM",name:"Оман",flag:"🇴🇲"},QA:{code:"QA",name:"Катар",flag:"🇶🇦"},KW:{code:"KW",name:"Кувейт",flag:"🇰🇼"},BH:{code:"BH",name:"Бахрейн",flag:"🇧🇭"},AF:{code:"AF",name:"Афганистан",flag:"🇦🇫"},PK:{code:"PK",name:"Пакистан",flag:"🇵🇰"},BD:{code:"BD",name:"Бангладеш",flag:"🇧🇩"},LK:{code:"LK",name:"Шри-Ланка",flag:"🇱🇰"},NP:{code:"NP",name:"Непал",flag:"🇳🇵"},MM:{code:"MM",name:"Мьянма",flag:"🇲🇲"},KH:{code:"KH",name:"Камбоджа",flag:"🇰🇭"},LA:{code:"LA",name:"Лаос",flag:"🇱🇦"},MN:{code:"MN",name:"Монголия",flag:"🇲🇳"},KP:{code:"KP",name:"Северная Корея",flag:"🇰🇵"},TW:{code:"TW",name:"Тайвань",flag:"🇹🇼"},HK:{code:"HK",name:"Гонконг",flag:"🇭🇰"},MO:{code:"MO",name:"Макао",flag:"🇲🇴"},NZ:{code:"NZ",name:"Новая Зеландия",flag:"🇳🇿"},FJ:{code:"FJ",name:"Фиджи",flag:"🇫🇯"},PG:{code:"PG",name:"Папуа Новая Гвинея",flag:"🇵🇬"},EC:{code:"EC",name:"Эквадор",flag:"🇪🇨"},BO:{code:"BO",name:"Боливия",flag:"🇧🇴"},PY:{code:"PY",name:"Парагвай",flag:"🇵🇾"},UY:{code:"UY",name:"Уругвай",flag:"🇺🇾"},GY:{code:"GY",name:"Гайана",flag:"🇬🇾"},SR:{code:"SR",name:"Суринам",flag:"🇸🇷"},GF:{code:"GF",name:"Французская Гвиана",flag:"🇬🇫"},CU:{code:"CU",name:"Куба",flag:"🇨🇺"},JM:{code:"JM",name:"Ямайка",flag:"🇯🇲"},HT:{code:"HT",name:"Гаити",flag:"🇭🇹"},DO:{code:"DO",name:"Доминиканская Республика",flag:"🇩🇴"},PR:{code:"PR",name:"Пуэрто-Рико",flag:"🇵🇷"},CR:{code:"CR",name:"Коста-Рика",flag:"🇨🇷"},PA:{code:"PA",name:"Панама",flag:"🇵🇦"},NI:{code:"NI",name:"Никарагуа",flag:"🇳🇮"},HN:{code:"HN",name:"Гондурас",flag:"🇭🇳"},GT:{code:"GT",name:"Гватемала",flag:"🇬🇹"},BZ:{code:"BZ",name:"Белиз",flag:"🇧🇿"},SV:{code:"SV",name:"Сальвадор",flag:"🇸🇻"},AO:{code:"AO",name:"Ангола",flag:"🇦🇴"},AL:{code:"AL",name:"Албания",flag:"🇦🇱"},AM:{code:"AM",name:"Армения",flag:"🇦🇲"},AZ:{code:"AZ",name:"Азербайджан",flag:"🇦🇿"},GE:{code:"GE",name:"Грузия",flag:"🇬🇪"},MD:{code:"MD",name:"Молдова",flag:"🇲🇩"},BA:{code:"BA",name:"Босния и Герцеговина",flag:"🇧🇦"},MK:{code:"MK",name:"Северная Македония",flag:"🇲🇰"},ME:{code:"ME",name:"Черногория",flag:"🇲🇪"},XK:{code:"XK",name:"Косово",flag:"🇽🇰"},BY:{code:"BY",name:"Беларусь",flag:"🇧🇾"},UZ:{code:"UZ",name:"Узбекистан",flag:"🇺🇿"},KG:{code:"KG",name:"Кыргызстан",flag:"🇰🇬"},TJ:{code:"TJ",name:"Таджикистан",flag:"🇹🇯"},TM:{code:"TM",name:"Туркменистан",flag:"🇹🇲"}},JI={россия:"RU",сша:"US",америка:"US",великобритания:"GB",англия:"GB",германия:"DE",франция:"FR",италия:"IT",казахстан:"KZ",бразилия:"BR",индия:"IN",филиппины:"PH",канада:"CA",китай:"CN",турция:"TR",япония:"JP","южная корея":"KR",корея:"KR",австралия:"AU",мексика:"MX",аргентина:"AR",испания:"ES",португалия:"PT",нидерланды:"NL",швеция:"SE",норвегия:"NO",дания:"DK",финляндия:"FI",польша:"PL",чехия:"CZ",венгрия:"HU",австрия:"AT",швейцария:"CH",бельгия:"BE",ирландия:"IE",израиль:"IL",оаэ:"AE","саудовская аравия":"SA",таиланд:"TH",вьетнам:"VN",индонезия:"ID",малайзия:"MY",сингапур:"SG",юар:"ZA",нигерия:"NG",египет:"EG",чили:"CL",колумбия:"CO",перу:"PE",венесуэла:"VE",греция:"GR",russia:"RU","united states":"US",usa:"US",america:"US","united kingdom":"GB",uk:"GB",britain:"GB",england:"GB",germany:"DE",france:"FR",italy:"IT",kazakhstan:"KZ",brazil:"BR",india:"IN",philippines:"PH",canada:"CA",china:"CN",turkey:"TR",japan:"JP","south korea":"KR",korea:"KR",australia:"AU",mexico:"MX",argentina:"AR",spain:"ES",portugal:"PT",netherlands:"NL",sweden:"SE",norway:"NO",denmark:"DK",finland:"FI",poland:"PL","czech republic":"CZ",czechia:"CZ",hungary:"HU",austria:"AT",switzerland:"CH",belgium:"BE",ireland:"IE",israel:"IL",greece:"GR",czech:"CZ",uae:"AE","united arab emirates":"AE","saudi arabia":"SA",thailand:"TH",vietnam:"VN",indonesia:"ID",malaysia:"MY",singapore:"SG","south africa":"ZA",nigeria:"NG",egypt:"EG",chile:"CL",colombia:"CO",peru:"PE",venezuela:"VE",croatia:"HR",хорватия:"HR",bulgaria:"BG",болгария:"BG",romania:"RO",румыния:"RO",serbia:"RS",сербия:"RS",lithuania:"LT",литва:"LT",latvia:"LV",латвия:"LV",estonia:"EE",эстония:"EE",slovenia:"SI",словения:"SI",slovakia:"SK",словакия:"SK",cyprus:"CY",кипр:"CY",malta:"MT",мальта:"MT",iceland:"IS",исландия:"IS",luxembourg:"LU",люксембург:"LU",monaco:"MC",монако:"MC",andorra:"AD",андорра:"AD",liechtenstein:"LI",лихтенштейн:"LI","san marino":"SM","сан-марино":"SM",vatican:"VA",ватикан:"VA",morocco:"MA",марокко:"MA",tunisia:"TN",тунис:"TN",алжир:"DZ",libya:"LY",ливия:"LY",sudan:"SD",судан:"SD",ethiopia:"ET",эфиопия:"ET",kenya:"KE",кения:"KE",tanzania:"TZ",танзания:"TZ",uganda:"UG",уганда:"UG",rwanda:"RW",руанда:"RW",ghana:"GH",гана:"GH","ivory coast":"CI","кот-д'ивуар":"CI",senegal:"SN",сенегал:"SN",cameroon:"CM",камерун:"CM",iran:"IR",иран:"IR",iraq:"IQ",ирак:"IQ",jordan:"JO",иордания:"JO",lebanon:"LB",ливан:"LB",syria:"SY",сирия:"SY",yemen:"YE",йемен:"YE",oman:"OM",оман:"OM",qatar:"QA",катар:"QA",kuwait:"KW",кувейт:"KW",bahrain:"BH",бахрейн:"BH",afghanistan:"AF",афганистан:"AF",pakistan:"PK",пакистан:"PK",bangladesh:"BD",бангладеш:"BD","sri lanka":"LK","шри-ланка":"LK",nepal:"NP",непал:"NP",myanmar:"MM",мьянма:"MM",cambodia:"KH",камбоджа:"KH",laos:"LA",лаос:"LA",mongolia:"MN",монголия:"MN","north korea":"KP","северная корея":"KP",taiwan:"TW",тайвань:"TW","hong kong":"HK",гонконг:"HK",macau:"MO",макао:"MO","new zealand":"NZ","новая зеландия":"NZ",fiji:"FJ",фиджи:"FJ","papua new guinea":"PG","папуа новая гвинея":"PG",ecuador:"EC",эквадор:"EC",bolivia:"BO",боливия:"BO",paraguay:"PY",парагвай:"PY",uruguay:"UY",уругвай:"UY",guyana:"GY",гайана:"GY",suriname:"SR",суринам:"SR","french guiana":"GF","французская гвиана":"GF",cuba:"CU",куба:"CU",jamaica:"JM",ямайка:"JM",haiti:"HT",гаити:"HT","dominican republic":"DO","доминиканская республика":"DO","puerto rico":"PR","пуэрто-рико":"PR","costa rica":"CR","коста-рика":"CR",panama:"PA",панама:"PA",nicaragua:"NI",никарагуа:"NI",honduras:"HN",гондурас:"HN",guatemala:"GT",гватемала:"GT",belize:"BZ",белиз:"BZ","el salvador":"SV",сальвадор:"SV",angola:"AO",ангола:"AO",albania:"AL",албания:"AL",армения:"AM",azerbaijan:"AZ",азербайджан:"AZ",georgia:"GE",грузия:"GE",moldova:"MD",молдова:"MD",bosnia:"BA",босния:"BA","north macedonia":"MK",македония:"MK",montenegro:"ME",черногория:"ME",kosova:"XK",kosovo:"XK",косово:"XK",belarus:"BY",беларусь:"BY",uzbekistan:"UZ",узбекистан:"UZ",kyrgyzstan:"KG",кыргызстан:"KG",tajikistan:"TJ",таджикистан:"TJ",turkmenistan:"TM",туркменистан:"TM"};function Hc(e){if(!e)return"";if(mo[e.toUpperCase()])return mo[e.toUpperCase()].name;const t=vx(e);return t&&mo[t]?mo[t].name:e}function Al(e){if(!e)return"🌍";if(mo[e.toUpperCase()])return mo[e.toUpperCase()].flag;const t=vx(e);return t&&mo[t]?mo[t].flag:"🌍"}function Xk(e){return mo[e]||{code:e,name:e,flag:"🌍"}}function vx(e){if(!e)return"";if(e.length===2&&e===e.toUpperCase())return e;const t=e.toLowerCase().trim(),n=JI[t];if(n)return n;for(const[i,l]of Object.entries(JI))if(i.includes(t)||t.includes(i))return l;const a={france:"FR",франция:"FR",turkey:"TR",турция:"TR"}[t];return a||e.toUpperCase().substring(0,2)}function Zk(e){return!e||!Array.isArray(e)?"Все ГЕО":typeof e[0]=="string"?e.map(t=>{const n=Hc(t);return`${Al(t)} ${n}`}).join(", "):e.map(t=>{if(typeof t=="object"&&t.code){const n=t.name||Hc(t.code);return`${t.flag||Al(t.code)} ${n}`}return t.toString()}).join(", ")}function aK(e){if(!e)return[{code:"RU",name:"Россия",flag:"🇷🇺"},{code:"US",name:"США",flag:"🇺🇸"},{code:"DE",name:"Германия",flag:"🇩🇪"}];if(typeof e=="string")try{const t=JSON.parse(e);if(Array.isArray(t))return aK(t)}catch{const t=e.split(/[,\s]+/).map(n=>n.trim()).filter(n=>n);if(t.length>0)return t.map(n=>{const s=vx(n);return Xk(s)})}return Array.isArray(e)?e.length>0&&typeof e[0]=="string"?e.map(t=>{const n=vx(t);return Xk(n)}):e.map(t=>{if(typeof t=="object"&&t.code)return{code:t.code,name:t.name||Hc(t.code),flag:t.flag||Al(t.code)};const n=vx(t.toString());return Xk(n)}):[{code:"RU",name:"Россия",flag:"🇷🇺"},{code:"US",name:"США",flag:"🇺🇸"}]}function K3e(e,t){return{gambling:{label:t("offers.gambling"),className:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},dating:{label:t("offers.dating"),className:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300"},finance:{label:t("offers.finance"),className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},crypto:{label:t("offers.crypto"),className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"},nutra:{label:t("offers.health"),className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},software:{label:t("offers.software"),className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}}[e==null?void 0:e.toLowerCase()]||{label:e||t("offers.default"),className:"bg-gray-100 text-gray-800"}}function G3e(e,t){return{cpa:{label:t("offers.cpa"),className:"bg-blue-100 text-blue-800 border-blue-300 dark:bg-blue-900 dark:text-blue-300"},cpl:{label:t("offers.cpl"),className:"bg-green-100 text-green-800 border-green-300 dark:bg-green-900 dark:text-green-300"},cps:{label:t("offers.cps"),className:"bg-purple-100 text-purple-800 border-purple-300 dark:bg-purple-900 dark:text-purple-300"},cpi:{label:"CPI",className:"bg-orange-100 text-orange-800 border-orange-300 dark:bg-orange-900 dark:text-orange-300"},cpm:{label:t("offers.cpm"),className:"bg-pink-100 text-pink-800 border-pink-300 dark:bg-pink-900 dark:text-pink-300"}}[e==null?void 0:e.toLowerCase()]||{label:(e==null?void 0:e.toUpperCase())||"CPA",className:"bg-gray-100 text-gray-800 border-gray-300"}}function e3(e){return Math.ceil(e*100)/100+""}function Y3e(){const{toast:e}=lt(),{t}=_r();Jt();const[,n]=hs(),s=Et(),{data:a=[],isLoading:i}=$e({queryKey:["/api/partner/offers"],staleTime:5*60*1e3}),l=Ee({mutationFn:async u=>await Te("/api/partner/offer-access-request","POST",u),onSuccess:()=>{e({title:t("offers.requestSent","Запрос отправлен"),description:t("offers.requestSentDesc","Ваш запрос на доступ к офферу был отправлен рекламодателю"),variant:"default"}),s.invalidateQueries({queryKey:["/api/partner/offers"]})},onError:u=>{e({title:t("common.error","Ошибка"),description:u.message||t("offers.requestError","Не удалось отправить запрос"),variant:"destructive"})}}),o=(u,h)=>{navigator.clipboard.writeText(u),e({title:"Скопировано",description:`${h} скопирована в буфер обмена`})},c=(u,h)=>{if(h==="approved"){const f=a.find(m=>m.id===u);f!=null&&f.partnerLink?o(f.partnerLink,"Партнерская ссылка"):n(`/affiliate/offers/${u}`)}else h!=="pending"&&l.mutate({offerId:u})};if(i)return r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-muted border-t-primary"}),r.jsx("p",{children:t("offers.loading","Загрузка офферов...")})]})});const d=a;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:t("offers.partnerOffers")}),r.jsx("p",{className:"text-muted-foreground",children:t("offers.subtitle")})]}),r.jsxs(le,{variant:"outline",children:[d.length," ",t("offers.title").toLowerCase()]})]}),r.jsx(W,{children:r.jsx(H,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:t("common.name","Название")}),r.jsx(J,{children:t("offers.category")}),r.jsx(J,{children:t("common.payoutType","Тип выплаты")}),r.jsx(J,{children:t("offers.countries","Гео")}),r.jsx(J,{children:t("common.amount")}),r.jsx(J,{children:"CR"}),r.jsx(J,{className:"text-right",children:t("common.actions")})]})}),r.jsx($t,{children:d.map(u=>{const h=K3e(u.category,t),f=G3e(u.payoutType,t),m=0,v=u.accessStatus||(u.hasFullAccess?"approved":"none");return u.geoPricing&&Object.keys(u.geoPricing).length>0?Object.entries(u.geoPricing).map(([x,w],j)=>r.jsxs(Re,{className:"hover:bg-gray-50/50",children:[r.jsx(q,{children:j===0?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Hj,{name:u.name,logo:u.logo,size:"md",showTooltip:!0}),r.jsx("div",{children:r.jsx("div",{className:"font-medium cursor-pointer text-blue-600 underline hover:text-blue-800 hover:no-underline transition-colors",onClick:()=>n(`/affiliate/offers/${u.id}`),children:u.name})})]}):null}),r.jsx(q,{children:j===0?r.jsx(le,{className:h.className,children:h.label}):null}),r.jsx(q,{children:j===0?r.jsx(le,{variant:"outline",className:`uppercase font-semibold ${f.className}`,children:f.label}):null}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-0.5 bg-gray-50 rounded px-1 py-0.5 w-fit",children:[r.jsx("span",{className:"text-sm leading-none",children:Al(x)}),r.jsx("span",{className:"text-xs font-medium",children:x})]})}),r.jsx(q,{children:r.jsxs("div",{className:"font-mono font-medium",children:["$",w]})}),r.jsx(q,{children:j===0?r.jsxs("div",{className:"font-mono text-green-600 font-medium",children:[e3(m),"%"]}):null}),r.jsx(q,{className:"text-right",children:j===0?r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[v==="approved"?r.jsx(M,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>c(u.id,v),title:t("offers.accessApprovedTooltip","Доступ одобрен - получить ссылку"),children:t("offers.getLink","Забрать ссылку")}):v==="pending"?r.jsx(M,{size:"sm",disabled:!0,className:"bg-yellow-500 text-white cursor-not-allowed opacity-90",title:t("offers.requestPendingTooltip","Запрос отправлен, ожидает рассмотрения рекламодателем"),children:t("offers.pending","В ожидании")}):v==="rejected"?r.jsx(M,{size:"sm",disabled:!0,className:"bg-red-500 text-white cursor-not-allowed opacity-90",title:`${t("offers.accessRejected","Доступ отклонен")}${u.rejectReason?`: ${u.rejectReason}`:""}`,children:t("offers.rejected","Отклонен")}):r.jsx(M,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>c(u.id,v),title:t("offers.requestAccessTooltip","Запросить доступ к офферу"),children:t("offers.requestAccess","Запросить")}),r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsx(M,{variant:"ghost",size:"sm",children:r.jsx(Wx,{className:"h-4 w-4"})})}),r.jsxs(Ps,{align:"end",children:[r.jsxs(Ft,{onClick:()=>n(`/affiliate/offers/${u.id}`),children:[r.jsx(Kt,{className:"h-4 w-4 mr-2"}),t("offers.details","Детали")]}),r.jsxs(Ft,{onClick:()=>n(`/affiliate/statistics?offer=${u.id}`),children:[r.jsx(cr,{className:"h-4 w-4 mr-2"}),t("offers.statistics","Статистика")]})]})]})]}):null})]},`${u.id}-${x}`)):r.jsxs(Re,{className:"hover:bg-gray-50/50",children:[r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Hj,{name:u.name,logo:u.logo,size:"md",showTooltip:!0}),r.jsx("div",{children:r.jsx("div",{className:"font-medium cursor-pointer text-blue-600 underline hover:text-blue-800 hover:no-underline transition-colors",onClick:()=>n(`/affiliate/offers/${u.id}`),children:u.name})})]})}),r.jsx(q,{children:r.jsx(le,{className:h.className,children:h.label})}),r.jsx(q,{children:r.jsx(le,{variant:"outline",className:`uppercase font-semibold ${f.className}`,children:f.label})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-1 flex-wrap max-w-[100px]",children:[Array.isArray(u.countries)?u.countries.slice(0,3).map(x=>r.jsxs("div",{className:"flex items-center gap-0.5 bg-gray-50 rounded px-1 py-0.5",children:[r.jsx("span",{className:"text-sm leading-none",children:Al(x)}),r.jsx("span",{className:"text-xs font-medium",children:x})]},x)):r.jsxs("div",{className:"flex items-center gap-0.5 bg-gray-50 rounded px-1 py-0.5",children:[r.jsx("span",{className:"text-sm leading-none",children:Al(u.countries)}),r.jsx("span",{className:"text-xs font-medium",children:u.countries})]}),Array.isArray(u.countries)&&u.countries.length>3&&r.jsxs("span",{className:"text-xs text-muted-foreground bg-gray-100 rounded px-1 py-0.5",children:["+",u.countries.length-3]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"font-mono font-medium",children:["$",u.payout]})}),r.jsx(q,{children:r.jsxs("div",{className:"font-mono text-green-600 font-medium",children:[e3(m),"%"]})}),r.jsx(q,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[v==="approved"?r.jsx(M,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>n(`/affiliate/offers/${u.id}`),title:t("offers.accessApprovedTooltip","Доступ одобрен - получить ссылку"),children:t("offers.getLink","Забрать ссылку")}):v==="pending"?r.jsx(M,{size:"sm",disabled:!0,className:"bg-yellow-500 text-white cursor-not-allowed opacity-90",title:t("offers.requestPendingTooltip","Запрос отправлен, ожидает рассмотрения рекламодателем"),children:t("offers.pending","В ожидании")}):v==="rejected"?r.jsx(M,{size:"sm",disabled:!0,className:"bg-red-500 text-white cursor-not-allowed opacity-90",title:`${t("offers.accessRejected","Доступ отклонен")}${u.rejectReason?`: ${u.rejectReason}`:""}`,children:t("offers.rejected","Отклонен")}):r.jsx(M,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>c(u.id,v),title:t("offers.requestAccessTooltip","Запросить доступ к офферу"),children:t("offers.requestAccess","Запросить")}),r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsx(M,{variant:"ghost",size:"sm",children:r.jsx(Wx,{className:"h-4 w-4"})})}),r.jsxs(Ps,{align:"end",children:[r.jsxs(Ft,{onClick:()=>n(`/affiliate/offers/${u.id}`),children:[r.jsx(Kt,{className:"h-4 w-4 mr-2"}),t("offers.details","Детали")]}),r.jsxs(Ft,{onClick:()=>n(`/affiliate/statistics?offer=${u.id}`),children:[r.jsx(cr,{className:"h-4 w-4 mr-2"}),t("offers.statistics","Статистика")]})]})]})]})})]},u.id)}).flat()})]})})})})]})}var X3e="Separator",t3="horizontal",Z3e=["horizontal","vertical"],iK=y.forwardRef((e,t)=>{const{decorative:n,orientation:s=t3,...a}=e,i=Q3e(s)?s:t3,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return r.jsx(Ze.div,{"data-orientation":i,...o,...a,ref:t})});iK.displayName=X3e;function Q3e(e){return Z3e.includes(e)}var lK=iK;const wn=y.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},a)=>r.jsx(lK,{ref:a,decorative:n,orientation:t,className:Ae("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));wn.displayName=lK.displayName;function J3e(e){return{gambling:{label:"Гемблинг",className:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},dating:{label:"Знакомства",className:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300"},finance:{label:"Финансы",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},crypto:{label:"Крипто",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"},nutra:{label:"Нутра",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},software:{label:"ПО",className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}}[e]||{label:e,className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}}const eFe=({landingPages:e,offerId:t,onCopyUrl:n})=>{const[s,a]=y.useState({}),[i,l]=y.useState({}),[o,c]=y.useState(null),[d,u]=y.useState({}),h=async j=>{if(s[j.id])return s[j.id];if(i[j.id])return j.url;try{l(b=>({...b,[j.id]:!0}));const g=await Cte({originalUrl:j.url,offerId:t});return a(b=>({...b,[j.id]:g})),g}catch(g){return console.error("Failed to transform landing URL:",g),j.url}finally{l(g=>({...g,[j.id]:!1}))}},f=async j=>{const g=await h(j),b=d[j.id];if(!b)return g;const p=new URL(g);return b.sub1&&p.searchParams.set("sub1",b.sub1),b.sub2&&p.searchParams.set("sub2",b.sub2),b.sub3&&p.searchParams.set("sub3",b.sub3),b.sub4&&p.searchParams.set("sub4",b.sub4),b.sub5&&p.searchParams.set("sub5",b.sub5),b.sub6&&p.searchParams.set("sub6",b.sub6),b.sub7&&p.searchParams.set("sub7",b.sub7),b.sub8&&p.searchParams.set("sub8",b.sub8),b.sub9&&p.searchParams.set("sub9",b.sub9),b.sub10&&p.searchParams.set("sub10",b.sub10),b.sub11&&p.searchParams.set("sub11",b.sub11),b.sub12&&p.searchParams.set("sub12",b.sub12),b.sub13&&p.searchParams.set("sub13",b.sub13),b.sub14&&p.searchParams.set("sub14",b.sub14),b.sub15&&p.searchParams.set("sub15",b.sub15),b.sub16&&p.searchParams.set("sub16",b.sub16),p.toString()},m=async j=>{const g=await f(j);n(g,"URL лендинга с параметрами")},v=async j=>{const g=await f(j);window.open(g,"_blank")},x=(j,g,b)=>{u(p=>({...p,[j]:{...p[j],[g]:b}}))},w=j=>{c(o===j?null:j)};return y.useEffect(()=>{e.forEach(j=>{h(j),d[j.id]||u(g=>({...g,[j.id]:{sub1:"",sub2:"",sub3:"",sub4:"",sub5:"",sub6:"",sub7:"",sub8:"",sub9:"",sub10:"",sub11:"",sub12:"",sub13:"",sub14:"",sub15:"",sub16:""}}))})},[e,t]),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Vw,{className:"w-5 h-5"}),"Готовые трекинговые ссылки (",e.length,")"]}),r.jsx(Je,{children:"Готовые ссылки с кастомными доменами и автоматическим tracking. Никаких настроек не требуется - просто копируйте и используйте."})]}),r.jsx(H,{children:r.jsx("div",{className:"space-y-3",children:e.map(j=>{var g,b,p,N;return r.jsxs("div",{className:"border rounded-lg",children:[r.jsx("div",{className:"p-3",children:r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[r.jsx("h4",{className:"font-medium",children:j.name}),j.isDefault&&r.jsx(le,{variant:"default",className:"text-xs",children:"По умолчанию"}),r.jsx(le,{variant:"outline",className:"text-xs",children:j.type}),r.jsx(le,{variant:"secondary",className:"text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"✓ С трекингом"})]}),r.jsx("div",{className:"space-y-1",children:s[j.id]?r.jsx("code",{className:"text-sm text-green-600 dark:text-green-400 block font-medium break-all overflow-hidden",children:d[j.id]&&Object.values(d[j.id]).some(k=>k)?(()=>{const k=new URL(s[j.id]);return Object.entries(d[j.id]).forEach(([C,_])=>{_&&k.searchParams.set(C,_)}),k.toString()})():s[j.id]}):i[j.id]?r.jsx("span",{className:"text-xs text-muted-foreground",children:"⏳ Подготавливаем ссылку..."}):r.jsx("code",{className:"text-sm text-muted-foreground",children:"Ссылка будет готова через секунду..."})})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>m(j),title:"Копировать URL",disabled:i[j.id],className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50 dark:text-orange-400 dark:hover:text-orange-300 dark:hover:bg-orange-900/20",children:r.jsx(Yr,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>v(j),title:"Открыть в новой вкладке",disabled:i[j.id],className:"text-green-600 hover:text-green-700 hover:bg-green-50 dark:text-green-400 dark:hover:text-green-300 dark:hover:bg-green-900/20",children:r.jsx(Mf,{className:"w-4 h-4"})})]}),r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>w(j.id),title:"Дополнительные параметры",className:"text-blue-600 border-blue-200 hover:bg-blue-50 dark:text-blue-400 dark:border-blue-700 dark:hover:bg-blue-900/20",children:[r.jsx(fr,{className:"w-4 h-4 mr-1"}),"Дополнительно"]})]})]})}),o===j.id&&r.jsxs("div",{className:"border-t bg-gray-50 dark:bg-gray-900/50 p-4",children:[r.jsx("h5",{className:"font-medium text-sm mb-3 text-gray-700 dark:text-gray-300",children:"Дополнительные параметры трекинга (sub1-sub16)"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h6",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wide",children:"Основные параметры"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"sub1 - источник"}),r.jsx(ne,{placeholder:"facebook, google...",value:((g=d[j.id])==null?void 0:g.sub1)||"",onChange:k=>x(j.id,"sub1",k.target.value),className:"text-sm h-8"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"sub2 - кампания"}),r.jsx(ne,{placeholder:"campaign_name...",value:((b=d[j.id])==null?void 0:b.sub2)||"",onChange:k=>x(j.id,"sub2",k.target.value),className:"text-sm h-8"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"sub3 - креатив"}),r.jsx(ne,{placeholder:"banner_1...",value:((p=d[j.id])==null?void 0:p.sub3)||"",onChange:k=>x(j.id,"sub3",k.target.value),className:"text-sm h-8"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"sub4 - аудитория"}),r.jsx(ne,{placeholder:"audience_18+",value:((N=d[j.id])==null?void 0:N.sub4)||"",onChange:k=>x(j.id,"sub4",k.target.value),className:"text-sm h-8"})]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h6",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wide",children:"Дополнительные параметры"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[5,6,7,8,9,10,11,12].map(k=>{var C;return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:["sub",k]}),r.jsx(ne,{placeholder:`параметр ${k}`,value:((C=d[j.id])==null?void 0:C[`sub${k}`])||"",onChange:_=>x(j.id,`sub${k}`,_.target.value),className:"text-sm h-8"})]},k)})})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wide",children:"Расширенные параметры"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[13,14,15,16].map(k=>{var C;return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:["sub",k]}),r.jsx(ne,{placeholder:`параметр ${k}`,value:((C=d[j.id])==null?void 0:C[`sub${k}`])||"",onChange:_=>x(j.id,`sub${k}`,_.target.value),className:"text-sm h-8"})]},k)})})]}),r.jsxs("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[r.jsx("span",{children:"💡"}),r.jsx("span",{children:"Параметры автоматически добавляются в ссылку при заполнении. Поддерживается до 16 sub-параметров."})]})]})]},j.id)})})})]})};function tFe(){var b,p,N,k,C,_,P,D,E,$,A;const e=Rv(),[,t]=hs(),{toast:n}=lt(),s=Et(),[a,i]=y.useState(!1),l=e.id,{data:o,isLoading:c,error:d}=$e({queryKey:[`/api/partner/offers/${l}`],enabled:!!l,staleTime:1*60*1e3}),{data:u=[]}=$e({queryKey:["/api/partner/access-requests"],staleTime:2*60*1e3}),h=u.find(T=>(T.offerId||T.offer_id)===l),f=(h==null?void 0:h.status)||"none",m=f==="approved";console.log("OfferDetails Debug:",{offerId:l,accessRequests:u.length,currentRequest:h,requestStatus:f,isApproved:m,offerIsApproved:o==null?void 0:o.isApproved,offerIsPrivate:o==null?void 0:o.isPrivate,offerCreatives:o==null?void 0:o.creatives,offerCreativesUrl:o==null?void 0:o.creativesUrl,hasCreatives:!!(o!=null&&o.creatives||o!=null&&o.creativesUrl),allMatchingRequests:u.filter(T=>(T.offerId||T.offer_id)===l).map(T=>({id:T.id,offerId:T.offerId||T.offer_id,status:T.status}))});const v=async()=>{if(l&&f==="none"&&!a){i(!0);try{if((await fetch("/api/partner/offer-access-request",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({offerId:l,message:"Запрос доступа к офферу"})})).ok)n({title:"Запрос отправлен",description:"Ваш запрос на доступ к офферу отправлен рекламодателю"}),await s.invalidateQueries({queryKey:["/api/partner/access-requests"]}),await s.invalidateQueries({queryKey:[`/api/partner/offers/${l}`]}),await s.invalidateQueries({queryKey:["/api/partner/offers"]});else throw new Error("Ошибка отправки запроса")}catch{n({title:"Ошибка",description:"Не удалось отправить запрос. Попробуйте еще раз.",variant:"destructive"})}finally{i(!1)}}};if(c)return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>t("/affiliate/offers"),className:"flex items-center gap-2",children:[r.jsx(yc,{className:"w-4 h-4"}),"Назад к офферам"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Загрузка..."})]}),r.jsx("div",{className:"text-center p-8",children:r.jsx("p",{children:"Загружаем данные оффера..."})})]});if(d||!o)return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>t("/affiliate/offers"),className:"flex items-center gap-2",children:[r.jsx(yc,{className:"w-4 h-4"}),"Назад к офферам"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Ошибка"})]}),r.jsx("div",{className:"text-center p-8",children:r.jsx("p",{children:"Оффер не найден или произошла ошибка при загрузке"})})]});const x=(T,O)=>{navigator.clipboard.writeText(T),n({title:"Скопировано",description:`${O} скопировано в буфер обмена`})},w=async T=>{try{const O=localStorage.getItem("auth_token");if(console.log("Download request - token available:",!!O),console.log("Making request to:",`/api/partner/offers/${l}/creatives/download`),!O){n({title:"Ошибка авторизации",description:"Токен не найден. Пожалуйста, войдите в систему заново",variant:"destructive"});return}const z=await fetch(`/api/partner/offers/${l}/creatives/download`,{method:"GET",headers:{Authorization:`Bearer ${O}`,"Content-Type":"application/json"}});if(!z.ok){if(z.status===403){n({title:"Доступ запрещен",description:"У вас нет доступа к креативам этого оффера",variant:"destructive"});return}throw new Error(`HTTP error! status: ${z.status}`)}const F=await z.blob(),R=window.URL.createObjectURL(F),I=document.createElement("a");I.href=R,I.download=`creatives-${l}.zip`,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(R),n({title:"Архив скачан",description:"ZIP-архив с креативами готов к использованию"})}catch(O){console.error("Download error:",O),n({title:"Ошибка скачивания",description:"Не удалось скачать креативы",variant:"destructive"})}},j=J3e((o==null?void 0:o.category)||"other"),g=T=>{switch(T){case"active":return r.jsx(le,{variant:"outline",className:"text-green-600 border-green-600",children:"Активен"});case"paused":return r.jsx(le,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Приостановлен"});case"archived":return r.jsx(le,{variant:"outline",className:"text-gray-600 border-gray-600",children:"Архивирован"});default:return r.jsx(le,{variant:"outline",className:"text-blue-600 border-blue-600",children:"Черновик"})}};return o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>t("/affiliate/offers"),className:"flex items-center gap-2",children:[r.jsx(yc,{className:"w-4 h-4"}),"Назад к офферам"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Детали оффера"})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(Hj,{name:(o==null?void 0:o.name)||"Оффер",logo:o==null?void 0:o.logo,size:"xl",showTooltip:!0}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(ae,{className:"text-xl",children:(o==null?void 0:o.name)||"Загрузка..."}),r.jsx(le,{className:j.className,children:j.label}),g((o==null?void 0:o.status)||"draft")]}),r.jsx("p",{className:"text-black dark:text-white",children:typeof(o==null?void 0:o.description)=="object"?((b=o.description)==null?void 0:b.ru)||((p=o.description)==null?void 0:p.en)||"Описание не указано":(o==null?void 0:o.description)||"Описание не указано"})]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg dark:bg-green-900/20",children:[r.jsx(Ls,{className:"w-5 h-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-green-600",children:o!=null&&o.createdAt?new Date(o.createdAt).toLocaleDateString("ru-RU"):""}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Дата создания оффера"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg dark:bg-blue-900/20",children:[r.jsx(dr,{className:"w-5 h-5 text-blue-600"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-blue-600",children:[((N=o==null?void 0:o.countries)==null?void 0:N.length)||0," стран"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Доступные гео"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-50 rounded-lg dark:bg-purple-900/20",children:[r.jsx(Tm,{className:"w-5 h-5 text-purple-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-purple-600",children:o!=null&&o.advertiserId?`ID ${o.advertiserId.substring(0,8)}...`:"Рекламодатель"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Рекламодатель"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-orange-50 rounded-lg dark:bg-orange-900/20",children:[r.jsx(Qn,{className:"w-5 h-5 text-orange-600"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-orange-600",children:"Креативы"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Архив с материалами"})]}),m&&r.jsx(M,{onClick:()=>w(o.creatives||o.creativesUrl),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",title:"Скачать креативы",children:r.jsx(vr,{className:"w-4 h-4"})})]})]})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Lv,{className:"w-5 h-5"}),"Доступные страны"]})}),r.jsx(H,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:(o.countries||[]).map(T=>{var z,F;const O=((z=o.payoutByGeo)==null?void 0:z[T.toLowerCase()])||((F=o.payoutByGeo)==null?void 0:F[T.toUpperCase()])||parseFloat(o.payout);return r.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",title:Hc(T),children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsx("span",{className:"text-xl",children:Al(T)}),r.jsx("span",{className:"font-medium text-sm",children:Hc(T)})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsxs(le,{variant:"outline",className:"bg-blue-600 text-white border-blue-600 dark:bg-blue-500 dark:text-white dark:border-blue-500 font-bold text-sm px-2 py-1",children:[r.jsx(Rt,{className:"w-3 h-3 mr-1"}),O,o.currency]}),r.jsx(le,{variant:"secondary",className:"text-xs",children:T.toUpperCase()})]})]},T)})})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Условия и требования"})}),r.jsxs(H,{className:"space-y-4",children:[(o==null?void 0:o.kpiConditions)&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-3",children:"KPI условия"}),r.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200 dark:bg-amber-900/20 dark:border-amber-800",children:r.jsx("div",{className:"text-sm whitespace-pre-wrap",children:typeof o.kpiConditions=="object"?o.kpiConditions.ru||o.kpiConditions.en||"KPI условия не указаны":o.kpiConditions||"KPI условия не указаны"})})]}),r.jsx(wn,{}),(((k=o==null?void 0:o.trafficSources)==null?void 0:k.length)>0||((_=(C=o==null?void 0:o.kpiConditions)==null?void 0:C.allowedTrafficTypes)==null?void 0:_.length)>0)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Разрешенные источники трафика"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:((o==null?void 0:o.trafficSources)||((P=o==null?void 0:o.kpiConditions)==null?void 0:P.allowedTrafficTypes)||[]).map(T=>r.jsx(le,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:T},T))})]}),r.jsx(wn,{})]}),(((D=o==null?void 0:o.allowedApplications)==null?void 0:D.length)>0||(($=(E=o==null?void 0:o.restrictions)==null?void 0:E.allowed_sources)==null?void 0:$.length)>0)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Разрешенные площадки"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:((o==null?void 0:o.allowedApplications)||((A=o==null?void 0:o.restrictions)==null?void 0:A.allowed_sources)||[]).map(T=>r.jsx(le,{variant:"outline",className:"border-green-600 text-green-600 dark:border-green-400 dark:text-green-400",children:T},T))})]}),r.jsx(wn,{})]})]})]}),m?r.jsx(eFe,{landingPages:o.landingPages||[],offerId:o.id,onCopyUrl:x}):r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(qR,{className:"w-5 h-5"}),"Готовые трекинговые ссылки"]})}),r.jsxs(H,{className:"text-center space-y-4 py-12",children:[r.jsx(qR,{className:"h-16 w-16 text-muted-foreground mx-auto mb-6"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium mb-2",children:f==="pending"?"Запрос отправлен":"Требуется доступ"}),r.jsx("p",{className:"text-muted-foreground",children:f==="pending"?"Ваш запрос на доступ к готовым трекинговым ссылкам рассматривается рекламодателем":"Для получения готовых трекинговых ссылок с кастомными доменами необходимо запросить доступ у рекламодателя"})]}),f==="none"&&r.jsx(M,{onClick:v,disabled:a,className:"bg-blue-600 hover:bg-blue-700 text-white px-8",children:a?"Отправка запроса...":"Запросить доступ"}),f==="pending"&&r.jsx(M,{variant:"outline",className:"border-yellow-500 text-yellow-600 hover:bg-yellow-50 px-8",disabled:!0,children:"В ожидании одобрения"})]})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>t("/affiliate/offers"),className:"flex items-center gap-2",children:[r.jsx(yc,{className:"w-4 h-4"}),"Назад к офферам"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Загрузка..."})]}),r.jsx("div",{className:"flex items-center justify-center p-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Загружаем данные оффера..."})]})})]})}const rFe=Ke.object({subject:Ke.string().min(1,"Subject is required"),category:Ke.string().min(1,"Category is required"),priority:Ke.string().min(1,"Priority is required"),description:Ke.string().min(10,"Description must be at least 10 characters"),userId:Ke.string().optional()});function nFe(){Jt(),Ll(),lt(),Et();const[e,t]=y.useState("tickets"),[n,s]=y.useState(!1),[a,i]=y.useState("all"),[l,o]=y.useState("all"),[c,d]=y.useState(""),{data:u=[]}=$e({queryKey:["/api/admin/support/tickets"],queryFn:async()=>{const b=await fetch("/api/admin/support/tickets",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!b.ok)throw new Error("Ошибка загрузки тикетов поддержки");return b.json()},refetchInterval:1e4}),h=Zm({resolver:Jm(rFe),defaultValues:{subject:"",category:"general",priority:"medium",description:""}}),f=["general","account","finance","offers","technical","billing"],m=[{value:"low",label:"Low",color:"bg-green-100 text-green-800"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"High",color:"bg-red-100 text-red-800"}],v=[{value:"open",label:"Open",color:"bg-blue-100 text-blue-800"},{value:"in_progress",label:"In Progress",color:"bg-purple-100 text-purple-800"},{value:"resolved",label:"Resolved",color:"bg-green-100 text-green-800"},{value:"closed",label:"Closed",color:"bg-gray-100 text-gray-800"}],x=b=>{const p=v.find(N=>N.value===b);return p||v[0]},w=b=>{const p=m.find(N=>N.value===b);return p||m[1]},j=u.filter(b=>{const p=a==="all"||b.status===a,N=l==="all"||b.priority===l,k=b.subject.toLowerCase().includes(c.toLowerCase())||b.user.name.toLowerCase().includes(c.toLowerCase())||b.category.toLowerCase().includes(c.toLowerCase());return p&&N&&k}),g=[{title:"Knowledge Base",description:"Find answers to common questions",icon:r.jsx(IR,{className:"w-6 h-6"}),link:"#",articles:45},{title:"API Documentation",description:"Technical integration guides",icon:r.jsx(fr,{className:"w-6 h-6"}),link:"#",articles:12},{title:"Video Tutorials",description:"Step-by-step video guides",icon:r.jsx(Yre,{className:"w-6 h-6"}),link:"#",articles:23},{title:"FAQ",description:"Frequently asked questions",icon:r.jsx(Iv,{className:"w-6 h-6"}),link:"#",articles:38}];return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"Support Center"}),r.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 dark:bg-gray-900 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Support Center"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage support tickets and help resources"})]}),r.jsxs(jt,{open:n,onOpenChange:s,children:[r.jsx(Xa,{asChild:!0,children:r.jsxs(M,{"data-testid":"button-create-ticket",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Create Ticket"]})}),r.jsxs(vt,{className:"max-w-lg",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Create Support Ticket"})}),r.jsx(Qm,{...h,children:r.jsxs("form",{onSubmit:h.handleSubmit(b=>console.log(b)),className:"space-y-4",children:[r.jsx(dt,{control:h.control,name:"subject",render:({field:b})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Subject"}),r.jsx(ft,{children:r.jsx(ne,{...b,placeholder:"Brief description of the issue","data-testid":"input-subject"})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(dt,{control:h.control,name:"category",render:({field:b})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Category"}),r.jsxs(he,{onValueChange:b.onChange,defaultValue:b.value,children:[r.jsx(ft,{children:r.jsx(de,{"data-testid":"select-category",children:r.jsx(fe,{})})}),r.jsx(ue,{children:f.map(p=>r.jsx(S,{value:p,children:p.charAt(0).toUpperCase()+p.slice(1)},p))})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:h.control,name:"priority",render:({field:b})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Priority"}),r.jsxs(he,{onValueChange:b.onChange,defaultValue:b.value,children:[r.jsx(ft,{children:r.jsx(de,{"data-testid":"select-priority",children:r.jsx(fe,{})})}),r.jsx(ue,{children:m.map(p=>r.jsx(S,{value:p.value,children:p.label},p.value))})]}),r.jsx(mt,{})]})})]}),r.jsx(dt,{control:h.control,name:"description",render:({field:b})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Description"}),r.jsx(ft,{children:r.jsx(pt,{...b,placeholder:"Detailed description of the issue",rows:4,"data-testid":"textarea-description"})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),r.jsx(M,{type:"submit","data-testid":"button-submit-ticket",children:"Create Ticket"})]})]})})]})]})]}),r.jsxs(Zr,{value:e,onValueChange:t,className:"space-y-6",children:[r.jsxs(Vr,{children:[r.jsxs(We,{value:"tickets",className:"flex items-center gap-2",children:[r.jsx(Hx,{className:"w-4 h-4"}),"Support Tickets"]}),r.jsxs(We,{value:"resources",className:"flex items-center gap-2",children:[r.jsx(IR,{className:"w-4 h-4"}),"Resources"]})]}),r.jsxs(He,{value:"tickets",className:"space-y-6",children:[r.jsx(W,{children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Xr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{placeholder:"Поиск по тикетам, пользователям...",value:c,onChange:b=>d(b.target.value),className:"pl-10","data-testid":"input-search-tickets",title:"Поиск тикетов поддержки"})]}),r.jsxs(he,{value:a,onValueChange:i,children:[r.jsx(de,{className:"w-[140px]","data-testid":"select-filter-status",title:"Фильтр по статусу тикета",children:r.jsx(fe,{placeholder:"All Status"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"All Status"}),v.map(b=>r.jsx(S,{value:b.value,children:b.label},b.value))]})]}),r.jsxs(he,{value:l,onValueChange:o,children:[r.jsx(de,{className:"w-[140px]","data-testid":"select-filter-priority",title:"Фильтр по приоритету",children:r.jsx(fe,{placeholder:"All Priority"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"All Priority"}),m.map(b=>r.jsx(S,{value:b.value,children:b.label},b.value))]})]})]})})}),r.jsx("div",{className:"grid gap-4",children:j.map(b=>r.jsx(W,{"data-testid":`ticket-card-${b.id}`,children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:b.subject}),r.jsx(le,{className:x(b.status).color,children:x(b.status).label}),r.jsx(le,{className:w(b.priority).color,children:w(b.priority).label})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ro,{className:"w-4 h-4"}),b.user.name," (",b.user.role,")"]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lr,{className:"w-4 h-4"}),new Date(b.createdAt).toLocaleDateString()]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Hx,{className:"w-4 h-4"}),b.responses," responses"]})]}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:b.description})]}),r.jsxs(M,{variant:"outline",size:"sm","data-testid":`button-view-ticket-${b.id}`,children:["View",r.jsx(Nre,{className:"w-4 h-4 ml-1"})]})]})})},b.id))})]}),r.jsx(He,{value:"resources",className:"space-y-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map((b,p)=>r.jsx(W,{"data-testid":`resource-card-${p}`,children:r.jsxs(H,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"text-blue-600",children:b.icon}),r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:b.title})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:b.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs text-gray-500",children:[b.articles," articles"]}),r.jsx(M,{variant:"outline",size:"sm",children:r.jsx(Mf,{className:"w-4 h-4"})})]})]})},p))})})]})]})})]})]})}const r3=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function sFe(){Ll();const{isCollapsed:e}=Os(),[t,n]=y.useState("30d"),[s,a]=y.useState("all"),{data:i,isLoading:l}=$e({queryKey:["/api/admin/analytics/users",t,s],queryFn:async()=>{const u=new URLSearchParams;t&&u.append("period",t),s!=="all"&&u.append("role",s);const h=await fetch(`/api/admin/analytics/users?${u.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!h.ok)throw new Error("Failed to fetch analytics");return h.json()}}),{data:o}=$e({queryKey:["/api/admin/analytics/fraud",t],queryFn:async()=>{const u=await fetch(`/api/admin/analytics/fraud?period=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!u.ok)throw new Error("Failed to fetch fraud analytics");return u.json()}}),c=u=>{const h=document.createElement("a");h.href=`/api/admin/analytics/export?format=${u}&period=${t}&role=${s}`,h.download=`user_analytics_${t}.${u}`,h.click()},d=[{title:"Всего пользователей",value:(i==null?void 0:i.totalUsers)||0,change:(i==null?void 0:i.totalUsersChange)||"+0%",changeType:"increase",icon:ar,color:"blue"},{title:"Активные за 24ч",value:(i==null?void 0:i.active24h)||0,change:(i==null?void 0:i.active24hChange)||"+0%",changeType:"increase",icon:ln,color:"green"},{title:"Новые пользователи",value:(i==null?void 0:i.newUsers)||0,change:(i==null?void 0:i.newUsersChange)||"+0%",changeType:"increase",icon:Si,color:"purple"},{title:"Фрод-алерты",value:(o==null?void 0:o.totalAlerts)||0,change:(o==null?void 0:o.alertsChange)||"-0%",changeType:"decrease",icon:Lt,color:"red"}];return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${e?"ml-0 lg:ml-16":"ml-0 lg:ml-64"}`,children:[r.jsx(gn,{title:"Аналитика пользователей"}),r.jsx("main",{className:"flex-1 overflow-auto",children:r.jsxs("div",{className:"space-y-6 p-4 sm:p-6 max-w-full",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Аналитика пользователей"}),r.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Детальная аналитика пользователей, активности и безопасности"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(he,{value:t,onValueChange:n,children:[r.jsx(de,{className:"w-[150px]",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"24h",children:"24 часа"}),r.jsx(S,{value:"7d",children:"7 дней"}),r.jsx(S,{value:"30d",children:"30 дней"}),r.jsx(S,{value:"90d",children:"90 дней"})]})]}),r.jsxs(he,{value:s,onValueChange:a,children:[r.jsx(de,{className:"w-[150px]",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все роли"}),r.jsx(S,{value:"affiliate",children:"Партнеры"}),r.jsx(S,{value:"advertiser",children:"Рекламодатели"}),r.jsx(S,{value:"staff",children:"Сотрудники"})]})]}),r.jsxs(M,{variant:"outline",onClick:()=>c("excel"),children:[r.jsx(vr,{className:"mr-2 h-4 w-4"}),"Экспорт"]})]})]}),r.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:d.map(u=>{const h=u.icon;return r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:u.title}),r.jsx(h,{className:`h-4 w-4 text-${u.color}-600`})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold",children:u.value}),r.jsxs("p",{className:`text-xs ${u.changeType==="increase"?"text-green-600":"text-red-600"}`,children:[u.change," за период"]})]})]},u.title)})}),r.jsxs("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-2",children:[r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Распределение по ролям"})}),r.jsx(H,{children:r.jsx(pa,{width:"100%",height:300,children:r.jsxs(M4,{children:[r.jsx(Hi,{data:(i==null?void 0:i.roleDistribution)||[],cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"count",label:({name:u,percent:h})=>`${u} ${(h*100).toFixed(0)}%`,children:((i==null?void 0:i.roleDistribution)||[]).map((u,h)=>r.jsx(Hm,{fill:r3[h%r3.length]},`cell-${h}`))}),r.jsx(tn,{})]})})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Активность пользователей"})}),r.jsx(H,{children:r.jsx(pa,{width:"100%",height:300,children:r.jsxs(ry,{data:(i==null?void 0:i.activityTrend)||[],children:[r.jsx(Pi,{strokeDasharray:"3 3"}),r.jsx(Cs,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(ls,{type:"monotone",dataKey:"active24h",stroke:"#8884d8",strokeWidth:2,name:"Активные за 24ч"}),r.jsx(ls,{type:"monotone",dataKey:"active7d",stroke:"#82ca9d",strokeWidth:2,name:"Активные за 7д"})]})})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Новые регистрации"})}),r.jsx(H,{children:r.jsx(pa,{width:"100%",height:300,children:r.jsxs(D_,{data:(i==null?void 0:i.registrationTrend)||[],children:[r.jsx(Pi,{strokeDasharray:"3 3"}),r.jsx(Cs,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(To,{dataKey:"registrations",fill:"#8884d8"})]})})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Показатели безопасности"})}),r.jsx(H,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Фрод-алерты"}),r.jsx("span",{className:"text-lg font-bold text-red-600",children:(o==null?void 0:o.totalAlerts)||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Заблокированные пользователи"}),r.jsx("span",{className:"text-lg font-bold text-orange-600",children:(o==null?void 0:o.blockedUsers)||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Подозрительные IP"}),r.jsx("span",{className:"text-lg font-bold text-yellow-600",children:(o==null?void 0:o.suspiciousIPs)||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Процент фрода"}),r.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[(o==null?void 0:o.fraudRate)||0,"%"]})]})]})})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"География пользователей"})}),r.jsx(H,{children:r.jsx(pa,{width:"100%",height:400,children:r.jsxs(D_,{data:(i==null?void 0:i.geoDistribution)||[],layout:"horizontal",children:[r.jsx(Pi,{strokeDasharray:"3 3"}),r.jsx(Cs,{type:"number"}),r.jsx(_s,{dataKey:"country",type:"category",width:100}),r.jsx(tn,{}),r.jsx(To,{dataKey:"users",fill:"#8884d8"})]})})})]}),r.jsxs("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-2",children:[r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Последняя активность"})}),r.jsx(H,{children:r.jsx("div",{className:"space-y-3",children:((i==null?void 0:i.recentActivity)||[]).map((u,h)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ln,{className:"h-4 w-4 text-blue-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:u.user}),r.jsx("div",{className:"text-sm text-muted-foreground",children:u.action})]})]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(u.timestamp).toLocaleString()})]},h))})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"События безопасности"})}),r.jsx(H,{children:r.jsx("div",{className:"space-y-3",children:((o==null?void 0:o.securityEvents)||[]).map((u,h)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(qa,{className:"h-4 w-4 text-red-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:u.type}),r.jsx("div",{className:"text-sm text-muted-foreground",children:u.description})]})]}),r.jsx("div",{className:"text-sm text-red-600 font-medium",children:u.severity})]},h))})})]})]})]})})]})]})}const aFe=y.createContext(void 0);function iFe(){const e=y.useContext(aFe);if(e===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return e}function lFe(){const{toast:e}=lt(),[t,n]=y.useState(""),[s,a]=y.useState(""),[i,l]=y.useState(""),[o,c]=y.useState(""),[d,u]=y.useState(""),[h,f]=y.useState(""),[m,v]=y.useState(""),[x,w]=y.useState(""),[j,g]=y.useState(""),{data:b=[]}=$e({queryKey:["/api/admin/offers"]}),{data:p=[]}=$e({queryKey:["/api/admin/users"]}),N=p.filter(_=>_.role==="affiliate"),k=async()=>{if(!t||!s){e({title:"Ошибка",description:"Выберите партнёра и оффер",variant:"destructive"});return}try{const _=new URLSearchParams;i&&_.append("sub1",i),o&&_.append("sub2",o),d&&_.append("sub3",d),h&&_.append("sub4",h),m&&_.append("sub5",m),x&&_.append("landing_url",x);const P=await fetch(`/api/tracking-url/${t}/${s}?${_}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!P.ok)throw new Error("Ошибка генерации URL");const D=await P.json();g(D.trackingUrl),e({title:"URL сгенерирован",description:D.instructions})}catch{e({title:"Ошибка",description:"Не удалось сгенерировать URL",variant:"destructive"})}},C=()=>{navigator.clipboard.writeText(j),e({title:"Скопировано",description:"URL скопирован в буфер обмена"})};return r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Генератор tracking URL"}),r.jsx(Je,{children:"Создайте универсальную ссылку для партнёра с поддержкой макросов трекера"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"partner",children:"Партнёр"}),r.jsxs(he,{value:t,onValueChange:n,children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите партнёра"})}),r.jsx(ue,{children:N.map(_=>r.jsxs(S,{value:_.id,children:[_.email," (",_.username,")"]},_.id))})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"offer",children:"Оффер"}),r.jsxs(he,{value:s,onValueChange:a,children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите оффер"})}),r.jsx(ue,{children:b.map(_=>r.jsx(S,{value:_.id,children:_.name},_.id))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"sub1",children:"Sub ID 1"}),r.jsx(ne,{id:"sub1",value:i,onChange:_=>l(_.target.value),placeholder:"Например: facebook"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"sub2",children:"Sub ID 2"}),r.jsx(ne,{id:"sub2",value:o,onChange:_=>c(_.target.value),placeholder:"Например: campaign1"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"sub3",children:"Sub ID 3"}),r.jsx(ne,{id:"sub3",value:d,onChange:_=>u(_.target.value),placeholder:"Например: creative_a"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"sub4",children:"Sub ID 4"}),r.jsx(ne,{id:"sub4",value:h,onChange:_=>f(_.target.value),placeholder:"Дополнительный sub"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"sub5",children:"Sub ID 5"}),r.jsx(ne,{id:"sub5",value:m,onChange:_=>v(_.target.value),placeholder:"Дополнительный sub"})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"landingUrl",children:"Landing URL (опционально)"}),r.jsx(ne,{id:"landingUrl",value:x,onChange:_=>w(_.target.value),placeholder:"https://example.com/landing"})]}),r.jsx(M,{onClick:k,className:"w-full",children:"Сгенерировать URL"}),j&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Сгенерированный URL:"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ne,{value:j,readOnly:!0,className:"font-mono text-sm"}),r.jsx(M,{size:"icon",variant:"outline",onClick:C,title:"Копировать URL",children:r.jsx(Yr,{className:"h-4 w-4"})}),r.jsx(M,{size:"icon",variant:"outline",onClick:()=>window.open(j,"_blank"),title:"Открыть URL",children:r.jsx(Mf,{className:"h-4 w-4"})})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["💡 Замените ",r.jsx("code",{children:"{clickid}"})," на макрос вашего трекера для передачи уникального ID клика"]})]})]})]})}const Qk=[{value:"click",label:"Клик"},{value:"lead",label:"Лид (Регистрация)"},{value:"ftd",label:"FTD (Первый депозит)"},{value:"deposit",label:"Депозит"},{value:"approve",label:"Апрув"},{value:"reject",label:"Отклонение"},{value:"hold",label:"Холд"},{value:"conversion",label:"Конверсия"}],oFe=`
Доступные макросы:
{clickid} - Уникальный ID клика
{status} - Статус события (lead, ftd, approve, etc.)
{offer_id} - ID оффера
{partner_id} - ID партнёра
{payout} - Выплата партнёру
{revenue} - Доход рекламодателя
{currency} - Валюта
{sub1}-{sub5} - Подпараметры
{country} - Страна
{device} - Устройство
{ip} - IP адрес
{txid} - ID транзакции
{amount} - Сумма
{timestamp} - Временная метка

Пример URL:
https://tracker.com/postback?cid={clickid}&status={status}&sum={payout}&offer={offer_id}
`;function cFe(){iFe();const{toast:e}=lt(),t=Et(),[n,s]=y.useState(!1),[a,i]=y.useState(null),[l,o]=y.useState("postbacks"),[c,d]=y.useState({name:"",url:"",method:"GET",events:[],offerId:"",signatureKey:"",ipWhitelist:"",retryEnabled:!0,maxRetries:3,retryDelay:60,timeout:30,isActive:!0}),{data:u=[],isLoading:h}=$e({queryKey:["/api/postbacks"]}),{data:f=[],isLoading:m}=$e({queryKey:["/api/postback-logs"]}),{data:v=[]}=$e({queryKey:["/api/admin/offers"]}),x=Ee({mutationFn:async C=>{const _=a?`/api/postbacks/${a.id}`:"/api/postbacks";return Te(_,a?"PUT":"POST",C)},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/postbacks"]}),s(!1),g(),e({title:a?"Постбек обновлён":"Постбек создан",description:"Изменения сохранены успешно"})},onError:C=>{e({title:"Ошибка",description:C.message||"Не удалось сохранить постбек",variant:"destructive"})}}),w=Ee({mutationFn:C=>Te(`/api/postbacks/${C}`,"DELETE"),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/postbacks"]}),e({title:"Постбек удалён",description:"Постбек успешно удалён"})},onError:C=>{e({title:"Ошибка",description:C.message||"Не удалось удалить постбек",variant:"destructive"})}}),j=Ee({mutationFn:C=>Te(`/api/postbacks/${C}/test`,"POST"),onSuccess:()=>{e({title:"Тест отправлен",description:"Тестовый постбек отправлен успешно"})},onError:C=>{e({title:"Ошибка теста",description:C.message||"Не удалось отправить тестовый постбек",variant:"destructive"})}}),g=()=>{d({name:"",url:"",method:"GET",events:[],offerId:"",signatureKey:"",ipWhitelist:"",retryEnabled:!0,maxRetries:3,retryDelay:60,timeout:30,isActive:!0}),i(null)},b=C=>{var _;i(C),d({name:C.name,url:C.url,method:C.method,events:C.events,offerId:C.offerId||"",signatureKey:C.signatureKey||"",ipWhitelist:((_=C.ipWhitelist)==null?void 0:_.join(`
`))||"",retryEnabled:C.retryEnabled,maxRetries:C.maxRetries,retryDelay:C.retryDelay,timeout:C.timeout,isActive:C.isActive}),s(!0)},p=C=>{C.preventDefault();const _={...c,events:c.events,ipWhitelist:c.ipWhitelist?c.ipWhitelist.split(`
`).filter(P=>P.trim()):[],offerId:c.offerId||null};x.mutate(_)},N=C=>{navigator.clipboard.writeText(C),e({title:"Скопировано",description:"URL скопирован в буфер обмена"})},k=C=>{const _={sent:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"},P={sent:"Отправлен",failed:"Ошибка",pending:"В ожидании"};return r.jsx(le,{className:_[C],children:P[C]||C})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Управление Постбеками"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Настройка уведомлений о событиях для партнёров и рекламодателей"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(M,{variant:l==="postbacks"?"default":"outline",onClick:()=>o("postbacks"),"data-testid":"tab-postbacks",children:"Постбеки"}),r.jsx(M,{variant:l==="logs"?"default":"outline",onClick:()=>o("logs"),"data-testid":"tab-logs",children:"Логи"}),r.jsx(M,{variant:l==="tracking"?"default":"outline",onClick:()=>o("tracking"),"data-testid":"tab-tracking",children:"Tracking URL"})]})]}),l==="postbacks"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs(jt,{open:n,onOpenChange:s,children:[r.jsx(Xa,{asChild:!0,children:r.jsxs(M,{onClick:g,"data-testid":"button-add-postback",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Добавить Постбек"]})}),r.jsxs(vt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(yt,{children:[r.jsx(bt,{children:a?"Редактировать Постбек":"Создать Постбек"}),r.jsx(Ur,{children:"Настройте URL для получения уведомлений о событиях"})]}),r.jsxs("form",{onSubmit:p,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"name",children:"Название"}),r.jsx(ne,{id:"name",value:c.name,onChange:C=>d(_=>({..._,name:C.target.value})),required:!0,"data-testid":"input-name"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"method",children:"Метод"}),r.jsxs(he,{value:c.method,onValueChange:C=>d(_=>({..._,method:C})),children:[r.jsx(de,{"data-testid":"select-method",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"GET",children:"GET"}),r.jsx(S,{value:"POST",children:"POST"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"url",children:"Postback URL"}),r.jsx(pt,{id:"url",value:c.url,onChange:C=>d(_=>({..._,url:C.target.value})),placeholder:"https://tracker.com/postback?cid={clickid}&status={status}&sum={payout}",required:!0,"data-testid":"input-url"}),r.jsx("div",{className:"mt-2 text-xs text-gray-500",children:r.jsxs("details",{children:[r.jsx("summary",{className:"cursor-pointer",children:"Показать доступные макросы"}),r.jsx("pre",{className:"mt-2 whitespace-pre-wrap text-xs",children:oFe})]})})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"offer",children:"Оффер (оставьте пустым для глобального)"}),r.jsxs(he,{value:c.offerId,onValueChange:C=>d(_=>({..._,offerId:C})),children:[r.jsx(de,{"data-testid":"select-offer",children:r.jsx(fe,{placeholder:"Выберите оффер или оставьте пустым"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"",children:"Все офферы (глобальный)"}),v.map(C=>r.jsx(S,{value:C.id,children:C.name},C.id))]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"События для отправки"}),r.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:Qk.map(C=>r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:c.events.includes(C.value),onChange:_=>{_.target.checked?d(P=>({...P,events:[...P.events,C.value]})):d(P=>({...P,events:P.events.filter(D=>D!==C.value)}))},"data-testid":`checkbox-event-${C.value}`}),r.jsx("span",{className:"text-sm",children:C.label})]},C.value))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"signatureKey",children:"Ключ подписи (опционально)"}),r.jsx(ne,{id:"signatureKey",type:"password",value:c.signatureKey,onChange:C=>d(_=>({..._,signatureKey:C.target.value})),placeholder:"Для HMAC подписи","data-testid":"input-signature-key"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"timeout",children:"Таймаут (сек)"}),r.jsx(ne,{id:"timeout",type:"number",value:c.timeout,onChange:C=>d(_=>({..._,timeout:parseInt(C.target.value)})),min:"1",max:"120","data-testid":"input-timeout"})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"ipWhitelist",children:"Белый список IP (по одному на строку)"}),r.jsx(pt,{id:"ipWhitelist",value:c.ipWhitelist,onChange:C=>d(_=>({..._,ipWhitelist:C.target.value})),placeholder:`192.168.1.1
10.0.0.1`,"data-testid":"input-ip-whitelist"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{checked:c.retryEnabled,onCheckedChange:C=>d(_=>({..._,retryEnabled:C})),"data-testid":"switch-retry-enabled"}),r.jsx(L,{children:"Повторы при ошибках"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"maxRetries",children:"Макс. повторов"}),r.jsx(ne,{id:"maxRetries",type:"number",value:c.maxRetries,onChange:C=>d(_=>({..._,maxRetries:parseInt(C.target.value)})),min:"0",max:"10",disabled:!c.retryEnabled,"data-testid":"input-max-retries"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"retryDelay",children:"Задержка (сек)"}),r.jsx(ne,{id:"retryDelay",type:"number",value:c.retryDelay,onChange:C=>d(_=>({..._,retryDelay:parseInt(C.target.value)})),min:"1",disabled:!c.retryEnabled,"data-testid":"input-retry-delay"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{checked:c.isActive,onCheckedChange:C=>d(_=>({..._,isActive:C})),"data-testid":"switch-is-active"}),r.jsx(L,{children:"Активен"})]}),r.jsxs(vo,{children:[r.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Отмена"}),r.jsx(M,{type:"submit",disabled:x.isPending,children:x.isPending?"Сохранение...":"Сохранить"})]})]})]})]})}),r.jsx("div",{className:"grid gap-4",children:h?r.jsx("div",{className:"text-center py-8",children:"Загрузка постбеков..."}):u.length===0?r.jsx(W,{children:r.jsxs(H,{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-500",children:"Постбеки не настроены"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Добавьте первый постбек для получения уведомлений о событиях"})]})}):u.map(C=>r.jsxs(W,{children:[r.jsx(se,{className:"pb-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[C.name,C.isActive?r.jsx(le,{className:"bg-green-100 text-green-800",children:"Активен"}):r.jsx(le,{variant:"secondary",children:"Неактивен"})]}),r.jsx(Je,{children:C.offerName?`Оффер: ${C.offerName}`:"Глобальный постбек"})]}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>N(C.url),title:"Копировать URL","data-testid":`button-copy-${C.id}`,children:r.jsx(Yr,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>j.mutate(C.id),title:"Тестовый запрос","data-testid":`button-test-${C.id}`,children:r.jsx(Mf,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>b(C),title:"Редактировать","data-testid":`button-edit-${C.id}`,children:r.jsx(cs,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>w.mutate(C.id),title:"Удалить","data-testid":`button-delete-${C.id}`,children:r.jsx(wr,{className:"w-4 h-4 text-red-500"})})]})]})}),r.jsxs(H,{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"URL:"}),r.jsx("div",{className:"text-xs bg-gray-100 dark:bg-gray-800 p-2 rounded font-mono break-all",children:C.url})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(le,{variant:"outline",children:C.method}),C.events.map(_=>{var P;return r.jsx(le,{variant:"secondary",children:((P=Qk.find(D=>D.value===_))==null?void 0:P.label)||_},_)})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-gray-500",children:[r.jsxs("div",{children:["Таймаут: ",C.timeout,"с"]}),r.jsxs("div",{children:["Повторы: ",C.retryEnabled?`${C.maxRetries} раз`:"Отключены"]})]})]})]},C.id))})]}),l==="logs"&&r.jsx("div",{className:"space-y-6",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Журнал Постбеков"}),r.jsx(Je,{children:"История отправки постбеков и их статусы"})]}),r.jsx(H,{children:m?r.jsx("div",{className:"text-center py-8",children:"Загрузка журнала..."}):f.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Журнал постбеков пуст"}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Постбек"}),r.jsx("th",{className:"text-left p-2",children:"Событие"}),r.jsx("th",{className:"text-left p-2",children:"URL"}),r.jsx("th",{className:"text-left p-2",children:"Статус"}),r.jsx("th",{className:"text-left p-2",children:"Ответ"}),r.jsx("th",{className:"text-left p-2",children:"Время"}),r.jsx("th",{className:"text-left p-2",children:"Дата"})]})}),r.jsx("tbody",{children:f.map(C=>{var _;return r.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-800",children:[r.jsxs("td",{className:"p-2",children:[r.jsx("div",{className:"font-medium",children:C.postbackName}),C.retryCount>0&&r.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[r.jsx(xu,{className:"w-3 h-3"}),"Попытка ",C.retryCount+1]})]}),r.jsx("td",{className:"p-2",children:r.jsx(le,{variant:"outline",children:((_=Qk.find(P=>P.value===C.eventType))==null?void 0:_.label)||C.eventType})}),r.jsx("td",{className:"p-2",children:r.jsx("div",{className:"max-w-xs truncate text-xs font-mono",children:C.url})}),r.jsx("td",{className:"p-2",children:k(C.status)}),r.jsxs("td",{className:"p-2",children:[C.responseStatus&&r.jsxs("div",{className:"text-xs",children:[r.jsxs("div",{children:["HTTP ",C.responseStatus]}),C.responseTime&&r.jsxs("div",{className:"text-gray-500",children:[C.responseTime,"ms"]})]}),C.errorMessage&&r.jsx("div",{className:"text-xs text-red-600 max-w-xs truncate",children:C.errorMessage})]}),r.jsx("td",{className:"p-2 text-xs",children:C.sentAt&&new Date(C.sentAt).toLocaleString("ru-RU")}),r.jsx("td",{className:"p-2 text-xs",children:new Date(C.createdAt).toLocaleString("ru-RU")})]},C.id)})})]})})})]})}),l==="tracking"&&r.jsx(lFe,{})]})}function dFe(){return r.jsx(cFe,{})}const uFe=$v("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),U_=y.forwardRef(({className:e,variant:t,...n},s)=>r.jsx("div",{ref:s,role:"alert",className:Ae(uFe({variant:t}),e),...n}));U_.displayName="Alert";const hFe=y.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:Ae("mb-1 font-medium leading-none tracking-tight",e),...t}));hFe.displayName="AlertTitle";const B_=y.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ae("text-sm [&_p]:leading-relaxed",e),...t}));B_.displayName="AlertDescription";function fFe(){const[e,t]=y.useState(""),[n,s]=y.useState("cname"),[a,i]=y.useState(null);y.useState(!1);const{toast:l}=lt(),o=Et(),{data:c=[],isLoading:d}=$e({queryKey:["/api/advertiser/profile/domains"],staleTime:3e4}),u=Ee({mutationFn:async g=>Te("/api/advertiser/profile/domains","POST",g),onSuccess:g=>{l({title:"✅ Домен успешно добавлен",description:`Домен ${g.domain} добавлен и ожидает верификации. Перейдите к инструкциям DNS для настройки.`}),t(""),o.invalidateQueries({queryKey:["/api/advertiser/profile/domains"]})},onError:g=>{console.error("Domain add error:",g),l({title:"❌ Ошибка добавления домена",description:(g==null?void 0:g.message)||"Не удалось добавить домен. Проверьте правильность ввода и попробуйте снова.",variant:"destructive"})}}),h=Ee({mutationFn:async g=>Te(`/api/advertiser/profile/domains/${g}/verify`,"POST"),onSuccess:(g,b)=>{g.success?l({title:"Домен верифицирован",description:"Ваш кастомный домен успешно верифицирован и активирован!"}):l({title:"Верификация не пройдена",description:g.error||"Проверьте DNS настройки и повторите попытку",variant:"destructive"}),o.invalidateQueries({queryKey:["/api/advertiser/profile/domains"]})},onError:()=>{l({title:"Ошибка верификации",description:"Произошла ошибка при проверке домена",variant:"destructive"})}}),f=Ee({mutationFn:async g=>Te(`/api/advertiser/profile/domains/${g}/ssl`,"POST"),onSuccess:g=>{l({title:"SSL сертификат выдается",description:g.message||"SSL сертификат выдается. Проверьте статус через несколько минут."}),o.invalidateQueries({queryKey:["/api/advertiser/profile/domains"]})},onError:g=>{l({title:"Ошибка выдачи SSL",description:(g==null?void 0:g.error)||"Не удалось запустить выдачу SSL сертификата",variant:"destructive"})}}),m=Ee({mutationFn:async g=>Te(`/api/advertiser/profile/domains/${g}`,"DELETE"),onSuccess:()=>{l({title:"Домен удален",description:"Кастомный домен успешно удален"}),o.invalidateQueries({queryKey:["/api/advertiser/profile/domains"]})}}),v=()=>{if(!e.trim()){l({title:"Ошибка",description:"Введите доменное имя",variant:"destructive"});return}if(!/^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?)*$/.test(e.trim())){l({title:"Ошибка",description:"Введите корректное доменное имя",variant:"destructive"});return}u.mutate({domain:e.trim(),type:n})},x=g=>{navigator.clipboard.writeText(g),l({title:"Скопировано",description:"Значение скопировано в буфер обмена"})},w=g=>{switch(g){case"verified":return r.jsx(oo,{className:"h-4 w-4 text-green-600"});case"pending":return r.jsx(lr,{className:"h-4 w-4 text-yellow-600"});case"verifying":return r.jsx(Vt,{className:"h-4 w-4 text-blue-600 animate-spin"});case"failed":case"error":return r.jsx(ma,{className:"h-4 w-4 text-red-600"});case"expired":return r.jsx(ma,{className:"h-4 w-4 text-gray-600"})}},j=g=>{const b={verified:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",text:"Активен"},pending:{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",text:"Ожидание"},verifying:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",text:"Проверяется"},failed:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",text:"Ошибка"},error:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",text:"Ошибка"},expired:{color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",text:"Истек"}},p=b[g]||b.error;return r.jsx(le,{className:p.color,children:p.text})};return d?r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(dr,{className:"h-5 w-5"}),"Кастомные домены"]})}),r.jsx(H,{children:r.jsx("div",{className:"flex items-center justify-center h-32",children:r.jsx(Vt,{className:"h-6 w-6 animate-spin"})})})]}):r.jsx("div",{className:"space-y-6",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(dr,{className:"h-5 w-5"}),"Кастомные домены"]}),r.jsx(Je,{children:"Используйте свои домены для трекинговых ссылок. Это повышает доверие пользователей и обеспечивает белый лейбл."})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(L,{htmlFor:"domain",children:"Доменное имя"}),r.jsx(ne,{id:"domain",placeholder:"track.example.com",value:e,onChange:g=>t(g.target.value),"data-testid":"input-new-domain"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"domain-type",children:"Тип записи"}),r.jsxs(he,{value:n,onValueChange:g=>s(g),children:[r.jsx(de,{"data-testid":"select-domain-type",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"cname",children:"CNAME (рекомендуется)"}),r.jsx(S,{value:"a_record",children:"A запись"}),r.jsx(S,{value:"txt_record",children:"TXT запись"})]})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx(M,{onClick:v,disabled:u.isPending,"data-testid":"button-add-domain",className:"w-full",children:u.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Добавляем..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить"]})})})]}),r.jsx(wn,{}),r.jsx("div",{className:"space-y-4",children:!Array.isArray(c)||c.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[r.jsx(dr,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),r.jsx("p",{children:"У вас пока нет кастомных доменов"}),r.jsx("p",{className:"text-sm",children:"Добавьте домен выше, чтобы начать использовать белый лейбл"})]}):c.map(g=>r.jsx(W,{className:"border-l-4 border-l-blue-500",children:r.jsxs(H,{className:"pt-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[w(g.status),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:g.domain}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Добавлен ",new Date(g.createdAt).toLocaleDateString("ru-RU")]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[j(g.status),g.sslStatus==="issued"&&r.jsxs(le,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:[r.jsx(Lt,{className:"h-3 w-3 mr-1"}),"SSL активен"]}),g.sslStatus==="pending"&&r.jsxs(le,{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:[r.jsx(lr,{className:"h-3 w-3 mr-1"}),"SSL выдается"]}),g.sslStatus==="failed"&&r.jsxs(le,{className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",children:[r.jsx(ma,{className:"h-3 w-3 mr-1"}),"SSL ошибка"]}),g.status==="verified"&&(!g.sslStatus||g.sslStatus==="none")&&r.jsxs(le,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:[r.jsx(wb,{className:"h-3 w-3 mr-1"}),"Готов к SSL"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[g.status!=="verified"&&r.jsx(M,{size:"sm",onClick:()=>h.mutate(g.id),disabled:h.isPending,"data-testid":`button-verify-${g.id}`,children:h.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Vt,{className:"h-3 w-3 mr-1 animate-spin"}),"Проверяем..."]}):r.jsxs(r.Fragment,{children:[r.jsx(oo,{className:"h-3 w-3 mr-1"}),"Проверить домен"]})}),g.status==="verified"&&(!g.sslStatus||g.sslStatus==="none"||g.sslStatus==="failed")&&r.jsx(M,{size:"sm",onClick:()=>f.mutate(g.id),disabled:f.isPending,"data-testid":`button-ssl-${g.id}`,className:"bg-green-600 hover:bg-green-700 text-white",children:f.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Vt,{className:"h-3 w-3 mr-1 animate-spin"}),"Выдаем SSL..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Выдать SSL"]})}),r.jsxs(jt,{children:[r.jsx(Xa,{asChild:!0,children:r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>i(g),children:[r.jsx(B2,{className:"h-3 w-3 mr-1"}),"Инструкции DNS"]})}),r.jsxs(vt,{className:"max-w-2xl",children:[r.jsxs(yt,{children:[r.jsxs(bt,{children:["DNS инструкции для ",g.domain]}),r.jsx(Ur,{children:"Следуйте инструкциям ниже для настройки DNS записей"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-semibold",children:"Тип записи"}),r.jsx("div",{className:"flex items-center gap-2 mt-1",children:r.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm",children:g.type==="cname"?"CNAME":"TXT"})})]}),r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-semibold",children:"Имя/Host"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm break-all",children:g.type==="cname"?g.domain.split(".")[0]:g.domain.includes(".")?g.domain:"@"}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>x(g.type==="cname"?g.domain.split(".")[0]:g.domain.includes(".")?g.domain:"@"),title:"Скопировать хост",children:r.jsx(Yr,{className:"h-3 w-3"})})]})]}),r.jsxs("div",{children:[r.jsx(L,{className:"text-sm font-semibold",children:"Значение"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm break-all",children:g.type==="cname"?g.targetValue||"affiliate-tracker.replit.app":g.verificationValue}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>x(g.type==="cname"?g.targetValue||"affiliate-tracker.replit.app":g.verificationValue),title:"Скопировать значение",children:r.jsx(Yr,{className:"h-3 w-3"})})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(U_,{children:[r.jsx(B2,{className:"h-4 w-4"}),r.jsx(B_,{children:g.type==="cname"?"Добавьте CNAME запись в DNS настройках вашего домена. Это позволит использовать ваш собственный домен для трекинговых ссылок с белым лейблом.":'Добавьте TXT запись в DNS настройках вашего домена для верификации. После добавления записи нажмите "Проверить домен".'})]}),r.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-950 rounded-lg",children:[r.jsx("h5",{className:"font-medium mb-2 text-green-800 dark:text-green-200",children:"После настройки ваши трекинговые ссылки будут выглядеть так:"}),r.jsxs("code",{className:"text-sm bg-white dark:bg-gray-800 px-3 py-2 rounded border block",children:["https://",g.domain,"/click?offer=123&clickid=partner_abc123"]}),r.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2",children:"Белый лейбл повышает доверие пользователей и улучшает конверсию!"})]}),r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsx("h5",{className:"font-medium mb-2",children:"Пошаговая инструкция:"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("li",{children:"Войдите в панель управления DNS вашего провайдера домена (GoDaddy, Namecheap, Cloudflare и т.д.)"}),r.jsx("li",{children:'Найдите раздел "DNS Records", "DNS управление" или "Zone File"'}),r.jsxs("li",{children:["Добавьте новую ",g.type==="cname"?"CNAME":"TXT"," запись:"]}),r.jsxs("li",{className:"ml-4",children:["• Тип: ",r.jsx("strong",{children:g.type==="cname"?"CNAME":"TXT"}),r.jsx("br",{}),"• Имя/Host: ",r.jsx("strong",{children:g.type==="cname"?g.domain.split(".")[0]:g.domain.includes(".")?g.domain:"@"}),r.jsx("br",{}),"• Значение: ",r.jsx("strong",{children:g.type==="cname"?g.targetValue||"affiliate-tracker.replit.app":g.verificationValue})]}),r.jsx("li",{children:"Сохраните изменения (распространение DNS может занять 5-30 минут)"}),r.jsx("li",{children:'Вернитесь сюда и нажмите "Проверить домен" для верификации'})]})]}),g.type==="cname"&&r.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-950 rounded-lg",children:r.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[r.jsx("strong",{children:"Важно:"})," CNAME запись должна указывать на ",g.targetValue||"affiliate-tracker.replit.app",", а имя записи должно быть ",g.domain.split(".")[0]," (первая часть вашего домена)"]})}),g.type==="a_record"&&r.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-950 rounded-lg",children:r.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[r.jsx("strong",{children:"Важно для корневого домена:"})," Добавьте TXT запись для верификации. Имя записи должно быть точно ",g.domain," (или @ для корневого домена), значение: ",g.verificationValue]})})]})]}),g.status==="verified"&&r.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[r.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[r.jsx(wb,{className:"h-4 w-4"}),"Пример трекинговой ссылки"]}),r.jsxs("code",{className:"bg-gray-100 dark:bg-gray-800 px-3 py-2 rounded text-sm block",children:["https://",g.domain,"/click?offer=123&clickid=partner_abc123"]})]})]})]})]}),r.jsx(M,{size:"sm",variant:"destructive",onClick:()=>m.mutate(g.id),disabled:m.isPending,"data-testid":`button-delete-${g.id}`,children:r.jsx(wr,{className:"h-3 w-3"})})]}),g.errorMessage&&r.jsxs(U_,{className:"mt-4",variant:"destructive",children:[r.jsx(ma,{className:"h-4 w-4"}),r.jsx(B_,{children:g.errorMessage})]}),g.sslStatus&&g.sslStatus!=="none"&&r.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[r.jsxs("h5",{className:"font-medium mb-2 flex items-center gap-2",children:[r.jsx(Lt,{className:"h-4 w-4"}),"SSL Сертификат"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Статус:"}),r.jsxs("span",{className:"ml-2 font-medium",children:[g.sslStatus==="issued"&&"✅ Выдан",g.sslStatus==="pending"&&"⏳ Выдается",g.sslStatus==="failed"&&"❌ Ошибка",g.sslStatus==="expired"&&"⚠️ Истек"]})]}),g.sslIssuer&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Центр:"}),r.jsx("span",{className:"ml-2 font-medium",children:g.sslIssuer})]}),g.sslValidUntil&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Действует до:"}),r.jsx("span",{className:"ml-2 font-medium",children:new Date(g.sslValidUntil).toLocaleDateString("ru-RU")})]}),g.sslErrorMessage&&r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-red-600 dark:text-red-400",children:"Ошибка:"}),r.jsx("span",{className:"ml-2",children:g.sslErrorMessage})]})]})]}),g.lastChecked&&r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Последняя проверка: ",new Date(g.lastChecked).toLocaleString("ru-RU")]})]})},g.id))})]})]})})}const mFe=[{value:"en",label:"English"},{value:"ru",label:"Русский"},{value:"es",label:"Español"},{value:"pt",label:"Português"},{value:"fr",label:"Français"},{value:"de",label:"Deutsch"},{value:"tr",label:"Türkçe"},{value:"zh",label:"中文"},{value:"it",label:"Italiano"}],pFe=[{value:"USD",label:"US Dollar"},{value:"EUR",label:"Euro"},{value:"GBP",label:"British Pound"},{value:"RUB",label:"Russian Ruble"},{value:"BRL",label:"Brazilian Real"}],xFe=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"New York (EST/EDT)"},{value:"Europe/London",label:"London (GMT/BST)"},{value:"Europe/Moscow",label:"Moscow (MSK)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"}];function gFe(){var ce,Ie,ie,st;const{user:e}=Jt(),{toast:t}=lt(),n=Et(),[s,a]=y.useState("account"),[i,l]=y.useState(!1),[o,c]=y.useState({}),[d,u]=y.useState({current:"",new:"",confirm:""}),[h,f]=y.useState({}),[m,v]=y.useState({defaultUrl:"",ipWhitelist:[],enabled:!0}),[x,w]=y.useState({email:!1,telegram:!1,sms:!1}),[j,g]=y.useState(""),{data:b,isLoading:p}=$e({queryKey:["/api/auth/me"],enabled:!!e}),{data:N,isLoading:k}=$e({queryKey:["/api/advertiser/api-tokens"]}),{data:C,isLoading:_}=$e({queryKey:["/api/advertiser/profile/webhook"]});y.useEffect(()=>{var G,De,me,Be,qe,Qe,Ct,er,V,U,re,ve,_e,Pe,X,ee,ke;e&&(f({firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phone:e.phone||"",company:e.company||"",country:e.country||"US",language:e.language||"en",timezone:e.timezone||"UTC",currency:e.currency||"USD",twoFactorEnabled:e.twoFactorEnabled||!1,settings:{brandName:((G=e.settings)==null?void 0:G.brandName)||"",brandDescription:((De=e.settings)==null?void 0:De.brandDescription)||"",brandLogo:((me=e.settings)==null?void 0:me.brandLogo)||"",vertical:((Be=e.settings)==null?void 0:Be.vertical)||"",partnerRules:((qe=e.settings)==null?void 0:qe.partnerRules)||"",notifications:{email:((Ct=(Qe=e.settings)==null?void 0:Qe.notifications)==null?void 0:Ct.email)||!1,telegram:((V=(er=e.settings)==null?void 0:er.notifications)==null?void 0:V.telegram)||!1,sms:((re=(U=e.settings)==null?void 0:U.notifications)==null?void 0:re.sms)||!1}}}),w({email:((_e=(ve=e.settings)==null?void 0:ve.notifications)==null?void 0:_e.email)||!1,telegram:((X=(Pe=e.settings)==null?void 0:Pe.notifications)==null?void 0:X.telegram)||!1,sms:((ke=(ee=e.settings)==null?void 0:ee.notifications)==null?void 0:ke.sms)||!1}),g(e.telegramChatId?String(e.telegramChatId):""),f(Fe=>({...Fe,telegram:e.telegram||"",telegramChatId:e.telegramChatId||null})))},[e]),y.useEffect(()=>{C&&v({defaultUrl:C.defaultUrl||"",ipWhitelist:C.ipWhitelist||[],enabled:C.enabled!==void 0?C.enabled:!0})},[C]);const P=Ee({mutationFn:async G=>Te("/api/advertiser/profile","PATCH",G),onSuccess:()=>{t({title:"Профиль обновлен",description:"Данные профиля успешно сохранены"}),n.invalidateQueries({queryKey:["/api/auth/me"]}),l(!1)},onError:()=>{t({title:"Ошибка",description:"Не удалось обновить профиль",variant:"destructive"})}}),D=Ee({mutationFn:async G=>Te("/api/advertiser/profile/change-password","POST",G),onSuccess:()=>{t({title:"Пароль изменен",description:"Пароль успешно обновлен"}),u({current:"",new:"",confirm:""})},onError:()=>{t({title:"Ошибка",description:"Не удалось изменить пароль",variant:"destructive"})}}),E=Ee({mutationFn:async G=>Te("/api/advertiser/2fa/toggle","POST",{enabled:G}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/auth/me"]}),t({title:"2FA обновлена",description:"Настройки двухфакторной аутентификации изменены"})},onError:G=>{t({title:"Ошибка",description:G.message||"Не удалось изменить настройки 2FA",variant:"destructive"})}}),$=Ee({mutationFn:async G=>Te("/api/advertiser/api-tokens","POST",{name:G}),onSuccess:()=>{t({title:"Токен создан",description:"Новый API токен успешно создан"}),n.invalidateQueries({queryKey:["/api/advertiser/api-tokens"]})},onError:()=>{t({title:"Ошибка",description:"Не удалось создать токен",variant:"destructive"})}}),A=Ee({mutationFn:async G=>Te(`/api/advertiser/api-tokens/${G}`,"DELETE"),onSuccess:()=>{t({title:"Токен удален",description:"API токен успешно удален"}),n.invalidateQueries({queryKey:["/api/advertiser/api-tokens"]})},onError:()=>{t({title:"Ошибка",description:"Не удалось удалить токен",variant:"destructive"})}}),T=Ee({mutationFn:async G=>Te("/api/advertiser/profile/webhook","PATCH",G),onSuccess:()=>{t({title:"Webhook обновлен",description:"Настройки webhook успешно сохранены"}),n.invalidateQueries({queryKey:["/api/advertiser/profile/webhook"]})},onError:()=>{t({title:"Ошибка",description:"Не удалось обновить webhook",variant:"destructive"})}}),O=Ee({mutationFn:async G=>Te("/api/advertiser/profile/notifications","PATCH",{notifications:G}),onSuccess:()=>{t({title:"Уведомления обновлены",description:"Настройки уведомлений успешно сохранены"}),n.invalidateQueries({queryKey:["/api/auth/me"]})},onError:()=>{t({title:"Ошибка",description:"Не удалось обновить уведомления",variant:"destructive"})}}),z=Ee({mutationFn:async G=>Te("/api/telegram/link","PATCH",{telegramChatId:G}),onSuccess:()=>{t({title:"Telegram привязан",description:"Аккаунт Telegram успешно привязан к профилю"}),n.invalidateQueries({queryKey:["/api/auth/me"]})},onError:()=>{t({title:"Ошибка привязки",description:"Не удалось привязать Telegram аккаунт",variant:"destructive"})}}),F=Ee({mutationFn:async G=>Te("/api/telegram/test","POST",{userId:e==null?void 0:e.id,type:G,data:{offerName:"Test Offer",partnerName:"Test Partner",amount:100,currency:"USD",country:"RU"}}),onSuccess:()=>{t({title:"Тест отправлен",description:"Тестовое уведомление отправлено в Telegram"})},onError:()=>{t({title:"Ошибка отправки",description:"Не удалось отправить тестовое уведомление",variant:"destructive"})}}),R=()=>{P.mutate(h)},I=()=>{if(d.new!==d.confirm){t({title:"Ошибка",description:"Новые пароли не совпадают",variant:"destructive"});return}D.mutate({currentPassword:d.current,newPassword:d.new})},Q=()=>{const G=window.prompt("Введите название токена:");G&&G.trim()&&$.mutate(G.trim())},Y=async G=>{try{await navigator.clipboard.writeText(G),t({title:"Скопировано",description:"API токен скопирован в буфер обмена"})}catch{const me=document.createElement("textarea");me.value=G,document.body.appendChild(me),me.select(),document.execCommand("copy"),document.body.removeChild(me),t({title:"Скопировано",description:"API токен скопирован в буфер обмена"})}},K=G=>{c(De=>({...De,[G]:!De[G]}))},oe=()=>{T.mutate(m)},ge=()=>{O.mutate(x)},Ne=()=>{const G=!(h!=null&&h.twoFactorEnabled);E.mutate(G)},Oe=(G,De)=>{f(me=>({...me,[G]:De}))},pe=(G,De)=>{f(me=>({...me,settings:{...me.settings,[G]:De}}))},Me=()=>{if(!j){t({title:"Ошибка",description:"Введите Chat ID",variant:"destructive"});return}z.mutate(j)},xe=G=>{F.mutate(G)};return p?r.jsx("div",{className:"flex items-center justify-center h-64",children:"Загрузка..."}):r.jsxs("div",{className:"w-full space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Профиль рекламодателя"}),r.jsx("p",{className:"text-muted-foreground",children:"Управление профилем, API-доступом, кастомным доменом и настройками"})]})}),r.jsxs(Zr,{value:s,onValueChange:a,className:"w-full",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-6",children:[r.jsx(We,{value:"account","data-testid":"tab-account",children:"Аккаунт"}),r.jsx(We,{value:"api","data-testid":"tab-api",children:"API-доступ"}),r.jsx(We,{value:"telegram","data-testid":"tab-telegram",children:"Telegram"}),r.jsx(We,{value:"domain","data-testid":"tab-domain",children:"Домен"}),r.jsx(We,{value:"notifications","data-testid":"tab-notifications",children:"Уведомления"}),r.jsx(We,{value:"security","data-testid":"tab-security",children:"Безопасность"})]}),r.jsxs(He,{value:"account",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:"Информация аккаунта"}),r.jsx("div",{className:"space-x-2",children:i?r.jsxs(r.Fragment,{children:[r.jsx(M,{variant:"outline",onClick:()=>l(!1),"data-testid":"button-cancel-edit",children:"Отмена"}),r.jsxs(M,{onClick:R,disabled:P.isPending,"data-testid":"button-save-profile",children:[r.jsx(Tl,{className:"h-4 w-4 mr-2"}),"Сохранить"]})]}):r.jsx(M,{onClick:()=>l(!0),"data-testid":"button-edit-profile",children:"Редактировать"})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Основные данные"})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Имя"}),r.jsx(ne,{value:h.firstName||"",onChange:G=>Oe("firstName",G.target.value),disabled:!i,"data-testid":"input-first-name"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Фамилия"}),r.jsx(ne,{value:h.lastName||"",onChange:G=>Oe("lastName",G.target.value),disabled:!i,"data-testid":"input-last-name"})]})]}),r.jsx(L,{children:"Email"}),r.jsx(ne,{type:"email",value:h.email||"",onChange:G=>Oe("email",G.target.value),disabled:!i,"data-testid":"input-email"}),r.jsx(L,{children:"Телефон"}),r.jsx(ne,{value:h.phone||"",onChange:G=>Oe("phone",G.target.value),disabled:!i,"data-testid":"input-phone"}),r.jsx(L,{children:"Telegram"}),r.jsx(ne,{value:h.telegram||"",onChange:G=>Oe("telegram",G.target.value),disabled:!i,"data-testid":"input-telegram"}),r.jsx(L,{children:"Название компании"}),r.jsx(ne,{value:h.company||"",onChange:G=>Oe("company",G.target.value),disabled:!i,"data-testid":"input-company"})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Региональные настройки"})}),r.jsxs(H,{className:"space-y-4",children:[r.jsx(L,{children:"Страна"}),r.jsx(ne,{value:h.country||"",onChange:G=>Oe("country",G.target.value),disabled:!i,"data-testid":"input-country"}),r.jsx(L,{children:"Язык интерфейса"}),r.jsxs(he,{value:h.language||"en",onValueChange:G=>Oe("language",G),disabled:!i,children:[r.jsx(de,{"data-testid":"select-language",children:r.jsx(fe,{})}),r.jsx(ue,{children:mFe.map(G=>r.jsx(S,{value:G.value,children:G.label},G.value))})]}),r.jsx(L,{children:"Часовой пояс"}),r.jsxs(he,{value:h.timezone||"UTC",onValueChange:G=>Oe("timezone",G),disabled:!i,children:[r.jsx(de,{"data-testid":"select-timezone",children:r.jsx(fe,{})}),r.jsx(ue,{children:xFe.map(G=>r.jsx(S,{value:G.value,children:G.label},G.value))})]}),r.jsx(L,{children:"Валюта"}),r.jsxs(he,{value:h.currency||"USD",onValueChange:G=>Oe("currency",G),disabled:!i,children:[r.jsx(de,{"data-testid":"select-currency",children:r.jsx(fe,{})}),r.jsx(ue,{children:pFe.map(G=>r.jsx(S,{value:G.value,children:G.label},G.value))})]})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Настройки бренда"})}),r.jsxs(H,{className:"space-y-4",children:[r.jsx(L,{children:"Название бренда"}),r.jsx(ne,{value:((ce=h.settings)==null?void 0:ce.brandName)||"",onChange:G=>pe("brandName",G.target.value),disabled:!i,"data-testid":"input-brand-name"}),r.jsx(L,{children:"Вертикаль"}),r.jsx(ne,{value:((Ie=h.settings)==null?void 0:Ie.vertical)||"",onChange:G=>pe("vertical",G.target.value),disabled:!i,"data-testid":"input-vertical"}),r.jsx(L,{children:"Описание бренда"}),r.jsx(pt,{rows:3,value:((ie=h.settings)==null?void 0:ie.brandDescription)||"",onChange:G=>pe("brandDescription",G.target.value),disabled:!i,"data-testid":"textarea-brand-description"}),r.jsx(L,{children:"Правила для партнёров"}),r.jsx(pt,{rows:4,value:((st=h.settings)==null?void 0:st.partnerRules)||"",onChange:G=>pe("partnerRules",G.target.value),disabled:!i,"data-testid":"textarea-partner-rules"})]})]})]}),r.jsxs(He,{value:"api",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:"API-доступ"}),r.jsxs(M,{onClick:Q,"data-testid":"button-generate-token",children:[r.jsx(VA,{className:"h-4 w-4 mr-2"}),"Создать новый токен"]})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"API токены"}),r.jsx(Je,{children:"Секретные токены для интеграций и API-запросов"})]}),r.jsx(H,{children:r.jsx("div",{className:"space-y-4",children:k?r.jsx("div",{children:"Загрузка токенов..."}):N&&N.length>0?N.map(G=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg","data-testid":`token-${G.id}`,children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"font-medium","data-testid":`token-name-${G.id}`,children:G.name}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Создан: ",new Date(G.createdAt).toLocaleDateString(),G.lastUsed&&` • Последнее использование: ${new Date(G.lastUsed).toLocaleDateString()}`]}),r.jsx("div",{className:"font-mono text-sm bg-muted p-2 rounded","data-testid":`token-value-${G.id}`,children:o[G.id]?G.token:"••••••••••••••••••••••••••••••••"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(M,{size:"sm",variant:"outline",onClick:()=>K(G.id),"data-testid":`button-toggle-token-${G.id}`,title:"Показать/скрыть токен",children:o[G.id]?r.jsx(U2,{className:"h-4 w-4"}):r.jsx(hr,{className:"h-4 w-4"})}),r.jsx(M,{size:"sm",variant:"outline",onClick:()=>Y(G.token),"data-testid":`button-copy-token-${G.id}`,title:"Копировать токен",children:r.jsx(Yr,{className:"h-4 w-4"})}),r.jsx(M,{size:"sm",variant:"destructive",onClick:()=>A.mutate(G.id),"data-testid":`button-delete-token-${G.id}`,title:"Удалить токен",children:r.jsx(wr,{className:"h-4 w-4"})})]})]},G.id)):r.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"empty-tokens",children:"У вас пока нет API токенов"})})})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Webhook настройки"}),r.jsx(Je,{children:"URL по умолчанию для постбеков и IP-белый список"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"defaultWebhookUrl",children:"Webhook URL по умолчанию"}),r.jsx(ne,{id:"defaultWebhookUrl",value:m.defaultUrl,onChange:G=>v(De=>({...De,defaultUrl:G.target.value})),placeholder:"https://your-domain.com/postback","data-testid":"input-webhook-url"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"ipWhitelist",children:"IP-белый список"}),r.jsx(pt,{id:"ipWhitelist",value:m.ipWhitelist.join(`
`),onChange:G=>v(De=>({...De,ipWhitelist:G.target.value.split(`
`).map(me=>me.trim()).filter(Boolean)})),placeholder:"192.168.1.1\\n10.0.0.1",rows:4,"data-testid":"textarea-ip-whitelist"}),r.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Один IP на строку"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{id:"webhookEnabled",checked:m.enabled,onCheckedChange:G=>v(De=>({...De,enabled:G})),"data-testid":"switch-webhook-enabled"}),r.jsx(L,{htmlFor:"webhookEnabled",children:"Включить Webhook"})]}),r.jsx(M,{onClick:oe,"data-testid":"button-save-webhook",children:"Сохранить настройки Webhook"})]})]})]}),r.jsxs(He,{value:"telegram",className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h2",{className:"text-2xl font-semibold",children:"Telegram интеграция"})}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"h-8 w-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold text-sm",children:"📖"})}),r.jsx("span",{children:"Инструкция по подключению"})]}),r.jsx(Je,{children:"Пошаговое руководство для подключения Telegram бота"})]}),r.jsx(H,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"h-6 w-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Найдите бота в Telegram"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Перейдите к боту ",r.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"@integracia7980_bot"})," или по ссылке:",r.jsx("a",{href:"https://t.me/integracia7980_bot",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-1",children:"https://t.me/integracia7980_bot"})]})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"h-6 w-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Получите Chat ID"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Напишите боту команду ",r.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"/start"}),r.jsx("br",{}),"Бот пришлёт вам ваш Chat ID (например: ",r.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"123456789"}),")"]})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"h-6 w-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Привяжите в профиле"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:'Скопируйте полученный Chat ID и вставьте его в поле ниже, затем нажмите "Привязать"'})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"h-6 w-6 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"✓"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Протестируйте уведомления"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"После успешной привязки используйте кнопки тестирования для проверки всех типов уведомлений"})]})]})]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mt-4",children:[r.jsx("h5",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Доступные команды бота:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 py-0.5 rounded text-xs",children:"/start"})," - получить Chat ID"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 py-0.5 rounded text-xs",children:"/help"})," - помощь"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 py-0.5 rounded text-xs",children:"/stats"})," - статистика"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 py-0.5 rounded text-xs",children:"/report"})," - дневной отчёт"]})]})]})]})})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Подключение к Telegram боту"}),r.jsx(Je,{children:"Привяжите ваш Telegram аккаунт для получения уведомлений и управления через бота"})]}),r.jsxs(H,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"telegram-chat-id",children:"Chat ID"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(ne,{id:"telegram-chat-id",value:j,onChange:G=>g(G.target.value),placeholder:"Например: 123456789","data-testid":"input-telegram-chat-id"}),r.jsx(M,{onClick:Me,disabled:z.isPending,"data-testid":"button-link-telegram",children:z.isPending?"Привязка...":"Привязать"})]}),r.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Получите ваш Chat ID, написав команду /start боту ",r.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"@integracia7980_bot"})]})]}),(b==null?void 0:b.telegramChatId)&&r.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),r.jsxs("span",{className:"text-green-700 dark:text-green-300 font-medium",children:["Telegram подключён (Chat ID: ",b.telegramChatId,")"]})]})})]}),(b==null?void 0:b.telegramChatId)&&r.jsxs("div",{className:"border-t pt-6",children:[r.jsx("h3",{className:"text-lg font-medium mb-4",children:"Тестирование уведомлений"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(M,{variant:"outline",onClick:()=>xe("conversion"),disabled:F.isPending,"data-testid":"button-test-conversion",children:"Тест уведомления о конверсии"}),r.jsx(M,{variant:"outline",onClick:()=>xe("offer_alert"),disabled:F.isPending,"data-testid":"button-test-offer-alert",children:"Тест алерта по офферу"}),r.jsx(M,{variant:"outline",onClick:()=>xe("fraud_alert"),disabled:F.isPending,"data-testid":"button-test-fraud-alert",children:"Тест антифрод алерта"}),r.jsx(M,{variant:"outline",onClick:()=>xe("system_message"),disabled:F.isPending,"data-testid":"button-test-system",children:"Тест системного сообщения"})]})]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Настройки Telegram уведомлений"}),r.jsx(Je,{children:"Выберите типы уведомлений для получения в Telegram"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Уведомления о конверсиях"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Получать сообщения при новых лидах и депозитах"})]}),r.jsx(Ye,{checked:x.telegram,onCheckedChange:G=>w(De=>({...De,telegram:G})),"data-testid":"switch-telegram-conversions"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Антифрод алерты"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Предупреждения о подозрительной активности"})]}),r.jsx(Ye,{defaultChecked:!0,"data-testid":"switch-telegram-fraud"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Системные уведомления"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Сообщения о важных изменениях в системе"})]}),r.jsx(Ye,{defaultChecked:!0,"data-testid":"switch-telegram-system"})]})]}),r.jsx(M,{onClick:ge,"data-testid":"button-save-telegram-settings",children:"Сохранить настройки Telegram"})]})]})]}),r.jsxs(He,{value:"domain",className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h2",{className:"text-2xl font-semibold",children:"DNS-подтверждение доменов"})}),r.jsx(fFe,{})]}),r.jsxs(He,{value:"notifications",className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h2",{className:"text-2xl font-semibold",children:"Уведомления"})}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Настройка уведомлений"}),r.jsx(Je,{children:"Выберите, по каким каналам получать уведомления от платформы"})]}),r.jsxs(H,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"notif-email",children:"Email"}),r.jsxs("p",{className:"text-muted-foreground text-sm",children:["Уведомления на вашу почту (",h.email,")"]})]}),r.jsx(Ye,{id:"notif-email",checked:x.email,onCheckedChange:G=>w(De=>({...De,email:G})),"data-testid":"switch-email-notifications"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"notif-telegram",children:"Telegram"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"Уведомления в Telegram-бот (если подключён)"})]}),r.jsx(Ye,{id:"notif-telegram",checked:x.telegram,onCheckedChange:G=>w(De=>({...De,telegram:G})),"data-testid":"switch-telegram-notifications"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"notif-sms",children:"SMS"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"SMS-уведомления (если активны)"})]}),r.jsx(Ye,{id:"notif-sms",checked:x.sms,onCheckedChange:G=>w(De=>({...De,sms:G})),"data-testid":"switch-sms-notifications"})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(M,{onClick:ge,"data-testid":"button-save-notifications",children:"Сохранить уведомления"})})]})]})]}),r.jsxs(He,{value:"security",className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h2",{className:"text-2xl font-semibold",children:"Безопасность"})}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Сменить пароль"}),r.jsx(Je,{children:"Мы рекомендуем использовать уникальный и сложный пароль"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"currentPassword",children:"Текущий пароль"}),r.jsx(ne,{id:"currentPassword",type:"password",value:d.current,onChange:G=>u(De=>({...De,current:G.target.value})),"data-testid":"input-current-password"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"newPassword",children:"Новый пароль"}),r.jsx(ne,{id:"newPassword",type:"password",value:d.new,onChange:G=>u(De=>({...De,new:G.target.value})),"data-testid":"input-new-password"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"confirmPassword",children:"Повторите пароль"}),r.jsx(ne,{id:"confirmPassword",type:"password",value:d.confirm,onChange:G=>u(De=>({...De,confirm:G.target.value})),"data-testid":"input-confirm-password"})]})]}),r.jsx(M,{onClick:I,"data-testid":"button-change-password",children:"Обновить пароль"})]})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Двухфакторная аутентификация (2FA)"}),r.jsx(Je,{children:"Ваша безопасность важна. Мы рекомендуем включить 2FA."})]}),r.jsxs(H,{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsxs("p",{className:"text-sm text-muted-foreground","data-testid":"text-2fa-status",children:["Статус: ",r.jsx("strong",{children:h!=null&&h.twoFactorEnabled?"Включена":"Отключена"})]})}),r.jsx(M,{variant:"outline",onClick:Ne,disabled:E.isPending,"data-testid":"button-toggle-2fa",children:E.isPending?"Обработка...":h!=null&&h.twoFactorEnabled?"Отключить 2FA":"Включить 2FA"})]})]})]})]})]})}const vFe=[{value:"usdt",label:"USDT (Tether)",icon:"₮"},{value:"btc",label:"Bitcoin",icon:"₿"},{value:"card",label:"Банковская карта",icon:"💳"},{value:"swift",label:"SWIFT",icon:"🏦"},{value:"sepa",label:"SEPA",icon:"🇪🇺"},{value:"payoneer",label:"Payoneer",icon:"💰"}];function yFe(){var j,g,b,p;const{user:e}=Jt(),{toast:t}=lt();y.useState("30d");const[n,s]=y.useState(""),[a,i]=y.useState(""),{data:l,isLoading:o}=$e({queryKey:["/api/advertiser/financial-overview"],enabled:!!e}),{data:c,isLoading:d}=$e({queryKey:["/api/advertiser/transactions"],enabled:!!e}),u=N=>{switch(N){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},h=N=>{switch(N){case"deposit":return r.jsx(FR,{className:"h-4 w-4 text-green-600"});case"payout":return r.jsx(tk,{className:"h-4 w-4 text-blue-600"});case"fee":return r.jsx(ma,{className:"h-4 w-4 text-orange-600"});case"refund":return r.jsx(Cr,{className:"h-4 w-4 text-purple-600"});default:return r.jsx(Rt,{className:"h-4 w-4"})}},f=()=>{t({title:"Создание инвойса",description:"Функция создания инвойса в разработке"})},m=()=>{t({title:"Настройка бюджетов",description:"Функция планирования бюджетов в разработке"})},v=()=>{t({title:"Пополнение баланса",description:"Перейдите на вкладку 'Пополнение' для добавления средств"})},x=()=>{t({title:"Выплаты партнёрам",description:"Функция просмотра выплат в разработке"})},w=()=>{if(!n||!a){t({title:"Ошибка",description:"Укажите сумму и способ пополнения",variant:"destructive"});return}t({title:"Запрос на пополнение",description:`Запрос на пополнение $${n} через ${a} отправлен`}),s(""),i("")};return o?r.jsx("div",{className:"flex items-center justify-center h-64",children:"Загрузка финансовых данных..."}):r.jsxs("div",{className:"w-full space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"page-title",children:"Финансы"}),r.jsx("p",{className:"text-muted-foreground",children:"Управление балансом, депозитами и выплатами партнёрам"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Баланс"}),r.jsx(Rc,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"balance-amount",children:["$",((j=l==null?void 0:l.balance)==null?void 0:j.toFixed(2))||"0.00"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Доступно для выплат партнёрам"})]})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Всего потрачено"}),r.jsx(tk,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"total-spent",children:["$",((g=l==null?void 0:l.totalSpent)==null?void 0:g.toFixed(2))||"0.00"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Выплаты партнёрам за всё время"})]})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Всего депозитов"}),r.jsx(FR,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"total-deposited",children:["$",((b=l==null?void 0:l.totalDeposited)==null?void 0:b.toFixed(2))||"0.00"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Пополнения баланса"})]})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Ожидает выплаты"}),r.jsx(lr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"pending-payouts",children:["$",((p=l==null?void 0:l.pendingPayouts)==null?void 0:p.toFixed(2))||"0.00"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Запросы на выплату в обработке"})]})]})]}),r.jsxs(Zr,{defaultValue:"overview",className:"space-y-6",children:[r.jsxs(Vr,{children:[r.jsx(We,{value:"overview","data-testid":"tab-overview",children:"Обзор"}),r.jsx(We,{value:"deposit","data-testid":"tab-deposit",children:"Пополнение"}),r.jsx(We,{value:"transactions","data-testid":"tab-transactions",children:"Транзакции"}),r.jsx(We,{value:"invoices","data-testid":"tab-invoices",children:"Инвойсы"}),r.jsx(We,{value:"budgets","data-testid":"tab-budgets",children:"Бюджеты"})]}),r.jsx(He,{value:"overview",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Быстрые действия"}),r.jsx(Je,{children:"Основные финансовые операции"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs(M,{className:"w-full justify-start",onClick:v,"data-testid":"button-add-funds",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Пополнить баланс"]}),r.jsxs(M,{variant:"outline",className:"w-full justify-start",onClick:x,"data-testid":"button-view-payouts",children:[r.jsx(tk,{className:"h-4 w-4 mr-2"}),"Просмотреть выплаты партнёрам"]}),r.jsxs(M,{variant:"outline",className:"w-full justify-start",onClick:f,"data-testid":"button-create-invoice",children:[r.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Создать инвойс"]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Последние транзакции"}),r.jsx(Je,{children:"Недавние финансовые операции"})]}),r.jsx(H,{children:d?r.jsx("div",{className:"text-center py-4",children:"Загрузка..."}):(c==null?void 0:c.length)>0?r.jsx("div",{className:"space-y-3",children:c.slice(0,5).map(N=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[h(N.type),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:N.description}),r.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(N.createdAt).toLocaleDateString()})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium",children:[N.type==="deposit"?"+":"-","$",N.amount.toFixed(2)]}),r.jsx(le,{className:`text-xs ${u(N.status)}`,"data-testid":`status-${N.status}`,children:N.status})]})]},N.id))}):r.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Транзакций пока нет"})})]})]})}),r.jsx(He,{value:"deposit",className:"space-y-6",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Пополнение баланса"}),r.jsx(Je,{children:"Выберите сумму и способ пополнения"})]}),r.jsx(H,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"depositAmount",children:"Сумма пополнения"}),r.jsx(ne,{id:"depositAmount",type:"number",placeholder:"0.00",value:n,onChange:N=>s(N.target.value),"data-testid":"input-deposit-amount"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"paymentMethod",children:"Способ оплаты"}),r.jsxs(he,{value:a,onValueChange:i,children:[r.jsx(de,{"data-testid":"select-payment-method",children:r.jsx(fe,{placeholder:"Выберите способ оплаты"})}),r.jsx(ue,{children:vFe.map(N=>r.jsx(S,{value:N.value,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:N.icon}),r.jsx("span",{children:N.label})]})},N.value))})]})]}),r.jsx(M,{className:"w-full",disabled:!n||!a,onClick:w,"data-testid":"button-deposit",children:"Пополнить баланс"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"font-medium",children:"Популярные суммы"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:["100","500","1000","5000"].map(N=>r.jsxs(M,{variant:"outline",onClick:()=>s(N),"data-testid":`button-amount-${N}`,children:["$",N]},N))})]})]})})]})}),r.jsx(He,{value:"transactions",className:"space-y-6",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"История транзакций"}),r.jsx(Je,{children:"Все финансовые операции"})]}),r.jsx(H,{children:d?r.jsx("div",{className:"text-center py-8",children:"Загрузка транзакций..."}):(c==null?void 0:c.length)>0?r.jsx("div",{className:"space-y-4",children:c.map(N=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[h(N.type),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:N.description}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(N.createdAt).toLocaleString()," • ",N.method]}),N.reference&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Ref: ",N.reference]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium text-lg",children:[N.type==="deposit"?"+":"-","$",N.amount.toFixed(2)]}),r.jsx(le,{className:u(N.status),children:N.status})]})]},N.id))}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Транзакций пока нет"})})]})}),r.jsx(He,{value:"invoices",className:"space-y-6",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Инвойсы"}),r.jsx(Je,{children:"Создание и управление инвойсами"})]}),r.jsx(H,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Qn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"font-medium mb-2",children:"Инвойсов пока нет"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Создайте первый инвойс для запроса оплаты"}),r.jsxs(M,{onClick:f,"data-testid":"button-create-first-invoice",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Создать инвойс"]})]})})]})}),r.jsx(He,{value:"budgets",className:"space-y-6",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Планирование бюджетов"}),r.jsx(Je,{children:"Установите лимиты и планы расходов на офферы"})]}),r.jsx(H,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Cr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"font-medium mb-2",children:"Бюджеты не настроены"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Настройте планируемые бюджеты для эффективного управления расходами"}),r.jsxs(M,{onClick:m,"data-testid":"button-setup-budgets",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Настроить бюджеты"]})]})})]})})]})]})}var oK="AlertDialog",[bFe,rWe]=Bn(oK,[jW]),Io=jW(),cK=e=>{const{__scopeAlertDialog:t,...n}=e,s=Io(t);return r.jsx(U4,{...s,...n,modal:!0})};cK.displayName=oK;var jFe="AlertDialogTrigger",wFe=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Io(n);return r.jsx(IW,{...a,...s,ref:t})});wFe.displayName=jFe;var NFe="AlertDialogPortal",dK=e=>{const{__scopeAlertDialog:t,...n}=e,s=Io(t);return r.jsx(B4,{...s,...n})};dK.displayName=NFe;var kFe="AlertDialogOverlay",uK=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Io(n);return r.jsx(sN,{...a,...s,ref:t})});uK.displayName=kFe;var Wh="AlertDialogContent",[SFe,CFe]=bFe(Wh),_Fe=H8("AlertDialogContent"),hK=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...a}=e,i=Io(n),l=y.useRef(null),o=St(t,l),c=y.useRef(null);return r.jsx($Me,{contentName:Wh,titleName:fK,docsSlug:"alert-dialog",children:r.jsx(SFe,{scope:n,cancelRef:c,children:r.jsxs(aN,{role:"alertdialog",...i,...a,ref:o,onOpenAutoFocus:Le(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(_Fe,{children:s}),r.jsx(AFe,{contentRef:l})]})})})});hK.displayName=Wh;var fK="AlertDialogTitle",mK=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Io(n);return r.jsx(z4,{...a,...s,ref:t})});mK.displayName=fK;var pK="AlertDialogDescription",xK=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Io(n);return r.jsx(V4,{...a,...s,ref:t})});xK.displayName=pK;var PFe="AlertDialogAction",gK=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=Io(n);return r.jsx(q4,{...a,...s,ref:t})});gK.displayName=PFe;var vK="AlertDialogCancel",yK=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:a}=CFe(vK,n),i=Io(n),l=St(t,a);return r.jsx(q4,{...i,...s,ref:l})});yK.displayName=vK;var AFe=({contentRef:e})=>{const t=`\`${Wh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Wh}\` by passing a \`${pK}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Wh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},TFe=cK,EFe=dK,bK=uK,jK=hK,wK=gK,NK=yK,kK=mK,SK=xK;const n3=TFe,OFe=EFe,CK=y.forwardRef(({className:e,...t},n)=>r.jsx(bK,{className:Ae("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));CK.displayName=bK.displayName;const z_=y.forwardRef(({className:e,...t},n)=>r.jsxs(OFe,{children:[r.jsx(CK,{}),r.jsx(jK,{ref:n,className:Ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));z_.displayName=jK.displayName;const V_=({className:e,...t})=>r.jsx("div",{className:Ae("flex flex-col space-y-2 text-center sm:text-left",e),...t});V_.displayName="AlertDialogHeader";const q_=({className:e,...t})=>r.jsx("div",{className:Ae("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});q_.displayName="AlertDialogFooter";const W_=y.forwardRef(({className:e,...t},n)=>r.jsx(kK,{ref:n,className:Ae("text-lg font-semibold",e),...t}));W_.displayName=kK.displayName;const H_=y.forwardRef(({className:e,...t},n)=>r.jsx(SK,{ref:n,className:Ae("text-sm text-muted-foreground",e),...t}));H_.displayName=SK.displayName;const K_=y.forwardRef(({className:e,...t},n)=>r.jsx(wK,{ref:n,className:Ae(Yx(),e),...t}));K_.displayName=wK.displayName;const G_=y.forwardRef(({className:e,...t},n)=>r.jsx(NK,{ref:n,className:Ae(Yx({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));G_.displayName=NK.displayName;function RFe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.useMemo(()=>s=>{t.forEach(a=>a(s))},t)}const hN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ep(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function cE(e){return"nodeType"in e}function Qs(e){var t,n;return e?ep(e)?e:cE(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function dE(e){const{Document:t}=Qs(e);return e instanceof t}function cy(e){return ep(e)?!1:e instanceof Qs(e).HTMLElement}function _K(e){return e instanceof Qs(e).SVGElement}function tp(e){return e?ep(e)?e.document:cE(e)?dE(e)?e:cy(e)||_K(e)?e.ownerDocument:document:document:document}const Ml=hN?y.useLayoutEffect:y.useEffect;function uE(e){const t=y.useRef(e);return Ml(()=>{t.current=e}),y.useCallback(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t.current==null?void 0:t.current(...s)},[])}function DFe(){const e=y.useRef(null),t=y.useCallback((s,a)=>{e.current=setInterval(s,a)},[]),n=y.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Gg(e,t){t===void 0&&(t=[e]);const n=y.useRef(e);return Ml(()=>{n.current!==e&&(n.current=e)},t),n}function dy(e,t){const n=y.useRef();return y.useMemo(()=>{const s=e(n.current);return n.current=s,s},[...t])}function Kj(e){const t=uE(e),n=y.useRef(null),s=y.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,s]}function Y_(e){const t=y.useRef();return y.useEffect(()=>{t.current=e},[e]),t.current}let Jk={};function uy(e,t){return y.useMemo(()=>{if(t)return t;const n=Jk[e]==null?0:Jk[e]+1;return Jk[e]=n,e+"-"+n},[e,t])}function PK(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.reduce((i,l)=>{const o=Object.entries(l);for(const[c,d]of o){const u=i[c];u!=null&&(i[c]=u+e*d)}return i},{...t})}}const Hh=PK(1),Yg=PK(-1);function MFe(e){return"clientX"in e&&"clientY"in e}function hE(e){if(!e)return!1;const{KeyboardEvent:t}=Qs(e.target);return t&&e instanceof t}function $Fe(e){if(!e)return!1;const{TouchEvent:t}=Qs(e.target);return t&&e instanceof t}function X_(e){if($Fe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return MFe(e)?{x:e.clientX,y:e.clientY}:null}const jm=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[jm.Translate.toString(e),jm.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:s}=e;return t+" "+n+"ms "+s}}}),s3="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function IFe(e){return e.matches(s3)?e:e.querySelector(s3)}const FFe={display:"none"};function LFe(e){let{id:t,value:n}=e;return Z.createElement("div",{id:t,style:FFe},n)}function UFe(e){let{id:t,announcement:n,ariaLiveType:s="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Z.createElement("div",{id:t,style:a,role:"status","aria-live":s,"aria-atomic":!0},n)}function BFe(){const[e,t]=y.useState("");return{announce:y.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const AK=y.createContext(null);function zFe(e){const t=y.useContext(AK);y.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function VFe(){const[e]=y.useState(()=>new Set),t=y.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[y.useCallback(s=>{let{type:a,event:i}=s;e.forEach(l=>{var o;return(o=l[a])==null?void 0:o.call(l,i)})},[e]),t]}const qFe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},WFe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function HFe(e){let{announcements:t=WFe,container:n,hiddenTextDescribedById:s,screenReaderInstructions:a=qFe}=e;const{announce:i,announcement:l}=BFe(),o=uy("DndLiveRegion"),[c,d]=y.useState(!1);if(y.useEffect(()=>{d(!0)},[]),zFe(y.useMemo(()=>({onDragStart(h){let{active:f}=h;i(t.onDragStart({active:f}))},onDragMove(h){let{active:f,over:m}=h;t.onDragMove&&i(t.onDragMove({active:f,over:m}))},onDragOver(h){let{active:f,over:m}=h;i(t.onDragOver({active:f,over:m}))},onDragEnd(h){let{active:f,over:m}=h;i(t.onDragEnd({active:f,over:m}))},onDragCancel(h){let{active:f,over:m}=h;i(t.onDragCancel({active:f,over:m}))}}),[i,t])),!c)return null;const u=Z.createElement(Z.Fragment,null,Z.createElement(LFe,{id:s,value:a.draggable}),Z.createElement(UFe,{id:o,announcement:l}));return n?Fa.createPortal(u,n):u}var Nn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Nn||(Nn={}));function Gj(){}function a3(e,t){return y.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function KFe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const zi=Object.freeze({x:0,y:0});function TK(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function EK(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return n-s}function GFe(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return s-n}function i3(e){let{left:t,top:n,height:s,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+s},{x:t+a,y:n+s}]}function OK(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function l3(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const YFe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=l3(t,t.left,t.top),i=[];for(const l of s){const{id:o}=l,c=n.get(o);if(c){const d=TK(l3(c),a);i.push({id:o,data:{droppableContainer:l,value:d}})}}return i.sort(EK)},XFe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=i3(t),i=[];for(const l of s){const{id:o}=l,c=n.get(o);if(c){const d=i3(c),u=a.reduce((f,m,v)=>f+TK(d[v],m),0),h=Number((u/4).toFixed(4));i.push({id:o,data:{droppableContainer:l,value:h}})}}return i.sort(EK)};function ZFe(e,t){const n=Math.max(t.top,e.top),s=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),l=a-s,o=i-n;if(s<a&&n<i){const c=t.width*t.height,d=e.width*e.height,u=l*o,h=u/(c+d-u);return Number(h.toFixed(4))}return 0}const QFe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=[];for(const i of s){const{id:l}=i,o=n.get(l);if(o){const c=ZFe(o,t);c>0&&a.push({id:l,data:{droppableContainer:i,value:c}})}}return a.sort(GFe)};function JFe(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function RK(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:zi}function eLe(e){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];return a.reduce((l,o)=>({...l,top:l.top+e*o.y,bottom:l.bottom+e*o.y,left:l.left+e*o.x,right:l.right+e*o.x}),{...n})}}const tLe=eLe(1);function rLe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function nLe(e,t,n){const s=rLe(t);if(!s)return e;const{scaleX:a,scaleY:i,x:l,y:o}=s,c=e.left-l-(1-a)*parseFloat(n),d=e.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),u=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:u,height:h,top:d,right:c+u,bottom:d+h,left:c}}const sLe={ignoreTransform:!1};function rp(e,t){t===void 0&&(t=sLe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=Qs(e).getComputedStyle(e);d&&(n=nLe(n,d,u))}const{top:s,left:a,width:i,height:l,bottom:o,right:c}=n;return{top:s,left:a,width:i,height:l,bottom:o,right:c}}function o3(e){return rp(e,{ignoreTransform:!0})}function aLe(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function iLe(e,t){return t===void 0&&(t=Qs(e).getComputedStyle(e)),t.position==="fixed"}function lLe(e,t){t===void 0&&(t=Qs(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function fN(e,t){const n=[];function s(a){if(t!=null&&n.length>=t||!a)return n;if(dE(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!cy(a)||_K(a)||n.includes(a))return n;const i=Qs(e).getComputedStyle(a);return a!==e&&lLe(a,i)&&n.push(a),iLe(a,i)?n:s(a.parentNode)}return e?s(e):n}function DK(e){const[t]=fN(e,1);return t??null}function eS(e){return!hN||!e?null:ep(e)?e:cE(e)?dE(e)||e===tp(e).scrollingElement?window:cy(e)?e:null:null}function MK(e){return ep(e)?e.scrollX:e.scrollLeft}function $K(e){return ep(e)?e.scrollY:e.scrollTop}function Z_(e){return{x:MK(e),y:$K(e)}}var Mn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Mn||(Mn={}));function IK(e){return!hN||!e?!1:e===document.scrollingElement}function FK(e){const t={x:0,y:0},n=IK(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,l=e.scrollTop>=s.y,o=e.scrollLeft>=s.x;return{isTop:a,isLeft:i,isBottom:l,isRight:o,maxScroll:s,minScroll:t}}const oLe={x:.2,y:.2};function cLe(e,t,n,s,a){let{top:i,left:l,right:o,bottom:c}=n;s===void 0&&(s=10),a===void 0&&(a=oLe);const{isTop:d,isBottom:u,isLeft:h,isRight:f}=FK(e),m={x:0,y:0},v={x:0,y:0},x={height:t.height*a.y,width:t.width*a.x};return!d&&i<=t.top+x.height?(m.y=Mn.Backward,v.y=s*Math.abs((t.top+x.height-i)/x.height)):!u&&c>=t.bottom-x.height&&(m.y=Mn.Forward,v.y=s*Math.abs((t.bottom-x.height-c)/x.height)),!f&&o>=t.right-x.width?(m.x=Mn.Forward,v.x=s*Math.abs((t.right-x.width-o)/x.width)):!h&&l<=t.left+x.width&&(m.x=Mn.Backward,v.x=s*Math.abs((t.left+x.width-l)/x.width)),{direction:m,speed:v}}function dLe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:l}=window;return{top:0,left:0,right:i,bottom:l,width:i,height:l}}const{top:t,left:n,right:s,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:s,bottom:a,width:e.clientWidth,height:e.clientHeight}}function LK(e){return e.reduce((t,n)=>Hh(t,Z_(n)),zi)}function uLe(e){return e.reduce((t,n)=>t+MK(n),0)}function hLe(e){return e.reduce((t,n)=>t+$K(n),0)}function fLe(e,t){if(t===void 0&&(t=rp),!e)return;const{top:n,left:s,bottom:a,right:i}=t(e);DK(e)&&(a<=0||i<=0||n>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const mLe=[["x",["left","right"],uLe],["y",["top","bottom"],hLe]];class fE{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=fN(n),a=LK(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,l,o]of mLe)for(const c of l)Object.defineProperty(this,c,{get:()=>{const d=o(s),u=a[i]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class yx{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var a;(a=this.target)==null||a.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function pLe(e){const{EventTarget:t}=Qs(e);return e instanceof t?e:tp(e)}function tS(e,t){const n=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var Oa;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Oa||(Oa={}));function c3(e){e.preventDefault()}function xLe(e){e.stopPropagation()}var rr;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(rr||(rr={}));const UK={start:[rr.Space,rr.Enter],cancel:[rr.Esc],end:[rr.Space,rr.Enter,rr.Tab]},gLe=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case rr.Right:return{...n,x:n.x+25};case rr.Left:return{...n,x:n.x-25};case rr.Down:return{...n,y:n.y+25};case rr.Up:return{...n,y:n.y-25}}};class mE{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new yx(tp(n)),this.windowListeners=new yx(Qs(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Oa.Resize,this.handleCancel),this.windowListeners.add(Oa.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Oa.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&fLe(s),n(zi)}handleKeyDown(t){if(hE(t)){const{active:n,context:s,options:a}=this.props,{keyboardCodes:i=UK,coordinateGetter:l=gLe,scrollBehavior:o="smooth"}=a,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=s.current,u=d?{x:d.left,y:d.top}:zi;this.referenceCoordinates||(this.referenceCoordinates=u);const h=l(t,{active:n,context:s.current,currentCoordinates:u});if(h){const f=Yg(h,u),m={x:0,y:0},{scrollableAncestors:v}=s.current;for(const x of v){const w=t.code,{isTop:j,isRight:g,isLeft:b,isBottom:p,maxScroll:N,minScroll:k}=FK(x),C=dLe(x),_={x:Math.min(w===rr.Right?C.right-C.width/2:C.right,Math.max(w===rr.Right?C.left:C.left+C.width/2,h.x)),y:Math.min(w===rr.Down?C.bottom-C.height/2:C.bottom,Math.max(w===rr.Down?C.top:C.top+C.height/2,h.y))},P=w===rr.Right&&!g||w===rr.Left&&!b,D=w===rr.Down&&!p||w===rr.Up&&!j;if(P&&_.x!==h.x){const E=x.scrollLeft+f.x,$=w===rr.Right&&E<=N.x||w===rr.Left&&E>=k.x;if($&&!f.y){x.scrollTo({left:E,behavior:o});return}$?m.x=x.scrollLeft-E:m.x=w===rr.Right?x.scrollLeft-N.x:x.scrollLeft-k.x,m.x&&x.scrollBy({left:-m.x,behavior:o});break}else if(D&&_.y!==h.y){const E=x.scrollTop+f.y,$=w===rr.Down&&E<=N.y||w===rr.Up&&E>=k.y;if($&&!f.x){x.scrollTo({top:E,behavior:o});return}$?m.y=x.scrollTop-E:m.y=w===rr.Down?x.scrollTop-N.y:x.scrollTop-k.y,m.y&&x.scrollBy({top:-m.y,behavior:o});break}}this.handleMove(t,Hh(Yg(h,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}mE.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:s=UK,onActivation:a}=t,{active:i}=n;const{code:l}=e.nativeEvent;if(s.start.includes(l)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function d3(e){return!!(e&&"distance"in e)}function u3(e){return!!(e&&"delay"in e)}class pE{constructor(t,n,s){var a;s===void 0&&(s=pLe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:l}=i;this.props=t,this.events=n,this.document=tp(l),this.documentListeners=new yx(this.document),this.listeners=new yx(s),this.windowListeners=new yx(Qs(l)),this.initialCoordinates=(a=X_(i))!=null?a:zi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Oa.Resize,this.handleCancel),this.windowListeners.add(Oa.DragStart,c3),this.windowListeners.add(Oa.VisibilityChange,this.handleCancel),this.windowListeners.add(Oa.ContextMenu,c3),this.documentListeners.add(Oa.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(u3(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(d3(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:a}=this.props;a(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Oa.Click,xLe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Oa.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:a,props:i}=this,{onMove:l,options:{activationConstraint:o}}=i;if(!a)return;const c=(n=X_(t))!=null?n:zi,d=Yg(a,c);if(!s&&o){if(d3(o)){if(o.tolerance!=null&&tS(d,o.tolerance))return this.handleCancel();if(tS(d,o.distance))return this.handleStart()}if(u3(o)&&tS(d,o.tolerance))return this.handleCancel();this.handlePending(o,d);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===rr.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const vLe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class xE extends pE{constructor(t){const{event:n}=t,s=tp(n.target);super(t,vLe,s)}}xE.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const yLe={move:{name:"mousemove"},end:{name:"mouseup"}};var Q_;(function(e){e[e.RightClick=2]="RightClick"})(Q_||(Q_={}));class bLe extends pE{constructor(t){super(t,yLe,tp(t.event.target))}}bLe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return n.button===Q_.RightClick?!1:(s==null||s({event:n}),!0)}}];const rS={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class jLe extends pE{constructor(t){super(t,rS)}static setup(){return window.addEventListener(rS.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(rS.move.name,t)};function t(){}}}jLe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;const{touches:a}=n;return a.length>1?!1:(s==null||s({event:n}),!0)}}];var bx;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(bx||(bx={}));var Yj;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Yj||(Yj={}));function wLe(e){let{acceleration:t,activator:n=bx.Pointer,canScroll:s,draggingRect:a,enabled:i,interval:l=5,order:o=Yj.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:h,threshold:f}=e;const m=kLe({delta:h,disabled:!i}),[v,x]=DFe(),w=y.useRef({x:0,y:0}),j=y.useRef({x:0,y:0}),g=y.useMemo(()=>{switch(n){case bx.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case bx.DraggableRect:return a}},[n,a,c]),b=y.useRef(null),p=y.useCallback(()=>{const k=b.current;if(!k)return;const C=w.current.x*j.current.x,_=w.current.y*j.current.y;k.scrollBy(C,_)},[]),N=y.useMemo(()=>o===Yj.TreeOrder?[...d].reverse():d,[o,d]);y.useEffect(()=>{if(!i||!d.length||!g){x();return}for(const k of N){if((s==null?void 0:s(k))===!1)continue;const C=d.indexOf(k),_=u[C];if(!_)continue;const{direction:P,speed:D}=cLe(k,_,g,t,f);for(const E of["x","y"])m[E][P[E]]||(D[E]=0,P[E]=0);if(D.x>0||D.y>0){x(),b.current=k,v(p,l),w.current=D,j.current=P;return}}w.current={x:0,y:0},j.current={x:0,y:0},x()},[t,p,s,x,i,l,JSON.stringify(g),JSON.stringify(m),v,d,N,u,JSON.stringify(f)])}const NLe={x:{[Mn.Backward]:!1,[Mn.Forward]:!1},y:{[Mn.Backward]:!1,[Mn.Forward]:!1}};function kLe(e){let{delta:t,disabled:n}=e;const s=Y_(t);return dy(a=>{if(n||!s||!a)return NLe;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[Mn.Backward]:a.x[Mn.Backward]||i.x===-1,[Mn.Forward]:a.x[Mn.Forward]||i.x===1},y:{[Mn.Backward]:a.y[Mn.Backward]||i.y===-1,[Mn.Forward]:a.y[Mn.Forward]||i.y===1}}},[n,t,s])}function SLe(e,t){const n=t!=null?e.get(t):void 0,s=n?n.node.current:null;return dy(a=>{var i;return t==null?null:(i=s??a)!=null?i:null},[s,t])}function CLe(e,t){return y.useMemo(()=>e.reduce((n,s)=>{const{sensor:a}=s,i=a.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,s)}));return[...n,...i]},[]),[e,t])}var Xg;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Xg||(Xg={}));var J_;(function(e){e.Optimized="optimized"})(J_||(J_={}));const h3=new Map;function _Le(e,t){let{dragging:n,dependencies:s,config:a}=t;const[i,l]=y.useState(null),{frequency:o,measure:c,strategy:d}=a,u=y.useRef(e),h=w(),f=Gg(h),m=y.useCallback(function(j){j===void 0&&(j=[]),!f.current&&l(g=>g===null?j:g.concat(j.filter(b=>!g.includes(b))))},[f]),v=y.useRef(null),x=dy(j=>{if(h&&!n)return h3;if(!j||j===h3||u.current!==e||i!=null){const g=new Map;for(let b of e){if(!b)continue;if(i&&i.length>0&&!i.includes(b.id)&&b.rect.current){g.set(b.id,b.rect.current);continue}const p=b.node.current,N=p?new fE(c(p),p):null;b.rect.current=N,N&&g.set(b.id,N)}return g}return j},[e,i,n,h,c]);return y.useEffect(()=>{u.current=e},[e]),y.useEffect(()=>{h||m()},[n,h]),y.useEffect(()=>{i&&i.length>0&&l(null)},[JSON.stringify(i)]),y.useEffect(()=>{h||typeof o!="number"||v.current!==null||(v.current=setTimeout(()=>{m(),v.current=null},o))},[o,h,m,...s]),{droppableRects:x,measureDroppableContainers:m,measuringScheduled:i!=null};function w(){switch(d){case Xg.Always:return!1;case Xg.BeforeDragging:return n;default:return!n}}}function BK(e,t){return dy(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function PLe(e,t){return BK(e,t)}function ALe(e){let{callback:t,disabled:n}=e;const s=uE(t),a=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,n]);return y.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function mN(e){let{callback:t,disabled:n}=e;const s=uE(t),a=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[n]);return y.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function TLe(e){return new fE(rp(e),e)}function f3(e,t,n){t===void 0&&(t=TLe);const[s,a]=y.useState(null);function i(){a(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??n)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const l=ALe({callback(c){if(e)for(const d of c){const{type:u,target:h}=d;if(u==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),o=mN({callback:i});return Ml(()=>{i(),e?(o==null||o.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),l==null||l.disconnect())},[e]),s}function ELe(e){const t=BK(e);return RK(e,t)}const m3=[];function OLe(e){const t=y.useRef(e),n=dy(s=>e?s&&s!==m3&&e&&t.current&&e.parentNode===t.current.parentNode?s:fN(e):m3,[e]);return y.useEffect(()=>{t.current=e},[e]),n}function RLe(e){const[t,n]=y.useState(null),s=y.useRef(e),a=y.useCallback(i=>{const l=eS(i.target);l&&n(o=>o?(o.set(l,Z_(l)),new Map(o)):null)},[]);return y.useEffect(()=>{const i=s.current;if(e!==i){l(i);const o=e.map(c=>{const d=eS(c);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,Z_(d)]):null}).filter(c=>c!=null);n(o.length?new Map(o):null),s.current=e}return()=>{l(e),l(i)};function l(o){o.forEach(c=>{const d=eS(c);d==null||d.removeEventListener("scroll",a)})}},[a,e]),y.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,l)=>Hh(i,l),zi):LK(e):zi,[e,t])}function p3(e,t){t===void 0&&(t=[]);const n=y.useRef(null);return y.useEffect(()=>{n.current=null},t),y.useEffect(()=>{const s=e!==zi;s&&!n.current&&(n.current=e),!s&&n.current&&(n.current=null)},[e]),n.current?Yg(e,n.current):zi}function DLe(e){y.useEffect(()=>{if(!hN)return;const t=e.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function MLe(e,t){return y.useMemo(()=>e.reduce((n,s)=>{let{eventName:a,handler:i}=s;return n[a]=l=>{i(l,t)},n},{}),[e,t])}function zK(e){return y.useMemo(()=>e?aLe(e):null,[e])}const x3=[];function $Le(e,t){t===void 0&&(t=rp);const[n]=e,s=zK(n?Qs(n):null),[a,i]=y.useState(x3);function l(){i(()=>e.length?e.map(c=>IK(c)?s:new fE(t(c),c)):x3)}const o=mN({callback:l});return Ml(()=>{o==null||o.disconnect(),l(),e.forEach(c=>o==null?void 0:o.observe(c))},[e]),a}function ILe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return cy(t)?t:e}function FLe(e){let{measure:t}=e;const[n,s]=y.useState(null),a=y.useCallback(d=>{for(const{target:u}of d)if(cy(u)){s(h=>{const f=t(u);return h?{...h,width:f.width,height:f.height}:f});break}},[t]),i=mN({callback:a}),l=y.useCallback(d=>{const u=ILe(d);i==null||i.disconnect(),u&&(i==null||i.observe(u)),s(u?t(u):null)},[t,i]),[o,c]=Kj(l);return y.useMemo(()=>({nodeRef:o,rect:n,setRef:c}),[n,o,c])}const LLe=[{sensor:xE,options:{}},{sensor:mE,options:{}}],ULe={current:{}},B0={draggable:{measure:o3},droppable:{measure:o3,strategy:Xg.WhileDragging,frequency:J_.Optimized},dragOverlay:{measure:rp}};class jx extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const BLe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new jx,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Gj},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:B0,measureDroppableContainers:Gj,windowRect:null,measuringScheduled:!1},zLe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Gj,draggableNodes:new Map,over:null,measureDroppableContainers:Gj},pN=y.createContext(zLe),VK=y.createContext(BLe);function VLe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new jx}}}function qLe(e,t){switch(t.type){case Nn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Nn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Nn.DragEnd:case Nn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Nn.RegisterDroppable:{const{element:n}=t,{id:s}=n,a=new jx(e.droppable.containers);return a.set(s,n),{...e,droppable:{...e.droppable,containers:a}}}case Nn.SetDroppableDisabled:{const{id:n,key:s,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||s!==i.key)return e;const l=new jx(e.droppable.containers);return l.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:l}}}case Nn.UnregisterDroppable:{const{id:n,key:s}=t,a=e.droppable.containers.get(n);if(!a||s!==a.key)return e;const i=new jx(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function WLe(e){let{disabled:t}=e;const{active:n,activatorEvent:s,draggableNodes:a}=y.useContext(pN),i=Y_(s),l=Y_(n==null?void 0:n.id);return y.useEffect(()=>{if(!t&&!s&&i&&l!=null){if(!hE(i)||document.activeElement===i.target)return;const o=a.get(l);if(!o)return;const{activatorNode:c,node:d}=o;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const h=IFe(u);if(h){h.focus();break}}})}},[s,t,a,l,i]),null}function HLe(e,t){let{transform:n,...s}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...s}),n):n}function KLe(e){return y.useMemo(()=>({draggable:{...B0.draggable,...e==null?void 0:e.draggable},droppable:{...B0.droppable,...e==null?void 0:e.droppable},dragOverlay:{...B0.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function GLe(e){let{activeNode:t,measure:n,initialRect:s,config:a=!0}=e;const i=y.useRef(!1),{x:l,y:o}=typeof a=="boolean"?{x:a,y:a}:a;Ml(()=>{if(!l&&!o||!t){i.current=!1;return}if(i.current||!s)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const u=n(d),h=RK(u,s);if(l||(h.x=0),o||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const f=DK(d);f&&f.scrollBy({top:h.y,left:h.x})}},[t,l,o,s,n])}const qK=y.createContext({...zi,scaleX:1,scaleY:1});var ec;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ec||(ec={}));const WK=y.memo(function(t){var n,s,a,i;let{id:l,accessibility:o,autoScroll:c=!0,children:d,sensors:u=LLe,collisionDetection:h=QFe,measuring:f,modifiers:m,...v}=t;const x=y.useReducer(qLe,void 0,VLe),[w,j]=x,[g,b]=VFe(),[p,N]=y.useState(ec.Uninitialized),k=p===ec.Initialized,{draggable:{active:C,nodes:_,translate:P},droppable:{containers:D}}=w,E=C!=null?_.get(C):null,$=y.useRef({initial:null,translated:null}),A=y.useMemo(()=>{var It;return C!=null?{id:C,data:(It=E==null?void 0:E.data)!=null?It:ULe,rect:$}:null},[C,E]),T=y.useRef(null),[O,z]=y.useState(null),[F,R]=y.useState(null),I=Gg(v,Object.values(v)),Q=uy("DndDescribedBy",l),Y=y.useMemo(()=>D.getEnabled(),[D]),K=KLe(f),{droppableRects:oe,measureDroppableContainers:ge,measuringScheduled:Ne}=_Le(Y,{dragging:k,dependencies:[P.x,P.y],config:K.droppable}),Oe=SLe(_,C),pe=y.useMemo(()=>F?X_(F):null,[F]),Me=Fo(),xe=PLe(Oe,K.draggable.measure);GLe({activeNode:C!=null?_.get(C):null,config:Me.layoutShiftCompensation,initialRect:xe,measure:K.draggable.measure});const ce=f3(Oe,K.draggable.measure,xe),Ie=f3(Oe?Oe.parentElement:null),ie=y.useRef({activatorEvent:null,active:null,activeNode:Oe,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:D,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),st=D.getNodeFor((n=ie.current.over)==null?void 0:n.id),G=FLe({measure:K.dragOverlay.measure}),De=(s=G.nodeRef.current)!=null?s:Oe,me=k?(a=G.rect)!=null?a:ce:null,Be=!!(G.nodeRef.current&&G.rect),qe=ELe(Be?null:ce),Qe=zK(De?Qs(De):null),Ct=OLe(k?st??Oe:null),er=$Le(Ct),V=HLe(m,{transform:{x:P.x-qe.x,y:P.y-qe.y,scaleX:1,scaleY:1},activatorEvent:F,active:A,activeNodeRect:ce,containerNodeRect:Ie,draggingNodeRect:me,over:ie.current.over,overlayNodeRect:G.rect,scrollableAncestors:Ct,scrollableAncestorRects:er,windowRect:Qe}),U=pe?Hh(pe,P):null,re=RLe(Ct),ve=p3(re),_e=p3(re,[ce]),Pe=Hh(V,ve),X=me?tLe(me,V):null,ee=A&&X?h({active:A,collisionRect:X,droppableRects:oe,droppableContainers:Y,pointerCoordinates:U}):null,ke=OK(ee,"id"),[Fe,or]=y.useState(null),Rr=Be?V:Hh(V,_e),_t=JFe(Rr,(i=Fe==null?void 0:Fe.rect)!=null?i:null,ce),mr=y.useRef(null),Ht=y.useCallback((It,ta)=>{let{sensor:ra,options:Lo}=ta;if(T.current==null)return;const Sa=_.get(T.current);if(!Sa)return;const na=It.nativeEvent,Gi=new ra({active:T.current,activeNode:Sa,event:na,options:Lo,context:ie,onAbort(qn){if(!_.get(qn))return;const{onDragAbort:Yi}=I.current,Bl={id:qn};Yi==null||Yi(Bl),g({type:"onDragAbort",event:Bl})},onPending(qn,Uo,Yi,Bl){if(!_.get(qn))return;const{onDragPending:ap}=I.current,Bo={id:qn,constraint:Uo,initialCoordinates:Yi,offset:Bl};ap==null||ap(Bo),g({type:"onDragPending",event:Bo})},onStart(qn){const Uo=T.current;if(Uo==null)return;const Yi=_.get(Uo);if(!Yi)return;const{onDragStart:Bl}=I.current,sp={activatorEvent:na,active:{id:Uo,data:Yi.data,rect:$}};Fa.unstable_batchedUpdates(()=>{Bl==null||Bl(sp),N(ec.Initializing),j({type:Nn.DragStart,initialCoordinates:qn,active:Uo}),g({type:"onDragStart",event:sp}),z(mr.current),R(na)})},onMove(qn){j({type:Nn.DragMove,coordinates:qn})},onEnd:Wu(Nn.DragEnd),onCancel:Wu(Nn.DragCancel)});mr.current=Gi;function Wu(qn){return async function(){const{active:Yi,collisions:Bl,over:sp,scrollAdjustedTranslate:ap}=ie.current;let Bo=null;if(Yi&&ap){const{cancelDrop:ip}=I.current;Bo={activatorEvent:na,active:Yi,collisions:Bl,delta:ap,over:sp},qn===Nn.DragEnd&&typeof ip=="function"&&await Promise.resolve(ip(Bo))&&(qn=Nn.DragCancel)}T.current=null,Fa.unstable_batchedUpdates(()=>{j({type:qn}),N(ec.Uninitialized),or(null),z(null),R(null),mr.current=null;const ip=qn===Nn.DragEnd?"onDragEnd":"onDragCancel";if(Bo){const jN=I.current[ip];jN==null||jN(Bo),g({type:ip,event:Bo})}})}}},[_]),ka=y.useCallback((It,ta)=>(ra,Lo)=>{const Sa=ra.nativeEvent,na=_.get(Lo);if(T.current!==null||!na||Sa.dndKit||Sa.defaultPrevented)return;const Gi={active:na};It(ra,ta.options,Gi)===!0&&(Sa.dndKit={capturedBy:ta.sensor},T.current=Lo,Ht(ra,ta))},[_,Ht]),ea=CLe(u,ka);DLe(u),Ml(()=>{ce&&p===ec.Initializing&&N(ec.Initialized)},[ce,p]),y.useEffect(()=>{const{onDragMove:It}=I.current,{active:ta,activatorEvent:ra,collisions:Lo,over:Sa}=ie.current;if(!ta||!ra)return;const na={active:ta,activatorEvent:ra,collisions:Lo,delta:{x:Pe.x,y:Pe.y},over:Sa};Fa.unstable_batchedUpdates(()=>{It==null||It(na),g({type:"onDragMove",event:na})})},[Pe.x,Pe.y]),y.useEffect(()=>{const{active:It,activatorEvent:ta,collisions:ra,droppableContainers:Lo,scrollAdjustedTranslate:Sa}=ie.current;if(!It||T.current==null||!ta||!Sa)return;const{onDragOver:na}=I.current,Gi=Lo.get(ke),Wu=Gi&&Gi.rect.current?{id:Gi.id,rect:Gi.rect.current,data:Gi.data,disabled:Gi.disabled}:null,qn={active:It,activatorEvent:ta,collisions:ra,delta:{x:Sa.x,y:Sa.y},over:Wu};Fa.unstable_batchedUpdates(()=>{or(Wu),na==null||na(qn),g({type:"onDragOver",event:qn})})},[ke]),Ml(()=>{ie.current={activatorEvent:F,active:A,activeNode:Oe,collisionRect:X,collisions:ee,droppableRects:oe,draggableNodes:_,draggingNode:De,draggingNodeRect:me,droppableContainers:D,over:Fe,scrollableAncestors:Ct,scrollAdjustedTranslate:Pe},$.current={initial:me,translated:X}},[A,Oe,ee,X,_,De,me,oe,D,Fe,Ct,Pe]),wLe({...Me,delta:P,draggingRect:X,pointerCoordinates:U,scrollableAncestors:Ct,scrollableAncestorRects:er});const qu=y.useMemo(()=>({active:A,activeNode:Oe,activeNodeRect:ce,activatorEvent:F,collisions:ee,containerNodeRect:Ie,dragOverlay:G,draggableNodes:_,droppableContainers:D,droppableRects:oe,over:Fe,measureDroppableContainers:ge,scrollableAncestors:Ct,scrollableAncestorRects:er,measuringConfiguration:K,measuringScheduled:Ne,windowRect:Qe}),[A,Oe,ce,F,ee,Ie,G,_,D,oe,Fe,ge,Ct,er,K,Ne,Qe]),od=y.useMemo(()=>({activatorEvent:F,activators:ea,active:A,activeNodeRect:ce,ariaDescribedById:{draggable:Q},dispatch:j,draggableNodes:_,over:Fe,measureDroppableContainers:ge}),[F,ea,A,ce,j,Q,_,Fe,ge]);return Z.createElement(AK.Provider,{value:b},Z.createElement(pN.Provider,{value:od},Z.createElement(VK.Provider,{value:qu},Z.createElement(qK.Provider,{value:_t},d)),Z.createElement(WLe,{disabled:(o==null?void 0:o.restoreFocus)===!1})),Z.createElement(HFe,{...o,hiddenTextDescribedById:Q}));function Fo(){const It=(O==null?void 0:O.autoScrollEnabled)===!1,ta=typeof c=="object"?c.enabled===!1:c===!1,ra=k&&!It&&!ta;return typeof c=="object"?{...c,enabled:ra}:{enabled:ra}}}),YLe=y.createContext(null),g3="button",XLe="Draggable";function ZLe(e){let{id:t,data:n,disabled:s=!1,attributes:a}=e;const i=uy(XLe),{activators:l,activatorEvent:o,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:h,over:f}=y.useContext(pN),{role:m=g3,roleDescription:v="draggable",tabIndex:x=0}=a??{},w=(c==null?void 0:c.id)===t,j=y.useContext(w?qK:YLe),[g,b]=Kj(),[p,N]=Kj(),k=MLe(l,t),C=Gg(n);Ml(()=>(h.set(t,{id:t,key:i,node:g,activatorNode:p,data:C}),()=>{const P=h.get(t);P&&P.key===i&&h.delete(t)}),[h,t]);const _=y.useMemo(()=>({role:m,tabIndex:x,"aria-disabled":s,"aria-pressed":w&&m===g3?!0:void 0,"aria-roledescription":v,"aria-describedby":u.draggable}),[s,m,x,w,v,u.draggable]);return{active:c,activatorEvent:o,activeNodeRect:d,attributes:_,isDragging:w,listeners:s?void 0:k,node:g,over:f,setNodeRef:b,setActivatorNodeRef:N,transform:j}}function QLe(){return y.useContext(VK)}const JLe="Droppable",e6e={timeout:25};function t6e(e){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:a}=e;const i=uy(JLe),{active:l,dispatch:o,over:c,measureDroppableContainers:d}=y.useContext(pN),u=y.useRef({disabled:n}),h=y.useRef(!1),f=y.useRef(null),m=y.useRef(null),{disabled:v,updateMeasurementsFor:x,timeout:w}={...e6e,...a},j=Gg(x??s),g=y.useCallback(()=>{if(!h.current){h.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{d(Array.isArray(j.current)?j.current:[j.current]),m.current=null},w)},[w]),b=mN({callback:g,disabled:v||!l}),p=y.useCallback((_,P)=>{b&&(P&&(b.unobserve(P),h.current=!1),_&&b.observe(_))},[b]),[N,k]=Kj(p),C=Gg(t);return y.useEffect(()=>{!b||!N.current||(b.disconnect(),h.current=!1,b.observe(N.current))},[N,b]),y.useEffect(()=>(o({type:Nn.RegisterDroppable,element:{id:s,key:i,disabled:n,node:N,rect:f,data:C}}),()=>o({type:Nn.UnregisterDroppable,key:i,id:s})),[s]),y.useEffect(()=>{n!==u.current.disabled&&(o({type:Nn.SetDroppableDisabled,id:s,key:i,disabled:n}),u.current.disabled=n)},[s,i,n,o]),{active:l,rect:f,isOver:(c==null?void 0:c.id)===s,node:N,over:c,setNodeRef:k}}function xN(e,t,n){const s=e.slice();return s.splice(n<0?s.length+n:n,0,s.splice(t,1)[0]),s}function r6e(e,t){return e.reduce((n,s,a)=>{const i=t.get(s);return i&&(n[a]=i),n},Array(e.length))}function a0(e){return e!==null&&e>=0}function n6e(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function s6e(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const HK=e=>{let{rects:t,activeIndex:n,overIndex:s,index:a}=e;const i=xN(t,s,n),l=t[a],o=i[a];return!o||!l?null:{x:o.left-l.left,y:o.top-l.top,scaleX:o.width/l.width,scaleY:o.height/l.height}},i0={scaleX:1,scaleY:1},KK=e=>{var t;let{activeIndex:n,activeNodeRect:s,index:a,rects:i,overIndex:l}=e;const o=(t=i[n])!=null?t:s;if(!o)return null;if(a===n){const d=i[l];return d?{x:0,y:n<l?d.top+d.height-(o.top+o.height):d.top-o.top,...i0}:null}const c=a6e(i,a,n);return a>n&&a<=l?{x:0,y:-o.height-c,...i0}:a<n&&a>=l?{x:0,y:o.height+c,...i0}:{x:0,y:0,...i0}};function a6e(e,t,n){const s=e[t],a=e[t-1],i=e[t+1];return s?n<t?a?s.top-(a.top+a.height):i?i.top-(s.top+s.height):0:i?i.top-(s.top+s.height):a?s.top-(a.top+a.height):0:0}const GK="Sortable",YK=Z.createContext({activeIndex:-1,containerId:GK,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:HK,disabled:{draggable:!1,droppable:!1}});function XK(e){let{children:t,id:n,items:s,strategy:a=HK,disabled:i=!1}=e;const{active:l,dragOverlay:o,droppableRects:c,over:d,measureDroppableContainers:u}=QLe(),h=uy(GK,n),f=o.rect!==null,m=y.useMemo(()=>s.map(k=>typeof k=="object"&&"id"in k?k.id:k),[s]),v=l!=null,x=l?m.indexOf(l.id):-1,w=d?m.indexOf(d.id):-1,j=y.useRef(m),g=!n6e(m,j.current),b=w!==-1&&x===-1||g,p=s6e(i);Ml(()=>{g&&v&&u(m)},[g,m,v,u]),y.useEffect(()=>{j.current=m},[m]);const N=y.useMemo(()=>({activeIndex:x,containerId:h,disabled:p,disableTransforms:b,items:m,overIndex:w,useDragOverlay:f,sortedRects:r6e(m,c),strategy:a}),[x,h,p.draggable,p.droppable,b,m,w,c,f,a]);return Z.createElement(YK.Provider,{value:N},t)}const i6e=e=>{let{id:t,items:n,activeIndex:s,overIndex:a}=e;return xN(n,s,a).indexOf(t)},l6e=e=>{let{containerId:t,isSorting:n,wasDragging:s,index:a,items:i,newIndex:l,previousItems:o,previousContainerId:c,transition:d}=e;return!d||!s||o!==i&&a===l?!1:n?!0:l!==a&&t===c},o6e={duration:200,easing:"ease"},ZK="transform",c6e=jm.Transition.toString({property:ZK,duration:0,easing:"linear"}),d6e={roleDescription:"sortable"};function u6e(e){let{disabled:t,index:n,node:s,rect:a}=e;const[i,l]=y.useState(null),o=y.useRef(n);return Ml(()=>{if(!t&&n!==o.current&&s.current){const c=a.current;if(c){const d=rp(s.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&l(u)}}n!==o.current&&(o.current=n)},[t,n,s,a]),y.useEffect(()=>{i&&l(null)},[i]),i}function QK(e){let{animateLayoutChanges:t=l6e,attributes:n,disabled:s,data:a,getNewIndex:i=i6e,id:l,strategy:o,resizeObserverConfig:c,transition:d=o6e}=e;const{items:u,containerId:h,activeIndex:f,disabled:m,disableTransforms:v,sortedRects:x,overIndex:w,useDragOverlay:j,strategy:g}=y.useContext(YK),b=h6e(s,m),p=u.indexOf(l),N=y.useMemo(()=>({sortable:{containerId:h,index:p,items:u},...a}),[h,a,p,u]),k=y.useMemo(()=>u.slice(u.indexOf(l)),[u,l]),{rect:C,node:_,isOver:P,setNodeRef:D}=t6e({id:l,data:N,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:k,...c}}),{active:E,activatorEvent:$,activeNodeRect:A,attributes:T,setNodeRef:O,listeners:z,isDragging:F,over:R,setActivatorNodeRef:I,transform:Q}=ZLe({id:l,data:N,attributes:{...d6e,...n},disabled:b.draggable}),Y=RFe(D,O),K=!!E,oe=K&&!v&&a0(f)&&a0(w),ge=!j&&F,Ne=ge&&oe?Q:null,pe=oe?Ne??(o??g)({rects:x,activeNodeRect:A,activeIndex:f,overIndex:w,index:p}):null,Me=a0(f)&&a0(w)?i({id:l,items:u,activeIndex:f,overIndex:w}):p,xe=E==null?void 0:E.id,ce=y.useRef({activeId:xe,items:u,newIndex:Me,containerId:h}),Ie=u!==ce.current.items,ie=t({active:E,containerId:h,isDragging:F,isSorting:K,id:l,index:p,items:u,newIndex:ce.current.newIndex,previousItems:ce.current.items,previousContainerId:ce.current.containerId,transition:d,wasDragging:ce.current.activeId!=null}),st=u6e({disabled:!ie,index:p,node:_,rect:C});return y.useEffect(()=>{K&&ce.current.newIndex!==Me&&(ce.current.newIndex=Me),h!==ce.current.containerId&&(ce.current.containerId=h),u!==ce.current.items&&(ce.current.items=u)},[K,Me,h,u]),y.useEffect(()=>{if(xe===ce.current.activeId)return;if(xe!=null&&ce.current.activeId==null){ce.current.activeId=xe;return}const De=setTimeout(()=>{ce.current.activeId=xe},50);return()=>clearTimeout(De)},[xe]),{active:E,activeIndex:f,attributes:T,data:N,rect:C,index:p,newIndex:Me,items:u,isOver:P,isSorting:K,isDragging:F,listeners:z,node:_,overIndex:w,over:R,setNodeRef:Y,setActivatorNodeRef:I,setDroppableNodeRef:D,setDraggableNodeRef:O,transform:st??pe,transition:G()};function G(){if(st||Ie&&ce.current.newIndex===p)return c6e;if(!(ge&&!hE($)||!d)&&(K||ie))return jm.Transition.toString({...d,property:ZK})}}function h6e(e,t){var n,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}function Xj(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const f6e=[rr.Down,rr.Right,rr.Up,rr.Left],m6e=(e,t)=>{let{context:{active:n,collisionRect:s,droppableRects:a,droppableContainers:i,over:l,scrollableAncestors:o}}=t;if(f6e.includes(e.code)){if(e.preventDefault(),!n||!s)return;const c=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const f=a.get(h.id);if(f)switch(e.code){case rr.Down:s.top<f.top&&c.push(h);break;case rr.Up:s.top>f.top&&c.push(h);break;case rr.Left:s.left>f.left&&c.push(h);break;case rr.Right:s.left<f.left&&c.push(h);break}});const d=XFe({active:n,collisionRect:s,droppableRects:a,droppableContainers:c,pointerCoordinates:null});let u=OK(d,"id");if(u===(l==null?void 0:l.id)&&d.length>1&&(u=d[1].id),u!=null){const h=i.get(n.id),f=i.get(u),m=f?a.get(f.id):null,v=f==null?void 0:f.node.current;if(v&&m&&h&&f){const w=fN(v).some((k,C)=>o[C]!==k),j=JK(h,f),g=p6e(h,f),b=w||!j?{x:0,y:0}:{x:g?s.width-m.width:0,y:g?s.height-m.height:0},p={x:m.left,y:m.top};return b.x&&b.y?p:Yg(p,b)}}}};function JK(e,t){return!Xj(e)||!Xj(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function p6e(e,t){return!Xj(e)||!Xj(t)||!JK(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const x6e={gambling:{label:"Гемблинг",className:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300",icon:UR},gaming:{label:"Игры",className:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300",icon:Vre},casino:{label:"Казино",className:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300",icon:UR},dating:{label:"Знакомства",className:"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-300",icon:VR},social:{label:"Социальные",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",icon:VR},finance:{label:"Финансы",className:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300",icon:Cr},trading:{label:"Трейдинг",className:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-300",icon:Cr},crypto:{label:"Криптовалюта",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",icon:Cr},software:{label:"ПО",className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/20 dark:text-indigo-300",icon:Lt},vpn:{label:"VPN",className:"bg-slate-100 text-slate-800 dark:bg-slate-900/20 dark:text-slate-300",icon:Lt},antivirus:{label:"Антивирус",className:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300",icon:Lt},ecommerce:{label:"E-commerce",className:"bg-teal-100 text-teal-800 dark:bg-teal-900/20 dark:text-teal-300",icon:z2},shopping:{label:"Покупки",className:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/20 dark:text-cyan-300",icon:z2},mobile:{label:"Мобильные",className:"bg-violet-100 text-violet-800 dark:bg-violet-900/20 dark:text-violet-300",icon:Di},app:{label:"Приложения",className:"bg-fuchsia-100 text-fuchsia-800 dark:bg-fuchsia-900/20 dark:text-fuchsia-300",icon:Di},automotive:{label:"Автомобили",className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300",icon:Tre},education:{label:"Образование",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",icon:qre},realestate:{label:"Недвижимость",className:"bg-brown-100 text-brown-800 dark:bg-brown-900/20 dark:text-brown-300",icon:zw},travel:{label:"Путешествия",className:"bg-sky-100 text-sky-800 dark:bg-sky-900/20 dark:text-sky-300",icon:sne},food:{label:"Еда",className:"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-300",icon:lne},entertainment:{label:"Развлечения",className:"bg-rose-100 text-rose-800 dark:bg-rose-900/20 dark:text-rose-300",icon:Zre},photography:{label:"Фотография",className:"bg-lime-100 text-lime-800 dark:bg-lime-900/20 dark:text-lime-300",icon:Are},business:{label:"Бизнес",className:"bg-neutral-100 text-neutral-800 dark:bg-neutral-900/20 dark:text-neutral-300",icon:Pre}};function eG(e){const t=e==null?void 0:e.toLowerCase();return x6e[t]||{label:e||"Другое",className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300",icon:Jre}}function z0(e){if(!e||e===""||e==="0"||e===0)return"0.00";const t=typeof e=="string"?parseFloat(e):e;return isNaN(t)?"0.00":(Math.ceil(t*100)/100).toFixed(2)}var v3=1,g6e=.9,v6e=.8,y6e=.17,nS=.1,sS=.999,b6e=.9999,j6e=.99,w6e=/[\\\/_+.#"@\[\(\{&]/,N6e=/[\\\/_+.#"@\[\(\{&]/g,k6e=/[\s-]/,tG=/[\s-]/g;function eP(e,t,n,s,a,i,l){if(i===t.length)return a===e.length?v3:j6e;var o=`${a},${i}`;if(l[o]!==void 0)return l[o];for(var c=s.charAt(i),d=n.indexOf(c,a),u=0,h,f,m,v;d>=0;)h=eP(e,t,n,s,d+1,i+1,l),h>u&&(d===a?h*=v3:w6e.test(e.charAt(d-1))?(h*=v6e,m=e.slice(a,d-1).match(N6e),m&&a>0&&(h*=Math.pow(sS,m.length))):k6e.test(e.charAt(d-1))?(h*=g6e,v=e.slice(a,d-1).match(tG),v&&a>0&&(h*=Math.pow(sS,v.length))):(h*=y6e,a>0&&(h*=Math.pow(sS,d-a))),e.charAt(d)!==t.charAt(i)&&(h*=b6e)),(h<nS&&n.charAt(d-1)===s.charAt(i+1)||s.charAt(i+1)===s.charAt(i)&&n.charAt(d-1)!==s.charAt(i))&&(f=eP(e,t,n,s,d+1,i+2,l),f*nS>h&&(h=f*nS)),h>u&&(u=h),d=n.indexOf(c,d+1);return l[o]=u,u}function y3(e){return e.toLowerCase().replace(tG," ")}function S6e(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,eP(e,t,y3(e),y3(t),0,0,{})}var Ep='[cmdk-group=""]',aS='[cmdk-group-items=""]',C6e='[cmdk-group-heading=""]',rG='[cmdk-item=""]',b3=`${rG}:not([aria-disabled="true"])`,tP="cmdk-item-select",oh="data-value",_6e=(e,t,n)=>S6e(e,t,n),nG=y.createContext(void 0),hy=()=>y.useContext(nG),sG=y.createContext(void 0),gE=()=>y.useContext(sG),aG=y.createContext(void 0),iG=y.forwardRef((e,t)=>{let n=ch(()=>{var K,oe;return{search:"",value:(oe=(K=e.value)!=null?K:e.defaultValue)!=null?oe:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=ch(()=>new Set),a=ch(()=>new Map),i=ch(()=>new Map),l=ch(()=>new Set),o=lG(e),{label:c,children:d,value:u,onValueChange:h,filter:f,shouldFilter:m,loop:v,disablePointerSelection:x=!1,vimBindings:w=!0,...j}=e,g=Xn(),b=Xn(),p=Xn(),N=y.useRef(null),k=F6e();Ou(()=>{if(u!==void 0){let K=u.trim();n.current.value=K,C.emit()}},[u]),Ou(()=>{k(6,A)},[]);let C=y.useMemo(()=>({subscribe:K=>(l.current.add(K),()=>l.current.delete(K)),snapshot:()=>n.current,setState:(K,oe,ge)=>{var Ne,Oe,pe,Me;if(!Object.is(n.current[K],oe)){if(n.current[K]=oe,K==="search")$(),D(),k(1,E);else if(K==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let xe=document.getElementById(p);xe?xe.focus():(Ne=document.getElementById(g))==null||Ne.focus()}if(k(7,()=>{var xe;n.current.selectedItemId=(xe=T())==null?void 0:xe.id,C.emit()}),ge||k(5,A),((Oe=o.current)==null?void 0:Oe.value)!==void 0){let xe=oe??"";(Me=(pe=o.current).onValueChange)==null||Me.call(pe,xe);return}}C.emit()}},emit:()=>{l.current.forEach(K=>K())}}),[]),_=y.useMemo(()=>({value:(K,oe,ge)=>{var Ne;oe!==((Ne=i.current.get(K))==null?void 0:Ne.value)&&(i.current.set(K,{value:oe,keywords:ge}),n.current.filtered.items.set(K,P(oe,ge)),k(2,()=>{D(),C.emit()}))},item:(K,oe)=>(s.current.add(K),oe&&(a.current.has(oe)?a.current.get(oe).add(K):a.current.set(oe,new Set([K]))),k(3,()=>{$(),D(),n.current.value||E(),C.emit()}),()=>{i.current.delete(K),s.current.delete(K),n.current.filtered.items.delete(K);let ge=T();k(4,()=>{$(),(ge==null?void 0:ge.getAttribute("id"))===K&&E(),C.emit()})}),group:K=>(a.current.has(K)||a.current.set(K,new Set),()=>{i.current.delete(K),a.current.delete(K)}),filter:()=>o.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:g,inputId:p,labelId:b,listInnerRef:N}),[]);function P(K,oe){var ge,Ne;let Oe=(Ne=(ge=o.current)==null?void 0:ge.filter)!=null?Ne:_6e;return K?Oe(K,n.current.search,oe):0}function D(){if(!n.current.search||o.current.shouldFilter===!1)return;let K=n.current.filtered.items,oe=[];n.current.filtered.groups.forEach(Ne=>{let Oe=a.current.get(Ne),pe=0;Oe.forEach(Me=>{let xe=K.get(Me);pe=Math.max(xe,pe)}),oe.push([Ne,pe])});let ge=N.current;O().sort((Ne,Oe)=>{var pe,Me;let xe=Ne.getAttribute("id"),ce=Oe.getAttribute("id");return((pe=K.get(ce))!=null?pe:0)-((Me=K.get(xe))!=null?Me:0)}).forEach(Ne=>{let Oe=Ne.closest(aS);Oe?Oe.appendChild(Ne.parentElement===Oe?Ne:Ne.closest(`${aS} > *`)):ge.appendChild(Ne.parentElement===ge?Ne:Ne.closest(`${aS} > *`))}),oe.sort((Ne,Oe)=>Oe[1]-Ne[1]).forEach(Ne=>{var Oe;let pe=(Oe=N.current)==null?void 0:Oe.querySelector(`${Ep}[${oh}="${encodeURIComponent(Ne[0])}"]`);pe==null||pe.parentElement.appendChild(pe)})}function E(){let K=O().find(ge=>ge.getAttribute("aria-disabled")!=="true"),oe=K==null?void 0:K.getAttribute(oh);C.setState("value",oe||void 0)}function $(){var K,oe,ge,Ne;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=s.current.size;return}n.current.filtered.groups=new Set;let Oe=0;for(let pe of s.current){let Me=(oe=(K=i.current.get(pe))==null?void 0:K.value)!=null?oe:"",xe=(Ne=(ge=i.current.get(pe))==null?void 0:ge.keywords)!=null?Ne:[],ce=P(Me,xe);n.current.filtered.items.set(pe,ce),ce>0&&Oe++}for(let[pe,Me]of a.current)for(let xe of Me)if(n.current.filtered.items.get(xe)>0){n.current.filtered.groups.add(pe);break}n.current.filtered.count=Oe}function A(){var K,oe,ge;let Ne=T();Ne&&(((K=Ne.parentElement)==null?void 0:K.firstChild)===Ne&&((ge=(oe=Ne.closest(Ep))==null?void 0:oe.querySelector(C6e))==null||ge.scrollIntoView({block:"nearest"})),Ne.scrollIntoView({block:"nearest"}))}function T(){var K;return(K=N.current)==null?void 0:K.querySelector(`${rG}[aria-selected="true"]`)}function O(){var K;return Array.from(((K=N.current)==null?void 0:K.querySelectorAll(b3))||[])}function z(K){let oe=O()[K];oe&&C.setState("value",oe.getAttribute(oh))}function F(K){var oe;let ge=T(),Ne=O(),Oe=Ne.findIndex(Me=>Me===ge),pe=Ne[Oe+K];(oe=o.current)!=null&&oe.loop&&(pe=Oe+K<0?Ne[Ne.length-1]:Oe+K===Ne.length?Ne[0]:Ne[Oe+K]),pe&&C.setState("value",pe.getAttribute(oh))}function R(K){let oe=T(),ge=oe==null?void 0:oe.closest(Ep),Ne;for(;ge&&!Ne;)ge=K>0?$6e(ge,Ep):I6e(ge,Ep),Ne=ge==null?void 0:ge.querySelector(b3);Ne?C.setState("value",Ne.getAttribute(oh)):F(K)}let I=()=>z(O().length-1),Q=K=>{K.preventDefault(),K.metaKey?I():K.altKey?R(1):F(1)},Y=K=>{K.preventDefault(),K.metaKey?z(0):K.altKey?R(-1):F(-1)};return y.createElement(Ze.div,{ref:t,tabIndex:-1,...j,"cmdk-root":"",onKeyDown:K=>{var oe;(oe=j.onKeyDown)==null||oe.call(j,K);let ge=K.nativeEvent.isComposing||K.keyCode===229;if(!(K.defaultPrevented||ge))switch(K.key){case"n":case"j":{w&&K.ctrlKey&&Q(K);break}case"ArrowDown":{Q(K);break}case"p":case"k":{w&&K.ctrlKey&&Y(K);break}case"ArrowUp":{Y(K);break}case"Home":{K.preventDefault(),z(0);break}case"End":{K.preventDefault(),I();break}case"Enter":{K.preventDefault();let Ne=T();if(Ne){let Oe=new Event(tP);Ne.dispatchEvent(Oe)}}}}},y.createElement("label",{"cmdk-label":"",htmlFor:_.inputId,id:_.labelId,style:U6e},c),gN(e,K=>y.createElement(sG.Provider,{value:C},y.createElement(nG.Provider,{value:_},K))))}),P6e=y.forwardRef((e,t)=>{var n,s;let a=Xn(),i=y.useRef(null),l=y.useContext(aG),o=hy(),c=lG(e),d=(s=(n=c.current)==null?void 0:n.forceMount)!=null?s:l==null?void 0:l.forceMount;Ou(()=>{if(!d)return o.item(a,l==null?void 0:l.id)},[d]);let u=oG(a,i,[e.value,e.children,i],e.keywords),h=gE(),f=Kc(k=>k.value&&k.value===u.current),m=Kc(k=>d||o.filter()===!1?!0:k.search?k.filtered.items.get(a)>0:!0);y.useEffect(()=>{let k=i.current;if(!(!k||e.disabled))return k.addEventListener(tP,v),()=>k.removeEventListener(tP,v)},[m,e.onSelect,e.disabled]);function v(){var k,C;x(),(C=(k=c.current).onSelect)==null||C.call(k,u.current)}function x(){h.setState("value",u.current,!0)}if(!m)return null;let{disabled:w,value:j,onSelect:g,forceMount:b,keywords:p,...N}=e;return y.createElement(Ze.div,{ref:ko(i,t),...N,id:a,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!f,"data-disabled":!!w,"data-selected":!!f,onPointerMove:w||o.getDisablePointerSelection()?void 0:x,onClick:w?void 0:v},e.children)}),A6e=y.forwardRef((e,t)=>{let{heading:n,children:s,forceMount:a,...i}=e,l=Xn(),o=y.useRef(null),c=y.useRef(null),d=Xn(),u=hy(),h=Kc(m=>a||u.filter()===!1?!0:m.search?m.filtered.groups.has(l):!0);Ou(()=>u.group(l),[]),oG(l,o,[e.value,e.heading,c]);let f=y.useMemo(()=>({id:l,forceMount:a}),[a]);return y.createElement(Ze.div,{ref:ko(o,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&y.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},n),gN(e,m=>y.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?d:void 0},y.createElement(aG.Provider,{value:f},m))))}),T6e=y.forwardRef((e,t)=>{let{alwaysRender:n,...s}=e,a=y.useRef(null),i=Kc(l=>!l.search);return!n&&!i?null:y.createElement(Ze.div,{ref:ko(a,t),...s,"cmdk-separator":"",role:"separator"})}),E6e=y.forwardRef((e,t)=>{let{onValueChange:n,...s}=e,a=e.value!=null,i=gE(),l=Kc(d=>d.search),o=Kc(d=>d.selectedItemId),c=hy();return y.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),y.createElement(Ze.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":o,id:c.inputId,type:"text",value:a?e.value:l,onChange:d=>{a||i.setState("search",d.target.value),n==null||n(d.target.value)}})}),O6e=y.forwardRef((e,t)=>{let{children:n,label:s="Suggestions",...a}=e,i=y.useRef(null),l=y.useRef(null),o=Kc(d=>d.selectedItemId),c=hy();return y.useEffect(()=>{if(l.current&&i.current){let d=l.current,u=i.current,h,f=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let m=d.offsetHeight;u.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return f.observe(d),()=>{cancelAnimationFrame(h),f.unobserve(d)}}},[]),y.createElement(Ze.div,{ref:ko(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":s,id:c.listId},gN(e,d=>y.createElement("div",{ref:ko(l,c.listInnerRef),"cmdk-list-sizer":""},d)))}),R6e=y.forwardRef((e,t)=>{let{open:n,onOpenChange:s,overlayClassName:a,contentClassName:i,container:l,...o}=e;return y.createElement(U4,{open:n,onOpenChange:s},y.createElement(B4,{container:l},y.createElement(sN,{"cmdk-overlay":"",className:a}),y.createElement(aN,{"aria-label":e.label,"cmdk-dialog":"",className:i},y.createElement(iG,{ref:t,...o}))))}),D6e=y.forwardRef((e,t)=>Kc(n=>n.filtered.count===0)?y.createElement(Ze.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),M6e=y.forwardRef((e,t)=>{let{progress:n,children:s,label:a="Loading...",...i}=e;return y.createElement(Ze.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},gN(e,l=>y.createElement("div",{"aria-hidden":!0},l)))}),Js=Object.assign(iG,{List:O6e,Item:P6e,Input:E6e,Group:A6e,Separator:T6e,Dialog:R6e,Empty:D6e,Loading:M6e});function $6e(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function I6e(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function lG(e){let t=y.useRef(e);return Ou(()=>{t.current=e}),t}var Ou=typeof window>"u"?y.useEffect:y.useLayoutEffect;function ch(e){let t=y.useRef();return t.current===void 0&&(t.current=e()),t}function Kc(e){let t=gE(),n=()=>e(t.snapshot());return y.useSyncExternalStore(t.subscribe,n,n)}function oG(e,t,n,s=[]){let a=y.useRef(),i=hy();return Ou(()=>{var l;let o=(()=>{var d;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=s.map(d=>d.trim());i.value(e,o,c),(l=t.current)==null||l.setAttribute(oh,o),a.current=o}),a}var F6e=()=>{let[e,t]=y.useState(),n=ch(()=>new Map);return Ou(()=>{n.current.forEach(s=>s()),n.current=new Map},[e]),(s,a)=>{n.current.set(s,a),t({})}};function L6e(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function gN({asChild:e,children:t},n){return e&&y.isValidElement(t)?y.cloneElement(L6e(t),{ref:t.ref},n(t.props.children)):n(t)}var U6e={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Zj=y.forwardRef(({className:e,...t},n)=>r.jsx(Js,{ref:n,className:Ae("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Zj.displayName=Js.displayName;const Qj=y.forwardRef(({className:e,...t},n)=>r.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[r.jsx(Xr,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx(Js.Input,{ref:n,className:Ae("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Qj.displayName=Js.Input.displayName;const B6e=y.forwardRef(({className:e,...t},n)=>r.jsx(Js.List,{ref:n,className:Ae("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));B6e.displayName=Js.List.displayName;const Jj=y.forwardRef((e,t)=>r.jsx(Js.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Jj.displayName=Js.Empty.displayName;const ew=y.forwardRef(({className:e,...t},n)=>r.jsx(Js.Group,{ref:n,className:Ae("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));ew.displayName=Js.Group.displayName;const z6e=y.forwardRef(({className:e,...t},n)=>r.jsx(Js.Separator,{ref:n,className:Ae("-mx-1 h-px bg-border",e),...t}));z6e.displayName=Js.Separator.displayName;const tw=y.forwardRef(({className:e,...t},n)=>r.jsx(Js.Item,{ref:n,className:Ae("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));tw.displayName=Js.Item.displayName;function V6e(e,t,n){const s=[];return e.forEach(a=>typeof a!="string"?s.push(a):t[Symbol.split](a).forEach((i,l,o)=>{i!==""&&s.push(i),l<o.length-1&&s.push(n)})),s}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function j3(e,t){const n=/\$/g,s="$$$$";let a=[e];if(t==null)return a;for(const i of Object.keys(t))if(i!=="_"){let l=t[i];typeof l=="string"&&(l=n[Symbol.replace](l,s)),a=V6e(a,new RegExp(`%\\{${i}\\}`,"g"),l)}return a}const q6e=e=>{throw new Error(`missing string: ${e}`)};var iv,lv,rP;class cG{constructor(t,{onMissingKey:n=q6e}={}){be(this,lv);ye(this,"locale");be(this,iv);this.locale={strings:{},pluralize(s){return s===1?0:1}},Array.isArray(t)?t.forEach(Ce(this,lv,rP),this):Ce(this,lv,rP).call(this,t),je(this,iv,n)}translate(t,n){return this.translateArray(t,n).join("")}translateArray(t,n){let s=this.locale.strings[t];if(s==null&&(B(this,iv).call(this,t),s=t),typeof s=="object"){if(n&&typeof n.smart_count<"u"){const i=this.locale.pluralize(n.smart_count);return j3(s[i],n)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof s!="string")throw new Error("string was not a string");return j3(s,n)}}iv=new WeakMap,lv=new WeakSet,rP=function(t){if(!(t!=null&&t.strings))return;const n=this.locale;Object.assign(this.locale,{strings:{...n.strings,...t.strings},pluralize:t.pluralize||n.pluralize})};class dG{constructor(t,n){ye(this,"uppy");ye(this,"opts");ye(this,"id");ye(this,"defaultLocale");ye(this,"i18n");ye(this,"i18nArray");ye(this,"type");ye(this,"VERSION");this.uppy=t,this.opts=n??{}}getPluginState(){const{plugins:t}=this.uppy.getState();return(t==null?void 0:t[this.id])||{}}setPluginState(t){const{plugins:n}=this.uppy.getState();this.uppy.setState({plugins:{...n,[this.id]:{...n[this.id],...t}}})}setOptions(t){this.opts={...this.opts,...t},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const t=new cG([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.setPluginState(void 0)}addTarget(t){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(t){}afterUpdate(){}}function iS(e){return e<10?`0${e}`:e.toString()}function V0(){const e=new Date,t=iS(e.getHours()),n=iS(e.getMinutes()),s=iS(e.getSeconds());return`${t}:${n}:${s}`}const W6e={debug:()=>{},warn:()=>{},error:(...e)=>console.error(`[Uppy] [${V0()}]`,...e)},H6e={debug:(...e)=>console.debug(`[Uppy] [${V0()}]`,...e),warn:(...e)=>console.warn(`[Uppy] [${V0()}]`,...e),error:(...e)=>console.error(`[Uppy] [${V0()}]`,...e)};function uG(e){return typeof e!="object"||e===null||!("nodeType"in e)?!1:e.nodeType===Node.ELEMENT_NODE}function K6e(e,t=document){return typeof e=="string"?t.querySelector(e):uG(e)?e:null}function hG(e){for(;e&&!e.dir;)e=e.parentNode;return e==null?void 0:e.dir}var fy,qt,fG,kd,w3,mG,pG,xG,vE,nP,sP,Zg={},gG=[],G6e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,my=Array.isArray;function jl(e,t){for(var n in t)e[n]=t[n];return e}function yE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Qg(e,t,n){var s,a,i,l={};for(i in t)i=="key"?s=t[i]:i=="ref"?a=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?fy.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)l[i]===void 0&&(l[i]=e.defaultProps[i]);return wx(e,l,s,a,null)}function wx(e,t,n,s,a){var i={type:e,props:t,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++fG,__i:-1,__u:0};return a==null&&qt.vnode!=null&&qt.vnode(i),i}function Y6e(){return{current:null}}function wi(e){return e.children}function Hs(e,t){this.props=e,this.context=t}function wm(e,t){if(t==null)return e.__?wm(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?wm(e):null}function vG(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return vG(e)}}function N3(e){(!e.__d&&(e.__d=!0)&&kd.push(e)&&!rw.__r++||w3!=qt.debounceRendering)&&((w3=qt.debounceRendering)||mG)(rw)}function rw(){for(var e,t,n,s,a,i,l,o=1;kd.length;)kd.length>o&&kd.sort(pG),e=kd.shift(),o=kd.length,e.__d&&(n=void 0,a=(s=(t=e).__v).__e,i=[],l=[],t.__P&&((n=jl({},s)).__v=s.__v+1,qt.vnode&&qt.vnode(n),bE(t.__P,n,s,t.__n,t.__P.namespaceURI,32&s.__u?[a]:null,i,a??wm(s),!!(32&s.__u),l),n.__v=s.__v,n.__.__k[n.__i]=n,jG(i,n,l),n.__e!=a&&vG(n)));rw.__r=0}function yG(e,t,n,s,a,i,l,o,c,d,u){var h,f,m,v,x,w,j=s&&s.__k||gG,g=t.length;for(c=X6e(n,t,j,c,g),h=0;h<g;h++)(m=n.__k[h])!=null&&(f=m.__i==-1?Zg:j[m.__i]||Zg,m.__i=h,w=bE(e,m,f,a,i,l,o,c,d,u),v=m.__e,m.ref&&f.ref!=m.ref&&(f.ref&&jE(f.ref,null,m),u.push(m.ref,m.__c||v,m)),x==null&&v!=null&&(x=v),4&m.__u||f.__k===m.__k?c=bG(m,c,e):typeof m.type=="function"&&w!==void 0?c=w:v&&(c=v.nextSibling),m.__u&=-7);return n.__e=x,c}function X6e(e,t,n,s,a){var i,l,o,c,d,u=n.length,h=u,f=0;for(e.__k=new Array(a),i=0;i<a;i++)(l=t[i])!=null&&typeof l!="boolean"&&typeof l!="function"?(c=i+f,(l=e.__k[i]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?wx(null,l,null,null,null):my(l)?wx(wi,{children:l},null,null,null):l.constructor==null&&l.__b>0?wx(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=e,l.__b=e.__b+1,o=null,(d=l.__i=Z6e(l,n,c,h))!=-1&&(h--,(o=n[d])&&(o.__u|=2)),o==null||o.__v==null?(d==-1&&(a>u?f--:a<u&&f++),typeof l.type!="function"&&(l.__u|=4)):d!=c&&(d==c-1?f--:d==c+1?f++:(d>c?f--:f++,l.__u|=4))):e.__k[i]=null;if(h)for(i=0;i<u;i++)(o=n[i])!=null&&!(2&o.__u)&&(o.__e==s&&(s=wm(o)),NG(o,o));return s}function bG(e,t,n){var s,a;if(typeof e.type=="function"){for(s=e.__k,a=0;s&&a<s.length;a++)s[a]&&(s[a].__=e,t=bG(s[a],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=wm(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function xi(e,t){return t=t||[],e==null||typeof e=="boolean"||(my(e)?e.some(function(n){xi(n,t)}):t.push(e)),t}function Z6e(e,t,n,s){var a,i,l,o=e.key,c=e.type,d=t[n],u=d!=null&&(2&d.__u)==0;if(d===null&&e.key==null||u&&o==d.key&&c==d.type)return n;if(s>(u?1:0)){for(a=n-1,i=n+1;a>=0||i<t.length;)if((d=t[l=a>=0?a--:i++])!=null&&!(2&d.__u)&&o==d.key&&c==d.type)return l}return-1}function k3(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||G6e.test(t)?n:n+"px"}function l0(e,t,n,s,a){var i,l;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(t in s)n&&t in n||k3(e.style,t,"");if(n)for(t in n)s&&n[t]==s[t]||k3(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(xG,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?s?n.u=s.u:(n.u=vE,e.addEventListener(t,i?sP:nP,i)):e.removeEventListener(t,i?sP:nP,i);else{if(a=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function S3(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=vE++;else if(t.t<n.u)return;return n(qt.event?qt.event(t):t)}}}function bE(e,t,n,s,a,i,l,o,c,d){var u,h,f,m,v,x,w,j,g,b,p,N,k,C,_,P,D,E=t.type;if(t.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),i=[o=t.__e=n.__e]),(u=qt.__b)&&u(t);e:if(typeof E=="function")try{if(j=t.props,g="prototype"in E&&E.prototype.render,b=(u=E.contextType)&&s[u.__c],p=u?b?b.props.value:u.__:s,n.__c?w=(h=t.__c=n.__c).__=h.__E:(g?t.__c=h=new E(j,p):(t.__c=h=new Hs(j,p),h.constructor=E,h.render=J6e),b&&b.sub(h),h.props=j,h.state||(h.state={}),h.context=p,h.__n=s,f=h.__d=!0,h.__h=[],h._sb=[]),g&&h.__s==null&&(h.__s=h.state),g&&E.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=jl({},h.__s)),jl(h.__s,E.getDerivedStateFromProps(j,h.__s))),m=h.props,v=h.state,h.__v=t,f)g&&E.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),g&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(g&&E.getDerivedStateFromProps==null&&j!==m&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(j,p),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(j,h.__s,p)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(h.props=j,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function($){$&&($.__=t)}),N=0;N<h._sb.length;N++)h.__h.push(h._sb[N]);h._sb=[],h.__h.length&&l.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(j,h.__s,p),g&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(m,v,x)})}if(h.context=p,h.props=j,h.__P=e,h.__e=!1,k=qt.__r,C=0,g){for(h.state=h.__s,h.__d=!1,k&&k(t),u=h.render(h.props,h.state,h.context),_=0;_<h._sb.length;_++)h.__h.push(h._sb[_]);h._sb=[]}else do h.__d=!1,k&&k(t),u=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++C<25);h.state=h.__s,h.getChildContext!=null&&(s=jl(jl({},s),h.getChildContext())),g&&!f&&h.getSnapshotBeforeUpdate!=null&&(x=h.getSnapshotBeforeUpdate(m,v)),P=u,u!=null&&u.type===wi&&u.key==null&&(P=wG(u.props.children)),o=yG(e,my(P)?P:[P],t,n,s,a,i,l,o,c,d),h.base=t.__e,t.__u&=-161,h.__h.length&&l.push(h),w&&(h.__E=h.__=null)}catch($){if(t.__v=null,c||i!=null)if($.then){for(t.__u|=c?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;i[i.indexOf(o)]=null,t.__e=o}else{for(D=i.length;D--;)yE(i[D]);aP(t)}else t.__e=n.__e,t.__k=n.__k,$.then||aP(t);qt.__e($,t,n)}else i==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):o=t.__e=Q6e(n.__e,t,n,s,a,i,l,c,d);return(u=qt.diffed)&&u(t),128&t.__u?void 0:o}function aP(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(aP)}function jG(e,t,n){for(var s=0;s<n.length;s++)jE(n[s],n[++s],n[++s]);qt.__c&&qt.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){qt.__e(i,a.__v)}})}function wG(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:my(e)?e.map(wG):jl({},e)}function Q6e(e,t,n,s,a,i,l,o,c){var d,u,h,f,m,v,x,w=n.props,j=t.props,g=t.type;if(g=="svg"?a="http://www.w3.org/2000/svg":g=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(d=0;d<i.length;d++)if((m=i[d])&&"setAttribute"in m==!!g&&(g?m.localName==g:m.nodeType==3)){e=m,i[d]=null;break}}if(e==null){if(g==null)return document.createTextNode(j);e=document.createElementNS(a,g,j.is&&j),o&&(qt.__m&&qt.__m(t,i),o=!1),i=null}if(g==null)w===j||o&&e.data==j||(e.data=j);else{if(i=i&&fy.call(e.childNodes),w=n.props||Zg,!o&&i!=null)for(w={},d=0;d<e.attributes.length;d++)w[(m=e.attributes[d]).name]=m.value;for(d in w)if(m=w[d],d!="children"){if(d=="dangerouslySetInnerHTML")h=m;else if(!(d in j)){if(d=="value"&&"defaultValue"in j||d=="checked"&&"defaultChecked"in j)continue;l0(e,d,null,m,a)}}for(d in j)m=j[d],d=="children"?f=m:d=="dangerouslySetInnerHTML"?u=m:d=="value"?v=m:d=="checked"?x=m:o&&typeof m!="function"||w[d]===m||l0(e,d,m,w[d],a);if(u)o||h&&(u.__html==h.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(h&&(e.innerHTML=""),yG(t.type=="template"?e.content:e,my(f)?f:[f],t,n,s,g=="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,l,i?i[0]:n.__k&&wm(n,0),o,c),i!=null)for(d=i.length;d--;)yE(i[d]);o||(d="value",g=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[d]||g=="progress"&&!v||g=="option"&&v!=w[d])&&l0(e,d,v,w[d],a),d="checked",x!=null&&x!=e[d]&&l0(e,d,x,w[d],a))}return e}function jE(e,t,n){try{if(typeof e=="function"){var s=typeof e.__u=="function";s&&e.__u(),s&&t==null||(e.__u=e(t))}else e.current=t}catch(a){qt.__e(a,n)}}function NG(e,t,n){var s,a;if(qt.unmount&&qt.unmount(e),(s=e.ref)&&(s.current&&s.current!=e.__e||jE(s,null,t)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(i){qt.__e(i,t)}s.base=s.__P=null}if(s=e.__k)for(a=0;a<s.length;a++)s[a]&&NG(s[a],t,n||typeof e.type!="function");n||yE(e.__e),e.__c=e.__=e.__e=void 0}function J6e(e,t,n){return this.constructor(e,n)}function e8e(e,t,n){var s,a,i,l;t==document&&(t=document.documentElement),qt.__&&qt.__(e,t),a=(s=typeof n=="function")?null:t.__k,i=[],l=[],bE(t,e=(!s&&n||t).__k=Qg(wi,null,[e]),a||Zg,Zg,t.namespaceURI,!s&&n?[n]:a?null:t.firstChild?fy.call(t.childNodes):null,i,!s&&n?n:a?a.__e:t.firstChild,s,l),jG(i,e,l)}function kG(e,t,n){var s,a,i,l,o=jl({},e.props);for(i in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)i=="key"?s=t[i]:i=="ref"?a=t[i]:o[i]=t[i]===void 0&&l!=null?l[i]:t[i];return arguments.length>2&&(o.children=arguments.length>3?fy.call(arguments,2):n),wx(e.type,o,s||e.key,a||e.ref,null)}fy=gG.slice,qt={__e:function(e,t,n,s){for(var a,i,l;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),l=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,s||{}),l=a.__d),l)return a.__E=a}catch(o){e=o}throw e}},fG=0,Hs.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=jl({},this.state),typeof e=="function"&&(e=e(jl({},n),this.props)),e&&jl(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),N3(this))},Hs.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),N3(this))},Hs.prototype.render=wi,kd=[],mG=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pG=function(e,t){return e.__v.__b-t.__v.__b},rw.__r=0,xG=/(PointerCapture)$|Capture$/i,vE=0,nP=S3(!1),sP=S3(!0);var Jg,nn,lS,C3,ev=0,SG=[],un=qt,_3=un.__b,P3=un.__r,A3=un.diffed,T3=un.__c,E3=un.unmount,O3=un.__;function wE(e,t){un.__h&&un.__h(nn,e,ev||t),ev=0;var n=nn.__H||(nn.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function nw(e){return ev=1,t8e(_G,e)}function t8e(e,t,n){var s=wE(Jg++,2);if(s.t=e,!s.__c&&(s.__=[n?n(t):_G(void 0,t),function(o){var c=s.__N?s.__N[0]:s.__[0],d=s.t(c,o);c!==d&&(s.__N=[d,s.__[1]],s.__c.setState({}))}],s.__c=nn,!nn.__f)){var a=function(o,c,d){if(!s.__c.__H)return!0;var u=s.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!i||i.call(this,o,c,d);var h=s.__c.props!==o;return u.forEach(function(f){if(f.__N){var m=f.__[0];f.__=f.__N,f.__N=void 0,m!==f.__[0]&&(h=!0)}}),i&&i.call(this,o,c,d)||h};nn.__f=!0;var i=nn.shouldComponentUpdate,l=nn.componentWillUpdate;nn.componentWillUpdate=function(o,c,d){if(this.__e){var u=i;i=void 0,a(o,c,d),i=u}l&&l.call(this,o,c,d)},nn.shouldComponentUpdate=a}return s.__N||s.__}function iP(e,t){var n=wE(Jg++,3);!un.__s&&CG(n.__H,t)&&(n.__=e,n.u=t,nn.__H.__h.push(n))}function q0(e){return ev=5,NE(function(){return{current:e}},[])}function NE(e,t){var n=wE(Jg++,7);return CG(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function r8e(e,t){return ev=8,NE(function(){return e},t)}function n8e(){for(var e;e=SG.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(W0),e.__H.__h.forEach(lP),e.__H.__h=[]}catch(t){e.__H.__h=[],un.__e(t,e.__v)}}un.__b=function(e){nn=null,_3&&_3(e)},un.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),O3&&O3(e,t)},un.__r=function(e){P3&&P3(e),Jg=0;var t=(nn=e.__c).__H;t&&(lS===nn?(t.__h=[],nn.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(W0),t.__h.forEach(lP),t.__h=[],Jg=0)),lS=nn},un.diffed=function(e){A3&&A3(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(SG.push(t)!==1&&C3===un.requestAnimationFrame||((C3=un.requestAnimationFrame)||s8e)(n8e)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),lS=nn=null},un.__c=function(e,t){t.some(function(n){try{n.__h.forEach(W0),n.__h=n.__h.filter(function(s){return!s.__||lP(s)})}catch(s){t.some(function(a){a.__h&&(a.__h=[])}),t=[],un.__e(s,n.__v)}}),T3&&T3(e,t)},un.unmount=function(e){E3&&E3(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{W0(s)}catch(a){t=a}}),n.__H=void 0,t&&un.__e(t,n.__v))};var R3=typeof requestAnimationFrame=="function";function s8e(e){var t,n=function(){clearTimeout(s),R3&&cancelAnimationFrame(t),setTimeout(e)},s=setTimeout(n,35);R3&&(t=requestAnimationFrame(n))}function W0(e){var t=nn,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),nn=t}function lP(e){var t=nn;e.__c=e.__(),nn=t}function CG(e,t){return!e||e.length!==t.length||t.some(function(n,s){return n!==e[s]})}function _G(e,t){return typeof t=="function"?t(e):t}function a8e(e,t){for(var n in t)e[n]=t[n];return e}function D3(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var s in t)if(s!=="__source"&&e[s]!==t[s])return!0;return!1}function M3(e,t){this.props=e,this.context=t}(M3.prototype=new Hs).isPureReactComponent=!0,M3.prototype.shouldComponentUpdate=function(e,t){return D3(this.props,e)||D3(this.state,t)};var $3=qt.__b;qt.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),$3&&$3(e)};var i8e=qt.__e;qt.__e=function(e,t,n,s){if(e.then){for(var a,i=t;i=i.__;)if((a=i.__c)&&a.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),a.__c(e,t)}i8e(e,t,n,s)};var I3=qt.unmount;function PG(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),e.__c.__H=null),(e=a8e({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(s){return PG(s,t,n)})),e}function AG(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(s){return AG(s,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function oS(){this.__u=0,this.o=null,this.__b=null}function TG(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function o0(){this.i=null,this.l=null}qt.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),I3&&I3(e)},(oS.prototype=new Hs).__c=function(e,t){var n=t.__c,s=this;s.o==null&&(s.o=[]),s.o.push(n);var a=TG(s.__v),i=!1,l=function(){i||(i=!0,n.__R=null,a?a(o):o())};n.__R=l;var o=function(){if(!--s.__u){if(s.state.__a){var c=s.state.__a;s.__v.__k[0]=AG(c,c.__c.__P,c.__c.__O)}var d;for(s.setState({__a:s.__b=null});d=s.o.pop();)d.forceUpdate()}};s.__u++||32&t.__u||s.setState({__a:s.__b=s.__v.__k[0]}),e.then(l,l)},oS.prototype.componentWillUnmount=function(){this.o=[]},oS.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=PG(this.__b,n,s.__O=s.__P)}this.__b=null}var a=t.__a&&Qg(wi,null,e.fallback);return a&&(a.__u&=-33),[Qg(wi,null,t.__a?null:e.children),a]};var F3=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(o0.prototype=new Hs).__a=function(e){var t=this,n=TG(t.__v),s=t.l.get(e);return s[0]++,function(a){var i=function(){t.props.revealOrder?(s.push(a),F3(t,e,s)):a()};n?n(i):i()}},o0.prototype.render=function(e){this.i=null,this.l=new Map;var t=xi(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},o0.prototype.componentDidUpdate=o0.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){F3(e,n,t)})};var l8e=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,o8e=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,c8e=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,d8e=/[A-Z0-9]/g,u8e=typeof document<"u",h8e=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function L3(e,t,n){return t.__k==null&&(t.textContent=""),e8e(e,t),typeof n=="function"&&n(),e?e.__c:null}Hs.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Hs.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var U3=qt.event;function f8e(){}function m8e(){return this.cancelBubble}function p8e(){return this.defaultPrevented}qt.event=function(e){return U3&&(e=U3(e)),e.persist=f8e,e.isPropagationStopped=m8e,e.isDefaultPrevented=p8e,e.nativeEvent=e};var x8e={enumerable:!1,configurable:!0,get:function(){return this.class}},B3=qt.vnode;qt.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,s=t.type,a={},i=s.indexOf("-")===-1;for(var l in n){var o=n[l];if(!(l==="value"&&"defaultValue"in n&&o==null||u8e&&l==="children"&&s==="noscript"||l==="class"||l==="className")){var c=l.toLowerCase();l==="defaultValue"&&"value"in n&&n.value==null?l="value":l==="download"&&o===!0?o="":c==="translate"&&o==="no"?o=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?l="ondblclick":c!=="onchange"||s!=="input"&&s!=="textarea"||h8e(n.type)?c==="onfocus"?l="onfocusin":c==="onblur"?l="onfocusout":c8e.test(l)&&(l=c):c=l="oninput":i&&o8e.test(l)?l=l.replace(d8e,"-$&").toLowerCase():o===null&&(o=void 0),c==="oninput"&&a[l=c]&&(l="oninputCapture"),a[l]=o}}s=="select"&&a.multiple&&Array.isArray(a.value)&&(a.value=xi(n.children).forEach(function(d){d.props.selected=a.value.indexOf(d.props.value)!=-1})),s=="select"&&a.defaultValue!=null&&(a.value=xi(n.children).forEach(function(d){d.props.selected=a.multiple?a.defaultValue.indexOf(d.props.value)!=-1:a.defaultValue==d.props.value})),n.class&&!n.className?(a.class=n.class,Object.defineProperty(a,"className",x8e)):(n.className&&!n.class||n.class&&n.className)&&(a.class=a.className=n.className),t.props=a}(e),e.$$typeof=l8e,B3&&B3(e)};var z3=qt.__r;qt.__r=function(e){z3&&z3(e),e.__c};var V3=qt.diffed;qt.diffed=function(e){V3&&V3(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};function g8e(e){let t=null,n;return(...s)=>(n=s,t||(t=Promise.resolve().then(()=>(t=null,e(...n)))),t)}var ov;const lw=class lw extends dG{constructor(){super(...arguments);be(this,ov);ye(this,"isTargetDOMEl");ye(this,"el");ye(this,"parent");ye(this,"title")}getTargetPlugin(n){let s;if(typeof(n==null?void 0:n.addTarget)=="function")s=n,s instanceof lw||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:s,UIPlugin:lw}}));else if(typeof n=="function"){const a=n;this.uppy.iteratePlugins(i=>{i instanceof a&&(s=i)})}return s}mount(n,s){const a=s.id,i=K6e(n);if(i){this.isTargetDOMEl=!0;const c=document.createElement("div");return c.classList.add("uppy-Root"),je(this,ov,g8e(d=>{this.uppy.getPlugin(this.id)&&(L3(this.render(d,c),c),this.afterUpdate())})),this.uppy.log(`Installing ${a} to a DOM element '${n}'`),this.opts.replaceTargetContent&&(i.innerHTML=""),L3(this.render(this.uppy.getState(),c),c),this.el=c,i.appendChild(c),c.dir=this.opts.direction||hG(c)||"ltr",this.onMount(),this.el}const l=this.getTargetPlugin(n);if(l)return this.uppy.log(`Installing ${a} to ${l.id}`),this.parent=l,this.el=l.addTarget(s),this.onMount(),this.el;this.uppy.log(`Not installing ${a}`);let o=`Invalid target option given to ${a}.`;throw typeof n=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(n,s){throw new Error("Extend the render method to add your plugin to a DOM element")}update(n){var s;this.el!=null&&((s=B(this,ov))==null||s.call(this,n))}unmount(){var n;this.isTargetDOMEl&&((n=this.el)==null||n.remove()),this.onUnmount()}onMount(){}onUnmount(){}};ov=new WeakMap;let Nm=lw;const v8e="@uppy/store-default",y8e="The default simple object-based store for Uppy.",b8e="4.3.2",j8e="MIT",w8e="lib/index.js",N8e="module",k8e={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},S8e=["file uploader","uppy","uppy-store"],C8e="https://uppy.io",_8e={url:"https://github.com/transloadit/uppy/issues"},P8e={jsdom:"^26.1.0",typescript:"^5.8.3",vitest:"^3.2.4"},A8e={type:"git",url:"git+https://github.com/transloadit/uppy.git"},T8e=["src","lib","dist","CHANGELOG.md"],E8e={name:v8e,description:y8e,version:b8e,license:j8e,main:w8e,type:N8e,scripts:k8e,keywords:S8e,homepage:C8e,bugs:_8e,devDependencies:P8e,repository:A8e,files:T8e};var lf,ow,OG;class EG{constructor(){be(this,ow);ye(this,"state",{});be(this,lf,new Set)}getState(){return this.state}setState(t){const n={...this.state},s={...this.state,...t};this.state=s,Ce(this,ow,OG).call(this,n,s,t)}subscribe(t){return B(this,lf).add(t),()=>{B(this,lf).delete(t)}}}lf=new WeakMap,ow=new WeakSet,OG=function(...t){B(this,lf).forEach(n=>{n(...t)})},ye(EG,"VERSION",E8e.version);function RG(e){const t=e.lastIndexOf(".");return t===-1||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}const q3={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function DG(e){var n;if(e.type)return e.type;const t=e.name?(n=RG(e.name).extension)==null?void 0:n.toLowerCase():null;return t&&t in q3?q3[t]:"application/octet-stream"}function O8e(e){return e.charCodeAt(0).toString(32)}function W3(e){let t="";return e.replace(/[^A-Z0-9]/gi,n=>(t+=`-${O8e(n)}`,"/"))+t}function R8e(e,t){let n=t||"uppy";return typeof e.name=="string"&&(n+=`-${W3(e.name.toLowerCase())}`),e.type!==void 0&&(n+=`-${e.type}`),e.meta&&typeof e.meta.relativePath=="string"&&(n+=`-${W3(e.meta.relativePath.toLowerCase())}`),e.data.size!==void 0&&(n+=`-${e.data.size}`),e.data.lastModified!==void 0&&(n+=`-${e.data.lastModified}`),n}function D8e(e){return!e.isRemote||!e.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(e.remote.provider)}function M8e(e,t){if(D8e(e))return e.id;const n=DG(e);return R8e({...e,type:n},t)}var $8e=function(){var t={},n=t._fns={};t.emit=function(l,o,c,d,u,h,f){var m=s(l);m.length&&a(l,m,[o,c,d,u,h,f])},t.on=function(l,o){n[l]||(n[l]=[]),n[l].push(o)},t.once=function(l,o){function c(){o.apply(this,arguments),t.off(l,c)}this.on(l,c)},t.off=function(l,o){var c=[];if(l&&o){var d=this._fns[l],u=0,h=d?d.length:0;for(u;u<h;u++)d[u]!==o&&c.push(d[u])}c.length?this._fns[l]=c:delete this._fns[l]};function s(i){var l=n[i]?n[i]:[],o=i.indexOf(":"),c=o===-1?[i]:[i.substring(0,o),i.substring(o+1)],d=Object.keys(n),u=0,h=d.length;for(u;u<h;u++){var f=d[u];if(f==="*"&&(l=l.concat(n[f])),c.length===2&&c[0]===f){l=l.concat(n[f]);break}}return l}function a(i,l,o){var c=0,d=l.length;for(c;c<d&&l[c];c++)l[c].event=i,l[c].apply(l[c],o)}return t};const I8e=Qt($8e);let F8e="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",kE=(e=21)=>{let t="",n=e|0;for(;n--;)t+=F8e[Math.random()*64|0];return t};const L8e="@uppy/core",U8e="Core module for the extensible JavaScript file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Instagram, Dropbox, Google Drive, S3 and more :dog:",B8e="4.5.2",z8e="MIT",V8e="lib/index.js",q8e="dist/style.min.css",W8e="module",H8e=["*.css"],K8e={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},G8e=["file uploader","uppy","uppy-plugin"],Y8e="https://uppy.io",X8e={url:"https://github.com/transloadit/uppy/issues"},Z8e={type:"git",url:"git+https://github.com/transloadit/uppy.git"},Q8e=["src","lib","dist","CHANGELOG.md"],J8e={"@transloadit/prettier-bytes":"^0.3.4","@uppy/store-default":"^4.3.2","@uppy/utils":"^6.2.2",lodash:"^4.17.21","mime-match":"^1.0.2","namespace-emitter":"^2.0.1",nanoid:"^5.0.9",preact:"^10.5.13"},eUe={"@types/deep-freeze":"^0",cssnano:"^7.0.7","deep-freeze":"^0.0.1",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},tUe={name:L8e,description:U8e,version:B8e,license:z8e,main:V8e,style:q8e,type:W8e,sideEffects:H8e,scripts:K8e,keywords:G8e,homepage:Y8e,bugs:X8e,repository:Z8e,files:Q8e,dependencies:J8e,devDependencies:eUe};function rUe(e,t){return t.name?t.name:e.split("/")[0]==="image"?`${e.split("/")[0]}.${e.split("/")[1]}`:"noname"}const nUe={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var sUe=function(t){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected a number, got ${typeof t}`);const n=t<0;let s=Math.abs(t);if(n&&(s=-s),s===0)return"0 B";const a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.min(Math.floor(Math.log(s)/Math.log(1024)),a.length-1),l=Number(s/1024**i),o=a[i];return`${l>=10||l%1===0?Math.round(l):l.toFixed(1)} ${o}`};const Dd=Qt(sUe);function MG(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}MG.prototype.match=function(e){var t=!0,n=this.parts,s,a=n.length,i;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(i=(e||"").split(this.separator),s=0;t&&s<a;s++)n[s]!=="*"&&(s<i.length?t=n[s]===i[s]:t=!1);t=t&&i}else if(typeof e.splice=="function")for(t=[],s=e.length;s--;)this.match(e[s])&&(t[t.length]=e[s]);else if(typeof e=="object"){t={};for(var l in e)this.match(l)&&(t[l]=e[l])}return t};var aUe=function(e,t,n){var s=new MG(e,n||/[\/\.]/);return typeof t<"u"?s.match(t):s},iUe=aUe,lUe=/[\/\+\.]/,oUe=function(e,t){function n(s){var a=iUe(s,e,lUe);return a&&a.length>=2}return t?n(t.split(";")[0]):n};const cUe=Qt(oUe),dUe={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class hi extends Error{constructor(n,s){super(n);ye(this,"isUserFacing");ye(this,"file");ye(this,"isRestriction",!0);this.isUserFacing=(s==null?void 0:s.isUserFacing)??!0,s!=null&&s.file&&(this.file=s.file)}}class uUe{constructor(t,n){ye(this,"getI18n");ye(this,"getOpts");this.getI18n=n,this.getOpts=()=>{var a;const s=t();if(((a=s.restrictions)==null?void 0:a.allowedFileTypes)!=null&&!Array.isArray(s.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return s}}validateAggregateRestrictions(t,n){const{maxTotalFileSize:s,maxNumberOfFiles:a}=this.getOpts().restrictions;if(a&&t.filter(l=>!l.isGhost).length+n.length>a)throw new hi(`${this.getI18n()("youCanOnlyUploadX",{smart_count:a})}`);if(s){const i=[...t,...n].reduce((l,o)=>l+(o.size??0),0);if(i>s)throw new hi(this.getI18n()("aggregateExceedsSize",{sizeAllowed:Dd(s),size:Dd(i)}))}}validateSingleFile(t){const{maxFileSize:n,minFileSize:s,allowedFileTypes:a}=this.getOpts().restrictions;if(a&&!a.some(l=>l.includes("/")?t.type?cUe(t.type.replace(/;.*?$/,""),l):!1:l[0]==="."&&t.extension?t.extension.toLowerCase()===l.slice(1).toLowerCase():!1)){const l=a.join(", ");throw new hi(this.getI18n()("youCanOnlyUploadFileTypes",{types:l}),{file:t})}if(n&&t.size!=null&&t.size>n)throw new hi(this.getI18n()("exceedsSize",{size:Dd(n),file:t.name??this.getI18n()("unnamed")}),{file:t});if(s&&t.size!=null&&t.size<s)throw new hi(this.getI18n()("inferiorSize",{size:Dd(s)}),{file:t})}validate(t,n){n.forEach(s=>{this.validateSingleFile(s)}),this.validateAggregateRestrictions(t,n)}validateMinNumberOfFiles(t){const{minNumberOfFiles:n}=this.getOpts().restrictions;if(n&&Object.keys(t).length<n)throw new hi(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:n}))}getMissingRequiredMetaFields(t){const n=new hi(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:t.name??this.getI18n()("unnamed")})),{requiredMetaFields:s}=this.getOpts().restrictions,a=[];for(const i of s)(!Object.hasOwn(t.meta,i)||t.meta[i]==="")&&a.push(i);return{missingFields:a,error:n}}}function hUe(e){if(e==null&&typeof navigator<"u"&&(e=navigator.userAgent),!e)return!0;const t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;const s=t[1].split(".",2),a=parseInt(s[0],10),i=parseInt(s[1],10);return a<15||a===15&&i<15063||a>18||a===18&&i>=18218}const c0={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var ni,si,cv,zd,of,cf,Vd,ht,jd,cP,$G,dP,IG,uP,hP,fP,mP,cw,pP,qd,FG,LG,mc,dv,Hp,UG,H0,Kp;const dw=class dw{constructor(t){be(this,ht);be(this,ni,Object.create(null));be(this,si);be(this,cv);be(this,zd,I8e());be(this,of,new Set);be(this,cf,new Set);be(this,Vd,new Set);ye(this,"defaultLocale");ye(this,"locale");ye(this,"opts");ye(this,"store");ye(this,"i18n");ye(this,"i18nArray");ye(this,"scheduledAutoProceed",null);ye(this,"wasOffline",!1);be(this,cw,(t,n)=>{const s=t?this.getFile(t.id):void 0;if(t==null||!s){this.log(`Not setting progress for a file that has been removed: ${t==null?void 0:t.id}`);return}if(s.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${t.id}`);return}const a={bytesTotal:n.bytesTotal,percentage:n.bytesTotal!=null&&Number.isFinite(n.bytesTotal)&&n.bytesTotal>0?Math.round(n.bytesUploaded/n.bytesTotal*100):void 0};s.progress.uploadStarted!=null?this.setFileState(t.id,{progress:{...s.progress,...a,bytesUploaded:n.bytesUploaded}}):this.setFileState(t.id,{progress:{...s.progress,...a}}),B(this,qd).call(this)});be(this,qd,QT(()=>Ce(this,ht,pP).call(this),500,{leading:!0,trailing:!0}));be(this,mc,this.updateOnlineStatus.bind(this));be(this,dv,new Map);this.defaultLocale=nUe;const n={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:dUe,meta:{},onBeforeFileAdded:(a,i)=>!Object.hasOwn(i,a.id),onBeforeUpload:a=>a,store:new EG,logger:W6e,infoTimeout:5e3},s={...n,...t};this.opts={...s,restrictions:{...n.restrictions,...t==null?void 0:t.restrictions}},t!=null&&t.logger&&t.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):t!=null&&t.debug&&(this.opts.logger=H6e),this.log(`Using Core v${dw.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...c0,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:hUe(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),je(this,si,new uUe(()=>this.opts,()=>this.i18n)),je(this,cv,this.store.subscribe((a,i,l)=>{this.emit("state-update",a,i,l),this.updateAll(i)})),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),Ce(this,ht,LG).call(this)}emit(t,...n){B(this,zd).emit(t,...n)}on(t,n){return B(this,zd).on(t,n),this}once(t,n){return B(this,zd).once(t,n),this}off(t,n){return B(this,zd).off(t,n),this}updateAll(t){this.iteratePlugins(n=>{n.update(t)})}setState(t){this.store.setState(t)}getState(){return this.store.getState()}patchFilesState(t){const n=this.getState().files;this.setState({files:{...n,...Object.fromEntries(Object.entries(t).map(([s,a])=>[s,{...n[s],...a}]))}})}setFileState(t,n){if(!this.getState().files[t])throw new Error(`Can’t set state for ${t} (the file could have been removed)`);this.patchFilesState({[t]:n})}i18nInit(){const t=s=>this.log(`Missing i18n string: ${s}`,"error"),n=new cG([this.defaultLocale,this.opts.locale],{onMissingKey:t});this.i18n=n.translate.bind(n),this.i18nArray=n.translateArray.bind(n),this.locale=n.locale}setOptions(t){this.opts={...this.opts,...t,restrictions:{...this.opts.restrictions,...t==null?void 0:t.restrictions}},t.meta&&this.setMeta(t.meta),this.i18nInit(),t.locale&&this.iteratePlugins(n=>{n.setOptions(t)}),this.setState(void 0)}resetProgress(){const t={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},n={...this.getState().files},s=Object.create(null);Object.keys(n).forEach(a=>{s[a]={...n[a],progress:{...n[a].progress,...t},tus:void 0,transloadit:void 0}}),this.setState({files:s,...c0})}clear(){const{capabilities:t,currentUploads:n}=this.getState();if(Object.keys(n).length>0&&!t.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...c0,files:{}})}addPreProcessor(t){B(this,of).add(t)}removePreProcessor(t){return B(this,of).delete(t)}addPostProcessor(t){B(this,Vd).add(t)}removePostProcessor(t){return B(this,Vd).delete(t)}addUploader(t){B(this,cf).add(t)}removeUploader(t){return B(this,cf).delete(t)}setMeta(t){const n={...this.getState().meta,...t},s={...this.getState().files};Object.keys(s).forEach(a=>{s[a]={...s[a],meta:{...s[a].meta,...t}}}),this.log("Adding metadata:"),this.log(t),this.setState({meta:n,files:s})}setFileMeta(t,n){const s={...this.getState().files};if(!s[t]){this.log(`Was trying to set metadata for a file that has been removed: ${t}`);return}const a={...s[t].meta,...n};s[t]={...s[t],meta:a},this.setState({files:s})}getFile(t){return this.getState().files[t]}getFiles(){const{files:t}=this.getState();return Object.values(t)}getFilesByIds(t){return t.map(n=>this.getFile(n))}getObjectOfFilesPerState(){const{files:t,totalProgress:n,error:s}=this.getState(),a=Object.values(t),i=[],l=[],o=[],c=[],d=[],u=[],h=[],f=[],m=[];for(const v of a){const{progress:x}=v;!x.uploadComplete&&x.uploadStarted&&(i.push(v),v.isPaused||f.push(v)),x.uploadStarted||l.push(v),(x.uploadStarted||x.preprocess||x.postprocess)&&o.push(v),x.uploadStarted&&c.push(v),v.isPaused&&d.push(v),x.uploadComplete&&u.push(v),v.error&&h.push(v),(x.preprocess||x.postprocess)&&m.push(v)}return{newFiles:l,startedFiles:o,uploadStartedFiles:c,pausedFiles:d,completeFiles:u,erroredFiles:h,inProgressFiles:i,inProgressNotPausedFiles:f,processingFiles:m,isUploadStarted:c.length>0,isAllComplete:n===100&&u.length===a.length&&m.length===0,isAllErrored:!!s&&h.length===a.length,isAllPaused:i.length!==0&&d.length===i.length,isUploadInProgress:i.length>0,isSomeGhost:a.some(v=>v.isGhost)}}validateRestrictions(t,n=this.getFiles()){try{B(this,si).validate(n,[t])}catch(s){return s}return null}validateSingleFile(t){try{B(this,si).validateSingleFile(t)}catch(n){return n.message}return null}validateAggregateRestrictions(t){const n=this.getFiles();try{B(this,si).validateAggregateRestrictions(n,t)}catch(s){return s.message}return null}checkIfFileAlreadyExists(t){const{files:n}=this.getState();return!!(n[t]&&!n[t].isGhost)}addFile(t){Ce(this,ht,dP).call(this,t);const{nextFilesState:n,validFilesToAdd:s,errors:a}=Ce(this,ht,hP).call(this,[t]),i=a.filter(o=>o.isRestriction);if(Ce(this,ht,jd).call(this,i),a.length>0)throw a[0];this.setState({files:n});const[l]=s;return this.emit("file-added",l),this.emit("files-added",s),this.log(`Added file: ${l.name}, ${l.id}, mime type: ${l.type}`),Ce(this,ht,uP).call(this),l.id}addFiles(t){Ce(this,ht,dP).call(this);const{nextFilesState:n,validFilesToAdd:s,errors:a}=Ce(this,ht,hP).call(this,t),i=a.filter(o=>o.isRestriction);Ce(this,ht,jd).call(this,i);const l=a.filter(o=>!o.isRestriction);if(l.length>0){let o=`Multiple errors occurred while adding files:
`;if(l.forEach(c=>{o+=`
 * ${c.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:l.length}),details:o},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(l,o);{const c=new Error(o);throw c.errors=l,c}}this.setState({files:n}),s.forEach(o=>{this.emit("file-added",o)}),this.emit("files-added",s),s.length>5?this.log(`Added batch of ${s.length} files`):Object.values(s).forEach(o=>{this.log(`Added file: ${o.name}
 id: ${o.id}
 type: ${o.type}`)}),s.length>0&&Ce(this,ht,uP).call(this)}removeFiles(t){const{files:n,currentUploads:s}=this.getState(),a={...n},i={...s},l=Object.create(null);t.forEach(u=>{n[u]&&(l[u]=n[u],delete a[u])});function o(u){return l[u]===void 0}Object.keys(i).forEach(u=>{const h=s[u].fileIDs.filter(o);if(h.length===0){delete i[u];return}const{capabilities:f}=this.getState();if(h.length!==s[u].fileIDs.length&&!f.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");i[u]={...s[u],fileIDs:h}});const c={currentUploads:i,files:a};Object.keys(a).length===0&&(c.allowNewUpload=!0,c.error=null,c.recoveredState=null),this.setState(c),B(this,qd).call(this);const d=Object.keys(l);d.forEach(u=>{this.emit("file-removed",l[u])}),d.length>5?this.log(`Removed ${d.length} files`):this.log(`Removed files: ${d.join(", ")}`)}removeFile(t){this.removeFiles([t])}pauseResume(t){if(!this.getState().capabilities.resumableUploads||this.getFile(t).progress.uploadComplete)return;const n=this.getFile(t),a=!(n.isPaused||!1);return this.setFileState(t,{isPaused:a}),this.emit("upload-pause",n,a),a}pauseAll(){const t={...this.getState().files};Object.keys(t).filter(s=>!t[s].progress.uploadComplete&&t[s].progress.uploadStarted).forEach(s=>{const a={...t[s],isPaused:!0};t[s]=a}),this.setState({files:t}),this.emit("pause-all")}resumeAll(){const t={...this.getState().files};Object.keys(t).filter(s=>!t[s].progress.uploadComplete&&t[s].progress.uploadStarted).forEach(s=>{const a={...t[s],isPaused:!1,error:null};t[s]=a}),this.setState({files:t}),this.emit("resume-all")}async retryAll(){const t=await Ce(this,ht,mP).call(this);return this.emit("complete",t),t}cancelAll(){this.emit("cancel-all");const{files:t}=this.getState(),n=Object.keys(t);n.length&&this.removeFiles(n),this.setState(c0)}retryUpload(t){this.setFileState(t,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(t));const n=Ce(this,ht,Hp).call(this,[t],{forceAllowNewUpload:!0});return Ce(this,ht,Kp).call(this,n)}logout(){this.iteratePlugins(t=>{var n,s;(s=(n=t.provider)==null?void 0:n.logout)==null||s.call(n)})}[Symbol.for("uppy test: updateTotalProgress")](){return Ce(this,ht,pP).call(this)}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(t,...n){if(typeof t!="function"){const l=`Expected a plugin class, but got ${t===null?"null":typeof t}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(l)}const s=new t(this,...n),a=s.id;if(!a)throw new Error("Your plugin must have an id");if(!s.type)throw new Error("Your plugin must have a type");const i=this.getPlugin(a);if(i){const l=`Already found a plugin named '${i.id}'. Tried to use: '${a}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(l)}return t.VERSION&&this.log(`Using ${a} v${t.VERSION}`),s.type in B(this,ni)?B(this,ni)[s.type].push(s):B(this,ni)[s.type]=[s],s.install(),this.emit("plugin-added",s),this}getPlugin(t){for(const n of Object.values(B(this,ni))){const s=n.find(a=>a.id===t);if(s!=null)return s}}[Symbol.for("uppy test: getPlugins")](t){return B(this,ni)[t]}iteratePlugins(t){Object.values(B(this,ni)).flat(1).forEach(t)}removePlugin(t){this.log(`Removing plugin ${t.id}`),this.emit("plugin-remove",t),t.uninstall&&t.uninstall();const n=B(this,ni)[t.type],s=n.findIndex(l=>l.id===t.id);s!==-1&&n.splice(s,1);const i={plugins:{...this.getState().plugins,[t.id]:void 0}};this.setState(i)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),B(this,cv).call(this),this.iteratePlugins(t=>{this.removePlugin(t)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",B(this,mc)),window.removeEventListener("offline",B(this,mc)))}hideInfo(){const{info:t}=this.getState();this.setState({info:t.slice(1)}),this.emit("info-hidden")}info(t,n="info",s=3e3){const a=typeof t=="object";this.setState({info:[...this.getState().info,{type:n,message:a?t.message:t,details:a?t.details:null}]}),setTimeout(()=>this.hideInfo(),s),this.emit("info-visible")}log(t,n){const{logger:s}=this.opts;switch(n){case"error":s.error(t);break;case"warning":s.warn(t);break;default:s.debug(t);break}}registerRequestClient(t,n){B(this,dv).set(t,n)}getRequestClientForFile(t){if(!t.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${t.id}`);const n=B(this,dv).get(t.remote.requestClientId);if(n==null)throw new Error(`requestClientId "${t.remote.requestClientId}" not registered for file "${t.id}"`);return n}restore(t){return this.log(`Core: attempting to restore upload "${t}"`),this.getState().currentUploads[t]?Ce(this,ht,Kp).call(this,t):(Ce(this,ht,H0).call(this,t),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](...t){return Ce(this,ht,Hp).call(this,...t)}addResultData(t,n){if(!Ce(this,ht,UG).call(this,t)){this.log(`Not setting result for an upload that has been removed: ${t}`);return}const{currentUploads:s}=this.getState(),a={...s[t],result:{...s[t].result,...n}};this.setState({currentUploads:{...s,[t]:a}})}async upload(){var a;(a=B(this,ni).uploader)!=null&&a.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();if(Ce(this,ht,fP).call(this).length>0){const i=await Ce(this,ht,mP).call(this);if(!(this.getFiles().filter(o=>o.progress.uploadStarted==null).length>0))return this.emit("complete",i),i;({files:t}=this.getState())}const s=this.opts.onBeforeUpload(t);return s===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(s&&typeof s=="object"&&(t=s,this.setState({files:t})),Promise.resolve().then(()=>B(this,si).validateMinNumberOfFiles(t)).catch(i=>{throw Ce(this,ht,jd).call(this,[i]),i}).then(()=>{if(!Ce(this,ht,$G).call(this,t))throw new hi(this.i18n("missingRequiredMetaField"))}).catch(i=>{throw i}).then(async()=>{const{currentUploads:i}=this.getState(),l=Object.values(i).flatMap(u=>u.fileIDs),o=[];Object.keys(t).forEach(u=>{const h=this.getFile(u);!h.progress.uploadStarted&&l.indexOf(u)===-1&&o.push(h.id)});const c=Ce(this,ht,Hp).call(this,o),d=await Ce(this,ht,Kp).call(this,c);return this.emit("complete",d),d}).catch(i=>{throw this.emit("error",i),this.log(i,"error"),i}))}};ni=new WeakMap,si=new WeakMap,cv=new WeakMap,zd=new WeakMap,of=new WeakMap,cf=new WeakMap,Vd=new WeakMap,ht=new WeakSet,jd=function(t){for(const l of t)l.isRestriction?this.emit("restriction-failed",l.file,l):this.emit("error",l,l.file),this.log(l,"warning");const n=t.filter(l=>l.isUserFacing),s=4,a=n.slice(0,s),i=n.slice(s);a.forEach(({message:l,details:o=""})=>{this.info({message:l,details:o},"error",this.opts.infoTimeout)}),i.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:i.length})})},cP=function(t){const{missingFields:n,error:s}=B(this,si).getMissingRequiredMetaFields(t);return n.length>0?(this.setFileState(t.id,{missingRequiredMetaFields:n}),this.log(s.message),this.emit("restriction-failed",t,s),!1):(n.length===0&&t.missingRequiredMetaFields&&this.setFileState(t.id,{missingRequiredMetaFields:[]}),!0)},$G=function(t){let n=!0;for(const s of Object.values(t))Ce(this,ht,cP).call(this,s)||(n=!1);return n},dP=function(t){const{allowNewUpload:n}=this.getState();if(n===!1){const s=new hi(this.i18n("noMoreFilesAllowed"),{file:t});throw Ce(this,ht,jd).call(this,[s]),s}},IG=function(t){const n=t instanceof File?{name:t.name,type:t.type,size:t.size,data:t}:t,s=DG(n),a=rUe(s,n),i=RG(a).extension,l=M8e(n,this.getID()),o=n.meta||{};o.name=a,o.type=s;const c=Number.isFinite(n.data.size)?n.data.size:null;return{source:n.source||"",id:l,name:a,extension:i||"",meta:{...this.getState().meta,...o},type:s,data:n.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:c,uploadComplete:!1,uploadStarted:null},size:c,isGhost:!1,isRemote:n.isRemote||!1,remote:n.remote,preview:n.preview}},uP=function(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(t=>{t.isRestriction||this.log(t.stack||t.message||t)})},4))},hP=function(t){var l;let{files:n}=this.getState(),s={...n};const a=[],i=[];for(const o of t)try{let c=Ce(this,ht,IG).call(this,o);const d=(l=n[c.id])==null?void 0:l.isGhost;d&&(c={...n[c.id],isGhost:!1,data:o.data},this.log(`Replaced the blob in the restored ghost file: ${c.name}, ${c.id}`));const u=this.opts.onBeforeFileAdded(c,s);if(n=this.getState().files,s={...n,...s},!u&&this.checkIfFileAlreadyExists(c.id))throw new hi(this.i18n("noDuplicates",{fileName:c.name??this.i18n("unnamed")}),{file:o});if(u===!1&&!d)throw new hi("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:o});typeof u=="object"&&u!==null&&(c=u),B(this,si).validateSingleFile(c),s[c.id]=c,a.push(c)}catch(c){i.push(c)}try{B(this,si).validateAggregateRestrictions(Object.values(n),a)}catch(o){return i.push(o),{nextFilesState:n,validFilesToAdd:[],errors:i}}return{nextFilesState:s,validFilesToAdd:a,errors:i}},fP=function(){const{files:t}=this.getState();return Object.keys(t).filter(n=>t[n].error)},mP=async function(){const t=Ce(this,ht,fP).call(this),n={...this.getState().files};if(t.forEach(a=>{n[a]={...n[a],isPaused:!1,error:null}}),this.setState({files:n,error:null}),this.emit("retry-all",this.getFilesByIds(t)),t.length===0)return{successful:[],failed:[]};const s=Ce(this,ht,Hp).call(this,t,{forceAllowNewUpload:!0});return Ce(this,ht,Kp).call(this,s)},cw=new WeakMap,pP=function(){const t=Ce(this,ht,FG).call(this);let n=null;t!=null&&(n=Math.round(t*100),n>100?n=100:n<0&&(n=0)),this.emit("progress",n??0),this.setState({totalProgress:n??0})},qd=new WeakMap,FG=function(){const n=this.getFiles().filter(c=>c.progress.uploadStarted||c.progress.preprocess||c.progress.postprocess);if(n.length===0)return 0;if(n.every(c=>c.progress.uploadComplete))return 1;const s=c=>c.progress.bytesTotal!=null&&c.progress.bytesTotal!==0,a=n.filter(s),i=n.filter(c=>!s(c));if(a.every(c=>c.progress.uploadComplete)&&i.length>0&&!i.every(c=>c.progress.uploadComplete))return null;const l=a.reduce((c,d)=>c+(d.progress.bytesTotal??0),0),o=a.reduce((c,d)=>c+(d.progress.bytesUploaded||0),0);return l===0?0:o/l},LG=function(){const t=(a,i,l)=>{let o=a.message||"Unknown error";a.details&&(o+=` ${a.details}`),this.setState({error:o}),i!=null&&i.id in this.getState().files&&this.setFileState(i.id,{error:o,response:l})};this.on("error",t),this.on("upload-error",(a,i,l)=>{if(t(i,a,l),typeof i=="object"&&i.message){this.log(i.message,"error");const o=new Error(this.i18n("failedToUpload",{file:(a==null?void 0:a.name)??""}));o.isUserFacing=!0,o.details=i.message,i.details&&(o.details+=` ${i.details}`),Ce(this,ht,jd).call(this,[o])}else Ce(this,ht,jd).call(this,[i])});let n=null;this.on("upload-stalled",(a,i)=>{const{message:l}=a,o=i.map(c=>c.meta.name).join(", ");n||(this.info({message:l,details:o},"warning",this.opts.infoTimeout),n=setTimeout(()=>{n=null},this.opts.infoTimeout)),this.log(`${l} ${o}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const s=a=>{const i=a.filter(o=>{const c=o!=null&&this.getFile(o.id);return c||this.log(`Not setting progress for a file that has been removed: ${o==null?void 0:o.id}`),c}),l=Object.fromEntries(i.map(o=>[o.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:o.size}}]));this.patchFilesState(l)};this.on("upload-start",s),this.on("upload-progress",B(this,cw)),this.on("upload-success",(a,i)=>{if(a==null||!this.getFile(a.id)){this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`);return}const l=this.getFile(a.id).progress;this.setFileState(a.id,{progress:{...l,postprocess:B(this,Vd).size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:l.bytesTotal},response:i,uploadURL:i.uploadURL,isPaused:!1}),a.size==null&&this.setFileState(a.id,{size:i.bytesUploaded||l.bytesTotal}),B(this,qd).call(this)}),this.on("preprocess-progress",(a,i)=>{if(a==null||!this.getFile(a.id)){this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`);return}this.setFileState(a.id,{progress:{...this.getFile(a.id).progress,preprocess:i}})}),this.on("preprocess-complete",a=>{if(a==null||!this.getFile(a.id)){this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`);return}const i={...this.getState().files};i[a.id]={...i[a.id],progress:{...i[a.id].progress}},delete i[a.id].progress.preprocess,this.setState({files:i})}),this.on("postprocess-progress",(a,i)=>{if(a==null||!this.getFile(a.id)){this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`);return}this.setFileState(a.id,{progress:{...this.getState().files[a.id].progress,postprocess:i}})}),this.on("postprocess-complete",a=>{if(a==null||!this.getFile(a.id)){this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`);return}const i={...this.getState().files};i[a.id]={...i[a.id],progress:{...i[a.id].progress}},delete i[a.id].progress.postprocess,this.setState({files:i})}),this.on("restored",()=>{B(this,qd).call(this)}),this.on("dashboard:file-edit-complete",a=>{a&&Ce(this,ht,cP).call(this,a)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",B(this,mc)),window.addEventListener("offline",B(this,mc)),setTimeout(B(this,mc),3e3))},mc=new WeakMap,dv=new WeakMap,Hp=function(t,n={}){const{forceAllowNewUpload:s=!1}=n,{allowNewUpload:a,currentUploads:i}=this.getState();if(!a&&!s)throw new Error("Cannot create a new upload: already uploading.");const l=kE();return this.emit("upload",l,this.getFilesByIds(t)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...i,[l]:{fileIDs:t,step:0,result:{}}}}),l},UG=function(t){const{currentUploads:n}=this.getState();return n[t]},H0=function(t){const n={...this.getState().currentUploads};delete n[t],this.setState({currentUploads:n})},Kp=async function(t){const n=()=>{const{currentUploads:l}=this.getState();return l[t]};let s=n();const a=[...B(this,of),...B(this,cf),...B(this,Vd)];try{for(let l=s.step||0;l<a.length&&s;l++){const o=a[l];this.setState({currentUploads:{...this.getState().currentUploads,[t]:{...s,step:l}}});const{fileIDs:c}=s;await o(c,t),s=n()}}catch(l){throw Ce(this,ht,H0).call(this,t),l}if(s){s.fileIDs.forEach(d=>{const u=this.getFile(d);u!=null&&u.progress.postprocess&&this.emit("postprocess-complete",u)});const l=s.fileIDs.map(d=>this.getFile(d)),o=l.filter(d=>!d.error),c=l.filter(d=>d.error);this.addResultData(t,{successful:o,failed:c,uploadID:t}),s=n()}let i;return s&&(i=s.result,Ce(this,ht,H0).call(this,t)),i==null&&(this.log(`Not setting result for an upload that has been removed: ${t}`),i={successful:[],failed:[],uploadID:t}),i},ye(dw,"VERSION",tUe.version);let oP=dw;var fUe=0;function te(e,t,n,s,a,i){t||(t={});var l,o,c=t;if("ref"in c)for(o in c={},t)o=="ref"?l=t[o]:c[o]=t[o];var d={type:e,props:c,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--fUe,__i:-1,__u:0,__source:a,__self:i};if(typeof e=="function"&&(l=e.defaultProps))for(o in l)c[o]===void 0&&(c[o]=l[o]);return qt.vnode&&qt.vnode(d),d}const mUe="@uppy/informer",pUe="A notification and error pop-up bar for Uppy.",xUe="4.3.2",gUe="MIT",vUe="lib/index.js",yUe="dist/style.min.css",bUe="module",jUe={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build"},wUe=["file uploader","uppy","uppy-plugin","notification","bar","ui"],NUe="https://uppy.io",kUe={url:"https://github.com/transloadit/uppy/issues"},SUe={type:"git",url:"git+https://github.com/transloadit/uppy.git"},CUe=["src","lib","dist","CHANGELOG.md"],_Ue={"@uppy/utils":"^6.2.2",preact:"^10.5.13"},PUe={"@uppy/core":"^4.5.2"},AUe={cssnano:"^7.0.7",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3"},TUe={name:mUe,description:pUe,version:xUe,license:gUe,main:vUe,style:yUe,type:bUe,scripts:jUe,keywords:wUe,homepage:NUe,bugs:kUe,repository:SUe,files:CUe,dependencies:_Ue,peerDependencies:PUe,devDependencies:AUe},H3=300;class EUe extends Hs{constructor(){super(...arguments);ye(this,"ref",Y6e())}componentWillEnter(n){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(n,H3)}componentWillLeave(n){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(n,H3)}render(){const{children:n}=this.props;return te("div",{className:"uppy-Informer-animated",ref:this.ref,children:n})}}function OUe(e,t){return Object.assign(e,t)}function RUe(e,t){return(e==null?void 0:e.key)??t}function DUe(e,t){const n=e._ptgLinkedRefs||(e._ptgLinkedRefs={});return n[t]||(n[t]=s=>{e.refs[t]=s})}function Op(e){const t={};for(let n=0;n<e.length;n++)if(e[n]!=null){const s=RUe(e[n],n.toString(36));t[s]=e[n]}return t}function MUe(e,t){e=e||{},t=t||{};const n=l=>Object.hasOwn(t,l)?t[l]:e[l],s={};let a=[];for(const l in e)Object.hasOwn(t,l)?a.length&&(s[l]=a,a=[]):a.push(l);const i={};for(const l in t){if(Object.hasOwn(s,l))for(let o=0;o<s[l].length;o++){const c=s[l][o];i[s[l][o]]=n(c)}i[l]=n(l)}for(let l=0;l<a.length;l++)i[a[l]]=n(a[l]);return i}const $Ue=e=>e;class BG extends Hs{constructor(t,n){super(t,n),this.refs={},this.state={children:Op(xi(xi(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const t=this.state.children;for(const n in t)t[n]&&this.performAppear(n)}componentWillReceiveProps(t){const n=Op(xi(t.children)||[]),s=this.state.children;this.setState(i=>({children:MUe(i.children,n)}));let a;for(a in n)if(Object.hasOwn(n,a)){const i=s&&Object.hasOwn(s,a);n[a]&&i&&this.currentlyTransitioningKeys[a]?(this.keysToEnter.push(a),this.keysToAbortLeave.push(a)):n[a]&&!i&&!this.currentlyTransitioningKeys[a]&&this.keysToEnter.push(a)}for(a in s)if(Object.hasOwn(s,a)){const i=n&&Object.hasOwn(n,a);s[a]&&!i&&!this.currentlyTransitioningKeys[a]&&this.keysToLeave.push(a)}}componentDidUpdate(){const{keysToEnter:t}=this;this.keysToEnter=[],t.forEach(this.performEnter);const{keysToLeave:n}=this;this.keysToLeave=[],n.forEach(this.performLeave)}_finishAbort(t){const n=this.keysToAbortLeave.indexOf(t);n!==-1&&this.keysToAbortLeave.splice(n,1)}performAppear(t){this.currentlyTransitioningKeys[t]=!0;const n=this.refs[t];n!=null&&n.componentWillAppear?n.componentWillAppear(this._handleDoneAppearing.bind(this,t)):this._handleDoneAppearing(t)}_handleDoneAppearing(t){const n=this.refs[t];n!=null&&n.componentDidAppear&&n.componentDidAppear(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);const s=Op(xi(this.props.children)||[]);(!s||!Object.hasOwn(s,t))&&this.performLeave(t)}performEnter(t){this.currentlyTransitioningKeys[t]=!0;const n=this.refs[t];n!=null&&n.componentWillEnter?n.componentWillEnter(this._handleDoneEntering.bind(this,t)):this._handleDoneEntering(t)}_handleDoneEntering(t){const n=this.refs[t];n!=null&&n.componentDidEnter&&n.componentDidEnter(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);const s=Op(xi(this.props.children)||[]);(!s||!Object.hasOwn(s,t))&&this.performLeave(t)}performLeave(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;this.currentlyTransitioningKeys[t]=!0;const s=this.refs[t];s!=null&&s.componentWillLeave?s.componentWillLeave(this._handleDoneLeaving.bind(this,t)):this._handleDoneLeaving(t)}_handleDoneLeaving(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;const s=this.refs[t];s!=null&&s.componentDidLeave&&s.componentDidLeave(),delete this.currentlyTransitioningKeys[t];const a=Op(xi(this.props.children)||[]);if(a&&Object.hasOwn(a,t))this.performEnter(t);else{const i=OUe({},this.state.children);delete i[t],this.setState({children:i})}}render({childFactory:t,transitionLeave:n,transitionName:s,transitionAppear:a,transitionEnter:i,transitionLeaveTimeout:l,transitionEnterTimeout:o,transitionAppearTimeout:c,component:d,...u},{children:h}){const f=Object.entries(h).map(([m,v])=>{if(!v)return;const x=DUe(this,m);return kG(t(v),{ref:x,key:m})}).filter(Boolean);return Qg(d,u,f)}}BG.defaultProps={component:"span",childFactory:$Ue};class zG extends Nm{constructor(n,s){super(n,s);ye(this,"render",n=>te("div",{className:"uppy uppy-Informer",children:te(BG,{children:n.info.map(s=>te(EUe,{children:te("p",{role:"alert",children:[s.message," ",s.details&&te("span",{"aria-label":s.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${s.message} 

 ${s.details}`),children:"?"})]})},s.message))})}));this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){const{target:n}=this.opts;n&&this.mount(n,this)}}ye(zG,"VERSION",TUe.version);var VG={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",l=0;l<arguments.length;l++){var o=arguments[l];o&&(i=a(i,s(o)))}return i}function s(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var l="";for(var o in i)t.call(i,o)&&i[o]&&(l=a(l,o));return l}function a(i,l){return l?i?i+" "+l:i+l:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(VG);var IUe=VG.exports;const Vi=Qt(IUe),FUe={position:"relative",width:"100%",minHeight:"100%"},LUe={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class UUe extends Hs{constructor(n){super(n);ye(this,"handleScroll",()=>{this.setState({offset:this.base.scrollTop})});ye(this,"handleResize",()=>{this.resize()});this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){var n;(n=this.focusElement)!=null&&n.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:n}=this.state;n!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render({data:n,rowHeight:s,renderRow:a,overscanCount:i=10,...l}){const{offset:o,height:c}=this.state;let d=Math.floor(o/s),u=Math.floor(c/s);i&&(d=Math.max(0,d-d%i),u+=i);const h=d+u+4,f=n.slice(d,h),m={...FUe,height:n.length*s},v={...LUe,top:d*s};return te("div",{onScroll:this.handleScroll,...l,children:te("div",{role:"presentation",style:m,children:te("div",{role:"presentation",style:v,children:f.map(a)})})})}}function BUe(){return te("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:te("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function K3(e,t,n,s){return e===t?e:s===0?t:e+(t-e)*2**(-s/n)}const zUe="@uppy/status-bar",VUe="A progress bar for Uppy, with many bells and whistles.",qUe="4.2.3",WUe="MIT",HUe="lib/index.js",KUe="dist/style.min.css",GUe="module",YUe={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build"},XUe=["file uploader","uppy","uppy-plugin","progress bar","status bar","progress","upload","eta","speed"],ZUe="https://uppy.io",QUe={url:"https://github.com/transloadit/uppy/issues"},JUe={type:"git",url:"git+https://github.com/transloadit/uppy.git"},e9e=["src","lib","dist","CHANGELOG.md"],t9e={"@transloadit/prettier-bytes":"^0.3.4","@uppy/utils":"^6.2.2",classnames:"^2.2.6",preact:"^10.5.13"},r9e={"@uppy/core":"^4.5.2"},n9e={cssnano:"^7.0.7",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3"},s9e={name:zUe,description:VUe,version:qUe,license:WUe,main:HUe,style:KUe,type:GUe,scripts:YUe,keywords:XUe,homepage:ZUe,bugs:QUe,repository:JUe,files:e9e,dependencies:t9e,peerDependencies:r9e,devDependencies:n9e},a9e={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}},Ji={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};function i9e(e){const t=Math.floor(e/3600)%24,n=Math.floor(e/60)%60,s=Math.floor(e%60);return{hours:t,minutes:n,seconds:s}}function l9e(e){const t=i9e(e),n=t.hours===0?"":`${t.hours}h`,s=t.minutes===0?"":`${t.hours===0?t.minutes:` ${t.minutes.toString(10).padStart(2,"0")}`}m`,a=t.hours!==0?"":`${t.minutes===0?t.seconds:` ${t.seconds.toString(10).padStart(2,"0")}`}s`;return`${n}${s}${a}`}const o9e="·",G3=()=>` ${o9e} `;function c9e(e){const{newFiles:t,isUploadStarted:n,recoveredState:s,i18n:a,uploadState:i,isSomeGhost:l,startUpload:o}=e,c=Vi("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":i===Ji.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":l}),d=t&&n&&!s?a("uploadXNewFiles",{smart_count:t}):a("uploadXFiles",{smart_count:t});return te("button",{type:"button",className:c,"aria-label":a("uploadXFiles",{smart_count:t}),onClick:o,disabled:l,"data-uppy-super-focusable":!0,children:d})}function d9e(e){const{i18n:t,uppy:n}=e;return te("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":t("retryUpload"),onClick:()=>n.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:te("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),t("retry")]})}function u9e(e){const{i18n:t,uppy:n}=e;return te("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:t("cancel"),"aria-label":t("cancel"),onClick:()=>n.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:te("g",{fill:"none",fillRule:"evenodd",children:[te("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),te("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function h9e(e){const{isAllPaused:t,i18n:n,isAllComplete:s,resumableUploads:a,uppy:i}=e,l=n(t?"resume":"pause");function o(){if(!s){if(!a){i.cancelAll();return}if(t){i.resumeAll();return}i.pauseAll()}}return te("button",{title:l,"aria-label":l,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:o,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:te("g",{fill:"none",fillRule:"evenodd",children:[te("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),te("path",{fill:"#FFF",d:t?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function f9e(e){const{i18n:t,doneButtonHandler:n}=e;return te("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:n,"data-uppy-super-focusable":!0,children:t("done")})}function qG(){return te("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:te("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function m9e(e){const{progress:t}=e,{value:n,mode:s,message:a}=t;return te("div",{className:"uppy-StatusBar-content",children:[te(qG,{}),s==="determinate"?`${Math.round(n*100)}% · `:"",a]})}function p9e(e){const{numUploads:t,complete:n,totalUploadedSize:s,totalSize:a,totalETA:i,i18n:l}=e,o=t>1,c=Dd(s);return te("div",{className:"uppy-StatusBar-statusSecondary",children:[o&&l("filesUploadedOfTotal",{complete:n,smart_count:t}),te("span",{className:"uppy-StatusBar-additionalInfo",children:[o&&G3(),a!=null?l("dataUploadedOfTotal",{complete:c,total:Dd(a)}):l("dataUploadedOfUnknown",{complete:c}),G3(),i!=null&&l("xTimeLeft",{time:l9e(i)})]})]})}function WG(e){const{i18n:t,complete:n,numUploads:s}=e;return te("div",{className:"uppy-StatusBar-statusSecondary",children:t("filesUploadedOfTotal",{complete:n,smart_count:s})})}function x9e(e){const{i18n:t,newFiles:n,startUpload:s}=e,a=Vi("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return te("div",{className:"uppy-StatusBar-statusSecondary",children:[te("div",{className:"uppy-StatusBar-statusSecondaryHint",children:t("xMoreFilesAdded",{smart_count:n})}),te("button",{type:"button",className:a,"aria-label":t("uploadXFiles",{smart_count:n}),onClick:s,children:t("upload")})]})}function g9e(e){const{i18n:t,supportsUploadProgress:n,totalProgress:s,showProgressDetails:a,isUploadStarted:i,isAllComplete:l,isAllPaused:o,newFiles:c,numUploads:d,complete:u,totalUploadedSize:h,totalSize:f,totalETA:m,startUpload:v}=e,x=c&&i;if(!i||l)return null;const w=t(o?"paused":"uploading");function j(){return!o&&!x&&a?n?te(p9e,{numUploads:d,complete:u,totalUploadedSize:h,totalSize:f,totalETA:m,i18n:t}):te(WG,{i18n:t,complete:u,numUploads:d}):null}return te("div",{className:"uppy-StatusBar-content",title:w,children:[o?null:te(qG,{}),te("div",{className:"uppy-StatusBar-status",children:[te("div",{className:"uppy-StatusBar-statusPrimary",children:n&&s!==0?`${w}: ${s}%`:w}),j(),x?te(x9e,{i18n:t,newFiles:c,startUpload:v}):null]})]})}function v9e(e){const{i18n:t}=e;return te("div",{className:"uppy-StatusBar-content",role:"status",title:t("complete"),children:te("div",{className:"uppy-StatusBar-status",children:te("div",{className:"uppy-StatusBar-statusPrimary",children:[te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:te("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),t("complete")]})})})}function y9e(e){const{error:t,i18n:n,complete:s,numUploads:a}=e;function i(){const l=`${n("uploadFailed")} 

 ${t}`;alert(l)}return te("div",{className:"uppy-StatusBar-content",title:n("uploadFailed"),children:[te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:te("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),te("div",{className:"uppy-StatusBar-status",children:[te("div",{className:"uppy-StatusBar-statusPrimary",children:[n("uploadFailed"),te("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":n("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:i,type:"button",children:"?"})]}),te(WG,{i18n:n,complete:s,numUploads:a})]})]})}function cS(e){const t=[];let n="indeterminate",s;for(const{progress:i}of Object.values(e)){const{preprocess:l,postprocess:o}=i;s==null&&(l||o)&&({mode:n,message:s}=l||o),(l==null?void 0:l.mode)==="determinate"&&t.push(l.value),(o==null?void 0:o.mode)==="determinate"&&t.push(o.value)}const a=t.reduce((i,l)=>i+l/t.length,0);return{mode:n,message:s,value:a}}const{STATE_ERROR:Y3,STATE_WAITING:b9e,STATE_PREPROCESSING:dS,STATE_UPLOADING:d0,STATE_POSTPROCESSING:uS,STATE_COMPLETE:u0}=Ji;function j9e({newFiles:e,allowNewUpload:t,isUploadInProgress:n,isAllPaused:s,resumableUploads:a,error:i,hideUploadButton:l=void 0,hidePauseResumeButton:o=!1,hideCancelButton:c=!1,hideRetryButton:d=!1,recoveredState:u,uploadState:h,totalProgress:f,files:m,supportsUploadProgress:v,hideAfterFinish:x=!1,isSomeGhost:w,doneButtonHandler:j=void 0,isUploadStarted:g,i18n:b,startUpload:p,uppy:N,isAllComplete:k,showProgressDetails:C=void 0,numUploads:_,complete:P,totalSize:D,totalETA:E,totalUploadedSize:$}){function A(){switch(h){case uS:case dS:{const Me=cS(m);return Me.mode==="determinate"?Me.value*100:f}case Y3:return null;case d0:return v?f:null;default:return f}}function T(){switch(h){case uS:case dS:{const{mode:Me}=cS(m);return Me==="indeterminate"}case d0:return!v;default:return!1}}const O=A(),z=O??100,F=!i&&e&&(!n&&!s||u)&&t&&!l,R=!c&&h!==b9e&&h!==u0,I=a&&!o&&h===d0,Q=i&&!k&&!d,Y=j&&h===u0,K=Vi("uppy-StatusBar-progress",{"is-indeterminate":T()}),oe=Vi("uppy-StatusBar",`is-${h}`,{"has-ghosts":w}),ge=(()=>{switch(h){case dS:case uS:return te(m9e,{progress:cS(m)});case u0:return te(v9e,{i18n:b});case Y3:return te(y9e,{error:i,i18n:b,numUploads:_,complete:P});case d0:return te(g9e,{i18n:b,supportsUploadProgress:v,totalProgress:f,showProgressDetails:C,isUploadStarted:g,isAllComplete:k,isAllPaused:s,newFiles:e,numUploads:_,complete:P,totalUploadedSize:$,totalSize:D,totalETA:E,startUpload:p});default:return null}})();return!(F||Q||I||R||Y)&&!ge||h===u0&&x?null:te("div",{className:oe,children:[te("div",{className:K,style:{width:`${z}%`},role:"progressbar","aria-label":`${z}%`,"aria-valuetext":`${z}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":O}),ge,te("div",{className:"uppy-StatusBar-actions",children:[F?te(c9e,{newFiles:e,isUploadStarted:g,recoveredState:u,i18n:b,isSomeGhost:w,startUpload:p,uploadState:h}):null,Q?te(d9e,{i18n:b,uppy:N}):null,I?te(h9e,{isAllPaused:s,i18n:b,isAllComplete:k,resumableUploads:a,uppy:N}):null,R?te(u9e,{i18n:b,uppy:N}):null,Y?te(f9e,{i18n:b,doneButtonHandler:j}):null]})]})}const w9e=2e3,N9e=2e3;function k9e(e,t,n,s){if(e)return Ji.STATE_ERROR;if(t)return Ji.STATE_COMPLETE;if(n)return Ji.STATE_WAITING;let a=Ji.STATE_WAITING;const i=Object.keys(s);for(let l=0;l<i.length;l++){const{progress:o}=s[i[l]];if(o.uploadStarted&&!o.uploadComplete)return Ji.STATE_UPLOADING;o.preprocess&&(a=Ji.STATE_PREPROCESSING),o.postprocess&&a!==Ji.STATE_PREPROCESSING&&(a=Ji.STATE_POSTPROCESSING)}return a}const S9e={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var NS,pc,xc,Wd,Jl,uw,HG,uv;let C9e=(NS=class extends Nm{constructor(n,s){super(n,{...S9e,...s});be(this,uw);be(this,pc);be(this,xc);be(this,Wd);be(this,Jl);ye(this,"startUpload",()=>this.uppy.upload().catch(()=>{}));be(this,uv,()=>{const{recoveredState:n}=this.uppy.getState();if(je(this,Wd,null),je(this,Jl,null),n){je(this,xc,Object.values(n.files).reduce((s,{progress:a})=>s+a.bytesUploaded,0)),this.uppy.emit("restore-confirmed");return}je(this,pc,performance.now()),je(this,xc,0)});this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=a9e,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(n){const{capabilities:s,files:a,allowNewUpload:i,totalProgress:l,error:o,recoveredState:c}=n,{newFiles:d,startedFiles:u,completeFiles:h,isUploadStarted:f,isAllComplete:m,isAllPaused:v,isUploadInProgress:x,isSomeGhost:w}=this.uppy.getObjectOfFilesPerState(),j=c?Object.values(a):d,g=!!s.resumableUploads,b=s.uploadProgress!==!1;let p=null,N=0;u.every(C=>C.progress.bytesTotal!=null&&C.progress.bytesTotal!==0)?(p=0,u.forEach(C=>{p+=C.progress.bytesTotal||0,N+=C.progress.bytesUploaded||0})):u.forEach(C=>{N+=C.progress.bytesUploaded||0});const k=Ce(this,uw,HG).call(this,{uploaded:N,total:p});return j9e({error:o,uploadState:k9e(o,m,c,n.files||{}),allowNewUpload:i,totalProgress:l,totalSize:p,totalUploadedSize:N,isAllComplete:!1,isAllPaused:v,isUploadStarted:f,isUploadInProgress:x,isSomeGhost:w,recoveredState:c,complete:h.length,newFiles:j.length,numUploads:u.length,totalETA:k,files:a,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:g,supportsUploadProgress:b,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){const n=this.el;hG(n)||(n.dir="ltr")}install(){const{target:n}=this.opts;n&&this.mount(n,this),this.uppy.on("upload",B(this,uv)),je(this,pc,performance.now()),je(this,xc,this.uppy.getFiles().reduce((s,a)=>s+a.progress.bytesUploaded,0))}uninstall(){this.unmount(),this.uppy.off("upload",B(this,uv))}},pc=new WeakMap,xc=new WeakMap,Wd=new WeakMap,Jl=new WeakMap,uw=new WeakSet,HG=function(n){if(n.total==null||n.total===0)return null;const s=n.total-n.uploaded;if(s<=0)return null;B(this,pc)??je(this,pc,performance.now());const a=performance.now()-B(this,pc);if(a===0)return Math.round((B(this,Jl)??0)/100)/10;const i=n.uploaded-B(this,xc);if(je(this,xc,n.uploaded),i<=0)return Math.round((B(this,Jl)??0)/100)/10;const l=i/a,o=B(this,Wd)==null?l:K3(l,B(this,Wd),w9e,a);je(this,Wd,o);const c=s/o,d=Math.max(B(this,Jl)-a,0),u=B(this,Jl)==null?c:K3(c,d,N9e,a);return je(this,Jl,u),je(this,pc,performance.now()),Math.round(u/100)/10},uv=new WeakMap,ye(NS,"VERSION",s9e.version),NS);const _9e=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function P9e(e,t,n){const s=_9e.exec(e),a=t.mimeType??(s==null?void 0:s[1])??"plain/text";let i;if((s==null?void 0:s[2])!=null){const l=atob(decodeURIComponent(s[3])),o=new Uint8Array(l.length);for(let c=0;c<l.length;c++)o[c]=l.charCodeAt(c);i=[o]}else(s==null?void 0:s[3])!=null&&(i=[decodeURIComponent(s[3])]);return new Blob(i,{type:a})}function X3(e){return e.startsWith("blob:")}function Z3(e){return e?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(e):!1}function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var KG=typeof self<"u"?self:global;const tv=typeof navigator<"u",A9e=tv&&typeof HTMLImageElement>"u",Q3=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),GG=KG.Buffer,YG=!!GG,T9e=e=>e!==void 0;function XG(e){return e===void 0||(e instanceof Map?e.size===0:Object.values(e).filter(T9e).length===0)}function Ln(e){let t=new Error(e);throw delete t.stack,t}function J3(e){let t=function(n){let s=0;return n.ifd0.enabled&&(s+=1024),n.exif.enabled&&(s+=2048),n.makerNote&&(s+=2048),n.userComment&&(s+=1024),n.gps.enabled&&(s+=512),n.interop.enabled&&(s+=100),n.ifd1.enabled&&(s+=1024),s+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const hS=e=>String.fromCharCode.apply(null,e),eF=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class bi{static from(t,n){return t instanceof this&&t.le===n?t:new bi(t,void 0,void 0,n)}constructor(t,n=0,s,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){s===void 0&&(s=t.byteLength-n);let i=new DataView(t,n,s);this._swapDataView(i)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof bi){s===void 0&&(s=t.byteLength-n),(n+=t.byteOffset)+s>t.byteOffset+t.byteLength&&Ln("Creating view outside of available memory in ArrayBuffer");let i=new DataView(t.buffer,n,s);this._swapDataView(i)}else if(typeof t=="number"){let i=new DataView(new ArrayBuffer(t));this._swapDataView(i)}else Ln("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,n,s=bi){return t instanceof DataView||t instanceof bi?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||Ln("BufferView.set(): Invalid data argument."),this.toUint8().set(t,n),new s(this,n,t.byteLength)}subarray(t,n){return n=n||this._lengthToEnd(t),new bi(this,t,n)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,n){return new Uint8Array(this.buffer,this.byteOffset+t,n)}getString(t=0,n=this.byteLength){return a=this.getUint8Array(t,n),eF?eF.decode(a):YG?Buffer.from(a).toString("utf8"):decodeURIComponent(escape(hS(a)));var a}getLatin1String(t=0,n=this.byteLength){let s=this.getUint8Array(t,n);return hS(s)}getUnicodeString(t=0,n=this.byteLength){const s=[];for(let a=0;a<n&&t+a<this.byteLength;a+=2)s.push(this.getUint16(t+a));return hS(s)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,n=this.le){return this.dataView.getInt16(t,n)}getInt32(t,n=this.le){return this.dataView.getInt32(t,n)}getUint16(t,n=this.le){return this.dataView.getUint16(t,n)}getUint32(t,n=this.le){return this.dataView.getUint32(t,n)}getFloat32(t,n=this.le){return this.dataView.getFloat32(t,n)}getFloat64(t,n=this.le){return this.dataView.getFloat64(t,n)}getFloat(t,n=this.le){return this.dataView.getFloat32(t,n)}getDouble(t,n=this.le){return this.dataView.getFloat64(t,n)}getUintBytes(t,n,s){switch(n){case 1:return this.getUint8(t,s);case 2:return this.getUint16(t,s);case 4:return this.getUint32(t,s);case 8:return this.getUint64&&this.getUint64(t,s)}}getUint(t,n,s){switch(n){case 8:return this.getUint8(t,s);case 16:return this.getUint16(t,s);case 32:return this.getUint32(t,s);case 64:return this.getUint64&&this.getUint64(t,s)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function xP(e,t){Ln(`${e} '${t}' was not loaded, try using full build of exifr.`)}let SE=class extends Map{constructor(t){super(),this.kind=t}get(t,n){return this.has(t)||xP(this.kind,t),n&&(t in n||function(s,a){Ln(`Unknown ${s} '${a}'.`)}(this.kind,t),n[t].enabled||xP(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}};var ZG=new SE("file parser"),fi=new SE("segment parser"),CE=new SE("file reader");let E9e=KG.fetch;function tF(e,t){return(n=e).startsWith("data:")||n.length>1e4?vP(e,t,"base64"):Q3&&e.includes("://")?gP(e,t,"url",rF):Q3?vP(e,t,"fs"):tv?gP(e,t,"url",rF):void Ln("Invalid input argument");var n}async function gP(e,t,n,s){return CE.has(n)?vP(e,t,n):s?async function(a,i){let l=await i(a);return new bi(l)}(e,s):void Ln(`Parser ${n} is not loaded`)}async function vP(e,t,n){let s=new(CE.get(n))(e,t);return await s.read(),s}const rF=e=>E9e(e).then(t=>t.arrayBuffer()),yP=e=>new Promise((t,n)=>{let s=new FileReader;s.onloadend=()=>t(s.result||new ArrayBuffer),s.onerror=n,s.readAsArrayBuffer(e)}),_E=new Map,O9e=new Map,R9e=new Map,h0=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],QG=["jfif","xmp","icc","iptc","ihdr"],bP=["tiff",...QG],On=["ifd0","ifd1","exif","gps","interop"],f0=[...bP,...On],m0=["makerNote","userComment"],JG=["translateKeys","translateValues","reviveValues","multiSegment"],p0=[...JG,"sanitize","mergeOutput","silentErrors"];class eY{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Rp extends eY{get needed(){return this.enabled||this.deps.size>0}constructor(t,n,s,a){if(super(),gr(this,"enabled",!1),gr(this,"skip",new Set),gr(this,"pick",new Set),gr(this,"deps",new Set),gr(this,"translateKeys",!1),gr(this,"translateValues",!1),gr(this,"reviveValues",!1),this.key=t,this.enabled=n,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=On.includes(t),this.canBeFiltered&&(this.dict=_E.get(t)),s!==void 0)if(Array.isArray(s))this.parse=this.enabled=!0,this.canBeFiltered&&s.length>0&&this.translateTagSet(s,this.pick);else if(typeof s=="object"){if(this.enabled=!0,this.parse=s.parse!==!1,this.canBeFiltered){let{pick:i,skip:l}=s;i&&i.length>0&&this.translateTagSet(i,this.pick),l&&l.length>0&&this.translateTagSet(l,this.skip)}this.applyInheritables(s)}else s===!0||s===!1?this.parse=this.enabled=s:Ln(`Invalid options argument: ${s}`)}applyInheritables(t){let n,s;for(n of JG)s=t[n],s!==void 0&&(this[n]=s)}translateTagSet(t,n){if(this.dict){let s,a,{tagKeys:i,tagValues:l}=this.dict;for(s of t)typeof s=="string"?(a=l.indexOf(s),a===-1&&(a=i.indexOf(Number(s))),a!==-1&&n.add(Number(i[a]))):n.add(s)}else for(let s of t)n.add(s)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,sw(this.pick,this.deps)):this.enabled&&this.pick.size>0&&sw(this.pick,this.deps)}}var ps={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},nF=new Map;class PE extends eY{static useCached(t){let n=nF.get(t);return n!==void 0||(n=new this(t),nF.set(t,n)),n}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):Ln(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=tv?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of h0)this[t]=ps[t];for(t of p0)this[t]=ps[t];for(t of m0)this[t]=ps[t];for(t of f0)this[t]=new Rp(t,ps[t],void 0,this)}setupFromTrue(){let t;for(t of h0)this[t]=ps[t];for(t of p0)this[t]=ps[t];for(t of m0)this[t]=!0;for(t of f0)this[t]=new Rp(t,!0,void 0,this)}setupFromArray(t){let n;for(n of h0)this[n]=ps[n];for(n of p0)this[n]=ps[n];for(n of m0)this[n]=ps[n];for(n of f0)this[n]=new Rp(n,!1,void 0,this);this.setupGlobalFilters(t,void 0,On)}setupFromObject(t){let n;for(n of(On.ifd0=On.ifd0||On.image,On.ifd1=On.ifd1||On.thumbnail,Object.assign(this,t),h0))this[n]=fS(t[n],ps[n]);for(n of p0)this[n]=fS(t[n],ps[n]);for(n of m0)this[n]=fS(t[n],ps[n]);for(n of bP)this[n]=new Rp(n,ps[n],t[n],this);for(n of On)this[n]=new Rp(n,ps[n],t[n],this.tiff);this.setupGlobalFilters(t.pick,t.skip,On,f0),t.tiff===!0?this.batchEnableWithBool(On,!0):t.tiff===!1?this.batchEnableWithUserValue(On,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,On):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,On)}batchEnableWithBool(t,n){for(let s of t)this[s].enabled=n}batchEnableWithUserValue(t,n){for(let s of t){let a=n[s];this[s].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(t,n,s,a=s){if(t&&t.length){for(let l of a)this[l].enabled=!1;let i=sF(t,s);for(let[l,o]of i)sw(this[l].pick,o),this[l].enabled=!0}else if(n&&n.length){let i=sF(n,s);for(let[l,o]of i)sw(this[l].skip,o)}}filterNestedSegmentTags(){let{ifd0:t,exif:n,xmp:s,iptc:a,icc:i}=this;this.makerNote?n.deps.add(37500):n.skip.add(37500),this.userComment?n.deps.add(37510):n.skip.add(37510),s.enabled||t.skip.add(700),a.enabled||t.skip.add(33723),i.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:n,gps:s,interop:a}=this;a.needed&&(n.deps.add(40965),t.deps.add(40965)),n.needed&&t.deps.add(34665),s.needed&&t.deps.add(34853),this.tiff.enabled=On.some(i=>this[i].enabled===!0)||this.makerNote||this.userComment;for(let i of On)this[i].finalizeFilters()}get onlyTiff(){return!QG.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of bP)this[t].enabled&&!fi.has(t)&&xP("segment parser",t)}}function sF(e,t){let n,s,a,i,l=[];for(a of t){for(i of(n=_E.get(a),s=[],n))(e.includes(i[0])||e.includes(i[1]))&&s.push(i[0]);s.length&&l.push([a,s])}return l}function fS(e,t){return e!==void 0?e:t!==void 0?t:void 0}function sw(e,t){for(let n of t)e.add(n)}gr(PE,"default",ps);class D9e{constructor(t){gr(this,"parsers",{}),gr(this,"output",{}),gr(this,"errors",[]),gr(this,"pushToErrors",n=>this.errors.push(n)),this.options=PE.useCached(t)}async read(t){this.file=await function(n,s){return typeof n=="string"?tF(n,s):tv&&!A9e&&n instanceof HTMLImageElement?tF(n.src,s):n instanceof Uint8Array||n instanceof ArrayBuffer||n instanceof DataView?new bi(n):tv&&n instanceof Blob?gP(n,s,"blob",yP):void Ln("Invalid input argument")}(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,n=t.getUint16(0);for(let[s,a]of ZG)if(a.canHandle(t,n))return this.fileParser=new a(this.options,this.file,this.parsers),t[s]=!0;this.file.close&&this.file.close(),Ln("Unknown file format")}async parse(){let{output:t,errors:n}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),n.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&n.length>0&&(t.errors=n),XG(s=t)?void 0:s;var s}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let n=Object.values(this.parsers).map(async s=>{let a=await s.parse();s.assignToOutput(t,a)});this.options.silentErrors&&(n=n.map(s=>s.catch(this.pushToErrors))),await Promise.all(n)}async extractThumbnail(){this.setup();let{options:t,file:n}=this,s=fi.get("tiff",t);var a;if(n.tiff?a={start:0,type:"tiff"}:n.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),l=this.parsers.tiff=new s(i,t,n),o=await l.extractThumbnail();return n.close&&n.close(),o}}class Ph{static findPosition(t,n){let s=t.getUint16(n+2)+2,a=typeof this.headerLength=="function"?this.headerLength(t,n,s):this.headerLength,i=n+a,l=s-a;return{offset:n,length:s,headerLength:a,start:i,size:l,end:i+l}}static parse(t,n={}){return new this(t,new PE({[this.type]:n}),t).parse()}normalizeInput(t){return t instanceof bi?t:new bi(t)}constructor(t,n={},s){gr(this,"errors",[]),gr(this,"raw",new Map),gr(this,"handleError",a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)}),this.chunk=this.normalizeInput(t),this.file=s,this.type=this.constructor.type,this.globalOptions=this.options=n,this.localOptions=n[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,n){let s=R9e.get(n),a=O9e.get(n),i=_E.get(n),l=this.options[n],o=l.reviveValues&&!!s,c=l.translateValues&&!!a,d=l.translateKeys&&!!i,u={};for(let[h,f]of t)o&&s.has(h)?f=s.get(h)(f):c&&a.has(h)&&(f=this.translateValue(f,a.get(h))),d&&i.has(h)&&(h=i.get(h)||h),u[h]=f;return u}translateValue(t,n){return n[t]||n.DEFAULT||t}assignToOutput(t,n){this.assignObjectToOutput(t,this.constructor.type,n)}assignObjectToOutput(t,n,s){if(this.globalOptions.mergeOutput)return Object.assign(t,s);t[n]?Object.assign(t[n],s):t[n]=s}}gr(Ph,"headerLength",4),gr(Ph,"type",void 0),gr(Ph,"multiSegment",!1),gr(Ph,"canHandle",()=>!1);function M9e(e){return e===192||e===194||e===196||e===219||e===221||e===218||e===254}function $9e(e){return e>=224&&e<=239}function I9e(e,t,n){for(let[s,a]of fi)if(a.canHandle(e,t,n))return s}class aF extends class{constructor(t,n,s){gr(this,"errors",[]),gr(this,"ensureSegmentChunk",async a=>{let i=a.start,l=a.size||65536;if(this.file.chunked)if(this.file.available(i,l))a.chunk=this.file.subarray(i,l);else try{a.chunk=await this.file.readChunk(i,l)}catch(o){Ln(`Couldn't read segment: ${JSON.stringify(a)}. ${o.message}`)}else this.file.byteLength>i+l?a.chunk=this.file.subarray(i,l):a.size===void 0?a.chunk=this.file.subarray(i):Ln("Segment unreachable: "+JSON.stringify(a));return a.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=n,this.parsers=s}injectSegment(t,n){this.options[t].enabled&&this.createParser(t,n)}createParser(t,n){let s=new(fi.get(t))(n,this.options,this.file);return this.parsers[t]=s}createParsers(t){for(let n of t){let{type:s,chunk:a}=n,i=this.options[s];if(i&&i.enabled){let l=this.parsers[s];l&&l.append||l||this.createParser(s,a)}}}async readSegments(t){let n=t.map(this.ensureSegmentChunk);await Promise.all(n)}}{constructor(...t){super(...t),gr(this,"appSegments",[]),gr(this,"jpegSegments",[]),gr(this,"unknownSegments",[])}static canHandle(t,n){return n===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(fi.keyList())):(t=t===void 0?fi.keyList().filter(n=>this.options[n].enabled):t.filter(n=>this.options[n].enabled&&fi.has(n)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,n){this.setupSegmentFinderArgs(n);let{file:s,findAll:a,wanted:i,remaining:l}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some(o=>{let c=fi.get(o),d=this.options[o];return c.multiSegment&&d.multiSegment}),a&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,s.byteLength),!this.options.onlyTiff&&s.chunked){let o=!1;for(;l.size>0&&!o&&(s.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:c}=s,d=this.appSegments.some(u=>!this.file.available(u.offset||u.start,u.length||u.size));if(o=t>c&&!d?!await s.readNextChunk(t):!await s.readNextChunk(c),(t=this.findAppSegmentsInRange(t,s.byteLength))===void 0)return}}}findAppSegmentsInRange(t,n){n-=2;let s,a,i,l,o,c,{file:d,findAll:u,wanted:h,remaining:f,options:m}=this;for(;t<n;t++)if(d.getUint8(t)===255){if(s=d.getUint8(t+1),$9e(s)){if(a=d.getUint16(t+2),i=I9e(d,t,a),i&&h.has(i)&&(l=fi.get(i),o=l.findPosition(d,t),c=m[i],o.type=i,this.appSegments.push(o),!u&&(l.multiSegment&&c.multiSegment?(this.unfinishedMultiSegment=o.chunkNumber<o.chunkCount,this.unfinishedMultiSegment||f.delete(i)):f.delete(i),f.size===0)))break;m.recordUnknownSegments&&(o=Ph.findPosition(d,t),o.marker=s,this.unknownSegments.push(o)),t+=a+1}else if(M9e(s)){if(a=d.getUint16(t+2),s===218&&m.stopAfterSos!==!1)return;m.recordJpegSegments&&this.jpegSegments.push({offset:t,length:a,marker:s}),t+=a+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(n=>n.multiSegment))return;let t=function(n,s){let a,i,l,o=new Map;for(let c=0;c<n.length;c++)a=n[c],i=a[s],o.has(i)?l=o.get(i):o.set(i,l=[]),l.push(a);return Array.from(o)}(this.appSegments,"type");this.mergedAppSegments=t.map(([n,s])=>{let a=fi.get(n,this.options);return a.handleMultiSegments?{type:n,chunk:a.handleMultiSegments(s)}:s[0]})}getSegment(t){return this.appSegments.find(n=>n.type===t)}async getOrFindSegment(t){let n=this.getSegment(t);return n===void 0&&(await this.findAppSegments(0,[t]),n=this.getSegment(t)),n}}gr(aF,"type","jpeg"),ZG.set("jpeg",aF);const F9e=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class L9e extends Ph{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,n,s=new Map){let{pick:a,skip:i}=this.options[n];a=new Set(a);let l=a.size>0,o=i.size===0,c=this.chunk.getUint16(t);t+=2;for(let d=0;d<c;d++){let u=this.chunk.getUint16(t);if(l){if(a.has(u)&&(s.set(u,this.parseTag(t,u,n)),a.delete(u),a.size===0))break}else!o&&i.has(u)||s.set(u,this.parseTag(t,u,n));t+=12}return s}parseTag(t,n,s){let{chunk:a}=this,i=a.getUint16(t+2),l=a.getUint32(t+4),o=F9e[i];if(o*l<=4?t+=8:t=a.getUint32(t+8),(i<1||i>13)&&Ln(`Invalid TIFF value type. block: ${s.toUpperCase()}, tag: ${n.toString(16)}, type: ${i}, offset ${t}`),t>a.byteLength&&Ln(`Invalid TIFF value offset. block: ${s.toUpperCase()}, tag: ${n.toString(16)}, type: ${i}, offset ${t} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(t,l);if(i===2)return(c=function(d){for(;d.endsWith("\0");)d=d.slice(0,-1);return d}(c=a.getString(t,l)).trim())===""?void 0:c;var c;if(i===7)return a.getUint8Array(t,l);if(l===1)return this.parseTagValue(i,t);{let d=new(function(h){switch(h){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(i))(l),u=o;for(let h=0;h<l;h++)d[h]=this.parseTagValue(i,t),t+=u;return d}}parseTagValue(t,n){let{chunk:s}=this;switch(t){case 1:return s.getUint8(n);case 3:return s.getUint16(n);case 4:return s.getUint32(n);case 5:return s.getUint32(n)/s.getUint32(n+4);case 6:return s.getInt8(n);case 8:return s.getInt16(n);case 9:return s.getInt32(n);case 10:return s.getInt32(n)/s.getInt32(n+4);case 11:return s.getFloat(n);case 12:return s.getDouble(n);case 13:return s.getUint32(n);default:Ln(`Invalid tiff type ${t}`)}}}class mS extends L9e{static canHandle(t,n){return t.getUint8(n+1)===225&&t.getUint32(n+4)===1165519206&&t.getUint16(n+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let n=this[t]();return n.catch!==void 0&&(n=n.catch(this.handleError)),n}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),n=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(n)}}parseBlock(t,n){let s=new Map;return this[n]=s,this.parseTags(t,n,s),s}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Ln("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&Ln(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,J3(this.options));let n=this.parseBlock(this.ifd0Offset,"ifd0");return n.size!==0?(this.exifOffset=n.get(34665),this.interopOffset=n.get(40965),this.gpsOffset=n.get(34853),this.xmp=n.get(700),this.iptc=n.get(33723),this.icc=n.get(34675),this.options.sanitize&&(n.delete(34665),n.delete(40965),n.delete(34853),n.delete(700),n.delete(33723),n.delete(34675)),n):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,J3(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,n){let s=t.get(n);s&&s.length===1&&t.set(n,s[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",iF(...t.get(2),t.get(1))),t.set("longitude",iF(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),n=this.ifd1.get(514);return this.chunk.getUint8Array(t,n)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,n,s,a={};for(n of On)if(t=this[n],!XG(t))if(s=this.canTranslate?this.translateBlock(t,n):Object.fromEntries(t),this.options.mergeOutput){if(n==="ifd1")continue;Object.assign(a,s)}else a[n]=s;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(t,n){if(this.globalOptions.mergeOutput)Object.assign(t,n);else for(let[s,a]of Object.entries(n))this.assignObjectToOutput(t,s,a)}}function iF(e,t,n,s){var a=e+t/60+n/3600;return s!=="S"&&s!=="W"||(a*=-1),a}gr(mS,"type","tiff"),gr(mS,"headerLength",10),fi.set("tiff",mS);const AE={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},AE,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},AE,{tiff:!1,ifd1:!0,mergeOutput:!1});const U9e=Object.assign({},AE,{firstChunkSize:4e4,ifd0:[274]});async function B9e(e){let t=new D9e(U9e);await t.read(e);let n=await t.parse();if(n&&n.ifd0)return n.ifd0[274]}const z9e=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Gp=!0,Yp=!0;if(typeof navigator=="object"){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,n,s]=t;Gp=Number(n)+.1*Number(s)<13.4,Yp=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);Gp=Yp=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);Gp=Yp=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);Gp=Yp=Number(t)<77}}async function V9e(e){let t=await B9e(e);return Object.assign({canvas:Gp,css:Yp},z9e[t])}class q9e extends bi{constructor(...t){super(...t),gr(this,"ranges",new W9e),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,n,s){if(t===0&&this.byteLength===0&&s){let a=new DataView(s.buffer||s,s.byteOffset,s.byteLength);this._swapDataView(a)}else{let a=t+n;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(t){let n;n=YG?GG.allocUnsafe(t):new Uint8Array(t);let s=new DataView(n.buffer,n.byteOffset,n.byteLength);return n.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:n,dataView:s}}subarray(t,n,s=!1){return n=n||this._lengthToEnd(t),s&&this._tryExtend(t,n),this.ranges.add(t,n),super.subarray(t,n)}set(t,n,s=!1){s&&this._tryExtend(n,t.byteLength,t);let a=super.set(t,n);return this.ranges.add(n,a.byteLength),a}async ensureChunk(t,n){this.chunked&&(this.ranges.available(t,n)||await this.readChunk(t,n))}available(t,n){return this.ranges.available(t,n)}}class W9e{constructor(){gr(this,"list",[])}get length(){return this.list.length}add(t,n,s=0){let a=t+n,i=this.list.filter(l=>lF(t,l.offset,a)||lF(t,l.end,a));if(i.length>0){t=Math.min(t,...i.map(o=>o.offset)),a=Math.max(a,...i.map(o=>o.end)),n=a-t;let l=i.shift();l.offset=t,l.length=n,l.end=a,this.list=this.list.filter(o=>!i.includes(o))}else this.list.push({offset:t,length:n,end:a})}available(t,n){let s=t+n;return this.list.some(a=>a.offset<=t&&s<=a.end)}}function lF(e,t,n){return e<=t&&t<=n}class H9e extends q9e{constructor(t,n){super(0),gr(this,"chunksRead",0),this.input=t,this.options=n}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let n=this.options.chunkSize,s=await this.readChunk(t,n);return!!s&&s.byteLength===n}async readChunk(t,n){if(this.chunksRead++,(n=this.safeWrapAddress(t,n))!==0)return this._readChunk(t,n)}safeWrapAddress(t,n){return this.size!==void 0&&t+n>this.size?Math.max(0,this.size-t):n}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}CE.set("blob",class extends H9e{async readWhole(){this.chunked=!1;let e=await yP(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let n=t?e+t:void 0,s=this.input.slice(e,n),a=await yP(s);return this.set(a,e,!0)}});const K9e="@uppy/thumbnail-generator",G9e="Uppy plugin that generates small previews of images to show on your upload UI.",Y9e="4.2.2",X9e="MIT",Z9e="lib/index.js",Q9e="module",J9e={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},eBe=["file uploader","uppy","uppy-plugin","thumbnail","preview","resize"],tBe="https://uppy.io",rBe={url:"https://github.com/transloadit/uppy/issues"},nBe={type:"git",url:"git+https://github.com/transloadit/uppy.git"},sBe=["src","lib","dist","CHANGELOG.md"],aBe={"@uppy/utils":"^6.2.2",exifr:"^7.0.0"},iBe={jsdom:"^26.1.0","namespace-emitter":"2.0.1",typescript:"^5.8.3",vitest:"^3.2.4"},lBe={"@uppy/core":"^4.5.2"},oBe={name:K9e,description:G9e,version:Y9e,license:X9e,main:Z9e,type:Q9e,scripts:J9e,keywords:eBe,homepage:tBe,bugs:rBe,repository:nBe,files:sBe,dependencies:aBe,devDependencies:iBe,peerDependencies:lBe},cBe={strings:{generatingThumbnails:"Generating thumbnails..."}};function dBe(e,t,n){try{e.getContext("2d").getImageData(0,0,1,1)}catch(s){if(s.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return e.toBlob?new Promise(s=>{e.toBlob(s,t,n)}).then(s=>{if(s===null)throw new Error("cannot read image, probably an svg with external resources");return s}):Promise.resolve().then(()=>P9e(e.toDataURL(t,n),{})).then(s=>{if(s===null)throw new Error("could not extract blob, probably an old browser");return s})}function uBe(e,t){let n=e.width,s=e.height;(t.deg===90||t.deg===270)&&(n=e.height,s=e.width);const a=document.createElement("canvas");a.width=n,a.height=s;const i=a.getContext("2d");return i.translate(n/2,s/2),t.canvas&&(i.rotate(t.rad),i.scale(t.scaleX,t.scaleY)),i.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),a}function hBe(e){const t=e.width/e.height,n=5e6,s=4096;let a=Math.floor(Math.sqrt(n*t)),i=Math.floor(n/Math.sqrt(n*t));if(a>s&&(a=s,i=Math.round(a/t)),i>s&&(i=s,a=Math.round(t*i)),e.width>a){const l=document.createElement("canvas");return l.width=a,l.height=i,l.getContext("2d").drawImage(e,0,0,a,i),l}return e}const fBe={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class tY extends Nm{constructor(n,s){super(n,{...fBe,...s});ye(this,"queue");ye(this,"queueProcessing");ye(this,"defaultThumbnailDimension");ye(this,"thumbnailType");ye(this,"onFileAdded",n=>{!n.preview&&n.data&&Z3(n.type)&&!n.isRemote&&this.addToQueue(n.id)});ye(this,"onCancelRequest",n=>{const s=this.queue.indexOf(n.id);s!==-1&&this.queue.splice(s,1)});ye(this,"onFileRemoved",n=>{const s=this.queue.indexOf(n.id);s!==-1&&this.queue.splice(s,1),n.preview&&X3(n.preview)&&URL.revokeObjectURL(n.preview)});ye(this,"onRestored",()=>{this.uppy.getFiles().filter(s=>s.isRestored).forEach(s=>{(!s.preview||X3(s.preview))&&this.addToQueue(s.id)})});ye(this,"onAllFilesRemoved",()=>{this.queue=[]});ye(this,"waitUntilAllProcessed",n=>{n.forEach(a=>{const i=this.uppy.getFile(a);this.uppy.emit("preprocess-progress",i,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const s=()=>{n.forEach(a=>{const i=this.uppy.getFile(a);this.uppy.emit("preprocess-complete",i)})};return new Promise(a=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{s(),a()}):(s(),a())})});if(this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=cBe,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(n,s,a){const i=URL.createObjectURL(n.data),l=new Promise((c,d)=>{const u=new Image;u.src=i,u.addEventListener("load",()=>{URL.revokeObjectURL(i),c(u)}),u.addEventListener("error",h=>{URL.revokeObjectURL(i),d(h.error||new Error("Could not create thumbnail"))})}),o=V9e(n.data).catch(()=>1);return Promise.all([l,o]).then(([c,d])=>{const u=this.getProportionalDimensions(c,s,a,d.deg),h=uBe(c,d),f=this.resizeImage(h,u.width,u.height);return dBe(f,this.thumbnailType,80)}).then(c=>URL.createObjectURL(c))}getProportionalDimensions(n,s,a,i){let l=n.width/n.height;return(i===90||i===270)&&(l=n.height/n.width),s!=null?{width:s,height:Math.round(s/l)}:a!=null?{width:Math.round(a*l),height:a}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/l)}}resizeImage(n,s,a){let i=hBe(n),l=Math.ceil(Math.log2(i.width/s));l<1&&(l=1);let o=s*2**(l-1),c=a*2**(l-1);const d=2;for(;l--;){const u=document.createElement("canvas");u.width=o,u.height=c,u.getContext("2d").drawImage(i,0,0,o,c),i=u,o=Math.round(o/d),c=Math.round(c/d)}return i}setPreviewURL(n,s){this.uppy.setFileState(n,{preview:s})}addToQueue(n){this.queue.push(n),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const n=this.uppy.getFile(this.queue.shift());return n?this.requestThumbnail(n).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(n){return Z3(n.type)&&!n.isRemote?this.createThumbnail(n,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(s=>{this.setPreviewURL(n.id,s),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${n.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(n.id),s)}).catch(s=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${n.id}:`,"warning"),this.uppy.log(s,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(n.id),s)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}ye(tY,"VERSION",oBe.version);function oF(e){if(typeof e=="string"){const t=document.querySelectorAll(e);return t.length===0?null:Array.from(t)}return typeof e=="object"&&uG(e)?[e]:null}const Nx=Array.from;function mBe(e){const t=Nx(e.files);return Promise.resolve(t)}function rY(e,t,n,{onSuccess:s}){e.readEntries(a=>{const i=[...t,...a];a.length?queueMicrotask(()=>{rY(e,i,n,{onSuccess:s})}):s(i)},a=>{n(a),s(t)})}function nY(e,t){return e==null?e:{kind:e.isFile?"file":e.isDirectory?"directory":void 0,name:e.name,getFile(){return new Promise((n,s)=>e.file(n,s))},async*values(){const n=e.createReader();yield*await new Promise(a=>{rY(n,[],t,{onSuccess:i=>a(i.map(l=>nY(l,t)))})})},isSameEntry:void 0}}async function*sY(e,t,n=void 0){const s=()=>`${t}/${e.name}`;if(e.kind==="file"){const a=await e.getFile();a!=null?(a.relativePath=t?s():null,yield a):n!=null&&(yield n)}else if(e.kind==="directory")for await(const a of e.values())yield*sY(a,t?s():e.name);else n!=null&&(yield n)}async function*pBe(e,t){const n=await Promise.all(Array.from(e.items,async s=>{let a;return a??(a=nY(typeof s.getAsEntry=="function"?s.getAsEntry():s.webkitGetAsEntry(),t)),{fileSystemHandle:a,lastResortFile:s.getAsFile()}}));for(const{lastResortFile:s,fileSystemHandle:a}of n)if(a!=null)try{yield*sY(a,"",s)}catch(i){s!=null?yield s:t(i)}else s!=null&&(yield s)}async function xBe(e,t){const n=(t==null?void 0:t.logDropError)??Function.prototype;try{const s=[];for await(const a of pBe(e,n))s.push(a);return s}catch{return mBe(e)}}const gBe="@uppy/dashboard",vBe="Universal UI plugin for Uppy.",yBe="4.4.3",bBe="MIT",jBe="lib/index.js",wBe="dist/style.min.css",NBe="module",kBe={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --silent='passed-only'","test:e2e":"vitest watch --project browser --browser.headless false"},SBe=["file uploader","uppy","uppy-plugin","dashboard","ui"],CBe="https://uppy.io",_Be={url:"https://github.com/transloadit/uppy/issues"},PBe={type:"git",url:"git+https://github.com/transloadit/uppy.git"},ABe=["src","lib","dist","CHANGELOG.md"],TBe={"@transloadit/prettier-bytes":"^0.3.4","@uppy/informer":"^4.3.2","@uppy/provider-views":"^4.5.2","@uppy/status-bar":"^4.2.3","@uppy/thumbnail-generator":"^4.2.2","@uppy/utils":"^6.2.2",classnames:"^2.2.6",lodash:"^4.17.21",nanoid:"^5.0.9",preact:"^10.5.13","shallow-equal":"^3.0.0"},EBe={"@uppy/core":"^4.5.2","@uppy/google-drive":"^4.4.2","@uppy/status-bar":"^4.2.3","@uppy/url":"^4.3.2","@uppy/webcam":"^4.3.2","@vitest/browser":"^3.2.4",cssnano:"^7.0.7",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1","resize-observer-polyfill":"^1.5.0",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},OBe={"@uppy/core":"^4.5.2"},RBe={name:gBe,description:vBe,version:yBe,license:bBe,main:jBe,style:wBe,type:NBe,scripts:kBe,keywords:SBe,homepage:CBe,bugs:_Be,repository:PBe,files:ABe,dependencies:TBe,devDependencies:EBe,peerDependencies:OBe};function DBe(){const e=document.body;return!(!("draggable"in e)||!("ondragstart"in e&&"ondrop"in e)||!("FormData"in window)||!("FileReader"in window))}class aY extends Hs{constructor(){super(...arguments);ye(this,"fileInput",null);ye(this,"folderInput",null);ye(this,"mobilePhotoFileInput",null);ye(this,"mobileVideoFileInput",null);ye(this,"triggerFileInputClick",()=>{var n;(n=this.fileInput)==null||n.click()});ye(this,"triggerFolderInputClick",()=>{var n;(n=this.folderInput)==null||n.click()});ye(this,"triggerVideoCameraInputClick",()=>{var n;(n=this.mobileVideoFileInput)==null||n.click()});ye(this,"triggerPhotoCameraInputClick",()=>{var n;(n=this.mobilePhotoFileInput)==null||n.click()});ye(this,"onFileInputChange",n=>{this.props.handleInputChange(n),n.currentTarget.value=""});ye(this,"renderHiddenInput",(n,s)=>{var a;return te("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:n,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:(a=this.props.allowedFileTypes)==null?void 0:a.join(", "),ref:s})});ye(this,"renderHiddenCameraInput",(n,s,a)=>{const l={photo:"image/*",video:"video/*"}[n];return te("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${n}`,onChange:this.onFileInputChange,capture:s===""?"environment":s,accept:l,ref:a})});ye(this,"renderMyDeviceAcquirer",()=>te("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:te("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[te("div",{className:"uppy-DashboardTab-inner",children:te("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:te("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),te("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})}));ye(this,"renderPhotoCamera",()=>te("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:te("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[te("div",{className:"uppy-DashboardTab-inner",children:te("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:te("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),te("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})}));ye(this,"renderVideoCamera",()=>te("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:te("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[te("div",{className:"uppy-DashboardTab-inner",children:te("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:te("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),te("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})}));ye(this,"renderBrowseButton",(n,s)=>{const a=this.props.acquirers.length;return te("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:s,"data-uppy-super-focusable":a===0,children:n})});ye(this,"renderDropPasteBrowseTagline",n=>{const s=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),a=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),i=this.props.fileManagerSelectionType,l=i.charAt(0).toUpperCase()+i.slice(1);return te("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):n>0?this.props.i18nArray(`dropPasteImport${l}`,{browseFiles:s,browseFolders:a,browse:s}):this.props.i18nArray(`dropPaste${l}`,{browseFiles:s,browseFolders:a,browse:s})})});ye(this,"renderAcquirer",n=>{var s;return te("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":n.id,children:te("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":n.id,"aria-controls":`uppy-DashboardContent-panel--${n.id}`,"aria-selected":((s=this.props.activePickerPanel)==null?void 0:s.id)===n.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(n.id),children:[te("div",{className:"uppy-DashboardTab-inner",children:n.icon()}),te("div",{className:"uppy-DashboardTab-name",children:n.name})]})})});ye(this,"renderAcquirers",n=>{const s=[...n],a=s.splice(n.length-2,n.length);return te(wi,{children:[s.map(i=>this.renderAcquirer(i)),te("span",{role:"presentation",style:{"white-space":"nowrap"},children:a.map(i=>this.renderAcquirer(i))})]})});ye(this,"renderSourcesList",(n,s)=>{const{showNativePhotoCameraButton:a,showNativeVideoCameraButton:i}=this.props;let l=[];const o="myDevice";s||l.push({key:o,elements:this.renderMyDeviceAcquirer()}),a&&l.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),i&&l.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),l.push(...n.map(h=>({key:h.id,elements:this.renderAcquirer(h)}))),l.length===1&&l[0].key===o&&(l=[]);const d=[...l],u=d.splice(l.length-2,l.length);return te(wi,{children:[this.renderDropPasteBrowseTagline(l.length),te("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[d.map(({key:h,elements:f})=>te(wi,{children:f},h)),te("span",{role:"presentation",style:{"white-space":"nowrap"},children:u.map(({key:h,elements:f})=>te(wi,{children:f},h))})]})]})})}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:n}=this.props,s=te("span",{children:[te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:te("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),te("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),a=n("poweredBy",{uppy:s});return te("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:a})}render(){const{showNativePhotoCameraButton:n,showNativeVideoCameraButton:s,nativeCameraFacingMode:a}=this.props;return te("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,i=>{this.fileInput=i}),this.renderHiddenInput(!0,i=>{this.folderInput=i}),n&&this.renderHiddenCameraInput("photo",a,i=>{this.mobilePhotoFileInput=i}),s&&this.renderHiddenCameraInput("video",a,i=>{this.mobileVideoFileInput=i}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),te("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&te("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const MBe=e=>te("div",{className:Vi("uppy-Dashboard-AddFilesPanel",e.className),"data-uppy-panelType":"AddFiles","aria-hidden":!e.showAddFilesPanel,children:[te("div",{className:"uppy-DashboardContent-bar",children:[te("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:e.i18n("addingMoreFiles")}),te("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>e.toggleAddFilesPanel(!1),children:e.i18n("back")})]}),te(aY,{...e})]});function $Be(e){const t=e.files[e.fileCardFor],n=()=>{e.uppy.emit("file-editor:cancel",t),e.closeFileEditor()};return te("div",{className:Vi("uppy-DashboardContent-panel",e.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[te("div",{className:"uppy-DashboardContent-bar",children:[te("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:e.i18nArray("editing",{file:te("span",{className:"uppy-DashboardContent-titleFile",children:t.meta?t.meta.name:t.name})})}),te("button",{className:"uppy-DashboardContent-back",type:"button",onClick:n,children:e.i18n("cancel")}),te("button",{className:"uppy-DashboardContent-save",type:"button",onClick:e.saveFileEditor,children:e.i18n("save")})]}),te("div",{className:"uppy-DashboardContent-panelBody",children:e.editors.map(s=>e.uppy.getPlugin(s.id).render(e.state))})]})}function IBe(){return te("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:te("g",{fill:"#686DE0",fillRule:"evenodd",children:[te("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),te("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),te("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function FBe(){return te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:te("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function LBe(){return te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:te("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function UBe(){return te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:te("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function BBe(){return te("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:te("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function zBe(){return te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:te("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[te("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),te("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function VBe(){return te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:te("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function TE(e){const t={color:"#838999",icon:zBe()};if(!e)return t;const n=e.split("/")[0],s=e.split("/")[1];return n==="text"?{color:"#5a5e69",icon:VBe()}:n==="image"?{color:"#686de0",icon:IBe()}:n==="audio"?{color:"#068dbb",icon:FBe()}:n==="video"?{color:"#19af67",icon:LBe()}:n==="application"&&s==="pdf"?{color:"#e25149",icon:UBe()}:n==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(s)!==-1?{color:"#00C469",icon:BBe()}:t}function Nc(e){const{tagName:t}=e.target;if(t==="INPUT"||t==="TEXTAREA"){e.stopPropagation();return}e.preventDefault(),e.stopPropagation()}function iY(e){const{file:t}=e;if(t.preview)return te("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:t.name,src:t.preview});const{color:n,icon:s}=TE(t.type);return te("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[te("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:n},children:s}),te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:te("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function qBe(e){const{computedMetaFields:t,requiredMetaFields:n,updateMeta:s,form:a,formState:i}=e,l={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return t.map(o=>{const c=`uppy-Dashboard-FileCard-input-${o.id}`,d=n.includes(o.id);return te("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[te("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:c,children:o.name}),o.render!==void 0?o.render({value:i[o.id],onChange:u=>s(u,o.id),fieldCSSClasses:l,required:d,form:a.id},Qg):te("input",{className:l.text,id:c,form:a.id,type:o.type||"text",required:d,value:i[o.id],placeholder:o.placeholder,onInput:u=>s(u.target.value,o.id),"data-uppy-super-focusable":!0})]},o.id)})}function WBe(e){const{files:t,fileCardFor:n,toggleFileCard:s,saveFileCard:a,metaFields:i,requiredMetaFields:l,openFileEditor:o,i18n:c,i18nArray:d,className:u,canEditFile:h}=e,f=()=>typeof i=="function"?i(t[n]):i,m=t[n],v=f()??[],x=h(m),w={};v.forEach(C=>{w[C.id]=m.meta[C.id]??""});const[j,g]=nw(w),b=r8e(C=>{C.preventDefault(),a(j,n)},[a,j,n]),p=(C,_)=>{g({...j,[_]:C})},N=()=>{s(!1)},[k]=nw(()=>{const C=document.createElement("form");return C.setAttribute("tabindex","-1"),C.id=kE(),C});return iP(()=>(document.body.appendChild(k),k.addEventListener("submit",b),()=>{k.removeEventListener("submit",b),document.body.removeChild(k)}),[k,b]),te("div",{className:Vi("uppy-Dashboard-FileCard",u),"data-uppy-panelType":"FileCard",onDragOver:Nc,onDragLeave:Nc,onDrop:Nc,onPaste:Nc,children:[te("div",{className:"uppy-DashboardContent-bar",children:[te("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:d("editing",{file:te("span",{className:"uppy-DashboardContent-titleFile",children:m.meta?m.meta.name:m.name})})}),te("button",{className:"uppy-DashboardContent-back",type:"button",form:k.id,title:c("finishEditingFile"),onClick:N,children:c("cancel")})]}),te("div",{className:"uppy-Dashboard-FileCard-inner",children:[te("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:TE(m.type).color},children:[te(iY,{file:m}),x&&te("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:C=>{b(C),o(m)},children:c("editImage")})]}),te("div",{className:"uppy-Dashboard-FileCard-info",children:te(qBe,{computedMetaFields:v,requiredMetaFields:l,updateMeta:p,form:k,formState:j})}),te("div",{className:"uppy-Dashboard-FileCard-actions",children:[te("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:k.id,children:c("saveChanges")}),te("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:N,form:k.id,children:c("cancel")})]})]})]})}function HBe(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),s=Object.keys(t),a=n.length;if(s.length!==a)return!1;for(let i=0;i<a;i++){const l=n[i];if(e[l]!==t[l]||!Object.prototype.hasOwnProperty.call(t,l))return!1}return!0}function KBe(e,t="Copy the URL below"){return new Promise(n=>{const s=document.createElement("textarea");s.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),s.value=e,document.body.appendChild(s),s.select();const a=()=>{document.body.removeChild(s),window.prompt(t,e),n()};try{return document.execCommand("copy")?(document.body.removeChild(s),n()):a()}catch{return document.body.removeChild(s),a()}})}function GBe({file:e,uploadInProgressOrComplete:t,metaFields:n,canEditFile:s,i18n:a,onClick:i}){return!t&&n&&n.length>0||!t&&s(e)?te("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":a("editFileWithFilename",{file:e.meta.name}),title:a("editFileWithFilename",{file:e.meta.name}),onClick:()=>i(),children:te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:te("g",{fillRule:"evenodd",children:[te("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),te("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),te("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function YBe({i18n:e,onClick:t,file:n}){return te("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:n.meta.name}),title:e("removeFile",{file:n.meta.name}),onClick:()=>t(),children:te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[te("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),te("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function XBe({file:e,uppy:t,i18n:n}){const s=a=>{KBe(e.uploadURL,n("copyLinkToClipboardFallback")).then(()=>{t.log("Link copied to clipboard."),t.info(n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.log).then(()=>a.target.focus({preventScroll:!0}))};return te("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":n("copyLink"),title:n("copyLink"),onClick:a=>s(a),children:te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:te("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function ZBe(e){const{uppy:t,file:n,uploadInProgressOrComplete:s,canEditFile:a,metaFields:i,showLinkToFileUploadResult:l,showRemoveButton:o,i18n:c,toggleFileCard:d,openFileEditor:u}=e;return te("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[te(GBe,{i18n:c,file:n,uploadInProgressOrComplete:s,canEditFile:a,metaFields:i,onClick:()=>{i&&i.length>0?d(!0,n.id):u(n)}}),l&&n.uploadURL?te(XBe,{file:n,uppy:t,i18n:c}):null,o?te(YBe,{i18n:c,file:n,onClick:()=>t.removeFile(n.id)}):null]})}const pS="...";function lY(e,t){if(t===0)return"";if(e.length<=t)return e;if(t<=pS.length+1)return`${e.slice(0,t-1)}…`;const n=t-pS.length,s=Math.ceil(n/2),a=Math.floor(n/2);return e.slice(0,s)+pS+e.slice(-a)}const QBe=(e,t)=>(typeof t=="function"?t():t).filter(a=>a.id===e)[0].name;function oY(e){const{file:t,toggleFileCard:n,i18n:s,metaFields:a}=e,{missingRequiredMetaFields:i}=t;if(!(i!=null&&i.length))return null;const l=i.map(o=>QBe(o,a)).join(", ");return te("div",{className:"uppy-Dashboard-Item-errorMessage",children:[s("missingRequiredMetaFields",{smart_count:i.length,fields:l})," ",te("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>n(!0,t.id),children:s("editFile")})]})}const JBe=e=>{const{author:t,name:n}=e.file.meta;function s(){return e.isSingleFile&&e.containerHeight>=350?90:e.containerWidth<=352?35:e.containerWidth<=576?60:t?20:30}return te("div",{className:"uppy-Dashboard-Item-name",title:n,children:lY(n,s())})},e7e=e=>{var a;const{author:t}=e.file.meta,n=(a=e.file.remote)==null?void 0:a.providerName,s="·";return t?te("div",{className:"uppy-Dashboard-Item-author",children:[te("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:lY(t.name,13)}),n?te(wi,{children:[` ${s} `,n,` ${s} `]}):null]}):null},t7e=e=>e.file.size&&te("div",{className:"uppy-Dashboard-Item-statusSize",children:Dd(e.file.size)}),r7e=e=>e.file.isGhost&&te("span",{children:[" • ",te("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>e.toggleAddFilesPanel(!0),children:e.i18n("reSelect")})]}),n7e=({file:e,onClick:t})=>e.error?te("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:t,type:"button",children:"?"}):null;function s7e(e){const{file:t,i18n:n,toggleFileCard:s,metaFields:a,toggleAddFilesPanel:i,isSingleFile:l,containerHeight:o,containerWidth:c}=e;return te("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":t.source,children:[te("div",{className:"uppy-Dashboard-Item-fileName",children:[JBe({file:t,isSingleFile:l,containerHeight:o,containerWidth:c}),te(n7e,{file:t,onClick:()=>alert(t.error)})]}),te("div",{className:"uppy-Dashboard-Item-status",children:[e7e({file:t}),t7e({file:t}),r7e({file:t,toggleAddFilesPanel:i,i18n:n})]}),te(oY,{file:t,i18n:n,toggleFileCard:s,metaFields:a})]})}function a7e(e){const{file:t,i18n:n,toggleFileCard:s,metaFields:a,showLinkToFileUploadResult:i}=e,o=t.preview?"rgba(255, 255, 255, 0.5)":TE(t.type).color;return te("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:o},children:[i&&t.uploadURL&&te("a",{className:"uppy-Dashboard-Item-previewLink",href:t.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":t.meta.name,children:te("span",{hidden:!0,children:t.meta.name})}),te(iY,{file:t}),te(oY,{file:t,i18n:n,toggleFileCard:s,metaFields:a})]})}function i7e(e){if(!e.isUploaded){if(e.error&&!e.hideRetryButton){e.uppy.retryUpload(e.file.id);return}e.resumableUploads&&!e.hidePauseResumeButton?e.uppy.pauseResume(e.file.id):e.individualCancellation&&!e.hideCancelButton&&e.uppy.removeFile(e.file.id)}}function cF(e){return e.isUploaded?e.i18n("uploadComplete"):e.error?e.i18n("retryUpload"):e.resumableUploads?e.file.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.individualCancellation?e.i18n("cancelUpload"):""}function xS(e){return te("div",{className:"uppy-Dashboard-Item-progress",children:te("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":cF(e),title:cF(e),onClick:()=>i7e(e),children:e.children})})}function x0({children:e}){return te("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:e})}function gS({progress:e}){const t=2*Math.PI*15;return te("g",{children:[te("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),te("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":t,"stroke-dashoffset":t-t/100*e})]})}function l7e(e){return!e.file.progress.uploadStarted||e.file.progress.percentage===void 0?null:e.isUploaded?te("div",{className:"uppy-Dashboard-Item-progress",children:te("div",{className:"uppy-Dashboard-Item-progressIndicator",children:te(x0,{children:[te("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),te("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):e.recoveredState?null:e.error&&!e.hideRetryButton?te(xS,{...e,children:te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[te("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),te("path",{d:"M7.9 3H10v2H7.9z"}),te("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),te("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):e.resumableUploads&&!e.hidePauseResumeButton?te(xS,{...e,children:te(x0,{children:[te(gS,{progress:e.file.progress.percentage}),e.file.isPaused?te("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):te("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[te("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),te("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!e.resumableUploads&&e.individualCancellation&&!e.hideCancelButton?te(xS,{...e,children:te(x0,{children:[te(gS,{progress:e.file.progress.percentage}),te("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):te("div",{className:"uppy-Dashboard-Item-progress",children:te("div",{className:"uppy-Dashboard-Item-progressIndicator",children:te(x0,{children:te(gS,{progress:e.file.progress.percentage})})})})}class o7e extends Hs{componentDidMount(){const{file:t}=this.props;t.preview||this.props.handleRequestThumbnail(t)}shouldComponentUpdate(t){return!HBe(this.props,t)}componentDidUpdate(){const{file:t}=this.props;t.preview||this.props.handleRequestThumbnail(t)}componentWillUnmount(){const{file:t}=this.props;t.preview||this.props.handleCancelThumbnail(t)}render(){const{file:t}=this.props,n=t.progress.preprocess||t.progress.postprocess,s=!!t.progress.uploadComplete&&!n&&!t.error,a=!!t.progress.uploadStarted||!!n,i=t.progress.uploadStarted&&!t.progress.uploadComplete||n,l=t.error||!1,{isGhost:o}=t;let c=(this.props.individualCancellation||!i)&&!s;s&&this.props.showRemoveButtonAfterComplete&&(c=!0);const d=Vi({"uppy-Dashboard-Item":!0,"is-inprogress":i&&!this.props.recoveredState,"is-processing":n,"is-complete":s,"is-error":!!l,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":o});return te("div",{className:d,id:`uppy_${t.id}`,role:this.props.role,children:[te("div",{className:"uppy-Dashboard-Item-preview",children:[te(a7e,{file:t,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),te(l7e,{uppy:this.props.uppy,file:t,error:l,isUploaded:s,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),te("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[te(s7e,{file:t,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),te(ZBe,{file:t,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:c,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:a,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function c7e(e,t){const n=[];let s=[];return e.forEach(a=>{s.length<t?s.push(a):(n.push(s),s=[a])}),s.length&&n.push(s),n}function d7e({id:e,i18n:t,uppy:n,files:s,resumableUploads:a,hideRetryButton:i,hidePauseResumeButton:l,hideCancelButton:o,showLinkToFileUploadResult:c,showRemoveButtonAfterComplete:d,metaFields:u,isSingleFile:h,toggleFileCard:f,handleRequestThumbnail:m,handleCancelThumbnail:v,recoveredState:x,individualCancellation:w,itemsPerRow:j,openFileEditor:g,canEditFile:b,toggleAddFilesPanel:p,containerWidth:N,containerHeight:k}){const C=j===1?71:200,_=NE(()=>{const D=($,A)=>Number(s[A].isGhost)-Number(s[$].isGhost),E=Object.keys(s);return x&&E.sort(D),c7e(E,j)},[s,j,x]),P=D=>te("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:D.map(E=>te(o7e,{uppy:n,id:e,i18n:t,resumableUploads:a,individualCancellation:w,hideRetryButton:i,hidePauseResumeButton:l,hideCancelButton:o,showLinkToFileUploadResult:c,showRemoveButtonAfterComplete:d,metaFields:u,recoveredState:x,isSingleFile:h,containerWidth:N,containerHeight:k,toggleFileCard:f,handleRequestThumbnail:m,handleCancelThumbnail:v,role:"listitem",openFileEditor:g,canEditFile:b,toggleAddFilesPanel:p,file:s[E]},E))},D[0]);return h?te("div",{class:"uppy-Dashboard-files",children:P(_[0])}):te(UUe,{class:"uppy-Dashboard-files",role:"list",data:_,renderRow:P,rowHeight:C})}function u7e({activePickerPanel:e,className:t,hideAllPanels:n,i18n:s,state:a,uppy:i}){const l=q0(null);return te("div",{className:Vi("uppy-DashboardContent-panel",t),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:Nc,onDragLeave:Nc,onDrop:Nc,onPaste:Nc,children:[te("div",{className:"uppy-DashboardContent-bar",children:[te("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:s("importFrom",{name:e.name})}),te("button",{className:"uppy-DashboardContent-back",type:"button",onClick:n,children:s("cancel")})]}),te("div",{ref:l,className:"uppy-DashboardContent-panelBody",children:i.getPlugin(e.id).render(a,l.current)})]})}const Zi={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function h7e(e,t,n,s={}){if(e)return Zi.STATE_ERROR;if(t)return Zi.STATE_COMPLETE;if(n)return Zi.STATE_PAUSED;let a=Zi.STATE_WAITING;const i=Object.keys(s);for(let l=0;l<i.length;l++){const{progress:o}=s[i[l]];if(o.uploadStarted&&!o.uploadComplete)return Zi.STATE_UPLOADING;o.preprocess&&a!==Zi.STATE_UPLOADING&&(a=Zi.STATE_PREPROCESSING),o.postprocess&&a!==Zi.STATE_UPLOADING&&a!==Zi.STATE_PREPROCESSING&&(a=Zi.STATE_POSTPROCESSING)}return a}function f7e({files:e,i18n:t,isAllComplete:n,isAllErrored:s,isAllPaused:a,inProgressNotPausedFiles:i,newFiles:l,processingFiles:o}){switch(h7e(s,n,a,e)){case"uploading":return t("uploadingXFiles",{smart_count:i.length});case"preprocessing":case"postprocessing":return t("processingXFiles",{smart_count:o.length});case"paused":return t("uploadPaused");case"waiting":return t("xFilesSelected",{smart_count:l.length});case"complete":return t("uploadComplete");case"error":return t("error")}}function m7e(e){const{i18n:t,isAllComplete:n,hideCancelButton:s,maxNumberOfFiles:a,toggleAddFilesPanel:i,uppy:l}=e;let{allowNewUpload:o}=e;return o&&a&&(o=e.totalFileCount<e.maxNumberOfFiles),te("div",{className:"uppy-DashboardContent-bar",children:[!n&&!s?te("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>l.cancelAll(),children:t("cancel")}):te("div",{}),te("div",{className:"uppy-DashboardContent-title",children:te(f7e,{...e})}),o?te("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":t("addMoreFiles"),title:t("addMoreFiles"),onClick:()=>i(!0),children:[te("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:te("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),te("span",{className:"uppy-DashboardContent-addMoreCaption",children:t("addMore")})]}):te("div",{})]})}const ah="uppy-transition-slideDownUp",dF=250;function g0({children:e}){const[t,n]=nw(null),[s,a]=nw(""),i=q0(),l=q0(),o=q0(),c=()=>{a(`${ah}-enter`),cancelAnimationFrame(o.current),clearTimeout(l.current),l.current=void 0,o.current=requestAnimationFrame(()=>{a(`${ah}-enter ${ah}-enter-active`),i.current=setTimeout(()=>{a("")},dF)})},d=()=>{a(`${ah}-leave`),cancelAnimationFrame(o.current),clearTimeout(i.current),i.current=void 0,o.current=requestAnimationFrame(()=>{a(`${ah}-leave ${ah}-leave-active`),l.current=setTimeout(()=>{n(null),a("")},dF)})};return iP(()=>{const u=xi(e)[0];t!==u&&(u&&!t?c():t&&!u&&!l.current&&d(),n(u))},[e,t]),iP(()=>()=>{clearTimeout(i.current),clearTimeout(l.current),cancelAnimationFrame(o.current)},[]),t?kG(t,{className:Vi(s,t.props.className)}):null}const uF=900,hF=700,vS=576,fF=330;function p7e(e){const t=e.totalFileCount===0,n=e.totalFileCount===1,s=e.containerWidth>vS,a=e.containerHeight>fF,i=Vi({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":e.disabled,"uppy-Dashboard--animateOpenClose":e.animateOpenClose,"uppy-Dashboard--isClosing":e.isClosing,"uppy-Dashboard--isDraggingOver":e.isDraggingOver,"uppy-Dashboard--modal":!e.inline,"uppy-size--md":e.containerWidth>vS,"uppy-size--lg":e.containerWidth>hF,"uppy-size--xl":e.containerWidth>uF,"uppy-size--height-md":e.containerHeight>fF,"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":e.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":e.singleFileFullScreen&&n&&a});let l=1;e.containerWidth>uF?l=5:e.containerWidth>hF?l=4:e.containerWidth>vS&&(l=3);const o=e.showSelectedFiles&&!t,c=e.recoveredState?Object.keys(e.recoveredState.files).length:null,d=e.files?Object.keys(e.files).filter(f=>e.files[f].isGhost).length:0,u=()=>d>0?e.i18n("recoveredXFiles",{smart_count:d}):e.i18n("recoveredAllFiles");return te("div",{className:i,"data-uppy-theme":e.theme,"data-uppy-num-acquirers":e.acquirers.length,"data-uppy-drag-drop-supported":!e.disableLocalFiles&&DBe(),"aria-hidden":e.inline?"false":e.isHidden,"aria-disabled":e.disabled,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onPaste:e.handlePaste,onDragOver:e.handleDragOver,onDragLeave:e.handleDragLeave,onDrop:e.handleDrop,children:[te("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:e.handleClickOutside}),te("div",{className:"uppy-Dashboard-inner",role:e.inline?void 0:"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""},children:[e.inline?null:te("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onClick:e.closeModal,children:te("span",{"aria-hidden":"true",children:"×"})}),te("div",{className:"uppy-Dashboard-innerWrap",children:[te("div",{className:"uppy-Dashboard-dropFilesHereHint",children:e.i18n("dropHint")}),o&&te(m7e,{...e}),c&&te("div",{className:"uppy-Dashboard-serviceMsg",children:[te("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:te("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[te("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),te("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),te("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),te("strong",{className:"uppy-Dashboard-serviceMsg-title",children:e.i18n("sessionRestored")}),te("div",{className:"uppy-Dashboard-serviceMsg-text",children:u()})]}),o?te(d7e,{id:e.id,i18n:e.i18n,uppy:e.uppy,files:e.files,resumableUploads:e.resumableUploads,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,metaFields:e.metaFields,toggleFileCard:e.toggleFileCard,handleRequestThumbnail:e.handleRequestThumbnail,handleCancelThumbnail:e.handleCancelThumbnail,recoveredState:e.recoveredState,individualCancellation:e.individualCancellation,openFileEditor:e.openFileEditor,canEditFile:e.canEditFile,toggleAddFilesPanel:e.toggleAddFilesPanel,isSingleFile:n,itemsPerRow:l,containerWidth:e.containerWidth,containerHeight:e.containerHeight}):te(aY,{i18n:e.i18n,i18nArray:e.i18nArray,acquirers:e.acquirers,handleInputChange:e.handleInputChange,maxNumberOfFiles:e.maxNumberOfFiles,allowedFileTypes:e.allowedFileTypes,showNativePhotoCameraButton:e.showNativePhotoCameraButton,showNativeVideoCameraButton:e.showNativeVideoCameraButton,nativeCameraFacingMode:e.nativeCameraFacingMode,showPanel:e.showPanel,activePickerPanel:e.activePickerPanel,disableLocalFiles:e.disableLocalFiles,fileManagerSelectionType:e.fileManagerSelectionType,note:e.note,proudlyDisplayPoweredByUppy:e.proudlyDisplayPoweredByUppy}),te(g0,{children:e.showAddFilesPanel?te(MBe,{...e,isSizeMD:s},"AddFiles"):null}),te(g0,{children:e.fileCardFor?te(WBe,{...e},"FileCard"):null}),te(g0,{children:e.activePickerPanel?te(u7e,{...e},"Picker"):null}),te(g0,{children:e.showFileEditor?te($Be,{...e},"Editor"):null}),te("div",{className:"uppy-Dashboard-progressindicators",children:e.progressindicators.map(f=>e.uppy.getPlugin(f.id).render(e.state))})]})]})]})}const x7e={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}},cY=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function dY(e,t){if(t){const n=e.querySelector(`[data-uppy-paneltype="${t}"]`);if(n)return n}return e}function g7e(){let e=!1;return F1e((n,s)=>{const a=dY(n,s),i=a.contains(document.activeElement);if(i&&e)return;const l=a.querySelector("[data-uppy-super-focusable]");if(!(i&&!l))if(l)l.focus({preventScroll:!0}),e=!0;else{const o=a.querySelector(cY);o==null||o.focus({preventScroll:!0}),e=!1}},260)}function mF(e,t){const n=t[0];n&&(n.focus(),e.preventDefault())}function v7e(e,t){const n=t[t.length-1];n&&(n.focus(),e.preventDefault())}function y7e(e){return e.contains(document.activeElement)}function uY(e,t,n){const s=dY(n,t),a=Nx(s.querySelectorAll(cY)),i=a.indexOf(document.activeElement);y7e(s)?e.shiftKey&&i===0?v7e(e,a):!e.shiftKey&&i===a.length-1&&mF(e,a):mF(e,a)}function b7e(e,t,n){t===null||uY(e,t,n)}const pF=9,j7e=27;function xF(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}const w7e={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:BUe,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};var kS,df,Hd,hv,uf,hw,fw,mw,Kd,pw,xw,hf,Un,jP,wP,hY,NP,kP,fY;let N7e=(kS=class extends Nm{constructor(n,s){var i;const a=(s==null?void 0:s.autoOpen)??null;super(n,{...w7e,...s,autoOpen:a});be(this,Un);be(this,df);ye(this,"modalName",`uppy-Dashboard-${kE()}`);ye(this,"superFocus",g7e());ye(this,"ifFocusedOnUppyRecently",!1);ye(this,"dashboardIsDisabled");ye(this,"savedScrollPosition");ye(this,"savedActiveElement");ye(this,"resizeObserver");ye(this,"darkModeMediaQuery");ye(this,"makeDashboardInsidesVisibleAnywayTimeout");ye(this,"removeTarget",n=>{const a=this.getPluginState().targets.filter(i=>i.id!==n.id);this.setPluginState({targets:a})});ye(this,"addTarget",n=>{const s=n.id||n.constructor.name,a=n.title||s,i=n.type;if(i!=="acquirer"&&i!=="progressindicator"&&i!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const l={id:s,name:a,type:i},c=this.getPluginState().targets.slice();return c.push(l),this.setPluginState({targets:c}),this.el});ye(this,"hideAllPanels",()=>{var a;const n=this.getPluginState(),s={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};n.activePickerPanel===s.activePickerPanel&&n.showAddFilesPanel===s.showAddFilesPanel&&n.showFileEditor===s.showFileEditor&&n.activeOverlayType===s.activeOverlayType||(this.setPluginState(s),this.uppy.emit("dashboard:close-panel",(a=n.activePickerPanel)==null?void 0:a.id))});ye(this,"showPanel",n=>{const{targets:s}=this.getPluginState(),a=s.find(i=>i.type==="acquirer"&&i.id===n);this.setPluginState({activePickerPanel:a,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",n)});ye(this,"canEditFile",n=>{const{targets:s}=this.getPluginState();return B(this,Kd).call(this,s).some(i=>this.uppy.getPlugin(i.id).canEditFile(n))});ye(this,"openFileEditor",n=>{const{targets:s}=this.getPluginState(),a=B(this,Kd).call(this,s);this.setPluginState({showFileEditor:!0,fileCardFor:n.id||null,activeOverlayType:"FileEditor"}),a.forEach(i=>{this.uppy.getPlugin(i.id).selectFile(n)})});ye(this,"closeFileEditor",()=>{const{metaFields:n}=this.getPluginState();n&&n.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})});ye(this,"saveFileEditor",()=>{const{targets:n}=this.getPluginState();B(this,Kd).call(this,n).forEach(a=>{this.uppy.getPlugin(a.id).save()}),this.closeFileEditor()});ye(this,"openModal",()=>{const{promise:n,resolve:s}=xF();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const a=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",a,!1),s()};this.el.addEventListener("animationend",a,!1)}else this.setPluginState({isHidden:!1}),s();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),n});ye(this,"closeModal",n=>{var c;const s=(n==null?void 0:n.manualClose)??!0,{isHidden:a,isClosing:i}=this.getPluginState();if(a||i)return;const{promise:l,resolve:o}=xF();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const d=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",d,!1),o()};this.el.addEventListener("animationend",d,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),o();return document.removeEventListener("keydown",this.handleKeyDownInModal),s&&this.opts.browserBackButtonClose&&(c=history.state)!=null&&c[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),l});ye(this,"isModalOpen",()=>!this.getPluginState().isHidden||!1);ye(this,"requestCloseModal",()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal());ye(this,"setDarkModeCapability",n=>{const{capabilities:s}=this.uppy.getState();this.uppy.setState({capabilities:{...s,darkMode:n}})});ye(this,"handleSystemDarkModeChange",n=>{const s=n.matches;this.uppy.log(`[Dashboard] Dark mode is ${s?"on":"off"}`),this.setDarkModeCapability(s)});ye(this,"toggleFileCard",(n,s)=>{const a=this.uppy.getFile(s);n?this.uppy.emit("dashboard:file-edit-start",a):this.uppy.emit("dashboard:file-edit-complete",a),this.setPluginState({fileCardFor:n?s:null,activeOverlayType:n?"FileCard":null})});ye(this,"toggleAddFilesPanel",n=>{this.setPluginState({showAddFilesPanel:n,activeOverlayType:n?"AddFiles":null})});ye(this,"addFiles",n=>{const s=n.map(a=>({source:this.id,name:a.name,type:a.type,data:a,meta:{relativePath:a.relativePath||a.webkitRelativePath||null}}));try{this.uppy.addFiles(s)}catch(a){this.uppy.log(a)}});ye(this,"startListeningToResize",()=>{this.resizeObserver=new ResizeObserver(n=>{const s=n[0],{width:a,height:i}=s.contentRect;this.setPluginState({containerWidth:a,containerHeight:i,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const n=this.getPluginState(),s=!this.opts.inline&&n.isHidden;!n.areInsidesReadyToBeVisible&&!s&&(this.uppy.log("[Dashboard] resize event didn’t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)});ye(this,"stopListeningToResize",()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)});ye(this,"recordIfFocusedOnUppyRecently",n=>{this.el.contains(n.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())});ye(this,"disableInteractiveElements",n=>{const s=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],a=B(this,df)??Nx(this.el.querySelectorAll(s)).filter(i=>!i.classList.contains("uppy-Dashboard-close"));for(const i of a)i.tagName==="A"?i.setAttribute("aria-disabled",n):i.disabled=n;n?je(this,df,a):je(this,df,null),this.dashboardIsDisabled=n});ye(this,"updateBrowserHistory",()=>{var n;(n=history.state)!=null&&n[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)});ye(this,"handlePopState",n=>{var s;this.isModalOpen()&&(!n.state||!n.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&((s=n.state)!=null&&s[this.modalName])&&history.back()});ye(this,"handleKeyDownInModal",n=>{n.keyCode===j7e&&this.requestCloseModal(),n.keyCode===pF&&uY(n,this.getPluginState().activeOverlayType,this.el)});ye(this,"handleClickOutside",()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()});ye(this,"handlePaste",n=>{this.uppy.iteratePlugins(a=>{var i;a.type==="acquirer"&&((i=a.handleRootPaste)==null||i.call(a,n))});const s=Nx(n.clipboardData.files);s.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(s))});ye(this,"handleInputChange",n=>{n.preventDefault();const s=Nx(n.currentTarget.files||[]);s.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(s))});ye(this,"handleDragOver",n=>{n.preventDefault(),n.stopPropagation();const s=()=>{let o=!0;return this.uppy.iteratePlugins(c=>{var d;(d=c.canHandleRootDrop)!=null&&d.call(c,n)&&(o=!0)}),o},a=()=>{const{types:o}=n.dataTransfer;return o.some(c=>c==="Files")},i=s(),l=a();if(!i&&!l||this.opts.disabled||this.opts.disableLocalFiles&&(l||!i)||!this.uppy.getState().allowNewUpload){n.dataTransfer.dropEffect="none";return}n.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(n)});ye(this,"handleDragLeave",n=>{n.preventDefault(),n.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(n)});ye(this,"handleDrop",async n=>{n.preventDefault(),n.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(l=>{var o;l.type==="acquirer"&&((o=l.handleRootDrop)==null||o.call(l,n))});let s=!1;const a=l=>{this.uppy.log(l,"error"),s||(this.uppy.info(l.message,"error"),s=!0)};this.uppy.log("[Dashboard] Processing dropped files");const i=await xBe(n.dataTransfer,{logDropError:a});i.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(i)),this.opts.onDrop(n)});ye(this,"handleRequestThumbnail",n=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",n)});ye(this,"handleCancelThumbnail",n=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",n)});ye(this,"handleKeyDownInInline",n=>{n.keyCode===pF&&b7e(n,this.getPluginState().activeOverlayType,this.el)});ye(this,"handlePasteOnBody",n=>{this.el.contains(document.activeElement)&&this.handlePaste(n)});ye(this,"handleComplete",({failed:n})=>{this.opts.closeAfterFinish&&!(n!=null&&n.length)&&this.requestCloseModal()});ye(this,"handleCancelRestore",()=>{this.uppy.emit("restore-canceled")});be(this,Hd,()=>{if(this.opts.disableThumbnailGenerator)return;const n=600,s=this.uppy.getFiles();if(s.length===1){const a=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);a==null||a.setOptions({thumbnailWidth:n});const i={...s[0],preview:void 0};a==null||a.requestThumbnail(i).then(()=>{a==null||a.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}});be(this,hv,n=>{const s=n[0],{metaFields:a}=this.getPluginState(),i=a&&a.length>0,l=this.canEditFile(s);i&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,s.id):l&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(s)});ye(this,"initEvents",()=>{if(this.opts.trigger&&!this.opts.inline){const n=oF(this.opts.trigger);n?n.forEach(s=>s.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",B(this,hf)),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",B(this,Hd)),this.uppy.on("file-removed",B(this,Hd)),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",B(this,hv))});ye(this,"removeEvents",()=>{const n=oF(this.opts.trigger);!this.opts.inline&&n&&n.forEach(s=>s.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",B(this,hf)),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",B(this,Hd)),this.uppy.off("file-removed",B(this,Hd)),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",B(this,hv))});ye(this,"superFocusOnEachUpdate",()=>{const n=this.el.contains(document.activeElement),s=document.activeElement===document.body||document.activeElement===null,a=this.uppy.getState().info.length===0,i=!this.opts.inline;a&&(i||n||s&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()});ye(this,"afterUpdate",()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()});ye(this,"saveFileCard",(n,s)=>{this.uppy.setFileMeta(s,n),this.toggleFileCard(!1,s)});be(this,uf,n=>{const s=this.uppy.getPlugin(n.id);return{...n,icon:s.icon||this.opts.defaultPickerIcon,render:s.render}});be(this,hw,n=>{const s=this.uppy.getPlugin(n.id);return typeof s.isSupported!="function"?!0:s.isSupported()});be(this,fw,n=>n.filter(s=>s.type==="acquirer"&&B(this,hw).call(this,s)).map(B(this,uf)));be(this,mw,n=>n.filter(s=>s.type==="progressindicator").map(B(this,uf)));be(this,Kd,n=>n.filter(s=>s.type==="editor").map(B(this,uf)));ye(this,"render",n=>{const s=this.getPluginState(),{files:a,capabilities:i,allowNewUpload:l}=n,{newFiles:o,uploadStartedFiles:c,completeFiles:d,erroredFiles:u,inProgressFiles:h,inProgressNotPausedFiles:f,processingFiles:m,isUploadStarted:v,isAllComplete:x,isAllPaused:w}=this.uppy.getObjectOfFilesPerState(),j=B(this,fw).call(this,s.targets),g=B(this,mw).call(this,s.targets),b=B(this,Kd).call(this,s.targets);let p;return this.opts.theme==="auto"?p=i.darkMode?"dark":"light":p=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),p7e({state:n,isHidden:s.isHidden,files:a,newFiles:o,uploadStartedFiles:c,completeFiles:d,erroredFiles:u,inProgressFiles:h,inProgressNotPausedFiles:f,processingFiles:m,isUploadStarted:v,isAllComplete:x,isAllPaused:w,totalFileCount:Object.keys(a).length,totalProgress:n.totalProgress,allowNewUpload:l,acquirers:j,theme:p,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:s.activePickerPanel,showFileEditor:s.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:s.isClosing,progressindicators:g,editors:b,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:n.recoveredState,metaFields:s.metaFields,resumableUploads:i.resumableUploads||!1,individualCancellation:i.individualCancellation,isMobileDevice:i.isMobileDevice,fileCardFor:s.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:s.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:s.containerWidth,containerHeight:s.containerHeight,areInsidesReadyToBeVisible:s.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:s.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})});be(this,pw,()=>{const{plugins:n}=this.opts;n.forEach(s=>{const a=this.uppy.getPlugin(s);a?a.mount(this,a):this.uppy.log(`[Uppy] Dashboard could not find plugin '${s}', make sure to uppy.use() the plugins you are specifying`,"warning")})});be(this,xw,()=>{this.uppy.iteratePlugins(B(this,hf))});be(this,hf,n=>{var a;const s=["acquirer","editor"];n&&!((a=n.opts)!=null&&a.target)&&s.includes(n.type)&&(this.getPluginState().targets.some(l=>n.id===l.id)||n.mount(this,n))});ye(this,"install",()=>{var c;this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:n,closeAfterFinish:s}=this.opts;if(n&&s)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:a,allowMultipleUploadBatches:i}=this.uppy.opts;(a||i)&&s&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:l}=this.opts;l&&this.mount(l,this),this.opts.disableStatusBar||this.uppy.use(C9e,{id:Ce(this,Un,NP).call(this),target:this,...Ce(this,Un,jP).call(this)}),this.opts.disableInformer||this.uppy.use(zG,{id:Ce(this,Un,fY).call(this),target:this,...Ce(this,Un,hY).call(this)}),this.opts.disableThumbnailGenerator||this.uppy.use(tY,{id:Ce(this,Un,kP).call(this),...Ce(this,Un,wP).call(this)}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const o=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${o?"on":"off"}`),this.setDarkModeCapability(o),this.opts.theme==="auto"&&((c=this.darkModeMediaQuery)==null||c.addListener(this.handleSystemDarkModeChange)),B(this,pw).call(this),B(this,xw).call(this),this.initEvents()});ye(this,"uninstall",()=>{var s;if(!this.opts.disableInformer){const a=this.uppy.getPlugin(`${this.id}:Informer`);a&&this.uppy.removePlugin(a)}if(!this.opts.disableStatusBar){const a=this.uppy.getPlugin(`${this.id}:StatusBar`);a&&this.uppy.removePlugin(a)}if(!this.opts.disableThumbnailGenerator){const a=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);a&&this.uppy.removePlugin(a)}const{plugins:n}=this.opts;n.forEach(a=>{const i=this.uppy.getPlugin(a);i&&i.unmount()}),this.opts.theme==="auto"&&((s=this.darkModeMediaQuery)==null||s.removeListener(this.handleSystemDarkModeChange)),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()});this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=x7e,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(i=this.opts).onRequestCloseModal??(i.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(n){var s,a;super.setOptions(n),(s=this.uppy.getPlugin(Ce(this,Un,NP).call(this)))==null||s.setOptions(Ce(this,Un,jP).call(this)),(a=this.uppy.getPlugin(Ce(this,Un,kP).call(this)))==null||a.setOptions(Ce(this,Un,wP).call(this))}},df=new WeakMap,Hd=new WeakMap,hv=new WeakMap,uf=new WeakMap,hw=new WeakMap,fw=new WeakMap,mw=new WeakMap,Kd=new WeakMap,pw=new WeakMap,xw=new WeakMap,hf=new WeakMap,Un=new WeakSet,jP=function(){const{hideUploadButton:n,hideRetryButton:s,hidePauseResumeButton:a,hideCancelButton:i,showProgressDetails:l,hideProgressAfterFinish:o,locale:c,doneButtonHandler:d}=this.opts;return{hideUploadButton:n,hideRetryButton:s,hidePauseResumeButton:a,hideCancelButton:i,showProgressDetails:l,hideAfterFinish:o,locale:c,doneButtonHandler:d}},wP=function(){const{thumbnailWidth:n,thumbnailHeight:s,thumbnailType:a,waitForThumbnailsBeforeUpload:i}=this.opts;return{thumbnailWidth:n,thumbnailHeight:s,thumbnailType:a,waitForThumbnailsBeforeUpload:i,lazy:!i}},hY=function(){return{}},NP=function(){return`${this.id}:StatusBar`},kP=function(){return`${this.id}:ThumbnailGenerator`},fY=function(){return`${this.id}:Informer`},ye(kS,"VERSION",RBe.version),kS);const k7e=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],S7e=/^(aria-|data-)/,mY=e=>Object.fromEntries(Object.entries(e).filter(([t])=>S7e.test(t)||k7e.includes(t)));function C7e(e,t){const n=mY(e);return Object.keys(e).some(s=>!Object.hasOwn(n,s)&&e[s]!==t[s])}class pY extends y.Component{constructor(){super(...arguments);ye(this,"container");ye(this,"plugin")}componentDidMount(){this.installPlugin()}componentDidUpdate(n){const{uppy:s,open:a,onRequestClose:i}=this.props;if(n.uppy!==s)this.uninstallPlugin(n),this.installPlugin();else if(C7e(this.props,n)){const{uppy:l,...o}={...this.props,inline:!1,onRequestCloseModal:i};this.plugin.setOptions(o)}n.open&&!a?this.plugin.closeModal():!n.open&&a&&this.plugin.openModal()}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{target:n=this.container,open:s,onRequestClose:a,uppy:i,...l}=this.props,o={id:"DashboardModal",...l,inline:!1,target:n,open:s,onRequestCloseModal:a};i.use(N7e,o),this.plugin=i.getPlugin(o.id),s&&this.plugin.openModal()}uninstallPlugin(n=this.props){const{uppy:s}=n;s.removePlugin(this.plugin)}render(){return y.createElement("div",{className:"uppy-Container",ref:n=>{this.container=n},...mY(this.props)})}}ye(pY,"defaultProps",{open:void 0,onRequestClose:void 0});y.createContext({uppy:void 0,status:"init",progress:0});var _7e={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py=y;function P7e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var A7e=typeof Object.is=="function"?Object.is:P7e,T7e=py.useSyncExternalStore,E7e=py.useRef,O7e=py.useEffect,R7e=py.useMemo,D7e=py.useDebugValue;_7e.useSyncExternalStoreWithSelector=function(e,t,n,s,a){var i=E7e(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=R7e(function(){function c(m){if(!d){if(d=!0,u=m,m=s(m),a!==void 0&&l.hasValue){var v=l.value;if(a(v,m))return h=v}return h=m}if(v=h,A7e(u,m))return v;var x=s(m);return a!==void 0&&a(v,x)?v:(u=m,h=x)}var d=!1,u,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,a]);var o=T7e(e,i[0],i[1]);return O7e(function(){l.hasValue=!0,l.value=o},[o]),D7e(o),o};function xY(e,t){return Object.hasOwn(e,t)}class M7e extends Error{constructor(n,s){super(n);ye(this,"isNetworkError");ye(this,"cause");this.cause=s==null?void 0:s.cause,this.cause&&xY(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}}class $7e extends Error{constructor(n,s=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.");ye(this,"cause");ye(this,"isNetworkError");ye(this,"request");this.cause=n,this.isNetworkError=!0,this.request=s}}function I7e(...e){return fetch(...e).catch(t=>{throw t.name==="AbortError"?t:new $7e(t)})}function F7e(e){var a;const n=(a=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?([^\n]+)/i.exec(e))==null?void 0:a[1];return`${/^http:\/\//i.test(e)?"ws":"wss"}://${n}`}class L7e extends Error{constructor(){super(...arguments);ye(this,"name","UserFacingApiError")}}var gY={};function Ka(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var U7e=Ka;Ka.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Ka.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Ka.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var s=this;return this._timer=setTimeout(function(){s._attempts++,s._operationTimeoutCb&&(s._timeout=setTimeout(function(){s._operationTimeoutCb(s._attempts)},s._operationTimeout),s._options.unref&&s._timeout.unref()),s._fn(s._attempts)},n),this._options.unref&&this._timer.unref(),!0};Ka.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Ka.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)};Ka.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)};Ka.prototype.start=Ka.prototype.try;Ka.prototype.errors=function(){return this._errors};Ka.prototype.attempts=function(){return this._attempts};Ka.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,n=0,s=0;s<this._errors.length;s++){var a=this._errors[s],i=a.message,l=(e[i]||0)+1;e[i]=l,l>=n&&(t=a,n=l)}return t};(function(e){var t=U7e;e.operation=function(n){var s=e.timeouts(n);return new t(s,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},e.timeouts=function(n){if(n instanceof Array)return[].concat(n);var s={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var a in n)s[a]=n[a];if(s.minTimeout>s.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],l=0;l<s.retries;l++)i.push(this.createTimeout(l,s));return n&&n.forever&&!i.length&&i.push(this.createTimeout(l,s)),i.sort(function(o,c){return o-c}),i},e.createTimeout=function(n,s){var a=s.randomize?Math.random()+1:1,i=Math.round(a*Math.max(s.minTimeout,1)*Math.pow(s.factor,n));return i=Math.min(i,s.maxTimeout),i},e.wrap=function(n,s,a){if(s instanceof Array&&(a=s,s=null),!a){a=[];for(var i in n)typeof n[i]=="function"&&a.push(i)}for(var l=0;l<a.length;l++){var o=a[l],c=n[o];n[o]=(function(u){var h=e.operation(s),f=Array.prototype.slice.call(arguments,1),m=f.pop();f.push(function(v){h.retry(v)||(v&&(arguments[0]=h.mainError()),m.apply(this,arguments))}),h.attempt(function(){u.apply(n,f)})}).bind(n,c),n[o].options=s}}})(gY);var B7e=gY;const z7e=Qt(B7e),V7e=Object.prototype.toString,q7e=e=>V7e.call(e)==="[object Error]",W7e=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function H7e(e){return e&&q7e(e)&&e.name==="TypeError"&&typeof e.message=="string"?e.message==="Load failed"?e.stack===void 0:W7e.has(e.message):!1}class SP extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}}const gF=(e,t,n)=>{const s=n.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=s,e};async function vF(e,t){return new Promise((n,s)=>{t={...t},t.onFailedAttempt??(t.onFailedAttempt=()=>{}),t.shouldRetry??(t.shouldRetry=()=>!0),t.retries??(t.retries=10);const a=z7e.operation(t),i=()=>{var o;a.stop(),s((o=t.signal)==null?void 0:o.reason)};t.signal&&!t.signal.aborted&&t.signal.addEventListener("abort",i,{once:!0});const l=()=>{var o;(o=t.signal)==null||o.removeEventListener("abort",i),a.stop()};a.attempt(async o=>{try{const c=await e(o);l(),n(c)}catch(c){try{if(!(c instanceof Error))throw new TypeError(`Non-error was thrown: "${c}". You should only throw errors.`);if(c instanceof SP)throw c.originalError;if(c instanceof TypeError&&!H7e(c))throw c;if(gF(c,o,t),await t.shouldRetry(c)||(a.stop(),s(c)),await t.onFailedAttempt(c),!a.retry(c))throw a.mainError()}catch(d){gF(d,o,t),l(),s(d)}}})})}const K7e="@uppy/companion-client",G7e="Client library for communication with Companion. Intended for use in Uppy plugins.",Y7e="4.5.2",X7e="MIT",Z7e="lib/index.js",Q7e="module",J7e={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},eze=["file uploader","uppy","uppy-plugin","companion","provider"],tze="https://uppy.io",rze={url:"https://github.com/transloadit/uppy/issues"},nze={type:"git",url:"git+https://github.com/transloadit/uppy.git"},sze=["src","lib","dist","CHANGELOG.md"],aze={"@uppy/utils":"^6.2.2","namespace-emitter":"^2.0.1","p-retry":"^6.1.0"},ize={jsdom:"^26.1.0",typescript:"^5.8.3",vitest:"^3.2.4"},lze={"@uppy/core":"^4.5.2"},oze={name:K7e,description:G7e,version:Y7e,license:X7e,main:Z7e,type:Q7e,scripts:J7e,keywords:eze,homepage:tze,bugs:rze,repository:nze,files:sze,dependencies:aze,devDependencies:ize,peerDependencies:lze};class cze extends Error{constructor(){super("Authorization required");ye(this,"isAuthError");this.name="AuthError",this.isAuthError=!0}}function dze(e){return e.replace(/\/$/,"")}const yF=10,uze=5*60*1e3,hze=401;class fze extends Error{constructor({statusCode:n,message:s}){super(s);ye(this,"statusCode");this.name="HttpError",this.statusCode=n}}async function mze(e){if(e.status===hze)throw new cze;if(e.ok)return e.json();let t=`Failed request with status: ${e.status}. ${e.statusText}`,n;try{n=await e.json(),n.message&&(t=`${t} message: ${n.message}`),n.requestId&&(t=`${t} request-Id: ${n.requestId}`)}catch(s){throw new Error(t,{cause:s})}throw e.status>=400&&e.status<=499&&n.message?new L7e(n.message):new fze({statusCode:e.status,message:t})}function pze(e,t,n){const{progress:s,bytesUploaded:a,bytesTotal:i}=t;s&&(e.uppy.log(`Upload progress: ${s}`),e.uppy.emit("upload-progress",n,{uploadStarted:n.progress.uploadStarted??0,bytesUploaded:a,bytesTotal:i}))}var Gd,Gc,CP,gw,_P;class vY{constructor(t,n){be(this,Gc);be(this,Gd);ye(this,"uppy");ye(this,"opts");be(this,gw,async({file:t,postBody:n,signal:s})=>{var i;if(((i=t.remote)==null?void 0:i.url)==null)throw new Error("Cannot connect to an undefined URL");return(await this.post(t.remote.url,{...t.remote.body,...n},{signal:s})).token});this.uppy=t,this.opts=n,this.onReceiveResponse=this.onReceiveResponse.bind(this),je(this,Gd,n.companionHeaders)}setCompanionHeaders(t){je(this,Gd,t)}[Symbol.for("uppy test: getCompanionHeaders")](){return B(this,Gd)}get hostname(){const{companion:t}=this.uppy.getState(),n=this.opts.companionUrl;return dze(t!=null&&t[n]?t[n]:n)}async headers(t=!1){return{...{Accept:"application/json",...t?void 0:{"Content-Type":"application/json"}},...B(this,Gd)}}onReceiveResponse(t){const{headers:n}=t,a=this.uppy.getState().companion||{},i=this.opts.companionUrl;n.has("i-am")&&n.get("i-am")!==a[i]&&this.uppy.setState({companion:{...a,[i]:n.get("i-am")}})}async request({path:t,method:n="GET",data:s,skipPostResponse:a,signal:i}){try{const l=await this.headers(!s),o=await I7e(Ce(this,Gc,CP).call(this,t),{method:n,signal:i,headers:l,credentials:this.opts.companionCookiesRule||"same-origin",body:s?JSON.stringify(s):null});return a||this.onReceiveResponse(o),await mze(o)}catch(l){throw l.isAuthError||l.name==="UserFacingApiError"||l.name==="AbortError"?l:new M7e(`Could not ${n} ${Ce(this,Gc,CP).call(this,t)}`,{cause:l})}}async get(t,n){return this.request({...n,path:t})}async post(t,n,s){return this.request({...s,path:t,method:"POST",data:n})}async delete(t,n,s){return this.request({...s,path:t,method:"DELETE",data:n})}async uploadRemoteFile(t,n,s){try{const{signal:a,getQueue:i}=s||{};return await vF(async()=>{var d;const l=(d=this.uppy.getFile(t.id))==null?void 0:d.serverToken;if(l!=null)return this.uppy.log(`Connecting to exiting websocket ${l}`),Ce(this,Gc,_P).call(this,{file:t,queue:i(),signal:a});const c=await i().wrapPromiseFunction(async(...u)=>{try{return await B(this,gw).call(this,...u)}catch(h){if(h.isAuthError)throw new SP(h);if(h.cause==null)throw h;const f=h.cause,m=()=>[408,409,429,418,423].includes(f.statusCode)||f.statusCode>=500&&f.statusCode<=599&&![501,505].includes(f.statusCode);throw f.name==="HttpError"&&!m()?new SP(f):f}},{priority:-1})({file:t,postBody:n,signal:a}).abortOn(a);if(this.uppy.getFile(t.id))return this.uppy.setFileState(t.id,{serverToken:c}),Ce(this,Gc,_P).call(this,{file:this.uppy.getFile(t.id),queue:i(),signal:a})},{retries:yF,signal:a,onFailedAttempt:l=>this.uppy.log(`Retrying upload due to: ${l.message}`,"warning")})}catch(a){if(a.name==="AbortError")return;throw this.uppy.emit("upload-error",t,a),a}}}Gd=new WeakMap,Gc=new WeakSet,CP=function(t){return/^(https?:|)\/\//.test(t)?t:`${this.hostname}/${t}`},gw=new WeakMap,_P=async function({file:t,queue:n,signal:s}){let a;const{capabilities:i}=this.uppy.getState();try{return await new Promise((l,o)=>{const c=t.serverToken,d=F7e(t.remote.companionUrl);let u,h,f,{isPaused:m}=t;const v=(C,_)=>{if(u==null||u.readyState!==u.OPEN){this.uppy.log(`Cannot send "${C}" to socket ${t.id} because the socket state was ${String(u==null?void 0:u.readyState)}`,"warning");return}u.send(JSON.stringify({action:C,payload:_??{}}))};function x(){i.resumableUploads&&v(m?"pause":"resume")}const w=async()=>{h&&h.abort(),h=new AbortController;const C=P=>{var D;this.uppy.setFileState(t.id,{serverToken:null}),(D=h==null?void 0:h.abort)==null||D.call(h),o(P)};function _(){clearTimeout(f),!m&&(f=setTimeout(()=>C(new Error("Timeout waiting for message from Companion socket")),uze))}try{await n.wrapPromiseFunction(async()=>{await vF(async()=>new Promise((D,E)=>{u=new WebSocket(`${d}/api/${c}`),_(),u.addEventListener("close",()=>{u=void 0,E(new Error("Socket closed unexpectedly"))}),u.addEventListener("error",A=>{this.uppy.log(`Companion socket error ${JSON.stringify(A)}, closing socket`,"warning"),u==null||u.close()}),u.addEventListener("open",()=>{x()}),u.addEventListener("message",A=>{var T,O,z;_();try{const{action:F,payload:R}=JSON.parse(A.data);switch(F){case"progress":{pze(this,R,this.uppy.getFile(t.id));break}case"success":{const I=(T=R.response)==null?void 0:T.responseText;this.uppy.emit("upload-success",this.uppy.getFile(t.id),{uploadURL:R.url,status:((O=R.response)==null?void 0:O.status)??200,body:I?JSON.parse(I):void 0}),(z=h==null?void 0:h.abort)==null||z.call(h),l();break}case"error":{const{message:I}=R.error;throw Object.assign(new Error(I),{cause:R.error})}default:this.uppy.log(`Companion socket unknown action ${F}`,"warning")}}catch(F){C(F)}});const $=()=>{this.uppy.log(`Closing socket ${t.id}`),clearTimeout(f),u&&u.close(),u=void 0};h.signal.addEventListener("abort",()=>{$()})}),{retries:yF,signal:h.signal,onFailedAttempt:()=>{h.signal.aborted||this.uppy.log(`Retrying websocket ${t.id}`)}})})().abortOn(h.signal)}catch(P){if(h.signal.aborted)return;C(P)}},j=C=>{i.resumableUploads&&(m=C,u&&x())},g=C=>{var _;i.individualCancellation&&C.id===t.id&&(v("cancel"),(_=h==null?void 0:h.abort)==null||_.call(h),this.uppy.log(`upload ${t.id} was removed`),l())},b=()=>{var C;v("cancel"),(C=h==null?void 0:h.abort)==null||C.call(h),this.uppy.log(`upload ${t.id} was canceled`),l()},p=(C,_)=>{(C==null?void 0:C.id)===t.id&&j(_)},N=()=>j(!0),k=()=>j(!1);this.uppy.on("file-removed",g),this.uppy.on("cancel-all",b),this.uppy.on("upload-pause",p),this.uppy.on("pause-all",N),this.uppy.on("resume-all",k),a=()=>{this.uppy.off("file-removed",g),this.uppy.off("cancel-all",b),this.uppy.off("upload-pause",p),this.uppy.off("pause-all",N),this.uppy.off("resume-all",k)},s.addEventListener("abort",()=>{h==null||h.abort()}),w()})}finally{a==null||a()}},ye(vY,"VERSION",oze.version);var sl,fv;class xze{constructor(t){be(this,sl);be(this,fv,[]);je(this,sl,t)}on(t,n){return B(this,fv).push([t,n]),B(this,sl).on(t,n)}remove(){for(const[t,n]of B(this,fv).splice(0))B(this,sl).off(t,n)}onFilePause(t,n){this.on("upload-pause",(s,a)=>{t===(s==null?void 0:s.id)&&n(a)})}onFileRemove(t,n){this.on("file-removed",s=>{t===s.id&&n(s.id)})}onPause(t,n){this.on("upload-pause",(s,a)=>{t===(s==null?void 0:s.id)&&n(a)})}onRetry(t,n){this.on("upload-retry",s=>{t===(s==null?void 0:s.id)&&n()})}onRetryAll(t,n){this.on("retry-all",()=>{B(this,sl).getFile(t)&&n()})}onPauseAll(t,n){this.on("pause-all",()=>{B(this,sl).getFile(t)&&n()})}onCancelAll(t,n){this.on("cancel-all",(...s)=>{B(this,sl).getFile(t)&&n(...s)})}onResumeAll(t,n){this.on("resume-all",()=>{B(this,sl).getFile(t)&&n()})}}sl=new WeakMap,fv=new WeakMap;const{AbortController:yS}=globalThis,yY=(e="Aborted",t)=>{const n=new DOMException(e,"AbortError");return t!=null&&xY(t,"cause")&&Object.defineProperty(n,"cause",{__proto__:null,configurable:!0,writable:!0,value:t.cause}),n};function gze(e){const t=n=>"error"in n&&!!n.error;return e.filter(n=>!t(n))}function vze(e){return e.filter(t=>{var n;return!((n=t.progress)!=null&&n.uploadStarted)||!t.isRestored})}function bF(e,t){return e===!0?Object.keys(t):Array.isArray(e)?e:[]}function yze(e){return new Error("Cancelled",{cause:e})}function jF(e){var t;if(e!=null){const n=()=>this.abort(e.reason);e.addEventListener("abort",n,{once:!0});const s=()=>{e.removeEventListener("abort",n)};(t=this.then)==null||t.call(this,s,s)}return this}var eo,al,to,ff,il,mf,Yd,is,PP,Xp,bY,jY,wY,vw,pf;class bze{constructor(t){be(this,is);be(this,eo,0);be(this,al,[]);be(this,to,!1);be(this,ff);be(this,il,1);be(this,mf);be(this,Yd);ye(this,"limit");be(this,vw,()=>this.resume());be(this,pf,()=>{if(B(this,to)){je(this,Yd,setTimeout(B(this,pf),0));return}je(this,il,this.limit),this.limit=Math.ceil((B(this,mf)+B(this,il))/2);for(let t=B(this,il);t<=this.limit;t++)Ce(this,is,Xp).call(this);B(this,mf)-B(this,il)>3?je(this,Yd,setTimeout(B(this,pf),2e3)):je(this,il,Math.floor(B(this,il)/2))});typeof t!="number"||t===0?this.limit=1/0:this.limit=t}run(t,n){return!B(this,to)&&B(this,eo)<this.limit?Ce(this,is,PP).call(this,t):Ce(this,is,jY).call(this,t,n)}wrapSyncFunction(t,n){return(...s)=>{const a=this.run(()=>(t(...s),queueMicrotask(()=>a.done()),()=>{}),n);return{abortOn:jF,abort(){a.abort()}}}}wrapPromiseFunction(t,n){return(...s)=>{let a;const i=new Promise((l,o)=>{a=this.run(()=>{let c,d;try{d=Promise.resolve(t(...s))}catch(u){d=Promise.reject(u)}return d.then(u=>{c?o(c):(a.done(),l(u))},u=>{c?o(c):(a.done(),o(u))}),u=>{c=yze(u)}},n)});return i.abort=l=>{a.abort(l)},i.abortOn=jF,i}}resume(){je(this,to,!1),clearTimeout(B(this,ff));for(let t=0;t<this.limit;t++)Ce(this,is,Xp).call(this)}pause(t=null){je(this,to,!0),clearTimeout(B(this,ff)),t!=null&&je(this,ff,setTimeout(B(this,vw),t))}rateLimit(t){clearTimeout(B(this,Yd)),this.pause(t),this.limit>1&&Number.isFinite(this.limit)&&(je(this,mf,this.limit-1),this.limit=B(this,il),je(this,Yd,setTimeout(B(this,pf),t)))}get isPaused(){return B(this,to)}}eo=new WeakMap,al=new WeakMap,to=new WeakMap,ff=new WeakMap,il=new WeakMap,mf=new WeakMap,Yd=new WeakMap,is=new WeakSet,PP=function(t){je(this,eo,B(this,eo)+1);let n=!1,s;try{s=t()}catch(a){throw je(this,eo,B(this,eo)-1),a}return{abort:a=>{n||(n=!0,je(this,eo,B(this,eo)-1),s==null||s(a),Ce(this,is,Xp).call(this))},done:()=>{n||(n=!0,je(this,eo,B(this,eo)-1),Ce(this,is,Xp).call(this))}}},Xp=function(){queueMicrotask(()=>Ce(this,is,bY).call(this))},bY=function(){if(B(this,to)||B(this,eo)>=this.limit||B(this,al).length===0)return;const t=B(this,al).shift();if(t==null)throw new Error("Invariant violation: next is null");const n=Ce(this,is,PP).call(this,t.fn);t.abort=n.abort,t.done=n.done},jY=function(t,n){const s={fn:t,priority:(n==null?void 0:n.priority)||0,abort:()=>{Ce(this,is,wY).call(this,s)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},a=B(this,al).findIndex(i=>s.priority>i.priority);return a===-1?B(this,al).push(s):B(this,al).splice(a,0,s),s},wY=function(t){const n=B(this,al).indexOf(t);n!==-1&&B(this,al).splice(n,1)},vw=new WeakMap,pf=new WeakMap;const jze="@uppy/aws-s3",wze="Upload to Amazon S3 with Uppy",Nze="4.3.2",kze="MIT",Sze="lib/index.js",Cze="module",_ze={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},Pze=["file uploader","aws s3","amazon s3","s3","uppy","uppy-plugin","multipart"],Aze="https://uppy.io",Tze={url:"https://github.com/transloadit/uppy/issues"},Eze={type:"git",url:"git+https://github.com/transloadit/uppy.git"},Oze=["src","lib","dist","CHANGELOG.md"],Rze={"@uppy/companion-client":"^4.5.2","@uppy/utils":"^6.2.2"},Dze={"@aws-sdk/client-s3":"^3.362.0","@aws-sdk/s3-request-presigner":"^3.362.0","@uppy/core":"^4.5.2",jsdom:"^26.1.0",nock:"^13.1.0",typescript:"^5.8.3",vitest:"^3.2.4","whatwg-fetch":"3.6.2"},Mze={"@uppy/core":"^4.5.2"},$ze={name:jze,description:wze,version:Nze,license:kze,main:Sze,type:Cze,scripts:_ze,keywords:Pze,homepage:Aze,bugs:Tze,repository:Eze,files:Oze,dependencies:Rze,devDependencies:Dze,peerDependencies:Mze};function Ize({method:e="PUT",CanonicalUri:t="/",CanonicalQueryString:n="",SignedHeaders:s,HashedPayload:a}){const i=Object.keys(s).map(l=>l.toLowerCase()).sort();return[e,t,n,...i.map(l=>`${l}:${s[l]}`),"",i.join(";"),a].join(`
`)}const EE=new TextEncoder,OE={name:"HMAC",hash:"SHA-256"};async function Fze(e){const{subtle:t}=globalThis.crypto;return t.digest(OE.hash,EE.encode(e))}async function Lze(e){const{subtle:t}=globalThis.crypto;return t.importKey("raw",typeof e=="string"?EE.encode(e):e,OE,!1,["sign"])}function wF(e){const t=new Uint8Array(e);let n="";for(let s=0;s<t.length;s++)n+=t[s].toString(16).padStart(2,"0");return n}async function Dp(e,t){const{subtle:n}=globalThis.crypto;return n.sign(OE,await Lze(e),EE.encode(t))}async function Uze({accountKey:e,accountSecret:t,sessionToken:n,bucketName:s,Key:a,Region:i,expires:l,uploadId:o,partNumber:c}){const d="s3",u=`${d}.${i}.amazonaws.com`,h=`/${s}/${encodeURI(a).replace(/[;?:@&=+$,#!'()*]/g,P=>`%${P.charCodeAt(0).toString(16).toUpperCase()}`)}`,f="UNSIGNED-PAYLOAD",m=new Date().toISOString().replace(/[-:]|\.\d+/g,""),v=m.slice(0,8),x=`${v}/${i}/${d}/aws4_request`,w=new URL(`https://${u}${h}`);w.searchParams.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),w.searchParams.set("X-Amz-Content-Sha256",f),w.searchParams.set("X-Amz-Credential",`${e}/${x}`),w.searchParams.set("X-Amz-Date",m),w.searchParams.set("X-Amz-Expires",l),w.searchParams.set("X-Amz-Security-Token",n),w.searchParams.set("X-Amz-SignedHeaders","host"),c&&w.searchParams.set("partNumber",c),o&&w.searchParams.set("uploadId",o),w.searchParams.set("x-id",c&&o?"UploadPart":"PutObject");const j=Ize({CanonicalUri:h,CanonicalQueryString:w.search.slice(1),SignedHeaders:{host:u},HashedPayload:f}),g=wF(await Fze(j)),b=["AWS4-HMAC-SHA256",m,x,g].join(`
`),p=await Dp(`AWS4${t}`,v),N=await Dp(p,i),k=await Dp(N,d),C=await Dp(k,"aws4_request"),_=wF(await Dp(C,b));return w.searchParams.set("X-Amz-Signature",_),w}const Bze=1024*1024,NF={getChunkSize(e){return Math.ceil(e.size/1e4)},onProgress(){},onPartComplete(){},onSuccess(){},onError(e){throw e}};function zze(e){if(typeof e=="string")return parseInt(e,10);if(typeof e=="number")return e;throw new TypeError("Expected a number")}const K0=Symbol("pausing upload, not an actual error");var ai,Ta,ll,ro,no,mv,pv,xf,Xd,gf,xv,vf,gv,qi,NY,kY,AP,vv,yv,SY;class Vze{constructor(t,n){be(this,qi);ye(this,"options");be(this,ai,new yS);be(this,Ta,[]);be(this,ll,[]);be(this,ro);be(this,no);be(this,mv,!1);be(this,pv);be(this,xf);be(this,Xd);be(this,gf);be(this,xv,t=>(t==null?void 0:t.cause)===K0?null:B(this,pv).call(this,t));be(this,vf,1e4);be(this,gv,5*Bze);be(this,vv,t=>n=>{if(!n.lengthComputable)return;B(this,ll)[t].uploaded=zze(n.loaded);const s=B(this,ll).reduce((a,i)=>a+i.uploaded,0);this.options.onProgress(s,B(this,ro).size)});be(this,yv,t=>n=>{B(this,Ta)[t]=null,B(this,ll)[t].etag=n,B(this,ll)[t].done=!0;const s={PartNumber:t+1,ETag:n};this.options.onPartComplete(s)});var s;this.options={...NF,...n},(s=this.options).getChunkSize??(s.getChunkSize=NF.getChunkSize),je(this,ro,t),je(this,no,n.file),je(this,xf,this.options.onSuccess),je(this,pv,this.options.onError),je(this,Xd,this.options.shouldUseMultipart),je(this,gf,n.uploadId&&n.key),Ce(this,qi,NY).call(this)}start(){B(this,mv)?(B(this,ai).signal.aborted||B(this,ai).abort(K0),je(this,ai,new yS),Ce(this,qi,AP).call(this)):B(this,gf)?(this.options.companionComm.restoreUploadFile(B(this,no),{uploadId:this.options.uploadId,key:this.options.key}),Ce(this,qi,AP).call(this)):Ce(this,qi,kY).call(this)}pause(){B(this,ai).abort(K0),je(this,ai,new yS)}abort(t){t!=null&&t.really?Ce(this,qi,SY).call(this):this.pause()}[Symbol.for("uppy test: getChunkState")](){return B(this,ll)}}ai=new WeakMap,Ta=new WeakMap,ll=new WeakMap,ro=new WeakMap,no=new WeakMap,mv=new WeakMap,pv=new WeakMap,xf=new WeakMap,Xd=new WeakMap,gf=new WeakMap,xv=new WeakMap,vf=new WeakMap,gv=new WeakMap,qi=new WeakSet,NY=function(){const t=B(this,ro).size,n=typeof B(this,Xd)=="function"?B(this,Xd).call(this,B(this,no)):!!B(this,Xd);if(n&&t>B(this,gv)){let s=Math.max(this.options.getChunkSize(B(this,ro)),B(this,gv)),a=Math.floor(t/s);a>B(this,vf)&&(a=B(this,vf),s=t/B(this,vf)),je(this,Ta,Array(a));for(let i=0,l=0;i<t;i+=s,l++){const o=Math.min(t,i+s),c=()=>{const d=i;return B(this,ro).slice(d,o)};if(B(this,Ta)[l]={getData:c,onProgress:B(this,vv).call(this,l),onComplete:B(this,yv).call(this,l),shouldUseMultipart:n},B(this,gf)){const d=i+s>t?t-i:s;B(this,Ta)[l].setAsUploaded=()=>{B(this,Ta)[l]=null,B(this,ll)[l].uploaded=d}}}}else je(this,Ta,[{getData:()=>B(this,ro),onProgress:B(this,vv).call(this,0),onComplete:B(this,yv).call(this,0),shouldUseMultipart:n}]);je(this,ll,B(this,Ta).map(()=>({uploaded:0})))},kY=function(){this.options.companionComm.uploadFile(B(this,no),B(this,Ta),B(this,ai).signal).then(B(this,xf),B(this,xv)),je(this,mv,!0)},AP=function(){this.options.companionComm.resumeUploadFile(B(this,no),B(this,Ta),B(this,ai).signal).then(B(this,xf),B(this,xv))},vv=new WeakMap,yv=new WeakMap,SY=function(){B(this,ai).abort(),this.options.companionComm.abortFileUpload(B(this,no)).catch(t=>this.options.log(t))};function ns(e){if(e!=null&&e.aborted)throw yY("The operation was aborted",{cause:e.reason})}function qze(e){const t=new URL(e);return t.search="",t.hash="",t.href}var bv,ii,jv,wv,Nv,kv,yf,bf,jf,wf,Zd,Nf,li,Ru,CY,TP;class Wze{constructor(t,n,s,a){be(this,Ru);be(this,bv);be(this,ii,new WeakMap);be(this,jv);be(this,wv);be(this,Nv);be(this,kv);be(this,yf);be(this,bf);be(this,jf);be(this,wf);be(this,Zd);be(this,Nf);be(this,li);je(this,bf,t),je(this,Zd,s),je(this,li,a),this.setOptions(n)}setOptions(t){const n=B(this,bf);"abortMultipartUpload"in t&&je(this,bv,n.wrapPromiseFunction(t.abortMultipartUpload,{priority:1})),"createMultipartUpload"in t&&je(this,jv,n.wrapPromiseFunction(t.createMultipartUpload,{priority:-1})),"signPart"in t&&je(this,wv,n.wrapPromiseFunction(t.signPart)),"listParts"in t&&je(this,kv,n.wrapPromiseFunction(t.listParts)),"completeMultipartUpload"in t&&je(this,wf,n.wrapPromiseFunction(t.completeMultipartUpload,{priority:1})),"retryDelays"in t&&je(this,jf,t.retryDelays??[]),"uploadPartBytes"in t&&je(this,Nf,n.wrapPromiseFunction(t.uploadPartBytes,{priority:1/0})),"getUploadParameters"in t&&je(this,Nv,n.wrapPromiseFunction(t.getUploadParameters))}async getUploadId(t,n){let s;for(;s=B(this,ii).get(t.data),s!=null;)try{return await s}catch{}const a=B(this,jv).call(this,B(this,li).call(this,t),n),i=()=>{a.abort(n.reason),B(this,ii).delete(t.data)};return n.addEventListener("abort",i,{once:!0}),B(this,ii).set(t.data,a),a.then(async l=>{n.removeEventListener("abort",i),B(this,Zd).call(this,t,l),B(this,ii).set(t.data,l)},()=>{n.removeEventListener("abort",i),B(this,ii).delete(t.data)}),a}async abortFileUpload(t){const n=B(this,ii).get(t.data);if(n==null)return;B(this,ii).delete(t.data),B(this,Zd).call(this,t,Object.create(null));let s;try{s=await n}catch{return}await B(this,bv).call(this,B(this,li).call(this,t),s)}async uploadFile(t,n,s){if(ns(s),n.length===1&&!n[0].shouldUseMultipart)return Ce(this,Ru,TP).call(this,t,n[0],s);const{uploadId:a,key:i}=await this.getUploadId(t,s);ns(s);try{const l=await Promise.all(n.map((o,c)=>this.uploadChunk(t,c+1,o,s)));return ns(s),await B(this,wf).call(this,B(this,li).call(this,t),{key:i,uploadId:a,parts:l,signal:s},s).abortOn(s)}catch(l){throw(l==null?void 0:l.cause)!==K0&&(l==null?void 0:l.name)!=="AbortError"&&this.abortFileUpload(t),l}}restoreUploadFile(t,n){B(this,ii).set(t.data,n)}async resumeUploadFile(t,n,s){if(ns(s),n.length===1&&n[0]!=null&&!n[0].shouldUseMultipart)return Ce(this,Ru,TP).call(this,t,n[0],s);const{uploadId:a,key:i}=await this.getUploadId(t,s);ns(s);const l=await B(this,kv).call(this,B(this,li).call(this,t),{uploadId:a,key:i,signal:s},s).abortOn(s);ns(s);const o=await Promise.all(n.map((c,d)=>{var f;const u=d+1,h=l.find(({PartNumber:m})=>m===u);return h==null?this.uploadChunk(t,u,c,s):((f=c==null?void 0:c.setAsUploaded)==null||f.call(c),{PartNumber:u,ETag:h.ETag})}));return ns(s),B(this,wf).call(this,B(this,li).call(this,t),{key:i,uploadId:a,parts:o,signal:s},s).abortOn(s)}async uploadChunk(t,n,s,a){ns(a);const{uploadId:i,key:l}=await this.getUploadId(t,a),o=B(this,jf).values(),c=B(this,jf).values(),d=()=>{const u=o.next();return u==null||u.done?null:u.value};for(;;){ns(a);const u=s.getData(),{onProgress:h,onComplete:f}=s;let m;try{m=await B(this,wv).call(this,B(this,li).call(this,t),{uploadId:i,key:l,partNumber:n,body:u,signal:a}).abortOn(a)}catch(v){const x=d();if(x==null||a.aborted)throw v;await new Promise(w=>setTimeout(w,x));continue}ns(a);try{return{PartNumber:n,...await B(this,Nf).call(this,{signature:m,body:u,size:u.size,onProgress:h,onComplete:f,signal:a}).abortOn(a)}}catch(v){if(!await Ce(this,Ru,CY).call(this,v,c))throw v}}}}bv=new WeakMap,ii=new WeakMap,jv=new WeakMap,wv=new WeakMap,Nv=new WeakMap,kv=new WeakMap,yf=new WeakMap,bf=new WeakMap,jf=new WeakMap,wf=new WeakMap,Zd=new WeakMap,Nf=new WeakMap,li=new WeakMap,Ru=new WeakSet,CY=async function(t,n){var i;const s=B(this,bf),a=(i=t==null?void 0:t.source)==null?void 0:i.status;if(a==null)return!1;if(a===403&&t.message==="Request has expired"){if(!s.isPaused){if(s.limit===1||B(this,yf)==null){const l=n.next();if(l==null||l.done)return!1;je(this,yf,l.value)}s.rateLimit(0),await new Promise(l=>setTimeout(l,B(this,yf)))}}else if(a===429){if(!s.isPaused){const l=n.next();if(l==null||l.done)return!1;s.rateLimit(l.value)}}else{if(a>400&&a<500&&a!==409)return!1;if(typeof navigator<"u"&&navigator.onLine===!1)s.isPaused||(s.pause(),window.addEventListener("online",()=>{s.resume()},{once:!0}));else{const l=n.next();if(l==null||l.done)return!1;await new Promise(o=>setTimeout(o,l.value))}}return!0},TP=async function(t,n,s){const{method:a="POST",url:i,fields:l,headers:o}=await B(this,Nv).call(this,B(this,li).call(this,t),{signal:s}).abortOn(s);let c;const d=n.getData();if(a.toUpperCase()==="POST"){const v=new FormData;Object.entries(l).forEach(([x,w])=>v.set(x,w)),v.set("file",d),c=v}else c=d;const{onProgress:u,onComplete:h}=n,f=await B(this,Nf).call(this,{signature:{url:i,headers:o,method:a},body:c,size:d.size,onProgress:u,onComplete:h,signal:s}).abortOn(s),m=l==null?void 0:l.key;return B(this,Zd).call(this,t,{key:m}),{...f,location:f.location??qze(i),bucket:l==null?void 0:l.bucket,key:m}};function ih(e){if(e!=null&&e.error){const t=new Error(e.message);throw Object.assign(t,e.error),t}return e}function kF(e){const t=e.Expiration;if(t){const n=Math.floor((new Date(t)-Date.now())/1e3);if(n>9)return n}}function SF({meta:e,allowedMetaFields:t,querify:n=!1}){const s=t??Object.keys(e);return e?Object.fromEntries(s.filter(a=>e[a]!=null).map(a=>{const i=n?`metadata[${a}]`:a,l=String(e[a]);return[i,l]})):{}}const Hze={allowedMetaFields:!0,limit:6,getTemporarySecurityCredentials:!1,shouldUseMultipart:e=>(e.size||0)>100*1024*1024,retryDelays:[0,1e3,3e3,5e3]};var kf,vs,kn,OP,Xo,oi,_Y,yw,Sf,PY,AY,Sv,Cf,Qd,Cv;const bw=class bw extends dG{constructor(n,s){super(n,{...Hze,uploadPartBytes:bw.uploadPartBytes,createMultipartUpload:null,listParts:null,abortMultipartUpload:null,completeMultipartUpload:null,signPart:null,getUploadParameters:null,...s});be(this,kn);be(this,kf);be(this,vs);ye(this,"requests");ye(this,"uploaderEvents");ye(this,"uploaders");be(this,oi);be(this,yw,(n,{key:s,uploadId:a})=>{const i=this.uppy.getFile(n.id);i!=null&&this.uppy.setFileState(n.id,{s3Multipart:{...i.s3Multipart,key:s,uploadId:a}})});be(this,Sf,n=>this.uppy.getFile(n.id)||n);be(this,Sv,async n=>{if(n.length===0)return;const s=this.uppy.getFilesByIds(n),a=gze(s),i=vze(a);this.uppy.emit("upload-start",i);const l=a.map(c=>{if(c.isRemote){const d=()=>this.requests;B(this,Qd).call(this,!1);const u=new AbortController,h=m=>{m.id===c.id&&u.abort()};this.uppy.on("file-removed",h);const f=this.uppy.getRequestClientForFile(c).uploadRemoteFile(c,Ce(this,kn,AY).call(this,c),{signal:u.signal,getQueue:d});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",h)},{priority:-1})(),f}return Ce(this,kn,PY).call(this,c)}),o=await Promise.allSettled(l);return B(this,Qd).call(this,!0),o});be(this,Cf,()=>{var n;(n=B(this,vs))==null||n.setCompanionHeaders(this.opts.headers)});be(this,Qd,n=>{const{capabilities:s}=this.uppy.getState();this.uppy.setState({capabilities:{...s,resumableUploads:n}})});be(this,Cv,()=>{B(this,Qd).call(this,!0)});this.type="uploader",this.id=this.opts.id||"AwsS3Multipart",Ce(this,kn,OP).call(this,s);const a={createMultipartUpload:this.createMultipartUpload,listParts:this.listParts,abortMultipartUpload:this.abortMultipartUpload,completeMultipartUpload:this.completeMultipartUpload,signPart:s!=null&&s.getTemporarySecurityCredentials?this.createSignedURL:this.signPart,getUploadParameters:s!=null&&s.getTemporarySecurityCredentials?this.createSignedURL:this.getUploadParameters};for(const i of Object.keys(a))this.opts[i]==null&&(this.opts[i]=a[i].bind(this));this.requests=this.opts.rateLimitedQueue??new bze(this.opts.limit),je(this,kf,new Wze(this.requests,this.opts,B(this,yw),B(this,Sf))),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}[Symbol.for("uppy test: getClient")](){return B(this,vs)}setOptions(n){B(this,kf).setOptions(n),super.setOptions(n),Ce(this,kn,OP).call(this,n)}resetUploaderReferences(n,s){this.uploaders[n]&&(this.uploaders[n].abort({really:(s==null?void 0:s.abort)||!1}),this.uploaders[n]=null),this.uploaderEvents[n]&&(this.uploaderEvents[n].remove(),this.uploaderEvents[n]=null)}createMultipartUpload(n,s){Ce(this,kn,Xo).call(this,"createMultipartUpload"),ns(s);const a=bF(this.opts.allowedMetaFields,n.meta),i=SF({meta:n.meta,allowedMetaFields:a});return B(this,vs).post("s3/multipart",{filename:n.name,type:n.type,metadata:i},{signal:s}).then(ih)}listParts(n,{key:s,uploadId:a,signal:i},l){i??(i=l),Ce(this,kn,Xo).call(this,"listParts"),ns(i);const o=encodeURIComponent(s);return B(this,vs).get(`s3/multipart/${encodeURIComponent(a)}?key=${o}`,{signal:i}).then(ih)}completeMultipartUpload(n,{key:s,uploadId:a,parts:i,signal:l},o){l??(l=o),Ce(this,kn,Xo).call(this,"completeMultipartUpload"),ns(l);const c=encodeURIComponent(s),d=encodeURIComponent(a);return B(this,vs).post(`s3/multipart/${d}/complete?key=${c}`,{parts:i.map(({ETag:u,PartNumber:h})=>({ETag:u,PartNumber:h}))},{signal:l}).then(ih)}async createSignedURL(n,s){const a=await Ce(this,kn,_Y).call(this,s),i=kF(a.credentials)||604800,{uploadId:l,key:o,partNumber:c}=s;return{method:"PUT",expires:i,fields:{},url:`${await Uze({accountKey:a.credentials.AccessKeyId,accountSecret:a.credentials.SecretAccessKey,sessionToken:a.credentials.SessionToken,expires:i,bucketName:a.bucket,Region:a.region,Key:o??`${crypto.randomUUID()}-${n.name}`,uploadId:l,partNumber:c})}`,headers:{"Content-Type":n.type}}}signPart(n,{uploadId:s,key:a,partNumber:i,signal:l}){if(Ce(this,kn,Xo).call(this,"signPart"),ns(l),s==null||a==null||i==null)throw new Error("Cannot sign without a key, an uploadId, and a partNumber");const o=encodeURIComponent(a);return B(this,vs).get(`s3/multipart/${encodeURIComponent(s)}/${i}?key=${o}`,{signal:l}).then(ih)}abortMultipartUpload(n,{key:s,uploadId:a,signal:i}){Ce(this,kn,Xo).call(this,"abortMultipartUpload");const l=encodeURIComponent(s),o=encodeURIComponent(a);return B(this,vs).delete(`s3/multipart/${o}?key=${l}`,void 0,{signal:i}).then(ih)}getUploadParameters(n,s){Ce(this,kn,Xo).call(this,"getUploadParameters");const{meta:a}=n,{type:i,name:l}=a,o=bF(this.opts.allowedMetaFields,n.meta),c=SF({meta:a,allowedMetaFields:o,querify:!0}),d=new URLSearchParams({filename:l,type:i,...c});return B(this,vs).get(`s3/params?${d}`,s)}static async uploadPartBytes({signature:{url:n,expires:s,headers:a,method:i="PUT"},body:l,size:o=l.size,onProgress:c,onComplete:d,signal:u}){if(ns(u),n==null)throw new Error("Cannot upload to an undefined URL");return new Promise((h,f)=>{const m=new XMLHttpRequest;m.open(i,n,!0),a&&Object.keys(a).forEach(w=>{m.setRequestHeader(w,a[w])}),m.responseType="text",typeof s=="number"&&(m.timeout=s*1e3);function v(){m.abort()}function x(){u==null||u.removeEventListener("abort",v)}u==null||u.addEventListener("abort",v),m.upload.addEventListener("progress",w=>{c(w)}),m.addEventListener("abort",()=>{x(),f(yY())}),m.addEventListener("timeout",()=>{x();const w=new Error("Request has expired");w.source={status:403},f(w)}),m.addEventListener("load",()=>{if(x(),m.status===403&&m.responseText.includes("<Message>Request has expired</Message>")){const p=new Error("Request has expired");p.source=m,f(p);return}if(m.status<200||m.status>=300){const p=new Error("Non 2xx");p.source=m,f(p);return}c==null||c({loaded:o,lengthComputable:!0});const w=m.getAllResponseHeaders().trim().split(/[\r\n]+/),j={__proto__:null};for(const p of w){const N=p.split(": "),k=N.shift(),C=N.join(": ");j[k]=C}const{etag:g,location:b}=j;if(i.toUpperCase()==="POST"&&b==null&&console.error("@uppy/aws-s3: Could not read the Location header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket"),g==null){console.error("@uppy/aws-s3: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket");return}d==null||d(g),h({...j,ETag:g})}),m.addEventListener("error",w=>{x();const j=new Error("Unknown error");j.source=w.target,f(j)}),m.send(l)})}install(){B(this,Qd).call(this,!0),this.uppy.addPreProcessor(B(this,Cf)),this.uppy.addUploader(B(this,Sv)),this.uppy.on("cancel-all",B(this,Cv))}uninstall(){this.uppy.removePreProcessor(B(this,Cf)),this.uppy.removeUploader(B(this,Sv)),this.uppy.off("cancel-all",B(this,Cv))}};kf=new WeakMap,vs=new WeakMap,kn=new WeakSet,OP=function(n){n==null||!("endpoint"in n||"companionUrl"in n||"headers"in n||"companionHeaders"in n||"cookiesRule"in n||"companionCookiesRule"in n)||("companionUrl"in n&&!("endpoint"in n)&&this.uppy.log("`companionUrl` option has been removed in @uppy/aws-s3, use `endpoint` instead.","warning"),"companionHeaders"in n&&!("headers"in n)&&this.uppy.log("`companionHeaders` option has been removed in @uppy/aws-s3, use `headers` instead.","warning"),"companionCookiesRule"in n&&!("cookiesRule"in n)&&this.uppy.log("`companionCookiesRule` option has been removed in @uppy/aws-s3, use `cookiesRule` instead.","warning"),"endpoint"in n?je(this,vs,new vY(this.uppy,{pluginId:this.id,provider:"AWS",companionUrl:this.opts.endpoint,companionHeaders:this.opts.headers,companionCookiesRule:this.opts.cookiesRule})):("headers"in n&&B(this,Cf).call(this),"cookiesRule"in n&&(B(this,vs).opts.companionCookiesRule=n.cookiesRule)))},Xo=function(n){if(!B(this,vs))throw new Error(`Expected a \`endpoint\` option containing a URL, or if you are not using Companion, a custom \`${n}\` implementation.`)},oi=new WeakMap,_Y=async function(n){if(ns(n==null?void 0:n.signal),B(this,oi)==null){const{getTemporarySecurityCredentials:s}=this.opts;s===!0?(Ce(this,kn,Xo).call(this,"getTemporarySecurityCredentials"),je(this,oi,B(this,vs).get("s3/sts",n).then(ih))):je(this,oi,s(n)),je(this,oi,await B(this,oi)),setTimeout(()=>{je(this,oi,null)},(kF(B(this,oi).credentials)||0)*500)}return B(this,oi)},yw=new WeakMap,Sf=new WeakMap,PY=function(n){return new Promise((s,a)=>{const i=(u,h)=>{const f=this.uppy.getFile(n.id);this.uppy.emit("upload-progress",f,{uploadStarted:f.progress.uploadStarted??0,bytesUploaded:u,bytesTotal:h})},l=u=>{this.uppy.log(u),this.uppy.emit("upload-error",n,u),this.resetUploaderReferences(n.id),a(u)},o=u=>{const h={body:{...u},status:200,uploadURL:u.location};this.resetUploaderReferences(n.id),this.uppy.emit("upload-success",B(this,Sf).call(this,n),h),u.location&&this.uppy.log(`Download ${n.name} from ${u.location}`),s(void 0)},c=new Vze(n.data,{companionComm:B(this,kf),log:(...u)=>this.uppy.log(...u),getChunkSize:this.opts.getChunkSize?this.opts.getChunkSize.bind(this):void 0,onProgress:i,onError:l,onSuccess:o,onPartComplete:u=>{this.uppy.emit("s3-multipart:part-uploaded",B(this,Sf).call(this,n),u)},file:n,shouldUseMultipart:this.opts.shouldUseMultipart,...n.s3Multipart});this.uploaders[n.id]=c;const d=new xze(this.uppy);this.uploaderEvents[n.id]=d,d.onFileRemove(n.id,u=>{c.abort(),this.resetUploaderReferences(n.id,{abort:!0}),s(`upload ${u} was removed`)}),d.onCancelAll(n.id,()=>{c.abort(),this.resetUploaderReferences(n.id,{abort:!0}),s(`upload ${n.id} was canceled`)}),d.onFilePause(n.id,u=>{u?c.pause():c.start()}),d.onPauseAll(n.id,()=>{c.pause()}),d.onResumeAll(n.id,()=>{c.start()}),c.start()})},AY=function(n){var s;return{...(s=n.remote)==null?void 0:s.body,protocol:"s3-multipart",size:n.data.size,metadata:n.meta}},Sv=new WeakMap,Cf=new WeakMap,Qd=new WeakMap,Cv=new WeakMap,ye(bw,"VERSION",$ze.version);let EP=bw;function RP({maxNumberOfFiles:e=1,maxFileSize:t=10485760,onGetUploadParameters:n,onComplete:s,buttonClassName:a,children:i}){const[l,o]=y.useState(!1),[c]=y.useState(()=>new oP({restrictions:{maxNumberOfFiles:e,maxFileSize:t},autoProceed:!1}).use(EP,{shouldUseMultipart:!1,getUploadParameters:n}).on("complete",d=>{s==null||s(d)}));return r.jsxs("div",{children:[r.jsx(M,{onClick:()=>o(!0),className:a,type:"button",children:i}),r.jsx(pY,{uppy:c,open:l,onRequestClose:()=>o(!1),proudlyDisplayPoweredByUppy:!1})]})}const CF=["gambling","dating","crypto","betting","e-commerce","gaming","finance","health","vpn","antivirus","education","software","mobile_apps","nutra","beauty"],_F=[{code:"afghanistan",name:"🇦🇫 Афганистан"},{code:"albania",name:"🇦🇱 Албания"},{code:"algeria",name:"🇩🇿 Алжир"},{code:"andorra",name:"🇦🇩 Андорра"},{code:"angola",name:"🇦🇴 Ангола"},{code:"argentina",name:"🇦🇷 Аргентина"},{code:"armenia",name:"🇦🇲 Армения"},{code:"australia",name:"🇦🇺 Австралия"},{code:"austria",name:"🇦🇹 Австрия"},{code:"azerbaijan",name:"🇦🇿 Азербайджан"},{code:"bahrain",name:"🇧🇭 Бахрейн"},{code:"bangladesh",name:"🇧🇩 Бангладеш"},{code:"belarus",name:"🇧🇾 Беларусь"},{code:"belgium",name:"🇧🇪 Бельгия"},{code:"bolivia",name:"🇧🇴 Боливия"},{code:"brazil",name:"🇧🇷 Бразилия"},{code:"bulgaria",name:"🇧🇬 Болгария"},{code:"cambodia",name:"🇰🇭 Камбоджа"},{code:"canada",name:"🇨🇦 Канада"},{code:"chile",name:"🇨🇱 Чили"},{code:"china",name:"🇨🇳 Китай"},{code:"colombia",name:"🇨🇴 Колумбия"},{code:"croatia",name:"🇭🇷 Хорватия"},{code:"cyprus",name:"🇨🇾 Кипр"},{code:"czech",name:"🇨🇿 Чехия"},{code:"denmark",name:"🇩🇰 Дания"},{code:"ecuador",name:"🇪🇨 Эквадор"},{code:"egypt",name:"🇪🇬 Египет"},{code:"estonia",name:"🇪🇪 Эстония"},{code:"finland",name:"🇫🇮 Финляндия"},{code:"france",name:"🇫🇷 Франция"},{code:"germany",name:"🇩🇪 Германия"},{code:"greece",name:"🇬🇷 Греция"},{code:"hungary",name:"🇭🇺 Венгрия"},{code:"india",name:"🇮🇳 Индия"},{code:"indonesia",name:"🇮🇩 Индонезия"},{code:"italy",name:"🇮🇹 Италия"},{code:"japan",name:"🇯🇵 Япония"},{code:"malaysia",name:"🇲🇾 Малайзия"},{code:"mexico",name:"🇲🇽 Мексика"},{code:"netherlands",name:"🇳🇱 Нидерланды"},{code:"poland",name:"🇵🇱 Польша"},{code:"portugal",name:"🇵🇹 Португалия"},{code:"russia",name:"🇷🇺 Россия"},{code:"spain",name:"🇪🇸 Испания"},{code:"sweden",name:"🇸🇪 Швеция"},{code:"switzerland",name:"🇨🇭 Швейцария"},{code:"thailand",name:"🇹🇭 Таиланд"},{code:"turkey",name:"🇹🇷 Турция"},{code:"ukraine",name:"🇺🇦 Украина"},{code:"united_kingdom",name:"🇬🇧 Великобритания"},{code:"united_states",name:"🇺🇸 США"},{code:"vietnam",name:"🇻🇳 Вьетнам"}],Kze=["Google Ads","Facebook Ads","TikTok Ads","Snapchat Ads","Push Notifications","Pop-under","Banner","Native","Instagram","YouTube Ads","UAC","SEO","Email","WhatsApp","Telegram","Motivated","In-App","Cloaking","Display","Video","Affiliate","Direct","Contextual"],Gze=["Web Browser","Mobile App","Desktop Application","Browser Extension","Progressive Web App","Hybrid App","Native Mobile","Cross-Platform"],Yze=["Adult Traffic","Malware Distribution","Click Injection","Fraudulent Sources","Bot Traffic","Incentivized Traffic"],Xze=[{value:"desktop",label:"Desktop"},{value:"mobile",label:"Mobile"},{value:"tablet",label:"Tablet"},{value:"smarttv",label:"Smart TV"},{value:"console",label:"Console"}],Zze=[{value:"ip_filtering",label:"IP фильтрация",description:"Блокировка подозрительных IP адресов"},{value:"device_fingerprinting",label:"Отпечатки устройств",description:"Анализ уникальных характеристик устройства"},{value:"behavioral_analysis",label:"Анализ поведения",description:"Отслеживание паттернов поведения пользователей"},{value:"geo_verification",label:"Проверка геолокации",description:"Верификация реального местоположения"},{value:"rate_limiting",label:"Лимит запросов",description:"Ограничение частоты запросов от одного источника"},{value:"bot_detection",label:"Детекция ботов",description:"Выявление автоматизированного трафика"}],Qze=[{code:"USD",name:"US Dollar",symbol:"$"},{code:"EUR",name:"Euro",symbol:"€"},{code:"RUB",name:"Russian Ruble",symbol:"₽"},{code:"UAH",name:"Ukrainian Hryvnia",symbol:"₴"},{code:"GBP",name:"British Pound",symbol:"£"},{code:"JPY",name:"Japanese Yen",symbol:"¥"},{code:"BRL",name:"Brazilian Real",symbol:"R$"},{code:"CAD",name:"Canadian Dollar",symbol:"C$"},{code:"AUD",name:"Australian Dollar",symbol:"A$"},{code:"CHF",name:"Swiss Franc",symbol:"CHF"},{code:"SEK",name:"Swedish Krona",symbol:"kr"},{code:"NOK",name:"Norwegian Krone",symbol:"kr"},{code:"PLN",name:"Polish Zloty",symbol:"zł"},{code:"CZK",name:"Czech Koruna",symbol:"Kč"},{code:"HUF",name:"Hungarian Forint",symbol:"Ft"}],TY=({offer:e,onClose:t,onSave:n})=>{var g,b;const{toast:s}=lt(),[a,i]=y.useState({name:e.name||"",description:{ru:((g=e.description)==null?void 0:g.ru)||e.description||"",en:((b=e.description)==null?void 0:b.en)||""},category:e.category||"",logo:e.logo||"",image:e.image||"",geoTargeting:e.geoTargeting||[],targetUrl:e.targetUrl||e.url||"",postbackUrl:e.postbackUrl||"",hasGlobalGeoSetting:e.hasGlobalGeoSetting||!1,hasGlobalPayoutSetting:e.hasGlobalPayoutSetting||!1,globalGeo:e.globalGeo||"",globalPayout:e.globalPayout||"",landingPages:e.landingPages||[{id:"1",name:"Основная",url:e.url||"",geo:"",payout:"",hasCustomGeo:!1,hasCustomPayout:!1,isDefault:!0}],payoutType:e.payoutType||"cpa",payoutAmount:e.payout||e.payoutAmount||0,currency:e.currency||"USD",trafficSources:e.trafficSources||[],allowedApplications:e.allowedApplications||[],dailyLimit:e.dailyLimit||e.cap||0,monthlyLimit:e.monthlyLimit||0,antifraudEnabled:e.antifraudEnabled!==void 0?e.antifraudEnabled:!0,antifraudMethods:e.antifraudMethods||["ip_check","vpn_detection"],partnerApprovalType:e.partnerApprovalType||"manual",kycRequired:e.kycRequired||!1,isPrivate:e.isPrivate||!1,tags:e.tags||[],notes:e.notes||"",requiresApproval:e.requiresApproval||!1,trackingEnabled:e.trackingEnabled!==void 0?e.trackingEnabled:!0,saveAsTemplate:!1,kpi:e.kpi||"",status:e.status||"active"}),[l,o]=y.useState(!1),[c,d]=y.useState(!1),u=()=>{const p=(a.landingPages.length+1).toString(),N={id:p,name:`Лендинг ${p}`,url:"",geo:a.hasGlobalGeoSetting?a.globalGeo:"",payout:a.hasGlobalPayoutSetting?a.globalPayout:"",hasCustomGeo:!a.hasGlobalGeoSetting,hasCustomPayout:!a.hasGlobalPayoutSetting,isDefault:!1};i(k=>({...k,landingPages:[...k.landingPages,N]}))},h=p=>{a.landingPages.length>1&&i(N=>({...N,landingPages:N.landingPages.filter(k=>k.id!==p)}))},f=(p,N,k)=>{i(C=>({...C,landingPages:C.landingPages.map(_=>_.id===p?{..._,[N]:k}:_)}))},m=p=>{const N=a.trafficSources.includes(p);i(k=>({...k,trafficSources:N?k.trafficSources.filter(C=>C!==p):[...k.trafficSources,p]}))},v=p=>{const N=a.allowedApplications.includes(p);i(k=>({...k,allowedApplications:N?k.allowedApplications.filter(C=>C!==p):[...k.allowedApplications,p]}))},x=p=>{const N=a.antifraudMethods.includes(p);i(k=>({...k,antifraudMethods:N?k.antifraudMethods.filter(C=>C!==p):[...k.antifraudMethods,p]}))},w=p=>{const N=a.geoTargeting.includes(p);i(k=>({...k,geoTargeting:N?k.geoTargeting.filter(C=>C!==p):[...k.geoTargeting,p]}))},j=()=>{if(!a.name.trim()){s({title:"Ошибка",description:"Укажите название оффера",variant:"destructive"});return}if(!a.targetUrl.trim()){s({title:"Ошибка",description:"Укажите целевую URL",variant:"destructive"});return}if(a.geoTargeting.length===0){s({title:"Ошибка",description:"Выберите хотя бы одну страну для таргетинга",variant:"destructive"});return}const p={...e,...a,url:a.targetUrl,payout:a.payoutAmount,cap:a.dailyLimit};n(p),t()};return r.jsx(jt,{open:!0,onOpenChange:t,children:r.jsxs(vt,{className:"max-w-7xl max-h-[95vh] overflow-y-auto",children:[r.jsx(yt,{children:r.jsxs(bt,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"h-5 w-5"}),"Редактировать оффер: ",a.name||"Без названия"]})}),r.jsxs(Zr,{defaultValue:"basic",className:"w-full",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-6",children:[r.jsxs(We,{value:"basic",className:"flex items-center gap-1",children:[r.jsx(dr,{className:"h-4 w-4"}),"Основная информация"]}),r.jsxs(We,{value:"geo",className:"flex items-center gap-1",children:[r.jsx(Kt,{className:"h-4 w-4"}),"Гео и лендинги"]}),r.jsxs(We,{value:"payouts",className:"flex items-center gap-1",children:[r.jsx(Rt,{className:"h-4 w-4"}),"Выплаты"]}),r.jsxs(We,{value:"traffic",className:"flex items-center gap-1",children:[r.jsx(Kt,{className:"h-4 w-4"}),"Трафик"]}),r.jsxs(We,{value:"antifraud",className:"flex items-center gap-1",children:[r.jsx(fr,{className:"h-4 w-4"}),"Антифрод"]}),r.jsxs(We,{value:"additional",className:"flex items-center gap-1",children:[r.jsx(Zt,{className:"h-4 w-4"}),"Дополнительно"]})]}),r.jsx(He,{value:"basic",className:"mt-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(dr,{className:"h-5 w-5"}),"Основная информация об оффере"]})}),r.jsxs(H,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"name",className:"text-sm font-medium",children:"Название оффера *"}),r.jsx(ne,{id:"name",value:a.name,onChange:p=>i(N=>({...N,name:p.target.value})),placeholder:"Введите название оффера","data-testid":"input-offer-name"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Статус оффера"}),r.jsxs(he,{value:a.status,onValueChange:p=>i(N=>({...N,status:p})),children:[r.jsx(de,{"data-testid":"select-status",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"draft",children:"Черновик"}),r.jsx(S,{value:"active",children:"Активный"}),r.jsx(S,{value:"paused",children:"Приостановлен"}),r.jsx(S,{value:"on_request",children:"На запрос"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Описание (RU)"}),r.jsx(pt,{value:a.description.ru,onChange:p=>i(N=>({...N,description:{...N.description,ru:p.target.value}})),placeholder:"Описание оффера на русском языке...",rows:4,"data-testid":"textarea-description-ru"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Описание (EN)"}),r.jsx(pt,{value:a.description.en,onChange:p=>i(N=>({...N,description:{...N.description,en:p.target.value}})),placeholder:"Offer description in English...",rows:4,"data-testid":"textarea-description-en"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Категория"}),r.jsxs(ym,{open:c,onOpenChange:d,children:[r.jsx(bm,{asChild:!0,children:r.jsxs(M,{variant:"outline",role:"combobox","aria-expanded":c,className:"w-full justify-between","data-testid":"button-select-category",children:[a.category?CF.find(p=>p===a.category):"Выберите категорию...",r.jsx(L2,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(Eu,{className:"w-[400px] p-0",children:r.jsxs(Zj,{children:[r.jsx(Qj,{placeholder:"Поиск категории..."}),r.jsx(Jj,{children:"Категория не найдена."}),r.jsx(ew,{className:"max-h-64 overflow-auto",children:CF.map(p=>r.jsxs(tw,{value:p,onSelect:()=>{i(N=>({...N,category:p})),d(!1)},"data-testid":`command-item-category-${p}`,children:[r.jsx(fn,{className:`mr-2 h-4 w-4 ${a.category===p?"opacity-100":"opacity-0"}`}),p]},p))})]})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Логотип оффера"}),r.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:[r.jsxs(RP,{maxNumberOfFiles:1,maxFileSize:5242880,onGetUploadParameters:async()=>{const p=localStorage.getItem("auth_token"),N=await fetch("/api/objects/upload",{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(!N.ok)throw new Error(`Не удалось получить URL: ${N.status}`);return{method:"PUT",url:(await N.json()).uploadURL}},onComplete:p=>{if(console.log("Logo upload result:",p),p.successful&&p.successful[0]){const N=p.successful[0].uploadURL;if(console.log("Logo upload URL:",N),N)try{const C=new URL(N).pathname;console.log("Parsed path:",C);const _=C.split("/"),P=_.findIndex(D=>D==="uploads");if(P!==-1&&_[P+1]){const E=`/objects/uploads/${_[P+1]}`;console.log("Final logo URL:",E),i($=>({...$,logo:E})),s({title:"Успех",description:"Логотип успешно загружен"})}else console.error("Could not find uploads folder in path:",_),s({title:"Ошибка",description:"Не удалось извлечь ID логотипа из URL",variant:"destructive"})}catch(k){console.error("Error parsing logo upload URL:",k),s({title:"Ошибка",description:"Не удалось обработать URL логотипа",variant:"destructive"})}}},buttonClassName:"w-full",children:[r.jsx(pl,{className:"h-4 w-4 mr-2"}),"Загрузить логотип"]}),a.logo&&r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(co,{className:"h-4 w-4"}),"Предварительный просмотр:"]}),r.jsx("img",{src:a.logo,alt:"Логотип оффера",className:"w-20 h-20 object-cover rounded-lg border border-border"}),r.jsxs(M,{type:"button",variant:"outline",size:"sm",onClick:()=>i(p=>({...p,logo:""})),"data-testid":"button-remove-logo",children:[r.jsx(wr,{className:"h-4 w-4 mr-1"}),"Удалить логотип"]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Основное изображение оффера"}),r.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:[r.jsxs(RP,{maxNumberOfFiles:1,maxFileSize:10485760,onGetUploadParameters:async()=>{const p=localStorage.getItem("auth_token"),N=await fetch("/api/objects/upload",{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(!N.ok)throw new Error(`Не удалось получить URL: ${N.status}`);return{method:"PUT",url:(await N.json()).uploadURL}},onComplete:p=>{if(console.log("Image upload result:",p),p.successful&&p.successful[0]){const N=p.successful[0].uploadURL;if(console.log("Image upload URL:",N),N)try{const C=new URL(N).pathname;console.log("Parsed path:",C);const _=C.split("/"),P=_.findIndex(D=>D==="uploads");if(P!==-1&&_[P+1]){const E=`/objects/uploads/${_[P+1]}`;console.log("Final image URL:",E),i($=>({...$,image:E})),s({title:"Успех",description:"Изображение успешно загружено"})}else console.error("Could not find uploads folder in path:",_),s({title:"Ошибка",description:"Не удалось извлечь ID изображения из URL",variant:"destructive"})}catch(k){console.error("Error parsing image upload URL:",k),s({title:"Ошибка",description:"Не удалось обработать URL изображения",variant:"destructive"})}}},buttonClassName:"w-full",children:[r.jsx(co,{className:"h-4 w-4 mr-2"}),"Загрузить изображение"]}),a.image&&r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(co,{className:"h-4 w-4"}),"Предварительный просмотр:"]}),r.jsx("img",{src:a.image,alt:"Изображение оффера",className:"w-32 h-20 object-cover rounded-lg border border-border"}),r.jsxs(M,{type:"button",variant:"outline",size:"sm",onClick:()=>i(p=>({...p,image:""})),"data-testid":"button-remove-image",children:[r.jsx(wr,{className:"h-4 w-4 mr-1"}),"Удалить изображение"]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"KPI и цели"}),r.jsx(pt,{value:a.kpi,onChange:p=>i(N=>({...N,kpi:p.target.value})),placeholder:"Опишите ключевые показатели эффективности и цели оффера...",rows:3,"data-testid":"textarea-kpi"})]})]})]})}),r.jsx(He,{value:"geo",className:"mt-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Kt,{className:"h-5 w-5"}),"Гео-таргетинг и лендинги"]})}),r.jsxs(H,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx(L,{className:"text-sm font-medium",children:"Доступные страны *"}),r.jsxs(ym,{open:l,onOpenChange:o,children:[r.jsx(bm,{asChild:!0,children:r.jsxs(M,{variant:"outline",role:"combobox","aria-expanded":l,className:"w-full justify-between","data-testid":"button-select-geo",children:[a.geoTargeting.length>0?`Выбрано стран: ${a.geoTargeting.length}`:"Выберите страны...",r.jsx(L2,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(Eu,{className:"w-[400px] p-0",children:r.jsxs(Zj,{children:[r.jsx(Qj,{placeholder:"Поиск страны..."}),r.jsx(Jj,{children:"Страна не найдена."}),r.jsx(ew,{className:"max-h-64 overflow-auto",children:_F.map(p=>r.jsxs(tw,{value:p.code,onSelect:()=>w(p.code),"data-testid":`command-item-country-${p.code}`,children:[r.jsx(fn,{className:`mr-2 h-4 w-4 ${a.geoTargeting.includes(p.code)?"opacity-100":"opacity-0"}`}),p.name]},p.code))})]})})]}),a.geoTargeting.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 p-2 border rounded-md bg-muted/50",children:a.geoTargeting.map(p=>{const N=_F.find(k=>k.code===p);return N?r.jsxs(le,{variant:"secondary",className:"flex items-center gap-1",children:[N.name,r.jsx(Tn,{className:"h-3 w-3 cursor-pointer hover:text-destructive",onClick:()=>w(p)})]},p):null})})]}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{className:"text-sm font-medium",children:"Лендинг страницы"}),r.jsxs(M,{type:"button",variant:"outline",size:"sm",onClick:u,"data-testid":"button-add-landing",children:[r.jsx(Zt,{className:"h-4 w-4 mr-1"}),"Добавить лендинг"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 border rounded-lg bg-muted/50",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{checked:a.hasGlobalGeoSetting,onCheckedChange:p=>i(N=>({...N,hasGlobalGeoSetting:p})),"data-testid":"switch-global-geo"}),r.jsx(L,{className:"text-sm",children:"Глобальное гео"})]}),a.hasGlobalGeoSetting&&r.jsx(ne,{value:a.globalGeo,onChange:p=>i(N=>({...N,globalGeo:p.target.value})),placeholder:"Все страны","data-testid":"input-global-geo"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{checked:a.hasGlobalPayoutSetting,onCheckedChange:p=>i(N=>({...N,hasGlobalPayoutSetting:p})),"data-testid":"switch-global-payout"}),r.jsx(L,{className:"text-sm",children:"Глобальная выплата"})]}),a.hasGlobalPayoutSetting&&r.jsx(ne,{type:"number",step:"0.01",value:a.globalPayout,onChange:p=>i(N=>({...N,globalPayout:p.target.value})),placeholder:"0.00","data-testid":"input-global-payout"})]})]}),r.jsx("div",{className:"space-y-3",children:a.landingPages.map(p=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ne,{value:p.name,onChange:N=>f(p.id,"name",N.target.value),className:"w-40",placeholder:"Название лендинга","data-testid":`input-landing-name-${p.id}`}),p.isDefault&&r.jsx(le,{variant:"default",children:"По умолчанию"})]}),!p.isDefault&&r.jsx(M,{type:"button",variant:"ghost",size:"sm",onClick:()=>h(p.id),"data-testid":`button-remove-landing-${p.id}`,children:r.jsx(wr,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm",children:"URL лендинга *"}),r.jsx(ne,{value:p.url,onChange:N=>f(p.id,"url",N.target.value),placeholder:"https://example.com/landing","data-testid":`input-landing-url-${p.id}`})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[(!a.hasGlobalGeoSetting||p.hasCustomGeo)&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{checked:p.hasCustomGeo,onCheckedChange:N=>f(p.id,"hasCustomGeo",N),"data-testid":`switch-custom-geo-${p.id}`}),r.jsx(L,{className:"text-sm",children:"Кастомное гео"})]}),p.hasCustomGeo&&r.jsx(ne,{value:p.geo||"",onChange:N=>f(p.id,"geo",N.target.value),placeholder:"US, CA, GB","data-testid":`input-landing-geo-${p.id}`})]}),(!a.hasGlobalPayoutSetting||p.hasCustomPayout)&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{checked:p.hasCustomPayout,onCheckedChange:N=>f(p.id,"hasCustomPayout",N),"data-testid":`switch-custom-payout-${p.id}`}),r.jsx(L,{className:"text-sm",children:"Кастомная выплата"})]}),p.hasCustomPayout&&r.jsx(ne,{type:"number",step:"0.01",value:p.payout||"",onChange:N=>f(p.id,"payout",N.target.value),placeholder:"0.00","data-testid":`input-landing-payout-${p.id}`})]})]})]},p.id))})]}),r.jsx(wn,{}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Целевая ссылка *"}),r.jsx(ne,{value:a.targetUrl,onChange:p=>i(N=>({...N,targetUrl:p.target.value})),placeholder:"https://example.com/offer","data-testid":"input-target-url"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Основная ссылка куда будет перенаправлен трафик"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Postback URL"}),r.jsx(ne,{value:a.postbackUrl,onChange:p=>i(N=>({...N,postbackUrl:p.target.value})),placeholder:"https://example.com/postback","data-testid":"input-postback-url"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"URL для получения уведомлений о конверсиях"})]})]})]})]})}),r.jsx(He,{value:"payouts",className:"mt-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Rt,{className:"h-5 w-5"}),"Настройки выплат"]})}),r.jsxs(H,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Модель выплат"}),r.jsxs(he,{value:a.payoutType,onValueChange:p=>i(N=>({...N,payoutType:p})),children:[r.jsx(de,{"data-testid":"select-payout-type",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"cpa",children:"CPA - За действие"}),r.jsx(S,{value:"cpl",children:"CPL - За лид"}),r.jsx(S,{value:"cps",children:"CPS - За продажу"}),r.jsx(S,{value:"revshare",children:"RevShare - Доля от дохода"}),r.jsx(S,{value:"hybrid",children:"Hybrid - Гибридная"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Размер выплаты"}),r.jsx(ne,{type:"number",step:"0.01",value:a.payoutAmount,onChange:p=>i(N=>({...N,payoutAmount:parseFloat(p.target.value)||0})),placeholder:"0.00","data-testid":"input-payout-amount"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Валюта"}),r.jsxs(he,{value:a.currency,onValueChange:p=>i(N=>({...N,currency:p})),children:[r.jsx(de,{"data-testid":"select-currency",children:r.jsx(fe,{})}),r.jsx(ue,{children:Qze.map(p=>r.jsxs(S,{value:p.code,children:[p.symbol," ",p.code," - ",p.name]},p.code))})]})]})]}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Лимиты и ограничения"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Дневной лимит конверсий"}),r.jsx(ne,{type:"number",value:a.dailyLimit,onChange:p=>i(N=>({...N,dailyLimit:parseInt(p.target.value)||0})),placeholder:"0 = без лимита","data-testid":"input-daily-limit"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Максимальное количество конверсий в день"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Месячный лимит конверсий"}),r.jsx(ne,{type:"number",value:a.monthlyLimit,onChange:p=>i(N=>({...N,monthlyLimit:parseInt(p.target.value)||0})),placeholder:"0 = без лимита","data-testid":"input-monthly-limit"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Максимальное количество конверсий в месяц"})]})]})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Информация о моделях выплат:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"CPA:"})," Фиксированная сумма за каждое целевое действие",r.jsx("br",{}),r.jsx("strong",{children:"CPL:"})," Оплата за каждый квалифицированный лид",r.jsx("br",{}),r.jsx("strong",{children:"CPS:"})," Процент или фиксированная сумма с каждой продажи"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"RevShare:"})," Процент от дохода рекламодателя",r.jsx("br",{}),r.jsx("strong",{children:"Hybrid:"})," Комбинация фиксированной суммы и процента"]})]})]})]})]})}),r.jsx(He,{value:"traffic",className:"mt-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Kt,{className:"h-5 w-5"}),"Источники трафика и приложения"]})}),r.jsxs(H,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(L,{className:"text-sm font-medium",children:"Разрешенные источники трафика"}),r.jsx("div",{className:"grid grid-cols-4 gap-3 max-h-48 overflow-y-auto border rounded-lg p-3",children:Kze.map(p=>r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-muted/50 p-2 rounded","data-testid":`checkbox-traffic-${p.replace(/\s+/g,"-").toLowerCase()}`,children:[r.jsx(Ye,{checked:a.trafficSources.includes(p),onCheckedChange:()=>m(p)}),r.jsx("span",{className:"text-xs",children:p})]},p))}),a.trafficSources.length>0&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Выбрано источников: ",a.trafficSources.length]})]}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(L,{className:"text-sm font-medium",children:"Разрешенные типы приложений"}),r.jsx("div",{className:"grid grid-cols-4 gap-3 max-h-48 overflow-y-auto border rounded-lg p-3",children:Gze.map(p=>r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-muted/50 p-2 rounded","data-testid":`checkbox-app-${p.replace(/\s+/g,"-").toLowerCase()}`,children:[r.jsx(Ye,{checked:a.allowedApplications.includes(p),onCheckedChange:()=>v(p)}),r.jsx("span",{className:"text-xs",children:p})]},p))}),a.allowedApplications.length>0&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Выбрано приложений: ",a.allowedApplications.length]})]}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(L,{className:"text-sm font-medium text-destructive",children:"Запрещенные источники трафика"}),r.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:[r.jsx("div",{className:"grid grid-cols-3 gap-2 text-sm text-destructive",children:Yze.map(p=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Tn,{className:"h-3 w-3"}),p]},p))}),r.jsx("p",{className:"text-xs text-destructive mt-3",children:"Трафик из этих источников будет автоматически отклонен системой антифрод"})]})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Поддерживаемые типы устройств:"}),r.jsx("div",{className:"grid grid-cols-5 gap-2 text-xs",children:Xze.map(p=>r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-background rounded border",children:[r.jsx(hr,{className:"h-3 w-3 text-muted-foreground"}),p.label]},p.value))})]})]})]})}),r.jsx(He,{value:"antifraud",className:"mt-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Lt,{className:"h-5 w-5"}),"Защита от мошенничества"]})}),r.jsxs(H,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(L,{className:"text-sm font-medium",children:"Активные методы защиты"}),r.jsx("div",{className:"grid grid-cols-3 gap-4",children:Zze.map(p=>r.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg bg-muted/30",children:[r.jsx(Ye,{checked:a.antifraudMethods.includes(p.value),onCheckedChange:()=>x(p.value),"data-testid":`switch-antifraud-${p.value}`}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(L,{className:"text-sm font-medium",children:p.label}),r.jsx("p",{className:"text-xs text-muted-foreground",children:p.description})]})]},p.value))}),a.antifraudMethods.length>0&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Активно методов защиты: ",a.antifraudMethods.length]})]}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(L,{className:"text-sm font-medium",children:"Тип модерации партнеров"}),r.jsxs(he,{value:a.partnerApprovalType,onValueChange:p=>i(N=>({...N,partnerApprovalType:p})),children:[r.jsx(de,{"data-testid":"select-partner-approval",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"auto",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(nr,{className:"h-4 w-4 text-green-500"}),"Автоматическое подтверждение"]})}),r.jsx(S,{value:"manual",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lr,{className:"h-4 w-4 text-yellow-500"}),"Ручная модерация"]})}),r.jsx(S,{value:"none",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ma,{className:"h-4 w-4 text-red-500"}),"Без модерации"]})})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Определяет как будут проверяться заявки партнеров на доступ к офферу"})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-4",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Рекомендации по безопасности:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-muted-foreground",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lt,{className:"h-3 w-3 text-green-500"}),r.jsx("strong",{children:"Активная защита"})]}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[r.jsx("li",{children:"Включить IP фильтрацию для географических ограничений"}),r.jsx("li",{children:"Использовать анализ поведения для выявления ботов"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hr,{className:"h-3 w-3 text-blue-500"}),r.jsx("strong",{children:"Мониторинг"})]}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[r.jsx("li",{children:"Отслеживать аномальный трафик и подозрительные паттерны"}),r.jsx("li",{children:"Настроить алерты при превышении лимитов конверсий"})]})]})]})]})]})]})}),r.jsx(He,{value:"additional",className:"mt-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"h-5 w-5"}),"Дополнительные настройки"]})}),r.jsxs(H,{className:"space-y-6",children:[r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ye,{checked:a.isPrivate,onCheckedChange:p=>i(N=>({...N,isPrivate:p})),"data-testid":"switch-private"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(L,{className:"text-sm font-medium",children:"Приватный оффер"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Оффер будет доступен только выбранным партнерам по приглашению"})]})]})}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(L,{className:"text-sm font-medium",children:"Теги для категоризации"}),r.jsx(pt,{value:a.tags.join(", "),onChange:p=>{const N=p.target.value.split(",").map(k=>k.trim()).filter(k=>k);i(k=>({...k,tags:N}))},placeholder:"premium, exclusive, tier1, high-converting...",rows:2,"data-testid":"textarea-tags"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Добавьте теги для удобного поиска и фильтрации (разделяйте запятыми)"}),a.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.map((p,N)=>r.jsxs(le,{variant:"secondary",className:"text-xs",children:[p,r.jsx(Tn,{className:"h-3 w-3 ml-1 cursor-pointer hover:text-destructive",onClick:()=>{const k=a.tags.filter((C,_)=>_!==N);i(C=>({...C,tags:k}))}})]},N))})]}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{className:"text-sm font-medium",children:"Внутренние заметки"}),r.jsx(pt,{value:a.notes,onChange:p=>i(N=>({...N,notes:p.target.value})),placeholder:"Дополнительные заметки для внутреннего использования...",rows:3,"data-testid":"textarea-notes"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Эти заметки видны только вам и вашей команде, партнеры их не увидят"})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-4",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Дополнительные настройки:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ye,{checked:a.requiresApproval,onCheckedChange:p=>i(N=>({...N,requiresApproval:p})),"data-testid":"switch-requires-approval"}),r.jsxs("div",{children:[r.jsx(L,{className:"text-sm",children:"Требует одобрение"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Партнеры должны ждать одобрения"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ye,{checked:a.trackingEnabled,onCheckedChange:p=>i(N=>({...N,trackingEnabled:p})),"data-testid":"switch-tracking"}),r.jsxs("div",{children:[r.jsx(L,{className:"text-sm",children:"Расширенное отслеживание"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Детальная аналитика конверсий"})]})]})]})]}),r.jsxs("div",{className:"border border-dashed rounded-lg p-4 space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Шаблоны:"}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(on,{checked:a.saveAsTemplate,onCheckedChange:p=>i(N=>({...N,saveAsTemplate:p===!0})),"data-testid":"checkbox-save-template"}),r.jsx(L,{className:"text-sm",children:"Сохранить как шаблон для будущих офферов"})]})}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Создание шаблона поможет быстро создавать похожие офферы в будущем"})]})]})]})})]}),r.jsxs("div",{className:"flex justify-end pt-4 gap-2 mt-6 border-t",children:[r.jsx(M,{variant:"outline",onClick:t,"data-testid":"button-cancel",children:"Отмена"}),r.jsx(M,{onClick:j,"data-testid":"button-save",children:e.id?"Сохранить изменения":"Создать оффер"})]})]})})},Jze=({countries:e,geoTargeting:t,payout:n=0,currency:s="USD",offerId:a,payoutByGeo:i})=>{const[l,o]=y.useState(!1),c=aK(e||t||[]),d=c.slice(0,2),u=c[2],h=c.length-3,f=()=>c.map(m=>{const x={AF:"afghanistan",AL:"albania",DZ:"algeria",AD:"andorra",AO:"angola",AM:"armenia",AR:"argentina",AU:"australia",AT:"austria",AZ:"azerbaijan",BH:"bahrain",BD:"bangladesh",BY:"belarus",BE:"belgium",BR:"brazil",BG:"bulgaria",CA:"canada",CN:"china",CO:"colombia",HR:"croatia",CZ:"czech",DK:"denmark",EG:"egypt",EE:"estonia",FI:"finland",FR:"france",DE:"germany",GR:"greece",HU:"hungary",IS:"iceland",IN:"india",ID:"indonesia",IR:"iran",IQ:"iraq",IE:"ireland",IL:"israel",IT:"italy",JP:"japan",JO:"jordan",KZ:"kazakhstan",KE:"kenya",KW:"kuwait",LV:"latvia",LB:"lebanon",LT:"lithuania",LU:"luxembourg",MY:"malaysia",MX:"mexico",MD:"moldova",MC:"monaco",MA:"morocco",NL:"netherlands",NZ:"new_zealand",NO:"norway",PK:"pakistan",PE:"peru",PH:"philippines",PL:"poland",PT:"portugal",QA:"qatar",RO:"romania",RU:"russia",SA:"saudi_arabia",RS:"serbia",SG:"singapore",SK:"slovakia",SI:"slovenia",ZA:"south_africa",KR:"south_korea",ES:"spain",LK:"sri_lanka",SE:"sweden",CH:"switzerland",TH:"thailand",TR:"turkey",UA:"ukraine",AE:"united_arab_emirates",GB:"united_kingdom",US:"united_states",VN:"vietnam"}[m.code]||m.code.toLowerCase(),j=(i==null?void 0:i[x])||(i==null?void 0:i[m.code.toLowerCase()])||(i==null?void 0:i[m.code.toUpperCase()])||(i==null?void 0:i[m.name.toLowerCase()])||n;return{...m,payout:j,currency:s}});return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-1 flex-wrap max-w-32",children:[d.map((m,v)=>r.jsxs("div",{className:"flex items-center gap-1 bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded-md border border-blue-200 dark:border-blue-800",children:[r.jsx("span",{className:"text-sm",title:m.name,children:m.flag}),r.jsx("span",{className:"text-xs font-mono font-semibold text-blue-700 dark:text-blue-300",children:m.code})]},`country-${v}`)),u&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("div",{className:"flex items-center gap-1 bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded-md border border-blue-200 dark:border-blue-800",children:[r.jsx("span",{className:"text-sm",title:u.name,children:u.flag}),r.jsx("span",{className:"text-xs font-mono font-semibold text-blue-700 dark:text-blue-300",children:u.code})]}),h>0&&r.jsxs(M,{variant:"outline",size:"sm",className:"h-6 px-2 text-xs bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>o(!0),title:`Показать все ${c.length} стран`,children:["+",h]})]}),c.length===3&&!h&&r.jsx(M,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-foreground",onClick:()=>o(!0),title:"Показать детали по странам",children:"⚡"})]}),r.jsx(jt,{open:l,onOpenChange:o,children:r.jsxs(vt,{className:"max-w-md",children:[r.jsxs(yt,{children:[r.jsxs(bt,{className:"flex items-center justify-between",children:[r.jsxs("span",{children:["Гео-таргетинг (",c.length," стран)"]}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>o(!1),className:"h-6 w-6 p-0",children:r.jsx(Tn,{className:"h-4 w-4"})})]}),r.jsx(Ur,{children:"Подробная информация по странам и выплатам для данного оффера"})]}),r.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:f().map((m,v)=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:m.flag}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:m.name}),r.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:m.code})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-semibold text-green-600 dark:text-green-400",children:["$",m.payout]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:m.currency})]})]},`modal-country-${v}`))}),r.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex justify-between items-center text-sm font-medium",children:[r.jsx("span",{children:"Общая сумма:"}),r.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["$",Number(f().reduce((m,v)=>m+(Number(v.payout)||0),0)).toFixed(2)," ",s]})]})})]})})]})},eVe=({offer:e})=>{var i;const[t,n]=y.useState(!1),[s,a]=y.useState(!1);return e.image&&!t?r.jsx("img",{src:e.image,alt:e.name,className:"w-10 h-10 rounded-lg object-cover border border-gray-200 dark:border-gray-700",onLoad:()=>console.log("Offer image loaded successfully:",e.image),onError:()=>{console.log("Offer image failed to load, trying logo:",e.image),n(!0)}}):e.logo&&!s?r.jsx("img",{src:e.logo,alt:e.name,className:"w-10 h-10 rounded-lg object-cover border border-gray-200 dark:border-gray-700",onLoad:()=>console.log("Logo loaded successfully:",e.logo),onError:()=>{console.log("Logo failed to load:",e.logo),a(!0)}}):r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white text-xs font-bold",children:((i=e.name)==null?void 0:i.substring(0,2).toUpperCase())||"OF"})};function tVe({offer:e,index:t,children:n}){const{attributes:s,listeners:a,setNodeRef:i,transform:l,transition:o,isDragging:c}=QK({id:e.id}),d={transform:jm.Transform.toString(l),transition:o,opacity:c?.5:1};return r.jsxs(Re,{ref:i,style:d,...s,className:c?"bg-muted/50":"",children:[r.jsx(q,{...a,className:"cursor-grab active:cursor-grabbing hover:bg-muted/50 p-2",title:"Перетащите для изменения порядка",children:r.jsx(Bw,{className:"w-4 h-4 text-muted-foreground hover:text-foreground"})}),n]})}const rVe=()=>{const{toast:e}=lt(),t=Et(),[,n]=hs(),[s,a]=y.useState(null),[i,l]=y.useState(null),[o,c]=y.useState(!1);y.useState(null);const[d,u]=y.useState(""),[h,f]=y.useState("all"),[m,v]=y.useState([]),[x,w]=y.useState([]),{data:j=[],isLoading:g}=$e({queryKey:["/api/advertiser/offers"],queryFn:()=>Te("/api/advertiser/offers")});Z.useEffect(()=>{if(j&&j.length>0){const E=[...j].sort(($,A)=>new Date(A.createdAt||0).getTime()-new Date($.createdAt||0).getTime());w(E)}},[j]);const b=Ee({mutationFn:E=>(E.status||(E.status="active"),E.id?Te(`/api/advertiser/offers/${E.id}`,"PATCH",E):Te("/api/advertiser/offers","POST",E)),onSuccess:()=>{e({title:"Успех",description:"Оффер сохранён"}),t.invalidateQueries({queryKey:["/api/advertiser/offers"]})},onError:()=>{e({title:"Ошибка",description:"Ошибка при сохранении",variant:"destructive"})}}),p=Ee({mutationFn:E=>Te(`/api/advertiser/offers/${E}`,"DELETE"),onSuccess:()=>{e({title:"Успех",description:"Оффер удалён"}),t.invalidateQueries({queryKey:["/api/advertiser/offers"]}),l(null),v([])},onError:()=>{e({title:"Ошибка",description:"Ошибка при удалении",variant:"destructive"})}}),N=Ee({mutationFn:async E=>{const $=E.map(A=>Te(`/api/advertiser/offers/${A}`,"DELETE"));return Promise.all($)},onSuccess:()=>{e({title:"Успех",description:`Удалено ${m.length} офферов`}),t.invalidateQueries({queryKey:["/api/advertiser/offers"]}),v([]),c(!1)},onError:()=>{e({title:"Ошибка",description:"Ошибка при массовом удалении",variant:"destructive"})}}),k=Ee({mutationFn:({ids:E,status:$})=>Te("/api/advertiser/offers/bulk-update","POST",{ids:E,status:$}),onSuccess:()=>{e({title:"Успех",description:"Статус обновлён"}),t.invalidateQueries({queryKey:["/api/advertiser/offers"]}),v([])}}),C=x.filter(E=>E.name.toLowerCase().includes(d.toLowerCase())).filter(E=>h==="archived"?E.status==="archived":h==="all"?!0:E.status===h),_=E=>{const{active:$,over:A}=E;if(!A||$.id===A.id)return;const T=x.findIndex(z=>z.id===$.id),O=x.findIndex(z=>z.id===A.id);if(T!==-1&&O!==-1){const z=xN(x,T,O);w(z),console.log("Reordered offers:",z.map(F=>({id:F.id,name:F.name}))),e({title:"Порядок изменён",description:"Оффер перемещён"})}},P=E=>{k.mutate({ids:m,status:E})},D=(E,$)=>{var A,T;switch($){case"activate":b.mutate({...E,status:"active"});break;case"archive":b.mutate({...E,status:"archived"});break;case"duplicate":const O={...E,id:void 0,createdAt:void 0,updatedAt:void 0,name:E.name+" (копия)"};b.mutate(O);break;case"delete":l(E);break;case"preview":(T=(A=E==null?void 0:E.landingPages)==null?void 0:A[0])!=null&&T.url?window.open(E.landingPages[0].url,"_blank"):e({title:"Предупреждение",description:"Нет доступной ссылки для предпросмотра",variant:"destructive"});break;case"assign":n(`/advertiser/offers/${E.id}/assign`);break;case"edit-landing":n(`/advertiser/offers/${E.id}/landing-editor`);break}};return g?r.jsx("div",{className:"w-full",children:r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):r.jsxs("div",{className:"w-full space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Мои офферы"}),r.jsx("p",{className:"text-muted-foreground",children:"Управление офферами и отслеживание статистики"})]}),r.jsxs(M,{onClick:()=>n("/advertiser/offers/new"),className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Создать новый оффер",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2 text-white"}),"Создать оффер"]})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx(ne,{placeholder:"Поиск по названию...",value:d,onChange:E=>u(E.target.value),className:"w-64"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(M,{onClick:()=>f("all"),variant:h==="all"?"default":"outline",children:"Все"}),r.jsx(M,{onClick:()=>f("active"),variant:h==="active"?"default":"outline",children:"Активные"}),r.jsx(M,{onClick:()=>f("paused"),variant:h==="paused"?"default":"outline",children:"Приостановленные"}),r.jsx(M,{onClick:()=>f("archived"),variant:h==="archived"?"default":"outline",children:"Архив"})]})]}),m.length>0&&r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(M,{onClick:()=>P("active"),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",title:"Активировать выбранные офферы",children:[r.jsx(HA,{className:"w-4 h-4 mr-1 text-white"})," Активировать"]}),r.jsxs(M,{onClick:()=>P("archived"),size:"sm",className:"bg-gray-600 hover:bg-gray-700 text-white",title:"Архивировать выбранные офферы",children:[r.jsx(zA,{className:"w-4 h-4 mr-1 text-white"})," Архивировать"]}),r.jsxs(M,{onClick:()=>P("paused"),size:"sm",className:"bg-yellow-600 hover:bg-yellow-700 text-white",title:"Приостановить выбранные офферы",children:[r.jsx(WA,{className:"w-4 h-4 mr-1 text-white"})," Приостановить"]}),r.jsxs(M,{onClick:()=>c(!0),size:"sm",variant:"destructive",className:"bg-red-600 hover:bg-red-700 text-white",title:`Удалить выбранные офферы (${m.length})`,children:[r.jsx(wr,{className:"w-4 h-4 mr-1 text-white"})," Удалить (",m.length,")"]})]}),r.jsx(WK,{onDragEnd:_,children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{className:"w-8",title:"Перетащите для изменения порядка",children:r.jsx(Bw,{className:"w-4 h-4 text-muted-foreground"})}),r.jsx(J,{children:r.jsx(on,{checked:m.length===C.length&&C.length>0,onCheckedChange:E=>{v(E?C.map($=>$.id):[])}})}),r.jsx(J,{children:"Название"}),r.jsx(J,{children:"GEO"}),r.jsx(J,{children:"Категория"}),r.jsx(J,{children:"CR"}),r.jsx(J,{children:"Payout"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Действия"})]})}),r.jsx($t,{children:r.jsx(XK,{items:C.map(E=>E.id),strategy:KK,children:C.map((E,$)=>{var A,T,O,z;return r.jsx(tVe,{offer:E,index:$,children:r.jsxs(r.Fragment,{children:[r.jsx(q,{children:r.jsx(on,{checked:m.includes(E.id),onCheckedChange:F=>{v(F?R=>[...R,E.id]:R=>R.filter(I=>I!==E.id))}})}),r.jsx(q,{className:"font-medium",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(eVe,{offer:E}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:E.name}),E.description&&r.jsx("div",{className:"text-sm text-gray-500 truncate max-w-48",children:typeof E.description=="object"?((A=E.description)==null?void 0:A.en)||((T=E.description)==null?void 0:T.ru)||"Описание":E.description})]})]})}),r.jsx(q,{children:r.jsx(Jze,{countries:E.countries,geoTargeting:E.geoTargeting,payout:E.payout,currency:E.currency,offerId:E.id,payoutByGeo:E.payoutByGeo})}),r.jsx(q,{children:r.jsx(le,{...eG(E.category),children:typeof E.category=="object"?((O=E.category)==null?void 0:O.en)||((z=E.category)==null?void 0:z.ru)||"Категория":E.category})}),r.jsxs(q,{children:[z0(E.cr),"%"]}),r.jsxs(q,{children:["$",E.payout," ",E.currency]}),r.jsx(q,{children:r.jsx(le,{variant:E.status==="active"?"default":E.status==="paused"?"secondary":E.status==="archived"?"destructive":E.status==="draft"?"outline":"default",className:E.status==="active"?"bg-green-500 hover:bg-green-600 text-white":E.status==="paused"?"bg-yellow-500 hover:bg-yellow-600 text-white":E.status==="archived"?"bg-red-500 hover:bg-red-600 text-white":E.status==="draft"?"bg-gray-500 hover:bg-gray-600 text-white border-gray-600":"bg-blue-500 hover:bg-blue-600 text-white",children:E.status==="active"?"Активный":E.status==="paused"?"Приостановлен":E.status==="archived"?"Архив":E.status==="draft"?"Черновик":E.status})}),r.jsx(q,{children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>a(E),title:"Редактировать оффер",className:"hover:bg-blue-100 hover:text-blue-600 dark:hover:bg-blue-900/20 dark:hover:text-blue-400",children:r.jsx(cs,{className:"w-4 h-4 text-blue-500"})}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>D(E,"preview"),title:"Предпросмотр оффера",className:"hover:bg-purple-100 hover:text-purple-600 dark:hover:bg-purple-900/20 dark:hover:text-purple-400",children:r.jsx(hr,{className:"w-4 h-4 text-purple-500"})}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>l(E),title:"Удалить оффер",className:"hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",children:r.jsx(wr,{className:"w-4 h-4 text-red-500"})})]})})]})},E.id)})})})]})}),s&&r.jsx(TY,{offer:s,onClose:()=>a(null),onSave:E=>{b.mutate(E),a(null)}}),r.jsx(n3,{open:!!i,onOpenChange:()=>l(null),children:r.jsxs(z_,{children:[r.jsxs(V_,{children:[r.jsx(W_,{children:"Подтвердите удаление"}),r.jsxs(H_,{children:['Вы уверены, что хотите удалить оффер "',i==null?void 0:i.name,'"?',r.jsx("br",{}),r.jsx("span",{className:"text-red-600 font-medium",children:"Это действие необратимо."})]})]}),r.jsxs(q_,{children:[r.jsx(G_,{children:"Отмена"}),r.jsx(K_,{onClick:()=>i&&p.mutate(i.id),className:"bg-red-600 hover:bg-red-700",disabled:p.isPending,children:p.isPending?"Удаление...":"Удалить"})]})]})}),r.jsx(n3,{open:o,onOpenChange:()=>c(!1),children:r.jsxs(z_,{children:[r.jsxs(V_,{children:[r.jsx(W_,{children:"Подтвердите массовое удаление"}),r.jsxs(H_,{children:["Вы уверены, что хотите удалить ",m.length," выбранных офферов?",r.jsx("br",{}),r.jsx("span",{className:"text-red-600 font-medium",children:"Это действие необратимо."})]})]}),r.jsxs(q_,{children:[r.jsx(G_,{children:"Отмена"}),r.jsx(K_,{onClick:()=>N.mutate(m),className:"bg-red-600 hover:bg-red-700",disabled:N.isPending,children:N.isPending?"Удаление...":`Удалить ${m.length} офферов`})]})]})})]})},nVe=({partner:e,onSuccess:t,onCancel:n})=>{const{toast:s}=lt(),a=Et(),[i,l]=y.useState({username:(e==null?void 0:e.username)||"",email:(e==null?void 0:e.email)||"",firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",company:(e==null?void 0:e.company)||"",phone:(e==null?void 0:e.phone)||"",country:(e==null?void 0:e.country)||"US",language:(e==null?void 0:e.language)||"en",timezone:(e==null?void 0:e.timezone)||"UTC",trafficSources:(e==null?void 0:e.trafficSources)||[],verticals:(e==null?void 0:e.verticals)||[],tier:(e==null?void 0:e.tier)||"bronze",commissionRate:(e==null?void 0:e.commissionRate)||0,permissions:(e==null?void 0:e.permissions)||{api:!1,statistics:!0,offers:!0,finances:!1},notes:(e==null?void 0:e.notes)||"",tags:(e==null?void 0:e.tags)||[]}),o=Ee({mutationFn:d=>{const u=e?`/api/advertiser/partners/${e.id}`:"/api/advertiser/partners";return Te(u,{method:e?"PUT":"POST",body:d})},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/advertiser/partners"]}),s({title:e?"Партнер обновлен":"Партнер создан",description:e?"Данные партнера успешно обновлены":"Новый партнер добавлен в систему"}),t()},onError:d=>{s({title:"Ошибка",description:d.message||"Не удалось сохранить данные партнера",variant:"destructive"})}}),c=d=>{d.preventDefault(),o.mutate(i)};return r.jsx("div",{className:"space-y-6",children:r.jsxs("form",{onSubmit:c,className:"space-y-6",children:[r.jsxs(Zr,{defaultValue:"basic",className:"w-full",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-4",children:[r.jsx(We,{value:"basic",children:"Основное"}),r.jsx(We,{value:"business",children:"Бизнес"}),r.jsx(We,{value:"permissions",children:"Права"}),r.jsx(We,{value:"settings",children:"Настройки"})]}),r.jsx(He,{value:"basic",className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"username",children:"Имя пользователя *"}),r.jsx(ne,{id:"username",value:i.username,onChange:d=>l({...i,username:d.target.value}),placeholder:"partner123",required:!0,disabled:!!e,"data-testid":"input-partner-username"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"email",children:"Email *"}),r.jsx(ne,{id:"email",type:"email",value:i.email,onChange:d=>l({...i,email:d.target.value}),placeholder:"partner@example.com",required:!0,"data-testid":"input-partner-email"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"firstName",children:"Имя *"}),r.jsx(ne,{id:"firstName",value:i.firstName,onChange:d=>l({...i,firstName:d.target.value}),placeholder:"Иван",required:!0,"data-testid":"input-partner-first-name"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"lastName",children:"Фамилия *"}),r.jsx(ne,{id:"lastName",value:i.lastName,onChange:d=>l({...i,lastName:d.target.value}),placeholder:"Иванов",required:!0,"data-testid":"input-partner-last-name"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"company",children:"Компания"}),r.jsx(ne,{id:"company",value:i.company,onChange:d=>l({...i,company:d.target.value}),placeholder:"ООО Рога и Копыта","data-testid":"input-partner-company"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"phone",children:"Телефон"}),r.jsx(ne,{id:"phone",value:i.phone,onChange:d=>l({...i,phone:d.target.value}),placeholder:"+7 (999) 123-45-67","data-testid":"input-partner-phone"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"country",children:"Страна"}),r.jsxs(he,{value:i.country,onValueChange:d=>l({...i,country:d}),children:[r.jsx(de,{"data-testid":"select-partner-country",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"US",children:"США"}),r.jsx(S,{value:"RU",children:"Россия"}),r.jsx(S,{value:"UA",children:"Украина"}),r.jsx(S,{value:"BY",children:"Беларусь"}),r.jsx(S,{value:"KZ",children:"Казахстан"}),r.jsx(S,{value:"DE",children:"Германия"}),r.jsx(S,{value:"GB",children:"Великобритания"}),r.jsx(S,{value:"CA",children:"Канада"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"language",children:"Язык"}),r.jsxs(he,{value:i.language,onValueChange:d=>l({...i,language:d}),children:[r.jsx(de,{"data-testid":"select-partner-language",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"en",children:"English"}),r.jsx(S,{value:"ru",children:"Русский"}),r.jsx(S,{value:"es",children:"Español"}),r.jsx(S,{value:"de",children:"Deutsch"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"timezone",children:"Часовой пояс"}),r.jsxs(he,{value:i.timezone,onValueChange:d=>l({...i,timezone:d}),children:[r.jsx(de,{"data-testid":"select-partner-timezone",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"UTC",children:"UTC"}),r.jsx(S,{value:"America/New_York",children:"EST"}),r.jsx(S,{value:"Europe/London",children:"GMT"}),r.jsx(S,{value:"Europe/Moscow",children:"MSK"}),r.jsx(S,{value:"Asia/Shanghai",children:"CST"})]})]})]})]})]})}),r.jsx(He,{value:"business",className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Источники трафика"}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:["SEO","PPC","Social Media","Email","Display","Native","Push","Pop","SMS","Influencer","Affiliate","Direct"].map(d=>r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:i.trafficSources.includes(d),onChange:u=>{u.target.checked?l({...i,trafficSources:[...i.trafficSources,d]}):l({...i,trafficSources:i.trafficSources.filter(h=>h!==d)})},"data-testid":`checkbox-traffic-${d.toLowerCase().replace(" ","-")}`}),r.jsx("span",{className:"text-sm",children:d})]},d))})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Вертикали"}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:["Gambling","Dating","Finance","Crypto","E-commerce","Mobile Apps","Games","Health","Education","Travel","Sports","Tech"].map(d=>r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:i.verticals.includes(d),onChange:u=>{u.target.checked?l({...i,verticals:[...i.verticals,d]}):l({...i,verticals:i.verticals.filter(h=>h!==d)})},"data-testid":`checkbox-vertical-${d.toLowerCase().replace(" ","-")}`}),r.jsx("span",{className:"text-sm",children:d})]},d))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"tier",children:"Уровень партнера"}),r.jsxs(he,{value:i.tier,onValueChange:d=>l({...i,tier:d}),children:[r.jsx(de,{"data-testid":"select-partner-tier",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"bronze",children:"🥉 Bronze"}),r.jsx(S,{value:"silver",children:"🥈 Silver"}),r.jsx(S,{value:"gold",children:"🥇 Gold"}),r.jsx(S,{value:"platinum",children:"💎 Platinum"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"commissionRate",children:"Комиссия (%)"}),r.jsx(ne,{id:"commissionRate",type:"number",min:"0",max:"100",step:"0.1",value:i.commissionRate,onChange:d=>l({...i,commissionRate:parseFloat(d.target.value)}),placeholder:"0.0","data-testid":"input-commission-rate"})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"notes",children:"Заметки"}),r.jsx(pt,{id:"notes",value:i.notes,onChange:d=>l({...i,notes:d.target.value}),placeholder:"Дополнительная информация о партнере",rows:3,"data-testid":"textarea-partner-notes"})]})]})}),r.jsx(He,{value:"permissions",className:"space-y-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"permApi",children:"API доступ"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Разрешить использование API"})]}),r.jsx(Ye,{id:"permApi",checked:i.permissions.api,onCheckedChange:d=>l({...i,permissions:{...i.permissions,api:d}}),"data-testid":"switch-permission-api"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"permStats",children:"Статистика"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Доступ к подробной статистике"})]}),r.jsx(Ye,{id:"permStats",checked:i.permissions.statistics,onCheckedChange:d=>l({...i,permissions:{...i.permissions,statistics:d}}),"data-testid":"switch-permission-stats"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"permOffers",children:"Офферы"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Просмотр и подача заявок на офферы"})]}),r.jsx(Ye,{id:"permOffers",checked:i.permissions.offers,onCheckedChange:d=>l({...i,permissions:{...i.permissions,offers:d}}),"data-testid":"switch-permission-offers"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"permFinances",children:"Финансы"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Доступ к финансовой информации"})]}),r.jsx(Ye,{id:"permFinances",checked:i.permissions.finances,onCheckedChange:d=>l({...i,permissions:{...i.permissions,finances:d}}),"data-testid":"switch-permission-finances"})]})]})}),r.jsx(He,{value:"settings",className:"space-y-4",children:r.jsx("div",{className:"grid gap-4",children:r.jsxs("div",{children:[r.jsx(L,{htmlFor:"tags",children:"Теги (через запятую)"}),r.jsx(ne,{id:"tags",value:i.tags.join(", "),onChange:d=>l({...i,tags:d.target.value.split(",").map(u=>u.trim()).filter(u=>u.length>0)}),placeholder:"VIP, высокий объем, проверенный","data-testid":"input-partner-tags"})]})})})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[r.jsx(M,{type:"button",variant:"outline",onClick:n,"data-testid":"button-cancel",children:"Отмена"}),r.jsx(M,{type:"submit",disabled:o.isPending,"data-testid":"button-save-partner",children:o.isPending?"Сохранение...":e?"Сохранить":"Создать"})]})]})})};function sVe(){const{user:e}=Jt();Os();const{toast:t}=lt(),n=Et(),[s,a]=y.useState(""),[i,l]=y.useState({status:"all",tier:"all",kycStatus:"all",country:"all"}),[o,c]=y.useState("registrationDate"),[d,u]=y.useState("desc"),[h,f]=y.useState([]),[m,v]=y.useState(!1),[x,w]=y.useState(null),[j,g]=y.useState(!1),{data:b,isLoading:p,refetch:N}=$e({queryKey:["/api/advertiser/partners",s,i,o,d],enabled:!!e});Ee({mutationFn:({partnerId:O,status:z})=>Te(`/api/advertiser/partners/${O}/status`,{method:"PATCH",body:{status:z}}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/advertiser/partners"]}),t({title:"Статус изменен",description:"Статус партнера успешно обновлен"})}});const k=Ee({mutationFn:O=>Te("/api/advertiser/partners/invite",{method:"POST",body:O}),onSuccess:()=>{t({title:"Приглашение отправлено",description:"Приглашение успешно отправлено на email"}),g(!1)}}),C=Ee({mutationFn:({action:O,partnerIds:z})=>Te("/api/advertiser/partners/bulk",{method:"POST",body:{action:O,partnerIds:z}}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/advertiser/partners"]}),f([]),t({title:"Операция выполнена",description:"Массовая операция успешно выполнена"})}}),_=O=>{w(O),v(!0)},P=O=>{h.length!==0&&C.mutate({action:O,partnerIds:h})},D=O=>{const z=`${window.location.origin}/register?ref=${O.referralCode}`;navigator.clipboard.writeText(z),t({title:"Скопировано",description:"Реферальная ссылка скопирована в буфер обмена"})},E=O=>{const z={active:{label:"Активен",variant:"default",color:"bg-green-500"},pending:{label:"На модерации",variant:"outline",color:"bg-yellow-500"},suspended:{label:"Приостановлен",variant:"secondary",color:"bg-orange-500"},blocked:{label:"Заблокирован",variant:"destructive",color:"bg-red-500"}},F=z[O]||z.pending;return r.jsxs(le,{variant:F.variant,className:"flex items-center gap-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${F.color}`}),F.label]})},$=O=>{const z={pending:{label:"На проверке",variant:"outline",icon:lr},approved:{label:"Верифицирован",variant:"default",icon:nr},rejected:{label:"Отклонен",variant:"destructive",icon:zt}},F=z[O]||z.pending,R=F.icon;return r.jsxs(le,{variant:F.variant,className:"flex items-center gap-1",children:[r.jsx(R,{className:"w-3 h-3"}),F.label]})},A=O=>({bronze:"🥉",silver:"🥈",gold:"🥇",platinum:"💎"})[O]||"🥉",T=(b==null?void 0:b.filter(O=>!(s&&!(O.username.toLowerCase().includes(s.toLowerCase())||O.email.toLowerCase().includes(s.toLowerCase())||`${O.firstName} ${O.lastName}`.toLowerCase().includes(s.toLowerCase()))||i.status!=="all"&&O.status!==i.status||i.tier!=="all"&&O.tier!==i.tier||i.kycStatus!=="all"&&O.kycStatus!==i.kycStatus||i.country!=="all"&&O.country!==i.country)))||[];return p?r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((O,z)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded"},z))})}):r.jsxs("div",{className:"w-full space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Управление партнерами"}),r.jsx("p",{className:"text-gray-600",children:"Управляйте вашими партнерами и их правами доступа"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(M,{variant:"outline",onClick:()=>g(!0),"data-testid":"button-invite-partner",children:[r.jsx(Si,{className:"w-4 h-4 mr-2"}),"Пригласить"]}),r.jsxs(M,{onClick:()=>{w(null),v(!0)},"data-testid":"button-create-partner",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Добавить партнера"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(W,{children:r.jsx(H,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Всего партнеров"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(b==null?void 0:b.length)||0})]}),r.jsx(ar,{className:"w-8 h-8 text-blue-500"})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Активные"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:(b==null?void 0:b.filter(O=>O.status==="active").length)||0})]}),r.jsx(Mi,{className:"w-8 h-8 text-green-500"})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Общий доход"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"$0"})]}),r.jsx(Rt,{className:"w-8 h-8 text-purple-500"})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Средний рейтинг"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:b&&b.length>0?(b.reduce((O,z)=>O+(z.rating||0),0)/b.length).toFixed(1):"0.0"})]}),r.jsx(V2,{className:"w-8 h-8 text-orange-500"})]})})})]}),r.jsx(W,{children:r.jsxs(H,{className:"p-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск по имени, email или логину...",value:s,onChange:O=>a(O.target.value),className:"pl-10","data-testid":"input-search-partners"})]})}),r.jsxs(he,{value:i.status,onValueChange:O=>l({...i,status:O}),children:[r.jsx(de,{className:"w-40","data-testid":"select-filter-status",children:r.jsx(fe,{placeholder:"Статус"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все статусы"}),r.jsx(S,{value:"active",children:"Активные"}),r.jsx(S,{value:"pending",children:"На модерации"}),r.jsx(S,{value:"suspended",children:"Приостановленные"}),r.jsx(S,{value:"blocked",children:"Заблокированные"})]})]}),r.jsxs(he,{value:i.tier,onValueChange:O=>l({...i,tier:O}),children:[r.jsx(de,{className:"w-40","data-testid":"select-filter-tier",children:r.jsx(fe,{placeholder:"Уровень"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все уровни"}),r.jsx(S,{value:"bronze",children:"🥉 Bronze"}),r.jsx(S,{value:"silver",children:"🥈 Silver"}),r.jsx(S,{value:"gold",children:"🥇 Gold"}),r.jsx(S,{value:"platinum",children:"💎 Platinum"})]})]}),r.jsxs(he,{value:i.kycStatus,onValueChange:O=>l({...i,kycStatus:O}),children:[r.jsx(de,{className:"w-40","data-testid":"select-filter-kyc",children:r.jsx(fe,{placeholder:"KYC"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все KYC"}),r.jsx(S,{value:"pending",children:"На проверке"}),r.jsx(S,{value:"approved",children:"Верифицированы"}),r.jsx(S,{value:"rejected",children:"Отклонены"})]})]})]}),h.length>0&&r.jsxs("div",{className:"flex items-center gap-2 mt-4 p-3 bg-blue-50 rounded-lg",children:[r.jsxs("span",{className:"text-sm text-blue-600",children:["Выбрано: ",h.length," партнеров"]}),r.jsxs("div",{className:"flex gap-2 ml-auto",children:[r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>P("activate"),"data-testid":"button-bulk-activate",children:[r.jsx(Mi,{className:"w-4 h-4 mr-1"}),"Активировать"]}),r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>P("suspend"),"data-testid":"button-bulk-suspend",children:[r.jsx($f,{className:"w-4 h-4 mr-1"}),"Приостановить"]}),r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>P("block"),"data-testid":"button-bulk-block",children:[r.jsx(Lt,{className:"w-4 h-4 mr-1"}),"Заблокировать"]})]})]})]})}),r.jsx(W,{children:r.jsxs(H,{className:"p-0",children:[r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{className:"w-12",children:r.jsx("input",{type:"checkbox",checked:h.length===T.length&&T.length>0,onChange:O=>{O.target.checked?f(T.map(z=>z.id)):f([])},"data-testid":"checkbox-select-all"})}),r.jsx(J,{children:"Партнер"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Уровень"}),r.jsx(J,{children:"Статистика"}),r.jsx(J,{children:"Баланс"}),r.jsx(J,{children:"Регистрация"}),r.jsx(J,{className:"w-32",children:"Действия"})]})}),r.jsx($t,{children:T.map(O=>{var z,F,R,I,Q,Y;return r.jsxs(Re,{className:"hover:bg-gray-50",children:[r.jsx(q,{children:r.jsx("input",{type:"checkbox",checked:h.includes(O.id),onChange:K=>{K.target.checked?f([...h,O.id]):f(h.filter(oe=>oe!==O.id))},"data-testid":`checkbox-partner-${O.id}`})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:[O.firstName.charAt(0),O.lastName.charAt(0)]}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:[O.firstName," ",O.lastName]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["@",O.username]}),r.jsx("p",{className:"text-sm text-gray-500",children:O.email}),O.company&&r.jsx("p",{className:"text-xs text-gray-400",children:O.company})]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"space-y-1",children:[E(O.status),$(O.kycStatus)]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-lg",children:A(O.tier)}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium capitalize",children:O.tier}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(V2,{className:"w-3 h-3 text-yellow-500"}),r.jsxs("span",{className:"text-xs text-gray-600",children:[O.rating,"/5"]})]})]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Клики:"}),r.jsx("span",{className:"font-medium",children:((F=(z=O.statistics)==null?void 0:z.totalClicks)==null?void 0:F.toLocaleString())||"0"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"CR:"}),r.jsxs("span",{className:"font-medium text-purple-600",children:[((R=O.statistics)==null?void 0:R.averageCR)||"0","%"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"EPC:"}),r.jsxs("span",{className:"font-medium text-blue-600",children:["$",((I=O.statistics)==null?void 0:I.averageEPC)||"0"]})]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Баланс:"}),r.jsxs("span",{className:"font-medium text-green-600",children:["$",(O.balance||0).toFixed(2)]})]}),(O.holdAmount||0)>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Удержано:"}),r.jsxs("span",{className:"font-medium text-orange-600",children:["$",(O.holdAmount||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Доход:"}),r.jsxs("span",{className:"font-medium",children:["$",((Y=(Q=O.statistics)==null?void 0:Q.totalRevenue)==null?void 0:Y.toLocaleString())||"0"]})]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{children:new Date(O.registrationDate).toLocaleDateString("ru-RU")}),r.jsx("p",{className:"text-gray-500",children:O.country}),r.jsxs("p",{className:"text-xs text-gray-400",children:["Активность: ",new Date(O.lastActivity).toLocaleDateString("ru-RU")]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>_(O),title:"Редактировать партнера","data-testid":`button-edit-${O.id}`,children:r.jsx(cs,{className:"w-4 h-4"})}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>D(O),title:"Скопировать реферальную ссылку","data-testid":`button-copy-ref-${O.id}`,children:r.jsx(Yr,{className:"w-4 h-4"})}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>window.open(`/partner/${O.id}/stats`,"_blank"),title:"Статистика партнера","data-testid":`button-stats-${O.id}`,children:r.jsx(cr,{className:"w-4 h-4"})}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>window.open(`mailto:${O.email}`,"_blank"),title:"Написать письмо","data-testid":`button-email-${O.id}`,children:r.jsx(qw,{className:"w-4 h-4"})})]})})]},O.id)})})]}),T.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ar,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Нет партнеров"}),r.jsx("p",{className:"text-gray-500 mb-4",children:s||Object.values(i).some(O=>O!=="all")?"По вашему запросу ничего не найдено":"Пригласите ваших первых партнеров"}),r.jsxs(M,{onClick:()=>g(!0),"data-testid":"button-invite-first-partner",children:[r.jsx(Si,{className:"w-4 h-4 mr-2"}),"Пригласить партнера"]})]})]})}),r.jsx(jt,{open:m,onOpenChange:v,children:r.jsxs(vt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(yt,{children:r.jsx(bt,{children:x?"Редактирование партнера":"Добавление нового партнера"})}),r.jsx(nVe,{partner:x||void 0,onSuccess:()=>v(!1),onCancel:()=>v(!1)})]})}),r.jsx(jt,{open:j,onOpenChange:g,children:r.jsxs(vt,{className:"max-w-md",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Пригласить партнера"})}),r.jsxs("form",{onSubmit:O=>{O.preventDefault();const z=new FormData(O.currentTarget);k.mutate({email:z.get("email"),message:z.get("message")})},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"inviteEmail",children:"Email партнера *"}),r.jsx(ne,{id:"inviteEmail",name:"email",type:"email",placeholder:"partner@example.com",required:!0,"data-testid":"input-invite-email"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"inviteMessage",children:"Сообщение (необязательно)"}),r.jsx(pt,{id:"inviteMessage",name:"message",placeholder:"Персональное сообщение для партнера",rows:3,"data-testid":"textarea-invite-message"})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(M,{type:"button",variant:"outline",onClick:()=>g(!1),"data-testid":"button-cancel-invite",children:"Отмена"}),r.jsx(M,{type:"submit",disabled:k.isPending,"data-testid":"button-send-invite",children:k.isPending?"Отправка...":"Отправить приглашение"})]})]})]})})]})}const fd={buyer:{name:"Байер",color:"bg-blue-100 text-blue-800",icon:r.jsx(Jc,{className:"h-4 w-4"}),permissions:["view_offers","generate_links","view_statistics"],defaultPermissions:["view_offers","generate_links","view_statistics"]},analyst:{name:"Аналитик",color:"bg-green-100 text-green-800",icon:r.jsx(cr,{className:"h-4 w-4"}),permissions:["view_offers","view_statistics","view_creatives"],defaultPermissions:["view_offers","view_statistics","view_creatives"]},manager:{name:"Менеджер",color:"bg-purple-100 text-purple-800",icon:r.jsx(Lt,{className:"h-4 w-4"}),permissions:["view_offers","generate_links","view_statistics","view_creatives","manage_team"],defaultPermissions:["view_offers","generate_links","view_statistics","view_creatives","manage_team"]}},bS=[{id:"view_offers",name:"Просмотр офферов",description:"Доступ к списку офферов"},{id:"generate_links",name:"Генерация ссылок",description:"Создание трекинговых ссылок"},{id:"view_statistics",name:"Статистика",description:"Просмотр статистики и отчётов"},{id:"view_creatives",name:"Креативы",description:"Доступ к креативам и материалам"},{id:"view_payouts",name:"Выплаты",description:"Просмотр информации о выплатах"},{id:"manage_team",name:"Управление командой",description:"Добавление и управление участниками"}];function aVe(){const[e,t]=y.useState(!1),[n,s]=y.useState(null),[a,i]=y.useState({email:"",username:"",password:"",role:"buyer",permissions:[],subIdPrefix:""}),{toast:l}=lt(),{t:o}=_r(),c=Et(),{data:d=[],isLoading:u}=$e({queryKey:["/api/affiliate/team"]}),h=Ee({mutationFn:j=>Te("/api/affiliate/team","POST",j),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/affiliate/team"]}),t(!1),i({email:"",username:"",password:"",role:"buyer",permissions:[],subIdPrefix:""}),l({title:"Участник добавлен",description:"Новый участник команды успешно добавлен"})},onError:j=>{console.error("Create member error:",j);const g=(j==null?void 0:j.message)||(j==null?void 0:j.error)||"Не удалось добавить участника команды";l({title:"Ошибка",description:g,variant:"destructive"})}}),f=Ee({mutationFn:({id:j,...g})=>Te(`/api/affiliate/team/${j}`,"PATCH",g),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/affiliate/team"]}),s(null),l({title:"Участник обновлён",description:"Информация об участнике команды обновлена"})},onError:j=>{console.error("Update member error:",j),l({title:"Ошибка",description:(j==null?void 0:j.message)||"Не удалось обновить участника команды",variant:"destructive"})}}),m=Ee({mutationFn:j=>Te(`/api/affiliate/team/${j}`,"DELETE"),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/affiliate/team"]}),l({title:"Участник удалён",description:"Участник команды удалён из системы"})},onError:()=>{l({title:"Ошибка",description:"Не удалось удалить участника команды",variant:"destructive"})}}),v=j=>{const g=fd[j].defaultPermissions;i(b=>({...b,role:j,permissions:g}))},x=(j,g)=>{i(b=>({...b,permissions:g?[...b.permissions,j]:b.permissions.filter(p=>p!==j)}))},w=j=>{confirm(`Вы уверены, что хотите удалить участника ${j.username}?`)&&m.mutate(j.id)};return u?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-32 bg-gray-200 rounded"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:o("team.title")}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Добавляйте байеров, аналитиков и менеджеров для работы с офферами"})]}),r.jsxs(jt,{open:e,onOpenChange:t,children:[r.jsx(Xa,{asChild:!0,children:r.jsxs(M,{"data-testid":"button-add-team-member",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить участника"]})}),r.jsxs(vt,{className:"max-w-md",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Добавить участника команды"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"email",children:"Email"}),r.jsx(ne,{id:"email",type:"email",value:a.email,onChange:j=>i(g=>({...g,email:j.target.value})),placeholder:"user@example.com","data-testid":"input-team-member-email"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"username",children:"Имя пользователя"}),r.jsx(ne,{id:"username",value:a.username,onChange:j=>i(g=>({...g,username:j.target.value})),placeholder:"username","data-testid":"input-team-member-username"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"password",children:"Пароль"}),r.jsx(ne,{id:"password",type:"password",value:a.password,onChange:j=>i(g=>({...g,password:j.target.value})),placeholder:"••••••••","data-testid":"input-team-member-password"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"role",children:"Роль"}),r.jsxs(he,{value:a.role,onValueChange:v,children:[r.jsx(de,{"data-testid":"select-team-member-role",children:r.jsx(fe,{})}),r.jsx(ue,{children:Object.entries(fd).map(([j,g])=>r.jsx(S,{value:j,children:r.jsxs("div",{className:"flex items-center gap-2",children:[g.icon,g.name]})},j))})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"subIdPrefix",children:"Префикс SubID"}),r.jsx(ne,{id:"subIdPrefix",value:a.subIdPrefix,onChange:j=>i(g=>({...g,subIdPrefix:j.target.value})),placeholder:"buyer1","data-testid":"input-team-member-subid"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Уникальный префикс для идентификации трафика этого участника"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Разрешения"}),r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:bS.map(j=>r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(on,{id:j.id,checked:a.permissions.includes(j.id),onCheckedChange:g=>x(j.id,g),"data-testid":`checkbox-permission-${j.id}`}),r.jsxs("div",{className:"grid gap-1.5 leading-none",children:[r.jsx("label",{htmlFor:j.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:j.name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:j.description})]})]},j.id))})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{variant:"outline",onClick:()=>t(!1),"data-testid":"button-cancel-team-member",children:"Отмена"}),r.jsx(M,{onClick:()=>h.mutate(a),disabled:h.isPending,"data-testid":"button-save-team-member",children:h.isPending?"Добавление...":"Добавить"})]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(W,{children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ar,{className:"h-5 w-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Всего участников"}),r.jsx("p",{className:"text-2xl font-bold",children:d.length})]})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jc,{className:"h-5 w-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Байеров"}),r.jsx("p",{className:"text-2xl font-bold",children:d.filter(j=>j.role==="buyer").length})]})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cr,{className:"h-5 w-5 text-purple-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Аналитиков"}),r.jsx("p",{className:"text-2xl font-bold",children:d.filter(j=>j.role==="analyst").length})]})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mi,{className:"h-5 w-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Активных"}),r.jsx("p",{className:"text-2xl font-bold",children:d.filter(j=>j.isActive).length})]})]})})})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{children:["Участники команды (",d.length,")"]}),r.jsx(Je,{children:"Управление байерами, аналитиками и менеджерами"})]}),r.jsx(H,{children:d.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(ar,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),r.jsx("p",{children:"У вас пока нет участников команды"}),r.jsx("p",{className:"text-sm",children:"Добавьте байеров и аналитиков для эффективной работы"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Участник"}),r.jsx(J,{children:"Роль"}),r.jsx(J,{children:"SubID Prefix"}),r.jsx(J,{children:"Разрешения"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Добавлен"}),r.jsx(J,{children:"Действия"})]})}),r.jsx($t,{children:d.map(j=>r.jsxs(Re,{children:[r.jsx(q,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:j.username}),r.jsx("p",{className:"text-sm text-muted-foreground",children:j.email})]})}),r.jsx(q,{children:r.jsx(le,{className:fd[j.role].color,children:r.jsxs("div",{className:"flex items-center gap-1",children:[fd[j.role].icon,fd[j.role].name]})})}),r.jsx(q,{children:r.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:j.subIdPrefix||"N/A"})}),r.jsx(q,{children:r.jsxs("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[j.permissions.slice(0,2).map(g=>{const b=bS.find(p=>p.id===g);return r.jsx(le,{variant:"outline",className:"text-xs",children:b==null?void 0:b.name.split(" ")[0]},g)}),j.permissions.length>2&&r.jsxs(le,{variant:"outline",className:"text-xs",children:["+",j.permissions.length-2]})]})}),r.jsx(q,{children:r.jsx(le,{variant:j.isActive?"default":"secondary",children:j.isActive?"Активен":"Неактивен"})}),r.jsx(q,{children:new Date(j.createdAt).toLocaleDateString("ru-RU")}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(M,{variant:"outline",size:"sm",onClick:()=>s(j),title:"Редактировать","data-testid":`button-edit-${j.id}`,children:r.jsx(cs,{className:"h-4 w-4"})}),r.jsx(M,{variant:"outline",size:"sm",onClick:()=>w(j),title:"Удалить",className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${j.id}`,children:r.jsx(wr,{className:"h-4 w-4"})})]})})]},j.id))})]})})})]}),n&&r.jsx(jt,{open:!!n,onOpenChange:()=>s(null),children:r.jsxs(vt,{className:"max-w-md",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Редактировать участника команды"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Email"}),r.jsx(ne,{value:n.email,disabled:!0,className:"bg-gray-50"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email нельзя изменить"})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Имя пользователя"}),r.jsx(ne,{value:n.username,disabled:!0,className:"bg-gray-50"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Имя пользователя нельзя изменить"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"editRole",children:"Роль"}),r.jsxs(he,{value:n.role,onValueChange:j=>{const g=fd[j].defaultPermissions;s(b=>b?{...b,role:j,permissions:g}:null)},children:[r.jsx(de,{"data-testid":"select-edit-role",children:r.jsx(fe,{})}),r.jsx(ue,{children:Object.entries(fd).map(([j,g])=>r.jsx(S,{value:j,children:r.jsxs("div",{className:"flex items-center gap-2",children:[g.icon,g.name]})},j))})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"editSubIdPrefix",children:"Префикс SubID"}),r.jsx(ne,{id:"editSubIdPrefix",value:n.subIdPrefix,onChange:j=>s(g=>g?{...g,subIdPrefix:j.target.value}:null),placeholder:"buyer1","data-testid":"input-edit-subid"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"editIsActive",children:"Статус"}),r.jsxs(he,{value:n.isActive?"active":"inactive",onValueChange:j=>{s(g=>g?{...g,isActive:j==="active"}:null)},children:[r.jsx(de,{"data-testid":"select-edit-status",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"active",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mi,{className:"h-4 w-4 text-green-600"}),"Активен"]})}),r.jsx(S,{value:"inactive",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($f,{className:"h-4 w-4 text-gray-600"}),"Неактивен"]})})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Разрешения"}),r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:bS.map(j=>r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(on,{id:`edit-${j.id}`,checked:n.permissions.includes(j.id),onCheckedChange:g=>{s(b=>b?{...b,permissions:g?[...b.permissions,j.id]:b.permissions.filter(p=>p!==j.id)}:null)},"data-testid":`checkbox-edit-permission-${j.id}`}),r.jsxs("div",{className:"grid gap-1.5 leading-none",children:[r.jsx("label",{htmlFor:`edit-${j.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:j.name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:j.description})]})]},j.id))})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(M,{variant:"outline",onClick:()=>s(null),"data-testid":"button-cancel-edit",children:"Отмена"}),r.jsx(M,{onClick:()=>{n&&f.mutate({id:n.id,role:n.role,permissions:n.permissions,subIdPrefix:n.subIdPrefix,isActive:n.isActive})},disabled:f.isPending,"data-testid":"button-save-edit",children:f.isPending?"Сохранение...":"Сохранить"})]})]})]})})]})}function iVe(){const{user:e}=Jt(),{toast:t}=lt(),{t:n}=_r(),s=Et();y.useEffect(()=>{const w=localStorage.getItem("auth_token");console.log("🔍 PartnerNotifications component - token check:",{token:w?w.substring(0,20)+"...":"NO_TOKEN",user:e==null?void 0:e.username})},[e]);const{data:a=[],isLoading:i}=$e({queryKey:["/api/notifications"],enabled:!!(e!=null&&e.id)}),l=()=>{const w=localStorage.getItem("auth_token");return console.log("🔍 Getting auth token:",{hasToken:!!w,isNull:w==="null",isEmpty:w==="",tokenStart:w?w.substring(0,20):"NO_TOKEN"}),w&&w!=="null"&&w!=="undefined"&&w.trim()!==""?w:null},o=Ee({mutationKey:["markAsRead"],mutationFn:async w=>{console.log("🚀 Starting markAsRead mutation for:",w);const j=l();if(!j)throw console.error("❌ No valid auth token found"),new Error("Authentication required - please re-login");console.log("✅ Valid token found, making request...");try{const g=await fetch(`/api/notifications/${w}/read`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`}});if(console.log("📡 Response received:",{status:g.status,statusText:g.statusText,ok:g.ok}),!g.ok){const p=await g.text();throw console.error("❌ Request failed:",{status:g.status,error:p}),new Error(`Failed to mark as read: ${g.status} ${g.statusText}`)}const b=await g.json();return console.log("✅ Mark as read successful:",b),b}catch(g){throw console.error("❌ Network error in markAsRead:",g),g}},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/notifications"]}),s.invalidateQueries({queryKey:["/api/partner/dashboard"]})},onError:w=>{t({title:"Ошибка",description:"Не удалось отметить уведомление как прочитанное",variant:"destructive"})}}),c=Ee({mutationFn:async w=>{const j=localStorage.getItem("auth_token");if(!j||j==="null"||j==="undefined")throw new Error("No valid token found");const g=await fetch(`/api/notifications/${w}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`}});if(!g.ok)throw new Error(`HTTP ${g.status}: ${g.statusText}`);return g.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/notifications"]}),s.invalidateQueries({queryKey:["/api/partner/dashboard"]}),t({title:"Успех",description:"Уведомление удалено"})},onError:w=>{t({title:"Ошибка",description:"Не удалось удалить уведомление",variant:"destructive"})}}),d=Ee({mutationFn:async()=>{await Te("/api/notifications/mark-all-read","PUT")},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/notifications"]}),t({title:"Успех",description:"Все уведомления отмечены как прочитанные"})},onError:w=>{t({title:"Ошибка",description:"Не удалось отметить уведомления как прочитанные",variant:"destructive"})}}),u=w=>{o.mutate(w)},h=w=>{c.mutate(w)},f=()=>{d.mutate()},m=w=>{switch(w){case"offer_request_approved":return r.jsx(oo,{className:"w-5 h-5 text-green-600"});case"offer_request_rejected":return r.jsx(zt,{className:"w-5 h-5 text-red-600"});case"offer_request_created":return r.jsx(lr,{className:"w-5 h-5 text-blue-600"});case"payment":return r.jsx(oo,{className:"w-5 h-5 text-green-600"});default:return r.jsx(In,{className:"w-5 h-5 text-gray-600"})}},v=w=>{switch(w){case"offer_request_approved":return r.jsx(le,{className:"bg-green-100 text-green-800",children:"Одобрено"});case"offer_request_rejected":return r.jsx(le,{className:"bg-red-100 text-red-800",children:"Отклонено"});case"offer_request_created":return r.jsx(le,{className:"bg-blue-100 text-blue-800",children:"Новый запрос"});case"payment":return r.jsx(le,{className:"bg-green-100 text-green-800",children:"Выплата"});default:return r.jsx(le,{className:"bg-gray-100 text-gray-800",children:"Общее"})}},x=a.filter(w=>!w.is_read).length;return i?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Загрузка уведомлений..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(In,{className:"w-6 h-6 text-blue-600"}),r.jsx("h1",{className:"text-2xl font-bold",children:n("notifications.title")}),x>0&&r.jsxs(le,{className:"bg-red-100 text-red-800",children:[x," непрочитанных"]})]}),x>0&&r.jsxs(M,{onClick:f,disabled:d.isPending,variant:"outline",size:"sm",children:[r.jsx(fn,{className:"w-4 h-4 mr-2"}),"Отметить все как прочитанные"]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Все уведомления"})}),r.jsx(H,{children:a.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(In,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Уведомлений нет"}),r.jsx("p",{className:"text-gray-600",children:"Здесь будут отображаться уведомления о статусе ваших запросов на офферы"})]}):r.jsx("div",{className:"space-y-4",children:a.map(w=>{var j,g;return r.jsx("div",{className:`p-4 rounded-lg border transition-colors ${w.is_read?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[m(w.type),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:`font-medium ${w.is_read?"text-gray-900":"text-blue-900"}`,children:w.title}),v(w.type)]}),r.jsx("p",{className:`text-sm ${w.is_read?"text-gray-600":"text-blue-700"}`,children:w.message}),((j=w.metadata)==null?void 0:j.rejectReason)&&r.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm",children:[r.jsx("strong",{children:"Причина отклонения:"})," ",w.metadata.rejectReason]}),((g=w.metadata)==null?void 0:g.amount)&&r.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded text-sm",children:[r.jsx("strong",{children:"Сумма:"})," ",w.metadata.amount," ",w.metadata.currency||"USD"]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:Xx(new Date(w.created_at),{addSuffix:!0,locale:gl})})]})]}),r.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[!w.is_read&&r.jsx(M,{onClick:()=>u(w.id),disabled:o.isPending,variant:"outline",size:"sm",children:r.jsx(fn,{className:"w-4 h-4"})}),r.jsx(M,{onClick:()=>h(w.id),disabled:c.isPending,variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:r.jsx(Tn,{className:"w-4 h-4"})})]})]})},w.id)})})})]})]})}function PF(){var w,j;const{toast:e}=lt(),[t,n]=y.useState({from:new Date(Date.now()-30*24*60*60*1e3),to:new Date}),[s,a]=y.useState({country:"all",device:"all",offerId:"all"}),{data:i,isLoading:l}=$e({queryKey:["/api/advertiser/dashboard-metrics"]}),{data:o,isLoading:c}=$e({queryKey:["/api/advertiser/live-statistics",t,s],queryFn:()=>{const g=new URLSearchParams;return t.from&&g.append("dateFrom",t.from.toISOString()),t.to&&g.append("dateTo",t.to.toISOString()),s.country!=="all"&&g.append("country",s.country),s.device!=="all"&&g.append("device",s.device),s.offerId!=="all"&&g.append("offerId",s.offerId),fetch(`/api/advertiser/live-statistics?${g}`).then(b=>b.json())}}),d=()=>{e({title:"Фильтры",description:"Фильтры уже доступны в боковой панели"})},u=()=>{e({title:"Календарь",description:"Используйте кнопки 7д/30д ниже для быстрого выбора периода"})},h=()=>{if(!o||o.length===0){e({title:"Нет данных",description:"Нет данных для экспорта",variant:"destructive"});return}const g=[["Дата","Клики","Уники","Конверсии","Доход","CR%","EPC"],...o.map(N=>[N.date,N.clicks,N.uniqueClicks||N.clicks,N.conversions,N.revenue.toFixed(2),N.clicks>0?(N.conversions/N.clicks*100).toFixed(2):"0",N.clicks>0?(N.revenue/N.clicks).toFixed(2):"0"])].map(N=>N.join(",")).join(`
`),b=new Blob([g],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a");p.href=URL.createObjectURL(b),p.download=`dashboard-data-${new Date().toISOString().split("T")[0]}.csv`,p.click(),e({title:"Экспорт завершен",description:"Данные успешно экспортированы в CSV файл"})},f=Z.useMemo(()=>{if(!o||o.length===0)return null;const g=o.reduce((C,_)=>C+_.clicks,0),b=o.reduce((C,_)=>C+_.conversions,0),p=o.reduce((C,_)=>C+_.revenue,0),N=g>0?b/g*100:0,k=g>0?p/g:0;return{totalClicks:g,totalConversions:b,totalRevenue:p,avgCR:N,epc:k,activeOffers:5,partnersCount:12}},[o]),m=[{id:1,name:"Casino Royal",cr:15.2,status:"active",revenue:12500},{id:2,name:"Betting Pro",cr:12.8,status:"active",revenue:9800},{id:3,name:"Sports King",cr:11.5,status:"paused",revenue:7600}],v=[{id:1,title:"Новый партнёр",message:"Partner_123 подключился к офферу Casino Royal",time:"5 мин назад"},{id:2,title:"Подозрительная активность",message:"Обнаружен фрод в оффере Betting Pro",time:"15 мин назад"},{id:3,title:"Цель достигнута",message:"Оффер Sports King достиг 1000 конверсий",time:"1 час назад"}];if(l)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-lg",children:"Загрузка дашборда..."})});const x=i||f;return r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Дашборд рекламодателя"}),r.jsx("p",{className:"text-muted-foreground",children:"Обзор ключевых метрик и управление кампаниями"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(M,{variant:"outline",size:"sm","data-testid":"button-filter",onClick:d,children:[r.jsx(Ks,{className:"h-4 w-4 mr-2"}),"Фильтры"]}),r.jsxs(M,{variant:"outline",size:"sm","data-testid":"button-calendar",onClick:u,children:[r.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Период"]}),r.jsxs(M,{variant:"outline",size:"sm","data-testid":"button-export",onClick:h,children:[r.jsx(vr,{className:"h-4 w-4 mr-2"}),"Экспорт"]})]})]}),r.jsxs(W,{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20",children:[r.jsxs(se,{children:[r.jsx(ae,{className:"text-lg",children:"Фильтры и период"}),r.jsx(Je,{children:"Настройте отображаемые данные"})]}),r.jsx(H,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Страна"}),r.jsxs(he,{value:s.country,onValueChange:g=>a({...s,country:g}),children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите страну"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все страны"}),r.jsx(S,{value:"US",children:"США"}),r.jsx(S,{value:"CA",children:"Канада"}),r.jsx(S,{value:"GB",children:"Великобритания"}),r.jsx(S,{value:"DE",children:"Германия"}),r.jsx(S,{value:"FR",children:"Франция"}),r.jsx(S,{value:"RU",children:"Россия"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Устройство"}),r.jsxs(he,{value:s.device,onValueChange:g=>a({...s,device:g}),children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите устройство"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все устройства"}),r.jsx(S,{value:"mobile",children:"Мобильные"}),r.jsx(S,{value:"desktop",children:"Десктоп"}),r.jsx(S,{value:"tablet",children:"Планшеты"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Оффер"}),r.jsxs(he,{value:s.offerId,onValueChange:g=>a({...s,offerId:g}),children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите оффер"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все офферы"}),r.jsx(S,{value:"offer_1",children:"Casino Royal"}),r.jsx(S,{value:"offer_2",children:"Betting Pro"}),r.jsx(S,{value:"offer_3",children:"Sports King"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Период"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(M,{variant:"outline",size:"sm",onClick:()=>n({from:new Date(Date.now()-7*24*60*60*1e3),to:new Date}),className:t.from&&Date.now()-t.from.getTime()<=7*24*60*60*1e3?"bg-blue-100":"",children:"7д"}),r.jsx(M,{variant:"outline",size:"sm",onClick:()=>n({from:new Date(Date.now()-30*24*60*60*1e3),to:new Date}),className:t.from&&Date.now()-t.from.getTime()<=30*24*60*60*1e3&&Date.now()-t.from.getTime()>7*24*60*60*1e3?"bg-blue-100":"",children:"30д"})]})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[r.jsxs(W,{"data-testid":"card-total-clicks",className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Клики"}),r.jsx("div",{className:"p-2 bg-blue-500 rounded-lg shadow-lg",children:r.jsx(ln,{className:"h-4 w-4 text-white"})})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:(x==null?void 0:x.totalClicks)||0}),r.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-400",children:"всего кликов"})]})]}),r.jsxs(W,{"data-testid":"card-conversions",className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-700",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Конверсии"}),r.jsx("div",{className:"p-2 bg-green-500 rounded-lg shadow-lg",children:r.jsx(Kt,{className:"h-4 w-4 text-white"})})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:(x==null?void 0:x.totalConversions)||0}),r.jsxs("p",{className:"text-xs text-green-700 dark:text-green-400",children:["CR: ",((w=x==null?void 0:x.avgCR)==null?void 0:w.toFixed(2))||0,"%"]})]})]}),r.jsxs(W,{"data-testid":"card-revenue",className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border-purple-200 dark:border-purple-700",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Доход"}),r.jsx("div",{className:"p-2 bg-purple-500 rounded-lg shadow-lg",children:r.jsx(Rt,{className:"h-4 w-4 text-white"})})]}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-xl font-bold text-purple-900 dark:text-purple-100",children:["$",(x==null?void 0:x.totalRevenue)||0]}),r.jsx("p",{className:"text-xs text-purple-700 dark:text-purple-400",children:"общий доход"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[r.jsxs(W,{"data-testid":"card-epc",className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 border-orange-200 dark:border-orange-700",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"EPC"}),r.jsx("div",{className:"p-2 bg-orange-500 rounded-lg shadow-lg",children:r.jsx(Cr,{className:"h-4 w-4 text-white"})})]}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-xl font-bold text-orange-900 dark:text-orange-100",children:["$",((j=x==null?void 0:x.epc)==null?void 0:j.toFixed(2))||0]}),r.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-400",children:"за клик"})]})]}),r.jsxs(W,{"data-testid":"card-active-offers",className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 border-indigo-200 dark:border-indigo-700",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:"Офферы"}),r.jsx("div",{className:"p-2 bg-indigo-500 rounded-lg shadow-lg",children:r.jsx(cr,{className:"h-4 w-4 text-white"})})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-xl font-bold text-indigo-900 dark:text-indigo-100",children:(x==null?void 0:x.activeOffers)||0}),r.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-400",children:"активных"})]})]}),r.jsxs(W,{"data-testid":"card-partners",className:"bg-gradient-to-br from-rose-50 to-rose-100 dark:from-rose-900/20 dark:to-rose-800/20 border-rose-200 dark:border-rose-700",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-rose-700 dark:text-rose-300",children:"Партнёры"}),r.jsx("div",{className:"p-2 bg-rose-500 rounded-lg shadow-lg",children:r.jsx(ar,{className:"h-4 w-4 text-white"})})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-xl font-bold text-rose-900 dark:text-rose-100",children:(x==null?void 0:x.partnersCount)||0}),r.jsx("p",{className:"text-xs text-rose-700 dark:text-rose-400",children:"подключено"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[r.jsxs(W,{"data-testid":"card-top-offers",children:[r.jsxs(se,{children:[r.jsx(ae,{className:"text-lg",children:"Топ-офферы"}),r.jsx(Je,{children:"Лучшие офферы по эффективности"})]}),r.jsx(H,{children:r.jsx("div",{className:"space-y-3",children:m.map(g=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium text-sm",children:g.name}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:["CR: ",g.cr,"% • $",g.revenue]})]}),r.jsx(le,{variant:g.status==="active"?"default":"secondary",className:"text-xs",children:g.status==="active"?"Активен":"Пауза"})]},g.id))})})]}),r.jsxs(W,{"data-testid":"card-recent-notifications",children:[r.jsxs(se,{children:[r.jsx(ae,{className:"text-lg",children:"Последние уведомления"}),r.jsx(Je,{children:"Важные события системы"})]}),r.jsx(H,{children:r.jsx("div",{className:"space-y-3",children:v.map(g=>r.jsx("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-sm",children:g.title}),r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:g.message}),r.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:g.time})]})},g.id))})})]}),r.jsxs(W,{"data-testid":"chart-traffic",children:[r.jsxs(se,{children:[r.jsx(ae,{className:"text-lg",children:"Трафик по времени"}),r.jsx(Je,{children:"Клики и уникальные посетители"})]}),r.jsx(H,{children:r.jsx(pa,{width:"100%",height:200,children:r.jsxs(ry,{data:o||[],children:[r.jsx(Pi,{strokeDasharray:"3 3"}),r.jsx(Cs,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(ls,{type:"monotone",dataKey:"clicks",stroke:"#3b82f6",name:"Клики",strokeWidth:2}),r.jsx(ls,{type:"monotone",dataKey:"uniqueClicks",stroke:"#10b981",name:"Уники",strokeWidth:2})]})})})]}),r.jsxs(W,{"data-testid":"chart-conversions",children:[r.jsxs(se,{children:[r.jsx(ae,{className:"text-lg",children:"Конверсии"}),r.jsx(Je,{children:"Лиды, регистрации и депозиты"})]}),r.jsx(H,{children:r.jsx(pa,{width:"100%",height:200,children:r.jsxs(yW,{data:o||[],children:[r.jsx(Pi,{strokeDasharray:"3 3"}),r.jsx(Cs,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(Ai,{type:"monotone",dataKey:"leads",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",name:"Лиды"}),r.jsx(Ai,{type:"monotone",dataKey:"registrations",stackId:"1",stroke:"#10b981",fill:"#10b981",name:"Регистрации"}),r.jsx(Ai,{type:"monotone",dataKey:"conversions",stackId:"1",stroke:"#f59e0b",fill:"#f59e0b",name:"Конверсии"})]})})})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Быстрые действия"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4",children:[r.jsx(cl,{to:"/advertiser/offers/create",children:r.jsxs(M,{variant:"outline",className:"w-full h-20 flex flex-col gap-2 bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 border-blue-200 text-blue-700 shadow-sm","data-testid":"button-create-offer",children:[r.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:r.jsx(Kt,{className:"h-5 w-5 text-white"})}),r.jsx("span",{className:"text-sm font-medium",children:"Создать оффер"})]})}),r.jsx(cl,{to:"/advertiser/analytics",children:r.jsxs(M,{variant:"outline",className:"w-full h-20 flex flex-col gap-2 bg-gradient-to-br from-green-50 to-green-100 hover:from-green-100 hover:to-green-200 border-green-200 text-green-700 shadow-sm","data-testid":"button-view-analytics",children:[r.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:r.jsx(cr,{className:"h-5 w-5 text-white"})}),r.jsx("span",{className:"text-sm font-medium",children:"Аналитика"})]})}),r.jsx(cl,{to:"/advertiser/partners",children:r.jsxs(M,{variant:"outline",className:"w-full h-20 flex flex-col gap-2 bg-gradient-to-br from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 border-purple-200 text-purple-700 shadow-sm","data-testid":"button-manage-partners",children:[r.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:r.jsx(ar,{className:"h-5 w-5 text-white"})}),r.jsx("span",{className:"text-sm font-medium",children:"Партнёры"})]})}),r.jsx(cl,{to:"/advertiser/finances",children:r.jsxs(M,{variant:"outline",className:"w-full h-20 flex flex-col gap-2 bg-gradient-to-br from-orange-50 to-orange-100 hover:from-orange-100 hover:to-orange-200 border-orange-200 text-orange-700 shadow-sm","data-testid":"button-finances",children:[r.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:r.jsx(Rt,{className:"h-5 w-5 text-white"})}),r.jsx("span",{className:"text-sm font-medium",children:"Финансы"})]})}),r.jsx(cl,{to:"/advertiser/profile",children:r.jsxs(M,{variant:"outline",className:"w-full h-20 flex flex-col gap-2 bg-gradient-to-br from-rose-50 to-rose-100 hover:from-rose-100 hover:to-rose-200 border-rose-200 text-rose-700 shadow-sm","data-testid":"button-settings",children:[r.jsx("div",{className:"p-2 bg-rose-500 rounded-lg",children:r.jsx(fr,{className:"h-5 w-5 text-white"})}),r.jsx("span",{className:"text-sm font-medium",children:"Настройки"})]})})]})]})]})}const lVe=({offer:e,onSuccess:t,onCancel:n})=>{var d,u,h;const{toast:s}=lt(),a=Et(),[i,l]=y.useState({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",url:(e==null?void 0:e.url)||"",previewUrl:(e==null?void 0:e.previewUrl)||"",category:(e==null?void 0:e.category)||"",vertical:(e==null?void 0:e.vertical)||"",payoutType:(e==null?void 0:e.payoutType)||"cpa",payoutAmount:(e==null?void 0:e.payoutAmount)||0,currency:(e==null?void 0:e.currency)||"USD",countries:(e==null?void 0:e.countries)||[],restrictions:(e==null?void 0:e.restrictions)||"",caps:(e==null?void 0:e.caps)||{},schedule:(e==null?void 0:e.schedule)||{enabled:!1,timezone:"UTC"},tracking:(e==null?void 0:e.tracking)||{clickUrl:"",conversionUrl:"",postbackUrl:""},requirements:(e==null?void 0:e.requirements)||{traffic:[],quality:80,approval:"manual"},antifraud:(e==null?void 0:e.antifraud)||{enabled:!0,methods:[],strictness:"medium"},isPrivate:(e==null?void 0:e.isPrivate)||!1,priority:(e==null?void 0:e.priority)||1,tags:(e==null?void 0:e.tags)||[]}),o=Ee({mutationFn:f=>{const m=e?`/api/advertiser/offers/${e.id}`:"/api/advertiser/offers";return Te(m,{method:e?"PUT":"POST",body:f})},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/advertiser/offers"]}),s({title:e?"Оффер обновлен":"Оффер создан",description:e?"Изменения успешно сохранены":"Новый оффер добавлен в систему"}),t()},onError:f=>{s({title:"Ошибка",description:f.message||"Не удалось сохранить оффер",variant:"destructive"})}}),c=f=>{f.preventDefault(),o.mutate(i)};return r.jsx("div",{className:"space-y-6",children:r.jsxs("form",{onSubmit:c,className:"space-y-6",children:[r.jsxs(Zr,{defaultValue:"basic",className:"w-full",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-5",children:[r.jsx(We,{value:"basic",children:"Основное"}),r.jsx(We,{value:"payout",children:"Выплаты"}),r.jsx(We,{value:"targeting",children:"Таргетинг"}),r.jsx(We,{value:"tracking",children:"Трекинг"}),r.jsx(We,{value:"settings",children:"Настройки"})]}),r.jsx(He,{value:"basic",className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"name",children:"Название оффера *"}),r.jsx(ne,{id:"name",value:i.name,onChange:f=>l({...i,name:f.target.value}),placeholder:"Введите название оффера",required:!0,"data-testid":"input-offer-name"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"description",children:"Описание"}),r.jsx(pt,{id:"description",value:i.description,onChange:f=>l({...i,description:f.target.value}),placeholder:"Подробное описание оффера",rows:3,"data-testid":"textarea-offer-description"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"category",children:"Категория *"}),r.jsxs(he,{value:i.category,onValueChange:f=>l({...i,category:f}),children:[r.jsx(de,{"data-testid":"select-offer-category",children:r.jsx(fe,{placeholder:"Выберите категорию"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"gambling",children:"Гемблинг"}),r.jsx(S,{value:"dating",children:"Знакомства"}),r.jsx(S,{value:"finance",children:"Финансы"}),r.jsx(S,{value:"crypto",children:"Криптовалюты"}),r.jsx(S,{value:"ecommerce",children:"E-commerce"}),r.jsx(S,{value:"mobile",children:"Мобильные приложения"}),r.jsx(S,{value:"games",children:"Игры"}),r.jsx(S,{value:"health",children:"Здоровье"}),r.jsx(S,{value:"education",children:"Образование"}),r.jsx(S,{value:"other",children:"Другое"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"vertical",children:"Вертикаль"}),r.jsx(ne,{id:"vertical",value:i.vertical,onChange:f=>l({...i,vertical:f.target.value}),placeholder:"Например: Casino, Forex","data-testid":"input-offer-vertical"})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"url",children:"URL лендинга *"}),r.jsx(ne,{id:"url",type:"url",value:i.url,onChange:f=>l({...i,url:f.target.value}),placeholder:"https://example.com/landing",required:!0,"data-testid":"input-offer-url"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"previewUrl",children:"URL превью"}),r.jsx(ne,{id:"previewUrl",type:"url",value:i.previewUrl,onChange:f=>l({...i,previewUrl:f.target.value}),placeholder:"https://example.com/preview","data-testid":"input-offer-preview-url"})]})]})}),r.jsx(He,{value:"payout",className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"payoutType",children:"Тип выплаты *"}),r.jsxs(he,{value:i.payoutType,onValueChange:f=>l({...i,payoutType:f}),children:[r.jsx(de,{"data-testid":"select-payout-type",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"cpa",children:"CPA (за действие)"}),r.jsx(S,{value:"cpl",children:"CPL (за лид)"}),r.jsx(S,{value:"cpc",children:"CPC (за клик)"}),r.jsx(S,{value:"cpm",children:"CPM (за 1000 показов)"}),r.jsx(S,{value:"revshare",children:"RevShare (%)"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"payoutAmount",children:"Размер выплаты *"}),r.jsx(ne,{id:"payoutAmount",type:"number",min:"0",step:"0.01",value:i.payoutAmount,onChange:f=>l({...i,payoutAmount:parseFloat(f.target.value)}),required:!0,"data-testid":"input-payout-amount"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"currency",children:"Валюта"}),r.jsxs(he,{value:i.currency,onValueChange:f=>l({...i,currency:f}),children:[r.jsx(de,{"data-testid":"select-currency",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"USD",children:"USD"}),r.jsx(S,{value:"EUR",children:"EUR"}),r.jsx(S,{value:"RUB",children:"RUB"}),r.jsx(S,{value:"BTC",children:"BTC"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Капы (лимиты)"}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-2",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"dailyCap",children:"Дневной"}),r.jsx(ne,{id:"dailyCap",type:"number",min:"0",value:i.caps.daily||"",onChange:f=>l({...i,caps:{...i.caps,daily:f.target.value?parseInt(f.target.value):void 0}}),placeholder:"0","data-testid":"input-daily-cap"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"weeklyCap",children:"Недельный"}),r.jsx(ne,{id:"weeklyCap",type:"number",min:"0",value:i.caps.weekly||"",onChange:f=>l({...i,caps:{...i.caps,weekly:f.target.value?parseInt(f.target.value):void 0}}),placeholder:"0","data-testid":"input-weekly-cap"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"monthlyCap",children:"Месячный"}),r.jsx(ne,{id:"monthlyCap",type:"number",min:"0",value:i.caps.monthly||"",onChange:f=>l({...i,caps:{...i.caps,monthly:f.target.value?parseInt(f.target.value):void 0}}),placeholder:"0","data-testid":"input-monthly-cap"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"totalCap",children:"Общий"}),r.jsx(ne,{id:"totalCap",type:"number",min:"0",value:i.caps.total||"",onChange:f=>l({...i,caps:{...i.caps,total:f.target.value?parseInt(f.target.value):void 0}}),placeholder:"0","data-testid":"input-total-cap"})]})]})]})]})}),r.jsx(He,{value:"targeting",className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Страны (выберите одну или несколько)"}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2 max-h-40 overflow-y-auto border rounded p-2",children:["US","GB","CA","AU","DE","FR","IT","ES","RU","UA","BY","KZ","BR","IN","CN","JP"].map(f=>r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:i.countries.includes(f),onChange:m=>{m.target.checked?l({...i,countries:[...i.countries,f]}):l({...i,countries:i.countries.filter(v=>v!==f)})},"data-testid":`checkbox-country-${f}`}),r.jsx("span",{className:"text-sm",children:f})]},f))})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"restrictions",children:"Ограничения и требования"}),r.jsx(pt,{id:"restrictions",value:i.restrictions,onChange:f=>l({...i,restrictions:f.target.value}),placeholder:"Описание ограничений, требований к трафику и партнерам",rows:4,"data-testid":"textarea-restrictions"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"approval",children:"Тип одобрения"}),r.jsxs(he,{value:i.requirements.approval,onValueChange:f=>l({...i,requirements:{...i.requirements,approval:f}}),children:[r.jsx(de,{"data-testid":"select-approval-type",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"auto",children:"Автоматическое"}),r.jsx(S,{value:"manual",children:"Ручное"}),r.jsx(S,{value:"whitelist",children:"Только белый список"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"quality",children:"Минимальное качество (%)"}),r.jsx(ne,{id:"quality",type:"number",min:"0",max:"100",value:i.requirements.quality,onChange:f=>l({...i,requirements:{...i.requirements,quality:parseInt(f.target.value)}}),"data-testid":"input-quality-requirement"})]})]})]})}),r.jsx(He,{value:"tracking",className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"clickUrl",children:"URL для кликов *"}),r.jsx(ne,{id:"clickUrl",type:"url",value:((d=i.tracking)==null?void 0:d.clickUrl)||"",onChange:f=>l({...i,tracking:{...i.tracking,clickUrl:f.target.value}}),placeholder:"https://track.example.com/click?id={clickid}",required:!0,"data-testid":"input-click-url"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"conversionUrl",children:"URL для конверсий *"}),r.jsx(ne,{id:"conversionUrl",type:"url",value:((u=i.tracking)==null?void 0:u.conversionUrl)||"",onChange:f=>l({...i,tracking:{...i.tracking,conversionUrl:f.target.value}}),placeholder:"https://track.example.com/conversion?id={clickid}",required:!0,"data-testid":"input-conversion-url"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"postbackUrl",children:"Postback URL"}),r.jsx(ne,{id:"postbackUrl",type:"url",value:((h=i.tracking)==null?void 0:h.postbackUrl)||"",onChange:f=>l({...i,tracking:{...i.tracking,postbackUrl:f.target.value}}),placeholder:"https://partner.example.com/postback?id={clickid}&sum={sum}","data-testid":"input-postback-url"})]})]})}),r.jsx(He,{value:"settings",className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{id:"isPrivate",checked:i.isPrivate,onCheckedChange:f=>l({...i,isPrivate:f}),"data-testid":"switch-private-offer"}),r.jsx(L,{htmlFor:"isPrivate",children:"Приватный оффер"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{id:"antifraudEnabled",checked:i.antifraud.enabled,onCheckedChange:f=>l({...i,antifraud:{...i.antifraud,enabled:f}}),"data-testid":"switch-antifraud-enabled"}),r.jsx(L,{htmlFor:"antifraudEnabled",children:"Включить антифрод"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"priority",children:"Приоритет (1-10)"}),r.jsx(ne,{id:"priority",type:"number",min:"1",max:"10",value:i.priority,onChange:f=>l({...i,priority:parseInt(f.target.value)}),"data-testid":"input-priority"})]})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[r.jsx(M,{type:"button",variant:"outline",onClick:n,"data-testid":"button-cancel",children:"Отмена"}),r.jsx(M,{type:"submit",disabled:o.isPending,"data-testid":"button-save-offer",children:o.isPending?"Сохранение...":e?"Сохранить":"Создать"})]})]})})};function oVe(){const{user:e}=Jt(),{collapsed:t}=Os(),{toast:n}=lt(),s=Et(),[a,i]=y.useState(""),[l,o]=y.useState({status:"all",category:"all",payoutType:"all",country:"all"}),[c,d]=y.useState("createdAt"),[u,h]=y.useState("desc"),[f,m]=y.useState([]),[v,x]=y.useState(!1),[w,j]=y.useState(null),{data:g,isLoading:b,refetch:p}=$e({queryKey:["/api/advertiser/offers",a,l,c,u],enabled:!!e}),N=Ee({mutationFn:A=>Te(`/api/advertiser/offers/${A}`,{method:"DELETE"}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/advertiser/offers"]}),n({title:"Оффер удален",description:"Оффер успешно удален из системы"})}});Ee({mutationFn:({offerId:A,status:T})=>Te(`/api/advertiser/offers/${A}/status`,{method:"PATCH",body:{status:T}}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/advertiser/offers"]}),n({title:"Статус изменен",description:"Статус оффера успешно обновлен"})}});const k=Ee({mutationFn:({action:A,offerIds:T})=>Te("/api/advertiser/offers/bulk",{method:"POST",body:{action:A,offerIds:T}}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/advertiser/offers"]}),m([]),n({title:"Операция выполнена",description:"Массовая операция успешно выполнена"})}}),C=A=>{j(A),x(!0)},_=async A=>{window.confirm("Вы уверены, что хотите удалить этот оффер?")&&N.mutate(A)},P=A=>{f.length!==0&&k.mutate({action:A,offerIds:f})},D=A=>{const T=`${A.tracking.clickUrl}?subid={subid}&clickid={clickid}`;navigator.clipboard.writeText(T),n({title:"Скопировано",description:"Трекинговая ссылка скопирована в буфер обмена"})},E=A=>{const T={active:{label:"Активен",variant:"default",color:"bg-green-500"},paused:{label:"Приостановлен",variant:"secondary",color:"bg-yellow-500"},pending:{label:"На модерации",variant:"outline",color:"bg-blue-500"},archived:{label:"Архивирован",variant:"secondary",color:"bg-gray-500"},rejected:{label:"Отклонен",variant:"destructive",color:"bg-red-500"}},O=T[A]||T.pending;return r.jsxs(le,{variant:O.variant,className:"flex items-center gap-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${O.color}`}),O.label]})},$=(g==null?void 0:g.filter(A=>!(a&&!A.name.toLowerCase().includes(a.toLowerCase())||l.status!=="all"&&A.status!==l.status||l.category!=="all"&&A.category!==l.category||l.payoutType!=="all"&&A.payoutType!==l.payoutType||l.country!=="all"&&!A.countries.includes(l.country))))||[];return b?r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((A,T)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded"},T))})}):r.jsxs("div",{className:`p-6 transition-all duration-300 ${t?"ml-16":"ml-64"}`,children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Управление офферами"}),r.jsx("p",{className:"text-gray-600",children:"Создавайте и управляйте вашими офферами"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(M,{variant:"outline",onClick:()=>p(),"data-testid":"button-refresh",children:[r.jsx(vr,{className:"w-4 h-4 mr-2"}),"Экспорт"]}),r.jsxs(M,{onClick:()=>{j(null),x(!0)},"data-testid":"button-create-offer",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Создать оффер"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsx(W,{children:r.jsx(H,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Всего офферов"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(g==null?void 0:g.length)||0})]}),r.jsx(Kt,{className:"w-8 h-8 text-blue-500"})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Активные"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:(g==null?void 0:g.filter(A=>A.status==="active").length)||0})]}),r.jsx(nr,{className:"w-8 h-8 text-green-500"})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Общая конверсия"}),r.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[g?(g.reduce((A,T)=>A+T.statistics.cr,0)/g.length).toFixed(1):0,"%"]})]}),r.jsx(Cr,{className:"w-8 h-8 text-purple-500"})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Общий доход"}),r.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["$",g?g.reduce((A,T)=>A+T.statistics.revenue,0).toLocaleString():0]})]}),r.jsx(Rt,{className:"w-8 h-8 text-orange-500"})]})})})]}),r.jsx(W,{className:"mb-6",children:r.jsxs(H,{className:"p-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск по названию оффера...",value:a,onChange:A=>i(A.target.value),className:"pl-10","data-testid":"input-search-offers"})]})}),r.jsxs(he,{value:l.status,onValueChange:A=>o({...l,status:A}),children:[r.jsx(de,{className:"w-40","data-testid":"select-filter-status",children:r.jsx(fe,{placeholder:"Статус"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все статусы"}),r.jsx(S,{value:"active",children:"Активные"}),r.jsx(S,{value:"paused",children:"Приостановленные"}),r.jsx(S,{value:"pending",children:"На модерации"}),r.jsx(S,{value:"archived",children:"Архивированные"})]})]}),r.jsxs(he,{value:l.category,onValueChange:A=>o({...l,category:A}),children:[r.jsx(de,{className:"w-40","data-testid":"select-filter-category",children:r.jsx(fe,{placeholder:"Категория"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все категории"}),r.jsx(S,{value:"gambling",children:"Гемблинг"}),r.jsx(S,{value:"dating",children:"Знакомства"}),r.jsx(S,{value:"finance",children:"Финансы"}),r.jsx(S,{value:"crypto",children:"Криптовалюты"})]})]}),r.jsxs(he,{value:l.payoutType,onValueChange:A=>o({...l,payoutType:A}),children:[r.jsx(de,{className:"w-40","data-testid":"select-filter-payout",children:r.jsx(fe,{placeholder:"Тип выплаты"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все типы"}),r.jsx(S,{value:"cpa",children:"CPA"}),r.jsx(S,{value:"cpl",children:"CPL"}),r.jsx(S,{value:"cpc",children:"CPC"}),r.jsx(S,{value:"revshare",children:"RevShare"})]})]})]}),f.length>0&&r.jsxs("div",{className:"flex items-center gap-2 mt-4 p-3 bg-blue-50 rounded-lg",children:[r.jsxs("span",{className:"text-sm text-blue-600",children:["Выбрано: ",f.length," офферов"]}),r.jsxs("div",{className:"flex gap-2 ml-auto",children:[r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>P("activate"),"data-testid":"button-bulk-activate",children:[r.jsx($re,{className:"w-4 h-4 mr-1"}),"Активировать"]}),r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>P("pause"),"data-testid":"button-bulk-pause",children:[r.jsx(Mre,{className:"w-4 h-4 mr-1"}),"Приостановить"]}),r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>P("archive"),"data-testid":"button-bulk-archive",children:[r.jsx(zA,{className:"w-4 h-4 mr-1"}),"Архивировать"]})]})]})]})}),r.jsx(W,{children:r.jsxs(H,{className:"p-0",children:[r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{className:"w-12",children:r.jsx("input",{type:"checkbox",checked:f.length===$.length&&$.length>0,onChange:A=>{A.target.checked?m($.map(T=>T.id)):m([])},"data-testid":"checkbox-select-all"})}),r.jsx(J,{children:"Оффер"}),r.jsx(J,{children:"Категория"}),r.jsx(J,{children:"Выплата"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Статистика"}),r.jsx(J,{children:"Партнеры"}),r.jsx(J,{children:"Дата создания"}),r.jsx(J,{className:"w-32",children:"Действия"})]})}),r.jsx($t,{children:$.map(A=>r.jsxs(Re,{className:"hover:bg-gray-50",children:[r.jsx(q,{children:r.jsx("input",{type:"checkbox",checked:f.includes(A.id),onChange:T=>{T.target.checked?m([...f,A.id]):m(f.filter(O=>O!==A.id))},"data-testid":`checkbox-offer-${A.id}`})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:r.jsx(Kt,{className:"w-6 h-6 text-gray-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:A.name}),r.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:A.description}),A.isPrivate&&r.jsxs(le,{variant:"outline",className:"text-xs mt-1",children:[r.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Приватный"]})]})]})}),r.jsxs(q,{children:[r.jsx(le,{variant:"outline",children:A.category}),A.vertical&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:A.vertical})]}),r.jsx(q,{children:r.jsxs("div",{className:"text-sm",children:[r.jsxs("p",{className:"font-medium text-green-600",children:[A.payoutAmount," ",A.currency]}),r.jsx("p",{className:"text-gray-500 uppercase",children:A.payoutType})]})}),r.jsx(q,{children:E(A.status)}),r.jsx(q,{children:r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Клики:"}),r.jsx("span",{className:"font-medium",children:A.statistics.clicks.toLocaleString()})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"CR:"}),r.jsxs("span",{className:"font-medium text-purple-600",children:[A.statistics.cr,"%"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"EPC:"}),r.jsxs("span",{className:"font-medium text-blue-600",children:["$",A.statistics.epc]})]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ar,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-sm",children:A.statistics.activePartners})]})}),r.jsx(q,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{children:new Date(A.createdAt).toLocaleDateString("ru-RU")}),r.jsx("p",{className:"text-gray-500",children:new Date(A.createdAt).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})})]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>C(A),title:"Редактировать оффер","data-testid":`button-edit-${A.id}`,children:r.jsx(cs,{className:"w-4 h-4"})}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>D(A),title:"Скопировать трекинговую ссылку","data-testid":`button-copy-${A.id}`,children:r.jsx(Yr,{className:"w-4 h-4"})}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>window.open(A.previewUrl||A.url,"_blank"),title:"Предпросмотр оффера","data-testid":`button-preview-${A.id}`,children:r.jsx(hr,{className:"w-4 h-4"})}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>_(A.id),title:"Удалить оффер","data-testid":`button-delete-${A.id}`,children:r.jsx(wr,{className:"w-4 h-4 text-red-500"})})]})})]},A.id))})]}),$.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Kt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Нет офферов"}),r.jsx("p",{className:"text-gray-500 mb-4",children:a||Object.values(l).some(A=>A!=="all")?"По вашему запросу ничего не найдено":"Создайте ваш первый оффер"}),r.jsxs(M,{onClick:()=>{j(null),x(!0)},"data-testid":"button-create-first-offer",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Создать оффер"]})]})]})}),r.jsx(jt,{open:v,onOpenChange:x,children:r.jsxs(vt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(yt,{children:r.jsx(bt,{children:w?"Редактирование оффера":"Создание нового оффера"})}),r.jsx(lVe,{offer:w||void 0,onSuccess:()=>x(!1),onCancel:()=>x(!1)})]})})]})}function EY({offerId:e,maxNumberOfFiles:t=1,maxFileSize:n=50*1024*1024,onGetUploadParameters:s,onComplete:a,uploaded:i=!1,buttonClassName:l}){const[o,c]=y.useState(!1),[d,u]=y.useState(null),[h,f]=y.useState(0),[m,v]=y.useState(!1),{toast:x}=lt(),w=b=>{var N;const p=(N=b.target.files)==null?void 0:N[0];if(console.log("🔍 Файл выбран:",p?p.name:"none"),console.log("🔍 Размер файла:",p?p.size:0),p){if(!p.name.toLowerCase().endsWith(".zip")){console.log("❌ Не ZIP файл"),x({title:"Неверный формат файла",description:"Пожалуйста, выберите ZIP архив с креативами",variant:"destructive"});return}if(p.size>n){console.log("❌ Файл слишком большой"),x({title:"Файл слишком большой",description:`Максимальный размер файла ${g(n)}`,variant:"destructive"});return}console.log("✅ Валидация файла пройдена"),u(p),v(!1),f(0),setTimeout(()=>j(),100)}},j=async()=>{if(!d){console.log("❌ Нет выбранного файла");return}console.log("🚀 Начало загрузки файла:",d.name),c(!0),f(10);try{let b;if(s)console.log("📡 Получение upload URL через кастомный метод..."),f(20),b=(await s()).url,console.log("✅ Upload URL получен:",b.substring(0,50)+"..."),f(40);else{console.log("📡 Получение upload URL через стандартный метод...");const k=localStorage.getItem("auth_token");console.log("🔑 Токен присутствует:",k?"да":"нет");const C=await fetch("/api/objects/upload",{method:"POST",headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"}});if(console.log("Upload URL response status:",C.status),!C.ok){const P=await C.text();throw console.error("Upload URL error:",P),new Error(`Failed to get upload URL: ${C.status}`)}b=(await C.json()).uploadURL}console.log("📤 Загрузка файла в облако..."),f(60);const p=await fetch(b,{method:"PUT",body:d,headers:{"Content-Type":"application/zip"}});if(console.log("File upload response status:",p.status),f(80),!p.ok)throw new Error(`Failed to upload file: ${p.status}`);f(100),v(!0),x({title:"✅ Креативы загружены",description:`Файл "${d.name}" успешно загружен`});const N={successful:[{uploadURL:b,name:d.name,size:d.size}],failed:[]};a==null||a(N),setTimeout(()=>{u(null),f(0),v(!1)},2e3)}catch(b){console.error("❌ Ошибка загрузки:",b),f(0),x({title:"❌ Ошибка загрузки",description:"Не удалось загрузить креативы. Попробуйте еще раз.",variant:"destructive"}),u(null)}finally{c(!1)}},g=b=>{if(b===0)return"0 Bytes";const p=1024,N=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(b)/Math.log(p));return parseFloat((b/Math.pow(p,k)).toFixed(2))+" "+N[k]};return r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(pl,{className:"w-5 h-5"}),"Загрузка креативов"]})}),r.jsxs(H,{className:"space-y-4",children:[d?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50 dark:bg-gray-900/50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${m?"bg-green-100 dark:bg-green-900/30":o?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100 dark:bg-gray-800"}`,children:m?r.jsx(fn,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):r.jsx(Qn,{className:`w-5 h-5 ${o?"text-blue-600 dark:text-blue-400":"text-gray-500"}`})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:d.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[g(d.size),o&&` • Загрузка ${h}%`,m&&" • ✅ Загружено"]})]})]}),!o&&!m&&r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>u(null),title:"Удалить файл",children:r.jsx(Tn,{className:"w-4 h-4"})})]}),o&&r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-800 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${h}%`}})}),m&&r.jsx("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700 dark:text-green-300",children:[r.jsx(fn,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"Файл успешно загружен!"})]})}),!o&&!m&&r.jsx("div",{className:"flex gap-2",children:r.jsxs(M,{onClick:j,className:"bg-green-600 hover:bg-green-700 text-white flex-1",children:[r.jsx(pl,{className:"w-4 h-4 mr-2"}),"Загрузить"]})})]}):r.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx(pl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Выберите ZIP архив с креативами"}),r.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Максимальный размер файла: ",g(n)]}),r.jsx("input",{id:"creative-upload",type:"file",accept:".zip",onChange:w,className:"hidden","data-testid":"input-file-creative"}),r.jsxs(M,{type:"button",onClick:()=>{var b;return(b=document.getElementById("creative-upload"))==null?void 0:b.click()},className:`bg-blue-600 hover:bg-blue-700 text-white transition-colors ${l||""}`,"data-testid":"button-upload-creative",title:"Выбрать ZIP файл с креативами",children:[r.jsx(pl,{className:"w-4 h-4 mr-2"}),"Выбрать файл"]})]})}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[r.jsx("p",{children:"• Поддерживаются только ZIP архивы"}),r.jsxs("p",{children:["• Максимальный размер файла: ",g(n)]}),r.jsx("p",{children:"• Архив должен содержать изображения, баннеры и другие рекламные материалы"})]})]})]})}const AF={name:"",description:{ru:"",en:""},category:"",logo:"",geoTargeting:[],targetUrl:"",postbackUrl:"",hasGlobalGeoSetting:!1,hasGlobalPayoutSetting:!1,globalGeo:"",globalPayout:"",landingPages:[{id:"1",name:"Основная",url:"",geo:"",payout:"",hasCustomGeo:!1,hasCustomPayout:!1,isDefault:!0}],payoutType:"cpa",payoutAmount:0,currency:"USD",trafficSources:[],allowedApplications:[],dailyLimit:0,monthlyLimit:0,antifraudEnabled:!0,antifraudMethods:["ip_check","vpn_detection"],partnerApprovalType:"manual",kycRequired:!1,isPrivate:!1,kpi:"",creatives:"",creativesUrl:"",status:"active"},cVe=["gambling","dating","crypto","betting","e-commerce","gaming","finance","health","vpn","antivirus","education","software","mobile_apps","nutra","beauty"],dVe=[{code:"afghanistan",name:"🇦🇫 Афганистан"},{code:"albania",name:"🇦🇱 Албания"},{code:"algeria",name:"🇩🇿 Алжир"},{code:"andorra",name:"🇦🇩 Андорра"},{code:"angola",name:"🇦🇴 Ангола"},{code:"argentina",name:"🇦🇷 Аргентина"},{code:"armenia",name:"🇦🇲 Армения"},{code:"australia",name:"🇦🇺 Австралия"},{code:"austria",name:"🇦🇹 Австрия"},{code:"azerbaijan",name:"🇦🇿 Азербайджан"},{code:"bahrain",name:"🇧🇭 Бахрейн"},{code:"bangladesh",name:"🇧🇩 Бангладеш"},{code:"belarus",name:"🇧🇾 Беларусь"},{code:"belgium",name:"🇧🇪 Бельгия"},{code:"bolivia",name:"🇧🇴 Боливия"},{code:"brazil",name:"🇧🇷 Бразилия"},{code:"bulgaria",name:"🇧🇬 Болгария"},{code:"cambodia",name:"🇰🇭 Камбоджа"},{code:"canada",name:"🇨🇦 Канада"},{code:"chile",name:"🇨🇱 Чили"},{code:"china",name:"🇨🇳 Китай"},{code:"colombia",name:"🇨🇴 Колумбия"},{code:"croatia",name:"🇭🇷 Хорватия"},{code:"cyprus",name:"🇨🇾 Кипр"},{code:"czech",name:"🇨🇿 Чехия"},{code:"denmark",name:"🇩🇰 Дания"},{code:"ecuador",name:"🇪🇨 Эквадор"},{code:"egypt",name:"🇪🇬 Египет"},{code:"estonia",name:"🇪🇪 Эстония"},{code:"finland",name:"🇫🇮 Финляндия"},{code:"france",name:"🇫🇷 Франция"},{code:"georgia",name:"🇬🇪 Грузия"},{code:"germany",name:"🇩🇪 Германия"},{code:"ghana",name:"🇬🇭 Гана"},{code:"greece",name:"🇬🇷 Греция"},{code:"hungary",name:"🇭🇺 Венгрия"},{code:"iceland",name:"🇮🇸 Исландия"},{code:"india",name:"🇮🇳 Индия"},{code:"indonesia",name:"🇮🇩 Индонезия"},{code:"iran",name:"🇮🇷 Иран"},{code:"iraq",name:"🇮🇶 Ирак"},{code:"ireland",name:"🇮🇪 Ирландия"},{code:"israel",name:"🇮🇱 Израиль"},{code:"italy",name:"🇮🇹 Италия"},{code:"japan",name:"🇯🇵 Япония"},{code:"jordan",name:"🇯🇴 Иордания"},{code:"kazakhstan",name:"🇰🇿 Казахстан"},{code:"kenya",name:"🇰🇪 Кения"},{code:"kuwait",name:"🇰🇼 Кувейт"},{code:"latvia",name:"🇱🇻 Латвия"},{code:"lebanon",name:"🇱🇧 Ливан"},{code:"lithuania",name:"🇱🇹 Литва"},{code:"malaysia",name:"🇲🇾 Малайзия"},{code:"malta",name:"🇲🇹 Мальта"},{code:"mexico",name:"🇲🇽 Мексика"},{code:"morocco",name:"🇲🇦 Марокко"},{code:"netherlands",name:"🇳🇱 Нидерланды"},{code:"newzealand",name:"🇳🇿 Новая Зеландия"},{code:"nigeria",name:"🇳🇬 Нигерия"},{code:"norway",name:"🇳🇴 Норвегия"},{code:"pakistan",name:"🇵🇰 Пакистан"},{code:"peru",name:"🇵🇪 Перу"},{code:"philippines",name:"🇵🇭 Филиппины"},{code:"poland",name:"🇵🇱 Польша"},{code:"portugal",name:"🇵🇹 Португалия"},{code:"qatar",name:"🇶🇦 Катар"},{code:"romania",name:"🇷🇴 Румыния"},{code:"russia",name:"🇷🇺 Россия"},{code:"saudiarabia",name:"🇸🇦 Саудовская Аравия"},{code:"singapore",name:"🇸🇬 Сингапур"},{code:"slovakia",name:"🇸🇰 Словакия"},{code:"slovenia",name:"🇸🇮 Словения"},{code:"southafrica",name:"🇿🇦 Южная Африка"},{code:"southkorea",name:"🇰🇷 Южная Корея"},{code:"spain",name:"🇪🇸 Испания"},{code:"sweden",name:"🇸🇪 Швеция"},{code:"switzerland",name:"🇨🇭 Швейцария"},{code:"thailand",name:"🇹🇭 Таиланд"},{code:"turkey",name:"🇹🇷 Турция"},{code:"uae",name:"🇦🇪 ОАЭ"},{code:"ukraine",name:"🇺🇦 Украина"},{code:"uk",name:"🇬🇧 Великобритания"},{code:"usa",name:"🇺🇸 США"},{code:"venezuela",name:"🇻🇪 Венесуэла"},{code:"vietnam",name:"🇻🇳 Вьетнам"}],uVe=["Push","Popunder","Google Ads","Facebook Ads","TikTok Ads","Instagram","YouTube Ads","Native","UAC","SEO","Email","WhatsApp","Telegram","Motivated","In-App","Cloaking","Bot","Farm","Doros","APK","VK","Discord","Phishing","Autoredirect","Proxy/VPN","Twitter/X"],TF=["PWA App","WebView App","APK","iOS App","SPA","Landing App","SmartLink","Mini App","Desktop App","iFrame","ZIP","Cloud App","DApp","Masked App","WebRTC","TWA"],EF=[{value:"ip_check",label:"Проверка IP адресов",description:"Анализ подозрительных IP и геолокации"},{value:"vpn_detection",label:"Детекция VPN/Proxy",description:"Обнаружение VPN, прокси и анонимайзеров"},{value:"bot_protection",label:"Защита от ботов",description:"Идентификация автоматизированного трафика"},{value:"device_fingerprint",label:"Отпечаток устройства",description:"Уникальная идентификация устройств"},{value:"behavioral_analysis",label:"Поведенческий анализ",description:"Анализ паттернов поведения пользователей"},{value:"click_spam_protection",label:"Защита от кликспама",description:"Предотвращение массовых фиктивных кликов"},{value:"time_analysis",label:"Временной анализ",description:"Контроль времени между событиями"},{value:"referrer_validation",label:"Проверка источников",description:"Валидация источников переходов"},{value:"conversion_validation",label:"Проверка конверсий",description:"Валидация качества конверсий"}];function hVe({value:e,onChange:t,placeholder:n="Выберите страну"}){const[s,a]=y.useState(!1);return r.jsxs(ym,{open:s,onOpenChange:a,children:[r.jsx(bm,{asChild:!0,children:r.jsxs(M,{variant:"outline",role:"combobox","aria-expanded":s,className:"w-full justify-between text-sm",children:[e?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:Al(e)}),r.jsx("span",{children:Hc(e)})]}):n,r.jsx(L2,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(Eu,{className:"w-full p-0",children:r.jsxs(Zj,{children:[r.jsx(Qj,{placeholder:"Поиск страны...",className:"h-9"}),r.jsx(Jj,{children:"Страна не найдена."}),r.jsx(ew,{className:"max-h-64 overflow-auto",children:dVe.map(i=>r.jsxs(tw,{value:i.name,onSelect:()=>{t(i.code),a(!1)},children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:Al(i.code)}),r.jsx("span",{children:i.name})]}),r.jsx(fn,{className:`ml-auto h-4 w-4 ${e===i.code?"opacity-100":"opacity-0"}`})]},i.code))})]})})]})}function OF(){var j,g;const[,e]=hs(),{toast:t}=lt(),n=Et(),s=()=>{try{const b=localStorage.getItem("auth_token");if(b)return JSON.parse(atob(b.split(".")[1])).id}catch(b){console.warn("Error parsing token:",b)}return null},[a,i]=y.useState(AF),[l,o]=y.useState("basic");y.useState("");const[c,d]=y.useState(!1);y.useState(0);const u=async()=>{var b;try{console.log("🔄 Получение upload URL для креативов...");const p=localStorage.getItem("auth_token");console.log("🔑 Токен присутствует:",!!p);const N=await fetch("/api/objects/upload",{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(console.log("📡 Статус ответа API:",N.status),!N.ok){const C=await N.text();throw console.error("❌ Ошибка API:",C),new Error(`Не удалось получить URL: ${N.status}`)}const k=await N.json();return console.log("✅ Upload URL успешно получен"),console.log("🔗 URL начинается с:",((b=k.uploadURL)==null?void 0:b.substring(0,50))+"..."),{method:"PUT",url:k.uploadURL}}catch(p){throw console.error("💥 Ошибка получения upload URL:",p),t({title:"Ошибка загрузки",description:"Не удалось получить URL для загрузки креативов",variant:"destructive"}),p}},h=async b=>{if(console.log("📦 Завершение загрузки креативов:",b),b.successful&&b.successful.length>0){const p=b.successful[0];console.log("📁 Данные загруженного файла:",p);const N=p.uploadURL||p.url;console.log("🔗 URL креативов:",N),i(k=>({...k,creatives:N,creativesUrl:N})),d(!0),console.log("✅ Креативы успешно сохранены в форму"),t({title:"Креативы загружены",description:"ZIP архив с креативами успешно загружен"})}else console.error("❌ Неуспешная загрузка креативов:",b),t({title:"Ошибка загрузки",description:"Не удалось загрузить креативы. Попробуйте снова.",variant:"destructive"})},f=Ee({mutationFn:async b=>{var N,k,C,_;const p={name:b.name,description:b.description,category:b.category,logo:b.logo,countries:b.hasGlobalGeoSetting?b.landingPages.map(P=>P.geo).filter(P=>P&&P.trim()!==""):b.globalGeo?[b.globalGeo]:[],landingPageUrl:((N=b.landingPages.find(P=>P.isDefault))==null?void 0:N.url)||((k=b.landingPages[0])==null?void 0:k.url)||"",landingPages:b.landingPages,payout:b.hasGlobalPayoutSetting?((C=b.landingPages.find(P=>P.isDefault))==null?void 0:C.payout)||((_=b.landingPages[0])==null?void 0:_.payout)||"0":b.globalPayout||"0",payoutByGeo:b.hasGlobalPayoutSetting?b.landingPages.reduce((P,D)=>(D.geo&&D.payout&&D.geo.trim()!==""&&D.payout!==""&&(P[D.geo.toLowerCase()]=parseFloat(D.payout)||0),P),{}):{},payoutType:b.payoutType,currency:b.currency,trafficSources:b.trafficSources,allowedApplications:b.allowedApplications,dailyLimit:b.dailyLimit||null,monthlyLimit:b.monthlyLimit||null,antifraudEnabled:b.antifraudEnabled,antifraudMethods:b.antifraudMethods,partnerApprovalType:b.partnerApprovalType,kycRequired:b.kycRequired,isPrivate:b.isPrivate,kpiConditions:{en:b.kpi,ru:b.kpi},creatives:b.creatives,creativesUrl:b.creativesUrl,advertiserId:s(),status:b.status};return Te("/api/advertiser/offers","POST",p)},onSuccess:b=>{t({title:"Оффер создан",description:`Оффер "${a.name}" успешно создан`}),n.invalidateQueries({queryKey:["/api/advertiser/offers"]}),e("/advertiser/offers")},onError:b=>{t({title:"Ошибка создания",description:"Не удалось создать оффер. Попробуйте снова.",variant:"destructive"})}});$e({queryKey:["/api/advertiser/tracking-domains"],queryFn:()=>Te("/api/advertiser/tracking-domains")});const m=b=>{var C;if(b.preventDefault(),!((C=a.name)!=null&&C.trim())){t({title:"Заполните название оффера",description:"Название оффера обязательно для заполнения",variant:"destructive"});return}if(!a.category){t({title:"Выберите категорию",description:"Категория оффера обязательна для выбора",variant:"destructive"});return}if(!a.landingPages.some(_=>_.url&&_.url.trim()!=="")){t({title:"Укажите URL целевой страницы",description:"Необходимо указать хотя бы один URL целевой страницы",variant:"destructive"});return}if(!(a.hasGlobalPayoutSetting?a.landingPages.some(_=>parseFloat(_.payout||"0")>0):parseFloat(a.globalPayout||"0")>0)){t({title:"Укажите размер выплаты",description:"Размер выплаты должен быть больше нуля",variant:"destructive"});return}if(!(a.hasGlobalGeoSetting?a.landingPages.some(_=>_.geo&&_.geo.trim()!==""):a.globalGeo&&a.globalGeo.trim()!=="")){t({title:"Выберите гео",description:"Необходимо указать гео для целевых страниц",variant:"destructive"});return}f.mutate(a)},v=()=>{const b={id:Date.now().toString(),name:`Лендинг ${a.landingPages.length+1}`,url:"",geo:a.hasGlobalGeoSetting?"":a.globalGeo,payout:a.hasGlobalPayoutSetting?"":a.globalPayout,hasCustomGeo:a.hasGlobalGeoSetting,hasCustomPayout:a.hasGlobalPayoutSetting,isDefault:!1};i(p=>({...p,landingPages:[...p.landingPages,b]}))},x=b=>{a.landingPages.length<=1||i(p=>({...p,landingPages:p.landingPages.filter(N=>N.id!==b)}))},w=(b,p,N)=>{i(k=>({...k,landingPages:k.landingPages.map(C=>C.id===b?{...C,[p]:N}:C)}))};return r.jsx("div",{children:r.jsxs("div",{className:"w-full space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(M,{variant:"outline",size:"icon",onClick:()=>e("/advertiser/offers"),"data-testid":"button-back",title:"Вернуться к офферам",children:r.jsx(yc,{className:"h-4 w-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Создание оффера"}),r.jsx("p",{className:"text-muted-foreground",children:"Настройте все параметры для нового оффера"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(M,{variant:"outline",onClick:()=>e("/advertiser/offers"),"data-testid":"button-cancel",children:"Отмена"}),r.jsxs(M,{onClick:m,disabled:f.isPending,"data-testid":"button-save-offer",className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(Tl,{className:"h-4 w-4 mr-2"}),f.isPending?"Сохранение...":"Сохранить оффер"]})]})]}),r.jsxs("form",{onSubmit:m,className:"space-y-6",children:[r.jsxs(Zr,{value:l,onValueChange:o,children:[r.jsxs(Vr,{className:"grid w-full grid-cols-4",children:[r.jsxs(We,{value:"basic",className:"flex items-center gap-2 data-[state=active]:bg-blue-100 dark:data-[state=active]:bg-blue-900 data-[state=active]:text-blue-700 dark:data-[state=active]:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-950",title:"Основная информация об оффере",children:[r.jsx(fr,{className:"h-4 w-4 text-blue-600"}),"Основное"]}),r.jsxs(We,{value:"links",className:"flex items-center gap-2 data-[state=active]:bg-purple-100 dark:data-[state=active]:bg-purple-900 data-[state=active]:text-purple-700 dark:data-[state=active]:text-purple-300 hover:bg-purple-50 dark:hover:bg-purple-950",title:"Ссылки и лендинги",children:[r.jsx(Kt,{className:"h-4 w-4 text-purple-600"}),"Ссылки"]}),r.jsxs(We,{value:"targeting",className:"flex items-center gap-2 data-[state=active]:bg-orange-100 dark:data-[state=active]:bg-orange-900 data-[state=active]:text-orange-700 dark:data-[state=active]:text-orange-300 hover:bg-orange-50 dark:hover:bg-orange-950",title:"Источники трафика",children:[r.jsx(dr,{className:"h-4 w-4 text-orange-600"}),"Источники"]}),r.jsxs(We,{value:"antifraud",className:"flex items-center gap-2 data-[state=active]:bg-red-100 dark:data-[state=active]:bg-red-900 data-[state=active]:text-red-700 dark:data-[state=active]:text-red-300 hover:bg-red-50 dark:hover:bg-red-950",title:"Настройки антифрода",children:[r.jsx(co,{className:"h-4 w-4 text-red-600"}),"Антифрод"]})]}),r.jsx(He,{value:"basic",className:"space-y-6",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Основная информация"})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"name",children:"Название оффера *"}),r.jsx(ne,{id:"name",value:a.name,onChange:b=>i(p=>({...p,name:b.target.value})),placeholder:"Введите название оффера","data-testid":"input-offer-name"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"category",children:"Категория *"}),r.jsxs(he,{value:a.category,onValueChange:b=>i(p=>({...p,category:b})),children:[r.jsx(de,{"data-testid":"select-category",children:r.jsx(fe,{placeholder:"Выберите категорию"})}),r.jsx(ue,{children:cVe.map(b=>r.jsx(S,{value:b,children:b},b))})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Описание оффера"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"description-ru",className:"text-sm text-muted-foreground",children:"На русском"}),r.jsx(pt,{id:"description-ru",value:a.description.ru,onChange:b=>i(p=>({...p,description:{...p.description,ru:b.target.value}})),placeholder:"Подробное описание оффера на русском языке",rows:4,"data-testid":"textarea-description-ru"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"description-en",className:"text-sm text-muted-foreground",children:"На английском"}),r.jsx(pt,{id:"description-en",value:a.description.en,onChange:b=>i(p=>({...p,description:{...p.description,en:b.target.value}})),placeholder:"Detailed offer description in English",rows:4,"data-testid":"textarea-description-en"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"logo",children:"Логотип оффера"}),r.jsxs("div",{className:"mt-2",children:[r.jsxs(RP,{maxNumberOfFiles:1,maxFileSize:5*1024*1024,onGetUploadParameters:async()=>{const b=localStorage.getItem("auth_token");return{method:"PUT",url:(await(await fetch("/api/objects/upload",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`}})).json()).uploadURL}},onComplete:b=>{var p;if(b.successful&&b.successful[0]){const N=b.successful[0].uploadURL;if(N){const k=(p=N.split("uploads/")[1])==null?void 0:p.split("?")[0];if(k){const C=`/objects/uploads/${k}`;i(_=>({..._,logo:C})),t({title:"Успех",description:"Логотип успешно загружен"})}}}},buttonClassName:"w-full",children:[r.jsx(pl,{className:"h-4 w-4 mr-2"}),"Загрузить логотип"]}),a.logo&&r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(co,{className:"h-4 w-4"}),"Предварительный просмотр:"]}),r.jsx("img",{src:a.logo,alt:"Логотип оффера",className:"w-20 h-20 object-cover rounded-lg border border-border",onError:b=>{const p=b.target;p.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0yNS4zMzMzIDMzLjMzMzNIMzBWNDBIMjUuMzMzM1YzMy4zMzMzWk01MCA0MC4wMDAxSDU0LjY2NjdWMzMuMzMzNEg1MFY0MC4wMDAxWk0zNi42NjY3IDI2LjY2NjdWMzMuMzMzM0g0My4zMzMzVjI2LjY2NjdIMzYuNjY2N1pNMzEuMzMzMyAyNi42NjY3SDI1LjMzMzNWMjAuNjY2N0gyNS4zMzMzVjI2LjY2NjdIMzEuMzMzM1pNNTQuNjY2NyAyNi42NjY3SDQ4LjY2NjdWMjAuNjY2N0g1NC42NjY3VjI2LjY2NjdaTTI0LjY2NjcgNTIuNjY2N0g1NVY1OC42NjY3SDI0LjY2NjdWNTIuNjY2N1oiIGZpbGw9IiM5Q0EzQUYiLz4KPC9zdmc+"}}),r.jsxs(M,{type:"button",variant:"outline",size:"sm",onClick:()=>i(b=>({...b,logo:""})),className:"text-destructive hover:text-destructive",children:[r.jsx(wr,{className:"h-3 w-3 mr-1"}),"Удалить логотип"]})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"kpi",children:"KPI / Цель"}),r.jsx(ne,{id:"kpi",value:a.kpi,onChange:b=>i(p=>({...p,kpi:b.target.value})),placeholder:"Например: FTD, Registration, Sale","data-testid":"input-kpi"})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Креативные материалы"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Загрузите ZIP архив с рекламными материалами для партнеров"}),r.jsx(EY,{maxNumberOfFiles:1,maxFileSize:52428800,onGetUploadParameters:u,onComplete:h,uploaded:c,buttonClassName:"w-full max-w-sm"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"payoutType",children:"Тип выплаты"}),r.jsxs(he,{value:a.payoutType,onValueChange:b=>i(p=>({...p,payoutType:b})),children:[r.jsx(de,{"data-testid":"select-payout-type",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"cpa",children:"CPA - Cost Per Action"}),r.jsx(S,{value:"cpl",children:"CPL - Cost Per Lead"}),r.jsx(S,{value:"cps",children:"CPS - Cost Per Sale"}),r.jsx(S,{value:"revshare",children:"Revenue Share"}),r.jsx(S,{value:"hybrid",children:"Hybrid"})]})]})]})]})]})}),r.jsx(He,{value:"targeting",className:"space-y-6",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Разрешенные источники"})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Источники трафика"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:uVe.map(b=>{var p;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`traffic-${b}`,checked:((p=a.trafficSources)==null?void 0:p.includes(b))||!1,onChange:()=>{const N=a.trafficSources||[],k=N.includes(b)?N.filter(C=>C!==b):[...N,b];i(C=>({...C,trafficSources:k}))},className:"rounded"}),r.jsx(L,{htmlFor:`traffic-${b}`,className:"text-sm",children:b})]},b)})})]}),r.jsx(wn,{}),r.jsxs("div",{children:[r.jsx(L,{children:"Разрешенные приложения"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Выберите типы приложений, которые разрешены для данного оффера"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-2",children:TF.map(b=>{var p;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`app-${b.replace(/\s+/g,"-").toLowerCase()}`,checked:((p=a.allowedApplications)==null?void 0:p.includes(b))||!1,onChange:()=>{const N=a.allowedApplications||[],k=N.includes(b)?N.filter(C=>C!==b):[...N,b];i(C=>({...C,allowedApplications:k}))},className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50","data-testid":`checkbox-app-${b.replace(/\s+/g,"-").toLowerCase()}`}),r.jsx(L,{htmlFor:`app-${b.replace(/\s+/g,"-").toLowerCase()}`,className:"text-sm font-medium cursor-pointer hover:text-blue-600 transition-colors",children:b})]},b)})}),((j=a.allowedApplications)==null?void 0:j.length)>0&&r.jsx("div",{className:"mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:r.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["Выбрано приложений: ",a.allowedApplications.length," из ",TF.length]})})]}),r.jsx(wn,{})]})]})}),r.jsx(He,{value:"links",className:"space-y-6",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Ссылки и домены"})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"targetUrl",children:"Целевая ссылка оффера *"}),r.jsxs("div",{className:"grid grid-cols-12 gap-2 text-xs font-medium text-muted-foreground px-4 mb-2 mt-3",children:[r.jsx("div",{className:"col-span-2",children:"Название"}),r.jsx("div",{className:"col-span-4",children:"URL целевой страницы"}),r.jsx("div",{className:"col-span-2",children:"Разные ГЕО для URL"}),r.jsx("div",{className:"col-span-2",children:"Разные выплаты для URL"}),r.jsx("div",{className:"col-span-1",children:"По умолчанию"}),r.jsx("div",{className:"col-span-1",children:"Удалить"})]}),r.jsxs("div",{className:"space-y-2",children:[a.landingPages.map((b,p)=>r.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 border rounded-lg",children:[r.jsx("div",{className:"col-span-2",children:r.jsx(ne,{placeholder:"Название",value:b.name,onChange:N=>w(b.id,"name",N.target.value),className:"w-full text-sm"})}),r.jsx("div",{className:"col-span-4",children:r.jsx(ne,{placeholder:"URL целевой страницы",value:b.url,onChange:N=>{w(b.id,"url",N.target.value),b.isDefault&&i(k=>({...k,targetUrl:N.target.value}))},className:"w-full text-sm"})}),r.jsx("div",{className:"col-span-2",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("input",{type:"checkbox",checked:a.hasGlobalGeoSetting||!1,onChange:N=>i(k=>({...k,hasGlobalGeoSetting:N.target.checked,landingPages:k.landingPages.map(C=>({...C,hasCustomGeo:N.target.checked}))})),className:"rounded flex-shrink-0",title:"Разные ГЕО для URL"}),r.jsx(hVe,{placeholder:"Выберите ГЕО",value:a.hasGlobalGeoSetting?b.geo||"":a.globalGeo||"",onChange:N=>{a.hasGlobalGeoSetting?w(b.id,"geo",N):i(k=>({...k,globalGeo:N,landingPages:k.landingPages.map(C=>({...C,geo:N}))}))}})]})}),r.jsx("div",{className:"col-span-2",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("input",{type:"checkbox",checked:a.hasGlobalPayoutSetting||!1,onChange:N=>i(k=>({...k,hasGlobalPayoutSetting:N.target.checked,landingPages:k.landingPages.map(C=>({...C,hasCustomPayout:N.target.checked}))})),className:"rounded flex-shrink-0",title:"Разные выплаты для URL"}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(ne,{placeholder:"Сумма",value:a.hasGlobalPayoutSetting?b.payout||"":a.globalPayout||"",onChange:N=>{a.hasGlobalPayoutSetting?w(b.id,"payout",N.target.value):i(k=>({...k,globalPayout:N.target.value}))},className:"flex-1 text-sm"}),r.jsxs(he,{value:a.currency,onValueChange:N=>i(k=>({...k,currency:N})),children:[r.jsx(de,{className:"w-20 text-sm",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"USD",children:"USD"}),r.jsx(S,{value:"EUR",children:"EUR"}),r.jsx(S,{value:"RUB",children:"RUB"}),r.jsx(S,{value:"AED",children:"AED"}),r.jsx(S,{value:"AFN",children:"AFN"}),r.jsx(S,{value:"ALL",children:"ALL"}),r.jsx(S,{value:"AMD",children:"AMD"}),r.jsx(S,{value:"ANG",children:"ANG"}),r.jsx(S,{value:"AOA",children:"AOA"}),r.jsx(S,{value:"ARS",children:"ARS"}),r.jsx(S,{value:"AUD",children:"AUD"}),r.jsx(S,{value:"AWG",children:"AWG"}),r.jsx(S,{value:"AZN",children:"AZN"}),r.jsx(S,{value:"BAM",children:"BAM"}),r.jsx(S,{value:"BBD",children:"BBD"}),r.jsx(S,{value:"BDT",children:"BDT"}),r.jsx(S,{value:"BGN",children:"BGN"}),r.jsx(S,{value:"BHD",children:"BHD"}),r.jsx(S,{value:"BIF",children:"BIF"}),r.jsx(S,{value:"BMD",children:"BMD"}),r.jsx(S,{value:"BND",children:"BND"}),r.jsx(S,{value:"BOB",children:"BOB"}),r.jsx(S,{value:"BRL",children:"BRL"}),r.jsx(S,{value:"BSD",children:"BSD"}),r.jsx(S,{value:"BTN",children:"BTN"}),r.jsx(S,{value:"BWP",children:"BWP"}),r.jsx(S,{value:"BYN",children:"BYN"}),r.jsx(S,{value:"BZD",children:"BZD"}),r.jsx(S,{value:"CAD",children:"CAD"}),r.jsx(S,{value:"CDF",children:"CDF"}),r.jsx(S,{value:"CHF",children:"CHF"}),r.jsx(S,{value:"CLP",children:"CLP"}),r.jsx(S,{value:"CNY",children:"CNY"}),r.jsx(S,{value:"COP",children:"COP"}),r.jsx(S,{value:"CRC",children:"CRC"}),r.jsx(S,{value:"CUC",children:"CUC"}),r.jsx(S,{value:"CUP",children:"CUP"}),r.jsx(S,{value:"CVE",children:"CVE"}),r.jsx(S,{value:"CZK",children:"CZK"}),r.jsx(S,{value:"DJF",children:"DJF"}),r.jsx(S,{value:"DKK",children:"DKK"}),r.jsx(S,{value:"DOP",children:"DOP"}),r.jsx(S,{value:"DZD",children:"DZD"}),r.jsx(S,{value:"EGP",children:"EGP"}),r.jsx(S,{value:"ERN",children:"ERN"}),r.jsx(S,{value:"ETB",children:"ETB"}),r.jsx(S,{value:"FJD",children:"FJD"}),r.jsx(S,{value:"FKP",children:"FKP"}),r.jsx(S,{value:"GBP",children:"GBP"}),r.jsx(S,{value:"GEL",children:"GEL"}),r.jsx(S,{value:"GGP",children:"GGP"}),r.jsx(S,{value:"GHS",children:"GHS"}),r.jsx(S,{value:"GIP",children:"GIP"}),r.jsx(S,{value:"GMD",children:"GMD"}),r.jsx(S,{value:"GNF",children:"GNF"}),r.jsx(S,{value:"GTQ",children:"GTQ"}),r.jsx(S,{value:"GYD",children:"GYD"}),r.jsx(S,{value:"HKD",children:"HKD"}),r.jsx(S,{value:"HNL",children:"HNL"}),r.jsx(S,{value:"HRK",children:"HRK"}),r.jsx(S,{value:"HTG",children:"HTG"}),r.jsx(S,{value:"HUF",children:"HUF"}),r.jsx(S,{value:"IDR",children:"IDR"}),r.jsx(S,{value:"ILS",children:"ILS"}),r.jsx(S,{value:"IMP",children:"IMP"}),r.jsx(S,{value:"INR",children:"INR"}),r.jsx(S,{value:"IQD",children:"IQD"}),r.jsx(S,{value:"IRR",children:"IRR"}),r.jsx(S,{value:"ISK",children:"ISK"}),r.jsx(S,{value:"JEP",children:"JEP"}),r.jsx(S,{value:"JMD",children:"JMD"}),r.jsx(S,{value:"JOD",children:"JOD"}),r.jsx(S,{value:"JPY",children:"JPY"}),r.jsx(S,{value:"KES",children:"KES"}),r.jsx(S,{value:"KGS",children:"KGS"}),r.jsx(S,{value:"KHR",children:"KHR"}),r.jsx(S,{value:"KMF",children:"KMF"}),r.jsx(S,{value:"KPW",children:"KPW"}),r.jsx(S,{value:"KRW",children:"KRW"}),r.jsx(S,{value:"KWD",children:"KWD"}),r.jsx(S,{value:"KYD",children:"KYD"}),r.jsx(S,{value:"KZT",children:"KZT"}),r.jsx(S,{value:"LAK",children:"LAK"}),r.jsx(S,{value:"LBP",children:"LBP"}),r.jsx(S,{value:"LKR",children:"LKR"}),r.jsx(S,{value:"LRD",children:"LRD"}),r.jsx(S,{value:"LSL",children:"LSL"}),r.jsx(S,{value:"LYD",children:"LYD"}),r.jsx(S,{value:"MAD",children:"MAD"}),r.jsx(S,{value:"MDL",children:"MDL"}),r.jsx(S,{value:"MGA",children:"MGA"}),r.jsx(S,{value:"MKD",children:"MKD"}),r.jsx(S,{value:"MMK",children:"MMK"}),r.jsx(S,{value:"MNT",children:"MNT"}),r.jsx(S,{value:"MOP",children:"MOP"}),r.jsx(S,{value:"MRU",children:"MRU"}),r.jsx(S,{value:"MUR",children:"MUR"}),r.jsx(S,{value:"MVR",children:"MVR"}),r.jsx(S,{value:"MWK",children:"MWK"}),r.jsx(S,{value:"MXN",children:"MXN"}),r.jsx(S,{value:"MYR",children:"MYR"}),r.jsx(S,{value:"MZN",children:"MZN"}),r.jsx(S,{value:"NAD",children:"NAD"}),r.jsx(S,{value:"NGN",children:"NGN"}),r.jsx(S,{value:"NIO",children:"NIO"}),r.jsx(S,{value:"NOK",children:"NOK"}),r.jsx(S,{value:"NPR",children:"NPR"}),r.jsx(S,{value:"NZD",children:"NZD"}),r.jsx(S,{value:"OMR",children:"OMR"}),r.jsx(S,{value:"PAB",children:"PAB"}),r.jsx(S,{value:"PEN",children:"PEN"}),r.jsx(S,{value:"PGK",children:"PGK"}),r.jsx(S,{value:"PHP",children:"PHP"}),r.jsx(S,{value:"PKR",children:"PKR"}),r.jsx(S,{value:"PLN",children:"PLN"}),r.jsx(S,{value:"PYG",children:"PYG"}),r.jsx(S,{value:"QAR",children:"QAR"}),r.jsx(S,{value:"RON",children:"RON"}),r.jsx(S,{value:"RSD",children:"RSD"}),r.jsx(S,{value:"RWF",children:"RWF"}),r.jsx(S,{value:"SAR",children:"SAR"}),r.jsx(S,{value:"SBD",children:"SBD"}),r.jsx(S,{value:"SCR",children:"SCR"}),r.jsx(S,{value:"SDG",children:"SDG"}),r.jsx(S,{value:"SEK",children:"SEK"}),r.jsx(S,{value:"SGD",children:"SGD"}),r.jsx(S,{value:"SHP",children:"SHP"}),r.jsx(S,{value:"SLE",children:"SLE"}),r.jsx(S,{value:"SOS",children:"SOS"}),r.jsx(S,{value:"SRD",children:"SRD"}),r.jsx(S,{value:"STN",children:"STN"}),r.jsx(S,{value:"SYP",children:"SYP"}),r.jsx(S,{value:"SZL",children:"SZL"}),r.jsx(S,{value:"THB",children:"THB"}),r.jsx(S,{value:"TJS",children:"TJS"}),r.jsx(S,{value:"TMT",children:"TMT"}),r.jsx(S,{value:"TND",children:"TND"}),r.jsx(S,{value:"TOP",children:"TOP"}),r.jsx(S,{value:"TRY",children:"TRY"}),r.jsx(S,{value:"TTD",children:"TTD"}),r.jsx(S,{value:"TVD",children:"TVD"}),r.jsx(S,{value:"TWD",children:"TWD"}),r.jsx(S,{value:"TZS",children:"TZS"}),r.jsx(S,{value:"UAH",children:"UAH"}),r.jsx(S,{value:"UGX",children:"UGX"}),r.jsx(S,{value:"UYU",children:"UYU"}),r.jsx(S,{value:"UZS",children:"UZS"}),r.jsx(S,{value:"VED",children:"VED"}),r.jsx(S,{value:"VES",children:"VES"}),r.jsx(S,{value:"VND",children:"VND"}),r.jsx(S,{value:"VUV",children:"VUV"}),r.jsx(S,{value:"WST",children:"WST"}),r.jsx(S,{value:"XAF",children:"XAF"}),r.jsx(S,{value:"XCD",children:"XCD"}),r.jsx(S,{value:"XDR",children:"XDR"}),r.jsx(S,{value:"XOF",children:"XOF"}),r.jsx(S,{value:"XPF",children:"XPF"}),r.jsx(S,{value:"YER",children:"YER"}),r.jsx(S,{value:"ZAR",children:"ZAR"}),r.jsx(S,{value:"ZMW",children:"ZMW"}),r.jsx(S,{value:"ZWL",children:"ZWL"})]})]})]})]})}),r.jsx("div",{className:"col-span-1 flex justify-center",children:r.jsx("input",{type:"checkbox",checked:b.isDefault,onChange:N=>w(b.id,"isDefault",N.target.checked),className:"rounded",title:"По умолчанию"})}),r.jsx("div",{className:"col-span-1 flex justify-center",children:a.landingPages.length>1&&r.jsx(M,{type:"button",variant:"outline",size:"sm",onClick:()=>x(b.id),title:"Удалить лендинг",className:"h-8 w-8 p-0",children:r.jsx(wr,{className:"h-3 w-3"})})})]},b.id)),r.jsxs(M,{type:"button",onClick:v,variant:"outline",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить лендинг"]})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Целевые ссылки оффера, куда будут направляться пользователи"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"dailyLimit",children:"Дневной лимит"}),r.jsx(ne,{id:"dailyLimit",type:"number",value:a.dailyLimit,onChange:b=>i(p=>({...p,dailyLimit:Number(b.target.value)})),placeholder:"0 - без ограничений","data-testid":"input-daily-limit"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"monthlyLimit",children:"Месячный лимит"}),r.jsx(ne,{id:"monthlyLimit",type:"number",value:a.monthlyLimit,onChange:b=>i(p=>({...p,monthlyLimit:Number(b.target.value)})),placeholder:"0 - без ограничений","data-testid":"input-monthly-limit"})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"postbackUrl",children:"Postback URL"}),r.jsx(ne,{id:"postbackUrl",value:a.postbackUrl,onChange:b=>i(p=>({...p,postbackUrl:b.target.value})),placeholder:"https://example.com/postback","data-testid":"input-postback-url"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"URL для получения уведомлений о конверсиях"})]})]}),r.jsx(wn,{})]})]})}),r.jsx(He,{value:"antifraud",className:"space-y-6",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Антифрод защита"})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"antifraudEnabled",checked:a.antifraudEnabled,onChange:b=>i(p=>({...p,antifraudEnabled:b.target.checked})),className:"rounded"}),r.jsx(L,{htmlFor:"antifraudEnabled",className:"font-medium",children:"Включить антифрод защиту"})]}),a.antifraudEnabled&&r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border",children:[r.jsx(L,{className:"text-base font-medium mb-3 block",children:"Методы антифрод защиты"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Выберите методы защиты от мошеннического трафика"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:EF.map(b=>{var p;return r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("input",{type:"checkbox",id:`antifraud-${b.value}`,checked:((p=a.antifraudMethods)==null?void 0:p.includes(b.value))||!1,onChange:()=>{const N=a.antifraudMethods||[],k=N.includes(b.value)?N.filter(C=>C!==b.value):[...N,b.value];i(C=>({...C,antifraudMethods:k}))},className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 mt-1","data-testid":`checkbox-antifraud-${b.value}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx(L,{htmlFor:`antifraud-${b.value}`,className:"text-sm font-medium cursor-pointer hover:text-blue-600 transition-colors",children:b.label}),b.description&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b.description})]})]},b.value)})}),((g=a.antifraudMethods)==null?void 0:g.length)>0&&r.jsx("div",{className:"mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:r.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["Активные методы защиты: ",a.antifraudMethods.length," из ",EF.length]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"partnerApprovalType",className:"font-medium",children:"Тип подтверждения партнеров"}),r.jsxs(he,{value:a.partnerApprovalType,onValueChange:b=>i(p=>({...p,partnerApprovalType:b})),children:[r.jsx(de,{"data-testid":"select-partner-approval",className:"mt-2",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"auto",children:"Автоматическое одобрение"}),r.jsx(S,{value:"manual",children:"Ручное одобрение"}),r.jsx(S,{value:"by_request",children:"По запросу партнера"}),r.jsx(S,{value:"whitelist_only",children:"Только из белого списка"})]})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Выберите, как партнеры получают доступ к офферу"})]}),r.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[r.jsx("input",{type:"checkbox",id:"kycRequired",checked:a.kycRequired,onChange:b=>i(p=>({...p,kycRequired:b.target.checked})),className:"rounded","data-testid":"checkbox-kyc-required"}),r.jsx(L,{htmlFor:"kycRequired",children:"Требуется верификация KYC"})]})]}),r.jsxs("div",{className:"pt-4 border-t bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsx(L,{htmlFor:"status",className:"text-lg font-semibold text-blue-800 dark:text-blue-300",children:"Статус оффера"}),r.jsxs(he,{value:a.status,onValueChange:b=>i(p=>({...p,status:b})),children:[r.jsx(de,{"data-testid":"select-status",className:"mt-2 border-blue-300 dark:border-blue-700 focus:border-blue-500 dark:focus:border-blue-400",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"draft",children:"Черновик"}),r.jsx(S,{value:"active",children:"Активный"}),r.jsx(S,{value:"paused",children:"Приостановлен"}),r.jsx(S,{value:"on_request",children:"По запросу"})]})]})]})]})]})})]}),r.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[r.jsx(M,{type:"button",variant:"outline",onClick:()=>i(AF),children:"Сбросить"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(M,{type:"button",variant:"outline",onClick:()=>{i(b=>({...b,status:"draft"})),m(new Event("submit"))},disabled:f.isPending,children:[r.jsx(Tl,{className:"h-4 w-4 mr-2"}),"Сохранить как черновик"]}),r.jsx(M,{type:"button",onClick:()=>{i(b=>({...b,status:"active"})),m(new Event("submit"))},disabled:f.isPending,children:f.isPending?"Создание...":"Создать оффер"})]})]})]})]})})}function fVe(e){return{gambling:{label:"Гемблинг",className:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},dating:{label:"Знакомства",className:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300"},finance:{label:"Финансы",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},crypto:{label:"Крипто",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"},nutra:{label:"Нутра",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},software:{label:"ПО",className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}}[e]||{label:e,className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}}function mVe(){const e=Rv(),[,t]=hs(),{toast:n}=lt(),s=Et(),a=e.id,i={id:a||"1",name:"1Win Казино - Premium",description:"Топовое онлайн казино с высокой конверсией. Лицензированная платформа с широким выбором игр, слотов и живых дилеров. Привлекательные бонусы и мгновенные выплаты.",logo:"https://via.placeholder.com/80x80/9333ea/ffffff?text=1W",category:"gambling",payout:"150",payoutType:"cpa",currency:"USD",status:"active",countries:["RU","KZ","BY","UA"],creatives:"/creatives/1win-casino-pack.zip",creativesUrl:"https://storage.googleapis.com/replit-objstore-test/creatives/1win-casino-pack.zip",landingPages:[{id:"1",name:"Главная страница",url:"https://1win-casino.com/main",type:"main",isDefault:!0},{id:"2",name:"Страница регистрации",url:"https://1win-casino.com/register",type:"registration",isDefault:!1},{id:"3",name:"Промо-страница",url:"https://1win-casino.com/promo-bonus",type:"promo",isDefault:!1}],kpiConditions:{minDeposit:50,minAge:18,countries:["RU","KZ","BY","UA"],allowedTrafficTypes:["contextual","social","email"]},restrictions:{forbidden_sources:["adult","fraud","incentive"],allowed_sources:["google","facebook","telegram","email"],geo_restrictions:[]},trackingLink:`https://track.partner.com/${a}/{{subid}}`,createdAt:"2024-01-15T10:30:00Z",advertiserInfo:{name:"1Win Gaming",company:"1Win Entertainment Ltd"},stats:{totalPartners:245,activePartners:89,pendingRequests:12,totalClicks:15420,conversions:892,revenue:133800}},l=(u,h)=>{navigator.clipboard.writeText(u),n({title:"Скопировано",description:`${h} скопировано в буфер обмена`})},o=async u=>{try{const h=localStorage.getItem("token"),f=await fetch(`/api/partner/offers/${a}/creatives/download`,{method:"GET",headers:{Authorization:`Bearer ${h}`}});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const m=await f.blob(),v=window.URL.createObjectURL(m),x=document.createElement("a");x.href=v,x.download=`creatives-${a}.zip`,document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(v),n({title:"Скачивание началось",description:"ZIP архив с креативами успешно скачивается"})}catch(h){console.error("Download error:",h),n({title:"Ошибка скачивания",description:"Не удалось скачать креативы",variant:"destructive"})}},c=Ee({mutationFn:async u=>{const h=localStorage.getItem("token"),f=await fetch(`/api/offers/${a}/creatives`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({creativeUrl:u})});if(!f.ok)throw new Error("Failed to update creatives");return f.json()},onSuccess:()=>{n({title:"Креативы обновлены",description:"ZIP архив с креативами успешно загружен"}),s.invalidateQueries({queryKey:["/api/advertiser/offers"]})},onError:u=>{console.error("Update creatives error:",u),n({title:"Ошибка загрузки",description:"Не удалось загрузить креативы",variant:"destructive"})}}),d=fVe(i.category);return r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>t("/advertiser/offers"),className:"flex items-center gap-2",children:[r.jsx(yc,{className:"w-4 h-4"}),"Назад к офферам"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Детали оффера"})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("img",{src:i.logo,alt:i.name,className:"w-16 h-16 rounded-lg object-cover"}),r.jsxs("div",{children:[r.jsx(ae,{className:"text-xl mb-2",children:i.name}),r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(le,{className:d.className,children:d.label}),r.jsx(le,{variant:"default",children:"Активен"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[i.payout," ",i.currency]}),r.jsx("div",{className:"text-sm text-muted-foreground uppercase",children:i.payoutType})]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg dark:bg-green-900/20",children:[r.jsx(Rt,{className:"w-5 h-5 text-green-600"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-green-600",children:["$",i.stats.revenue.toLocaleString()]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Доход"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg dark:bg-blue-900/20",children:[r.jsx(dr,{className:"w-5 h-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-blue-600",children:i.stats.activePartners}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Активных партнеров"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-50 rounded-lg dark:bg-purple-900/20",children:[r.jsx(Kt,{className:"w-5 h-5 text-purple-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-purple-600",children:i.stats.conversions}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Конверсии"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-orange-50 rounded-lg dark:bg-orange-900/20",children:[r.jsx(Ls,{className:"w-5 h-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-orange-600",children:new Date(i.createdAt).toLocaleDateString("ru-RU")}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Дата создания"})]})]})]})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Qn,{className:"w-5 h-5"}),"Управление креативами"]})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50 dark:bg-gray-900/50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:r.jsx(Qn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Текущий архив креативов"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"ZIP архив с рекламными материалами"})]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(M,{variant:"outline",onClick:()=>o(),title:"Скачать текущие креативы",children:[r.jsx(vr,{className:"w-4 h-4 mr-2"}),"Скачать"]})})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h5",{className:"font-medium mb-3",children:"Загрузить новые креативы"}),r.jsx(EY,{offerId:a,onComplete:u=>{c.mutate(u)}})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Kt,{className:"w-5 h-5"}),"Трекинговая ссылка"]})}),r.jsxs(H,{children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg dark:bg-gray-900/50",children:[r.jsx("code",{className:"flex-1 text-sm font-mono",children:i.trackingLink}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>l(i.trackingLink,"Трекинговая ссылка"),title:"Копировать ссылку",children:r.jsx(Yr,{className:"w-4 h-4"})})]}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Партнеры заменят ","{{",r.jsx("code",{children:"subid"}),"}"," на свой уникальный идентификатор трафика"]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Lv,{className:"w-5 h-5"}),"Доступные страны"]})}),r.jsx(H,{children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:i.countries.map(u=>r.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",title:Hc(u),children:[r.jsx("span",{className:"text-xl",children:Al(u)}),r.jsx("span",{className:"font-medium text-sm",children:Hc(u)}),r.jsx(le,{variant:"secondary",className:"ml-auto text-xs",children:u})]},u))})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Mf,{className:"w-5 h-5"}),"Лендинг страницы"]})}),r.jsx(H,{children:r.jsx("div",{className:"space-y-3",children:i.landingPages.map(u=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:"font-medium",children:u.name}),u.isDefault&&r.jsx(le,{variant:"secondary",className:"text-xs",children:"По умолчанию"}),r.jsx(le,{variant:"outline",className:"text-xs",children:u.type})]}),r.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:u.url})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>l(u.url,u.name),title:"Копировать URL",children:r.jsx(Yr,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>window.open(u.url,"_blank"),title:"Открыть в новой вкладке",children:r.jsx(Mf,{className:"w-4 h-4"})})]})]},u.id))})})]})]})}const pVe=()=>{const[e,t]=hs(),{toast:n}=lt(),s=Et(),i=Rv().id,{data:l,isLoading:o}=$e({queryKey:["/api/advertiser/offers",i],queryFn:()=>Te(`/api/advertiser/offers/${i}`),enabled:!!i}),[c,d]=y.useState({name:"",description:{ru:"",en:""},category:"",payout:"",currency:"USD",payoutType:"CPA",countries:[],trafficSources:[],allowedApplications:[],antifraudEnabled:!1,antifraudMethods:[],partnerApprovalType:"automatic",kycRequired:!1,isPrivate:!1,dailyLimit:"",monthlyLimit:"",landingPages:[{name:"Default Landing",url:"",isDefault:!0}]});y.useEffect(()=>{var m,v;l&&d({name:l.name||"",description:l.description||{ru:"",en:""},category:l.category||"",payout:l.payout||"",currency:l.currency||"USD",payoutType:l.payoutType||"CPA",countries:l.countries||[],trafficSources:l.trafficSources||[],allowedApplications:l.allowedApplications||[],antifraudEnabled:l.antifraudEnabled||!1,antifraudMethods:l.antifraudMethods||[],partnerApprovalType:l.partnerApprovalType||"automatic",kycRequired:l.kycRequired||!1,isPrivate:l.isPrivate||!1,dailyLimit:((m=l.dailyLimit)==null?void 0:m.toString())||"",monthlyLimit:((v=l.monthlyLimit)==null?void 0:v.toString())||"",landingPages:l.landingPages||[{name:"Default Landing",url:"",isDefault:!0}]})},[l]);const u=Ee({mutationFn:async m=>Te(`/api/advertiser/offers/${i}`,{method:"PATCH",body:m}),onSuccess:()=>{n({title:"Оффер обновлен",description:"Изменения успешно сохранены"}),s.invalidateQueries({queryKey:["/api/advertiser/offers"]}),t("/advertiser/offers")},onError:m=>{n({title:"Ошибка",description:m.message||"Не удалось обновить оффер",variant:"destructive"})}}),h=m=>{m.preventDefault();const v={...c,dailyLimit:c.dailyLimit?parseInt(c.dailyLimit):null,monthlyLimit:c.monthlyLimit?parseInt(c.monthlyLimit):null};u.mutate(v)},f=(m,v)=>{d(x=>({...x,[m]:v}))};return o?r.jsx("div",{className:"w-full space-y-6",children:r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):l?r.jsxs("div",{className:"w-full space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>t("/advertiser/offers"),children:[r.jsx(yc,{className:"h-4 w-4 mr-2"}),"Назад к офферам"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Редактирование оффера"}),r.jsx("p",{className:"text-muted-foreground",children:l.name})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(M,{variant:"outline",onClick:()=>t("/advertiser/offers"),children:[r.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Отмена"]}),r.jsxs(M,{onClick:h,disabled:u.isPending,children:[r.jsx(Tl,{className:"h-4 w-4 mr-2"}),u.isPending?"Сохранение...":"Сохранить"]})]})]}),r.jsxs("form",{onSubmit:h,className:"space-y-6",children:[r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Основная информация"})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"name",children:"Название оффера"}),r.jsx(ne,{id:"name",value:c.name,onChange:m=>f("name",m.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"category",children:"Категория"}),r.jsxs(he,{value:c.category,onValueChange:m=>f("category",m),children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите категорию"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"gambling",children:"Гемблинг"}),r.jsx(S,{value:"betting",children:"Ставки"}),r.jsx(S,{value:"finance",children:"Финансы"}),r.jsx(S,{value:"crypto",children:"Криптовалюта"}),r.jsx(S,{value:"dating",children:"Знакомства"}),r.jsx(S,{value:"nutra",children:"Нутра"}),r.jsx(S,{value:"games",children:"Игры"}),r.jsx(S,{value:"apps",children:"Приложения"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"description-ru",children:"Описание (русский)"}),r.jsx(pt,{id:"description-ru",value:c.description.ru,onChange:m=>f("description",{...c.description,ru:m.target.value}),rows:3})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"description-en",children:"Описание (английский)"}),r.jsx(pt,{id:"description-en",value:c.description.en,onChange:m=>f("description",{...c.description,en:m.target.value}),rows:3})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Выплаты и лимиты"})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"payout",children:"Payout"}),r.jsx(ne,{id:"payout",value:c.payout,onChange:m=>f("payout",m.target.value),placeholder:"100"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"currency",children:"Валюта"}),r.jsxs(he,{value:c.currency,onValueChange:m=>f("currency",m),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"USD",children:"USD"}),r.jsx(S,{value:"EUR",children:"EUR"}),r.jsx(S,{value:"RUB",children:"RUB"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"payoutType",children:"Тип выплаты"}),r.jsxs(he,{value:c.payoutType,onValueChange:m=>f("payoutType",m),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"CPA",children:"CPA"}),r.jsx(S,{value:"CPL",children:"CPL"}),r.jsx(S,{value:"CPC",children:"CPC"}),r.jsx(S,{value:"CPM",children:"CPM"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"dailyLimit",children:"Дневной лимит"}),r.jsx(ne,{id:"dailyLimit",type:"number",value:c.dailyLimit,onChange:m=>f("dailyLimit",m.target.value),placeholder:"Не ограничен"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"monthlyLimit",children:"Месячный лимит"}),r.jsx(ne,{id:"monthlyLimit",type:"number",value:c.monthlyLimit,onChange:m=>f("monthlyLimit",m.target.value),placeholder:"Не ограничен"})]})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Настройки доступа"})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(on,{id:"antifraudEnabled",checked:c.antifraudEnabled,onCheckedChange:m=>f("antifraudEnabled",m)}),r.jsx(L,{htmlFor:"antifraudEnabled",children:"Включить антифрод"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(on,{id:"kycRequired",checked:c.kycRequired,onCheckedChange:m=>f("kycRequired",m)}),r.jsx(L,{htmlFor:"kycRequired",children:"Требуется KYC"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(on,{id:"isPrivate",checked:c.isPrivate,onCheckedChange:m=>f("isPrivate",m)}),r.jsx(L,{htmlFor:"isPrivate",children:"Приватный оффер"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"partnerApprovalType",children:"Тип одобрения партнеров"}),r.jsxs(he,{value:c.partnerApprovalType,onValueChange:m=>f("partnerApprovalType",m),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"automatic",children:"Автоматическое"}),r.jsx(S,{value:"manual",children:"Ручное"}),r.jsx(S,{value:"on_request",children:"По запросу"}),r.jsx(S,{value:"whitelist_only",children:"Только whitelist"})]})]})]})]})]})]})]}):r.jsxs("div",{className:"w-full text-center py-8",children:[r.jsx("p",{className:"text-gray-600",children:"Оффер не найден"}),r.jsx(M,{onClick:()=>t("/advertiser/offers"),className:"mt-4",children:"Вернуться к офферам"})]})},xVe=({id:e,children:t})=>{const{attributes:n,listeners:s,setNodeRef:a,transform:i,transition:l}=QK({id:e}),o={transform:jm.Transform.toString(i),transition:l};return r.jsx(Re,{ref:a,style:o,...n,...s,className:"cursor-grab active:cursor-grabbing",children:t})},gVe=()=>{const{toast:e}=lt(),[t,n]=y.useState([]),[s,a]=y.useState(null),[i,l]=y.useState("all"),[o,c]=y.useState("all-categories"),[d,u]=y.useState(""),[h,f]=y.useState([]),m=Et(),{data:v=[],isLoading:x}=$e({queryKey:["/api/advertiser/offers"],retry:!1});y.useEffect(()=>{v&&v.length>0&&f(v.map($=>$.id))},[v]);const w=Ee({mutationFn:$=>Te("/api/advertiser/offers","POST",$),onSuccess:()=>{e({title:"Успех",description:"Оффер добавлен"}),m.invalidateQueries({queryKey:["/api/advertiser/offers"]})},onError:$=>{e({title:"Ошибка",description:"Ошибка создания оффера: "+$.message,variant:"destructive"})}}),j=Ee({mutationFn:$=>Te(`/api/advertiser/offers/${$.id}`,"PUT",$),onSuccess:()=>{e({title:"Успех",description:"Оффер обновлён"}),m.invalidateQueries({queryKey:["/api/advertiser/offers"]})},onError:$=>{e({title:"Ошибка",description:"Ошибка обновления оффера: "+$.message,variant:"destructive"})}}),g=Ee({mutationFn:$=>Te(`/api/advertiser/offers/${$}`,"DELETE"),onSuccess:()=>{e({title:"Успех",description:"Оффер удален"}),m.invalidateQueries({queryKey:["/api/advertiser/offers"]})},onError:$=>{e({title:"Ошибка",description:"Ошибка удаления оффера: "+$.message,variant:"destructive"})}}),b=KFe(a3(xE),a3(mE,{coordinateGetter:m6e})),p=$=>{const{active:A,over:T}=$;if(A.id!==T.id){const O=h.indexOf(A.id),z=h.indexOf(T.id),F=xN(h,O,z);f(F),e({title:"Информация",description:"Порядок офферов изменён"})}},N=$=>{var O;const A=(O=$.target.files)==null?void 0:O[0];if(!A)return;const T=new FileReader;T.onload=async z=>{var Q;const R=((Q=z.target)==null?void 0:Q.result).split(`
`).filter(Y=>Y.trim());let I=0;for(const Y of R){const[K,oe,ge,Ne,Oe,pe]=Y.split(";");if(K!=null&&K.trim())try{await w.mutateAsync({name:K.trim(),countries:(oe==null?void 0:oe.split(",").map(Me=>Me.trim()))||[],payout:(ge==null?void 0:ge.trim())||"0",category:(Ne==null?void 0:Ne.trim())||"",cap:(Oe==null?void 0:Oe.trim())||"",status:(pe==null?void 0:pe.trim())||"active",hold:"",abtestLinks:[],partners:[]}),I++}catch(Me){console.error("Ошибка импорта строки:",Y,Me)}}e({title:"Успех",description:`Импорт завершён. Добавлено: ${I} офферов`})},T.readAsText(A)},k=()=>{const $=v.map(z=>[z.name||"",(z.countries||[]).join(","),z.payout||"",z.category||"",z.cap||"",z.status||""].join(";")).join(`
`),A=new Blob([$],{type:"text/csv"}),T=URL.createObjectURL(A),O=document.createElement("a");O.href=T,O.download="offers.csv",document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(T),e({title:"Успех",description:"Экспорт завершён"})},C=$=>{if(t.length===0){e({title:"Ошибка",description:"Выберите офферы для изменения статуса",variant:"destructive"});return}const A=t.map(T=>{const O=v.find(z=>z.id===T);return O?j.mutateAsync({...O,status:$}):Promise.resolve()});Promise.all(A).then(()=>{e({title:"Успех",description:`Статус изменён для ${t.length} офферов`}),n([])})},_=()=>{if(t.length===0){e({title:"Ошибка",description:"Выберите офферы для удаления",variant:"destructive"});return}if(!confirm(`Удалить ${t.length} офферов? Это действие нельзя отменить.`))return;const $=t.map(A=>g.mutateAsync(A));Promise.all($).then(()=>{e({title:"Успех",description:`Удалено ${t.length} офферов`}),n([])})},P=($,A)=>$!=null&&$.length?r.jsxs("div",{className:"flex flex-col gap-1",children:[$.slice(0,2).map((T,O)=>r.jsxs("a",{href:T,target:"_blank",rel:"noreferrer",className:"text-blue-600 dark:text-blue-400 underline text-xs hover:text-blue-800 dark:hover:text-blue-300",children:["Лендинг ",O+1]},`abtest-${A.id}-${O}`)),$.length>2&&r.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",$.length-2," еще"]}),r.jsxs(M,{size:"sm",variant:"ghost",className:"text-xs h-6 px-2 mt-1 text-blue-500 hover:text-blue-700",onClick:()=>a(A),"data-testid":`button-edit-landings-${A.id}`,children:[r.jsx(rne,{className:"w-3 h-3 mr-1"}),"Редактировать"]})]}):r.jsx("span",{className:"text-muted-foreground",children:"—"}),D=$=>{e({title:"Информация",description:`Открываю дашборд для оффера: ${$}`})},E=v.filter($=>{var z,F,R;const A=i==="all"||$.status===i,T=o==="all-categories"||!o||((z=$.category)==null?void 0:z.includes(o)),O=!d||((F=$.name)==null?void 0:F.toLowerCase().includes(d.toLowerCase()))||((R=$.category)==null?void 0:R.toLowerCase().includes(d.toLowerCase()));return A&&T&&O});return x?r.jsx("div",{className:"p-4",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Загрузка офферов..."})]})})}):r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs(W,{children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-sm font-medium",children:"Всего офферов"})}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:v.length}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Активных: ",v.filter($=>$.status==="active").length]})]})]}),r.jsxs(W,{children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-sm font-medium",children:"Среднее CR"})}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[v.length>0?(v.reduce(($,A)=>$+parseFloat(A.cr||"0"),0)/v.length).toFixed(2):"0.00","%"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Конверсия"})]})]}),r.jsxs(W,{children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-sm font-medium",children:"Общий доход"})}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["$",v.reduce(($,A)=>$+(A.revenue||0),0).toLocaleString()]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"За весь период"})]})]}),r.jsxs(W,{children:[r.jsx(se,{className:"pb-2",children:r.jsx(ae,{className:"text-sm font-medium",children:"Партнёров"})}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:v.reduce(($,A)=>$+(A.partnersCount||0),0)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Всего подключений"})]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between p-4 bg-card border rounded-lg",children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(ne,{placeholder:"Поиск офферов...",value:d,onChange:$=>u($.target.value),className:"pl-10 w-64","data-testid":"input-search-offers"})]}),r.jsxs(he,{value:i,onValueChange:l,children:[r.jsxs(de,{className:"w-40",children:[r.jsx(Ks,{className:"h-4 w-4 mr-2"}),r.jsx(fe,{placeholder:"Статус"})]}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все"}),r.jsx(S,{value:"active",children:"Активные"}),r.jsx(S,{value:"paused",children:"На паузе"}),r.jsx(S,{value:"archived",children:"Архив"})]})]}),r.jsxs(he,{value:o,onValueChange:c,children:[r.jsx(de,{className:"w-40",children:r.jsx(fe,{placeholder:"Категория"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all-categories",children:"Все"}),r.jsx(S,{value:"gambling",children:"Gambling"}),r.jsx(S,{value:"dating",children:"Dating"}),r.jsx(S,{value:"finance",children:"Finance"}),r.jsx(S,{value:"crypto",children:"Crypto"}),r.jsx(S,{value:"nutra",children:"Nutra"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(M,{size:"sm",variant:"outline",onClick:k,"data-testid":"button-export-csv",children:[r.jsx(Bre,{className:"h-4 w-4 mr-2"}),"Экспорт"]}),r.jsxs("div",{className:"relative",children:[r.jsx(ne,{type:"file",accept:".csv",onChange:N,className:"hidden",id:"csv-import"}),r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{var $;return($=document.getElementById("csv-import"))==null?void 0:$.click()},"data-testid":"button-import-csv",children:[r.jsx(pl,{className:"h-4 w-4 mr-2"}),"Импорт CSV"]})]})]})]}),t.length>0&&r.jsxs("div",{className:"flex gap-2 items-center p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[r.jsxs("span",{className:"text-sm font-medium",children:["Выбрано: ",t.length]}),r.jsx(M,{size:"sm",onClick:()=>C("active"),"data-testid":"button-bulk-activate",children:"Активировать"}),r.jsx(M,{size:"sm",onClick:()=>C("paused"),"data-testid":"button-bulk-pause",children:"Приостановить"}),r.jsx(M,{size:"sm",onClick:()=>C("archived"),"data-testid":"button-bulk-archive",children:"Архивировать"}),r.jsx(M,{size:"sm",onClick:_,variant:"destructive","data-testid":"button-bulk-delete",children:"Удалить"}),r.jsx(M,{size:"sm",variant:"outline",onClick:()=>n([]),"data-testid":"button-clear-selection",children:"Отменить"})]}),r.jsx(WK,{sensors:b,collisionDetection:YFe,onDragEnd:p,children:r.jsx(XK,{items:h,strategy:KK,children:r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{className:"w-12",children:r.jsx("input",{type:"checkbox",className:"rounded",checked:t.length===E.length&&E.length>0,onChange:$=>{$.target.checked?n(E.map(A=>A.id)):n([])},"data-testid":"checkbox-select-all"})}),r.jsx(J,{className:"w-8"}),r.jsx(J,{children:"Оффер"}),r.jsx(J,{children:"GEO"}),r.jsx(J,{children:"Payout"}),r.jsx(J,{children:"CAP"}),r.jsx(J,{children:"CR"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"A/B Лендинги"}),r.jsx(J,{className:"text-right",children:"Действия"})]})}),r.jsx($t,{children:h.map($=>{const A=E.find(T=>T.id===$);return A?r.jsxs(xVe,{id:$,children:[r.jsx(q,{children:r.jsx("input",{type:"checkbox",className:"rounded",checked:t.includes(A.id),onChange:T=>{T.target.checked?n([...t,A.id]):n(t.filter(O=>O!==A.id))},"data-testid":`checkbox-select-${A.id}`})}),r.jsx(q,{children:r.jsx(Bw,{className:"h-4 w-4 text-muted-foreground cursor-grab"})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[A.logo&&r.jsx("img",{src:A.logo,alt:A.name,className:"w-8 h-8 rounded object-cover"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:A.name}),r.jsx("div",{className:"text-sm",children:r.jsx(le,{...eG(A.category),children:A.category})})]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[Zk(A.countries).slice(0,3).map((T,O)=>r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-lg",title:T.name,children:T.flag}),r.jsx("span",{className:"text-xs font-mono bg-muted px-1 py-0.5 rounded",children:T.code})]},`${A.id}-country-${O}`)),Zk(A.countries).length>3&&r.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",Zk(A.countries).length-3]})]})}),r.jsx(q,{children:r.jsxs("div",{className:"font-semibold text-green-600 dark:text-green-400",children:["$",A.payout]})}),r.jsx(q,{children:r.jsx("span",{className:"text-sm text-muted-foreground",children:A.cap||"—"})}),r.jsx(q,{children:r.jsxs(le,{variant:parseFloat(z0(A.cr))>5?"default":"secondary",className:parseFloat(z0(A.cr))>5?"bg-green-100 text-green-800":"",children:[z0(A.cr),"%"]})}),r.jsx(q,{children:r.jsx(le,{variant:A.status==="active"?"default":A.status==="paused"?"secondary":A.status==="archived"?"destructive":A.status==="draft"?"outline":"default",className:A.status==="active"?"bg-green-500 hover:bg-green-600 text-white":A.status==="paused"?"bg-yellow-500 hover:bg-yellow-600 text-white":A.status==="archived"?"bg-red-500 hover:bg-red-600 text-white":A.status==="draft"?"bg-gray-500 hover:bg-gray-600 text-white border-gray-600":"bg-blue-500 hover:bg-blue-600 text-white",children:A.status==="active"?"Активный":A.status==="paused"?"Приостановлен":A.status==="archived"?"Архив":A.status==="draft"?"Черновик":A.status})}),r.jsx(q,{children:P(A.abtestLinks||[],A)}),r.jsx(q,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>a(A),"data-testid":`button-edit-${A.id}`,title:"Редактировать оффер",children:r.jsx(tne,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>D(A.id),"data-testid":`button-dashboard-${A.id}`,title:"Статистика оффера",children:r.jsx(Ere,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>g.mutate(A.id),"data-testid":`button-delete-${A.id}`,title:"Удалить оффер",children:r.jsx(wr,{className:"w-4 h-4 text-red-500"})})]})})]},`offer-${$}`):null})})]})})})}),E.length===0&&r.jsx(W,{children:r.jsx(H,{className:"p-6 text-center",children:r.jsx("div",{className:"text-muted-foreground",children:d||i!=="all"||o?r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"Офферы не найдены по заданным критериям."}),r.jsx(M,{variant:"outline",className:"mt-2",onClick:()=>{u(""),l("all"),c("")},children:"Сбросить фильтры"})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"У вас пока нет офферов."}),r.jsxs(M,{className:"mt-2",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Создать первый оффер"]})]})})})}),s&&r.jsx(TY,{offer:s,onClose:()=>a(null),onSave:$=>{j.mutate($),a(null)}})]})},vVe=["gambling","finance","dating","health","entertainment","e-commerce","education","travel","games","crypto"],yVe=["russia","ukraine","belarus","kazakhstan","usa","canada","germany","france","uk","brazil","india","china"],bVe=["desktop","mobile","tablet","smart-tv","all"],jVe=["PropellerAds","RichAds","TacoLoco","AdCombo","Mobidea","CrakRevenue","ClickDealer","MaxBounty","Другой источник"];function wVe(){const{user:e}=Jt(),{toast:t}=lt(),[n,s]=y.useState(!1),[a,i]=y.useState([]),[l,o]=y.useState([]),[c,d]=y.useState(""),[u,h]=y.useState({name:"",category:"",payoutType:"cpa",supplierRate:"",partnerRate:"",targetUrl:"",postbackUrl:"",conditions:"",supplierSource:""}),{data:f=[],isLoading:m}=$e({queryKey:["/api/advertiser/received-offers"],enabled:!!(e!=null&&e.id)}),v=Ee({mutationFn:async k=>Te("/api/advertiser/received-offers",{method:"POST",body:JSON.stringify({...k,geo:a,devices:l,advertiserId:e==null?void 0:e.id,status:"active"})}),onSuccess:()=>{io.invalidateQueries({queryKey:["/api/advertiser/received-offers"]}),t({title:"Успешно",description:"Полученный оффер добавлен и активирован"}),x(),s(!1)},onError:k=>{t({title:"Ошибка",description:k.message||"Не удалось создать оффер",variant:"destructive"})}}),x=()=>{h({name:"",category:"",payoutType:"cpa",supplierRate:"",partnerRate:"",targetUrl:"",postbackUrl:"",conditions:"",supplierSource:""}),i([]),o([]),d("")},w=k=>{if(k.preventDefault(),!u.name||!u.category||a.length===0||l.length===0||!u.supplierRate||!u.partnerRate||!u.targetUrl||!u.postbackUrl){t({title:"Ошибка валидации",description:"Заполните все обязательные поля",variant:"destructive"});return}const C=u.supplierSource==="Другой источник"?c:u.supplierSource;v.mutate({...u,supplierSource:C})},j=k=>{a.includes(k)||i([...a,k])},g=k=>{i(a.filter(C=>C!==k))},b=k=>{l.includes(k)||o([...l,k])},p=k=>{o(l.filter(C=>C!==k))},N=k=>{switch(k){case"cpa":return"bg-green-100 text-green-800 border-green-200";case"cpl":return"bg-blue-100 text-blue-800 border-blue-200";case"revshare":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return r.jsxs("div",{className:"space-y-6","data-testid":"received-offers-page",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Полученные офферы"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Управление офферами от поставщиков"})]}),r.jsxs(M,{onClick:()=>s(!0),"data-testid":"button-add-received-offer",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить оффер"]})]}),n&&r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(ae,{children:"Добавление оффера от поставщика"}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{s(!1),x()},children:r.jsx(Tn,{className:"h-4 w-4"})})]})}),r.jsx(H,{children:r.jsxs("form",{onSubmit:w,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"name",children:"Название оффера *"}),r.jsx(ne,{id:"name",value:u.name,onChange:k=>h({...u,name:k.target.value}),placeholder:"Введите название оффера","data-testid":"input-offer-name"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"category",children:"Категория *"}),r.jsxs(he,{value:u.category,onValueChange:k=>h({...u,category:k}),children:[r.jsx(de,{"data-testid":"select-category",children:r.jsx(fe,{placeholder:"Выберите категорию"})}),r.jsx(ue,{children:vVe.map(k=>r.jsx(S,{value:k,children:k},k))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"payoutType",children:"Тип выплаты *"}),r.jsxs(he,{value:u.payoutType,onValueChange:k=>h({...u,payoutType:k}),children:[r.jsx(de,{"data-testid":"select-payout-type",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"cpa",children:"CPA"}),r.jsx(S,{value:"cpl",children:"CPL"}),r.jsx(S,{value:"revshare",children:"RevShare"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"supplierSource",children:"Источник поставщика"}),r.jsxs(he,{value:u.supplierSource,onValueChange:k=>h({...u,supplierSource:k}),children:[r.jsx(de,{"data-testid":"select-supplier-source",children:r.jsx(fe,{placeholder:"Выберите источник"})}),r.jsx(ue,{children:jVe.map(k=>r.jsx(S,{value:k,children:k},k))})]}),u.supplierSource==="Другой источник"&&r.jsx(ne,{value:c,onChange:k=>d(k.target.value),placeholder:"Введите название источника",className:"mt-2","data-testid":"input-custom-supplier"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"supplierRate",children:"Ставка поставщика (расход) *"}),r.jsx(ne,{id:"supplierRate",type:"number",step:"0.01",value:u.supplierRate,onChange:k=>h({...u,supplierRate:k.target.value}),placeholder:"0.00","data-testid":"input-supplier-rate"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"partnerRate",children:"Ставка для партнёров (доход) *"}),r.jsx(ne,{id:"partnerRate",type:"number",step:"0.01",value:u.partnerRate,onChange:k=>h({...u,partnerRate:k.target.value}),placeholder:"0.00","data-testid":"input-partner-rate"})]}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx(L,{htmlFor:"targetUrl",children:"Целевая ссылка от поставщика *"}),r.jsx(ne,{id:"targetUrl",type:"url",value:u.targetUrl,onChange:k=>h({...u,targetUrl:k.target.value}),placeholder:"https://example.com/offer","data-testid":"input-target-url"})]}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx(L,{htmlFor:"postbackUrl",children:"Постбек поставщика (куда отправлять действия) *"}),r.jsx(ne,{id:"postbackUrl",type:"url",value:u.postbackUrl,onChange:k=>h({...u,postbackUrl:k.target.value}),placeholder:"https://example.com/postback","data-testid":"input-postback-url"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(L,{children:"GEO (геолокации) *"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:a.map(k=>r.jsxs(le,{variant:"secondary",className:"flex items-center gap-1",children:[r.jsx(dr,{className:"h-3 w-3"}),k,r.jsx("button",{type:"button",onClick:()=>g(k),className:"ml-1 hover:text-red-500",children:r.jsx(Tn,{className:"h-3 w-3"})})]},k))}),r.jsxs(he,{onValueChange:j,children:[r.jsx(de,{"data-testid":"select-geo",children:r.jsx(fe,{placeholder:"Добавить геолокацию"})}),r.jsx(ue,{children:yVe.filter(k=>!a.includes(k)).map(k=>r.jsx(S,{value:k,children:k},k))})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(L,{children:"Устройства *"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:l.map(k=>r.jsxs(le,{variant:"secondary",className:"flex items-center gap-1",children:[r.jsx(Di,{className:"h-3 w-3"}),k,r.jsx("button",{type:"button",onClick:()=>p(k),className:"ml-1 hover:text-red-500",children:r.jsx(Tn,{className:"h-3 w-3"})})]},k))}),r.jsxs(he,{onValueChange:b,children:[r.jsx(de,{"data-testid":"select-devices",children:r.jsx(fe,{placeholder:"Добавить устройство"})}),r.jsx(ue,{children:bVe.filter(k=>!l.includes(k)).map(k=>r.jsx(S,{value:k,children:k},k))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"conditions",children:"Условия/ограничения"}),r.jsx(pt,{id:"conditions",value:u.conditions,onChange:k=>h({...u,conditions:k.target.value}),placeholder:"Описание условий работы с оффером, ограничений, требований к трафику...",rows:4,"data-testid":"textarea-conditions"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(M,{type:"button",variant:"outline",onClick:()=>{s(!1),x()},children:"Отмена"}),r.jsxs(M,{type:"submit",disabled:v.isPending,"data-testid":"button-save-activate",children:[r.jsx(Tl,{className:"h-4 w-4 mr-2"}),v.isPending?"Сохранение...":"Сохранить и активировать"]})]})]})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{children:["Список полученных офферов (",f.length,")"]})}),r.jsx(H,{children:m?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):f.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{children:"Пока нет полученных офферов"}),r.jsx("p",{className:"text-sm mt-2",children:"Добавьте первый оффер от поставщика"})]}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:f.map(k=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsx("h3",{className:"font-semibold text-lg",children:k.name}),r.jsx(le,{variant:k.status==="active"?"default":"secondary",children:k.status==="active"?"Активен":"Неактивен"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Категория:"}),r.jsx("p",{className:"font-medium",children:k.category})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Тип выплаты:"}),r.jsx(le,{className:N(k.payoutType),children:k.payoutType.toUpperCase()})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Расход:"}),r.jsxs("p",{className:"font-medium text-red-600",children:[r.jsx(Rt,{className:"h-4 w-4 inline mr-1"}),k.supplierRate]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Доход:"}),r.jsxs("p",{className:"font-medium text-green-600",children:[r.jsx(Rt,{className:"h-4 w-4 inline mr-1"}),k.partnerRate]})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:k.geo.map(C=>r.jsxs(le,{variant:"outline",className:"flex items-center gap-1",children:[r.jsx(dr,{className:"h-3 w-3"}),C]},C))}),r.jsx("div",{className:"flex flex-wrap gap-2",children:k.devices.map(C=>r.jsxs(le,{variant:"outline",className:"flex items-center gap-1",children:[r.jsx(Di,{className:"h-3 w-3"}),C]},C))})]},k.id))})})]})]})}const md=({title:e,value:t,icon:n,type:s,trend:a,alert:i})=>{const l=o=>{switch(s){case"currency":return`$${o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;case"percent":return`${o.toFixed(2)}%`;case"number":return o.toLocaleString();default:return o.toString()}};return r.jsx(W,{className:i?"border-red-200 dark:border-red-800":"",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),r.jsx("p",{className:`text-2xl font-bold ${i?"text-red-600 dark:text-red-400":""}`,children:l(t)}),a!==void 0&&r.jsxs("p",{className:`text-sm flex items-center gap-1 ${a>=0?"text-green-600":"text-red-600"}`,children:[a>=0?r.jsx(Ma,{className:"h-3 w-3"}):r.jsx(lo,{className:"h-3 w-3"}),Math.abs(a).toFixed(1),"%"]})]}),r.jsx(n,{className:`h-8 w-8 ${i?"text-red-500":"text-muted-foreground"}`})]})})})};function NVe(){const{user:e}=Jt(),{toast:t}=lt(),[n,s]=y.useState({dateFrom:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],dateTo:new Date().toISOString().split("T")[0],search:"",offerId:"all",partnerId:"all",type:"all",status:"all",minAmount:"",maxAmount:""}),[a,i]=y.useState({partnerId:"",amount:"",currency:"USD",period:new Date().toISOString().slice(0,7),comment:"",paymentMethod:"bank"}),[l,o]=y.useState(!1),[c,d]=y.useState(null),{data:u={totalExpenses:0,totalRevenue:0,totalPayouts:0,avgEPC:0,avgCR:0,avgPayout:0,balance:0,pendingPayouts:0},isLoading:h,refetch:f}=$e({queryKey:["/api/advertiser/finance/summary",e==null?void 0:e.id,n.dateFrom,n.dateTo],queryFn:async()=>{const _=new URLSearchParams;_.set("dateFrom",n.dateFrom),_.set("dateTo",n.dateTo),_.set("advertiserId",(e==null?void 0:e.id)||"");const P=await fetch(`/api/advertiser/financial-overview?${_}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!P.ok)throw new Error("Не удалось загрузить финансовую сводку");return P.json()},enabled:!!(e!=null&&e.id)}),{data:m=[],isLoading:v,refetch:x}=$e({queryKey:["/api/advertiser/finance/transactions",e==null?void 0:e.id,n],queryFn:async()=>{const _=new URLSearchParams;Object.entries(n).forEach(([D,E])=>{E&&E!=="all"&&_.set(D,E)}),_.set("advertiserId",(e==null?void 0:e.id)||"");const P=await fetch(`/api/advertiser/transactions?${_}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!P.ok)throw new Error("Не удалось загрузить транзакции");return P.json()},enabled:!!(e!=null&&e.id)}),{data:w=[]}=$e({queryKey:["/api/advertiser/partners",e==null?void 0:e.id],queryFn:async()=>{const _=await fetch("/api/advertiser/partners",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!_.ok)throw new Error("Ошибка загрузки партнёров");return _.json()},enabled:!!(e!=null&&e.id)}),{data:j=[]}=$e({queryKey:["/api/advertiser/offers",e==null?void 0:e.id],queryFn:async()=>{const _=await fetch("/api/advertiser/offers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!_.ok)throw new Error("Ошибка загрузки офферов");return _.json()},enabled:!!(e!=null&&e.id)}),g=Ee({mutationFn:async _=>{const P=await fetch("/api/advertiser/finance/payouts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({..._,amount:parseFloat(_.amount),advertiserId:e==null?void 0:e.id})});if(!P.ok)throw new Error("Ошибка создания выплаты");return P.json()},onSuccess:()=>{io.invalidateQueries({queryKey:["/api/advertiser/finance/summary"]}),io.invalidateQueries({queryKey:["/api/advertiser/finance/transactions"]}),o(!1),i({partnerId:"",amount:"",currency:"USD",period:new Date().toISOString().slice(0,7),comment:"",paymentMethod:"bank"}),t({title:"Выплата создана",description:"Выплата партнёру поставлена в очередь на обработку"})},onError:_=>{t({title:"Ошибка создания выплаты",description:_.message,variant:"destructive"})}}),b=Ee({mutationFn:async({transactionId:_,status:P})=>{const D=await fetch(`/api/advertiser/finance/transactions/${_}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({status:P})});if(!D.ok)throw new Error("Ошибка изменения статуса");return D.json()},onSuccess:()=>{io.invalidateQueries({queryKey:["/api/advertiser/finance/transactions"]}),io.invalidateQueries({queryKey:["/api/advertiser/finance/summary"]}),t({title:"Статус изменён",description:"Статус транзакции обновлён"})},onError:_=>{t({title:"Ошибка",description:_.message,variant:"destructive"})}}),p=async _=>{try{const P=new URLSearchParams;Object.entries(n).forEach(([T,O])=>{O&&O!=="all"&&P.set(T,O)}),P.set("format",_),P.set("advertiserId",(e==null?void 0:e.id)||"");const D=await fetch(`/api/advertiser/finance/export?${P}`);if(!D.ok)throw new Error("Ошибка экспорта");const E=await D.blob(),$=window.URL.createObjectURL(E),A=document.createElement("a");A.style.display="none",A.href=$,A.download=`finance-report-${new Date().toISOString().split("T")[0]}.${_}`,document.body.appendChild(A),A.click(),window.URL.revokeObjectURL($),document.body.removeChild(A),t({title:"Экспорт выполнен",description:`Файл ${_.toUpperCase()} успешно скачан`})}catch{t({title:"Ошибка экспорта",description:"Не удалось выполнить экспорт данных",variant:"destructive"})}},N=()=>{s({dateFrom:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],dateTo:new Date().toISOString().split("T")[0],search:"",offerId:"all",partnerId:"all",type:"all",status:"all",minAmount:"",maxAmount:""})},k=()=>{const _=[];return a.partnerId||_.push("Выберите партнёра"),(!a.amount||isNaN(parseFloat(a.amount))||parseFloat(a.amount)<=0)&&_.push("Введите корректную сумму выплаты"),u.balance<parseFloat(a.amount||"0")&&_.push("Недостаточно средств на балансе"),_},C=()=>{const _=k();if(_.length>0){t({title:"Ошибка валидации",description:_.join(", "),variant:"destructive"});return}g.mutate(a)};return h||v?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):r.jsxs("div",{className:"space-y-6","data-testid":"finance-page",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Финансы"}),r.jsx("p",{className:"text-muted-foreground",children:"Управление финансами, выплаты партнёрам и транзакции"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(M,{variant:"outline",onClick:()=>{f(),x()},"data-testid":"button-refresh",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Обновить"]}),r.jsxs(jt,{open:l,onOpenChange:o,children:[r.jsx(Xa,{asChild:!0,children:r.jsxs(M,{"data-testid":"button-create-payout",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Создать выплату"]})}),r.jsxs(vt,{className:"sm:max-w-[500px]",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Выплата партнёру"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"partnerId",children:"Партнёр *"}),r.jsxs(he,{value:a.partnerId,onValueChange:_=>i({...a,partnerId:_}),children:[r.jsx(de,{"data-testid":"select-partner",children:r.jsx(fe,{placeholder:"Выберите партнёра"})}),r.jsx(ue,{children:w.map(_=>r.jsxs(S,{value:_.id,children:[_.username," (",_.email,")"]},_.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"amount",children:"Сумма *"}),r.jsx(ne,{id:"amount",type:"number",step:"0.01",min:"0",value:a.amount,onChange:_=>i({...a,amount:_.target.value}),placeholder:"0.00","data-testid":"input-amount"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"currency",children:"Валюта"}),r.jsxs(he,{value:a.currency,onValueChange:_=>i({...a,currency:_}),children:[r.jsx(de,{"data-testid":"select-currency",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"USD",children:"USD"}),r.jsx(S,{value:"USDT",children:"USDT"}),r.jsx(S,{value:"EUR",children:"EUR"}),r.jsx(S,{value:"BTC",children:"BTC"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"period",children:"Период"}),r.jsx(ne,{id:"period",type:"month",value:a.period,onChange:_=>i({...a,period:_.target.value}),"data-testid":"input-period"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Способ выплаты"}),r.jsxs(he,{value:a.paymentMethod,onValueChange:_=>i({...a,paymentMethod:_}),children:[r.jsx(de,{"data-testid":"select-payment-method",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"bank",children:"Банковский перевод"}),r.jsx(S,{value:"crypto",children:"Криптовалюта (USDT)"}),r.jsx(S,{value:"paypal",children:"PayPal"}),r.jsx(S,{value:"wise",children:"Wise"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"comment",children:"Комментарий"}),r.jsx(pt,{id:"comment",value:a.comment,onChange:_=>i({...a,comment:_.target.value}),placeholder:"Комментарий к выплате (опционально)","data-testid":"textarea-comment"})]}),r.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Доступный баланс:"}),r.jsxs("span",{className:"font-semibold",children:["$",u.balance.toLocaleString()]})]}),a.amount&&parseFloat(a.amount)>u.balance&&r.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[r.jsx(qa,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Недостаточно средств"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(M,{type:"button",variant:"outline",onClick:()=>o(!1),"data-testid":"button-cancel-payout",children:"Отмена"}),r.jsxs(M,{type:"button",onClick:C,disabled:g.isPending,"data-testid":"button-submit-payout",children:[g.isPending&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),r.jsx(Is,{className:"h-4 w-4 mr-2"}),"Выплатить"]})]})]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(md,{title:"Общие расходы",value:u.totalExpenses,icon:Rt,type:"currency",alert:u.totalExpenses>u.balance*10}),r.jsx(md,{title:"Доход от офферов",value:u.totalRevenue,icon:Cr,type:"currency"}),r.jsx(md,{title:"Выплачено партнёрам",value:u.totalPayouts,icon:ar,type:"currency"}),r.jsx(md,{title:"Баланс",value:u.balance,icon:Rc,type:"currency",alert:u.balance<1e3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(md,{title:"Средний EPC",value:u.avgEPC,icon:Cr,type:"currency"}),r.jsx(md,{title:"Средний CR",value:u.avgCR,icon:Kt,type:"percent"}),r.jsx(md,{title:"В ожидании выплат",value:u.pendingPayouts,icon:lr,type:"currency",alert:u.pendingPayouts>0})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"h-5 w-5"}),"Фильтры транзакций"]})}),r.jsxs(H,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Поиск"}),r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{placeholder:"Транзакция, партнёр, оффер...",value:n.search,onChange:_=>s({...n,search:_.target.value}),className:"pl-10","data-testid":"input-search-transactions"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"С даты"}),r.jsx(ne,{type:"date",value:n.dateFrom,onChange:_=>s({...n,dateFrom:_.target.value}),"data-testid":"input-date-from"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"По дату"}),r.jsx(ne,{type:"date",value:n.dateTo,onChange:_=>s({...n,dateTo:_.target.value}),"data-testid":"input-date-to"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Оффер"}),r.jsxs(he,{value:n.offerId,onValueChange:_=>s({...n,offerId:_}),children:[r.jsx(de,{"data-testid":"select-offer-filter",children:r.jsx(fe,{placeholder:"Все офферы"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все офферы"}),j.map(_=>r.jsx(S,{value:_.id,children:_.name},_.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Партнёр"}),r.jsxs(he,{value:n.partnerId,onValueChange:_=>s({...n,partnerId:_}),children:[r.jsx(de,{"data-testid":"select-partner-filter",children:r.jsx(fe,{placeholder:"Все партнёры"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все партнёры"}),w.map(_=>r.jsx(S,{value:_.id,children:_.username},_.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Тип"}),r.jsxs(he,{value:n.type,onValueChange:_=>s({...n,type:_}),children:[r.jsx(de,{"data-testid":"select-type-filter",children:r.jsx(fe,{placeholder:"Все типы"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все типы"}),r.jsx(S,{value:"payout",children:"Выплата"}),r.jsx(S,{value:"commission",children:"Комиссия"}),r.jsx(S,{value:"refund",children:"Возврат"}),r.jsx(S,{value:"bonus",children:"Бонус"}),r.jsx(S,{value:"adjustment",children:"Корректировка"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Статус"}),r.jsxs(he,{value:n.status,onValueChange:_=>s({...n,status:_}),children:[r.jsx(de,{"data-testid":"select-status-filter",children:r.jsx(fe,{placeholder:"Все статусы"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все статусы"}),r.jsx(S,{value:"completed",children:"Завершена"}),r.jsx(S,{value:"pending",children:"В ожидании"}),r.jsx(S,{value:"cancelled",children:"Отменена"}),r.jsx(S,{value:"failed",children:"Ошибка"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"От суммы"}),r.jsx(ne,{type:"number",placeholder:"0",value:n.minAmount,onChange:_=>s({...n,minAmount:_.target.value}),"data-testid":"input-min-amount"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"До суммы"}),r.jsx(ne,{type:"number",placeholder:"∞",value:n.maxAmount,onChange:_=>s({...n,maxAmount:_.target.value}),"data-testid":"input-max-amount"})]})]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[r.jsx(M,{variant:"outline",onClick:N,"data-testid":"button-reset-filters",children:"Сбросить фильтры"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(M,{variant:"outline",onClick:()=>p("csv"),"data-testid":"button-export-csv",children:[r.jsx(vr,{className:"h-4 w-4 mr-2"}),"CSV"]}),r.jsxs(M,{variant:"outline",onClick:()=>p("xlsx"),"data-testid":"button-export-xlsx",children:[r.jsx(vr,{className:"h-4 w-4 mr-2"}),"Excel"]})]})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{children:["Транзакции (",m.length," записей)"]})}),r.jsx(H,{children:v?r.jsx("div",{className:"flex justify-center items-center h-32",children:r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):m.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Qn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"Нет транзакций за выбранный период"}),r.jsx("p",{className:"text-sm mt-2",children:"Создайте первую выплату партнёру"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Дата"}),r.jsx(J,{children:"Тип"}),r.jsx(J,{children:"Оффер"}),r.jsx(J,{children:"Партнёр"}),r.jsx(J,{className:"text-right",children:"Сумма"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Способ оплаты"}),r.jsx(J,{className:"text-center",children:"Действия"})]})}),r.jsx($t,{children:m.map(_=>r.jsxs(Re,{children:[r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ls,{className:"h-4 w-4 text-muted-foreground"}),new Date(_.date).toLocaleDateString("ru-RU")]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[_.type==="payout"&&r.jsx(Is,{className:"h-4 w-4 text-red-500"}),_.type==="commission"&&r.jsx(Cr,{className:"h-4 w-4 text-green-500"}),_.type==="refund"&&r.jsx(lo,{className:"h-4 w-4 text-blue-500"}),_.type==="bonus"&&r.jsx(Zt,{className:"h-4 w-4 text-purple-500"}),r.jsx("span",{className:"capitalize",children:_.type==="payout"?"Выплата":_.type==="commission"?"Комиссия":_.type==="refund"?"Возврат":_.type==="bonus"?"Бонус":_.type})]})}),r.jsx(q,{children:_.offerName}),r.jsx(q,{children:_.partnerUsername}),r.jsx(q,{className:"text-right font-medium",children:r.jsxs("span",{className:_.type==="payout"||_.type==="refund"?"text-red-600":"text-green-600",children:[_.type==="payout"||_.type==="refund"?"-":"+",_.currency," ",_.amount.toLocaleString()]})}),r.jsx(q,{children:r.jsx(le,{variant:_.status==="completed"?"default":_.status==="pending"?"secondary":_.status==="cancelled"?"outline":"destructive",children:r.jsxs("div",{className:"flex items-center gap-1",children:[_.status==="completed"&&r.jsx(nr,{className:"h-3 w-3"}),_.status==="pending"&&r.jsx(lr,{className:"h-3 w-3"}),_.status==="cancelled"&&r.jsx(zt,{className:"h-3 w-3"}),_.status==="failed"&&r.jsx(qa,{className:"h-3 w-3"}),_.status==="completed"?"Завершена":_.status==="pending"?"В ожидании":_.status==="cancelled"?"Отменена":"Ошибка"]})})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ox,{className:"h-4 w-4 text-muted-foreground"}),_.paymentMethod==="bank"?"Банк":_.paymentMethod==="crypto"?"Криpto":_.paymentMethod==="paypal"?"PayPal":_.paymentMethod==="wise"?"Wise":_.paymentMethod]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>d(_),title:"Посмотреть детализацию","data-testid":`button-view-details-${_.id}`,children:r.jsx(hr,{className:"h-4 w-4"})}),_.status==="pending"&&r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>b.mutate({transactionId:_.id,status:"cancelled"}),title:"Отменить транзакцию","data-testid":`button-cancel-${_.id}`,children:r.jsx(zt,{className:"h-4 w-4 text-red-500"})})]})})]},_.id))})]})})})]})]})}function OY({className:e,value:t,onChange:n}){const[s,a]=y.useState({from:(t==null?void 0:t.from)||Gn(new Date,-7),to:(t==null?void 0:t.to)||new Date});y.useEffect(()=>{t&&a({from:t.from,to:t.to})},[t]);const i=l=>{a(l),l!=null&&l.from&&(l!=null&&l.to)&&n&&n({from:l.from,to:l.to})};return r.jsx("div",{className:Ae("grid gap-2",e),children:r.jsxs(ym,{children:[r.jsx(bm,{asChild:!0,children:r.jsxs(M,{id:"date",variant:"outline",className:Ae("w-full justify-start text-left font-normal",!s&&"text-muted-foreground"),children:[r.jsx(Ls,{className:"mr-2 h-4 w-4"}),s!=null&&s.from?s.to?r.jsxs(r.Fragment,{children:[Xt(s.from,"dd.MM.yyyy",{locale:gl})," -"," ",Xt(s.to,"dd.MM.yyyy",{locale:gl})]}):Xt(s.from,"dd.MM.yyyy",{locale:gl}):r.jsx("span",{children:"Выберите период"})]})}),r.jsx(Eu,{className:"w-auto p-0",align:"start",children:r.jsx(uN,{initialFocus:!0,mode:"range",defaultMonth:s==null?void 0:s.from,selected:s,onSelect:i,numberOfMonths:2,locale:gl})})]})})}function RY({children:e,cols:t={sm:1,md:2,lg:3,xl:4},gap:n=4,className:s}){const a=()=>{const i=["grid"];return t.xs&&i.push(`grid-cols-${t.xs}`),t.sm&&i.push(`sm:grid-cols-${t.sm}`),t.md&&i.push(`md:grid-cols-${t.md}`),t.lg&&i.push(`lg:grid-cols-${t.lg}`),t.xl&&i.push(`xl:grid-cols-${t.xl}`),i.push(`gap-${n}`),i.join(" ")};return r.jsx("div",{className:Ae(a(),s),children:e})}function kc({title:e,value:t,icon:n,trend:s,className:a,description:i}){return r.jsxs(W,{className:Ae("transition-all hover:shadow-md",a),children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:e}),n&&r.jsx("div",{className:"text-muted-foreground",children:n})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold",children:t}),i&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i}),s&&r.jsxs("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground mt-1",children:[s.direction==="up"?r.jsx(Cr,{className:"h-3 w-3 text-green-500"}):r.jsx(KA,{className:"h-3 w-3 text-red-500"}),r.jsxs("span",{className:Ae(s.direction==="up"?"text-green-500":"text-red-500"),children:[s.value,"%"]}),s.label&&r.jsx("span",{children:s.label})]})]})]})}function kVe(){const[e,t]=y.useState({from:new Date(Date.now()-6048e5),to:new Date}),[n,s]=y.useState({offerId:"",partnerId:"",country:"",device:"",trafficSource:"",sub1:"",sub2:"",sub3:"",sub4:"",sub5:"",groupBy:["date"],search:""}),[a,i]=y.useState("overview"),[l,o]=y.useState(1),[c,d]=y.useState(1),[u,h]=y.useState(1),[f,m]=y.useState(1),[v,x]=y.useState(1),[w,j]=y.useState(1),g=50,{data:b,isLoading:p,refetch:N}=$e({queryKey:["/api/analytics/advertiser/statistics",e,n],queryFn:async()=>{const T=new URLSearchParams({dateFrom:e.from.toISOString(),dateTo:e.to.toISOString(),...Object.fromEntries(Object.entries(n).filter(([F,R])=>R&&(Array.isArray(R)?R.length>0:R.toString().trim())))}),O=localStorage.getItem("auth_token"),z=await fetch(`/api/analytics/advertiser/statistics?${T}`,{headers:{Authorization:`Bearer ${O}`,"Content-Type":"application/json"}});if(!z.ok)throw new Error("Failed to fetch statistics");return z.json()}}),{data:k}=$e({queryKey:["/api/analytics/advertiser/offers"],queryFn:async()=>{const T=localStorage.getItem("auth_token"),O=await fetch("/api/analytics/advertiser/offers",{headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});if(!O.ok)throw new Error("Failed to fetch offers");return O.json()}}),{data:C}=$e({queryKey:["/api/analytics/advertiser/partners"],queryFn:async()=>{const T=localStorage.getItem("auth_token"),O=await fetch("/api/analytics/advertiser/partners",{headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});if(!O.ok)throw new Error("Failed to fetch partners");return O.json()}}),_=(b==null?void 0:b.summary)||{totalClicks:0,totalConversions:0,totalRevenue:0,avgCR:0,avgEPC:0,totalOffers:0,totalPartners:0},P=(b==null?void 0:b.data)||[],D=({currentPage:T,setCurrentPage:O,totalItems:z,itemsPerPage:F=50})=>{const R=Math.ceil(z/F);return r.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Показано ",(T-1)*F+1,"-",Math.min(T*F,z)," из ",z," записей"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>O(Math.max(T-1,1)),disabled:T===1,"data-testid":"pagination-prev",children:[r.jsx(Ri,{className:"h-4 w-4"}),"Назад"]}),r.jsx("div",{className:"flex items-center space-x-1",children:(()=>{const I=[];let Y=Math.max(1,T-Math.floor(2.5)),K=Math.min(R,Y+5-1);K-Y<4&&(Y=Math.max(1,K-5+1)),Y>1&&(I.push(r.jsx(M,{variant:T===1?"default":"outline",size:"sm",onClick:()=>O(1),"data-testid":"pagination-page-1",children:"1"},1)),Y>2&&I.push(r.jsx("span",{className:"px-2",children:"..."},"dots1")));for(let oe=Y;oe<=K;oe++)I.push(r.jsx(M,{variant:oe===T?"default":"outline",size:"sm",onClick:()=>O(oe),"data-testid":`pagination-page-${oe}`,children:oe},oe));return K<R&&(K<R-1&&I.push(r.jsx("span",{className:"px-2",children:"..."},"dots2")),I.push(r.jsx(M,{variant:R===T?"default":"outline",size:"sm",onClick:()=>O(R),"data-testid":`pagination-page-${R}`,children:R},R))),I})()}),r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>O(Math.min(T+1,R)),disabled:T===R,"data-testid":"pagination-next",children:["Вперёд",r.jsx(Qc,{className:"h-4 w-4"})]})]})]})},E=(T,O)=>{s(z=>({...z,[T]:O==="all"?"":O}))},$=()=>{s({offerId:"",partnerId:"",country:"",device:"",trafficSource:"",sub1:"",sub2:"",sub3:"",sub4:"",sub5:"",groupBy:["date"],search:""})},A=async T=>{try{const O=new URLSearchParams({dateFrom:e.from.toISOString(),dateTo:e.to.toISOString(),format:T,...Object.fromEntries(Object.entries(n).filter(([Y,K])=>K&&(Array.isArray(K)?K.length>0:K.toString().trim())))}),z=localStorage.getItem("auth_token"),F=await fetch(`/api/analytics/advertiser/statistics/export?${O}`,{headers:{Authorization:`Bearer ${z}`,"Content-Type":"application/json"}});if(!F.ok)throw new Error("Failed to export data");const R=await F.blob(),I=URL.createObjectURL(R),Q=document.createElement("a");Q.href=I,Q.download=`statistics_${Date.now()}.${T}`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(I)}catch(O){console.error("Export failed:",O)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Аналитика"}),r.jsx("p",{className:"text-muted-foreground",children:"Детальная статистика по кликам, конверсиям и доходам"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>N(),disabled:p,"data-testid":"refresh-stats",children:[r.jsx(Vt,{className:`h-4 w-4 mr-2 ${p?"animate-spin":""}`}),"Обновить"]}),r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>A("xlsx"),"data-testid":"export-stats",children:[r.jsx(vr,{className:"h-4 w-4 mr-2"}),"Экспорт"]})]})]}),r.jsxs(RY,{cols:{sm:2,lg:4},children:[r.jsx(kc,{title:"Клики",value:_.totalClicks.toLocaleString(),icon:r.jsx(Jc,{className:"h-5 w-5 text-blue-600"}),trend:{value:0,direction:"up"}}),r.jsx(kc,{title:"Конверсии",value:_.totalConversions.toLocaleString(),icon:r.jsx(Cr,{className:"h-5 w-5 text-green-600"}),trend:{value:0,direction:"up"}}),r.jsx(kc,{title:"Доход",value:`$${_.totalRevenue.toLocaleString()}`,icon:r.jsx(Rt,{className:"h-5 w-5 text-purple-600"}),trend:{value:0,direction:"up"}}),r.jsx(kc,{title:"Средний CR",value:`${_.avgCR.toFixed(2)}%`,icon:r.jsx(ln,{className:"h-5 w-5 text-orange-600"}),trend:{value:0,direction:"up"}})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"h-5 w-5"}),"Фильтры"]})}),r.jsx(H,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Период"}),r.jsx(OY,{value:e,onChange:t})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Оффер"}),r.jsxs(he,{value:n.offerId,onValueChange:T=>E("offerId",T),children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Все офферы"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все офферы"}),k==null?void 0:k.map(T=>r.jsx(S,{value:T.id,children:T.name},T.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Партнер"}),r.jsxs(he,{value:n.partnerId,onValueChange:T=>E("partnerId",T),children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Все партнеры"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все партнеры"}),C==null?void 0:C.map(T=>r.jsx(S,{value:T.id,children:T.username},T.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Страна"}),r.jsx(ne,{placeholder:"Код страны (RU, US, etc.)",value:n.country,onChange:T=>E("country",T.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Устройство"}),r.jsxs(he,{value:n.device,onValueChange:T=>E("device",T),children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Все устройства"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все устройства"}),r.jsx(S,{value:"mobile",children:"Мобильные"}),r.jsx(S,{value:"desktop",children:"Десктоп"}),r.jsx(S,{value:"tablet",children:"Планшеты"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Источник трафика"}),r.jsx(ne,{placeholder:"facebook, google, etc.",value:n.trafficSource,onChange:T=>E("trafficSource",T.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sub1"}),r.jsx(ne,{placeholder:"Значение Sub1",value:n.sub1,onChange:T=>E("sub1",T.target.value)})]}),r.jsx("div",{className:"flex items-end",children:r.jsx(M,{variant:"outline",onClick:$,className:"w-full","data-testid":"reset-filters",children:"Сбросить фильтры"})})]})})]}),r.jsxs(Zr,{value:a,onValueChange:i,children:[r.jsxs(Vr,{className:"grid w-full grid-cols-6",children:[r.jsxs(We,{value:"overview",className:"data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 data-[state=active]:border-blue-300",children:[r.jsx(Ore,{className:"h-4 w-4 mr-2 text-blue-600"}),"Обзор"]}),r.jsxs(We,{value:"geography",className:"data-[state=active]:bg-green-100 data-[state=active]:text-green-700 data-[state=active]:border-green-300",children:[r.jsx(dr,{className:"h-4 w-4 mr-2 text-green-600"}),"География"]}),r.jsxs(We,{value:"devices",className:"data-[state=active]:bg-purple-100 data-[state=active]:text-purple-700 data-[state=active]:border-purple-300",children:[r.jsx(ru,{className:"h-4 w-4 mr-2 text-purple-600"}),"Устройства"]}),r.jsxs(We,{value:"sources",className:"data-[state=active]:bg-orange-100 data-[state=active]:text-orange-700 data-[state=active]:border-orange-300",children:[r.jsx(Vw,{className:"h-4 w-4 mr-2 text-orange-600"}),"Источники"]}),r.jsxs(We,{value:"subids",className:"data-[state=active]:bg-indigo-100 data-[state=active]:text-indigo-700 data-[state=active]:border-indigo-300",children:[r.jsx(zR,{className:"h-4 w-4 mr-2 text-indigo-600"}),"SubID"]}),r.jsxs(We,{value:"detailed",className:"data-[state=active]:bg-gray-100 data-[state=active]:text-gray-700 data-[state=active]:border-gray-300",children:[r.jsx(Qn,{className:"h-4 w-4 mr-2 text-gray-600"}),"Детали"]})]}),r.jsx(He,{value:"overview",className:"space-y-6",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Статистика по дням"}),r.jsx(Je,{children:"Показатели за выбранный период с разбивкой по дням"})]}),r.jsxs(H,{children:[p?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка данных..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(D,{currentPage:l,setCurrentPage:o,totalItems:P.length,itemsPerPage:g}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Дата и время"}),r.jsx("th",{className:"text-left p-2",children:"Partner ID"}),r.jsx("th",{className:"text-left p-2",children:"Партнер"}),r.jsx("th",{className:"text-left p-2",children:"Оффер"}),r.jsx("th",{className:"text-left p-2",children:"Click ID"}),r.jsx("th",{className:"text-right p-2",children:"Клики"}),r.jsx("th",{className:"text-right p-2",children:"Конверсии"}),r.jsx("th",{className:"text-right p-2",children:"CR, %"}),r.jsx("th",{className:"text-right p-2",children:"EPC, $"}),r.jsx("th",{className:"text-right p-2",children:"Доход, $"}),r.jsx("th",{className:"text-right p-2",children:"Прибыль, $"}),r.jsx("th",{className:"text-right p-2",children:"ROI, %"})]})}),r.jsx("tbody",{children:(()=>{const T=(l-1)*g,O=T+g;return P.slice(T,O).map((F,R)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsxs("td",{className:"p-2",children:[new Date(F.date).toLocaleDateString("ru-RU")," ",new Date(F.date).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})]}),r.jsx("td",{className:"p-2 text-blue-600 font-mono text-xs",children:F.partnerId?F.partnerId.substring(0,8)+"...":"N/A"}),r.jsx("td",{className:"p-2 font-medium",children:F.partnerName||"Unknown Partner"}),r.jsx("td",{className:"p-2",children:F.offerName||"Unknown Offer"}),r.jsx("td",{className:"p-2 text-green-600 font-mono text-xs",children:F.clickId||(F.clickIds&&F.clickIds.length>0?`${F.clickIds.length} кликов`:"N/A")}),r.jsx("td",{className:"text-right p-2",children:F.clicks.toLocaleString()}),r.jsx("td",{className:"text-right p-2",children:F.conversions.toLocaleString()}),r.jsxs("td",{className:"text-right p-2",children:[F.cr.toFixed(2),"%"]}),r.jsxs("td",{className:"text-right p-2",children:["$",F.epc.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2",children:["$",F.revenue.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2",children:["$",F.profit.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2",children:[F.roi.toFixed(2),"%"]})]},T+R))})()})]})}),r.jsx(D,{currentPage:l,setCurrentPage:o,totalItems:P.length,itemsPerPage:g})]}),!1]})]})}),r.jsx(He,{value:"geography",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(dr,{className:"h-5 w-5"}),"География трафика"]})}),r.jsxs(H,{children:[r.jsx(D,{currentPage:u,setCurrentPage:h,totalItems:P.length,itemsPerPage:g}),p?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка данных по географии..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Страна"}),r.jsx("th",{className:"text-left p-2",children:"Partner ID"}),r.jsx("th",{className:"text-left p-2",children:"Click ID"}),r.jsx("th",{className:"text-right p-2",children:"Клики"}),r.jsx("th",{className:"text-right p-2",children:"Конверсии"}),r.jsx("th",{className:"text-right p-2",children:"CR, %"}),r.jsx("th",{className:"text-right p-2",children:"Доход, $"}),r.jsx("th",{className:"text-right p-2",children:"ROI, %"})]})}),r.jsx("tbody",{children:(()=>{const T=(u-1)*g,O=T+g;return P.slice(T,O).map((F,R)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-2 font-medium",children:F.country||"Unknown"}),r.jsx("td",{className:"p-2 text-blue-600 font-mono text-xs",children:F.partnerId?F.partnerId.substring(0,8)+"...":"N/A"}),r.jsx("td",{className:"p-2 text-green-600 font-mono text-xs",children:F.clickId||"N/A"}),r.jsx("td",{className:"text-right p-2",children:F.clicks.toLocaleString()}),r.jsx("td",{className:"text-right p-2",children:F.conversions.toLocaleString()}),r.jsxs("td",{className:"text-right p-2",children:[F.cr.toFixed(2),"%"]}),r.jsxs("td",{className:"text-right p-2",children:["$",F.revenue.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2",children:[F.roi.toFixed(2),"%"]})]},T+R))})()})]})}),r.jsx(D,{currentPage:u,setCurrentPage:h,totalItems:P.length,itemsPerPage:g})]})]})}),r.jsx(He,{value:"devices",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Di,{className:"h-5 w-5"}),"Устройства и браузеры"]})}),r.jsxs(H,{children:[r.jsx(D,{currentPage:f,setCurrentPage:m,totalItems:P.length,itemsPerPage:g}),p?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка данных по устройствам..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Устройство"}),r.jsx("th",{className:"text-left p-2",children:"Partner ID"}),r.jsx("th",{className:"text-left p-2",children:"Click ID"}),r.jsx("th",{className:"text-left p-2",children:"Страна"}),r.jsx("th",{className:"text-right p-2",children:"Клики"}),r.jsx("th",{className:"text-right p-2",children:"Конверсии"}),r.jsx("th",{className:"text-right p-2",children:"CR, %"}),r.jsx("th",{className:"text-right p-2",children:"Доход, $"}),r.jsx("th",{className:"text-right p-2",children:"ROI, %"})]})}),r.jsx("tbody",{children:(()=>{const T=(f-1)*g,O=T+g;return P.slice(T,O).map((F,R)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-2 font-medium",children:r.jsxs("div",{className:"flex items-center gap-2",children:[F.device==="mobile"&&r.jsx(Di,{className:"h-4 w-4 text-blue-600"}),F.device==="desktop"&&r.jsx(ru,{className:"h-4 w-4 text-green-600"}),F.device==="tablet"&&r.jsx(ru,{className:"h-4 w-4 text-purple-600"}),F.device||"Unknown"]})}),r.jsx("td",{className:"p-2 text-blue-600 font-mono text-xs",children:F.partnerId?F.partnerId.substring(0,8)+"...":"N/A"}),r.jsx("td",{className:"p-2 text-green-600 font-mono text-xs",children:F.clickId||"N/A"}),r.jsx("td",{className:"p-2",children:F.country||"Unknown"}),r.jsx("td",{className:"text-right p-2",children:F.clicks.toLocaleString()}),r.jsx("td",{className:"text-right p-2",children:F.conversions.toLocaleString()}),r.jsxs("td",{className:"text-right p-2",children:[F.cr.toFixed(2),"%"]}),r.jsxs("td",{className:"text-right p-2",children:["$",F.revenue.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2",children:[F.roi.toFixed(2),"%"]})]},T+R))})()})]})}),r.jsx(D,{currentPage:f,setCurrentPage:m,totalItems:P.length,itemsPerPage:g})]})]})}),r.jsx(He,{value:"sources",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(cr,{className:"h-5 w-5"}),"Источники трафика"]})}),r.jsxs(H,{children:[r.jsx(D,{currentPage:v,setCurrentPage:x,totalItems:P.length,itemsPerPage:g}),p?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка данных по источникам..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Источник"}),r.jsx("th",{className:"text-left p-2",children:"Partner ID"}),r.jsx("th",{className:"text-left p-2",children:"Click ID"}),r.jsx("th",{className:"text-left p-2",children:"Устройство"}),r.jsx("th",{className:"text-left p-2",children:"Страна"}),r.jsx("th",{className:"text-right p-2",children:"Клики"}),r.jsx("th",{className:"text-right p-2",children:"Конверсии"}),r.jsx("th",{className:"text-right p-2",children:"CR, %"}),r.jsx("th",{className:"text-right p-2",children:"Доход, $"})]})}),r.jsx("tbody",{children:(()=>{const T=(v-1)*g,O=T+g;return P.slice(T,O).map((F,R)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-2 font-medium",children:F.trafficSource||"Direct"}),r.jsx("td",{className:"p-2 text-blue-600 font-mono text-xs",children:F.partnerId?F.partnerId.substring(0,8)+"...":"N/A"}),r.jsx("td",{className:"p-2 text-green-600 font-mono text-xs",children:F.clickId||"N/A"}),r.jsx("td",{className:"p-2",children:F.device||"Unknown"}),r.jsx("td",{className:"p-2",children:F.country||"Unknown"}),r.jsx("td",{className:"text-right p-2",children:F.clicks.toLocaleString()}),r.jsx("td",{className:"text-right p-2",children:F.conversions.toLocaleString()}),r.jsxs("td",{className:"text-right p-2",children:[F.cr.toFixed(2),"%"]}),r.jsxs("td",{className:"text-right p-2",children:["$",F.revenue.toFixed(2)]})]},T+R))})()})]})}),r.jsx(D,{currentPage:v,setCurrentPage:x,totalItems:P.length,itemsPerPage:g})]})]})}),r.jsx(He,{value:"subids",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(zR,{className:"h-5 w-5"}),"SubID анализ"]})}),r.jsxs(H,{children:[r.jsx(D,{currentPage:w,setCurrentPage:j,totalItems:P.length,itemsPerPage:g}),p?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка SubID данных..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Partner ID"}),r.jsx("th",{className:"text-left p-2",children:"Click ID"}),r.jsx("th",{className:"text-left p-2",children:"Sub1"}),r.jsx("th",{className:"text-left p-2",children:"Sub2"}),r.jsx("th",{className:"text-left p-2",children:"Sub3"}),r.jsx("th",{className:"text-left p-2",children:"Sub4"}),r.jsx("th",{className:"text-left p-2",children:"Sub5"}),r.jsx("th",{className:"text-left p-2",children:"Sub6"}),r.jsx("th",{className:"text-left p-2",children:"Sub7"}),r.jsx("th",{className:"text-left p-2",children:"Sub8"}),r.jsx("th",{className:"text-left p-2",children:"Sub9"}),r.jsx("th",{className:"text-left p-2",children:"Sub10"}),r.jsx("th",{className:"text-left p-2",children:"Sub11"}),r.jsx("th",{className:"text-left p-2",children:"Sub12"}),r.jsx("th",{className:"text-left p-2",children:"Sub13"}),r.jsx("th",{className:"text-left p-2",children:"Sub14"}),r.jsx("th",{className:"text-left p-2",children:"Sub15"}),r.jsx("th",{className:"text-left p-2",children:"Sub16"})]})}),r.jsx("tbody",{children:(()=>{const T=(w-1)*g,O=T+g;return P.slice(T,O).map((F,R)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-2 text-blue-600 font-mono text-xs",children:F.partnerId?F.partnerId.substring(0,8)+"...":"N/A"}),r.jsx("td",{className:"p-2 text-green-600 font-mono text-xs",children:F.clickId||"N/A"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub1||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub2||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub3||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub4||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub5||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub6||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub7||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub8||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub9||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub10||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub11||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub12||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub13||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub14||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub15||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:F.sub16||"-"})]},T+R))})()})]})}),r.jsx(D,{currentPage:w,setCurrentPage:j,totalItems:P.length,itemsPerPage:g})]})]})}),r.jsx(He,{value:"detailed",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Детальные клики"}),r.jsx(Je,{children:"Полная информация по каждому отдельному клику с clickId и partnerId"})]}),r.jsxs(H,{children:[r.jsx(D,{currentPage:c,setCurrentPage:d,totalItems:P.length,itemsPerPage:g}),p?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка детальных данных..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Click ID"}),r.jsx("th",{className:"text-left p-2",children:"Partner ID"}),r.jsx("th",{className:"text-left p-2",children:"Партнер"}),r.jsx("th",{className:"text-left p-2",children:"Оффер"}),r.jsx("th",{className:"text-left p-2",children:"Дата/время"}),r.jsx("th",{className:"text-left p-2",children:"Страна"}),r.jsx("th",{className:"text-left p-2",children:"Устройство"}),r.jsx("th",{className:"text-left p-2",children:"Статус"}),r.jsx("th",{className:"text-right p-2",children:"Доход, $"}),r.jsx("th",{className:"text-right p-2",children:"CR, %"})]})}),r.jsx("tbody",{children:(()=>{const T=(c-1)*g,O=T+g;return P.slice(T,O).map((F,R)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-2 font-mono text-xs text-green-600",children:F.clickId||"N/A"}),r.jsx("td",{className:"p-2 font-mono text-xs text-blue-600",children:F.partnerId?F.partnerId.substring(0,8)+"...":"N/A"}),r.jsx("td",{className:"p-2 font-medium",children:F.partnerName||"Unknown Partner"}),r.jsx("td",{className:"p-2",children:F.offerName||"Unknown Offer"}),r.jsxs("td",{className:"p-2",children:[new Date(F.date).toLocaleDateString("ru-RU")," ",new Date(F.date).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})]}),r.jsx("td",{className:"p-2",children:F.country||"Unknown"}),r.jsx("td",{className:"p-2",children:F.device||"Unknown"}),r.jsx("td",{className:"p-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${F.conversions>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:F.conversions>0?"Конверсия":"Клик"})}),r.jsxs("td",{className:"text-right p-2 font-medium",children:["$",F.revenue.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2",children:[F.cr.toFixed(2),"%"]})]},T+R))})()})]})}),r.jsx(D,{currentPage:c,setCurrentPage:d,totalItems:P.length,itemsPerPage:g})]})]})})]})]})}const jS={manager:{manageOffers:!0,managePartners:!0,viewStatistics:!0,financialOperations:!1,postbacksApi:!1},analyst:{manageOffers:!1,managePartners:!1,viewStatistics:!0,financialOperations:!1,postbacksApi:!1},financier:{manageOffers:!1,managePartners:!1,viewStatistics:!1,financialOperations:!0,postbacksApi:!1},support:{manageOffers:!0,managePartners:!1,viewStatistics:!0,financialOperations:!1,postbacksApi:!0}},RF={manager:"Менеджер",analyst:"Аналитик",financier:"Финансист",support:"Техподдержка"},SVe={manager:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",analyst:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",financier:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",support:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"};function CVe(){const{user:e}=Jt(),{toast:t}=lt(),n=Et(),[s,a]=y.useState("members"),[i,l]=y.useState(!1),[o,c]=y.useState(null),[d,u]=y.useState({search:"",role:"all",status:"all"}),[h,f]=y.useState({username:"",email:"",firstName:"",lastName:"",role:"manager",permissions:jS.manager,restrictions:{ipWhitelist:[],geoRestrictions:[],timeRestrictions:{enabled:!1,startTime:"09:00",endTime:"18:00",timezone:"UTC",workingDays:[1,2,3,4,5]}},telegramNotifications:!1,telegramUserId:""}),{data:m=[],isLoading:v,refetch:x,error:w}=$e({queryKey:["/api/advertiser/team/members",e==null?void 0:e.id],queryFn:async()=>{const A=await fetch("/api/advertiser/team/members",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!A.ok)throw new Error("Ошибка загрузки команды");return A.json()},enabled:!!(e!=null&&e.id)}),{data:j=[],isLoading:g,error:b}=$e({queryKey:["/api/advertiser/team/activity-logs",e==null?void 0:e.id],queryFn:async()=>{const A=await fetch("/api/advertiser/team/activity-logs",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!A.ok)throw new Error("Ошибка загрузки логов");return A.json()},enabled:!!(e!=null&&e.id)}),p=Ee({mutationFn:async A=>{const T=await fetch("/api/advertiser/team/invite",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(A)});if(!T.ok){const O=await T.json();throw new Error(O.error||"Ошибка отправки приглашения")}return T.json()},onSuccess:A=>{t({title:"Приглашение отправлено",description:`Email-приглашение отправлено на ${A.email}`}),x()},onError:A=>{t({title:"Ошибка отправки приглашения",description:A.message,variant:"destructive"})}}),N=Ee({mutationFn:async A=>{const T=await fetch("/api/advertiser/team/members",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(A)});if(!T.ok)throw new Error("Ошибка создания сотрудника");return T.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/advertiser/team/members"]}),l(!1),D(),t({title:"Сотрудник добавлен",description:"Новый сотрудник успешно добавлен в команду"})},onError:A=>{t({title:"Ошибка добавления",description:A.message,variant:"destructive"})}}),k=Ee({mutationFn:async({id:A,data:T})=>{const O=await fetch(`/api/advertiser/team/members/${A}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(T)});if(!O.ok)throw new Error("Ошибка обновления сотрудника");return O.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/advertiser/team/members"]}),c(null),D(),t({title:"Данные обновлены",description:"Информация о сотруднике успешно обновлена"})}}),C=Ee({mutationFn:async A=>{const T=await fetch(`/api/advertiser/team/members/${A}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!T.ok)throw new Error("Ошибка удаления сотрудника");return T.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/advertiser/team/members"]}),t({title:"Сотрудник удалён",description:"Сотрудник успешно удалён из команды"})}}),_=()=>{if(!h.email||!h.role){t({title:"Ошибка валидации",description:"Email и роль обязательны для заполнения",variant:"destructive"});return}p.mutate({email:h.email,role:h.role})},P=(A="csv")=>{const T=m.map(O=>({email:O.email,name:`${O.firstName} ${O.lastName}`,role:RF[O.role],status:O.status,lastActivity:O.lastActivity,createdAt:O.createdAt}));if(A==="json"){const O=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),z=URL.createObjectURL(O),F=document.createElement("a");F.href=z,F.download=`team-members-${new Date().toISOString().split("T")[0]}.json`,F.click()}else{const z=[["Email","Name","Role","Status","Last Activity","Added Date"].join(","),...T.map(Q=>[Q.email,Q.name,Q.role,Q.status,Q.lastActivity,Q.createdAt].join(","))].join(`
`),F=new Blob([z],{type:"text/csv"}),R=URL.createObjectURL(F),I=document.createElement("a");I.href=R,I.download=`team-members-${new Date().toISOString().split("T")[0]}.csv`,I.click()}t({title:"Экспорт завершен",description:`Данные команды экспортированы в формате ${A.toUpperCase()}`})},D=()=>{f({username:"",email:"",firstName:"",lastName:"",role:"manager",permissions:jS.manager,restrictions:{ipWhitelist:[],geoRestrictions:[],timeRestrictions:{enabled:!1,startTime:"09:00",endTime:"18:00",timezone:"UTC",workingDays:[1,2,3,4,5]}},telegramNotifications:!1,telegramUserId:""})},E=A=>{f(T=>({...T,role:A,permissions:jS[A]}))},$=m.filter(A=>{const T=A.username.toLowerCase().includes(d.search.toLowerCase())||A.email.toLowerCase().includes(d.search.toLowerCase())||`${A.firstName} ${A.lastName}`.toLowerCase().includes(d.search.toLowerCase()),O=d.role==="all"||A.role===d.role,z=d.status==="all"||A.status===d.status;return T&&O&&z});return e?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Командный режим"}),r.jsx("p",{className:"text-muted-foreground",children:"Управление командой и разграничение прав доступа"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(M,{onClick:()=>l(!0),"data-testid":"button-add-member",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить сотрудника"]}),r.jsxs(M,{variant:"outline",onClick:()=>P("csv"),"data-testid":"button-export-team",children:[r.jsx(vr,{className:"h-4 w-4 mr-2"}),"Экспорт"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(W,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-700 shadow-lg hover:shadow-xl transition-shadow",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-full",children:r.jsx(ar,{className:"h-8 w-8 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"👤 Всего сотрудников"}),r.jsx("p",{className:"text-3xl font-bold text-blue-800 dark:text-blue-200",children:m.length})]})]})})}),r.jsx(W,{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-green-200 dark:border-green-700 shadow-lg hover:shadow-xl transition-shadow",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full",children:r.jsx(Mi,{className:"h-8 w-8 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"✅ Активных"}),r.jsx("p",{className:"text-3xl font-bold text-green-800 dark:text-green-200",children:m.filter(A=>A.status==="active").length})]})]})})}),r.jsx(W,{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-purple-200 dark:border-purple-700 shadow-lg hover:shadow-xl transition-shadow",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full",children:r.jsx(Lt,{className:"h-8 w-8 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"🔒 С ограничениями"}),r.jsx("p",{className:"text-3xl font-bold text-purple-800 dark:text-purple-200",children:m.filter(A=>A.restrictions.ipWhitelist.length>0||A.restrictions.geoRestrictions.length>0||A.restrictions.timeRestrictions.enabled).length})]})]})})}),r.jsx(W,{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 border-orange-200 dark:border-orange-700 shadow-lg hover:shadow-xl transition-shadow",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-500 rounded-full",children:r.jsx(In,{className:"h-8 w-8 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"🔔 Telegram уведомления"}),r.jsx("p",{className:"text-3xl font-bold text-orange-800 dark:text-orange-200",children:m.filter(A=>A.telegramNotifications).length})]})]})})})]}),r.jsxs(Zr,{value:s,onValueChange:a,className:"space-y-4",children:[r.jsxs(Vr,{className:"bg-gradient-to-r from-slate-100 to-gray-100 dark:from-slate-800 dark:to-gray-800 p-1 rounded-xl",children:[r.jsx(We,{value:"members",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500 data-[state=active]:to-indigo-500 data-[state=active]:text-white",children:"👥 Сотрудники"}),r.jsx(We,{value:"roles",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-pink-500 data-[state=active]:text-white",children:"🔑 Роли и права"}),r.jsx(We,{value:"activity",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-green-500 data-[state=active]:to-emerald-500 data-[state=active]:text-white",children:"📋 Логи действий"})]}),r.jsxs(He,{value:"members",className:"space-y-4",children:[r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"h-5 w-5"}),"Фильтры сотрудников"]})}),r.jsx(H,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"search",children:"Поиск"}),r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{id:"search",placeholder:"Имя, email, username...",value:d.search,onChange:A=>u(T=>({...T,search:A.target.value})),className:"pl-8","data-testid":"input-search-members"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Роль"}),r.jsxs(he,{value:d.role,onValueChange:A=>u(T=>({...T,role:A})),children:[r.jsx(de,{"data-testid":"select-role-filter",children:r.jsx(fe,{placeholder:"Все роли"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все роли"}),r.jsx(S,{value:"manager",children:"Менеджер"}),r.jsx(S,{value:"analyst",children:"Аналитик"}),r.jsx(S,{value:"financier",children:"Финансист"}),r.jsx(S,{value:"support",children:"Техподдержка"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Статус"}),r.jsxs(he,{value:d.status,onValueChange:A=>u(T=>({...T,status:A})),children:[r.jsx(de,{"data-testid":"select-status-filter",children:r.jsx(fe,{placeholder:"Все статусы"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все статусы"}),r.jsx(S,{value:"active",children:"Активный"}),r.jsx(S,{value:"inactive",children:"Неактивный"}),r.jsx(S,{value:"blocked",children:"Заблокирован"})]})]})]})]})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{children:["Список сотрудников (",$.length,")"]})}),r.jsx(H,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Сотрудник"}),r.jsx(J,{children:"Роль"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Последняя активность"}),r.jsx(J,{children:"Уведомления"}),r.jsx(J,{children:"Действия"})]})}),r.jsx($t,{children:v?r.jsx(Re,{children:r.jsx(q,{colSpan:6,className:"text-center",children:"Загрузка..."})}):$.length===0?r.jsx(Re,{children:r.jsx(q,{colSpan:6,className:"text-center",children:"Сотрудники не найдены"})}):$.map(A=>r.jsxs(Re,{children:[r.jsx(q,{children:r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium",children:[A.firstName," ",A.lastName]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["@",A.username," • ",A.email]})]})}),r.jsx(q,{children:r.jsx(le,{className:SVe[A.role],children:RF[A.role]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[A.status==="active"&&r.jsx(nr,{className:"h-4 w-4 text-green-500"}),A.status==="inactive"&&r.jsx(lr,{className:"h-4 w-4 text-yellow-500"}),A.status==="blocked"&&r.jsx(zt,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"capitalize",children:A.status})]})}),r.jsx(q,{children:r.jsx("div",{className:"text-sm",children:new Date(A.lastActivity).toLocaleString("ru-RU")})}),r.jsx(q,{children:A.telegramNotifications?r.jsxs(le,{variant:"outline",className:"text-green-600",children:[r.jsx(In,{className:"h-3 w-3 mr-1"}),"Включены"]}):r.jsx(le,{variant:"outline",className:"text-gray-500",children:"Отключены"})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(M,{variant:"outline",size:"sm",onClick:()=>{c(A),f({username:A.username,email:A.email,firstName:A.firstName,lastName:A.lastName,role:A.role,permissions:A.permissions,restrictions:A.restrictions,telegramNotifications:A.telegramNotifications,telegramUserId:A.telegramUserId||""})},"data-testid":`button-edit-member-${A.id}`,children:r.jsx(cs,{className:"h-4 w-4"})}),r.jsx(M,{variant:"outline",size:"sm",onClick:()=>C.mutate(A.id),"data-testid":`button-delete-member-${A.id}`,children:r.jsx(wr,{className:"h-4 w-4 text-red-500"})})]})})]},A.id))})]})})})]})]}),r.jsx(He,{value:"roles",className:"space-y-4",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Таблица ролей и разрешений"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Права доступа для каждой роли в системе"})]}),r.jsx(H,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{className:"w-[200px]",children:"Функция"}),r.jsx(J,{className:"text-center",children:"Менеджер"}),r.jsx(J,{className:"text-center",children:"Аналитик"}),r.jsx(J,{className:"text-center",children:"Финансист"}),r.jsx(J,{className:"text-center",children:"Техподдержка"})]})}),r.jsxs($t,{children:[r.jsxs(Re,{children:[r.jsx(q,{className:"font-medium",children:"Управление офферами"}),r.jsx(q,{className:"text-center",children:r.jsx(nr,{className:"h-5 w-5 text-green-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(zt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(zt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(nr,{className:"h-5 w-5 text-green-500 mx-auto"})})]}),r.jsxs(Re,{children:[r.jsx(q,{className:"font-medium",children:"Управление партнёрами"}),r.jsx(q,{className:"text-center",children:r.jsx(nr,{className:"h-5 w-5 text-green-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(zt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(zt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(zt,{className:"h-5 w-5 text-red-500 mx-auto"})})]}),r.jsxs(Re,{children:[r.jsx(q,{className:"font-medium",children:"Просмотр статистики"}),r.jsx(q,{className:"text-center",children:r.jsx(nr,{className:"h-5 w-5 text-green-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(nr,{className:"h-5 w-5 text-green-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(zt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(nr,{className:"h-5 w-5 text-green-500 mx-auto"})})]}),r.jsxs(Re,{children:[r.jsx(q,{className:"font-medium",children:"Финансовые операции"}),r.jsx(q,{className:"text-center",children:r.jsx(zt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(zt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(nr,{className:"h-5 w-5 text-green-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(zt,{className:"h-5 w-5 text-red-500 mx-auto"})})]}),r.jsxs(Re,{children:[r.jsx(q,{className:"font-medium",children:"Постбеки и API"}),r.jsx(q,{className:"text-center",children:r.jsx(zt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(zt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(zt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(q,{className:"text-center",children:r.jsx(nr,{className:"h-5 w-5 text-green-500 mx-auto"})})]})]})]})})})]})}),r.jsx(He,{value:"activity",className:"space-y-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(ln,{className:"h-5 w-5"}),"Логи действий команды"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"История действий всех сотрудников команды"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(M,{variant:"outline",size:"sm",onClick:()=>{const A=j.map(I=>({timestamp:new Date(I.timestamp).toLocaleString("ru-RU"),username:I.username,action:I.action,resource:I.resource,ipAddress:I.ipAddress,result:I.result})),O=[["Время","Пользователь","Действие","Ресурс","IP адрес","Результат"].join(","),...A.map(I=>Object.values(I).join(","))].join(`
`),z=new Blob([O],{type:"text/csv"}),F=URL.createObjectURL(z),R=document.createElement("a");R.href=F,R.download=`team-activity-logs-${new Date().toISOString().split("T")[0]}.csv`,R.click()},children:"Экспорт CSV"}),r.jsx(M,{variant:"outline",size:"sm",onClick:()=>{const A=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),T=URL.createObjectURL(A),O=document.createElement("a");O.href=T,O.download=`team-activity-logs-${new Date().toISOString().split("T")[0]}.json`,O.click()},children:"Экспорт JSON"})]})]})}),r.jsx(H,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Время"}),r.jsx(J,{children:"Пользователь"}),r.jsx(J,{children:"Действие"}),r.jsx(J,{children:"Ресурс"}),r.jsx(J,{children:"IP адрес"}),r.jsx(J,{children:"Результат"})]})}),r.jsx($t,{children:g?r.jsx(Re,{children:r.jsx(q,{colSpan:6,className:"text-center",children:"Загрузка логов..."})}):j.length===0?r.jsx(Re,{children:r.jsx(q,{colSpan:6,className:"text-center",children:"Логи активности не найдены"})}):j.slice(0,50).map(A=>r.jsxs(Re,{children:[r.jsx(q,{children:r.jsx("div",{className:"text-sm",children:new Date(A.timestamp).toLocaleString("ru-RU")})}),r.jsx(q,{children:r.jsx("div",{className:"font-medium",children:A.username})}),r.jsx(q,{children:r.jsx(le,{variant:"outline",children:A.action})}),r.jsx(q,{children:A.resource}),r.jsx(q,{children:r.jsx("code",{className:"text-xs",children:A.ipAddress})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[A.result==="success"&&r.jsx(nr,{className:"h-4 w-4 text-green-500"}),A.result==="failed"&&r.jsx(zt,{className:"h-4 w-4 text-red-500"}),A.result==="warning"&&r.jsx(qa,{className:"h-4 w-4 text-yellow-500"}),r.jsx("span",{className:"capitalize text-sm",children:A.result})]})})]},A.id))})]})})})]})})]}),r.jsx(jt,{open:i||!!o,onOpenChange:A=>{A||(l(!1),c(null),D())},children:r.jsxs(vt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto","aria-describedby":"team-member-dialog-description",children:[r.jsx(yt,{children:r.jsx(bt,{children:o?"Редактировать сотрудника":"Добавить сотрудника"})}),r.jsxs("div",{id:"team-member-dialog-description",className:"sr-only",children:["Форма для ",o?"редактирования данных":"добавления нового"," сотрудника в команду с настройкой ролей и разрешений"]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Основная информация"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"username",children:"Username *"}),r.jsx(ne,{id:"username",value:h.username,onChange:A=>f(T=>({...T,username:A.target.value})),placeholder:"username","data-testid":"input-member-username"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"email",children:"Email *"}),r.jsx(ne,{id:"email",type:"email",value:h.email,onChange:A=>f(T=>({...T,email:A.target.value})),placeholder:"user@example.com","data-testid":"input-member-email"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"firstName",children:"Имя *"}),r.jsx(ne,{id:"firstName",value:h.firstName,onChange:A=>f(T=>({...T,firstName:A.target.value})),placeholder:"Иван","data-testid":"input-member-firstname"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"lastName",children:"Фамилия *"}),r.jsx(ne,{id:"lastName",value:h.lastName,onChange:A=>f(T=>({...T,lastName:A.target.value})),placeholder:"Иванов","data-testid":"input-member-lastname"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Роль и права доступа"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Роль"}),r.jsxs(he,{value:h.role,onValueChange:E,children:[r.jsx(de,{"data-testid":"select-member-role",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"manager",children:"Менеджер"}),r.jsx(S,{value:"analyst",children:"Аналитик"}),r.jsx(S,{value:"financier",children:"Финансист"}),r.jsx(S,{value:"support",children:"Техподдержка"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(L,{children:"Разрешения"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{htmlFor:"manageOffers",className:"text-sm",children:"Управление офферами"}),r.jsx(Ye,{id:"manageOffers",checked:h.permissions.manageOffers,onCheckedChange:A=>f(T=>({...T,permissions:{...T.permissions,manageOffers:A}})),"data-testid":"switch-manage-offers"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{htmlFor:"managePartners",className:"text-sm",children:"Управление партнёрами"}),r.jsx(Ye,{id:"managePartners",checked:h.permissions.managePartners,onCheckedChange:A=>f(T=>({...T,permissions:{...T.permissions,managePartners:A}})),"data-testid":"switch-manage-partners"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{htmlFor:"viewStatistics",className:"text-sm",children:"Просмотр статистики"}),r.jsx(Ye,{id:"viewStatistics",checked:h.permissions.viewStatistics,onCheckedChange:A=>f(T=>({...T,permissions:{...T.permissions,viewStatistics:A}})),"data-testid":"switch-view-statistics"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{htmlFor:"financialOperations",className:"text-sm",children:"Финансовые операции"}),r.jsx(Ye,{id:"financialOperations",checked:h.permissions.financialOperations,onCheckedChange:A=>f(T=>({...T,permissions:{...T.permissions,financialOperations:A}})),"data-testid":"switch-financial-operations"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{htmlFor:"postbacksApi",className:"text-sm",children:"Постбеки и API"}),r.jsx(Ye,{id:"postbacksApi",checked:h.permissions.postbacksApi,onCheckedChange:A=>f(T=>({...T,permissions:{...T.permissions,postbacksApi:A}})),"data-testid":"switch-postbacks-api"})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Ограничения доступа"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"ipWhitelist",children:"IP белый список (через запятую)"}),r.jsx(pt,{id:"ipWhitelist",value:h.restrictions.ipWhitelist.join(", "),onChange:A=>f(T=>({...T,restrictions:{...T.restrictions,ipWhitelist:A.target.value.split(",").map(O=>O.trim()).filter(Boolean)}})),placeholder:"192.168.1.1, 10.0.0.1","data-testid":"textarea-ip-whitelist"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"geoRestrictions",children:"GEO ограничения (коды стран через запятую)"}),r.jsx(ne,{id:"geoRestrictions",value:h.restrictions.geoRestrictions.join(", "),onChange:A=>f(T=>({...T,restrictions:{...T.restrictions,geoRestrictions:A.target.value.split(",").map(O=>O.trim()).filter(Boolean)}})),placeholder:"RU, US, DE","data-testid":"input-geo-restrictions"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{children:"Временные ограничения"}),r.jsx(Ye,{checked:h.restrictions.timeRestrictions.enabled,onCheckedChange:A=>f(T=>({...T,restrictions:{...T.restrictions,timeRestrictions:{...T.restrictions.timeRestrictions,enabled:A}}})),"data-testid":"switch-time-restrictions"})]}),h.restrictions.timeRestrictions.enabled&&r.jsxs("div",{className:"grid grid-cols-2 gap-4 pl-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"startTime",children:"Начало работы"}),r.jsx(ne,{id:"startTime",type:"time",value:h.restrictions.timeRestrictions.startTime,onChange:A=>f(T=>({...T,restrictions:{...T.restrictions,timeRestrictions:{...T.restrictions.timeRestrictions,startTime:A.target.value}}})),"data-testid":"input-start-time"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"endTime",children:"Конец работы"}),r.jsx(ne,{id:"endTime",type:"time",value:h.restrictions.timeRestrictions.endTime,onChange:A=>f(T=>({...T,restrictions:{...T.restrictions,timeRestrictions:{...T.restrictions.timeRestrictions,endTime:A.target.value}}})),"data-testid":"input-end-time"})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Telegram уведомления"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{htmlFor:"telegramNotifications",children:"Включить Telegram уведомления"}),r.jsx(Ye,{id:"telegramNotifications",checked:h.telegramNotifications,onCheckedChange:A=>f(T=>({...T,telegramNotifications:A})),"data-testid":"switch-telegram-notifications"})]}),h.telegramNotifications&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"telegramUserId",children:"Telegram User ID"}),r.jsx(ne,{id:"telegramUserId",value:h.telegramUserId,onChange:A=>f(T=>({...T,telegramUserId:A.target.value})),placeholder:"123456789","data-testid":"input-telegram-user-id"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(M,{variant:"outline",onClick:()=>{l(!1),c(null),D()},"data-testid":"button-cancel-member",children:"Отмена"}),r.jsxs(M,{onClick:()=>{o?k.mutate({id:o.id,data:h}):h.username&&h.firstName&&h.lastName?N.mutate(h):_()},disabled:N.isPending||k.isPending||p.isPending,"data-testid":"button-save-member",children:[(N.isPending||k.isPending||p.isPending)&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),o?"Сохранить":h.username?"Добавить":"Пригласить"]})]})]})]})})]}):r.jsx("div",{children:"Загрузка..."})}var DY=["PageUp","PageDown"],MY=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$Y={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},np="Slider",[DP,_Ve,PVe]=Dv(np),[IY,iWe]=Bn(np,[PVe]),[AVe,vN]=IY(np),FY=y.forwardRef((e,t)=>{const{name:n,min:s=0,max:a=100,step:i=1,orientation:l="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:u,onValueChange:h=()=>{},onValueCommit:f=()=>{},inverted:m=!1,form:v,...x}=e,w=y.useRef(new Set),j=y.useRef(0),b=l==="horizontal"?TVe:EVe,[p=[],N]=Oi({prop:u,defaultProp:d,onChange:E=>{var A;(A=[...w.current][j.current])==null||A.focus(),h(E)}}),k=y.useRef(p);function C(E){const $=$Ve(p,E);D(E,$)}function _(E){D(E,j.current)}function P(){const E=k.current[j.current];p[j.current]!==E&&f(p)}function D(E,$,{commit:A}={commit:!1}){const T=UVe(i),O=BVe(Math.round((E-s)/i)*i+s,T),z=Jx(O,[s,a]);N((F=[])=>{const R=DVe(F,z,$);if(LVe(R,c*i)){j.current=R.indexOf(z);const I=String(R)!==String(F);return I&&A&&f(R),I?R:F}else return F})}return r.jsx(AVe,{scope:e.__scopeSlider,name:n,disabled:o,min:s,max:a,valueIndexToChangeRef:j,thumbs:w.current,values:p,orientation:l,form:v,children:r.jsx(DP.Provider,{scope:e.__scopeSlider,children:r.jsx(DP.Slot,{scope:e.__scopeSlider,children:r.jsx(b,{"aria-disabled":o,"data-disabled":o?"":void 0,...x,ref:t,onPointerDown:Le(x.onPointerDown,()=>{o||(k.current=p)}),min:s,max:a,inverted:m,onSlideStart:o?void 0:C,onSlideMove:o?void 0:_,onSlideEnd:o?void 0:P,onHomeKeyDown:()=>!o&&D(s,0,{commit:!0}),onEndKeyDown:()=>!o&&D(a,p.length-1,{commit:!0}),onStepKeyDown:({event:E,direction:$})=>{if(!o){const O=DY.includes(E.key)||E.shiftKey&&MY.includes(E.key)?10:1,z=j.current,F=p[z],R=i*O*$;D(F+R,z,{commit:!0})}}})})})})});FY.displayName=np;var[LY,UY]=IY(np,{startEdge:"left",endEdge:"right",size:"width",direction:1}),TVe=y.forwardRef((e,t)=>{const{min:n,max:s,dir:a,inverted:i,onSlideStart:l,onSlideMove:o,onSlideEnd:c,onStepKeyDown:d,...u}=e,[h,f]=y.useState(null),m=St(t,b=>f(b)),v=y.useRef(void 0),x=Mm(a),w=x==="ltr",j=w&&!i||!w&&i;function g(b){const p=v.current||h.getBoundingClientRect(),N=[0,p.width],C=RE(N,j?[n,s]:[s,n]);return v.current=p,C(b-p.left)}return r.jsx(LY,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:r.jsx(BY,{dir:x,"data-orientation":"horizontal",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const p=g(b.clientX);l==null||l(p)},onSlideMove:b=>{const p=g(b.clientX);o==null||o(p)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:b=>{const N=$Y[j?"from-left":"from-right"].includes(b.key);d==null||d({event:b,direction:N?-1:1})}})})}),EVe=y.forwardRef((e,t)=>{const{min:n,max:s,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:o,onStepKeyDown:c,...d}=e,u=y.useRef(null),h=St(t,u),f=y.useRef(void 0),m=!a;function v(x){const w=f.current||u.current.getBoundingClientRect(),j=[0,w.height],b=RE(j,m?[s,n]:[n,s]);return f.current=w,b(x-w.top)}return r.jsx(LY,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:r.jsx(BY,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const w=v(x.clientY);i==null||i(w)},onSlideMove:x=>{const w=v(x.clientY);l==null||l(w)},onSlideEnd:()=>{f.current=void 0,o==null||o()},onStepKeyDown:x=>{const j=$Y[m?"from-bottom":"from-top"].includes(x.key);c==null||c({event:x,direction:j?-1:1})}})})}),BY=y.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:o,onStepKeyDown:c,...d}=e,u=vN(np,n);return r.jsx(Ze.span,{...d,ref:t,onKeyDown:Le(e.onKeyDown,h=>{h.key==="Home"?(l(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):DY.concat(MY).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:Le(e.onPointerDown,h=>{const f=h.target;f.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(f)?f.focus():s(h)}),onPointerMove:Le(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:Le(e.onPointerUp,h=>{const f=h.target;f.hasPointerCapture(h.pointerId)&&(f.releasePointerCapture(h.pointerId),i(h))})})}),zY="SliderTrack",VY=y.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=vN(zY,n);return r.jsx(Ze.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});VY.displayName=zY;var MP="SliderRange",qY=y.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=vN(MP,n),i=UY(MP,n),l=y.useRef(null),o=St(t,l),c=a.values.length,d=a.values.map(f=>HY(f,a.min,a.max)),u=c>1?Math.min(...d):0,h=100-Math.max(...d);return r.jsx(Ze.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:o,style:{...e.style,[i.startEdge]:u+"%",[i.endEdge]:h+"%"}})});qY.displayName=MP;var $P="SliderThumb",WY=y.forwardRef((e,t)=>{const n=_Ve(e.__scopeSlider),[s,a]=y.useState(null),i=St(t,o=>a(o)),l=y.useMemo(()=>s?n().findIndex(o=>o.ref.current===s):-1,[n,s]);return r.jsx(OVe,{...e,ref:i,index:l})}),OVe=y.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:a,...i}=e,l=vN($P,n),o=UY($P,n),[c,d]=y.useState(null),u=St(t,g=>d(g)),h=c?l.form||!!c.closest("form"):!0,f=Yw(c),m=l.values[s],v=m===void 0?0:HY(m,l.min,l.max),x=MVe(s,l.values.length),w=f==null?void 0:f[o.size],j=w?IVe(w,v,o.direction):0;return y.useEffect(()=>{if(c)return l.thumbs.add(c),()=>{l.thumbs.delete(c)}},[c,l.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${v}% + ${j}px)`},children:[r.jsx(DP.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(Ze.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":l.min,"aria-valuenow":m,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:u,style:m===void 0?{display:"none"}:e.style,onFocus:Le(e.onFocus,()=>{l.valueIndexToChangeRef.current=s})})}),h&&r.jsx(RVe,{name:a??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:m},s)]})});WY.displayName=$P;var RVe=e=>{const{value:t,...n}=e,s=y.useRef(null),a=c1(t);return y.useEffect(()=>{const i=s.current,l=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&c){const d=new Event("input",{bubbles:!0});c.call(i,t),i.dispatchEvent(d)}},[a,t]),r.jsx("input",{style:{display:"none"},...n,ref:s,defaultValue:t})};function DVe(e=[],t,n){const s=[...e];return s[n]=t,s.sort((a,i)=>a-i)}function HY(e,t,n){const i=100/(n-t)*(e-t);return Jx(i,[0,100])}function MVe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function $Ve(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),s=Math.min(...n);return n.indexOf(s)}function IVe(e,t,n){const s=e/2,i=RE([0,50],[0,s]);return(s-i(t)*n)*n}function FVe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function LVe(e,t){if(t>0){const n=FVe(e);return Math.min(...n)>=t}return!0}function RE(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function UVe(e){return(String(e).split(".")[1]||"").length}function BVe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var KY=FY,zVe=VY,VVe=qY,qVe=WY;const GY=y.forwardRef(({className:e,...t},n)=>r.jsxs(KY,{ref:n,className:Ae("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(zVe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(VVe,{className:"absolute h-full bg-primary"})}),r.jsx(qVe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));GY.displayName=KY.displayName;const Mp={bot:"Бот-трафик",vpn:"VPN",proxy:"Прокси",duplicate:"Дубликаты",suspicious_cr:"Подозр. CR",click_spam:"Клик-спам",tor:"TOR-сеть"},v0={bot:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",vpn:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",proxy:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",duplicate:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",suspicious_cr:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300",click_spam:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300",tor:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"},DF={blocked:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",flagged:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",ignored:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",pending:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},WVe={confirmed:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",false_positive:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"};function HVe(){var E,$,A,T,O,z,F,R,I,Q,Y,K,oe,ge,Ne,Oe,pe,Me,xe,ce,Ie,ie,st;const{user:e}=Jt(),{toast:t}=lt(),n=Et(),[s,a]=y.useState("dashboard"),[i,l]=y.useState("24h"),[o,c]=y.useState(null),[d,u]=y.useState({search:"",fraudType:"all",action:"all",status:"all",partner:"all",country:"all"}),{data:h,isLoading:f,refetch:m}=$e({queryKey:["/api/advertiser/antifraud/dashboard",i],queryFn:async()=>await Te(`/api/advertiser/antifraud/dashboard?range=${i}`)}),{data:v,isLoading:x,refetch:w}=$e({queryKey:["/api/advertiser/antifraud/events",d],queryFn:async()=>{const G=new URLSearchParams;return Object.entries(d).forEach(([me,Be])=>{Be&&Be!=="all"&&G.append(me,Be)}),await Te(`/api/advertiser/antifraud/events?${G}`)}}),{data:j,isLoading:g}=$e({queryKey:["/api/advertiser/antifraud/settings"],queryFn:async()=>await Te("/api/advertiser/antifraud/settings")}),b=Ee({mutationFn:async G=>await Te("/api/advertiser/antifraud/settings","POST",G),onSuccess:()=>{t({title:"Настройки сохранены",description:"Настройки антифрод системы успешно обновлены"}),n.invalidateQueries({queryKey:["/api/advertiser/antifraud/settings"]})},onError:()=>{t({title:"Ошибка",description:"Не удалось сохранить настройки",variant:"destructive"})}}),p=Ee({mutationFn:async({eventId:G,status:De})=>await Te("/api/advertiser/antifraud/confirm-event","POST",{eventId:G,status:De}),onSuccess:()=>{t({title:"Событие обновлено",description:"Статус события успешно изменен"}),w(),m()},onError:()=>{t({title:"Ошибка",description:"Не удалось обновить событие",variant:"destructive"})}}),N=Ee({mutationFn:async({partnerId:G,reason:De})=>await Te("/api/advertiser/antifraud/block-partner","POST",{partnerId:G,reason:De}),onSuccess:()=>{t({title:"Партнер заблокирован",description:"Партнер успешно заблокирован из-за фродовой активности"}),w()},onError:()=>{t({title:"Ошибка",description:"Не удалось заблокировать партнера",variant:"destructive"})}}),k=(G,De)=>{if(!j)return;const me={...j},Be=G.split(".");let qe=me;for(let Qe=0;Qe<Be.length-1;Qe++)qe=qe[Be[Qe]];qe[Be[Be.length-1]]=De,b.mutate(me)},C=(G,De)=>{p.mutate({eventId:G,status:De}),c(null)},_=(G,De)=>{N.mutate({partnerId:G,reason:"Автоблокировка из-за высокой фродовой активности"})},P=G=>{if(G==="csv"){const De=[["Дата","Партнер","Оффер","SubID","IP","Страна","Тип фрода","Действие","Статус"],...(v||[]).map(Qe=>[Qe.timestamp,Qe.partnerName,Qe.offerName,Qe.subId,Qe.ip,Qe.country,Mp[Qe.fraudType],Qe.action,Qe.status])].map(Qe=>Qe.join(",")).join(`
`),me=new Blob([De],{type:"text/csv"}),Be=URL.createObjectURL(me),qe=document.createElement("a");qe.href=Be,qe.download=`antifraud-events-${new Date().toISOString().split("T")[0]}.csv`,qe.click()}t({title:"Экспорт завершен",description:`Данные антифрод системы экспортированы в формате ${G.toUpperCase()}`})},D=Array.isArray(v)?v.filter(G=>{const De=G.partnerName.toLowerCase().includes(d.search.toLowerCase())||G.offerName.toLowerCase().includes(d.search.toLowerCase())||G.subId.toLowerCase().includes(d.search.toLowerCase())||G.ip.includes(d.search),me=d.fraudType==="all"||G.fraudType===d.fraudType,Be=d.action==="all"||G.action===d.action,qe=d.status==="all"||G.status===d.status,Qe=d.country==="all"||G.country===d.country;return De&&me&&Be&&qe&&Qe}):[];return e?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[r.jsx(Lt,{className:"h-8 w-8 text-red-500"}),"Антифрод-система"]}),r.jsx("p",{className:"text-muted-foreground",children:"Анализ, мониторинг и защита от фродового трафика"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(he,{value:i,onValueChange:l,children:[r.jsx(de,{className:"w-32","data-testid":"select-date-range",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"1h",children:"1 час"}),r.jsx(S,{value:"24h",children:"24 часа"}),r.jsx(S,{value:"7d",children:"7 дней"}),r.jsx(S,{value:"30d",children:"30 дней"})]})]}),r.jsxs(M,{variant:"outline",onClick:()=>{m(),w()},"data-testid":"button-refresh",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Обновить"]})]})]}),r.jsxs(Zr,{value:s,onValueChange:a,className:"w-full",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-4 bg-gradient-to-r from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 p-1",children:[r.jsx(We,{value:"dashboard",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-cyan-500 data-[state=active]:to-blue-500 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-cyan-100 dark:hover:bg-cyan-900",children:"🎯 Дашборд"}),r.jsx(We,{value:"events",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-orange-500 data-[state=active]:to-red-500 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-orange-100 dark:hover:bg-orange-900",children:"⚡ События"}),r.jsx(We,{value:"settings",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-pink-500 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-purple-100 dark:hover:bg-purple-900",children:"⚙️ Настройки"}),r.jsx(We,{value:"reports",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-emerald-500 data-[state=active]:to-green-500 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-emerald-100 dark:hover:bg-emerald-900",children:"📊 Отчеты"})]}),r.jsxs(He,{value:"dashboard",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(W,{className:"bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-cyan-900/20 dark:to-blue-900/20 border-cyan-200 dark:border-cyan-700",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-cyan-700 dark:text-cyan-300",children:"Всего событий"}),r.jsx("div",{className:"p-2 bg-cyan-500 rounded-xl shadow-lg",children:r.jsx(ln,{className:"h-4 w-4 text-white"})})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold text-cyan-900 dark:text-cyan-100",children:f?"...":((E=h==null?void 0:h.totalEvents)==null?void 0:E.toLocaleString())||"0"}),r.jsx("p",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:"За выбранный период"})]})]}),r.jsxs(W,{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 border-red-200 dark:border-red-700",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Заблокировано"}),r.jsx("div",{className:"p-2 bg-red-500 rounded-xl shadow-lg",children:r.jsx(qx,{className:"h-4 w-4 text-white"})})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:f?"...":(($=h==null?void 0:h.blockedEvents)==null?void 0:$.toLocaleString())||"0"}),r.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"Фродовых событий"})]})]}),r.jsxs(W,{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-orange-200 dark:border-orange-700",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"Уровень фрода"}),r.jsx("div",{className:"p-2 bg-orange-500 rounded-xl shadow-lg",children:r.jsx(qa,{className:"h-4 w-4 text-white"})})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:f?"...":`${((A=h==null?void 0:h.fraudRate)==null?void 0:A.toFixed(2))||"0"}%`}),r.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:"От общего трафика"})]})]}),r.jsxs(W,{className:"bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20 border-emerald-200 dark:border-emerald-700",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-emerald-700 dark:text-emerald-300",children:"Защищено"}),r.jsx("div",{className:"p-2 bg-emerald-500 rounded-xl shadow-lg",children:r.jsx(Lt,{className:"h-4 w-4 text-white"})})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold text-emerald-900 dark:text-emerald-100",children:f?"...":`${(100-((h==null?void 0:h.fraudRate)||0)).toFixed(2)}%`}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Чистого трафика"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Топ типы фрода"})}),r.jsx(H,{children:f?r.jsx("div",{children:"Загрузка..."}):r.jsx("div",{className:"space-y-3",children:(T=h==null?void 0:h.topFraudTypes)==null?void 0:T.map((G,De)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx(le,{className:v0[G.type],children:Mp[G.type]})}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(su,{value:G.percentage,className:"w-20"}),r.jsx("span",{className:"text-sm font-medium",children:G.count})]})]},G.type))})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Проблемные партнеры"})}),r.jsx(H,{children:f?r.jsx("div",{children:"Загрузка..."}):r.jsx("div",{className:"space-y-3",children:(O=h==null?void 0:h.topFraudPartners)==null?void 0:O.map((G,De)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:G.partnerName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",G.partnerId]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs(le,{variant:"destructive",children:[G.fraudRate.toFixed(1),"% фрода"]}),r.jsx(M,{size:"sm",variant:"destructive",onClick:()=>_(G.partnerId,G.partnerName),"data-testid":`button-block-partner-${G.partnerId}`,children:r.jsx(qx,{className:"h-3 w-3"})})]})]},G.partnerId))})})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Недавние события"})}),r.jsx(H,{children:f?r.jsx("div",{children:"Загрузка..."}):r.jsx("div",{className:"space-y-3",children:(z=h==null?void 0:h.recentEvents)==null?void 0:z.slice(0,5).map(G=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(le,{className:v0[G.fraudType],children:Mp[G.fraudType]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:G.partnerName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[G.ip," • ",G.country," • ",new Date(G.timestamp).toLocaleString("ru-RU")]})]})]}),r.jsx(le,{className:DF[G.action],children:G.action})]},G.id))})})]})]}),r.jsxs(He,{value:"events",className:"space-y-6",children:[r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"⚡ Фильтры событий"})}),r.jsx(H,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Поиск"}),r.jsx(ne,{placeholder:"Партнер, IP, SubID...",value:d.search,onChange:G=>u(De=>({...De,search:G.target.value})),"data-testid":"input-search-events"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Тип фрода"}),r.jsxs(he,{value:d.fraudType,onValueChange:G=>u(De=>({...De,fraudType:G})),children:[r.jsx(de,{"data-testid":"select-fraud-type-filter",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все типы"}),r.jsx(S,{value:"bot",children:"Боты"}),r.jsx(S,{value:"vpn",children:"VPN"}),r.jsx(S,{value:"proxy",children:"Прокси"}),r.jsx(S,{value:"duplicate",children:"Дубликаты"}),r.jsx(S,{value:"suspicious_cr",children:"Подозр. CR"}),r.jsx(S,{value:"click_spam",children:"Клик-спам"}),r.jsx(S,{value:"tor",children:"TOR"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Действие"}),r.jsxs(he,{value:d.action,onValueChange:G=>u(De=>({...De,action:G})),children:[r.jsx(de,{"data-testid":"select-action-filter",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все действия"}),r.jsx(S,{value:"blocked",children:"Заблокировано"}),r.jsx(S,{value:"flagged",children:"Помечено"}),r.jsx(S,{value:"ignored",children:"Игнорировано"}),r.jsx(S,{value:"pending",children:"В ожидании"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Статус"}),r.jsxs(he,{value:d.status,onValueChange:G=>u(De=>({...De,status:G})),children:[r.jsx(de,{"data-testid":"select-status-filter",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все статусы"}),r.jsx(S,{value:"confirmed",children:"Подтвержден"}),r.jsx(S,{value:"false_positive",children:"Ложноположительный"}),r.jsx(S,{value:"pending",children:"В ожидании"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Страна"}),r.jsxs(he,{value:d.country,onValueChange:G=>u(De=>({...De,country:G})),children:[r.jsx(de,{"data-testid":"select-country-filter",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все страны"}),r.jsx(S,{value:"RU",children:"Россия"}),r.jsx(S,{value:"US",children:"США"}),r.jsx(S,{value:"DE",children:"Германия"}),r.jsx(S,{value:"BR",children:"Бразилия"}),r.jsx(S,{value:"IN",children:"Индия"})]})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsxs(M,{onClick:()=>P("csv"),variant:"outline","data-testid":"button-export-events",children:[r.jsx(vr,{className:"h-4 w-4 mr-2"}),"Экспорт"]})})]})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{children:["События фрода (",D.length,")"]})}),r.jsx(H,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Время"}),r.jsx(J,{children:"Партнер"}),r.jsx(J,{children:"Оффер"}),r.jsx(J,{children:"SubID"}),r.jsx(J,{children:"IP / Страна"}),r.jsx(J,{children:"Тип фрода"}),r.jsx(J,{children:"Риск"}),r.jsx(J,{children:"Действие"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Действия"})]})}),r.jsx($t,{children:x?r.jsx(Re,{children:r.jsx(q,{colSpan:10,className:"text-center",children:"Загрузка..."})}):D.length===0?r.jsx(Re,{children:r.jsx(q,{colSpan:10,className:"text-center",children:"События не найдены"})}):D.map(G=>r.jsxs(Re,{children:[r.jsx(q,{children:r.jsx("div",{className:"text-sm",children:new Date(G.timestamp).toLocaleString("ru-RU")})}),r.jsx(q,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:G.partnerName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",G.partnerId]})]})}),r.jsx(q,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:G.offerName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",G.offerId]})]})}),r.jsx(q,{children:r.jsx(le,{variant:"outline",children:G.subId})}),r.jsx(q,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-mono text-sm",children:G.ip}),r.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(Lv,{className:"h-3 w-3"}),G.country]})]})}),r.jsx(q,{children:r.jsx(le,{className:v0[G.fraudType],children:Mp[G.fraudType]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(su,{value:G.riskScore,className:"w-16"}),r.jsxs("span",{className:"text-sm",children:[G.riskScore,"%"]})]})}),r.jsx(q,{children:r.jsx(le,{className:DF[G.action],children:G.action})}),r.jsx(q,{children:r.jsx(le,{className:WVe[G.status],children:G.status})}),r.jsx(q,{children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>c(G),"data-testid":`button-view-event-${G.id}`,title:"Просмотреть детали",children:r.jsx(hr,{className:"h-3 w-3"})}),G.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>C(G.id,"confirmed"),"data-testid":`button-confirm-event-${G.id}`,title:"Подтвердить фрод",children:r.jsx(nr,{className:"h-3 w-3 text-red-500"})}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>C(G.id,"false_positive"),"data-testid":`button-false-positive-${G.id}`,title:"Отметить как ложное срабатывание",children:r.jsx(zt,{className:"h-3 w-3 text-green-500"})})]})]})})]},G.id))})]})})})]})]}),r.jsx(He,{value:"settings",className:"space-y-6",children:g?r.jsx("div",{children:"Загрузка настроек..."}):r.jsxs(r.Fragment,{children:[r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"⚙️ Основные настройки"})}),r.jsxs(H,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-base",children:"Включить антифрод защиту"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Основной переключатель антифрод системы"})]}),r.jsx(Ye,{checked:(j==null?void 0:j.enabled)||!1,onCheckedChange:G=>k("enabled",G),"data-testid":"switch-antifraud-enabled"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(L,{className:"text-base",children:["Уровень чувствительности: ",(j==null?void 0:j.sensitivity)||5]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"1 - минимальный, 10 - максимальный"}),r.jsx(GY,{value:[(j==null?void 0:j.sensitivity)||5],onValueChange:G=>k("sensitivity",G[0]),min:1,max:10,step:1,className:"w-full","data-testid":"slider-sensitivity"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-base",children:"Автоматическая блокировка"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Блокировать подозрительный трафик автоматически"})]}),r.jsx(Ye,{checked:(j==null?void 0:j.autoBlock)||!1,onCheckedChange:G=>k("autoBlock",G),"data-testid":"switch-auto-block"})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(_re,{className:"h-5 w-5"}),"🤖 Детекция ботов"]})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{children:"Включить детекцию ботов"}),r.jsx(Ye,{checked:((F=j==null?void 0:j.botDetection)==null?void 0:F.enabled)||!1,onCheckedChange:G=>k("botDetection.enabled",G),"data-testid":"switch-bot-detection"})]}),((R=j==null?void 0:j.botDetection)==null?void 0:R.enabled)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{children:"Проверка JavaScript"}),r.jsx(Ye,{checked:((I=j==null?void 0:j.botDetection)==null?void 0:I.checkJs)||!1,onCheckedChange:G=>k("botDetection.checkJs",G),"data-testid":"switch-check-js"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{children:"Детекция headless браузеров"}),r.jsx(Ye,{checked:((Q=j==null?void 0:j.botDetection)==null?void 0:Q.checkHeadless)||!1,onCheckedChange:G=>k("botDetection.checkHeadless",G),"data-testid":"switch-check-headless"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{children:"Проверка взаимодействий"}),r.jsx(Ye,{checked:((Y=j==null?void 0:j.botDetection)==null?void 0:Y.checkInteraction)||!1,onCheckedChange:G=>k("botDetection.checkInteraction",G),"data-testid":"switch-check-interaction"})]})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(dr,{className:"h-5 w-5"}),"🌐 VPN/Proxy детекция"]})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{children:"Включить детекцию VPN/Proxy"}),r.jsx(Ye,{checked:((K=j==null?void 0:j.vpnProxyDetection)==null?void 0:K.enabled)||!1,onCheckedChange:G=>k("vpnProxyDetection.enabled",G),"data-testid":"switch-vpn-proxy-detection"})]}),((oe=j==null?void 0:j.vpnProxyDetection)==null?void 0:oe.enabled)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{children:"Блокировать VPN"}),r.jsx(Ye,{checked:((ge=j==null?void 0:j.vpnProxyDetection)==null?void 0:ge.blockVpn)||!1,onCheckedChange:G=>k("vpnProxyDetection.blockVpn",G),"data-testid":"switch-block-vpn"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{children:"Блокировать Proxy"}),r.jsx(Ye,{checked:((Ne=j==null?void 0:j.vpnProxyDetection)==null?void 0:Ne.blockProxy)||!1,onCheckedChange:G=>k("vpnProxyDetection.blockProxy",G),"data-testid":"switch-block-proxy"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{children:"Блокировать TOR"}),r.jsx(Ye,{checked:((Oe=j==null?void 0:j.vpnProxyDetection)==null?void 0:Oe.blockTor)||!1,onCheckedChange:G=>k("vpnProxyDetection.blockTor",G),"data-testid":"switch-block-tor"})]})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(wb,{className:"h-5 w-5"}),"⚡ Детекция клик-спама"]})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{children:"Включить детекцию клик-спама"}),r.jsx(Ye,{checked:((pe=j==null?void 0:j.clickSpamDetection)==null?void 0:pe.enabled)||!1,onCheckedChange:G=>k("clickSpamDetection.enabled",G),"data-testid":"switch-click-spam-detection"})]}),((Me=j==null?void 0:j.clickSpamDetection)==null?void 0:Me.enabled)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Макс. кликов с одного IP"}),r.jsx(ne,{type:"number",value:((xe=j==null?void 0:j.clickSpamDetection)==null?void 0:xe.maxClicksPerIp)||5,onChange:G=>k("clickSpamDetection.maxClicksPerIp",parseInt(G.target.value)),"data-testid":"input-max-clicks-per-ip"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Временное окно (минуты)"}),r.jsx(ne,{type:"number",value:((ce=j==null?void 0:j.clickSpamDetection)==null?void 0:ce.timeWindow)||60,onChange:G=>k("clickSpamDetection.timeWindow",parseInt(G.target.value)),"data-testid":"input-time-window"})]})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(In,{className:"h-5 w-5"}),"🔔 Уведомления"]})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{children:"Email уведомления"}),r.jsx(Ye,{checked:((Ie=j==null?void 0:j.notifications)==null?void 0:Ie.email)||!1,onCheckedChange:G=>k("notifications.email",G),"data-testid":"switch-email-notifications"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(L,{children:"Telegram уведомления"}),r.jsx(Ye,{checked:((ie=j==null?void 0:j.notifications)==null?void 0:ie.telegram)||!1,onCheckedChange:G=>k("notifications.telegram",G),"data-testid":"switch-telegram-notifications"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{children:"Порог уведомлений (событий в час)"}),r.jsx(ne,{type:"number",value:((st=j==null?void 0:j.notifications)==null?void 0:st.threshold)||10,onChange:G=>k("notifications.threshold",parseInt(G.target.value)),"data-testid":"input-notification-threshold"})]})]})]})]})}),r.jsx(He,{value:"reports",className:"space-y-6",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"📊 Генерация отчетов"})}),r.jsx(H,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(M,{onClick:()=>P("pdf"),className:"h-24 flex-col gap-2",variant:"outline","data-testid":"button-export-pdf",children:[r.jsx(vr,{className:"h-6 w-6"}),"📄 PDF Отчет"]}),r.jsxs(M,{onClick:()=>P("csv"),className:"h-24 flex-col gap-2",variant:"outline","data-testid":"button-export-csv",children:[r.jsx(pl,{className:"h-6 w-6"}),"📊 CSV Экспорт"]}),r.jsxs(M,{onClick:()=>P("json"),className:"h-24 flex-col gap-2",variant:"outline","data-testid":"button-export-json",children:[r.jsx(vr,{className:"h-6 w-6"}),"💾 JSON Данные"]})]})})]})})]}),r.jsx(jt,{open:!!o,onOpenChange:()=>c(null),children:r.jsxs(vt,{className:"max-w-2xl",children:[r.jsx(yt,{children:r.jsx(bt,{children:"Детали события фрода"})}),o&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Время"}),r.jsx("p",{children:new Date(o.timestamp).toLocaleString("ru-RU")})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Тип фрода"}),r.jsx(le,{className:v0[o.fraudType],children:Mp[o.fraudType]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Партнер"}),r.jsxs("p",{children:[o.partnerName," (ID: ",o.partnerId,")"]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Оффер"}),r.jsxs("p",{children:[o.offerName," (ID: ",o.offerId,")"]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"SubID"}),r.jsx("p",{children:o.subId})]}),r.jsxs("div",{children:[r.jsx(L,{children:"IP адрес"}),r.jsx("p",{className:"font-mono",children:o.ip})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Страна"}),r.jsx("p",{children:o.country})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Оценка риска"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(su,{value:o.riskScore,className:"w-20"}),r.jsxs("span",{children:[o.riskScore,"%"]})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"User Agent"}),r.jsx("p",{className:"text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded",children:o.userAgent})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Детали"}),r.jsx("p",{className:"text-sm",children:o.details})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Отпечаток браузера"}),r.jsx("p",{className:"text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded",children:o.fingerprint})]}),o.status==="pending"&&r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsxs(M,{onClick:()=>C(o.id,"confirmed"),variant:"destructive","data-testid":"button-confirm-fraud",children:[r.jsx(nr,{className:"h-4 w-4 mr-2"}),"Подтвердить фрод"]}),r.jsxs(M,{onClick:()=>C(o.id,"false_positive"),variant:"outline","data-testid":"button-false-positive-fraud",children:[r.jsx(zt,{className:"h-4 w-4 mr-2"}),"Ложное срабатывание"]})]})]})]})})]}):r.jsx("div",{children:"Загрузка..."})}function KVe(){const[e,t]=y.useState("tracking"),[n,s]=y.useState(""),[a,i]=y.useState({}),[l,o]=y.useState(new Set(["tracking"])),{toast:c}=lt(),{data:d,isLoading:u}=$e({queryKey:["/api/advertiser/documentation"],queryFn:async()=>{try{return await Te("/api/advertiser/documentation")}catch(b){return console.error("Failed to fetch documentation:",b),[]}}}),h=Ee({mutationFn:async b=>await Te(`/api/advertiser/documentation/${b.sectionId}/feedback`,"POST",b),onSuccess:(b,p)=>{c({title:"Отзыв отправлен",description:"Спасибо за ваш отзыв о документации!"}),i(N=>({...N,[p.sectionId]:{sectionId:p.sectionId,rating:0,comment:"",isHelpful:!1}}))},onError:()=>{c({title:"Ошибка",description:"Не удалось отправить отзыв",variant:"destructive"})}}),f=Ee({mutationFn:async()=>await Te("/api/advertiser/documentation/download-pdf","POST"),onSuccess:b=>{b.url&&window.open(b.url,"_blank"),c({title:"Загрузка начата",description:"PDF-версия документации будет загружена"})},onError:()=>{c({title:"Ошибка",description:"Не удалось загрузить PDF",variant:"destructive"})}}),x=(d||[{id:"tracking",title:"Трек-ссылки",icon:Xre,content:"Структура и использование трекинговых ссылок для отслеживания трафика",updated:"2025-08-06T12:00:00Z",examples:[{title:"Базовая трек-ссылка",code:"https://track.example.com/click?offer_id=123&partner_id=456&click_id={click_id}",language:"url",description:"Основная структура трек-ссылки с обязательными параметрами"},{title:"Ссылка с дополнительными параметрами",code:"https://track.example.com/click?offer_id=123&partner_id=456&click_id={click_id}&sub1={sub1}&sub2={sub2}&source=google",language:"url",description:"Трек-ссылка с дополнительными параметрами для детализации"}],subsections:[{id:"parameters",title:"Обязательные параметры",content:`
            • offer_id - идентификатор оффера
            • partner_id - идентификатор партнера  
            • click_id - уникальный идентификатор клика
          `},{id:"optional",title:"Дополнительные параметры",content:`
            • sub1, sub2, sub3, sub4, sub5 - пользовательские параметры
            • source - источник трафика
            • campaign - идентификатор кампании
          `}]},{id:"postbacks",title:"Постбэки",icon:nu,content:"Настройка и использование постбэков для получения уведомлений о конверсиях",updated:"2025-08-06T12:00:00Z",examples:[{title:"Базовый постбэк",code:"https://advertiser.com/postback?click_id={click_id}&status={status}&sum={sum}",language:"url",description:"Основной формат постбэка с базовыми макросами"},{title:"Расширенный постбэк",code:"https://advertiser.com/postback?click_id={click_id}&status={status}&sum={sum}&goal={goal}&partner_id={partner_id}&offer_id={offer_id}&timestamp={timestamp}",language:"url",description:"Постбэк с дополнительными данными"}],subsections:[{id:"macros",title:"Поддерживаемые макросы",content:`
            • {click_id} - ID клика
            • {status} - статус конверсии (approved, rejected, pending)
            • {sum} - сумма выплаты
            • {goal} - цель конверсии
            • {partner_id} - ID партнера
            • {offer_id} - ID оффера
            • {timestamp} - время конверсии
          `}]},{id:"api",title:"API-документация",icon:LR,content:"Полная документация по REST API для интеграции с платформой",updated:"2025-08-06T12:00:00Z",examples:[{title:"Авторизация",code:`curl -H "Authorization: Bearer YOUR_API_TOKEN" \\
  -H "Content-Type: application/json" \\
  https://api.platform.com/api/advertiser/stats`,language:"bash",description:"Пример авторизации с Bearer Token"},{title:"Получение статистики",code:`curl -X GET \\
  -H "Authorization: Bearer YOUR_API_TOKEN" \\
  "https://api.platform.com/api/advertiser/stats?from=2025-08-01&to=2025-08-06"`,language:"bash",description:"Получение статистики за период"}]},{id:"partners",title:"Работа с партнёрами",icon:ar,content:"Управление партнёрами, модерация заявок и настройка выплат",updated:"2025-08-06T12:00:00Z",subsections:[{id:"approval",title:"Одобрение партнёров",content:`
            1. Перейдите в раздел "Партнёры"
            2. Найдите заявку в статусе "На рассмотрении"
            3. Проверьте данные партнёра
            4. Нажмите "Одобрить" или "Отклонить"
          `}]},{id:"antifraud",title:"Антифрод-система",icon:Lt,content:"Настройка и мониторинг системы защиты от мошеннического трафика",updated:"2025-08-06T12:00:00Z",subsections:[{id:"metrics",title:"Отслеживаемые метрики",content:`
            • IP-адреса и географическое расположение
            • Частота кликов с одного устройства
            • Паттерны поведения пользователей
            • Качество трафика и конверсий
          `}]},{id:"domains",title:"Домены и HTTPS",icon:dr,content:"Настройка кастомных доменов и SSL-сертификатов",updated:"2025-08-06T12:00:00Z",examples:[{title:"CNAME запись",code:"track.yourdomain.com CNAME track.platform.com",language:"dns",description:"Пример настройки CNAME записи в DNS"}]},{id:"analytics",title:"Аналитика",icon:cr,content:"Интерпретация отчётов и ключевые метрики эффективности",updated:"2025-08-06T12:00:00Z",subsections:[{id:"metrics",title:"Ключевые метрики",content:`
            • CR (Conversion Rate) - коэффициент конверсии
            • EPC (Earnings Per Click) - доход с клика  
            • ROI (Return on Investment) - возврат инвестиций
            • CTR (Click Through Rate) - кликабельность
          `}]},{id:"finances",title:"Финансы и выплаты",icon:ox,content:"Управление балансом, настройка реквизитов и отчёты по выплатам",updated:"2025-08-06T12:00:00Z",subsections:[{id:"payouts",title:"Настройка выплат",content:`
            1. Перейдите в раздел "Финансы" 
            2. Добавьте реквизиты для выплат
            3. Установите минимальную сумму выплаты
            4. Выберите периодичность выплат
          `}]}]).filter(b=>b.title.toLowerCase().includes(n.toLowerCase())||b.content.toLowerCase().includes(n.toLowerCase())),w=async b=>{try{await navigator.clipboard.writeText(b),c({title:"Скопировано",description:"Код скопирован в буфер обмена"})}catch{c({title:"Ошибка",description:"Не удалось скопировать в буфер обмена",variant:"destructive"})}},j=b=>{const p=a[b];if(!p||p.rating===0){c({title:"Ошибка",description:"Пожалуйста, поставьте оценку",variant:"destructive"});return}h.mutate(p)},g=(b,p)=>{i(N=>({...N,[b]:{...N[b],sectionId:b,rating:0,comment:"",isHelpful:!1,...p}}))};return u?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(Cre,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Документация"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Полное руководство по использованию платформы"})]})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs(M,{onClick:()=>f.mutate(),disabled:f.isPending,variant:"outline",className:"flex items-center gap-2",children:[r.jsx(vr,{className:"w-4 h-4"}),f.isPending?"Загрузка...":"Скачать PDF"]})})]})}),r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"w-80 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 min-h-screen",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"relative mb-6",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск в документации...",value:n,onChange:b=>s(b.target.value),className:"pl-10","data-testid":"search-documentation"})]}),r.jsx("nav",{className:"space-y-1",children:x.map(b=>{const p=b.icon||Qn,N=e===b.id,k=l.has(b.id);return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>{t(b.id),o(k?C=>{const _=new Set(C);return _.delete(b.id),_}:C=>new Set(C).add(b.id))},className:`w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ${N?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,"data-testid":`nav-section-${b.id}`,children:[r.jsx(p,{className:"w-5 h-5"}),r.jsx("span",{className:"flex-1 font-medium",children:b.title}),b.subsections&&b.subsections.length>0&&r.jsx("div",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full",children:b.subsections.length})]}),k&&b.subsections&&r.jsx("div",{className:"ml-8 mt-1 space-y-1",children:b.subsections.map(C=>r.jsx("button",{onClick:()=>{const _=document.getElementById(`subsection-${C.id}`);_==null||_.scrollIntoView({behavior:"smooth"})},className:"w-full text-left p-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded","data-testid":`nav-subsection-${C.id}`,children:C.title},C.id))})]},b.id)})}),r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:r.jsxs(M,{variant:"outline",className:"w-full flex items-center gap-2",onClick:()=>{window.location.href="/advertiser/support"},"data-testid":"button-help-support",children:[r.jsx(Iv,{className:"w-4 h-4"}),"Нужна помощь?"]})})]})}),r.jsx("div",{className:"flex-1 p-6",children:x.length===0?r.jsx(W,{children:r.jsxs(H,{className:"p-8 text-center",children:[r.jsx(Xr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Ничего не найдено"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Попробуйте изменить поисковый запрос"})]})}):x.map(b=>{var N,k,C;if(b.id!==e)return null;const p=b.icon||Qn;return r.jsxs("div",{className:"space-y-6",children:[r.jsx(W,{children:r.jsx(se,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(p,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx(ae,{className:"text-2xl",children:b.title}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:b.content}),r.jsx("div",{className:"flex items-center gap-2 mt-2",children:r.jsxs(le,{variant:"outline",children:["Обновлено: ",new Date(b.updated).toLocaleDateString("ru-RU")]})})]})]})})}),b.examples&&b.examples.length>0&&r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(LR,{className:"w-5 h-5"}),"Примеры кода"]})}),r.jsx(H,{className:"space-y-4",children:b.examples.map((_,P)=>r.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 px-4 py-2 border-b flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:_.title}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:_.description})]}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>w(_.code),"data-testid":`copy-example-${P}`,children:r.jsx(Yr,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"p-4 bg-gray-900 text-gray-100 overflow-x-auto",children:r.jsx("code",{className:"text-sm font-mono whitespace-pre",children:_.code})})]},P))})]}),b.subsections&&b.subsections.map(_=>r.jsxs(W,{id:`subsection-${_.id}`,children:[r.jsx(se,{children:r.jsx(ae,{className:"text-xl",children:_.title})}),r.jsxs(H,{children:[r.jsx("div",{className:"prose dark:prose-invert max-w-none",children:r.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:_.content})}),_.examples&&_.examples.length>0&&r.jsxs("div",{className:"mt-6 space-y-4",children:[r.jsx("h4",{className:"font-semibold",children:"Примеры:"}),_.examples.map((P,D)=>r.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 px-4 py-2 border-b flex items-center justify-between",children:[r.jsx("span",{className:"font-medium",children:P.title}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>w(P.code),children:r.jsx(Yr,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"p-4 bg-gray-900 text-gray-100 overflow-x-auto",children:r.jsx("code",{className:"text-sm font-mono",children:P.code})})]},D))]})]})]},_.id)),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Hx,{className:"w-5 h-5"}),"Оценить раздел"]})}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Помогла ли вам эта документация?"}),r.jsxs("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(_=>{var P;return r.jsx("button",{onClick:()=>g(b.id,{rating:_}),className:`p-1 rounded ${(((P=a[b.id])==null?void 0:P.rating)||0)>=_?"text-yellow-500":"text-gray-300 hover:text-yellow-400"}`,"data-testid":`rating-${b.id}-${_}`,children:r.jsx(V2,{className:"w-5 h-5 fill-current"})},_)}),r.jsxs("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:[((N=a[b.id])==null?void 0:N.rating)||0,"/5"]})]})]}),r.jsx("div",{children:r.jsx(pt,{placeholder:"Оставьте комментарий или предложение...",value:((k=a[b.id])==null?void 0:k.comment)||"",onChange:_=>g(b.id,{comment:_.target.value}),className:"min-h-[100px]","data-testid":`feedback-comment-${b.id}`})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:`helpful-${b.id}`,checked:((C=a[b.id])==null?void 0:C.isHelpful)||!1,onChange:_=>g(b.id,{isHelpful:_.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","data-testid":`helpful-checkbox-${b.id}`}),r.jsx("label",{htmlFor:`helpful-${b.id}`,className:"text-sm text-gray-700 dark:text-gray-300",children:"Этот раздел был полезен"})]}),r.jsx(M,{onClick:()=>j(b.id),disabled:h.isPending,"data-testid":`submit-feedback-${b.id}`,children:h.isPending?"Отправка...":"Отправить отзыв"})]})]})]})]},b.id)})})]})]})}const GVe=[{value:"low",label:"Низкий",icon:qA,color:"text-blue-500"},{value:"medium",label:"Средний",icon:lr,color:"text-yellow-500"},{value:"high",label:"Высокий",icon:ma,color:"text-orange-500"},{value:"critical",label:"Критический",icon:ma,color:"text-red-500"}],YVe=[{value:"technical",label:"Техническая поддержка",icon:Iv},{value:"financial",label:"Финансовые вопросы",icon:Rt},{value:"offers",label:"Вопросы по офферам",icon:Kt},{value:"general",label:"Общие вопросы",icon:qA}];function XVe({isOpen:e,onClose:t}){const[n,s]=y.useState({subject:"",message:"",category:"",urgency:"medium",contactMethod:"email"}),{toast:a}=lt(),i=Et(),l=Ee({mutationFn:async u=>Te("/api/partner/support/tickets","POST",u),onSuccess:u=>{a({title:"Обращение отправлено",description:`Ваше обращение #${u.ticketNumber} получено. Менеджер свяжется с вами в течение 24 часов.`}),i.invalidateQueries({queryKey:["/api/partner/support/tickets"]}),o(),t()},onError:u=>{a({title:"Ошибка отправки",description:u.message||"Не удалось отправить обращение. Попробуйте позже.",variant:"destructive"})}}),o=()=>{s({subject:"",message:"",category:"",urgency:"medium",contactMethod:"email"})},c=u=>{if(u.preventDefault(),!n.subject.trim()||!n.message.trim()||!n.category){a({title:"Заполните все поля",description:"Пожалуйста, укажите тему, категорию и опишите ваш вопрос.",variant:"destructive"});return}l.mutate(n)},d=()=>{o(),t()};return r.jsx(jt,{open:e,onOpenChange:d,children:r.jsxs(vt,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[r.jsxs(yt,{children:[r.jsxs(bt,{className:"flex items-center gap-2",children:[r.jsx(qA,{className:"h-5 w-5 text-blue-500"}),"Связь с менеджером"]}),r.jsx(Ur,{children:"Создайте обращение к менеджеру. Мы ответим вам в течение указанного времени."})]}),r.jsxs("form",{onSubmit:c,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"category",children:"Категория обращения *"}),r.jsxs(he,{value:n.category,onValueChange:u=>s({...n,category:u}),children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите категорию"})}),r.jsx(ue,{children:YVe.map(u=>{const h=u.icon;return r.jsx(S,{value:u.value,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(h,{className:"h-4 w-4"}),u.label]})},u.value)})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"urgency",children:"Уровень срочности"}),r.jsxs(he,{value:n.urgency,onValueChange:u=>s({...n,urgency:u}),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsx(ue,{children:GVe.map(u=>{const h=u.icon;return r.jsx(S,{value:u.value,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(h,{className:`h-4 w-4 ${u.color}`}),u.label]})},u.value)})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"subject",children:"Тема обращения *"}),r.jsx(ne,{id:"subject",placeholder:"Кратко опишите суть вопроса",value:n.subject,onChange:u=>s({...n,subject:u.target.value}),maxLength:100}),r.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[n.subject.length,"/100"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"message",children:"Подробное описание *"}),r.jsx(pt,{id:"message",placeholder:"Опишите ваш вопрос подробно. Укажите ID офферов, суммы, даты и другие важные детали.",value:n.message,onChange:u=>s({...n,message:u.target.value}),rows:6,maxLength:1e3}),r.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[n.message.length,"/1000"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"contactMethod",children:"Предпочтительный способ связи"}),r.jsxs(he,{value:n.contactMethod,onValueChange:u=>s({...n,contactMethod:u}),children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"email",children:"Email (в течение 24 часов)"}),r.jsx(S,{value:"telegram",children:"Telegram (в течение 2-4 часов)"}),r.jsx(S,{value:"whatsapp",children:"WhatsApp (в течение 2-4 часов)"}),r.jsx(S,{value:"phone",children:"Телефонный звонок (в рабочее время)"})]})]})]}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(lr,{className:"h-5 w-5 text-blue-500 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Время ответа менеджера"}),r.jsxs("ul",{className:"text-xs text-blue-600 dark:text-blue-300 mt-1 space-y-1",children:[r.jsx("li",{children:"• Критические вопросы: до 2 часов"}),r.jsx("li",{children:"• Высокий приоритет: до 6 часов"}),r.jsx("li",{children:"• Обычные вопросы: до 24 часов"}),r.jsx("li",{children:"• Консультации: до 48 часов"})]})]})]})}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-end",children:[r.jsx(M,{type:"button",variant:"outline",onClick:d,className:"sm:w-auto",children:"Отменить"}),r.jsx(M,{type:"submit",disabled:l.isPending,className:"sm:w-auto bg-blue-600 hover:bg-blue-700",children:l.isPending?"Отправляем...":"Отправить обращение"})]})]})]})})}function _n({className:e,...t}){return r.jsx("div",{className:Ae("animate-pulse rounded-md bg-muted",e),...t})}const Ho=({title:e,value:t,change:n,changeType:s,icon:a,cardType:i})=>{const l=()=>{switch(s){case"positive":return"text-green-600 dark:text-green-400";case"negative":return"text-red-600 dark:text-red-400";default:return"text-muted-foreground"}},o=()=>s==="positive"?r.jsx(Cr,{className:"h-3 w-3"}):s==="negative"?r.jsx(KA,{className:"h-3 w-3"}):null,c=()=>i==="clicks"?"border-l-4 border-l-blue-500 bg-gradient-to-r from-blue-50 to-white dark:from-blue-950/20 dark:to-background":i==="conversions"?"border-l-4 border-l-green-500 bg-gradient-to-r from-green-50 to-white dark:from-green-950/20 dark:to-background":i==="revenue"?"border-l-4 border-l-amber-500 bg-gradient-to-r from-amber-50 to-white dark:from-amber-950/20 dark:to-background":i==="cr"?"border-l-4 border-l-purple-500 bg-gradient-to-r from-purple-50 to-white dark:from-purple-950/20 dark:to-background":i==="uniqueClicks"?"border-l-4 border-l-indigo-500 bg-gradient-to-r from-indigo-50 to-white dark:from-indigo-950/20 dark:to-background":i==="activeOffers"?"border-l-4 border-l-pink-500 bg-gradient-to-r from-pink-50 to-white dark:from-pink-950/20 dark:to-background":i==="status"?"border-l-4 border-l-emerald-500 bg-gradient-to-r from-emerald-50 to-white dark:from-emerald-950/20 dark:to-background":i==="epc"?"border-l-4 border-l-indigo-500 bg-gradient-to-r from-indigo-50 to-white dark:from-indigo-950/20 dark:to-background":"border-l-4 border-l-slate-500 bg-gradient-to-r from-slate-50 to-white dark:from-slate-950/20 dark:to-background",d=()=>i==="clicks"?"text-blue-700 dark:text-blue-300":i==="conversions"?"text-green-700 dark:text-green-300":i==="revenue"?"text-amber-700 dark:text-amber-300":i==="cr"?"text-purple-700 dark:text-purple-300":i==="uniqueClicks"?"text-indigo-700 dark:text-indigo-300":i==="activeOffers"?"text-pink-700 dark:text-pink-300":i==="status"?"text-emerald-700 dark:text-emerald-300":i==="epc"?"text-indigo-700 dark:text-indigo-300":"text-slate-700 dark:text-slate-300",u=()=>i==="clicks"?"text-blue-600 dark:text-blue-400":i==="conversions"?"text-green-600 dark:text-green-400":i==="revenue"?"text-amber-600 dark:text-amber-400":i==="cr"?"text-purple-600 dark:text-purple-400":i==="uniqueClicks"?"text-indigo-600 dark:text-indigo-400":i==="activeOffers"?"text-pink-600 dark:text-pink-400":i==="status"?"text-emerald-600 dark:text-emerald-400":i==="epc"?"text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400",h=()=>i==="clicks"?"text-blue-500":i==="conversions"?"text-green-500":i==="revenue"?"text-amber-500":i==="cr"?"text-purple-500":i==="uniqueClicks"?"text-indigo-500":i==="activeOffers"?"text-pink-500":i==="status"?"text-emerald-500":i==="epc"?"text-indigo-500":"text-slate-500";return r.jsxs(W,{className:c(),children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:`text-sm font-medium ${d()}`,children:e}),r.jsx(a,{className:`h-4 w-4 ${h()}`})]}),r.jsxs(H,{children:[r.jsx("div",{className:`text-2xl font-bold ${u()}`,children:t}),n&&r.jsxs("div",{className:`flex items-center gap-1 text-xs ${l()}`,children:[o(),r.jsx("span",{children:n})]})]})]})};function MF(){var b,p,N,k,C,_,P,D,E,$,A;const[e,t]=y.useState(0),[n,s]=y.useState(!1),a=Et(),{toast:i}=lt(),{t:l}=_r(),[o,c]=hs(),{data:d,isLoading:u,error:h}=$e({queryKey:["/api/partner/dashboard",e],staleTime:5*60*1e3}),{data:f=[]}=$e({queryKey:["/api/notifications"],staleTime:30*1e3}),m=()=>{t(T=>T+1),a.invalidateQueries({queryKey:["/api/partner/dashboard"]}),i({title:l("dashboard.dataUpdated"),description:l("dashboard.dataUpdatedDescription")})},v=()=>{c("/affiliate/offers"),i({title:l("dashboard.navigateToOffers"),description:l("dashboard.navigateToOffersDescription")})},x=()=>{c("/affiliate/statistics"),i({title:l("dashboard.navigateToStatistics"),description:l("dashboard.navigateToStatisticsDescription")})},w=()=>{s(!0)};if(u)return r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(_n,{className:"h-8 w-48"}),r.jsx(_n,{className:"h-4 w-64 mt-2"})]}),r.jsx(_n,{className:"h-9 w-24"})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:8}).map((T,O)=>r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(_n,{className:"h-4 w-24"})}),r.jsxs(H,{children:[r.jsx(_n,{className:"h-8 w-16 mb-2"}),r.jsx(_n,{className:"h-3 w-20"})]})]},O))})]});if(h)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(qa,{className:"h-12 w-12 text-red-500 mx-auto"}),r.jsx("h3",{className:"text-lg font-semibold",children:"Ошибка загрузки данных"}),r.jsx("p",{className:"text-muted-foreground",children:"Не удалось загрузить данные дашборда"}),r.jsxs(M,{onClick:m,variant:"outline",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Повторить"]})]})});const{metrics:j,topOffers:g}=d||{metrics:{totalClicks:0,conversions:0,revenue:0,conversionRate:0,epc:0,avgOfferPayout:0,activeOffers:0,pendingRequests:0},topOffers:[]};return r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight text-black dark:text-white",children:l("dashboard.title")}),r.jsx("p",{className:"text-black/70 dark:text-white/70",children:l("dashboard.subtitle")})]}),r.jsxs(M,{variant:"outline",onClick:m,className:"border-blue-500 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-950/20",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),l("common.refresh")]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsx(Ho,{title:l("dashboard.totalClicks"),value:((b=j.totalClicks)==null?void 0:b.toLocaleString())||"0",change:(p=d==null?void 0:d.metrics)!=null&&p.clicksGrowth?`${d.metrics.clicksGrowth>0?"+":""}${d.metrics.clicksGrowth.toFixed(1)}%`:void 0,changeType:((N=d==null?void 0:d.metrics)==null?void 0:N.clicksGrowth)>0?"positive":"negative",icon:Jc,cardType:"clicks"}),r.jsx(Ho,{title:l("dashboard.conversions"),value:((k=j.conversions)==null?void 0:k.toLocaleString())||"0",change:(C=d==null?void 0:d.metrics)!=null&&C.conversionsGrowth?`${d.metrics.conversionsGrowth>0?"+":""}${d.metrics.conversionsGrowth.toFixed(1)}%`:void 0,changeType:((_=d==null?void 0:d.metrics)==null?void 0:_.conversionsGrowth)>0?"positive":"negative",icon:Kt,cardType:"conversions"}),r.jsx(Ho,{title:l("dashboard.revenue"),value:`$${((P=j.revenue)==null?void 0:P.toLocaleString())||"0"}`,change:(D=d==null?void 0:d.metrics)!=null&&D.revenueGrowth?`${d.metrics.revenueGrowth>0?"+":""}${d.metrics.revenueGrowth.toFixed(1)}%`:void 0,changeType:((E=d==null?void 0:d.metrics)==null?void 0:E.revenueGrowth)>0?"positive":"negative",icon:Rt,cardType:"revenue"}),r.jsx(Ho,{title:l("dashboard.conversionRate"),value:`${(($=j.conversionRate)==null?void 0:$.toFixed(2))||"0"}%`,change:"-0.8%",changeType:"negative",icon:Cr,cardType:"cr"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsx(Ho,{title:l("dashboard.uniqueClicks"),value:`${Math.floor(j.totalClicks*.85||0).toLocaleString()}`,change:"+7.1%",changeType:"positive",icon:ar,cardType:"uniqueClicks"}),r.jsx(Ho,{title:l("dashboard.activeOffers"),value:`${j.activeOffers||"0"}`,changeType:"neutral",icon:Kt,cardType:"activeOffers"}),r.jsx(Ho,{title:l("dashboard.status"),value:l("dashboard.active"),icon:nr,cardType:"status"}),r.jsx(Ho,{title:l("dashboard.avgEPC"),value:`$${((A=j.epc)==null?void 0:A.toFixed(2))||"0"}`,icon:Rt,cardType:"epc"})]}),r.jsxs(W,{className:"border-l-4 border-l-cyan-500 bg-gradient-to-r from-cyan-50 to-white dark:from-cyan-950/20 dark:to-background",children:[r.jsx(se,{children:r.jsx(ae,{className:"text-cyan-700 dark:text-cyan-300",children:l("dashboard.quickActions")})}),r.jsx(H,{children:r.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[r.jsxs(M,{variant:"outline",className:"justify-start border-green-500 text-green-600 hover:bg-green-50 dark:hover:bg-green-950/20 shadow-md",onClick:v,title:l("dashboard.goToOffers"),children:[r.jsx(Kt,{className:"h-4 w-4 mr-2 text-green-500"}),l("dashboard.findNewOffers")]}),r.jsxs(M,{variant:"outline",className:"justify-start border-blue-500 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-950/20 shadow-md",onClick:x,title:l("dashboard.viewDetailedStats"),children:[r.jsx(Cr,{className:"h-4 w-4 mr-2 text-blue-500"}),l("dashboard.checkStatistics")]}),r.jsxs(M,{variant:"outline",className:"justify-start border-purple-500 text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-950/20 shadow-md",onClick:w,title:l("dashboard.contactManagerTitle"),children:[r.jsx(ar,{className:"h-4 w-4 mr-2 text-purple-500"}),l("dashboard.contactManager")]})]})})]}),r.jsxs(W,{className:"border-l-4 border-l-orange-500 bg-gradient-to-r from-orange-50 to-white dark:from-orange-950/20 dark:to-background",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-orange-700 dark:text-orange-300",children:"Последние уведомления"}),f&&f.length>0&&r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>c("/affiliate/notifications"),className:"text-orange-600 hover:text-orange-700 hover:bg-orange-100 dark:hover:bg-orange-950/20",title:"Посмотреть все уведомления",children:"Все уведомления"})]}),r.jsx(H,{children:r.jsx("div",{className:"space-y-3",children:f&&f.length>0?f.slice(0,3).map(T=>r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[r.jsx(Kt,{className:"h-4 w-4 text-blue-500 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:T.title}),r.jsx("p",{className:"text-sm text-muted-foreground",children:T.message}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(le,{variant:"secondary",children:T.type}),!T.is_read&&r.jsx(le,{variant:"destructive",className:"text-xs px-1 py-0",children:"новое"})]})]})})})]},T.id)):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(In,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Уведомлений нет"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Здесь будут отображаться важные уведомления о ваших запросах"})]})})})]}),r.jsx(XVe,{isOpen:n,onClose:()=>s(!1)})]})}function ZVe(){const{user:e}=Jt(),{t}=_r(),{toast:n}=lt(),s=Et(),{data:a,isLoading:i,error:l}=$e({queryKey:["/api/partner/profile"],enabled:!!(e!=null&&e.id)}),[o,c]=y.useState({firstName:"",lastName:"",email:"",phone:"",company:"",country:"",timezone:"UTC",currency:"USD",telegram:""});y.useEffect(()=>{a&&c({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",company:a.company||"",country:a.country||"",timezone:a.timezone||"UTC",currency:a.currency||"USD",telegram:a.telegram?a.telegram.replace(/^@/,""):""})},[a]);const d=(f,m)=>{c(v=>({...v,[f]:m}))},u=Ee({mutationFn:async f=>Te("/api/partner/profile","PATCH",f),onSuccess:f=>{n({title:"Профиль обновлён",description:"Ваши данные успешно сохранены.",variant:"default"}),s.invalidateQueries({queryKey:["/api/partner/profile"]}),s.invalidateQueries({queryKey:["/api/auth/me"]})},onError:f=>{n({title:"Ошибка сохранения",description:f.message||"Не удалось сохранить изменения.",variant:"destructive"})}}),h=()=>{if(o.firstName.trim()===""&&o.firstName.length>0){n({title:"Неверное значение имени",description:"Имя не может состоять только из пробелов.",variant:"destructive"});return}if(o.lastName.trim()===""&&o.lastName.length>0){n({title:"Неверное значение фамилии",description:"Фамилия не может состоять только из пробелов.",variant:"destructive"});return}if(o.email&&o.email!==(a==null?void 0:a.email)&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)){n({title:"Неверный формат email",description:"Пожалуйста, введите корректный email адрес.",variant:"destructive"});return}if(o.phone.trim()&&!/^[\+]?[\d\s\(\)\-]{7,20}$/.test(o.phone.trim())){n({title:"Неверный формат телефона",description:"Пожалуйста, введите корректный номер телефона.",variant:"destructive"});return}let f={...o};if(o.telegram.trim()){const m=o.telegram.trim().replace(/^@/,"");if(!/^[a-zA-Z0-9_]+$/.test(m)){n({title:"Неверный формат Telegram",description:"Telegram никнейм может содержать только буквы, цифры и подчеркивание.",variant:"destructive"});return}f.telegram="@"+m}u.mutate(f)};return i?r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(_n,{className:"h-9 w-64 mb-2"}),r.jsx(_n,{className:"h-4 w-96"})]}),r.jsx(_n,{className:"h-10 w-24"})]}),Array.from({length:3}).map((f,m)=>r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(_n,{className:"h-6 w-48"}),r.jsx(_n,{className:"h-4 w-80"})]}),r.jsx(H,{className:"space-y-4",children:Array.from({length:4}).map((v,x)=>r.jsx(_n,{className:"h-10 w-full"},x))})]},m))]})}):l?r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(Vt,{className:"h-12 w-12 text-red-500 mx-auto"}),r.jsx("h3",{className:"text-lg font-semibold",children:"Ошибка загрузки профиля"}),r.jsx("p",{className:"text-muted-foreground",children:"Не удалось загрузить данные профиля"}),r.jsx(M,{onClick:()=>s.invalidateQueries({queryKey:["/api/partner/profile"]}),children:"Повторить"})]})})})}):r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:t("profile.title")}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Управляйте своей личной информацией и настройками аккаунта"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[(a==null?void 0:a.partnerNumber)&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",r.jsx("span",{className:"font-mono",children:a.partnerNumber})]}),r.jsxs(M,{onClick:h,disabled:u.isPending||i,className:"flex items-center gap-2","data-testid":"button-save-profile",title:"Сохранить изменения в профиле",children:[r.jsx(Tl,{className:"h-4 w-4"}),u.isPending?"Сохранение...":"Сохранить"]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Ro,{className:"h-5 w-5"}),"Личная информация"]}),r.jsx(Je,{children:"Обновите свои личные данные и контактную информацию"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"firstName",children:"Имя"}),r.jsx(ne,{id:"firstName",value:o.firstName,onChange:f=>d("firstName",f.target.value),placeholder:"Введите ваше имя","data-testid":"input-firstName"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"lastName",children:"Фамилия"}),r.jsx(ne,{id:"lastName",value:o.lastName,onChange:f=>d("lastName",f.target.value),placeholder:"Введите вашу фамилию","data-testid":"input-lastName"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"email",children:"Email"}),r.jsxs("div",{className:"relative",children:[r.jsx(qw,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{id:"email",value:o.email,onChange:f=>d("email",f.target.value),placeholder:"email@example.com",className:"pl-10",disabled:!0,"data-testid":"input-email"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"phone",children:"Телефон"}),r.jsxs("div",{className:"relative",children:[r.jsx(nne,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{id:"phone",value:o.phone,onChange:f=>d("phone",f.target.value),placeholder:"+7 (999) 999-99-99",className:"pl-10","data-testid":"input-phone"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"company",children:"Компания"}),r.jsx(ne,{id:"company",value:o.company,onChange:f=>d("company",f.target.value),placeholder:"Название вашей компании","data-testid":"input-company"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"telegram",children:"Telegram"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-3 text-muted-foreground",children:"@"}),r.jsx(ne,{id:"telegram",value:o.telegram.startsWith("@")?o.telegram.slice(1):o.telegram,onChange:f=>{const m=f.target.value.replace(/^@/,"");d("telegram",m)},placeholder:"username",className:"pl-8","data-testid":"input-telegram"})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Ваш Telegram никнейм (без @)"})]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(dr,{className:"h-5 w-5"}),"Локализация и предпочтения"]}),r.jsx(Je,{children:"Настройте свои региональные предпочтения"})]}),r.jsx(H,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"country",children:"Страна"}),r.jsxs(he,{value:o.country,onValueChange:f=>d("country",f),children:[r.jsx(de,{"data-testid":"select-country",children:r.jsx(fe,{placeholder:"Выберите страну"})}),r.jsxs(ue,{className:"max-h-60 overflow-y-auto",children:[r.jsx(S,{value:"AF",children:"🇦🇫 Афганистан"}),r.jsx(S,{value:"AL",children:"🇦🇱 Албания"}),r.jsx(S,{value:"DZ",children:"🇩🇿 Алжир"}),r.jsx(S,{value:"AD",children:"🇦🇩 Андорра"}),r.jsx(S,{value:"AO",children:"🇦🇴 Ангола"}),r.jsx(S,{value:"AR",children:"🇦🇷 Аргентина"}),r.jsx(S,{value:"AM",children:"🇦🇲 Армения"}),r.jsx(S,{value:"AU",children:"🇦🇺 Австралия"}),r.jsx(S,{value:"AT",children:"🇦🇹 Австрия"}),r.jsx(S,{value:"AZ",children:"🇦🇿 Азербайджан"}),r.jsx(S,{value:"BD",children:"🇧🇩 Бангладеш"}),r.jsx(S,{value:"BB",children:"🇧🇧 Барбадос"}),r.jsx(S,{value:"BY",children:"🇧🇾 Беларусь"}),r.jsx(S,{value:"BE",children:"🇧🇪 Бельгия"}),r.jsx(S,{value:"BZ",children:"🇧🇿 Белиз"}),r.jsx(S,{value:"BJ",children:"🇧🇯 Бенин"}),r.jsx(S,{value:"BG",children:"🇧🇬 Болгария"}),r.jsx(S,{value:"BO",children:"🇧🇴 Боливия"}),r.jsx(S,{value:"BA",children:"🇧🇦 Босния и Герцеговина"}),r.jsx(S,{value:"BW",children:"🇧🇼 Ботсвана"}),r.jsx(S,{value:"BR",children:"🇧🇷 Бразилия"}),r.jsx(S,{value:"GB",children:"🇬🇧 Великобритания"}),r.jsx(S,{value:"HU",children:"🇭🇺 Венгрия"}),r.jsx(S,{value:"VE",children:"🇻🇪 Венесуэла"}),r.jsx(S,{value:"VN",children:"🇻🇳 Вьетнам"}),r.jsx(S,{value:"GA",children:"🇬🇦 Габон"}),r.jsx(S,{value:"GH",children:"🇬🇭 Гана"}),r.jsx(S,{value:"GT",children:"🇬🇹 Гватемала"}),r.jsx(S,{value:"GW",children:"🇬🇼 Гвинея-Бисау"}),r.jsx(S,{value:"GN",children:"🇬🇳 Гвинея"}),r.jsx(S,{value:"DE",children:"🇩🇪 Германия"}),r.jsx(S,{value:"GR",children:"🇬🇷 Греция"}),r.jsx(S,{value:"GE",children:"🇬🇪 Грузия"}),r.jsx(S,{value:"DK",children:"🇩🇰 Дания"}),r.jsx(S,{value:"EG",children:"🇪🇬 Египет"}),r.jsx(S,{value:"ZM",children:"🇿🇲 Замбия"}),r.jsx(S,{value:"ZW",children:"🇿🇼 Зимбабве"}),r.jsx(S,{value:"IL",children:"🇮🇱 Израиль"}),r.jsx(S,{value:"IN",children:"🇮🇳 Индия"}),r.jsx(S,{value:"ID",children:"🇮🇩 Индонезия"}),r.jsx(S,{value:"JO",children:"🇯🇴 Иордания"}),r.jsx(S,{value:"IQ",children:"🇮🇶 Ирак"}),r.jsx(S,{value:"IR",children:"🇮🇷 Иран"}),r.jsx(S,{value:"IE",children:"🇮🇪 Ирландия"}),r.jsx(S,{value:"IS",children:"🇮🇸 Исландия"}),r.jsx(S,{value:"ES",children:"🇪🇸 Испания"}),r.jsx(S,{value:"IT",children:"🇮🇹 Италия"}),r.jsx(S,{value:"YE",children:"🇾🇪 Йемен"}),r.jsx(S,{value:"KZ",children:"🇰🇿 Казахстан"}),r.jsx(S,{value:"KH",children:"🇰🇭 Камбоджа"}),r.jsx(S,{value:"CM",children:"🇨🇲 Камерун"}),r.jsx(S,{value:"CA",children:"🇨🇦 Канада"}),r.jsx(S,{value:"QA",children:"🇶🇦 Катар"}),r.jsx(S,{value:"KE",children:"🇰🇪 Кения"}),r.jsx(S,{value:"CY",children:"🇨🇾 Кипр"}),r.jsx(S,{value:"KG",children:"🇰🇬 Киргизия"}),r.jsx(S,{value:"CN",children:"🇨🇳 Китай"}),r.jsx(S,{value:"CO",children:"🇨🇴 Колумбия"}),r.jsx(S,{value:"CR",children:"🇨🇷 Коста-Рика"}),r.jsx(S,{value:"CU",children:"🇨🇺 Куба"}),r.jsx(S,{value:"KW",children:"🇰🇼 Кувейт"}),r.jsx(S,{value:"LV",children:"🇱🇻 Латвия"}),r.jsx(S,{value:"LS",children:"🇱🇸 Лесото"}),r.jsx(S,{value:"LR",children:"🇱🇷 Либерия"}),r.jsx(S,{value:"LB",children:"🇱🇧 Ливан"}),r.jsx(S,{value:"LY",children:"🇱🇾 Ливия"}),r.jsx(S,{value:"LT",children:"🇱🇹 Литва"}),r.jsx(S,{value:"LU",children:"🇱🇺 Люксембург"}),r.jsx(S,{value:"MU",children:"🇲🇺 Маврикий"}),r.jsx(S,{value:"MG",children:"🇲🇬 Мадагаскар"}),r.jsx(S,{value:"MK",children:"🇲🇰 Македония"}),r.jsx(S,{value:"MW",children:"🇲🇼 Малави"}),r.jsx(S,{value:"MY",children:"🇲🇾 Малайзия"}),r.jsx(S,{value:"ML",children:"🇲🇱 Мали"}),r.jsx(S,{value:"MT",children:"🇲🇹 Мальта"}),r.jsx(S,{value:"MA",children:"🇲🇦 Марокко"}),r.jsx(S,{value:"MX",children:"🇲🇽 Мексика"}),r.jsx(S,{value:"MZ",children:"🇲🇿 Мозамбик"}),r.jsx(S,{value:"MD",children:"🇲🇩 Молдова"}),r.jsx(S,{value:"MN",children:"🇲🇳 Монголия"}),r.jsx(S,{value:"MM",children:"🇲🇲 Мьянма"}),r.jsx(S,{value:"NA",children:"🇳🇦 Намибия"}),r.jsx(S,{value:"NP",children:"🇳🇵 Непал"}),r.jsx(S,{value:"NE",children:"🇳🇪 Нигер"}),r.jsx(S,{value:"NG",children:"🇳🇬 Нигерия"}),r.jsx(S,{value:"NL",children:"🇳🇱 Нидерланды"}),r.jsx(S,{value:"NZ",children:"🇳🇿 Новая Зеландия"}),r.jsx(S,{value:"NO",children:"🇳🇴 Норвегия"}),r.jsx(S,{value:"AE",children:"🇦🇪 ОАЭ"}),r.jsx(S,{value:"OM",children:"🇴🇲 Оман"}),r.jsx(S,{value:"PK",children:"🇵🇰 Пакистан"}),r.jsx(S,{value:"PA",children:"🇵🇦 Панама"}),r.jsx(S,{value:"PY",children:"🇵🇾 Парагвай"}),r.jsx(S,{value:"PE",children:"🇵🇪 Перу"}),r.jsx(S,{value:"PL",children:"🇵🇱 Польша"}),r.jsx(S,{value:"PT",children:"🇵🇹 Португалия"}),r.jsx(S,{value:"RU",children:"🇷🇺 Россия"}),r.jsx(S,{value:"RW",children:"🇷🇼 Руанда"}),r.jsx(S,{value:"RO",children:"🇷🇴 Румыния"}),r.jsx(S,{value:"SV",children:"🇸🇻 Сальвадор"}),r.jsx(S,{value:"SA",children:"🇸🇦 Саудовская Аравия"}),r.jsx(S,{value:"SZ",children:"🇸🇿 Свазиленд"}),r.jsx(S,{value:"SG",children:"🇸🇬 Сингапур"}),r.jsx(S,{value:"SY",children:"🇸🇾 Сирия"}),r.jsx(S,{value:"SK",children:"🇸🇰 Словакия"}),r.jsx(S,{value:"SI",children:"🇸🇮 Словения"}),r.jsx(S,{value:"US",children:"🇺🇸 США"}),r.jsx(S,{value:"TJ",children:"🇹🇯 Таджикистан"}),r.jsx(S,{value:"TH",children:"🇹🇭 Таиланд"}),r.jsx(S,{value:"TZ",children:"🇹🇿 Танзания"}),r.jsx(S,{value:"TN",children:"🇹🇳 Тунис"}),r.jsx(S,{value:"TM",children:"🇹🇲 Туркменистан"}),r.jsx(S,{value:"TR",children:"🇹🇷 Турция"}),r.jsx(S,{value:"UG",children:"🇺🇬 Уганда"}),r.jsx(S,{value:"UZ",children:"🇺🇿 Узбекистан"}),r.jsx(S,{value:"UA",children:"🇺🇦 Украина"}),r.jsx(S,{value:"UY",children:"🇺🇾 Уругвай"}),r.jsx(S,{value:"PH",children:"🇵🇭 Филиппины"}),r.jsx(S,{value:"FI",children:"🇫🇮 Финляндия"}),r.jsx(S,{value:"FR",children:"🇫🇷 Франция"}),r.jsx(S,{value:"HR",children:"🇭🇷 Хорватия"}),r.jsx(S,{value:"TD",children:"🇹🇩 Чад"}),r.jsx(S,{value:"CZ",children:"🇨🇿 Чехия"}),r.jsx(S,{value:"CL",children:"🇨🇱 Чили"}),r.jsx(S,{value:"CH",children:"🇨🇭 Швейцария"}),r.jsx(S,{value:"SE",children:"🇸🇪 Швеция"}),r.jsx(S,{value:"LK",children:"🇱🇰 Шри-Ланка"}),r.jsx(S,{value:"EC",children:"🇪🇨 Эквадор"}),r.jsx(S,{value:"EE",children:"🇪🇪 Эстония"}),r.jsx(S,{value:"ET",children:"🇪🇹 Эфиопия"}),r.jsx(S,{value:"ZA",children:"🇿🇦 ЮАР"}),r.jsx(S,{value:"KR",children:"🇰🇷 Южная Корея"}),r.jsx(S,{value:"JM",children:"🇯🇲 Ямайка"}),r.jsx(S,{value:"JP",children:"🇯🇵 Япония"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"timezone",children:"Часовой пояс"}),r.jsxs(he,{value:o.timezone,onValueChange:f=>d("timezone",f),children:[r.jsx(de,{"data-testid":"select-timezone",children:r.jsx(fe,{placeholder:"Выберите часовой пояс"})}),r.jsxs(ue,{className:"max-h-60 overflow-y-auto",children:[r.jsx(S,{value:"UTC",children:"UTC+0 (Универсальное время)"}),r.jsx(S,{value:"Europe/London",children:"UTC+0 (Лондон, Дублин)"}),r.jsx(S,{value:"Europe/Berlin",children:"UTC+1 (Берлин, Рим, Париж)"}),r.jsx(S,{value:"Europe/Helsinki",children:"UTC+2 (Хельсинки, Киев)"}),r.jsx(S,{value:"Europe/Moscow",children:"UTC+3 (Москва, Минск)"}),r.jsx(S,{value:"Europe/Samara",children:"UTC+4 (Самара)"}),r.jsx(S,{value:"Asia/Yekaterinburg",children:"UTC+5 (Екатеринбург)"}),r.jsx(S,{value:"Asia/Omsk",children:"UTC+6 (Омск)"}),r.jsx(S,{value:"Asia/Krasnoyarsk",children:"UTC+7 (Красноярск)"}),r.jsx(S,{value:"Asia/Irkutsk",children:"UTC+8 (Иркутск)"}),r.jsx(S,{value:"Asia/Yakutsk",children:"UTC+9 (Якутск)"}),r.jsx(S,{value:"Asia/Vladivostok",children:"UTC+10 (Владивосток)"}),r.jsx(S,{value:"Asia/Magadan",children:"UTC+11 (Магадан)"}),r.jsx(S,{value:"Asia/Kamchatka",children:"UTC+12 (Камчатка)"}),r.jsx(S,{value:"America/Los_Angeles",children:"UTC-8 (Лос-Анджелес, Сан-Франциско)"}),r.jsx(S,{value:"America/Denver",children:"UTC-7 (Денвер, Солт-Лейк-Сити)"}),r.jsx(S,{value:"America/Chicago",children:"UTC-6 (Чикаго, Даллас)"}),r.jsx(S,{value:"America/New_York",children:"UTC-5 (Нью-Йорк, Вашингтон)"}),r.jsx(S,{value:"America/Halifax",children:"UTC-4 (Галифакс)"}),r.jsx(S,{value:"America/St_Johns",children:"UTC-3:30 (Сент-Джонс)"}),r.jsx(S,{value:"America/Sao_Paulo",children:"UTC-3 (Сан-Паулу, Буэнос-Айрес)"}),r.jsx(S,{value:"America/Noronha",children:"UTC-2 (Фернанду-ди-Норонья)"}),r.jsx(S,{value:"America/Scoresbysund",children:"UTC-1 (Азорские острова)"}),r.jsx(S,{value:"Asia/Dubai",children:"UTC+4 (Дубай, Баку)"}),r.jsx(S,{value:"Asia/Karachi",children:"UTC+5 (Карачи, Ташкент)"}),r.jsx(S,{value:"Asia/Kolkata",children:"UTC+5:30 (Дели, Мумбаи)"}),r.jsx(S,{value:"Asia/Kathmandu",children:"UTC+5:45 (Катманду)"}),r.jsx(S,{value:"Asia/Dhaka",children:"UTC+6 (Дакка, Алма-Ата)"}),r.jsx(S,{value:"Asia/Yangon",children:"UTC+6:30 (Янгон)"}),r.jsx(S,{value:"Asia/Bangkok",children:"UTC+7 (Бангкок, Джакарта)"}),r.jsx(S,{value:"Asia/Shanghai",children:"UTC+8 (Пекин, Сингапур)"}),r.jsx(S,{value:"Asia/Tokyo",children:"UTC+9 (Токио, Сеул)"}),r.jsx(S,{value:"Australia/Adelaide",children:"UTC+9:30 (Аделаида)"}),r.jsx(S,{value:"Australia/Sydney",children:"UTC+10 (Сидней, Мельбурн)"}),r.jsx(S,{value:"Pacific/Norfolk",children:"UTC+11 (Норфолк)"}),r.jsx(S,{value:"Pacific/Auckland",children:"UTC+12 (Окленд)"}),r.jsx(S,{value:"Pacific/Chatham",children:"UTC+12:45 (Чатем)"}),r.jsx(S,{value:"Pacific/Tongatapu",children:"UTC+13 (Нукуалофа)"}),r.jsx(S,{value:"Pacific/Kiritimati",children:"UTC+14 (Киритимати)"}),r.jsx(S,{value:"Africa/Casablanca",children:"UTC+0 (Касабланка)"}),r.jsx(S,{value:"Africa/Lagos",children:"UTC+1 (Лагос, Алжир)"}),r.jsx(S,{value:"Africa/Cairo",children:"UTC+2 (Каир, Йоханнесбург)"}),r.jsx(S,{value:"Africa/Nairobi",children:"UTC+3 (Найроби, Аддис-Абеба)"}),r.jsx(S,{value:"Pacific/Honolulu",children:"UTC-10 (Гонолулу)"}),r.jsx(S,{value:"Pacific/Marquesas",children:"UTC-9:30 (Маркизские острова)"}),r.jsx(S,{value:"Pacific/Gambier",children:"UTC-9 (Гамбье)"}),r.jsx(S,{value:"Pacific/Pitcairn",children:"UTC-8 (Питкэрн)"}),r.jsx(S,{value:"Pacific/Easter",children:"UTC-6 (Остров Пасхи)"}),r.jsx(S,{value:"Atlantic/Cape_Verde",children:"UTC-1 (Кабо-Верде)"}),r.jsx(S,{value:"Atlantic/Azores",children:"UTC-1 (Азорские острова)"}),r.jsx(S,{value:"Atlantic/Reykjavik",children:"UTC+0 (Рейкьявик)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"currency",children:"Валюта"}),r.jsxs(he,{value:o.currency,onValueChange:f=>d("currency",f),children:[r.jsx(de,{"data-testid":"select-currency",children:r.jsx(fe,{placeholder:"Выберите валюту"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"USD",children:"USD ($)"}),r.jsx(S,{value:"EUR",children:"EUR (€)"}),r.jsx(S,{value:"RUB",children:"RUB (₽)"}),r.jsx(S,{value:"GBP",children:"GBP (£)"})]})]})]})]})})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Статус аккаунта"}),r.jsx(Je,{children:"Информация о состоянии вашего аккаунта"})]}),r.jsx(H,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Статус верификации"}),r.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:"В ожидании"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Статус аккаунта"}),r.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Активен"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Дата регистрации"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:a!=null&&a.createdAt?new Date(a.createdAt).toLocaleDateString("ru-RU"):"Неизвестно"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Последний вход"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:a!=null&&a.lastLoginAt?new Date(a.lastLoginAt).toLocaleDateString("ru-RU"):"Неизвестно"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Номер партнёра"}),r.jsxs("span",{className:"text-sm font-mono text-blue-600 dark:text-blue-400",children:["#",(a==null?void 0:a.partnerNumber)||"Не присвоен"]})]})]})]})})]})]})})}function QVe(){Jt();const{t:e,i18n:t}=_r(),n=t.language,s=O=>t.changeLanguage(O),{theme:a,setTheme:i}=h9(),{toast:l}=lt(),o=Et(),[c,d]=y.useState(!1),[u,h]=y.useState(!1),{data:f,isLoading:m}=$e({queryKey:["/api/partner/profile"],queryFn:async()=>await Te("/api/partner/profile","GET")}),[v,x]=y.useState({emailOffers:!0,emailPayments:!0,emailNews:!1,pushOffers:!0,pushPayments:!0,pushNews:!1}),[w,j]=y.useState({twoFactorEnabled:!1,loginNotifications:!0,sessionTimeout:"24",ipRestrictions:""}),[g,b]=y.useState({currentPassword:"",newPassword:"",confirmPassword:""});y.useEffect(()=>{f&&j(O=>({...O,twoFactorEnabled:f.twoFactorEnabled||!1,sessionTimeout:f.sessionTimeout||"24",ipRestrictions:f.ipRestrictions||""}))},[f]);const p=(O,z)=>{x(F=>({...F,[O]:z}))},N=(O,z)=>{j(F=>({...F,[O]:z}))},k=(O,z)=>{b(F=>({...F,[O]:z}))},C=Ee({mutationFn:async O=>Te("/api/partner/profile","PATCH",O),onSuccess:()=>{l({title:"Настройки сохранены",description:"Ваши настройки успешно обновлены.",variant:"default"}),o.invalidateQueries({queryKey:["/api/partner/profile"]}),o.invalidateQueries({queryKey:["/api/auth/me"]})},onError:O=>{l({title:"Ошибка",description:O.message||"Не удалось сохранить настройки.",variant:"destructive"})}}),_=()=>{const O={language:n,timezone:(f==null?void 0:f.timezone)||"Europe/Moscow"};C.mutate(O)},P=Ee({mutationFn:async O=>Te("/api/partner/profile/change-password","POST",O),onSuccess:()=>{l({title:"Пароль обновлён",description:"Ваш пароль успешно изменён.",variant:"default"}),b({currentPassword:"",newPassword:"",confirmPassword:""})},onError:O=>{l({title:"Ошибка смены пароля",description:O.message||"Неверный текущий пароль или ошибка сервера.",variant:"destructive"})}}),D=Ee({mutationFn:async O=>Te("/api/partner/profile","PATCH",O),onSuccess:()=>{l({title:"Настройки безопасности сохранены",description:"Параметры безопасности обновлены.",variant:"default"}),o.invalidateQueries({queryKey:["/api/partner/profile"]})},onError:O=>{l({title:"Ошибка",description:O.message||"Не удалось сохранить настройки безопасности.",variant:"destructive"})}}),E=Ee({mutationFn:async O=>Te("/api/partner/profile","PATCH",{settings:O}),onSuccess:()=>{l({title:"Настройки уведомлений сохранены",description:"Предпочтения уведомлений обновлены.",variant:"default"}),o.invalidateQueries({queryKey:["/api/partner/profile"]})},onError:O=>{l({title:"Ошибка",description:O.message||"Не удалось сохранить настройки уведомлений.",variant:"destructive"})}}),$=()=>{if(!g.currentPassword||!g.newPassword){l({title:"Заполните все поля",description:"Введите текущий и новый пароль.",variant:"destructive"});return}if(g.newPassword.length<6){l({title:"Слабый пароль",description:"Пароль должен содержать не менее 6 символов.",variant:"destructive"});return}if(g.newPassword!==g.confirmPassword){l({title:"Ошибка",description:"Пароли не совпадают.",variant:"destructive"});return}P.mutate({currentPassword:g.currentPassword,newPassword:g.newPassword})},A=()=>{D.mutate({twoFactorEnabled:w.twoFactorEnabled,sessionTimeout:w.sessionTimeout,ipRestrictions:w.ipRestrictions})},T=()=>{E.mutate(v)};return r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:e("settings.title")}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Управляйте настройками аккаунта и предпочтениями"})]})}),r.jsxs(Zr,{defaultValue:"general",className:"w-full",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-4",children:[r.jsx(We,{value:"general",children:"Общие"}),r.jsx(We,{value:"notifications",children:"Уведомления"}),r.jsx(We,{value:"security",children:"Безопасность"}),r.jsx(We,{value:"account",children:"Аккаунт"})]}),r.jsx(He,{value:"general",className:"space-y-6",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(dr,{className:"h-5 w-5"}),"Локализация и внешний вид"]}),r.jsx(Je,{children:"Настройте язык интерфейса и тему оформления"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"language",children:"Язык интерфейса"}),r.jsxs(he,{value:n,onValueChange:s,children:[r.jsx(de,{"data-testid":"select-language",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"ru",children:"🇷🇺 Русский"}),r.jsx(S,{value:"en",children:"🇺🇸 English"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"theme",children:"Тема оформления"}),r.jsxs(he,{value:a,onValueChange:i,children:[r.jsx(de,{"data-testid":"select-theme",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"light",children:"Светлая"}),r.jsx(S,{value:"dark",children:"Тёмная"})]})]})]})]}),r.jsxs(M,{onClick:_,disabled:C.isPending,"data-testid":"button-save-general",title:"Сохранить общие настройки",children:[r.jsx(Tl,{className:"h-4 w-4 mr-2"}),C.isPending?"Сохранение...":"Сохранить изменения"]})]})]})}),r.jsxs(He,{value:"notifications",className:"space-y-6",children:[r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(In,{className:"h-5 w-5"}),"Уведомления по Email"]}),r.jsx(Je,{children:"Управляйте получением уведомлений на электронную почту"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(L,{htmlFor:"emailOffers",children:"Новые офферы"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Уведомления о новых доступных офферах"})]}),r.jsx(Ye,{id:"emailOffers",checked:v.emailOffers,onCheckedChange:O=>p("emailOffers",O),"data-testid":"switch-email-offers"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(L,{htmlFor:"emailPayments",children:"Выплаты"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Уведомления о выплатах и транзакциях"})]}),r.jsx(Ye,{id:"emailPayments",checked:v.emailPayments,onCheckedChange:O=>p("emailPayments",O),"data-testid":"switch-email-payments"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(L,{htmlFor:"emailNews",children:"Новости и обновления"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Информация о новых функциях и изменениях"})]}),r.jsx(Ye,{id:"emailNews",checked:v.emailNews,onCheckedChange:O=>p("emailNews",O),"data-testid":"switch-email-news"})]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Push-уведомления"}),r.jsx(Je,{children:"Настройте push-уведомления в браузере"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(L,{htmlFor:"pushOffers",children:"Новые офферы"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Мгновенные уведомления о новых офферах"})]}),r.jsx(Ye,{id:"pushOffers",checked:v.pushOffers,onCheckedChange:O=>p("pushOffers",O),"data-testid":"switch-push-offers"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(L,{htmlFor:"pushPayments",children:"Выплаты"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Уведомления о статусе выплат"})]}),r.jsx(Ye,{id:"pushPayments",checked:v.pushPayments,onCheckedChange:O=>p("pushPayments",O),"data-testid":"switch-push-payments"})]}),r.jsxs(M,{onClick:T,disabled:E.isPending,"data-testid":"button-save-notifications",title:"Сохранить настройки уведомлений",children:[r.jsx(Tl,{className:"h-4 w-4 mr-2"}),E.isPending?"Сохранение...":"Сохранить настройки"]})]})]})]}),r.jsxs(He,{value:"security",className:"space-y-6",children:[r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Lt,{className:"h-5 w-5"}),"Безопасность аккаунта"]}),r.jsx(Je,{children:"Настройте параметры безопасности вашего аккаунта"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(L,{htmlFor:"twoFactor",children:"Двухфакторная аутентификация"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Дополнительная защита вашего аккаунта"})]}),r.jsx(Ye,{id:"twoFactor",checked:w.twoFactorEnabled,onCheckedChange:O=>N("twoFactorEnabled",O),"data-testid":"switch-two-factor"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(L,{htmlFor:"loginNotifications",children:"Уведомления о входе"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Получать уведомления о новых входах в аккаунт"})]}),r.jsx(Ye,{id:"loginNotifications",checked:w.loginNotifications,onCheckedChange:O=>N("loginNotifications",O),"data-testid":"switch-login-notifications"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"sessionTimeout",children:"Тайм-аут сессии (часы)"}),r.jsxs(he,{value:w.sessionTimeout,onValueChange:O=>N("sessionTimeout",O),children:[r.jsx(de,{"data-testid":"select-session-timeout",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"1",children:"1 час"}),r.jsx(S,{value:"8",children:"8 часов"}),r.jsx(S,{value:"24",children:"24 часа"}),r.jsx(S,{value:"168",children:"7 дней"})]})]})]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Изменение пароля"}),r.jsx(Je,{children:"Обновите пароль для вашего аккаунта"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"currentPassword",children:"Текущий пароль"}),r.jsxs("div",{className:"relative",children:[r.jsx(ne,{id:"currentPassword",type:c?"text":"password",value:g.currentPassword,onChange:O=>k("currentPassword",O.target.value),"data-testid":"input-current-password"}),r.jsx(M,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!c),children:c?r.jsx(U2,{className:"h-4 w-4"}):r.jsx(hr,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"newPassword",children:"Новый пароль"}),r.jsxs("div",{className:"relative",children:[r.jsx(ne,{id:"newPassword",type:u?"text":"password",value:g.newPassword,onChange:O=>k("newPassword",O.target.value),"data-testid":"input-new-password"}),r.jsx(M,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!u),children:u?r.jsx(U2,{className:"h-4 w-4"}):r.jsx(hr,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"confirmPassword",children:"Подтвердите новый пароль"}),r.jsx(ne,{id:"confirmPassword",type:"password",value:g.confirmPassword,onChange:O=>k("confirmPassword",O.target.value),"data-testid":"input-confirm-password"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(M,{onClick:$,disabled:P.isPending,"data-testid":"button-update-password",title:"Обновить пароль",children:[r.jsx(VA,{className:"h-4 w-4 mr-2"}),P.isPending?"Обновление...":"Обновить пароль"]}),r.jsxs(M,{onClick:A,disabled:D.isPending,variant:"outline","data-testid":"button-save-security",title:"Сохранить настройки безопасности",children:[r.jsx(Lt,{className:"h-4 w-4 mr-2"}),D.isPending?"Сохранение...":"Сохранить безопасность"]})]})]})]})]}),r.jsx(He,{value:"account",className:"space-y-6",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Управление аккаунтом"}),r.jsx(Je,{children:"Опции для управления вашим аккаунтом"})]}),r.jsx(H,{className:"space-y-4",children:r.jsx("div",{className:"rounded-lg border border-destructive/20 bg-destructive/5 p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(wr,{className:"h-5 w-5 text-destructive mt-0.5"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"font-semibold text-destructive",children:"Удаление аккаунта"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Удаление аккаунта приведёт к безвозвратной потере всех данных, статистики и настроек. Это действие нельзя отменить."}),r.jsxs(M,{variant:"destructive",size:"sm","data-testid":"button-delete-account",title:"Удалить аккаунт безвозвратно",onClick:()=>{l({title:"Функция недоступна",description:"Для удаления аккаунта свяжитесь с администрацией.",variant:"default"})},children:[r.jsx(wr,{className:"h-4 w-4 mr-2"}),"Удалить аккаунт"]})]})]})})})]})})]})]})})}function JVe(){const[e,t]=y.useState(""),[n,s]=y.useState("all"),[a,i]=y.useState(null),[l,o]=y.useState(!1),[c,d]=y.useState(""),[u,h]=y.useState("approve"),{toast:f}=lt(),m=Et(),{data:v=[],isLoading:x}=$e({queryKey:["/api/advertiser/access-requests"],staleTime:0});console.log("Access requests data:",v);const w=Ee({mutationFn:async k=>await Te(`/api/advertiser/access-requests/${k.requestId}/respond`,"POST",{action:k.action,message:k.message}),onSuccess:(k,C)=>{f({title:C.action==="approve"?"Запрос одобрен":"Запрос отклонен",description:C.action==="approve"?"Партнер получил доступ к офферу":"Запрос был отклонен",variant:"default"}),m.invalidateQueries({queryKey:["/api/advertiser/access-requests"]}),o(!1),i(null),d("")},onError:k=>{f({title:"Ошибка",description:k.message||"Не удалось обработать запрос",variant:"destructive"})}}),j=y.useMemo(()=>v.filter(k=>{const C=k.offerName.toLowerCase().includes(e.toLowerCase())||k.partnerUsername.toLowerCase().includes(e.toLowerCase())||k.partnerEmail.toLowerCase().includes(e.toLowerCase())||k.partnerName.toLowerCase().includes(e.toLowerCase()),_=n==="all"||k.status===n;return C&&_}),[v,e,n]),g=(k,C)=>{i(k),h(C),o(!0)},b=()=>{a&&w.mutate({requestId:a.id,action:u,message:c.trim()||void 0})},p=k=>{switch(k){case"pending":return{className:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:lr,label:"Ожидает"};case"approved":return{className:"bg-green-100 text-green-800 border-green-200",icon:nr,label:"Одобрено"};case"rejected":return{className:"bg-red-100 text-red-800 border-red-200",icon:zt,label:"Отклонено"};default:return{className:"bg-gray-100 text-gray-800 border-gray-200",icon:lr,label:k}}},N=k=>{const C=new Date(k),P=new Date().getTime()-C.getTime(),D=Math.floor(P/(1e3*60*60*24));return D===0?`Сегодня в ${C.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`:D===1?`Вчера в ${C.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`:C.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return x?r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-muted border-t-primary"}),r.jsx("p",{children:"Загрузка запросов доступа..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Запросы доступа"}),r.jsx("p",{className:"text-muted-foreground",children:"Управление запросами партнеров на доступ к офферам"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:v.filter(k=>k.status==="pending").length}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Ожидают"})]})}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.filter(k=>k.status==="approved").length}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Одобрено"})]})}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:v.filter(k=>k.status==="rejected").length}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Отклонено"})]})})]})]}),r.jsx(W,{children:r.jsx(H,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(ne,{placeholder:"Поиск по офферу, партнеру, email или компании...",value:e,onChange:k=>t(k.target.value),className:"pl-10","data-testid":"input-search-requests"})]}),r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsxs(M,{variant:"outline",className:"gap-2","data-testid":"button-filter-status",children:[r.jsx(Ks,{className:"h-4 w-4"}),n==="all"?"Все статусы":n==="pending"?"Ожидают":n==="approved"?"Одобрено":"Отклонено"]})}),r.jsxs(Ps,{children:[r.jsx(Ft,{onClick:()=>s("all"),children:"Все статусы"}),r.jsx(Ft,{onClick:()=>s("pending"),children:"Ожидают"}),r.jsx(Ft,{onClick:()=>s("approved"),children:"Одобрено"}),r.jsx(Ft,{onClick:()=>s("rejected"),children:"Отклонено"})]})]})]})})}),r.jsx(W,{children:r.jsx(H,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Оффер"}),r.jsx(J,{children:"Партнер"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Дата запроса"}),r.jsx(J,{children:"Сообщение"}),r.jsx(J,{className:"text-right",children:"Действия"})]})}),r.jsx($t,{children:j.length===0?r.jsx(Re,{children:r.jsx(q,{colSpan:6,className:"text-center py-8",children:r.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[r.jsx(Kt,{className:"h-8 w-8"}),r.jsx("p",{children:"Запросы не найдены"})]})})}):j.map(k=>{const C=p(k.status),_=C.icon;return r.jsxs(Re,{className:"hover:bg-gray-50/50",children:[r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Hj,{name:k.offerName,logo:k.offerLogo,size:"md",showTooltip:!0}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:k.offerName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[k.offerPayout," ",k.offerCurrency]})]})]})}),r.jsx(q,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:k.partnerUsername}),r.jsx("div",{className:"text-sm text-muted-foreground",children:k.partnerName||k.partnerEmail})]})}),r.jsx(q,{children:r.jsxs(le,{variant:"outline",className:C.className,children:[r.jsx(_,{className:"w-3 h-3 mr-1"}),C.label]})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Ls,{className:"w-4 h-4 text-muted-foreground"}),N(k.requestedAt||k.createdAt)]})}),r.jsx(q,{children:k.requestNote?r.jsx("div",{className:"max-w-xs truncate text-sm",title:k.requestNote,children:k.requestNote}):r.jsx("span",{className:"text-muted-foreground text-sm",children:"Без сообщения"})}),r.jsx(q,{className:"text-right",children:r.jsx("div",{className:"flex items-center justify-end gap-2",children:k.status==="pending"?r.jsxs(r.Fragment,{children:[r.jsx(M,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>g(k,"approve"),"data-testid":`button-approve-${k.id}`,title:"Одобрить запрос",children:r.jsx(fn,{className:"h-4 w-4"})}),r.jsx(M,{size:"sm",variant:"destructive",onClick:()=>g(k,"reject"),"data-testid":`button-reject-${k.id}`,title:"Отклонить запрос",children:r.jsx(Tn,{className:"h-4 w-4"})})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[k.approvedAt&&r.jsx("span",{className:"text-xs text-muted-foreground",children:N(k.approvedAt)}),r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsx(M,{variant:"ghost",size:"sm","data-testid":`button-menu-${k.id}`,children:r.jsx(Wx,{className:"h-4 w-4"})})}),r.jsx(Ps,{align:"end",children:k.status==="approved"?r.jsxs(Ft,{onClick:()=>g(k,"reject"),className:"text-red-600 focus:text-red-600",children:[r.jsx($f,{className:"h-4 w-4 mr-2"}),"Отозвать доступ"]}):k.status==="rejected"?r.jsxs(Ft,{onClick:()=>g(k,"approve"),className:"text-green-600 focus:text-green-600",children:[r.jsx(Mi,{className:"h-4 w-4 mr-2"}),"Одобрить"]}):null})]})]})})})]},k.id)})})]})})})}),r.jsx(jt,{open:l,onOpenChange:o,children:r.jsxs(vt,{className:"sm:max-w-md",children:[r.jsx(yt,{children:r.jsx(bt,{children:u==="approve"?"Одобрить запрос":"Отклонить запрос"})}),r.jsxs("div",{className:"space-y-4",children:[a&&r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded bg-gray-200 flex items-center justify-center",children:r.jsx(Kt,{className:"w-4 h-4 text-gray-500"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:a.offerName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Запрос от ",a.partnerUsername]})]})]}),a.message&&r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Сообщение партнера:"}),r.jsx("div",{className:"text-sm text-gray-600",children:a.message})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Ответное сообщение (необязательно)"}),r.jsx(pt,{value:c,onChange:k=>d(k.target.value),placeholder:u==="approve"?"Добро пожаловать! Желаем успешного трафика...":"К сожалению, ваш запрос не может быть одобрен...",rows:3,"data-testid":"textarea-response-message"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsxs(M,{onClick:b,disabled:w.isPending,className:u==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700","data-testid":"button-submit-response",children:[w.isPending?r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-muted border-t-primary mr-2"}):u==="approve"?r.jsx(Mi,{className:"h-4 w-4 mr-2"}):r.jsx($f,{className:"h-4 w-4 mr-2"}),u==="approve"?"Одобрить":"Отклонить"]}),r.jsx(M,{variant:"outline",onClick:()=>{o(!1),d("")},"data-testid":"button-cancel-response",children:"Отмена"})]})]})]})})]})}function eqe(){const{user:e}=Jt(),{toast:t}=lt();_r();const n=Et(),{data:s=[],isLoading:a}=$e({queryKey:["/api/notifications"],enabled:!!(e!=null&&e.id)}),i=()=>{const m=localStorage.getItem("auth_token");return m&&m!=="null"&&m!=="undefined"&&m.trim()!==""?m:null},l=Ee({mutationKey:["markAsRead"],mutationFn:async m=>{const v=i();if(!v)throw new Error("Authentication required - please re-login");const x=await fetch(`/api/notifications/${m}/read`,{method:"PUT",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(!x.ok)throw new Error(`Failed to mark as read: ${x.status}`);return x.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notifications"]}),t({title:"✅ Успешно",description:"Уведомление отмечено как прочитанное",variant:"default"})},onError:m=>{console.error("❌ Ошибка отметки как прочитанное:",m),t({title:"❌ Ошибка",description:m.message||"Не удалось отметить уведомление",variant:"destructive"})}}),o=Ee({mutationKey:["deleteNotification"],mutationFn:async m=>{const v=i();if(!v)throw new Error("Authentication required - please re-login");const x=await fetch(`/api/notifications/${m}`,{method:"DELETE",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(!x.ok)throw new Error(`Failed to delete: ${x.status}`);return x.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notifications"]}),t({title:"✅ Удалено",description:"Уведомление успешно удалено",variant:"default"})},onError:m=>{console.error("❌ Ошибка удаления:",m),t({title:"❌ Ошибка",description:m.message||"Не удалось удалить уведомление",variant:"destructive"})}}),c=Ee({mutationKey:["markAllAsRead"],mutationFn:async()=>{const m=i();if(!m)throw new Error("Authentication required - please re-login");const v=await fetch("/api/notifications/mark-all-read",{method:"PUT",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(!v.ok)throw new Error(`Failed to mark all as read: ${v.status}`);return v.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notifications"]}),t({title:"✅ Выполнено",description:"Все уведомления отмечены как прочитанные",variant:"default"})}}),d=m=>{const v="h-4 w-4";switch(m){case"offer_request_approved":return r.jsx(oo,{className:`${v} text-green-500`});case"offer_request_rejected":return r.jsx(zt,{className:`${v} text-red-500`});case"offer_request_created":return r.jsx(lr,{className:`${v} text-blue-500`});case"payment":return r.jsx(oo,{className:`${v} text-green-500`});case"partner_joined":return r.jsx(oo,{className:`${v} text-blue-500`});case"offer_paused":return r.jsx(ma,{className:`${v} text-orange-500`});case"antifraud_alert":return r.jsx(zt,{className:`${v} text-red-500`});default:return r.jsx(In,{className:`${v} text-gray-500`})}},u=m=>{switch(m){case"offer_request_approved":case"payment":case"partner_joined":return"default";case"offer_request_rejected":case"antifraud_alert":return"destructive";case"offer_request_created":return"secondary";default:return"outline"}},h=m=>{switch(m){case"offer_request_approved":return"Заявка одобрена";case"offer_request_rejected":return"Заявка отклонена";case"offer_request_created":return"Новая заявка";case"payment":return"Платеж";case"partner_joined":return"Новый партнер";case"offer_paused":return"Оффер приостановлен";case"antifraud_alert":return"Антифрод";case"general":return"Общее";default:return"Уведомление"}},f=s.filter(m=>!m.is_read).length;return a?r.jsx("div",{className:"container mx-auto p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-lg text-muted-foreground",children:"Загрузка уведомлений..."})})}):r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(In,{className:"h-8 w-8 text-primary"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Уведомления"}),r.jsx("p",{className:"text-muted-foreground",children:"Системные уведомления и оповещения"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[f>0&&r.jsxs(le,{variant:"destructive",className:"px-3 py-1",children:[f," непрочитанных"]}),r.jsxs(M,{onClick:()=>c.mutate(),disabled:c.isPending||f===0,variant:"outline",size:"sm",title:"Отметить все как прочитанные",children:[r.jsx(Rre,{className:"h-4 w-4 mr-2"}),"Отметить все"]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(In,{className:"h-5 w-5"}),"Все уведомления (",s.length,")"]})}),r.jsx(H,{children:s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(In,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-lg text-muted-foreground",children:"Уведомлений пока нет"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Здесь будут отображаться системные оповещения"})]}):r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{className:"w-[50px]",children:"Статус"}),r.jsx(J,{className:"w-[120px]",children:"Тип"}),r.jsx(J,{children:"Сообщение"}),r.jsx(J,{className:"w-[150px]",children:"Дата"}),r.jsx(J,{className:"w-[120px]",children:"Действия"})]})}),r.jsx($t,{children:s.map(m=>r.jsxs(Re,{className:`transition-colors ${m.is_read?"bg-gray-50/30 dark:bg-gray-800/20 hover:bg-gray-50/50 dark:hover:bg-gray-800/30":"bg-blue-50/80 dark:bg-blue-950/30 border-l-4 border-l-blue-500"}`,children:[r.jsx(q,{children:r.jsxs("div",{className:"flex items-center justify-center",children:[!m.is_read&&r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),d(m.type)]})}),r.jsx(q,{children:r.jsx(le,{variant:u(m.type),className:`text-xs ${m.is_read?"":"ring-2 ring-blue-200"}`,children:h(m.type)})}),r.jsx(q,{children:r.jsxs("div",{className:`${m.is_read?"text-gray-600 dark:text-gray-300":"font-semibold text-gray-900 dark:text-white"}`,children:[r.jsx("div",{className:`${m.is_read?"font-medium":"font-bold"}`,children:m.title}),r.jsx("div",{className:`text-sm mt-1 ${m.is_read?"text-muted-foreground":"text-gray-700 dark:text-gray-200"}`,children:m.message}),m.metadata&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[m.metadata.offerName&&r.jsxs("span",{children:["Оффер: ",m.metadata.offerName]}),m.metadata.partnerName&&r.jsxs("span",{children:["Партнер: ",m.metadata.partnerName]}),m.metadata.amount&&r.jsxs("span",{children:["Сумма: ",m.metadata.amount," ",m.metadata.currency]})]})]})}),r.jsx(q,{children:r.jsx("div",{className:`text-sm ${m.is_read?"text-muted-foreground":"text-gray-600 dark:text-gray-300 font-medium"}`,children:Xx(new Date(m.created_at),{addSuffix:!0,locale:gl})})}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[m.is_read?r.jsxs(le,{variant:"secondary",className:"text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[r.jsx(oo,{className:"h-3 w-3 mr-1"}),"Прочитано"]}):r.jsxs(M,{onClick:()=>l.mutate(m.id),disabled:l.isPending,variant:"outline",size:"sm",className:"bg-blue-500 hover:bg-blue-600 text-white border-blue-500 hover:border-blue-600",title:"Отметить как прочитанное",children:[r.jsx(fn,{className:"h-4 w-4 mr-1"}),"Прочитано"]}),r.jsx(M,{onClick:()=>o.mutate(m.id),disabled:o.isPending,variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",title:"Удалить уведомление",children:r.jsx(wr,{className:"h-4 w-4"})})]})})]},m.id))})]})})]})]})}const tqe=()=>{const{user:e}=Jt(),[t,n]=y.useState(!1),{toast:s}=lt(),{data:a,isLoading:i}=$e({queryKey:["/api/partner/referral-stats"],enabled:!!e&&e.role==="affiliate"}),l=()=>{if(a!=null&&a.referral_code){const d=`${window.location.origin}/register?ref=${a.referral_code}`;navigator.clipboard.writeText(d),n(!0),s({title:"Ссылка скопирована!",description:"Реферальная ссылка скопирована в буфер обмена"}),setTimeout(()=>n(!1),2e3)}},o=()=>{if(a!=null&&a.referral_code&&typeof navigator<"u"&&navigator.share){const d=`${window.location.origin}/register?ref=${a.referral_code}`;navigator.share({title:"Приглашаю стать рекламодателем",text:"Регистрируйтесь по моей ссылке и получите отличные условия для рекламы!",url:d})}};if(i)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(!a)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[r.jsx(ar,{className:"h-12 w-12 text-gray-400"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Реферальная программа недоступна"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Обратитесь к администратору для активации реферальной программы"})]});const c=a.program_enabled!==!1;return r.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Реферальная программа"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Приглашайте рекламодателей и получайте 5% с их выплат партнерам"})]}),!c&&r.jsx(le,{variant:"destructive",children:"Программа приостановлена"})]}),r.jsxs(Zr,{defaultValue:"overview",className:"space-y-6",children:[r.jsxs(Vr,{children:[r.jsx(We,{value:"overview",children:"Настройки"}),r.jsx(We,{value:"statistics",children:"Статистика"})]}),r.jsxs(He,{value:"overview",className:"space-y-6",children:[!c&&r.jsx(W,{className:"border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-900/20",children:r.jsxs(se,{children:[r.jsx(ae,{className:"text-orange-800 dark:text-orange-200",children:"Программа временно приостановлена"}),r.jsx(Je,{className:"text-orange-700 dark:text-orange-300",children:"Ваш рекламодатель временно отключил реферальную программу. Новые приглашения недоступны до возобновления программы."})]})}),c&&r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Vw,{className:"h-5 w-5"}),"Ваша реферальная ссылка"]}),r.jsx(Je,{children:"Поделитесь этой ссылкой с потенциальными рекламодателями"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ne,{value:`${window.location.origin}/register?ref=${a.referral_code}`,readOnly:!0,className:"font-mono","data-testid":"input-referral-link"}),r.jsx(M,{onClick:l,variant:"outline",size:"icon",title:"Копировать ссылку","data-testid":"button-copy-link",children:t?r.jsx(nr,{className:"h-4 w-4"}):r.jsx(Yr,{className:"h-4 w-4"})}),r.jsx(M,{onClick:o,variant:"outline",size:"icon",title:"Поделиться ссылкой","data-testid":"button-share-link",children:r.jsx(ane,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(L,{htmlFor:"referral-code",children:"Ваш реферальный код:"}),r.jsx(le,{variant:"secondary",className:"font-mono",children:a.referral_code})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Приглашено"}),r.jsx(ar,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold",children:a.total_referrals}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.active_referrals," активных"]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Заработано"}),r.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[a.total_earned," USD"]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",a.pending_amount," USD ожидает"]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Всего транзакций"}),r.jsx(Cr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold",children:a.total_transactions})})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Статус"}),r.jsx(kre,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold",children:c?r.jsx(le,{variant:"default",className:"text-xs",children:"Активна"}):r.jsx(le,{variant:"destructive",className:"text-xs",children:"Приостановлена"})})})]})]})]}),r.jsxs(He,{value:"statistics",className:"space-y-6",children:[r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Приглашенные рекламодатели"}),r.jsx(Je,{children:"Список всех рекламодателей, зарегистрированных по вашей ссылке"})]}),r.jsx(H,{children:a.referred_advertisers&&a.referred_advertisers.length>0?r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Рекламодатель"}),r.jsx(J,{children:"Дата регистрации"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Заработано"})]})}),r.jsx($t,{children:a.referred_advertisers.map(d=>r.jsxs(Re,{children:[r.jsx(q,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:d.username}),r.jsx("div",{className:"text-sm text-muted-foreground",children:d.email})]})}),r.jsx(q,{children:new Date(d.createdAt).toLocaleDateString("ru-RU")}),r.jsx(q,{children:r.jsx(le,{variant:d.isActive?"default":"secondary",children:d.isActive?"Активен":"Неактивен"})}),r.jsxs(q,{children:[d.totalCommissions," USD"]})]},d.id))})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ar,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Нет приглашенных рекламодателей"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Поделитесь своей реферальной ссылкой для привлечения рекламодателей"})]})})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"История комиссий"}),r.jsx(Je,{children:"Детальная история всех полученных комиссий"})]}),r.jsx(H,{children:a.commission_history&&a.commission_history.length>0?r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Дата"}),r.jsx(J,{children:"Сумма"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Рекламодатель"})]})}),r.jsx($t,{children:a.commission_history.map(d=>r.jsxs(Re,{children:[r.jsx(q,{children:new Date(d.createdAt).toLocaleDateString("ru-RU")}),r.jsxs(q,{children:[d.amount," USD"]}),r.jsx(q,{children:r.jsx(le,{variant:d.status==="paid"?"default":"secondary",children:d.status==="paid"?"Выплачено":"Ожидает"})}),r.jsx(q,{children:d.referredUser?d.referredUser.username:"Н/Д"})]},d.id))})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(lr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Нет комиссий"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Комиссии появятся после выплат приглашенным партнерам"})]})})]})]})]})]})};function rqe(){var o,c;const[e,t]=y.useState(!0),{toast:n}=lt(),s=Et(),{data:a,isLoading:i}=$e({queryKey:["/api/advertiser/referral-stats"]});Z.useEffect(()=>{(a==null?void 0:a.programEnabled)!==void 0&&t(a.programEnabled)},[a==null?void 0:a.programEnabled]);const l=Ee({mutationFn:d=>Te("/api/advertiser/referral-program/toggle","POST",{enabled:d}),onSuccess:d=>{t(d.enabled),s.invalidateQueries({queryKey:["/api/advertiser/referral-stats"]}),n({title:d.enabled?"Программа включена":"Программа отключена",description:d.enabled?"Партнеры теперь могут приглашать новых партнеров":"Реферальная программа временно приостановлена"})},onError:()=>{n({title:"Ошибка",description:"Не удалось изменить статус программы",variant:"destructive"})}});return i?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Реферальная программа"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Управление реферальной программой для партнеров"})]})}),r.jsxs(Zr,{defaultValue:"program",className:"space-y-6",children:[r.jsxs(Vr,{children:[r.jsx(We,{value:"program",children:"Настройки программы"}),r.jsx(We,{value:"statistics",children:"Детальная статистика"})]}),r.jsxs(He,{value:"program",className:"space-y-6",children:[r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"h-5 w-5"}),"Настройки программы"]}),r.jsx(Je,{children:"Включите или отключите реферальную программу для ваших партнеров"})]}),r.jsxs(H,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(L,{htmlFor:"referral-program",children:"Реферальная программа"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Партнеры получают 5% комиссии с выплат приглашенным партнерам"})]}),r.jsx(Ye,{id:"referral-program",checked:e,onCheckedChange:d=>l.mutate(d),disabled:l.isPending,"data-testid":"switch-referral-program"})]}),r.jsx(wn,{}),r.jsx("div",{className:"text-sm text-muted-foreground",children:e?"✅ Программа активна — партнеры могут приглашать новых участников":"⏸️ Программа приостановлена — новые приглашения недоступны"})]})]}),a&&r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Всего партнеров"}),r.jsx(ar,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold",children:a.referredPartners.length}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Активных: ",a.referredPartners.filter(d=>d.referrerInfo).length]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Выплачено комиссий"}),r.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:["$",a.commissionStats.paidCommissions]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["В ожидании: $",a.commissionStats.pendingCommissions]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Всего комиссий"}),r.jsx(Cr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold",children:a.commissionStats.totalTransactions}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"За все время"})]})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Ставка комиссии"}),r.jsx(Si,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"5%"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"С каждой выплаты"})]})]})]}),(a==null?void 0:a.referredPartners)&&a.referredPartners.length>0&&r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Приглашенные партнеры"}),r.jsx(Je,{children:"Список всех партнеров, приглашенных в вашу программу"})]}),r.jsx(H,{children:r.jsx("div",{className:"space-y-3",children:a.referredPartners.map(d=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:d.username}),r.jsx("p",{className:"text-sm text-muted-foreground",children:d.email})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(le,{variant:d.referrerInfo?"default":"secondary",children:d.referrerInfo?"Приглашен партнером":"Прямая регистрация"}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Код: ",d.referralCode||"Нет"]})]})]},d.id))})})]}),!e&&r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{className:"text-muted-foreground",children:"Реферальная программа отключена"}),r.jsx(Je,{children:"Включите программу, чтобы партнеры могли приглашать новых партнеров и получать комиссию"})]}),r.jsx(H,{children:r.jsxs(M,{onClick:()=>l.mutate(!0),disabled:l.isPending,"data-testid":"button-enable-referral",children:[r.jsx(Si,{className:"h-4 w-4 mr-2"}),"Включить реферальную программу"]})})]})]}),r.jsx(He,{value:"statistics",className:"space-y-6",children:a?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Всего выплачено"}),r.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",a.commissionStats.paidCommissions]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["От ",a.commissionStats.totalTransactions," транзакций"]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"К выплате"}),r.jsx(Cr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",a.commissionStats.pendingCommissions]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Ожидает выплаты"})]})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Приглашенных партнеров"}),r.jsx(ar,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.referredPartners.length}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Приглашенных: ",a.referredPartners.filter(d=>d.referrerInfo).length]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:"Средняя комиссия"}),r.jsx(Si,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["$",a.commissionStats.totalTransactions>0?(parseFloat(a.commissionStats.paidCommissions)/a.commissionStats.totalTransactions).toFixed(2):"0.00"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"За транзакцию"})]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Приглашенные партнеры"}),r.jsx(Je,{children:"Список всех партнеров, которых вы пригласили в систему"})]}),r.jsx(H,{children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Партнер"}),r.jsx(J,{children:"Email"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Реферальный код"}),r.jsx(J,{children:"Дата регистрации"})]})}),r.jsxs($t,{children:[(o=a.referredPartners)==null?void 0:o.map(d=>r.jsxs(Re,{children:[r.jsx(q,{className:"font-medium",children:d.username}),r.jsx(q,{children:d.email}),r.jsx(q,{children:r.jsx(le,{variant:d.referrerInfo?"default":"secondary",children:d.referrerInfo?"Приглашен":"Прямо"})}),r.jsx(q,{className:"text-green-600 font-semibold",children:d.referralCode||"Нет кода"}),r.jsx(q,{children:new Date(d.createdAt).toLocaleDateString("ru-RU")})]},d.id)),(!a.referredPartners||a.referredPartners.length===0)&&r.jsx(Re,{children:r.jsx(q,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"Пока нет приглашенных партнеров"})})]})]})})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"История комиссий"}),r.jsx(Je,{children:"Все комиссионные выплаты от ваших приглашенных партнеров"})]}),r.jsx(H,{children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Партнер"}),r.jsx(J,{children:"Сумма"}),r.jsx(J,{children:"Исходная сумма"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Дата"})]})}),r.jsxs($t,{children:[(c=a.commissionHistory)==null?void 0:c.map(d=>r.jsxs(Re,{children:[r.jsx(q,{className:"font-medium",children:d.referrer.username||"Неизвестно"}),r.jsxs(q,{className:"text-green-600 font-semibold",children:["$",d.amount]}),r.jsxs(q,{children:["$",d.originalAmount]}),r.jsx(q,{children:r.jsx(le,{variant:d.status==="paid"?"default":"secondary",children:d.status==="paid"?"Выплачено":"Ожидает"})}),r.jsx(q,{children:new Date(d.createdAt).toLocaleDateString("ru-RU")})]},d.id)),(!a.commissionHistory||a.commissionHistory.length===0)&&r.jsx(Re,{children:r.jsx(q,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"Пока нет комиссионных выплат"})})]})]})})]})]}):r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]})]})}const nqe=e=>[{title:e("navigation.dashboard"),href:"/affiliate",icon:zw},{title:e("navigation.statistics"),href:"/affiliate/statistics",icon:cr},{title:e("navigation.offers"),href:"/affiliate/offers",icon:Kt},{title:e("navigation.accessRequests"),href:"/affiliate/access-requests",icon:Is},{title:e("navigation.team"),href:"/affiliate/team",icon:ar},{title:"Рефералы",href:"/affiliate/referrals",icon:Si},{title:e("navigation.finances"),href:"/affiliate/finances",icon:Rt},{title:e("navigation.postbacks"),href:"/affiliate/postbacks",icon:fr},{title:e("navigation.profile"),href:"/affiliate/profile",icon:Ro},{title:e("navigation.settings"),href:"/affiliate/settings",icon:Lre}];function sqe({className:e}){const{t}=_r(),[n]=hs(),[s,a]=y.useState(!1),{user:i,logout:l}=Jt(),{data:o=[]}=$e({queryKey:["/api/partner/offers"],enabled:!!i}),{data:c=[]}=$e({queryKey:["/api/notifications"],enabled:!!i}),u=nqe(t).map(f=>f.href==="/affiliate/offers"?{...f,badge:o.length>0?o.length:void 0,badgeVariant:"secondary"}:f),h=()=>{l()};return r.jsxs("div",{className:Ae("flex flex-col h-screen bg-card border-r transition-all duration-300",s?"w-16":"w-64",e),children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[!s&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"P"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-lg font-bold text-black dark:text-white",children:t("navigation.partner","Партнер")}),r.jsx("span",{className:"text-xs text-black/60 dark:text-white/60",children:i==null?void 0:i.username})]})]}),r.jsx(M,{variant:"ghost",size:"icon",onClick:()=>a(!s),className:"h-8 w-8",children:s?r.jsx(Qc,{className:"h-4 w-4"}):r.jsx(Ri,{className:"h-4 w-4"})})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-2",children:u.map(f=>{const m=n===f.href||f.href!=="/affiliate"&&n.startsWith(f.href);return r.jsxs(cl,{href:f.href,className:Ae("flex items-center gap-3 px-3 py-2 rounded-lg font-medium transition-colors hover:bg-accent hover:text-accent-foreground",m?"bg-primary text-primary-foreground":"text-black dark:text-white"),title:s?f.title:void 0,children:[r.jsx(f.icon,{className:"h-4 w-4 flex-shrink-0"}),!s&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"flex-1",children:f.title}),f.badge&&r.jsx(le,{variant:f.badgeVariant||"default",className:"text-xs",children:f.badge})]})]},f.href)})}),r.jsxs("div",{className:"p-4 border-t space-y-2",children:[r.jsxs(cl,{href:"/affiliate/notifications",className:Ae("flex items-center gap-3 px-3 py-2 rounded-lg font-medium transition-colors hover:bg-accent hover:text-accent-foreground text-black dark:text-white",n==="/affiliate/notifications"&&"bg-primary text-primary-foreground"),title:s?t("navigation.notifications"):void 0,children:[r.jsx(In,{className:"h-4 w-4 flex-shrink-0"}),!s&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"flex-1",children:t("navigation.notifications")}),c.filter(f=>!f.is_read).length>0&&r.jsx(le,{variant:"destructive",className:"text-xs",children:c.filter(f=>!f.is_read).length})]})]}),r.jsxs("div",{className:Ae("flex items-center gap-3 px-3 py-2",s&&"justify-center"),children:[!s&&r.jsx("span",{className:"font-medium text-black dark:text-white",children:t("common.theme")}),r.jsx(Hv,{})]}),r.jsxs(M,{variant:"ghost",onClick:h,className:Ae("w-full justify-start gap-3 text-black dark:text-white hover:text-destructive hover:bg-destructive/10",s&&"px-3"),title:s?t("navigation.logout"):void 0,children:[r.jsx(Fv,{className:"h-4 w-4 flex-shrink-0"}),!s&&r.jsx("span",{children:t("navigation.logout")})]})]})]})}function aqe(){const{i18n:e,t}=_r(),n=s=>{e.changeLanguage(s)};return r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsxs(M,{variant:"outline",size:"icon",title:t("language.select","Select language"),children:[r.jsx(Kre,{className:"h-[1.2rem] w-[1.2rem]"}),r.jsx("span",{className:"sr-only",children:"Change language"})]})}),r.jsxs(Ps,{align:"end",children:[r.jsxs(Ft,{onClick:()=>n("ru"),children:[r.jsx("span",{className:"mr-2",children:"🇷🇺"}),t("language.russian")]}),r.jsxs(Ft,{onClick:()=>n("en"),children:[r.jsx("span",{className:"mr-2",children:"🇺🇸"}),t("language.english")]})]})]})}function iqe(){const{user:e,logout:t}=Jt(),{t:n,i18n:s}=_r(),{data:a,isLoading:i}=$e({queryKey:["/api/partner/finance/summary"],enabled:!!e&&e.role==="affiliate",refetchInterval:3e4}),l=()=>{t()},o=()=>{window.location.href="/affiliate/settings"},c=()=>{window.location.href="/affiliate/profile"};if(!e)return null;const d=e.firstName&&e.lastName?`${e.firstName[0]}${e.lastName[0]}`:e.username[0].toUpperCase();return r.jsx("header",{className:"border-b bg-card dark:bg-card",children:r.jsxs("div",{className:"flex h-16 items-center justify-between px-6",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("h2",{className:"text-lg font-semibold text-foreground",children:n("navigation.dashboard")})}),r.jsxs("div",{className:"flex items-center space-x-3",children:[e.role==="affiliate"&&r.jsxs("div",{className:"hidden md:flex items-center space-x-3",children:[r.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 px-3 py-1.5 rounded-lg border border-green-200 dark:border-green-700 shadow-sm hover:shadow-md transition-shadow duration-200 cursor-pointer",title:n("finances.currentBalance"),children:[r.jsx(Rt,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),i?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-16 h-5 bg-green-200 dark:bg-green-700 rounded animate-pulse"}),r.jsx("span",{className:"text-xs text-green-600/80 dark:text-green-400/80 font-medium",children:n("common.loading")})]}):r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:["$",a?a.balance.toFixed(2):"0.00"]}),r.jsx("span",{className:"text-xs text-green-600/80 dark:text-green-400/80 font-medium",children:s.language==="ru"?"Баланс":"Balance"})]})]}),a&&a.pendingPayouts>0&&r.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/30 dark:to-amber-900/30 px-3 py-1.5 rounded-lg border border-orange-200 dark:border-orange-700 shadow-sm hover:shadow-md transition-shadow duration-200 cursor-pointer",title:n("finances.pendingPayouts"),children:[r.jsx("svg",{className:"h-4 w-4 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("span",{className:"font-bold text-lg text-orange-700 dark:text-orange-300",children:["$",a.pendingPayouts.toFixed(2)]}),r.jsx("span",{className:"text-xs text-orange-600/80 dark:text-orange-400/80 font-medium",children:s.language==="ru"?"В ожидании":"Pending"})]})]}),r.jsx(aqe,{}),r.jsx(Hv,{}),r.jsxs("div",{className:"hidden md:flex items-center space-x-2 text-sm text-muted-foreground",children:[r.jsx(qw,{className:"h-4 w-4"}),r.jsx("span",{children:e.email})]}),r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsx(M,{variant:"ghost",className:"relative h-8 w-8 rounded-full","data-testid":"button-user-menu",title:n("common.profile"),children:r.jsxs(jT,{className:"h-8 w-8",children:[r.jsx(wT,{src:void 0,alt:e.username}),r.jsx(NT,{className:"bg-primary text-primary-foreground",children:d})]})})}),r.jsxs(Ps,{className:"w-56",align:"end",forceMount:!0,children:[r.jsx(yT,{className:"font-normal",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("p",{className:"text-sm font-medium leading-none",children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.username}),r.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email})]})}),r.jsx(zf,{}),r.jsxs(Ft,{onClick:c,"data-testid":"menu-profile",children:[r.jsx(Ro,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:n("common.profile","Профиль")})]}),r.jsxs(Ft,{onClick:o,"data-testid":"menu-settings",children:[r.jsx(fr,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:n("common.settings","Настройки")})]}),r.jsx(zf,{}),r.jsxs(Ft,{onClick:l,className:"text-destructive focus:text-destructive","data-testid":"menu-logout",children:[r.jsx(Fv,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:n("common.logout","Выход")})]})]})]})]})]})})}function ms({children:e}){return r.jsxs("div",{className:"flex h-screen bg-background",children:[r.jsx(sqe,{}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx(iqe,{}),r.jsx("main",{className:"flex-1 overflow-auto",children:e})]})]})}function lqe(e){return`${Math.ceil(e*100)/100}%`}function da(e,t="USD"){const n=typeof e=="string"?parseFloat(e):e;return isNaN(n)?"0":`${{USD:"$",EUR:"€",RUB:"₽",GBP:"£"}[t]||t}${n}`}function oqe(){var z,F;const{t:e}=_r(),{toast:t}=lt(),[n,s]=y.useState("overview"),[a,i]=y.useState({dateFrom:"",dateTo:"",offerId:"all",geo:"all",device:"all"}),[l,o]=y.useState(!1),[c,d]=y.useState(null),[u,h]=y.useState(1),f=50,{data:m,isLoading:v,error:x}=$e({queryKey:["/api/partner/analytics",n,u,a],queryFn:async()=>{const R=new URLSearchParams({tab:n,page:u.toString(),limit:f.toString(),...a.offerId!=="all"&&{offer:a.offerId},...a.dateFrom&&{startDate:a.dateFrom},...a.dateTo&&{endDate:a.dateTo}}),I=localStorage.getItem("token")||localStorage.getItem("auth_token");if(console.log("Making request with token:",I?I.substring(0,20)+"...":"null"),!I){console.log("No token found, redirecting to login"),window.location.href="/login";return}const Q=await fetch(`/api/partner/analytics?${R}`,{headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"}});if(console.log("Response status:",Q.status),!Q.ok){const Y=await Q.json().catch(()=>({}));if(console.log("Error response:",Y),Q.status===401||Q.status===403){console.log("Auth error, redirecting to login"),localStorage.removeItem("token"),window.location.href="/login";return}throw new Error(Y.error||"Failed to fetch analytics data")}return Q.json()}}),{data:w}=$e({queryKey:["/api/partner/offers"],queryFn:async()=>{const R=localStorage.getItem("token")||localStorage.getItem("auth_token");if(!R)return window.location.href="/login",[];const I=await fetch("/api/partner/offers",{headers:{Authorization:`Bearer ${R}`}});if(!I.ok){if(I.status===401||I.status===403)return localStorage.removeItem("token"),window.location.href="/login",[];throw new Error("Failed to fetch offers")}return I.json()}}),j=()=>{h(1)},g=()=>{i({dateFrom:"",dateTo:"",offerId:"all",geo:"all",device:"all"}),h(1)},b=async(R,I="")=>{try{await navigator.clipboard.writeText(R),t({title:e("statistics.messages.copied"),description:e("statistics.messages.copiedDesc",{type:I}),duration:2e3})}catch{t({title:e("common.error"),description:e("statistics.messages.copyError"),variant:"destructive",duration:2e3})}},p=R=>{if(!w)return R;const I=w.find(Q=>Q.id===R);return I?I.name:R},N=R=>m!=null&&m.data?m.data.find(I=>I.clickId===R):null,k=(m==null?void 0:m.summary)||{totalClicks:0,totalConversions:0,totalRevenue:0,conversionRate:0,epc:0},C=(m==null?void 0:m.data)||[],_=((z=m==null?void 0:m.pagination)==null?void 0:z.totalItems)||0,P=((F=m==null?void 0:m.pagination)==null?void 0:F.totalPages)||1,D=(m==null?void 0:m.pagination)||{currentPage:1,itemsPerPage:50,totalItems:0,totalPages:0},E=()=>{u>1&&h(u-1)},$=()=>{u<P&&h(u+1)},A=R=>{h(R)},T=()=>{const R=[];if(P<=5)for(let Q=1;Q<=P;Q++)R.push(Q);else{const Q=Math.max(1,u-2),Y=Math.min(P,Q+5-1);for(let K=Q;K<=Y;K++)R.push(K)}return R},O=()=>r.jsxs("div",{className:"flex items-center justify-between mt-4",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:[e("statistics.pagination.showing")," ",(u-1)*f+1,"-",Math.min(u*f,_)," ",e("statistics.pagination.of")," ",_," ",e("statistics.pagination.records")]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(M,{variant:"outline",size:"sm",onClick:E,disabled:u===1,children:[r.jsx(Ri,{className:"h-4 w-4"}),e("statistics.pagination.previous")]}),r.jsx("div",{className:"flex items-center gap-1",children:T().map(R=>r.jsx(M,{variant:u===R?"default":"outline",size:"sm",onClick:()=>A(R),className:"w-8 h-8 p-0",children:R},R))}),r.jsxs(M,{variant:"outline",size:"sm",onClick:$,disabled:u===P,children:[e("statistics.pagination.next"),r.jsx(Qc,{className:"h-4 w-4"})]})]})]});return v?r.jsxs("div",{className:"p-6 space-y-6 bg-background dark:bg-background min-h-screen",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(_n,{className:"h-8 w-48"}),r.jsx(_n,{className:"h-10 w-32"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Array.from({length:5}).map((R,I)=>r.jsx(_n,{className:"h-24"},I))}),r.jsx(_n,{className:"h-96"})]}):x?r.jsx("div",{className:"p-6 bg-background dark:bg-background min-h-screen",children:r.jsx(W,{className:"border-red-200 bg-red-50",children:r.jsx(H,{className:"p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:e("statistics.messages.loadingError")}),r.jsx("p",{className:"text-red-600",children:e("statistics.messages.loadingErrorDesc")})]})})})}):r.jsxs("div",{className:"space-y-6 p-6 bg-background dark:bg-background min-h-screen",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[r.jsx(cr,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e("statistics.title")]}),r.jsx("p",{className:"text-muted-foreground",children:e("statistics.subtitle")})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(M,{variant:"outline",onClick:()=>window.print(),children:[r.jsx(vr,{className:"h-4 w-4 mr-2"}),e("statistics.export")]})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"h-4 w-4"}),e("statistics.filters")]})}),r.jsx(H,{children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:e("statistics.dateFrom")}),r.jsx(ne,{type:"date",value:a.dateFrom,onChange:R=>i(I=>({...I,dateFrom:R.target.value})),"data-testid":"input-date-from"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:e("statistics.dateTo")}),r.jsx(ne,{type:"date",value:a.dateTo,onChange:R=>i(I=>({...I,dateTo:R.target.value})),"data-testid":"input-date-to"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:e("statistics.offer")}),r.jsxs(he,{value:a.offerId,onValueChange:R=>i(I=>({...I,offerId:R})),children:[r.jsx(de,{"data-testid":"select-offer",children:r.jsx(fe,{placeholder:e("statistics.allOffers")})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:e("statistics.allOffers")}),w==null?void 0:w.map(R=>r.jsx(S,{value:R.id,children:R.name},R.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:e("statistics.geo")}),r.jsxs(he,{value:a.geo,onValueChange:R=>i(I=>({...I,geo:R})),children:[r.jsx(de,{"data-testid":"select-geo",children:r.jsx(fe,{placeholder:e("statistics.allCountries")})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:e("statistics.allCountries")}),r.jsx(S,{value:"IN",children:e("statistics.countries.IN")}),r.jsx(S,{value:"US",children:e("statistics.countries.US")}),r.jsx(S,{value:"DE",children:e("statistics.countries.DE")}),r.jsx(S,{value:"UK",children:e("statistics.countries.UK")})]})]})]}),r.jsxs("div",{className:"flex items-end gap-2",children:[r.jsx(M,{onClick:j,className:"flex-1",children:e("statistics.applyFilters")}),r.jsx(M,{variant:"outline",onClick:g,children:e("statistics.resetFilters")})]})]})})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:e("statistics.columns.clicks")}),r.jsx(Jc,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:k.totalClicks.toLocaleString()})})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:e("statistics.columns.conversions")}),r.jsx(Kt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600",children:k.totalConversions})})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:e("statistics.columns.revenue")}),r.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:da(k.totalRevenue)})})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:e("statistics.columns.cr")}),r.jsx(Cr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:lqe(k.conversionRate/100)})})]}),r.jsxs(W,{children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium",children:e("statistics.columns.epc")}),r.jsx(cr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(H,{children:r.jsx("div",{className:"text-2xl font-bold text-teal-600 dark:text-teal-400",children:da(k.epc)})})]})]}),r.jsxs(Zr,{value:n,onValueChange:s,className:"space-y-4",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-6",children:[r.jsxs(We,{value:"overview",className:"flex items-center gap-2",children:[r.jsx(cr,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),e("statistics.tabs.overview")]}),r.jsxs(We,{value:"geography",className:"flex items-center gap-2",children:[r.jsx(dr,{className:"h-4 w-4 text-green-600"}),e("statistics.tabs.geography")]}),r.jsxs(We,{value:"devices",className:"flex items-center gap-2",children:[r.jsx(ru,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}),e("statistics.tabs.devices")]}),r.jsxs(We,{value:"sources",className:"flex items-center gap-2",children:[r.jsx(Xr,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"}),e("statistics.tabs.sources")]}),r.jsxs(We,{value:"subid",className:"flex items-center gap-2",children:[r.jsx(Kt,{className:"h-4 w-4 text-teal-600 dark:text-teal-400"}),"SubID"]}),r.jsxs(We,{value:"details",className:"flex items-center gap-2",children:[r.jsx(hr,{className:"h-4 w-4 text-indigo-600"}),e("statistics.tabs.details")]})]}),r.jsx(He,{value:"overview",className:"space-y-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(cr,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e("statistics.tabs.overview")," - ",e("statistics.columns.clicks")]})}),r.jsxs(H,{children:[r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:e("statistics.columns.date")}),r.jsx(J,{children:e("statistics.columns.offer")}),r.jsx(J,{children:e("statistics.columns.country")}),r.jsx(J,{children:e("statistics.columns.clickId")}),r.jsx(J,{children:e("statistics.columns.status")}),r.jsx(J,{children:e("statistics.columns.revenue")}),r.jsx(J,{children:e("statistics.columns.actions")})]})}),r.jsx($t,{children:C.map(R=>r.jsxs(Re,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[r.jsx(q,{children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium text-foreground",children:new Date(R.timestamp||R.createdAt).toLocaleDateString()}),r.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(R.timestamp||R.createdAt).toLocaleTimeString()})]})}),r.jsx(q,{className:"font-medium",children:p(R.offerId)}),r.jsx(q,{children:r.jsx(le,{variant:"outline",children:R.country})}),r.jsx(q,{className:"font-mono text-xs",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600 dark:text-blue-400 dark:text-blue-400",children:R.clickId}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>b(R.clickId,"ClickID"),title:e("statistics.actions.copyClickId"),children:r.jsx(Yr,{className:"h-3 w-3"})})]})}),r.jsx(q,{children:r.jsx(le,{variant:R.status==="conversion"?"default":"secondary",className:R.status==="conversion"?"bg-green-100 text-green-800":"",children:R.status==="conversion"?e("statistics.status.conversion"):e("statistics.status.click")})}),r.jsx(q,{className:"font-medium text-purple-600 dark:text-purple-400",children:da(R.revenue)}),r.jsx(q,{children:r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{d(R.clickId),o(!0)},title:e("statistics.actions.viewSubId"),children:[r.jsx(hr,{className:"h-3 w-3 mr-1"}),"SubID"]})})]},R.id))})]}),r.jsx(O,{})]})]})}),r.jsx(He,{value:"geography",className:"space-y-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(dr,{className:"h-5 w-5 text-green-600"}),e("statistics.tabs.geography")," - ",e("statistics.columns.clicks")]})}),r.jsxs(H,{children:[r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:e("statistics.columns.country")}),r.jsx(J,{children:e("statistics.columns.clicks")}),r.jsx(J,{children:e("statistics.columns.conversions")}),r.jsx(J,{children:e("statistics.columns.revenue")}),r.jsx(J,{children:"CR"}),r.jsx(J,{children:"EPC"})]})}),r.jsx($t,{children:C.map(R=>r.jsxs(Re,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[r.jsx(q,{children:r.jsx(le,{variant:"outline",children:R.country})}),r.jsx(q,{children:R.clicks}),r.jsx(q,{children:R.conversions}),r.jsx(q,{className:"font-medium text-purple-600 dark:text-purple-400",children:da(R.revenue)}),r.jsx(q,{className:"font-medium text-orange-600 dark:text-orange-400",children:R.cr}),r.jsx(q,{className:"font-medium text-teal-600 dark:text-teal-400",children:R.epc})]},R.country))})]}),r.jsx(O,{})]})]})}),r.jsx(He,{value:"devices",className:"space-y-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(ru,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),e("statistics.tabs.devices")," - ",e("statistics.columns.clicks")]})}),r.jsxs(H,{children:[r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:e("statistics.columns.device")}),r.jsx(J,{children:e("statistics.columns.clicks")}),r.jsx(J,{children:e("statistics.columns.conversions")}),r.jsx(J,{children:e("statistics.columns.revenue")}),r.jsx(J,{children:"CR"}),r.jsx(J,{children:"EPC"})]})}),r.jsx($t,{children:C.map(R=>r.jsxs(Re,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[r.jsx(q,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[R.device==="Desktop"&&r.jsx(ru,{className:"h-4 w-4"}),R.device==="Mobile"&&r.jsx(Di,{className:"h-4 w-4"}),R.device==="Tablet"&&r.jsx(Di,{className:"h-4 w-4"}),R.device]})}),r.jsx(q,{children:R.clicks}),r.jsx(q,{children:R.conversions}),r.jsx(q,{className:"font-medium text-purple-600 dark:text-purple-400",children:da(R.revenue)}),r.jsx(q,{className:"font-medium text-orange-600 dark:text-orange-400",children:R.cr}),r.jsx(q,{className:"font-medium text-teal-600 dark:text-teal-400",children:R.epc})]},R.device))})]}),r.jsx(O,{})]})]})}),r.jsx(He,{value:"sources",className:"space-y-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Xr,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"}),e("statistics.tabs.sources")," - ",e("statistics.columns.clicks")]})}),r.jsxs(H,{children:[r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:e("statistics.columns.source")}),r.jsx(J,{children:e("statistics.columns.clicks")}),r.jsx(J,{children:e("statistics.columns.conversions")}),r.jsx(J,{children:e("statistics.columns.revenue")}),r.jsx(J,{children:"CR"}),r.jsx(J,{children:"EPC"})]})}),r.jsx($t,{children:C.map(R=>r.jsxs(Re,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[r.jsx(q,{children:r.jsx(le,{variant:"outline",children:R.source})}),r.jsx(q,{children:R.clicks}),r.jsx(q,{children:R.conversions}),r.jsx(q,{className:"font-medium text-purple-600 dark:text-purple-400",children:da(R.revenue)}),r.jsx(q,{className:"font-medium text-orange-600 dark:text-orange-400",children:R.cr}),r.jsx(q,{className:"font-medium text-teal-600 dark:text-teal-400",children:R.epc})]},R.source))})]}),r.jsx(O,{})]})]})}),r.jsx(He,{value:"subid",className:"space-y-4",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Kt,{className:"h-5 w-5 text-teal-600 dark:text-teal-400"}),e("statistics.subid.title")]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e("statistics.subid.description")})]}),r.jsxs(H,{children:[r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:e("statistics.columns.clickId")}),r.jsx(J,{children:"Sub1"}),r.jsx(J,{children:"Sub2"}),r.jsx(J,{children:"Sub3"}),r.jsx(J,{children:"Sub4"}),r.jsx(J,{children:"Sub5"}),r.jsx(J,{children:"Действия"})]})}),r.jsx($t,{children:C.slice(0,10).map(R=>r.jsxs(Re,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[r.jsx(q,{className:"font-mono text-xs text-blue-600 dark:text-blue-400 dark:text-blue-400",children:R.clickId}),r.jsx(q,{className:"text-xs text-foreground",children:R.sub_1||"-"}),r.jsx(q,{className:"text-xs text-foreground",children:R.sub_2||"-"}),r.jsx(q,{className:"text-xs text-foreground",children:R.sub_3||"-"}),r.jsx(q,{className:"text-xs text-foreground",children:R.sub_4||"-"}),r.jsx(q,{className:"text-xs text-foreground",children:R.sub_5||"-"}),r.jsx(q,{children:r.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{d(R.clickId),o(!0)},title:e("statistics.actions.viewAllSub"),children:[r.jsx(hr,{className:"h-3 w-3 mr-1"}),e("statistics.actions.viewAllSub")]})})]},R.id||R.clickId))})]}),r.jsx(O,{})]})]})}),r.jsx(He,{value:"details",className:"space-y-4",children:r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(hr,{className:"h-5 w-5 text-indigo-600"}),e("statistics.subid.detailsTitle")]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[e("statistics.pagination.showing")," ",(D.currentPage-1)*D.itemsPerPage+1,"-",Math.min(D.currentPage*D.itemsPerPage,D.totalItems)," ",e("statistics.pagination.of")," ",D.totalItems," ",e("statistics.pagination.records")]})]}),r.jsxs(H,{children:[r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:e("statistics.columns.date")}),r.jsx(J,{children:e("statistics.columns.offer")}),r.jsx(J,{children:e("statistics.columns.clickId")}),r.jsx(J,{children:e("statistics.columns.ip")}),r.jsx(J,{children:e("statistics.columns.country")}),r.jsx(J,{children:e("statistics.columns.device")}),r.jsx(J,{children:e("statistics.columns.status")}),r.jsx(J,{children:e("statistics.columns.revenue")}),r.jsx(J,{children:"SubID"})]})}),r.jsx($t,{children:C.map(R=>r.jsxs(Re,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[r.jsx(q,{className:"text-xs",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-foreground",children:new Date(R.timestamp||R.createdAt).toLocaleDateString()}),r.jsx("span",{className:"text-muted-foreground",children:new Date(R.timestamp||R.createdAt).toLocaleTimeString()})]})}),r.jsx(q,{className:"font-medium text-foreground",children:p(R.offerId)}),r.jsx(q,{className:"font-mono text-xs text-blue-600 dark:text-blue-400",children:R.clickId}),r.jsx(q,{className:"text-xs",children:R.ip}),r.jsx(q,{children:r.jsx(le,{variant:"outline",children:R.country})}),r.jsx(q,{children:R.device}),r.jsx(q,{children:r.jsx(le,{variant:R.status==="conversion"?"default":"secondary",className:R.status==="conversion"?"bg-green-100 text-green-800":"",children:R.status==="conversion"?e("statistics.status.conversion"):e("statistics.status.click")})}),r.jsx(q,{className:"font-medium text-purple-600 dark:text-purple-400",children:da(R.revenue)}),r.jsx(q,{children:r.jsx(M,{variant:"outline",size:"sm",onClick:()=>{d(R.clickId),o(!0)},title:e("statistics.actions.viewAllSub"),children:r.jsx(hr,{className:"h-3 w-3"})})})]},R.id))})]}),r.jsx(O,{})]})]})})]}),r.jsx(jt,{open:l,onOpenChange:o,children:r.jsxs(vt,{className:"max-w-4xl",children:[r.jsxs(yt,{children:[r.jsxs(bt,{children:[e("statistics.subid.parametersFor")," ",c]}),r.jsx(Ur,{children:e("statistics.subid.fullList")})]}),c&&r.jsx("div",{className:"grid grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:Array.from({length:16},(R,I)=>{const Q=`sub_${I+1}`,Y=N(c),K=(Y==null?void 0:Y[Q])||"-";return r.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[r.jsxs("span",{className:"font-medium text-sm",children:["Sub",I+1,":"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground truncate max-w-48",title:K,children:K}),K!=="-"&&r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>b(K,`Sub${I+1}`),title:e("statistics.actions.copyClickId"),children:r.jsx(Yr,{className:"h-3 w-3"})})]})]},Q)})})]})})]})}function cqe(){const[e,t]=y.useState({from:new Date(Date.now()-6048e5),to:new Date}),[n,s]=y.useState({offerId:"",country:"",device:"",trafficSource:"",sub1:"",sub2:"",search:""}),[a,i]=y.useState(!1),{data:l,isLoading:o,refetch:c}=$e({queryKey:["/api/live-analytics/partner/live-statistics",e,n],queryFn:async()=>{const v=new URLSearchParams({dateFrom:e.from.toISOString(),dateTo:e.to.toISOString(),...Object.fromEntries(Object.entries(n).filter(([j,g])=>g&&g.toString().trim()))}),x=localStorage.getItem("auth_token"),w=await fetch(`/api/live-analytics/partner/live-statistics?${v}`,{headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});if(!w.ok)throw new Error("Failed to fetch partner statistics");return w.json()},refetchInterval:a?3e4:!1}),d=(l==null?void 0:l.summary)||{totalClicks:0,totalConversions:0,totalRevenue:0,totalPayout:0,avgCR:0,avgEPC:0,totalOffers:0},u=(l==null?void 0:l.data)||[],h=(v,x)=>{s(w=>({...w,[v]:x==="all"?"":x}))},f=()=>{s({offerId:"",country:"",device:"",trafficSource:"",sub1:"",sub2:"",search:""})},m=async v=>{try{const x=new URLSearchParams({dateFrom:e.from.toISOString(),dateTo:e.to.toISOString(),format:v,...Object.fromEntries(Object.entries(n).filter(([N,k])=>k&&k.toString().trim()))}),w=localStorage.getItem("auth_token"),j=await fetch(`/api/live-analytics/partner/live-statistics/export?${x}`,{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});if(!j.ok)throw new Error("Failed to export data");const g=await j.blob(),b=URL.createObjectURL(g),p=document.createElement("a");p.href=b,p.download=`partner_analytics_${Date.now()}.${v}`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(b)}catch(x){console.error("Export failed:",x)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[r.jsx(hr,{className:"h-8 w-8 text-green-600"}),"Живая Статистика"]}),r.jsx("p",{className:"text-muted-foreground",children:"Статистика вашего трафика в реальном времени"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(M,{variant:"outline",onClick:()=>i(!a),className:a?"bg-green-50 text-green-700 border-green-200":"","data-testid":"toggle-auto-refresh",children:[r.jsx(Vt,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),a?"Авто-обновление ВКЛ":"Авто-обновление ВЫКЛ"]}),r.jsxs(M,{onClick:()=>c(),variant:"outline","data-testid":"manual-refresh",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Обновить"]}),r.jsxs(M,{onClick:()=>m("csv"),variant:"outline","data-testid":"export-csv",children:[r.jsx(vr,{className:"h-4 w-4 mr-2"}),"CSV"]}),r.jsxs(M,{onClick:()=>m("json"),variant:"outline","data-testid":"export-json",children:[r.jsx(vr,{className:"h-4 w-4 mr-2"}),"JSON"]})]})]}),r.jsxs(RY,{cols:{sm:2,lg:4},children:[r.jsx(kc,{title:"Клики",value:d.totalClicks.toLocaleString(),icon:r.jsx(Jc,{className:"h-5 w-5 text-blue-600"}),trend:{value:0,direction:"up"}}),r.jsx(kc,{title:"Конверсии",value:d.totalConversions.toLocaleString(),icon:r.jsx(Cr,{className:"h-5 w-5 text-green-600"}),trend:{value:0,direction:"up"}}),r.jsx(kc,{title:"Выплата",value:`$${d.totalPayout.toLocaleString()}`,icon:r.jsx(Rt,{className:"h-5 w-5 text-purple-600"}),trend:{value:0,direction:"up"}}),r.jsx(kc,{title:"Средний CR",value:`${d.avgCR.toFixed(2)}%`,icon:r.jsx(ln,{className:"h-5 w-5 text-orange-600"}),trend:{value:0,direction:"up"}})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"h-5 w-5"}),"Фильтры"]})}),r.jsx(H,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Период"}),r.jsx(OY,{value:e,onChange:t})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Страна"}),r.jsx(ne,{placeholder:"Код страны (RU, US, etc.)",value:n.country,onChange:v=>h("country",v.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Устройство"}),r.jsxs(he,{value:n.device,onValueChange:v=>h("device",v),children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Все устройства"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"all",children:"Все устройства"}),r.jsx(S,{value:"mobile",children:"Мобильные"}),r.jsx(S,{value:"desktop",children:"Десктоп"}),r.jsx(S,{value:"tablet",children:"Планшеты"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Источник трафика"}),r.jsx(ne,{placeholder:"facebook, google, etc.",value:n.trafficSource,onChange:v=>h("trafficSource",v.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sub1"}),r.jsx(ne,{placeholder:"Значение Sub1",value:n.sub1,onChange:v=>h("sub1",v.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sub2 (Своими значениями)"}),r.jsx(ne,{placeholder:"geo-TR|dev-mobile|src-fb",value:n.sub2,onChange:v=>h("sub2",v.target.value)})]}),r.jsx("div",{className:"flex items-end",children:r.jsx(M,{variant:"outline",onClick:f,className:"w-full","data-testid":"reset-filters",children:"Сбросить фильтры"})})]})})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Статистика трафика"}),r.jsx(Je,{children:"Подробные данные по вашему трафику"})]}),r.jsx(H,{children:o?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка данных..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Дата"}),r.jsx("th",{className:"text-left p-2",children:"Оффер ID"}),r.jsx("th",{className:"text-left p-2",children:"Страна"}),r.jsx("th",{className:"text-left p-2",children:"Устройство"}),r.jsx("th",{className:"text-left p-2",children:"Источник"}),r.jsx("th",{className:"text-left p-2",children:"Sub1"}),r.jsx("th",{className:"text-left p-2",children:"Sub2"}),r.jsx("th",{className:"text-right p-2",children:"Клики"}),r.jsx("th",{className:"text-right p-2",children:"Уникальные"}),r.jsx("th",{className:"text-right p-2",children:"Конверсии"}),r.jsx("th",{className:"text-right p-2",children:"CR, %"}),r.jsx("th",{className:"text-right p-2",children:"EPC, $"}),r.jsx("th",{className:"text-right p-2",children:"Выплата, $"})]})}),r.jsx("tbody",{children:u.map((v,x)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-2",children:new Date(v.date).toLocaleDateString("ru-RU")}),r.jsx("td",{className:"p-2",children:r.jsx(le,{variant:"outline",children:v.offerId})}),r.jsx("td",{className:"p-2",children:r.jsx(le,{variant:"outline",children:v.country})}),r.jsx("td",{className:"p-2",children:r.jsx(le,{variant:"secondary",children:v.device})}),r.jsx("td",{className:"p-2",children:v.trafficSource}),r.jsx("td",{className:"p-2",children:v.sub1}),r.jsx("td",{className:"p-2",children:r.jsx("div",{className:"max-w-[100px] truncate",title:v.sub2,children:v.sub2})}),r.jsx("td",{className:"text-right p-2",children:v.clicks.toLocaleString()}),r.jsx("td",{className:"text-right p-2",children:v.uniqueClicks.toLocaleString()}),r.jsx("td",{className:"text-right p-2",children:v.conversions.toLocaleString()}),r.jsxs("td",{className:"text-right p-2",children:[v.cr.toFixed(2),"%"]}),r.jsxs("td",{className:"text-right p-2",children:["$",v.epc.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2 font-semibold text-green-600",children:["$",v.payout.toFixed(2)]})]},x))})]})})})]})]})}function dqe(){const[e,t]=y.useState(!1),[n,s]=y.useState(""),[a,i]=y.useState(""),[l,o]=y.useState(""),{toast:c}=lt(),{t:d}=_r(),u=Et(),{data:h,isLoading:f}=$e({queryKey:["/api/partner/finance/summary"]}),{data:m,isLoading:v}=$e({queryKey:["/api/partner/finance/transactions"]}),x=f||v,w=Ee({mutationFn:async k=>Te("/api/partner/finance/withdrawal","POST",k),onSuccess:()=>{c({title:d("finances.messages.withdrawalRequested"),description:d("finances.messages.withdrawalRequestedDesc"),variant:"default"}),t(!1),s(""),i(""),o(""),u.invalidateQueries({queryKey:["/api/partner/finance/summary"]}),u.invalidateQueries({queryKey:["/api/partner/finance/transactions"]})},onError:()=>{c({title:d("common.error"),description:d("finances.messages.withdrawalError"),variant:"destructive"})}}),j=()=>{if(!n||!a||!l){c({title:"Заполните все поля",description:"Все поля обязательны для заполнения",variant:"destructive"});return}if(parseFloat(n)>(h==null?void 0:h.balance)){c({title:"Недостаточно средств",description:"Сумма вывода превышает доступный баланс",variant:"destructive"});return}w.mutate({amount:parseFloat(n),method:a,details:l})},g=k=>{switch(k){case"completed":return r.jsxs(le,{variant:"default",className:"bg-green-100 text-green-700",children:[r.jsx(nr,{className:"w-3 h-3 mr-1"}),"Завершено"]});case"pending":return r.jsxs(le,{variant:"secondary",className:"bg-yellow-100 text-yellow-700",children:[r.jsx(lr,{className:"w-3 h-3 mr-1"}),"Ожидание"]});case"processing":return r.jsxs(le,{variant:"outline",className:"bg-blue-100 text-blue-700",children:[r.jsx(lr,{className:"w-3 h-3 mr-1"}),"Обработка"]});case"failed":return r.jsxs(le,{variant:"destructive",className:"bg-red-100 text-red-700",children:[r.jsx(zt,{className:"w-3 h-3 mr-1"}),"Отклонено"]});default:return r.jsx(le,{variant:"secondary",children:k})}},b=k=>{switch(k){case"commission":case"bonus":return r.jsx(Ma,{className:"h-4 w-4 text-green-600"});case"payout":return r.jsx(wre,{className:"h-4 w-4 text-red-600"});default:return r.jsx(Rt,{className:"h-4 w-4 text-gray-600"})}},p=k=>{switch(k){case"commission":return"Комиссия";case"bonus":return"Бонус";case"payout":return"Вывод";default:return k}},N=async k=>{try{const C=await fetch("/api/partner/finance/export?format="+k,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!C.ok)throw new Error("Failed to export");const _=await C.blob(),P=window.URL.createObjectURL(_),D=document.createElement("a");D.href=P,D.download=`finance-report-${new Date().toISOString().split("T")[0]}.${k}`,document.body.appendChild(D),D.click(),window.URL.revokeObjectURL(P),document.body.removeChild(D),c({title:"Отчёт загружен",description:`Финансовый отчёт в формате ${k.toUpperCase()} успешно загружен`,variant:"default"})}catch{c({title:"Ошибка",description:"Не удалось загрузить отчёт",variant:"destructive"})}};return x?r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsx(_n,{className:"h-8 w-48"}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((k,C)=>r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(_n,{className:"h-4 w-20"})}),r.jsx(H,{children:r.jsx(_n,{className:"h-8 w-16"})})]},C))})]}):r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:d("finances.title")}),r.jsx("p",{className:"text-muted-foreground",children:"Управление балансом и выводом средств"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(jt,{open:e,onOpenChange:t,children:[r.jsx(Xa,{asChild:!0,children:r.jsxs(M,{children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Вывод средств"]})}),r.jsxs(vt,{children:[r.jsxs(yt,{children:[r.jsx(bt,{children:"Вывод средств"}),r.jsxs(Ur,{children:["Создание заявки на вывод средств. Доступно: ",da((h==null?void 0:h.balance)||0)]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"amount",children:"Сумма"}),r.jsx(ne,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:n,onChange:k=>s(k.target.value)})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"method",children:"Способ получения"}),r.jsxs(he,{value:a,onValueChange:i,children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите способ"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"paypal",children:"PayPal"}),r.jsx(S,{value:"bank_card",children:"Банковская карта"}),r.jsx(S,{value:"bank_transfer",children:"Банковский перевод"}),r.jsx(S,{value:"crypto",children:"Криптовалюта"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"details",children:"Реквизиты"}),r.jsx(pt,{id:"details",placeholder:"Укажите реквизиты для получения средств",value:l,onChange:k=>o(k.target.value)})]})]}),r.jsxs(vo,{children:[r.jsx(M,{variant:"outline",onClick:()=>t(!1),children:"Отмена"}),r.jsx(M,{onClick:j,disabled:w.isPending,children:w.isPending?"Отправка...":"Отправить заявку"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(M,{variant:"outline",onClick:()=>N("csv"),title:"Скачать отчёт в CSV",children:[r.jsx(vr,{className:"h-4 w-4 mr-2"}),"CSV"]}),r.jsxs(M,{variant:"outline",onClick:()=>N("json"),title:"Скачать отчёт в JSON",children:[r.jsx(vr,{className:"h-4 w-4 mr-2"}),"JSON"]})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(W,{className:"border-l-4 border-l-green-500 bg-gradient-to-br from-green-50 to-white dark:from-green-900/20 dark:to-background",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Текущий баланс"}),r.jsx(Rt,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:da((h==null?void 0:h.balance)||0)}),r.jsx("p",{className:"text-xs text-green-600/80 dark:text-green-400/80",children:"Доступно к выводу"})]})]}),r.jsxs(W,{className:"border-l-4 border-l-orange-500 bg-gradient-to-br from-orange-50 to-white dark:from-orange-900/20 dark:to-background",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"В ожидании"}),r.jsx(lr,{className:"h-4 w-4 text-orange-600"})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-700 dark:text-orange-300",children:da((h==null?void 0:h.pendingPayouts)||0)}),r.jsx("p",{className:"text-xs text-orange-600/80 dark:text-orange-400/80",children:"Ожидает подтверждения"})]})]}),r.jsxs(W,{className:"border-l-4 border-l-blue-500 bg-gradient-to-br from-blue-50 to-white dark:from-blue-900/20 dark:to-background",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Общий доход"}),r.jsx(Cr,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:da((h==null?void 0:h.totalRevenue)||0)}),r.jsx("p",{className:"text-xs text-blue-600/80 dark:text-blue-400/80",children:"За всё время"})]})]}),r.jsxs(W,{className:"border-l-4 border-l-purple-500 bg-gradient-to-br from-purple-50 to-white dark:from-purple-900/20 dark:to-background",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ae,{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Средний EPC"}),r.jsx(Rc,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:da((h==null?void 0:h.avgEPC)||0)}),r.jsx("p",{className:"text-xs text-purple-600/80 dark:text-purple-400/80",children:"Доходность на клик"})]})]})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"История операций"})}),r.jsx(H,{children:r.jsxs(Dt,{children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Дата"}),r.jsx(J,{children:"Описание"}),r.jsx(J,{children:"Сумма"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Детали"})]})}),r.jsxs($t,{children:[(m||[]).map(k=>r.jsxs(Re,{children:[r.jsx(q,{className:"font-medium",children:new Date(k.createdAt).toLocaleDateString("ru-RU")}),r.jsx(q,{children:r.jsxs("div",{className:"flex items-center space-x-3",children:[b(k.type),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:k.comment||"Транзакция"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:p(k.type)})]})]})}),r.jsx(q,{children:r.jsxs("span",{className:`font-medium ${(k.amount||0)>=0?"text-green-600":"text-red-600"}`,children:[(k.amount||0)>=0?"+":"",da(Math.abs(k.amount||0))]})}),r.jsx(q,{children:g(k.status)}),r.jsxs(q,{className:"text-sm text-muted-foreground",children:["ID: ",k.id.substring(0,8),"..."]})]},k.id)),(!m||m.length===0)&&r.jsx(Re,{children:r.jsx(q,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"Транзакции не найдены"})})]})]})})]})]})}const uqe={pending:{label:"Ожидает",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",icon:lr},approved:{label:"Одобрен",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",icon:nr},rejected:{label:"Отклонён",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",icon:zt},cancelled:{label:"Отменён",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",icon:zt}};function hqe(){const[e,t]=y.useState(null),[n,s]=y.useState(!1),[a,i]=y.useState(!1),{toast:l}=lt(),o=Et(),{data:c=[],isLoading:d}=$e({queryKey:["/api/partner/access-requests"]}),u=Ee({mutationFn:async x=>Te(`/api/partner/access-requests/${x}/cancel`,"PATCH"),onSuccess:()=>{l({title:"Запрос отменён",description:"Ваш запрос на доступ успешно отменён"}),o.invalidateQueries({queryKey:["/api/partner/access-requests"]}),i(!1),t(null)},onError:x=>{l({title:"Ошибка",description:x.message||"Не удалось отменить запрос",variant:"destructive"})}}),h=x=>{t(x),i(!0)},f=x=>{t(x),s(!0)},m=x=>{const w=uqe[x];if(!w)return null;const j=w.icon;return r.jsxs(le,{className:w.color,children:[r.jsx(j,{className:"w-3 h-3 mr-1"}),w.label]})},v=x=>new Date(x)<new Date;return d?r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsx("div",{className:"container mx-auto p-6",children:r.jsxs("div",{className:"flex items-center justify-center h-64",children:[r.jsx(bc,{className:"w-8 h-8 animate-spin"}),r.jsx("span",{className:"ml-3",children:"Загрузка запросов..."})]})})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Is,{className:"w-6 h-6 text-blue-600"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Запросы доступа к офферам"})]}),c.length===0?r.jsx(W,{children:r.jsxs(H,{className:"p-12 text-center",children:[r.jsx(Hx,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Пока нет запросов"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Вы ещё не отправляли запросы на доступ к приватным офферам. Найдите интересный оффер и отправьте запрос рекламодателю."})]})}):r.jsx("div",{className:"space-y-4",children:c.map(x=>{const w=v(x.expires_at);return r.jsx(W,{className:"hover:shadow-lg transition-shadow",children:r.jsxs(H,{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold text-lg",children:x.offer_name}),m(x.status),w&&x.status==="pending"&&r.jsxs(le,{className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",children:[r.jsx(ma,{className:"w-3 h-3 mr-1"}),"Истёк"]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Tm,{className:"w-3 h-3"}),r.jsx("span",{children:x.advertiser_name})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ls,{className:"w-3 h-3"}),r.jsxs("span",{children:["Отправлено ",Xx(new Date(x.requested_at),{addSuffix:!0,locale:gl})]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(M,{variant:"outline",size:"sm",onClick:()=>f(x),"data-testid":`button-details-${x.id}`,children:"Подробнее"}),x.status==="pending"&&!w&&r.jsxs(M,{variant:"outline",size:"sm",className:"text-red-600 border-red-600 hover:bg-red-50",onClick:()=>h(x),"data-testid":`button-cancel-${x.id}`,children:[r.jsx(zt,{className:"w-4 h-4 mr-1"}),"Отменить"]})]})]}),x.partner_message&&r.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:r.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("strong",{children:"Ваше сообщение:"})," ",x.partner_message]})}),x.advertiser_response&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[r.jsx("strong",{children:"Ответ рекламодателя:"})," ",x.advertiser_response]})}),x.reviewed_at&&r.jsxs("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:["Обработано ",Xx(new Date(x.reviewed_at),{addSuffix:!0,locale:gl})]})]})},x.id)})})]})}),r.jsx(jt,{open:n,onOpenChange:s,children:r.jsxs(vt,{className:"max-w-2xl",children:[r.jsxs(yt,{children:[r.jsx(bt,{children:"Детали запроса доступа"}),r.jsx(Ur,{children:e&&`Запрос к офферу: ${e.offer_name}`})]}),e&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Статус"}),r.jsx("div",{className:"mt-1",children:m(e.status)})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Рекламодатель"}),r.jsx("p",{className:"mt-1",children:e.advertiser_name})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Дата отправки"}),r.jsx("p",{className:"mt-1 text-sm",children:new Date(e.requested_at).toLocaleString("ru")})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Истекает"}),r.jsx("p",{className:"mt-1 text-sm",children:new Date(e.expires_at).toLocaleString("ru")})]})]}),e.partner_message&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Ваше сообщение рекламодателю"}),r.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:r.jsx("p",{className:"text-sm",children:e.partner_message})})]}),e.request_note&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Дополнительная информация"}),r.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:r.jsx("p",{className:"text-sm",children:e.request_note})})]}),e.advertiser_response&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Ответ рекламодателя"}),r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900 rounded-lg",children:r.jsx("p",{className:"text-sm",children:e.advertiser_response})})]})]}),r.jsx(vo,{children:r.jsx(M,{onClick:()=>s(!1),"data-testid":"button-close-details",children:"Закрыть"})})]})}),r.jsx(jt,{open:a,onOpenChange:i,children:r.jsxs(vt,{children:[r.jsxs(yt,{children:[r.jsx(bt,{children:"Отменить запрос доступа"}),r.jsxs(Ur,{children:['Вы уверены, что хотите отменить запрос к офферу "',e==null?void 0:e.offer_name,'"? Это действие нельзя отменить.']})]}),r.jsxs(vo,{children:[r.jsx(M,{variant:"outline",onClick:()=>i(!1),disabled:u.isPending,"data-testid":"button-cancel-modal",children:"Нет, оставить"}),r.jsxs(M,{variant:"destructive",onClick:()=>e&&u.mutate(e.id),disabled:u.isPending,"data-testid":"button-confirm-cancel",children:[u.isPending&&r.jsx(bc,{className:"mr-2 h-4 w-4 animate-spin"}),"Да, отменить запрос"]})]})]})})]})}function $F(){const[e,t]=y.useState(""),[n,s]=y.useState(""),[a,i]=y.useState(!1),{login:l}=Jt(),{t:o,language:c,setLanguage:d}=Ll(),[,u]=hs(),{toast:h}=lt(),f=async m=>{m.preventDefault(),i(!0);try{console.log("🔐 Login form submitted for user:",e),await l(e,n);const v=localStorage.getItem("token");if(v)try{const w=v.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),j=decodeURIComponent(atob(w).split("").map(p=>"%"+("00"+p.charCodeAt(0).toString(16)).slice(-2)).join("")),g=JSON.parse(j),b=vae(g.role);console.log("✅ Login successful, redirecting to:",b),h({title:"Login Successful",description:`Welcome back! Redirecting to ${g.role} dashboard...`,variant:"default"}),setTimeout(()=>{u(b)},100)}catch(x){console.error("Failed to decode token for redirect:",x),u("/")}else u("/")}catch(v){console.error("❌ Login failed:",v);let x="Invalid credentials";v.message&&(v.message.includes("HTTP 401")?x="Invalid username or password":v.message.includes("HTTP 429")?x="Too many login attempts. Please try again later.":v.message.includes("HTTP 500")?x="Server error. Please try again later.":v.message.includes("No token received")?x="Authentication failed. Please try again.":v.message.includes("expired token")?x="Session expired. Please try again.":x=v.message),h({title:"Login Failed",description:x,variant:"destructive"})}finally{i(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsx("div",{className:"flex justify-center mb-8",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx("i",{className:"fas fa-chart-network text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"FraudGuard"}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Anti-Fraud Platform"})]})]})}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{className:"text-center",children:o("login")}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("select",{value:c,onChange:m=>d(m.target.value),className:"text-sm border border-slate-200 dark:border-slate-700 rounded px-3 py-1 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100","data-testid":"language-select",children:[r.jsx("option",{value:"en",children:"🇺🇸 English"}),r.jsx("option",{value:"ru",children:"🇷🇺 Русский"})]})})]}),r.jsxs(H,{children:[r.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-sm",children:[r.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Быстрый вход:"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{type:"button",onClick:()=>{t("superadmin"),s("password123")},className:"block w-full text-left p-2 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800/30 rounded text-xs",children:[r.jsx("strong",{children:"👑 Супер-админ:"})," superadmin / password123"]}),r.jsxs("button",{type:"button",onClick:()=>{t("advertiser1"),s("password123")},className:"block w-full text-left p-2 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800/30 rounded text-xs",children:[r.jsx("strong",{children:"🏢 Рекламодатель:"})," advertiser1 / password123"]}),r.jsxs("button",{type:"button",onClick:()=>{t("test_affiliate"),s("password123")},className:"block w-full text-left p-2 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800/30 rounded text-xs",children:[r.jsx("strong",{children:"🤝 Партнер:"})," test_affiliate / password123"]})]})]}),r.jsxs("form",{onSubmit:f,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs(L,{htmlFor:"username",children:[o("username")," / ",o("email")]}),r.jsx(ne,{id:"username",type:"text",value:e,onChange:m=>t(m.target.value),required:!0,"data-testid":"input-username"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"password",children:o("password")}),r.jsx(ne,{id:"password",type:"password",value:n,onChange:m=>s(m.target.value),required:!0,"data-testid":"input-password"})]}),r.jsx(M,{type:"submit",className:"w-full",disabled:a,"data-testid":"button-sign-in",children:a?"Loading...":o("sign_in")})]})]})]})]})})}function fqe(){const{toast:e}=lt(),[t,n]=y.useState(null),[s,a]=y.useState(!1),[i,l]=y.useState(!1);y.useEffect(()=>{const c=localStorage.getItem("token");n(c)},[]);const o=async()=>{a(!0);try{const c=await fetch("/api/get-fresh-token");if(!c.ok){const u=await c.text();throw console.error("API Error:",u),new Error(`Ошибка API: ${c.status}`)}const d=await c.json();if(console.log("Received token data:",d),localStorage.removeItem("token"),localStorage.setItem("token",d.token),n(d.token),l(!0),e({title:"Успешно!",description:"Токен обновлен. Перенаправление...",duration:2e3}),"caches"in window){const u=await caches.keys();await Promise.all(u.map(h=>caches.delete(h)))}setTimeout(()=>{window.location.href="/affiliate/statistics"},2e3)}catch(c){console.error("Update token error:",c),e({title:"Ошибка",description:"Не удалось обновить токен",variant:"destructive",duration:3e3})}finally{a(!1)}};return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:r.jsxs(W,{className:"w-full max-w-md",children:[r.jsxs(se,{className:"text-center",children:[r.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(VA,{className:"w-6 h-6 text-blue-600"})}),r.jsx(ae,{className:"text-2xl font-bold",children:"Обновление токена"}),r.jsx("p",{className:"text-muted-foreground",children:"Для работы партнерской аналитики необходимо обновить токен аутентификации"})]}),r.jsxs(H,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Текущий токен:"}),r.jsx("div",{className:"p-3 bg-gray-100 rounded-md font-mono text-xs break-all",children:t?r.jsxs(r.Fragment,{children:[r.jsx(le,{variant:"outline",className:"mb-2",children:t.length>20?"Найден":"Короткий"}),r.jsxs("div",{children:[t.substring(0,50),"..."]})]}):r.jsxs("div",{className:"text-red-600 flex items-center gap-2",children:[r.jsx(ma,{className:"w-4 h-4"}),"Токен не найден"]})})]}),r.jsxs(M,{onClick:o,disabled:s||i,className:"w-full",size:"lg",children:[s&&r.jsx(bc,{className:"w-4 h-4 mr-2 animate-spin"}),i&&r.jsx(nr,{className:"w-4 h-4 mr-2 text-green-500"}),s?"Обновляем...":i?"Готово!":"Обновить токен"]}),i&&r.jsxs("div",{className:"text-center p-4 bg-green-50 border border-green-200 rounded-md",children:[r.jsx("div",{className:"text-green-800 font-medium",children:"✓ Токен успешно обновлен!"}),r.jsx("div",{className:"text-green-600 text-sm mt-1",children:"Перенаправление на страницу статистики..."})]}),r.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["После обновления вы будете автоматически перенаправлены",r.jsx("br",{}),"на страницу партнерской аналитики"]})]})]})})}function mqe(){const{toast:e}=lt(),t=Et();y.useState(null);const[n,s]=y.useState(!1),[a,i]=y.useState(!1),[l,o]=y.useState(null),[c,d]=y.useState("profiles"),{data:u=[],isLoading:h}=$e({queryKey:["/api/advertiser/postback/profiles"]}),{data:f=[],isLoading:m}=$e({queryKey:["/api/advertiser/postback/logs"]}),{data:v=[]}=$e({queryKey:["/api/advertiser/offers"]});$e({queryKey:["/api/advertiser/partners"]});const x=Ee({mutationFn:P=>Te("/api/advertiser/postback/profiles","POST",P),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/advertiser/postback/profiles"]}),s(!1),e({title:"Успешно",description:"Профиль постбека создан"})},onError:P=>{e({title:"Ошибка",description:P.message||"Не удалось создать профиль",variant:"destructive"})}}),w=Ee({mutationFn:async P=>{const D=await fetch("/api/track/postback/test",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(P)});if(!D.ok)throw new Error(`HTTP ${D.status}`);return await D.json()},onSuccess:P=>{var D,E,$;P.success?e({title:"Тест успешен",description:`Статус: ${((D=P.response)==null?void 0:D.status)||"OK"} (${((E=P.response)==null?void 0:E.time)||0}ms)`}):e({title:"Ошибка теста",description:P.error||`HTTP ${(($=P.response)==null?void 0:$.status)||"Unknown"}`,variant:"destructive"})},onError:P=>{console.error("Test error:",P),e({title:"Ошибка",description:P.message||"Произошла ошибка при тестировании постбека",variant:"destructive"})}}),j=Ee({mutationFn:({id:P,data:D})=>Te(`/api/advertiser/postback/profiles/${P}`,"PUT",D),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/advertiser/postback/profiles"]}),i(!1),o(null),e({title:"Успешно",description:"Профиль постбека обновлен"})},onError:P=>{e({title:"Ошибка",description:P.message||"Не удалось обновить профиль",variant:"destructive"})}}),g=Ee({mutationFn:P=>Te(`/api/advertiser/postback/profiles/${P}`,"DELETE"),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/advertiser/postback/profiles"]}),e({title:"Успешно",description:"Профиль постбека удален"})},onError:P=>{e({title:"Ошибка",description:P.message||"Не удалось удалить профиль",variant:"destructive"})}}),b=P=>{const D={name:P.get("name"),tracker_type:P.get("tracker_type"),endpoint_url:P.get("endpoint_url"),method:P.get("method"),events:P.getAll("events"),offers:P.getAll("offers"),partners:P.getAll("partners"),enabled:P.get("enabled")==="on"};x.mutate(D)},p=P=>{w.mutate({tracker_url:P.endpoint_url,method:P.method,test_data:{clickid:"adv_test_"+Date.now(),status:"lead",revenue:"45.00",currency:"USD",partner_id:"test_partner",offer_id:"test_offer"}})},N=P=>{o(P),i(!0)},k=P=>{if(!l)return;const D={name:P.get("name"),tracker_type:P.get("tracker_type"),endpoint_url:P.get("endpoint_url"),method:P.get("method"),events:P.getAll("events"),offers:P.getAll("offers"),partners:P.getAll("partners"),enabled:P.get("enabled")==="on"};j.mutate({id:l.id,data:D})},C=P=>{confirm(`Удалить профиль "${P.name}"? Это действие нельзя отменить.`)&&g.mutate(P.id)},_={keitaro:{name:"Keitaro",url_template:"https://your-keitaro.com/api/v1/conversions?clickid={clickid}&status={status}&revenue={revenue}&offer_id={offer_id}&partner_id={partner_id}",method:"GET"},binom:{name:"Binom",url_template:"https://your-binom.com/click.php?cnv_id={clickid}&payout={revenue}&offer={offer_id}&affiliate={partner_id}",method:"GET"},redtrack:{name:"RedTrack",url_template:"https://your-redtrack.com/postback?clickid={clickid}&status={status}&sum={revenue}&offer={offer_id}",method:"GET"},voluum:{name:"Voluum",url_template:"https://your-voluum.com/postback?cid={clickid}&payout={revenue}&offer={offer_id}",method:"GET"},custom:{name:"Произвольный",url_template:"https://your-tracker.com/postback?clickid={clickid}&status={status}&revenue={revenue}",method:"GET"}};return r.jsxs("div",{className:"space-y-6","data-testid":"advertiser-postback-settings-page",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(gU,{className:"h-8 w-8 text-blue-600"}),"Настройки постбеков рекламодателя"]}),r.jsx("p",{className:"text-muted-foreground",children:"Настройте отправку данных о конверсиях в ваши трекеры и системы аналитики"})]}),r.jsxs(M,{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-create-advertiser-postback",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить постбек"]})]}),r.jsxs(Zr,{value:c,onValueChange:d,className:"space-y-4",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-4",children:[r.jsx(We,{value:"profiles",children:"Профили постбеков"}),r.jsx(We,{value:"logs",children:"Логи отправки"}),r.jsx(We,{value:"analytics",children:"Аналитика"}),r.jsx(We,{value:"help",children:"Помощь"})]}),r.jsx(He,{value:"profiles",className:"space-y-4",children:h?r.jsx("div",{className:"text-center py-8",children:"Загрузка профилей..."}):u.length===0?r.jsx(W,{children:r.jsx(H,{className:"py-8",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(Kt,{className:"h-12 w-12 mx-auto text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Нет настроенных постбеков"}),r.jsx("p",{className:"text-muted-foreground",children:"Настройте постбеки для отправки данных о конверсиях в ваши системы аналитики"})]}),r.jsx(M,{onClick:()=>s(!0),"data-testid":"button-create-first-advertiser-postback",children:"Создать постбек"})]})})}):r.jsx("div",{className:"grid gap-4",children:u.map(P=>{var D,E,$,A,T,O;return r.jsxs(W,{className:"relative",children:[r.jsxs(se,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ae,{className:"text-lg",children:P.name}),r.jsx(le,{variant:P.enabled?"default":"secondary",children:P.enabled?"Активен":"Отключен"}),r.jsx(le,{variant:P.status==="active"?"default":P.status==="error"?"destructive":"secondary",children:P.status==="active"?"Работает":P.status==="error"?"Ошибка":"Отключен"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:((D=_[P.tracker_type])==null?void 0:D.name)||P.tracker_type}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Отправлено: ",((E=P.delivery_stats)==null?void 0:E.total_sent)||0]}),r.jsxs("span",{children:["Успешность: ",(($=P.delivery_stats)==null?void 0:$.success_rate)||0,"%"]}),r.jsxs("span",{children:["Время ответа: ",((A=P.delivery_stats)==null?void 0:A.avg_response_time)||0,"ms"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(M,{variant:"outline",size:"sm",onClick:()=>p(P),disabled:w.isPending,"data-testid":`button-test-advertiser-postback-${P.id}`,title:"Протестировать постбек",children:r.jsx(Ww,{className:"h-4 w-4"})}),r.jsx(M,{variant:"outline",size:"sm",onClick:()=>N(P),"data-testid":`button-edit-advertiser-postback-${P.id}`,title:"Редактировать",children:r.jsx(fr,{className:"h-4 w-4"})}),r.jsx(M,{variant:"outline",size:"sm",onClick:()=>C(P),disabled:g.isPending,"data-testid":`button-delete-advertiser-postback-${P.id}`,title:"Удалить",className:"hover:bg-red-50 hover:text-red-600",children:r.jsx(wr,{className:"h-4 w-4"})})]})]}),r.jsx(H,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-xs text-muted-foreground",children:"URL постбека"}),r.jsx("div",{className:"font-mono text-sm bg-muted p-2 rounded",children:P.endpoint_url})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx(L,{className:"text-xs text-muted-foreground",children:"События"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:((T=P.events)==null?void 0:T.map(z=>r.jsx(le,{variant:"outline",className:"text-xs",children:z},z)))||r.jsx("span",{className:"text-muted-foreground",children:"Все"})})]}),r.jsxs("div",{children:[r.jsx(L,{className:"text-xs text-muted-foreground",children:"Офферы"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:(O=P.offers)!=null&&O.length?`${P.offers.length} выбрано`:"Все офферы"})]})]}),P.last_delivery&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Последняя отправка: ",new Date(P.last_delivery).toLocaleString("ru")]})]})})]},P.id)})})}),r.jsx(He,{value:"logs",className:"space-y-4",children:m?r.jsx("div",{className:"text-center py-8",children:"Загрузка логов..."}):r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Журнал отправки постбеков"})}),r.jsx(H,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Время"}),r.jsx("th",{className:"text-left p-2",children:"ClickID"}),r.jsx("th",{className:"text-left p-2",children:"Событие"}),r.jsx("th",{className:"text-left p-2",children:"Партнер"}),r.jsx("th",{className:"text-left p-2",children:"Оффер"}),r.jsx("th",{className:"text-left p-2",children:"Статус"}),r.jsx("th",{className:"text-left p-2",children:"Ответ"})]})}),r.jsx("tbody",{children:f.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"Нет данных о постбеках"})}):f.map(P=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"p-2 text-sm",children:new Date(P.sent_at).toLocaleString("ru")}),r.jsx("td",{className:"p-2 font-mono text-sm",children:P.clickid}),r.jsx("td",{className:"p-2",children:r.jsx(le,{variant:"outline",children:P.event_type})}),r.jsx("td",{className:"p-2 text-sm",children:P.partner_name||"-"}),r.jsx("td",{className:"p-2 text-sm",children:P.offer_name||"-"}),r.jsx("td",{className:"p-2",children:P.status==="sent"?r.jsxs(le,{variant:"default",className:"bg-green-100 text-green-800",children:[r.jsx(fn,{className:"h-3 w-3 mr-1"}),"Отправлен"]}):P.status==="failed"?r.jsxs(le,{variant:"destructive",children:[r.jsx(Tn,{className:"h-3 w-3 mr-1"}),"Ошибка"]}):r.jsx(le,{variant:"secondary",children:"Ожидание"})}),r.jsxs("td",{className:"p-2",children:[P.response_status&&r.jsx(le,{variant:P.response_status<400?"default":"destructive",className:"font-mono",children:P.response_status}),P.response_time&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:[P.response_time,"ms"]}),P.error_message&&r.jsx("div",{className:"text-xs text-red-600 mt-1",children:P.error_message})]})]},P.id))})]})})})]})}),r.jsx(He,{value:"analytics",className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(W,{children:[r.jsx(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsx(ae,{className:"text-sm font-medium",children:"Всего отправлено"})}),r.jsxs(H,{children:[r.jsx("div",{className:"text-2xl font-bold",children:u.reduce((P,D)=>{var E;return P+(((E=D.delivery_stats)==null?void 0:E.total_sent)||0)},0)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"постбеков за все время"})]})]}),r.jsxs(W,{children:[r.jsx(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsx(ae,{className:"text-sm font-medium",children:"Успешность"})}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[u.length>0?Math.round(u.reduce((P,D)=>{var E;return P+(((E=D.delivery_stats)==null?void 0:E.success_rate)||0)},0)/u.length):0,"%"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"средняя по всем профилям"})]})]}),r.jsxs(W,{children:[r.jsx(se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsx(ae,{className:"text-sm font-medium",children:"Время ответа"})}),r.jsxs(H,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[u.length>0?Math.round(u.reduce((P,D)=>{var E;return P+(((E=D.delivery_stats)==null?void 0:E.avg_response_time)||0)},0)/u.length):0,"ms"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"среднее время"})]})]})]})}),r.jsx(He,{value:"help",className:"space-y-4",children:r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Настройка постбеков для рекламодателей"})}),r.jsxs(H,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Доступные макросы:"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{clickid}"})," - ID клика"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{status}"})," - Статус события"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{revenue}"})," - Доход"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{currency}"})," - Валюта"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{partner_id}"})," - ID партнера"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{offer_id}"})," - ID оффера"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{sub1}"})," - SubID 1"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{sub2}"})," - SubID 2"]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Особенности для рекламодателей:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:[r.jsx("li",{children:"Настройка постбеков на уровне конкретных офферов"}),r.jsx("li",{children:"Фильтрация по партнерам для избирательной отправки"}),r.jsx("li",{children:"Расширенная аналитика доставки постбеков"}),r.jsx("li",{children:"Мониторинг конверсий от каждого партнера"}),r.jsx("li",{children:"Интеграция с CRM и системами аналитики"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Примеры использования:"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border rounded p-4",children:[r.jsx("h4",{className:"font-semibold",children:"Отправка в CRM"}),r.jsxs("div",{className:"font-mono text-sm bg-muted p-2 rounded mt-2",children:["https://your-crm.com/api/leads?clickid=","{clickid}","&partner=","{partner_id}","&revenue=","{revenue}"]})]}),r.jsxs("div",{className:"border rounded p-4",children:[r.jsx("h4",{className:"font-semibold",children:"Аналитика по офферам"}),r.jsxs("div",{className:"font-mono text-sm bg-muted p-2 rounded mt-2",children:["https://analytics.example.com/conversion?offer=","{offer_id}","&amount=","{revenue}","&source=","{sub1}"]})]})]})]})]})]})})]}),a&&l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Редактировать профиль постбека"}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{i(!1),o(null)},children:r.jsx(Tn,{className:"h-4 w-4"})})]}),r.jsxs("form",{onSubmit:P=>{P.preventDefault();const D=new FormData(P.currentTarget);k(D)},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"edit-name",children:"Название профиля"}),r.jsx(ne,{id:"edit-name",name:"name",defaultValue:l.name,required:!0})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"edit-tracker-type",children:"Тип трекера"}),r.jsxs(he,{name:"tracker_type",defaultValue:l.tracker_type,children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите тип трекера"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"keitaro",children:"Keitaro"}),r.jsx(S,{value:"binom",children:"Binom"}),r.jsx(S,{value:"redtrack",children:"RedTrack"}),r.jsx(S,{value:"voluum",children:"Voluum"}),r.jsx(S,{value:"custom",children:"Произвольный"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"edit-endpoint-url",children:"URL постбека"}),r.jsx(pt,{id:"edit-endpoint-url",name:"endpoint_url",defaultValue:l.endpoint_url,placeholder:"https://your-tracker.com/postback?clickid={clickid}&status={status}&revenue={revenue}",rows:3,required:!0})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"edit-method",children:"HTTP метод"}),r.jsxs(he,{name:"method",defaultValue:l.method,children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите метод"})}),r.jsxs(ue,{children:[r.jsx(S,{value:"GET",children:"GET"}),r.jsx(S,{value:"POST",children:"POST"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{children:"События"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:["lp_click","lead","deposit","conversion"].map(P=>{var D;return r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",name:"events",value:P,defaultChecked:(D=l.events)==null?void 0:D.includes(P)}),r.jsx("span",{className:"capitalize",children:P})]},P)})})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Офферы (оставьте пустым для всех)"}),r.jsx("div",{className:"max-h-32 overflow-y-auto border rounded p-2",children:v.map(P=>{var D;return r.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[r.jsx("input",{type:"checkbox",name:"offers",value:P.id,defaultChecked:(D=l.offers)==null?void 0:D.includes(P.id)}),r.jsx("span",{className:"text-sm",children:P.name})]},P.id)})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"edit-enabled",name:"enabled",defaultChecked:l.enabled}),r.jsx(L,{htmlFor:"edit-enabled",children:"Активен"})]}),r.jsxs("div",{className:"flex space-x-2 pt-4",children:[r.jsx(M,{type:"submit",disabled:j.isPending,className:"bg-blue-600 hover:bg-blue-700",children:j.isPending?"Сохранение...":"Сохранить"}),r.jsx(M,{type:"button",variant:"outline",onClick:()=>{i(!1),o(null)},children:"Отмена"})]})]})]})}),n&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs(W,{className:"w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsx(se,{children:r.jsx(ae,{children:"Создать профиль постбека"})}),r.jsx(H,{children:r.jsxs("form",{onSubmit:P=>{P.preventDefault(),b(new FormData(P.currentTarget))},className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"name",children:"Название профиля"}),r.jsx(ne,{id:"name",name:"name",placeholder:"Например: Main Analytics Tracker",required:!0})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"tracker_type",children:"Тип трекера"}),r.jsxs(he,{name:"tracker_type",required:!0,children:[r.jsx(de,{children:r.jsx(fe,{placeholder:"Выберите трекер"})}),r.jsx(ue,{children:Object.entries(_).map(([P,D])=>r.jsx(S,{value:P,children:D.name},P))})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"endpoint_url",children:"URL постбека"}),r.jsx(pt,{id:"endpoint_url",name:"endpoint_url",placeholder:"https://your-tracker.com/postback?clickid={clickid}&status={status}&revenue={revenue}&offer_id={offer_id}&partner_id={partner_id}",rows:3,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"method",children:"HTTP метод"}),r.jsxs(he,{name:"method",defaultValue:"GET",children:[r.jsx(de,{children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"GET",children:"GET"}),r.jsx(S,{value:"POST",children:"POST"})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{id:"enabled",name:"enabled",defaultChecked:!0}),r.jsx(L,{htmlFor:"enabled",children:"Включить профиль"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Отмена"}),r.jsx(M,{type:"submit",disabled:x.isPending,"data-testid":"button-save-advertiser-postback",children:"Сохранить"})]})]})})]})})]})}function pqe({postback:e,onSubmit:t,onCancel:n}){const[s,a]=y.useState({name:(e==null?void 0:e.name)||"",endpointUrl:(e==null?void 0:e.endpointUrl)||"",method:(e==null?void 0:e.method)||"GET",scopeType:(e==null?void 0:e.scopeType)||"offer",scopeId:(e==null?void 0:e.scopeId)||"",idParam:(e==null?void 0:e.idParam)||"clickid",enabled:(e==null?void 0:e.enabled)??!0,priority:(e==null?void 0:e.priority)||100,statusMap:(e==null?void 0:e.statusMap)||{reg:"lead",deposit:"sale",open:"open",lp_click:"click"},paramsTemplate:(e==null?void 0:e.paramsTemplate)||{clickid:"{{clickid}}",status:"{{status}}",revenue:"{{revenue}}",currency:"{{currency}}",sub1:"{{sub1}}",sub2:"{{sub2}}"},urlEncode:(e==null?void 0:e.urlEncode)??!0,hmacEnabled:(e==null?void 0:e.hmacEnabled)||!1,hmacSecret:(e==null?void 0:e.hmacSecret)||"",hmacPayloadTpl:(e==null?void 0:e.hmacPayloadTpl)||"",hmacParamName:(e==null?void 0:e.hmacParamName)||"signature",retries:(e==null?void 0:e.retries)||5,timeoutMs:(e==null?void 0:e.timeoutMs)||4e3,backoffBaseSec:(e==null?void 0:e.backoffBaseSec)||2,filterRevenueGt0:(e==null?void 0:e.filterRevenueGt0)||!1,filterExcludeBots:(e==null?void 0:e.filterExcludeBots)??!0}),i=c=>{c.preventDefault(),t(s)},l=(c,d)=>{a(u=>({...u,paramsTemplate:{...u.paramsTemplate,[c]:d}}))},o=(c,d)=>{a(u=>({...u,statusMap:{...u.statusMap,[c]:d}}))};return r.jsxs("form",{onSubmit:i,className:"space-y-6",children:[r.jsxs(Zr,{defaultValue:"basic",className:"w-full",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-4",children:[r.jsx(We,{value:"basic",children:"Основные"}),r.jsx(We,{value:"params",children:"Параметры"}),r.jsx(We,{value:"security",children:"Безопасность"}),r.jsx(We,{value:"filters",children:"Фильтры"})]}),r.jsxs(He,{value:"basic",className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"name",children:"Название"}),r.jsx(ne,{id:"name",value:s.name,onChange:c=>a(d=>({...d,name:c.target.value})),placeholder:"Keitaro Tracker",required:!0,"data-testid":"input-name"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"priority",children:"Приоритет"}),r.jsx(ne,{id:"priority",type:"number",min:"1",max:"999",value:s.priority,onChange:c=>a(d=>({...d,priority:parseInt(c.target.value)})),"data-testid":"input-priority"})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"endpointUrl",children:"URL эндпоинта"}),r.jsx(ne,{id:"endpointUrl",type:"url",value:s.endpointUrl,onChange:c=>a(d=>({...d,endpointUrl:c.target.value})),placeholder:"https://your-tracker.com/postback",required:!0,"data-testid":"input-endpoint-url"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"method",children:"HTTP метод"}),r.jsxs(he,{value:s.method,onValueChange:c=>a(d=>({...d,method:c})),children:[r.jsx(de,{"data-testid":"select-method",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"GET",children:"GET"}),r.jsx(S,{value:"POST",children:"POST"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"scopeType",children:"Область применения"}),r.jsxs(he,{value:s.scopeType,onValueChange:c=>a(d=>({...d,scopeType:c})),children:[r.jsx(de,{"data-testid":"select-scope-type",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"global",children:"Глобальный"}),r.jsx(S,{value:"offer",children:"Оффер"}),r.jsx(S,{value:"campaign",children:"Кампания"}),r.jsx(S,{value:"flow",children:"Поток"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"idParam",children:"ID параметр"}),r.jsxs(he,{value:s.idParam,onValueChange:c=>a(d=>({...d,idParam:c})),children:[r.jsx(de,{"data-testid":"select-id-param",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"clickid",children:"clickid"}),r.jsx(S,{value:"subid",children:"subid"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"retries",children:"Повторы"}),r.jsx(ne,{id:"retries",type:"number",min:"1",max:"10",value:s.retries,onChange:c=>a(d=>({...d,retries:parseInt(c.target.value)})),"data-testid":"input-retries"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"timeoutMs",children:"Таймаут (мс)"}),r.jsx(ne,{id:"timeoutMs",type:"number",min:"1000",max:"30000",value:s.timeoutMs,onChange:c=>a(d=>({...d,timeoutMs:parseInt(c.target.value)})),"data-testid":"input-timeout"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"backoffBaseSec",children:"База для backoff (сек)"}),r.jsx(ne,{id:"backoffBaseSec",type:"number",min:"1",max:"60",value:s.backoffBaseSec,onChange:c=>a(d=>({...d,backoffBaseSec:parseInt(c.target.value)})),"data-testid":"input-backoff"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{id:"enabled",checked:s.enabled,onCheckedChange:c=>a(d=>({...d,enabled:c})),"data-testid":"switch-enabled"}),r.jsx(L,{htmlFor:"enabled",children:"Включен"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{id:"urlEncode",checked:s.urlEncode,onCheckedChange:c=>a(d=>({...d,urlEncode:c})),"data-testid":"switch-url-encode"}),r.jsx(L,{htmlFor:"urlEncode",children:"URL кодирование"})]})]})]}),r.jsxs(He,{value:"params",className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(L,{children:"Маппинг статусов событий"}),r.jsx("div",{className:"space-y-2 mt-2",children:Object.entries(s.statusMap).map(([c,d])=>r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(ne,{value:c,placeholder:"Тип события",readOnly:!0,"data-testid":`input-status-event-${c}`}),r.jsx(ne,{value:d,onChange:u=>o(c,u.target.value),placeholder:"Статус для трекера","data-testid":`input-status-mapped-${c}`})]},c))})]}),r.jsxs("div",{children:[r.jsx(L,{children:"Шаблон параметров (Mustache)"}),r.jsx("div",{className:"space-y-2 mt-2",children:Object.entries(s.paramsTemplate).map(([c,d])=>r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(ne,{value:c,placeholder:"Имя параметра",readOnly:!0,"data-testid":`input-param-name-${c}`}),r.jsx(ne,{value:d,onChange:u=>l(c,u.target.value),placeholder:"Значение (например: {{clickid}})","data-testid":`input-param-value-${c}`})]},c))}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Доступные переменные: clickid, status, revenue, currency, sub1-sub10, country_iso, device_type"})]})]}),r.jsxs(He,{value:"security",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{id:"hmacEnabled",checked:s.hmacEnabled,onCheckedChange:c=>a(d=>({...d,hmacEnabled:c})),"data-testid":"switch-hmac-enabled"}),r.jsx(L,{htmlFor:"hmacEnabled",children:"Включить HMAC подпись"})]}),s.hmacEnabled&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"hmacSecret",children:"HMAC секретный ключ"}),r.jsx(ne,{id:"hmacSecret",type:"password",value:s.hmacSecret,onChange:c=>a(d=>({...d,hmacSecret:c.target.value})),placeholder:"Секретный ключ для подписи","data-testid":"input-hmac-secret"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"hmacPayloadTpl",children:"Шаблон payload для HMAC"}),r.jsx(pt,{id:"hmacPayloadTpl",value:s.hmacPayloadTpl,onChange:c=>a(d=>({...d,hmacPayloadTpl:c.target.value})),placeholder:"{{clickid}}{{status}}{{revenue}}",rows:3,"data-testid":"input-hmac-payload"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"hmacParamName",children:"Имя параметра подписи"}),r.jsx(ne,{id:"hmacParamName",value:s.hmacParamName,onChange:c=>a(d=>({...d,hmacParamName:c.target.value})),placeholder:"signature","data-testid":"input-hmac-param-name"})]})]})]}),r.jsxs(He,{value:"filters",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{id:"filterRevenueGt0",checked:s.filterRevenueGt0,onCheckedChange:c=>a(d=>({...d,filterRevenueGt0:c})),"data-testid":"switch-filter-revenue"}),r.jsx(L,{htmlFor:"filterRevenueGt0",children:"Только события с revenue > 0"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{id:"filterExcludeBots",checked:s.filterExcludeBots,onCheckedChange:c=>a(d=>({...d,filterExcludeBots:c})),"data-testid":"switch-filter-bots"}),r.jsx(L,{htmlFor:"filterExcludeBots",children:"Исключить ботов"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[r.jsx(M,{type:"button",variant:"outline",onClick:n,"data-testid":"button-cancel",children:"Отмена"}),r.jsx(M,{type:"submit","data-testid":"button-submit",children:e?"Обновить":"Создать"})]})]})}function xqe(){const[e,t]=y.useState(null),[n,s]=y.useState(!1),[a,i]=y.useState(!1),[l,o]=y.useState(null),{toast:c}=lt(),d=Et(),{data:u,isLoading:h}=$e({queryKey:["/api/postback-profiles"],queryFn:()=>Te("/api/postback-profiles")}),{data:f}=$e({queryKey:["/api/postback/deliveries",l],queryFn:()=>Te(`/api/postback/deliveries${l?`?profileId=${l}`:""}`),enabled:a}),m=Ee({mutationFn:p=>Te("/api/postback-profiles",{method:"POST",body:JSON.stringify(p)}),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/postback-profiles"]}),s(!1),c({title:"Профиль постбека создан",description:"Новый профиль постбека успешно создан"})},onError:()=>{c({title:"Ошибка",description:"Не удалось создать профиль постбека",variant:"destructive"})}}),v=Ee({mutationFn:({id:p,...N})=>Te(`/api/postback-profiles/${p}`,{method:"PATCH",body:JSON.stringify(N)}),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/postback-profiles"]}),s(!1),t(null),c({title:"Профиль обновлен",description:"Изменения сохранены"})}}),x=Ee({mutationFn:p=>Te(`/api/postback-profiles/${p}`,{method:"DELETE"}),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/postback-profiles"]}),c({title:"Профиль удален",description:"Профиль постбека успешно удален"})}}),w=p=>{e?v.mutate({id:e.id,...p}):m.mutate(p)},j=p=>{t(p),s(!0)},g=p=>{confirm("Вы уверены, что хотите удалить этот профиль постбека?")&&x.mutate(p)},b=p=>p?p>=200&&p<300?r.jsx(le,{variant:"default",className:"bg-green-500",children:"Успех"}):p>=400?r.jsx(le,{variant:"destructive",children:"Ошибка"}):r.jsx(le,{variant:"secondary",children:p}):r.jsx(le,{variant:"secondary",children:"Нет ответа"});return h?r.jsx("div",{className:"flex justify-center p-8","data-testid":"loading-indicator",children:"Загрузка..."}):r.jsxs("div",{className:"space-y-6","data-testid":"postback-profiles-page",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"page-title",children:"Профили постбеков"}),r.jsx("p",{className:"text-muted-foreground","data-testid":"page-description",children:"Настройка и управление профилями постбеков для передачи данных о конверсиях"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(M,{variant:"outline",onClick:()=>i(!0),"data-testid":"button-view-deliveries",children:[r.jsx(hr,{className:"h-4 w-4 mr-2"}),"Логи доставки"]}),r.jsxs(M,{onClick:()=>{t(null),s(!0)},"data-testid":"button-create-postback",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить профиль"]})]})]}),r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsx(ae,{children:"Список профилей постбеков"}),r.jsx(Je,{children:"Управление профилями постбеков для отправки уведомлений о конверсиях"})]}),r.jsxs(H,{children:[r.jsxs(Dt,{"data-testid":"postback-profiles-table",children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Название"}),r.jsx(J,{children:"URL"}),r.jsx(J,{children:"Метод"}),r.jsx(J,{children:"Область"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Приоритет"}),r.jsx(J,{children:"Обновлен"}),r.jsx(J,{children:"Действия"})]})}),r.jsx($t,{children:u==null?void 0:u.map(p=>r.jsxs(Re,{"data-testid":`row-postback-${p.id}`,children:[r.jsx(q,{className:"font-medium","data-testid":`text-name-${p.id}`,children:p.name}),r.jsx(q,{className:"max-w-xs truncate","data-testid":`text-url-${p.id}`,children:p.endpointUrl}),r.jsx(q,{children:r.jsx(le,{variant:"outline","data-testid":`badge-method-${p.id}`,children:p.method})}),r.jsx(q,{children:r.jsx(le,{variant:"secondary","data-testid":`badge-scope-${p.id}`,children:p.scopeType})}),r.jsx(q,{children:r.jsx(le,{variant:p.enabled?"default":"secondary","data-testid":`badge-status-${p.id}`,children:p.enabled?"Активен":"Отключен"})}),r.jsx(q,{"data-testid":`text-priority-${p.id}`,children:p.priority}),r.jsx(q,{children:r.jsx("span",{className:"text-sm text-muted-foreground","data-testid":`text-updated-${p.id}`,children:new Date(p.updatedAt).toLocaleString()})}),r.jsx(q,{children:r.jsxs(Ys,{children:[r.jsx(Xs,{asChild:!0,children:r.jsx(M,{variant:"ghost",size:"sm","data-testid":`button-actions-${p.id}`,children:r.jsx(fr,{className:"h-4 w-4"})})}),r.jsxs(Ps,{children:[r.jsxs(Ft,{onClick:()=>j(p),children:[r.jsx(cs,{className:"h-4 w-4 mr-2"}),"Редактировать"]}),r.jsxs(Ft,{onClick:()=>{o(p.id),i(!0)},children:[r.jsx(hr,{className:"h-4 w-4 mr-2"}),"Логи доставки"]}),r.jsxs(Ft,{children:[r.jsx(Ww,{className:"h-4 w-4 mr-2"}),"Тестировать"]}),r.jsxs(Ft,{onClick:()=>navigator.clipboard.writeText(p.endpointUrl),children:[r.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Копировать URL"]}),r.jsxs(Ft,{className:"text-red-600",onClick:()=>g(p.id),children:[r.jsx(wr,{className:"h-4 w-4 mr-2"}),"Удалить"]})]})]})})]},p.id))})]}),!(u!=null&&u.length)&&r.jsxs("div",{className:"text-center py-8","data-testid":"empty-state",children:[r.jsx("p",{className:"text-muted-foreground mb-4","data-testid":"text-empty-message",children:"Профили постбеков не настроены"}),r.jsxs(M,{onClick:()=>s(!0),"data-testid":"button-create-first-postback",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Создать первый профиль"]})]})]})]}),r.jsx(jt,{open:n,onOpenChange:s,children:r.jsxs(vt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto","data-testid":"dialog-form",children:[r.jsxs(yt,{children:[r.jsx(bt,{"data-testid":"dialog-title",children:e?"Редактировать профиль постбека":"Создать профиль постбека"}),r.jsx(Ur,{"data-testid":"dialog-description",children:"Настройте параметры профиля постбека для отправки уведомлений о конверсиях"})]}),r.jsx(pqe,{postback:e||void 0,onSubmit:w,onCancel:()=>{s(!1),t(null)}})]})}),r.jsx(jt,{open:a,onOpenChange:i,children:r.jsxs(vt,{className:"max-w-6xl max-h-[80vh] overflow-y-auto","data-testid":"dialog-deliveries",children:[r.jsxs(yt,{children:[r.jsx(bt,{children:"Логи доставки постбеков"}),r.jsx(Ur,{children:"История отправки постбеков и их результаты"})]}),r.jsxs(Dt,{"data-testid":"deliveries-table",children:[r.jsx(Mt,{children:r.jsxs(Re,{children:[r.jsx(J,{children:"Время"}),r.jsx(J,{children:"Click ID"}),r.jsx(J,{children:"URL"}),r.jsx(J,{children:"Метод"}),r.jsx(J,{children:"Статус"}),r.jsx(J,{children:"Время ответа"}),r.jsx(J,{children:"Попытка"}),r.jsx(J,{children:"Ошибка"})]})}),r.jsx($t,{children:f==null?void 0:f.map(p=>r.jsxs(Re,{"data-testid":`row-delivery-${p.id}`,children:[r.jsx(q,{"data-testid":`text-delivery-time-${p.id}`,children:new Date(p.createdAt).toLocaleString()}),r.jsx(q,{className:"font-mono text-sm","data-testid":`text-delivery-clickid-${p.id}`,children:p.clickid}),r.jsx(q,{className:"max-w-xs truncate","data-testid":`text-delivery-url-${p.id}`,children:p.requestUrl}),r.jsx(q,{children:r.jsx(le,{variant:"outline","data-testid":`badge-delivery-method-${p.id}`,children:p.requestMethod})}),r.jsx(q,{"data-testid":`badge-delivery-status-${p.id}`,children:b(p.responseCode)}),r.jsx(q,{"data-testid":`text-delivery-duration-${p.id}`,children:p.durationMs&&`${p.durationMs}ms`}),r.jsxs(q,{"data-testid":`text-delivery-attempt-${p.id}`,children:[p.attempt," / ",p.maxAttempts]}),r.jsx(q,{className:"max-w-xs truncate text-red-600","data-testid":`text-delivery-error-${p.id}`,children:p.error})]},p.id))})]}),!(f!=null&&f.length)&&r.jsx("div",{className:"text-center py-8","data-testid":"empty-deliveries",children:r.jsx("p",{className:"text-muted-foreground",children:"Логи доставки не найдены"})})]})})]})}function gqe({postback:e,onSubmit:t,onCancel:n}){const{t:s}=_r(),[a,i]=y.useState({name:(e==null?void 0:e.name)||"",endpoint_url:(e==null?void 0:e.endpoint_url)||"",method:(e==null?void 0:e.method)||"GET",tracker_type:(e==null?void 0:e.tracker_type)||"custom",enabled:(e==null?void 0:e.enabled)??!0,priority:(e==null?void 0:e.priority)||100}),l=o=>{o.preventDefault(),t(a)};return r.jsxs("form",{onSubmit:l,className:"space-y-6",children:[r.jsxs(Zr,{defaultValue:"basic",className:"w-full",children:[r.jsxs(Vr,{className:"grid w-full grid-cols-2",children:[r.jsx(We,{value:"basic",children:s("postbacks.basicTab","Основные")}),r.jsx(We,{value:"settings",children:s("postbacks.settingsTab","Настройки")})]}),r.jsxs(He,{value:"basic",className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"name",children:s("postbacks.name","Название")}),r.jsx(ne,{id:"name",value:a.name,onChange:o=>i(c=>({...c,name:o.target.value})),placeholder:s("postbacks.placeholderName","Keitaro Tracker"),required:!0,"data-testid":"input-name"})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"priority",children:s("postbacks.priority","Приоритет")}),r.jsx(ne,{id:"priority",type:"number",min:"1",max:"999",value:a.priority,onChange:o=>i(c=>({...c,priority:parseInt(o.target.value)})),"data-testid":"input-priority"})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"endpoint_url",children:s("postbacks.endpointUrl","URL эндпоинта")}),r.jsx(ne,{id:"endpoint_url",type:"url",value:a.endpoint_url,onChange:o=>i(c=>({...c,endpoint_url:o.target.value})),placeholder:s("postbacks.placeholderEndpoint","https://your-tracker.com/postback"),required:!0,"data-testid":"input-endpoint-url"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(L,{htmlFor:"method",children:s("postbacks.method","HTTP метод")}),r.jsxs(he,{value:a.method,onValueChange:o=>i(c=>({...c,method:o})),children:[r.jsx(de,{"data-testid":"select-method",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"GET",children:"GET"}),r.jsx(S,{value:"POST",children:"POST"})]})]})]}),r.jsxs("div",{children:[r.jsx(L,{htmlFor:"tracker_type",children:s("postbacks.trackerType","Тип трекера")}),r.jsxs(he,{value:a.tracker_type,onValueChange:o=>i(c=>({...c,tracker_type:o})),children:[r.jsx(de,{"data-testid":"select-tracker-type",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"custom",children:s("postbacks.custom","Пользовательский")}),r.jsx(S,{value:"keitaro",children:"Keitaro"}),r.jsx(S,{value:"binom",children:"Binom"}),r.jsx(S,{value:"voluum",children:"Voluum"})]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{id:"enabled",checked:a.enabled,onCheckedChange:o=>i(c=>({...c,enabled:o})),"data-testid":"switch-enabled"}),r.jsx(L,{htmlFor:"enabled",children:s("common.active","Включен")})]})]}),r.jsx(He,{value:"settings",className:"space-y-4",children:r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium mb-2",children:s("postbacks.advancedSettings","Дополнительные настройки")}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s("postbacks.comingSoon","Расширенные параметры конфигурации будут добавлены в следующих версиях.")})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[r.jsx(M,{type:"button",variant:"outline",onClick:n,"data-testid":"button-cancel",children:s("common.cancel","Отмена")}),r.jsx(M,{type:"submit","data-testid":"button-submit",children:e?s("common.update","Обновить"):s("common.create","Создать")})]})]})}function vqe(){const[e,t]=y.useState(null),[n,s]=y.useState(!1),{toast:a}=lt(),{t:i}=_r(),l=Et(),{data:o=[],isLoading:c}=$e({queryKey:["/api/postback/profiles"],queryFn:()=>Te("/api/postback/profiles")}),d=Ee({mutationFn:x=>Te("/api/postback/profiles","POST",x),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/postback/profiles"]}),s(!1),a({title:i("postbacks.postbackSaved","Профиль постбека создан"),description:i("postbacks.createSuccessDesc","Новый профиль постбека успешно создан")})},onError:()=>{a({title:i("postbacks.error","Ошибка"),description:i("postbacks.createErrorDesc","Не удалось создать профиль постбека"),variant:"destructive"})}}),u=Ee({mutationFn:({id:x,...w})=>Te(`/api/postback/profiles/${x}`,"PUT",w),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/postback/profiles"]}),s(!1),t(null),a({title:i("postbacks.postbackSaved","Профиль обновлен"),description:i("postbacks.updateSuccessDesc","Изменения сохранены")})}}),h=Ee({mutationFn:x=>Te(`/api/postback/profiles/${x}`,"DELETE"),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/postback/profiles"]}),a({title:i("postbacks.postbackDeleted","Профиль удален"),description:i("postbacks.deleteSuccessDesc","Профиль постбека успешно удален")})},onError:x=>{a({title:"Ошибка удаления",description:`Не удалось удалить профиль: ${x.message}`,variant:"destructive"})}}),f=x=>{e?u.mutate({id:e.id,...x}):d.mutate(x)},m=x=>{t(x),s(!0)},v=x=>{confirm(i("common.confirmDelete","Вы уверены, что хотите удалить этот профиль постбека?"))&&h.mutate(x)};return c?r.jsx("div",{className:"flex justify-center p-8","data-testid":"loading-indicator",children:i("common.loading","Загрузка...")}):r.jsxs("div",{className:"space-y-6","data-testid":"postback-profiles-page",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:i("postbacks.configuredPostbacks")}),r.jsx("p",{className:"text-muted-foreground",children:i("postbacks.subtitle")})]}),r.jsxs(M,{onClick:()=>s(!0),"data-testid":"button-create-postback",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),i("postbacks.createPostbackProfile")]})]}),r.jsxs("div",{className:"grid gap-4",children:[o.map(x=>r.jsxs(W,{"data-testid":`card-postback-${x.id}`,children:[r.jsx(se,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ae,{className:"text-lg",children:x.name}),r.jsx(le,{variant:"outline","data-testid":`badge-tracker-type-${x.id}`,children:x.tracker_type}),r.jsx(le,{variant:x.enabled?"default":"secondary","data-testid":`badge-status-${x.id}`,children:x.enabled?i("common.active","Включен"):i("common.disabled","Отключен")})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(M,{variant:"outline",size:"sm",onClick:()=>m(x),"data-testid":`button-edit-${x.id}`,title:i("common.edit","Редактировать"),children:r.jsx(cs,{className:"h-4 w-4"})}),r.jsx(M,{variant:"outline",size:"sm",onClick:()=>v(x.id),disabled:h.isPending,"data-testid":`button-delete-${x.id}`,title:i("common.delete","Удалить"),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(wr,{className:"h-4 w-4"})})]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Эндпоинт"}),r.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[x.method," ",x.endpoint_url]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Последняя доставка"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:x.last_delivery?new Date(x.last_delivery).toLocaleString("ru-RU"):"Не было"})]}),x.delivery_stats&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Отправлено"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:x.delivery_stats.total_sent.toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Успешность"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.delivery_stats.success_rate,"%"]})]})]})]})})]},x.id)),o.length===0&&r.jsx(W,{"data-testid":"empty-state",children:r.jsxs(H,{className:"text-center py-8",children:[r.jsx(qa,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Нет профилей постбеков"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Создайте первый профиль для начала работы с постбеками"}),r.jsxs(M,{onClick:()=>s(!0),children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Создать профиль"]})]})})]}),r.jsx(jt,{open:n,onOpenChange:s,children:r.jsxs(vt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(yt,{children:[r.jsx(bt,{children:e?"Редактировать профиль":"Создать новый профиль"}),r.jsx(Ur,{children:"Настройте параметры отправки постбеков во внешние системы"})]}),r.jsx(gqe,{postback:e||void 0,onSubmit:f,onCancel:()=>{s(!1),t(null)}})]})})]})}async function yqe(e,t={}){const n=t.method??"GET";if(typeof n!="string")throw new Error("Invalid method type");const s=await fetch(e,{...t,method:n});if(!s.ok){const a=await s.text().catch(()=>"");throw new Error(`HTTP ${s.status} ${a}`)}return s.json().catch(()=>({}))}async function bqe(e){return yqe("/api/v3/event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function YY(){const{toast:e}=lt();return{sendEvent:async n=>{try{const s=await bqe(n);return e({title:"Событие отправлено",description:`Conversion ID: ${s.id} (${s.status})`,variant:"default"}),s}catch(s){const a=s instanceof Error?s.message:"Неизвестная ошибка";throw e({title:"Ошибка отправки события",description:a,variant:"destructive"}),s}}}}function jqe({defaultClickId:e="",defaultTxId:t=""}){const{sendEvent:n}=YY(),[s,a]=y.useState(!1),[i,l]=y.useState({type:"reg",clickid:e,txid:t,value:"",currency:"USD",antifraudLevel:"ok"}),o=async c=>{if(c.preventDefault(),!(!i.clickid||!i.txid)){a(!0);try{const d={type:i.type,clickid:i.clickid,txid:i.txid,...i.value&&{value:Number(i.value)},currency:i.currency,meta:{antifraudLevel:i.antifraudLevel,source:"frontend_form"}};await n(d),l(u=>({...u,txid:"",value:""}))}catch{}finally{a(!1)}}};return r.jsxs(W,{className:"w-full max-w-lg",children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"h-5 w-5"}),"Отправка события"]}),r.jsx(Je,{children:"Создание conversion события для тестирования системы"})]}),r.jsx(H,{children:r.jsxs("form",{onSubmit:o,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"type",children:"Тип события"}),r.jsxs(he,{value:i.type,onValueChange:c=>l(d=>({...d,type:c})),children:[r.jsx(de,{"data-testid":"select-event-type",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"reg",children:"Регистрация"}),r.jsx(S,{value:"purchase",children:"Покупка"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"antifraud",children:"Антифрод"}),r.jsxs(he,{value:i.antifraudLevel,onValueChange:c=>l(d=>({...d,antifraudLevel:c})),children:[r.jsx(de,{"data-testid":"select-antifraud-level",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"ok",children:"Чистый"}),r.jsx(S,{value:"soft",children:"Soft"}),r.jsx(S,{value:"hard",children:"Hard"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"clickid",children:"Click ID"}),r.jsx(ne,{id:"clickid",value:i.clickid,onChange:c=>l(d=>({...d,clickid:c.target.value})),placeholder:"click_123_test",required:!0,"data-testid":"input-clickid"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"txid",children:"Transaction ID"}),r.jsx(ne,{id:"txid",value:i.txid,onChange:c=>l(d=>({...d,txid:c.target.value})),placeholder:"tx_456_test",required:!0,"data-testid":"input-txid"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"value",children:"Сумма"}),r.jsx(ne,{id:"value",type:"number",step:"0.01",value:i.value,onChange:c=>l(d=>({...d,value:c.target.value})),placeholder:"100.00","data-testid":"input-value"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(L,{htmlFor:"currency",children:"Валюта"}),r.jsxs(he,{value:i.currency,onValueChange:c=>l(d=>({...d,currency:c})),children:[r.jsx(de,{"data-testid":"select-currency",children:r.jsx(fe,{})}),r.jsxs(ue,{children:[r.jsx(S,{value:"USD",children:"USD"}),r.jsx(S,{value:"EUR",children:"EUR"}),r.jsx(S,{value:"RUB",children:"RUB"}),r.jsx(S,{value:"GBP",children:"GBP"})]})]})]})]}),r.jsx(M,{type:"submit",className:"w-full",disabled:s||!i.clickid||!i.txid,"data-testid":"button-send-event",children:s?r.jsxs(r.Fragment,{children:[r.jsx(bc,{className:"mr-2 h-4 w-4 animate-spin"}),"Отправка..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Is,{className:"mr-2 h-4 w-4"}),"Отправить событие"]})})]})})]})}function wqe({clickid:e,baseLabel:t="test"}){const{sendEvent:n}=YY(),[s,a]=y.useState({}),i=(d,u)=>{a(h=>({...h,[d]:u}))},l=async()=>{const d="reg";i(d,!0);try{await n({type:"reg",clickid:e,txid:`tx_reg_${Date.now()}`,meta:{source:"quick_button",antifraudLevel:"ok"}})}catch{}finally{i(d,!1)}},o=async()=>{const d="purchase";i(d,!0);try{await n({type:"purchase",clickid:e,txid:`tx_purchase_${Date.now()}`,value:Math.floor(Math.random()*200)+50,currency:"USD",meta:{source:"quick_button",antifraudLevel:"ok"}})}catch{}finally{i(d,!1)}},c=async d=>{const u=`af_${d}`;i(u,!0);try{await n({type:"purchase",clickid:e,txid:`tx_af_${d}_${Date.now()}`,value:150,currency:"USD",meta:{source:"antifraud_test",antifraudLevel:d}})}catch{}finally{i(u,!1)}};return e?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-sm font-medium",children:["Быстрые события для: ",r.jsx("code",{className:"bg-muted px-1 rounded",children:e})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(M,{variant:"outline",size:"sm",onClick:l,disabled:s.reg,"data-testid":"button-quick-reg",title:"Отправить событие регистрации",children:[s.reg?r.jsx(bc,{className:"h-4 w-4 animate-spin"}):r.jsx(Si,{className:"h-4 w-4"}),r.jsx("span",{className:"ml-1",children:"Регистрация"})]}),r.jsxs(M,{variant:"outline",size:"sm",onClick:o,disabled:s.purchase,"data-testid":"button-quick-purchase",title:"Отправить событие покупки",children:[s.purchase?r.jsx(bc,{className:"h-4 w-4 animate-spin"}):r.jsx(z2,{className:"h-4 w-4"}),r.jsx("span",{className:"ml-1",children:"Покупка"})]}),r.jsxs(M,{variant:"destructive",size:"sm",onClick:()=>c("soft"),disabled:s.af_soft,"data-testid":"button-quick-soft-af",title:"Тест soft антифрода",children:[s.af_soft?r.jsx(bc,{className:"h-4 w-4 animate-spin"}):"⚠️",r.jsx("span",{className:"ml-1",children:"Soft AF"})]}),r.jsxs(M,{variant:"destructive",size:"sm",onClick:()=>c("hard"),disabled:s.af_hard,"data-testid":"button-quick-hard-af",title:"Тест hard антифрода",children:[s.af_hard?r.jsx(bc,{className:"h-4 w-4 animate-spin"}):"🚫",r.jsx("span",{className:"ml-1",children:"Hard AF"})]})]})]}):r.jsx("div",{className:"text-sm text-muted-foreground p-4 border rounded-lg",children:"Укажите Click ID для быстрых действий"})}function Nqe(e,t){return y.useReducer((n,s)=>t[n][s]??n,e)}var DE="ScrollArea",[XY,lWe]=Bn(DE),[kqe,Za]=XY(DE),ZY=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:a,scrollHideDelay:i=600,...l}=e,[o,c]=y.useState(null),[d,u]=y.useState(null),[h,f]=y.useState(null),[m,v]=y.useState(null),[x,w]=y.useState(null),[j,g]=y.useState(0),[b,p]=y.useState(0),[N,k]=y.useState(!1),[C,_]=y.useState(!1),P=St(t,E=>c(E)),D=Mm(a);return r.jsx(kqe,{scope:n,type:s,dir:D,scrollHideDelay:i,scrollArea:o,viewport:d,onViewportChange:u,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:v,scrollbarXEnabled:N,onScrollbarXEnabledChange:k,scrollbarY:x,onScrollbarYChange:w,scrollbarYEnabled:C,onScrollbarYEnabledChange:_,onCornerWidthChange:g,onCornerHeightChange:p,children:r.jsx(Ze.div,{dir:D,...l,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});ZY.displayName=DE;var QY="ScrollAreaViewport",JY=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:a,...i}=e,l=Za(QY,n),o=y.useRef(null),c=St(t,o,l.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),r.jsx(Ze.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});JY.displayName=QY;var Ul="ScrollAreaScrollbar",ME=y.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=Za(Ul,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=a,o=e.orientation==="horizontal";return y.useEffect(()=>(o?i(!0):l(!0),()=>{o?i(!1):l(!1)}),[o,i,l]),a.type==="hover"?r.jsx(Sqe,{...s,ref:t,forceMount:n}):a.type==="scroll"?r.jsx(Cqe,{...s,ref:t,forceMount:n}):a.type==="auto"?r.jsx(eX,{...s,ref:t,forceMount:n}):a.type==="always"?r.jsx($E,{...s,ref:t}):null});ME.displayName=Ul;var Sqe=y.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=Za(Ul,e.__scopeScrollArea),[i,l]=y.useState(!1);return y.useEffect(()=>{const o=a.scrollArea;let c=0;if(o){const d=()=>{window.clearTimeout(c),l(!0)},u=()=>{c=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",d),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",d),o.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),r.jsx(zn,{present:n||i,children:r.jsx(eX,{"data-state":i?"visible":"hidden",...s,ref:t})})}),Cqe=y.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=Za(Ul,e.__scopeScrollArea),i=e.orientation==="horizontal",l=bN(()=>c("SCROLL_END"),100),[o,c]=Nqe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(o==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[o,a.scrollHideDelay,c]),y.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let h=d[u];const f=()=>{const m=d[u];h!==m&&(c("SCROLL"),l()),h=m};return d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[a.viewport,i,c,l]),r.jsx(zn,{present:n||o!=="hidden",children:r.jsx($E,{"data-state":o==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:Le(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Le(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),eX=y.forwardRef((e,t)=>{const n=Za(Ul,e.__scopeScrollArea),{forceMount:s,...a}=e,[i,l]=y.useState(!1),o=e.orientation==="horizontal",c=bN(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;l(o?d:u)}},10);return km(n.viewport,c),km(n.content,c),r.jsx(zn,{present:s||i,children:r.jsx($E,{"data-state":i?"visible":"hidden",...a,ref:t})})}),$E=y.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,a=Za(Ul,e.__scopeScrollArea),i=y.useRef(null),l=y.useRef(0),[o,c]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=aX(o.viewport,o.content),u={...s,sizes:o,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:f=>l.current=f};function h(f,m){return Oqe(f,l.current,o,m)}return n==="horizontal"?r.jsx(_qe,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const f=a.viewport.scrollLeft,m=IF(f,o,a.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollLeft=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollLeft=h(f,a.dir))}}):n==="vertical"?r.jsx(Pqe,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const f=a.viewport.scrollTop,m=IF(f,o);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollTop=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollTop=h(f))}}):null}),_qe=y.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...a}=e,i=Za(Ul,e.__scopeScrollArea),[l,o]=y.useState(),c=y.useRef(null),d=St(t,c,i.onScrollbarXChange);return y.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),r.jsx(rX,{"data-orientation":"horizontal",...a,ref:d,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":yN(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(f),lX(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:iw(l.paddingLeft),paddingEnd:iw(l.paddingRight)}})}})}),Pqe=y.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...a}=e,i=Za(Ul,e.__scopeScrollArea),[l,o]=y.useState(),c=y.useRef(null),d=St(t,c,i.onScrollbarYChange);return y.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),r.jsx(rX,{"data-orientation":"vertical",...a,ref:d,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":yN(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(i.viewport){const f=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(f),lX(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:iw(l.paddingTop),paddingEnd:iw(l.paddingBottom)}})}})}),[Aqe,tX]=XY(Ul),rX=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:a,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...f}=e,m=Za(Ul,n),[v,x]=y.useState(null),w=St(t,P=>x(P)),j=y.useRef(null),g=y.useRef(""),b=m.viewport,p=s.content-s.viewport,N=Br(u),k=Br(c),C=bN(h,10);function _(P){if(j.current){const D=P.clientX-j.current.left,E=P.clientY-j.current.top;d({x:D,y:E})}}return y.useEffect(()=>{const P=D=>{const E=D.target;(v==null?void 0:v.contains(E))&&N(D,p)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[b,v,p,N]),y.useEffect(k,[s,k]),km(v,C),km(m.content,C),r.jsx(Aqe,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Br(i),onThumbPointerUp:Br(l),onThumbPositionChange:k,onThumbPointerDown:Br(o),children:r.jsx(Ze.div,{...f,ref:w,style:{position:"absolute",...f.style},onPointerDown:Le(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),j.current=v.getBoundingClientRect(),g.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),_(P))}),onPointerMove:Le(e.onPointerMove,_),onPointerUp:Le(e.onPointerUp,P=>{const D=P.target;D.hasPointerCapture(P.pointerId)&&D.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=g.current,m.viewport&&(m.viewport.style.scrollBehavior=""),j.current=null})})})}),aw="ScrollAreaThumb",nX=y.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=tX(aw,e.__scopeScrollArea);return r.jsx(zn,{present:n||a.hasThumb,children:r.jsx(Tqe,{ref:t,...s})})}),Tqe=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...a}=e,i=Za(aw,n),l=tX(aw,n),{onThumbPositionChange:o}=l,c=St(t,h=>l.onThumbChange(h)),d=y.useRef(void 0),u=bN(()=>{d.current&&(d.current(),d.current=void 0)},100);return y.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(u(),!d.current){const m=Rqe(h,o);d.current=m,o()}};return o(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,u,o]),r.jsx(Ze.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Le(e.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),v=h.clientX-m.left,x=h.clientY-m.top;l.onThumbPointerDown({x:v,y:x})}),onPointerUp:Le(e.onPointerUp,l.onThumbPointerUp)})});nX.displayName=aw;var IE="ScrollAreaCorner",sX=y.forwardRef((e,t)=>{const n=Za(IE,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?r.jsx(Eqe,{...e,ref:t}):null});sX.displayName=IE;var Eqe=y.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,a=Za(IE,n),[i,l]=y.useState(0),[o,c]=y.useState(0),d=!!(i&&o);return km(a.scrollbarX,()=>{var h;const u=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),km(a.scrollbarY,()=>{var h;const u=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(u),l(u)}),d?r.jsx(Ze.div,{...s,ref:t,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function iw(e){return e?parseInt(e,10):0}function aX(e,t){const n=e/t;return isNaN(n)?0:n}function yN(e){const t=aX(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function Oqe(e,t,n,s="ltr"){const a=yN(n),i=a/2,l=t||i,o=a-l,c=n.scrollbar.paddingStart+l,d=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,h=s==="ltr"?[0,u]:[u*-1,0];return iX([c,d],h)(e)}function IF(e,t,n="ltr"){const s=yN(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,l=t.content-t.viewport,o=i-s,c=n==="ltr"?[0,l]:[l*-1,0],d=Jx(e,c);return iX([0,l],[0,o])(d)}function iX(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function lX(e,t){return e>0&&e<t}var Rqe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},l=n.left!==i.left,o=n.top!==i.top;(l||o)&&t(),n=i,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function bN(e,t){const n=Br(e),s=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(s.current),[]),y.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function km(e,t){const n=Br(t);pn(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,n])}var oX=ZY,Dqe=JY,Mqe=sX;const cX=y.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(oX,{ref:s,className:Ae("relative overflow-hidden",e),...n,children:[r.jsx(Dqe,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(dX,{}),r.jsx(Mqe,{})]}));cX.displayName=oX.displayName;const dX=y.forwardRef(({className:e,orientation:t="vertical",...n},s)=>r.jsx(ME,{ref:s,orientation:t,className:Ae("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:r.jsx(nX,{className:"relative flex-1 rounded-full bg-border"})}));dX.displayName=ME.displayName;function $qe({events:e=[],isLoading:t=!1}){const n=l=>{switch(l){case"reg":return r.jsx(Ro,{className:"h-4 w-4"});case"purchase":return r.jsx(Rt,{className:"h-4 w-4"});default:return r.jsx(lr,{className:"h-4 w-4"})}},s=l=>{switch(l){case"reg":return"Регистрация";case"purchase":return"Покупка";default:return l}},a=l=>{switch(l){case"initiated":return"default";case"pending":return"secondary";case"approved":return"default";case"declined":return"destructive";default:return"outline"}},i=l=>{switch(l){case"ok":return"text-green-600";case"soft":return"text-yellow-600";case"hard":return"text-red-600";default:return"text-gray-500"}};return t?r.jsxs(W,{children:[r.jsx(se,{children:r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(lr,{className:"h-5 w-5"}),"История событий"]})}),r.jsx(H,{children:r.jsx("div",{className:"flex items-center justify-center h-32",children:r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})})})]}):r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(lr,{className:"h-5 w-5"}),"История событий"]}),r.jsx(Je,{children:"Последние отправленные события"})]}),r.jsx(H,{children:e.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Нет отправленных событий"}):r.jsx(cX,{className:"h-96",children:r.jsx("div",{className:"space-y-4",children:e.map(l=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[n(l.type),r.jsx("span",{className:"font-medium",children:s(l.type)}),r.jsx(le,{variant:a(l.status),children:l.status})]}),l.antifraudLevel&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Lt,{className:"h-4 w-4"}),r.jsx("span",{className:`text-sm font-medium ${i(l.antifraudLevel)}`,children:l.antifraudLevel.toUpperCase()})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Click ID:"}),r.jsx("code",{className:"ml-1 bg-muted px-1 rounded text-xs",children:l.clickid})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"TX ID:"}),r.jsx("code",{className:"ml-1 bg-muted px-1 rounded text-xs",children:l.txid})]})]}),l.value&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:"Сумма:"}),r.jsxs("span",{className:"ml-1",children:[l.value," ",l.currency||"USD"]})]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(l.createdAt).toLocaleString("ru-RU")})]},l.id))})})})]})}function wS(){return r.jsxs("div",{className:"container mx-auto py-8 space-y-8",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ww,{className:"h-6 w-6"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Тестирование событий"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{children:r.jsx(jqe,{defaultClickId:"test_click_123",defaultTxId:"tx_test_456"})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(W,{children:[r.jsxs(se,{children:[r.jsxs(ae,{className:"flex items-center gap-2",children:[r.jsx(ln,{className:"h-5 w-5"}),"Быстрые действия"]}),r.jsx(Je,{children:"Отправка событий одной кнопкой для тестирования"})]}),r.jsx(H,{children:r.jsx(wqe,{clickid:"test_click_123"})})]}),r.jsxs(W,{children:[r.jsx(se,{children:r.jsx(ae,{children:"Инструкции"})}),r.jsxs(H,{className:"space-y-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Типы событий:"}),r.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[r.jsxs("li",{children:[r.jsx("code",{children:"reg"})," — регистрация пользователя"]}),r.jsxs("li",{children:[r.jsx("code",{children:"purchase"})," — покупка/депозит"]})]})]}),r.jsx(wn,{}),r.jsxs("div",{children:[r.jsx("strong",{children:"Антифрод уровни:"}),r.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[r.jsxs("li",{children:[r.jsx("code",{children:"ok"})," — чистый трафик, проходит везде"]}),r.jsxs("li",{children:[r.jsx("code",{children:"soft"})," — backup профиль блокирует approved"]}),r.jsxs("li",{children:[r.jsx("code",{children:"hard"})," — блокируются все профили"]})]})]}),r.jsx(wn,{}),r.jsxs("div",{children:[r.jsx("strong",{children:"Результат:"}),r.jsx("p",{className:"mt-1",children:"После отправки события создается conversion и запускается система постбеков с применением антифрод политик."})]})]})]})]}),r.jsx("div",{children:r.jsx($qe,{events:[{id:"1",type:"reg",clickid:"test_click_123",txid:"tx_reg_001",status:"initiated",antifraudLevel:"ok",createdAt:new Date().toISOString()},{id:"2",type:"purchase",clickid:"test_click_456",txid:"tx_purchase_001",value:150,currency:"USD",status:"approved",antifraudLevel:"soft",createdAt:new Date(Date.now()-3e5).toISOString()}]})})]})]})}function at({children:e,allowedRoles:t}){const{user:n,loading:s}=Jt();return s?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):n?(console.log("ProtectedRoute debug:",{userRole:n.role,allowedRoles:t,includes:t.includes(n.role),path:window.location.pathname}),t.includes(n.role)?(console.log("ACCESS GRANTED - Rendering component"),r.jsx(r.Fragment,{children:e})):(console.log("REDIRECTING TO UNAUTHORIZED - Role mismatch"),r.jsx(wd,{to:"/unauthorized"}))):r.jsx(wd,{to:"/login"})}function Iqe(){const{user:e}=Jt(),{i18n:t}=_r();return y.useEffect(()=>{t.language!=="ru"&&t.changeLanguage("ru")},[t]),r.jsxs(Yee,{children:[r.jsx(tt,{path:"/login",component:$F}),r.jsx(tt,{path:"/login/:role",component:$F}),r.jsx(tt,{path:"/admin",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(TI,{})})}),r.jsx(tt,{path:"/super-admin/dashboard",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(TI,{})})}),r.jsx(tt,{path:"/admin/users",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(zk,{})})}),r.jsx(tt,{path:"/admin/users-management",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(zk,{})})}),r.jsx(tt,{path:"/super-admin/users-management",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(zk,{})})}),r.jsx(tt,{path:"/admin/roles",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(YMe,{})})}),r.jsx(tt,{path:"/admin/user-analytics",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(sFe,{})})}),r.jsx(tt,{path:"/admin/OffersManagement",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(L5e,{})})}),r.jsx(tt,{path:"/admin/OfferDetails/:id",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(U5e,{})})}),r.jsx(tt,{path:"/admin/finances",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(z5e,{})})}),r.jsx(tt,{path:"/admin/fraud-alerts",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(V5e,{})})}),r.jsx(tt,{path:"/super-admin/postbacks",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(q5e,{})})}),r.jsx(tt,{path:"/admin/system-settings",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(K5e,{})})}),r.jsx(tt,{path:"/admin/audit-logs",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(L3e,{})})}),r.jsx(tt,{path:"/admin/postbacks",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(B3e,{})})}),r.jsx(tt,{path:"/admin/blacklist",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(V3e,{})})}),r.jsx(tt,{path:"/admin/analytics",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(W3e,{})})}),r.jsx(tt,{path:"/super-admin/analytics",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(H3e,{})})}),r.jsx(tt,{path:"/admin/postbacks",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(dFe,{})})}),r.jsx(tt,{path:"/admin/support",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(nFe,{})})}),r.jsx(tt,{path:"/advertiser/profile",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(gFe,{})})})}),r.jsx(tt,{path:"/advertiser/documents",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(KVe,{})},"advertiser-documents")})}),r.jsx(tt,{path:"/advertiser/finances",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(yFe,{})})})}),r.jsx(tt,{path:"/advertiser/finance",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(NVe,{})})})}),r.jsx(tt,{path:"/advertiser/offers/new",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(OF,{})})})}),r.jsx(tt,{path:"/advertiser/create",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(OF,{})})})}),r.jsx(tt,{path:"/advertiser/offers/:id/edit",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(pVe,{})})})}),r.jsx(tt,{path:"/advertiser/offers/manage",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(oVe,{})})})}),r.jsx(tt,{path:"/advertiser/offers/:id",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(mVe,{})})})}),r.jsx(tt,{path:"/advertiser/offers",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(rVe,{})})})}),r.jsx(tt,{path:"/advertiser/offers-drag",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(gVe,{})})})}),r.jsx(tt,{path:"/advertiser/received-offers",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(wVe,{})})})}),r.jsx(tt,{path:"/advertiser/access-requests",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(JVe,{})})})}),r.jsx(tt,{path:"/advertiser/notifications",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(eqe,{})})})}),r.jsx(tt,{path:"/advertiser/referrals",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(rqe,{})})})}),r.jsx(tt,{path:"/advertiser/analytics",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(kVe,{})})})}),r.jsx(tt,{path:"/advertiser/postbacks",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(mqe,{})})})}),r.jsx(tt,{path:"/advertiser/postback-profiles",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(xqe,{})})})}),r.jsx(tt,{path:"/advertiser/team",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(CVe,{})},"advertiser-team")})}),r.jsx(tt,{path:"/advertiser/partners",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(sVe,{})})})}),r.jsx(tt,{path:"/advertiser/antifraud",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(HVe,{})},"advertiser-antifraud")})}),r.jsx(tt,{path:"/advertiser/dashboard",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(PF,{})})})}),r.jsx(tt,{path:"/advertiser",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(qr,{children:r.jsx(PF,{})})})}),r.jsx(tt,{path:"/affiliate/offers/:id",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(tFe,{})})})}),r.jsx(tt,{path:"/affiliate/statistics",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(oqe,{})})})}),r.jsx(tt,{path:"/affiliate/live-analytics",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(cqe,{})})})}),r.jsx(tt,{path:"/affiliate/finances",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(dqe,{})})})}),r.jsx(tt,{path:"/affiliate/offers",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(Y3e,{})})})}),r.jsx(tt,{path:"/affiliate/access-requests",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(hqe,{})})})}),r.jsx(tt,{path:"/affiliate/team",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(aVe,{})})})}),r.jsx(tt,{path:"/affiliate/referrals",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(tqe,{})})})}),r.jsx(tt,{path:"/affiliate/notifications",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(iVe,{})})})}),r.jsx(tt,{path:"/affiliate/postbacks",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(vqe,{})})})}),r.jsx(tt,{path:"/affiliate/profile",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(ZVe,{})})})}),r.jsx(tt,{path:"/affiliate/settings",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(QVe,{})})})}),r.jsx(tt,{path:"/affiliate/dashboard",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(MF,{})})})}),r.jsx(tt,{path:"/affiliate",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(MF,{})})})}),r.jsx(tt,{path:"/",children:e?e.role==="super_admin"?r.jsx(wd,{to:"/admin"}):e.role==="advertiser"?r.jsx(wd,{to:"/advertiser"}):e.role==="affiliate"?r.jsx(wd,{to:"/affiliate"}):r.jsx(wd,{to:"/login"}):r.jsx(wd,{to:"/login"})}),r.jsx(tt,{path:"/unauthorized",children:r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Access Denied"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"You don't have permission to access this page."}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-100 rounded",children:[r.jsx("h3",{className:"font-bold",children:"Debug Info:"}),r.jsxs("p",{children:["Current URL: ",window.location.href]}),r.jsxs("p",{children:["Pathname: ",window.location.pathname]}),r.jsx("p",{children:"This page should not be displayed if you have proper access."})]})]})})}),r.jsx(tt,{path:"/admin/events",children:r.jsx(at,{allowedRoles:["super_admin"],children:r.jsx(wS,{})})}),r.jsx(tt,{path:"/advertiser/events",children:r.jsx(at,{allowedRoles:["advertiser"],children:r.jsx(wS,{})})}),r.jsx(tt,{path:"/affiliate/events",children:r.jsx(at,{allowedRoles:["affiliate"],children:r.jsx(ms,{children:r.jsx(wS,{})})})}),r.jsx(tt,{path:"/update-token",component:fqe}),r.jsx(tt,{component:nde})]})}function Fqe(){return r.jsx(U8,{client:io,children:r.jsx(xae,{children:r.jsx(u9,{defaultTheme:"light",children:r.jsx(o9,{children:r.jsx(Eae,{children:r.jsx(Tle,{children:r.jsxs(kae,{children:[r.jsx(Wne,{}),r.jsx(Ole,{}),r.jsx(Iqe,{})]})})})})})})})}const Lqe=new I8({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1,staleTime:5*60*1e3}}});x8(document.getElementById("root")).render(r.jsx(y.StrictMode,{children:r.jsx(u9,{defaultTheme:"light",storageKey:"affiliate-platform-theme",children:r.jsx(U8,{client:Lqe,children:r.jsx(o9,{children:r.jsx(Fqe,{})})})})}));
