var hX=Object.defineProperty;var IE=e=>{throw TypeError(e)};var fX=(e,t,n)=>t in e?hX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ge=(e,t,n)=>fX(e,typeof t!="symbol"?t+"":t,n),kN=(e,t,n)=>t.has(e)||IE("Cannot "+n);var L=(e,t,n)=>(kN(e,t,"read from private field"),n?n.call(e):t.get(e)),ve=(e,t,n)=>t.has(e)?IE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),we=(e,t,n,s)=>(kN(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Pe=(e,t,n)=>(kN(e,t,"access private method"),n);var gy=(e,t,n,s)=>({set _(a){we(e,t,a,n)},get _(){return L(e,t,s)}});function mX(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function er(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var JF={exports:{}},kw={},eL={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av=Symbol.for("react.element"),pX=Symbol.for("react.portal"),xX=Symbol.for("react.fragment"),gX=Symbol.for("react.strict_mode"),vX=Symbol.for("react.profiler"),yX=Symbol.for("react.provider"),bX=Symbol.for("react.context"),jX=Symbol.for("react.forward_ref"),wX=Symbol.for("react.suspense"),NX=Symbol.for("react.memo"),kX=Symbol.for("react.lazy"),FE=Symbol.iterator;function SX(e){return e===null||typeof e!="object"?null:(e=FE&&e[FE]||e["@@iterator"],typeof e=="function"?e:null)}var tL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rL=Object.assign,nL={};function Pm(e,t,n){this.props=e,this.context=t,this.refs=nL,this.updater=n||tL}Pm.prototype.isReactComponent={};Pm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function sL(){}sL.prototype=Pm.prototype;function $_(e,t,n){this.props=e,this.context=t,this.refs=nL,this.updater=n||tL}var I_=$_.prototype=new sL;I_.constructor=$_;rL(I_,Pm.prototype);I_.isPureReactComponent=!0;var LE=Array.isArray,aL=Object.prototype.hasOwnProperty,F_={current:null},iL={key:!0,ref:!0,__self:!0,__source:!0};function lL(e,t,n){var s,a={},i=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)aL.call(t,s)&&!iL.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return{$$typeof:Av,type:e,key:i,ref:l,props:a,_owner:F_.current}}function CX(e,t){return{$$typeof:Av,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function L_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Av}function PX(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var UE=/\/+/g;function SN(e,t){return typeof e=="object"&&e!==null&&e.key!=null?PX(""+e.key):t.toString(36)}function b0(e,t,n,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Av:case pX:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+SN(l,0):s,LE(a)?(n="",e!=null&&(n=e.replace(UE,"$&/")+"/"),b0(a,t,n,"",function(d){return d})):a!=null&&(L_(a)&&(a=CX(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(UE,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=s===""?".":s+":",LE(e))for(var o=0;o<e.length;o++){i=e[o];var c=s+SN(i,o);l+=b0(i,t,n,c,a)}else if(c=SX(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=s+SN(i,o++),l+=b0(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function yy(e,t,n){if(e==null)return e;var s=[],a=0;return b0(e,s,"","",function(i){return t.call(n,i,a++)}),s}function _X(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rs={current:null},j0={transition:null},AX={ReactCurrentDispatcher:Rs,ReactCurrentBatchConfig:j0,ReactCurrentOwner:F_};function oL(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:yy,forEach:function(e,t,n){yy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return yy(e,function(){t++}),t},toArray:function(e){return yy(e,function(t){return t})||[]},only:function(e){if(!L_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qt.Component=Pm;Qt.Fragment=xX;Qt.Profiler=vX;Qt.PureComponent=$_;Qt.StrictMode=gX;Qt.Suspense=wX;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AX;Qt.act=oL;Qt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=rL({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=F_.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)aL.call(t,c)&&!iL.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:Av,type:e.type,key:a,ref:i,props:s,_owner:l}};Qt.createContext=function(e){return e={$$typeof:bX,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yX,_context:e},e.Consumer=e};Qt.createElement=lL;Qt.createFactory=function(e){var t=lL.bind(null,e);return t.type=e,t};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(e){return{$$typeof:jX,render:e}};Qt.isValidElement=L_;Qt.lazy=function(e){return{$$typeof:kX,_payload:{_status:-1,_result:e},_init:_X}};Qt.memo=function(e,t){return{$$typeof:NX,type:e,compare:t===void 0?null:t}};Qt.startTransition=function(e){var t=j0.transition;j0.transition={};try{e()}finally{j0.transition=t}};Qt.unstable_act=oL;Qt.useCallback=function(e,t){return Rs.current.useCallback(e,t)};Qt.useContext=function(e){return Rs.current.useContext(e)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(e){return Rs.current.useDeferredValue(e)};Qt.useEffect=function(e,t){return Rs.current.useEffect(e,t)};Qt.useId=function(){return Rs.current.useId()};Qt.useImperativeHandle=function(e,t,n){return Rs.current.useImperativeHandle(e,t,n)};Qt.useInsertionEffect=function(e,t){return Rs.current.useInsertionEffect(e,t)};Qt.useLayoutEffect=function(e,t){return Rs.current.useLayoutEffect(e,t)};Qt.useMemo=function(e,t){return Rs.current.useMemo(e,t)};Qt.useReducer=function(e,t,n){return Rs.current.useReducer(e,t,n)};Qt.useRef=function(e){return Rs.current.useRef(e)};Qt.useState=function(e){return Rs.current.useState(e)};Qt.useSyncExternalStore=function(e,t,n){return Rs.current.useSyncExternalStore(e,t,n)};Qt.useTransition=function(){return Rs.current.useTransition()};Qt.version="18.3.1";eL.exports=Qt;var v=eL.exports;const X=er(v),cL=mX({__proto__:null,default:X},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TX=v,EX=Symbol.for("react.element"),OX=Symbol.for("react.fragment"),RX=Object.prototype.hasOwnProperty,DX=TX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MX={key:!0,ref:!0,__self:!0,__source:!0};function dL(e,t,n){var s,a={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)RX.call(t,s)&&!MX.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:EX,type:e,key:i,ref:l,props:a,_owner:DX.current}}kw.Fragment=OX;kw.jsx=dL;kw.jsxs=dL;JF.exports=kw;var r=JF.exports,uL={exports:{}},Na={},hL={exports:{}},fL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,$){var G=E.length;E.push($);e:for(;0<G;){var oe=G-1>>>1,ee=E[oe];if(0<a(ee,$))E[oe]=$,E[G]=ee,G=oe;else break e}}function n(E){return E.length===0?null:E[0]}function s(E){if(E.length===0)return null;var $=E[0],G=E.pop();if(G!==$){E[0]=G;e:for(var oe=0,ee=E.length,ce=ee>>>1;oe<ce;){var ye=2*(oe+1)-1,je=E[ye],$e=ye+1,ke=E[$e];if(0>a(je,G))$e<ee&&0>a(ke,je)?(E[oe]=ke,E[$e]=G,oe=$e):(E[oe]=je,E[ye]=G,oe=ye);else if($e<ee&&0>a(ke,G))E[oe]=ke,E[$e]=G,oe=$e;else break e}}return $}function a(E,$){var G=E.sortIndex-$.sortIndex;return G!==0?G:E.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,f=3,m=!1,g=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(E){for(var $=n(d);$!==null;){if($.callback===null)s(d);else if($.startTime<=E)s(d),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(d)}}function p(E){if(x=!1,b(E),!g)if(n(c)!==null)g=!0,z(N);else{var $=n(d);$!==null&&U(p,$.startTime-E)}}function N(E,$){g=!1,x&&(x=!1,j(P),P=-1),m=!0;var G=f;try{for(b($),h=n(c);h!==null&&(!(h.expirationTime>$)||E&&!O());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,f=h.priorityLevel;var ee=oe(h.expirationTime<=$);$=e.unstable_now(),typeof ee=="function"?h.callback=ee:h===n(c)&&s(c),b($)}else s(c);h=n(c)}if(h!==null)var ce=!0;else{var ye=n(d);ye!==null&&U(p,ye.startTime-$),ce=!1}return ce}finally{h=null,f=G,m=!1}}var k=!1,S=null,P=-1,_=5,R=-1;function O(){return!(e.unstable_now()-R<_)}function M(){if(S!==null){var E=e.unstable_now();R=E;var $=!0;try{$=S(!0,E)}finally{$?A():(k=!1,S=null)}}else k=!1}var A;if(typeof y=="function")A=function(){y(M)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,B=T.port2;T.port1.onmessage=M,A=function(){B.postMessage(null)}}else A=function(){w(M,0)};function z(E){S=E,k||(k=!0,A())}function U(E,$){P=w(function(){E(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,z(N))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(E){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var G=f;f=$;try{return E()}finally{f=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,$){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var G=f;f=E;try{return $()}finally{f=G}},e.unstable_scheduleCallback=function(E,$,G){var oe=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?oe+G:oe):G=oe,E){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=G+ee,E={id:u++,callback:$,priorityLevel:E,startTime:G,expirationTime:ee,sortIndex:-1},G>oe?(E.sortIndex=G,t(d,E),n(c)===null&&E===n(d)&&(x?(j(P),P=-1):x=!0,U(p,G-oe))):(E.sortIndex=ee,t(c,E),g||m||(g=!0,z(N))),E},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(E){var $=f;return function(){var G=f;f=$;try{return E.apply(this,arguments)}finally{f=G}}}})(fL);hL.exports=fL;var $X=hL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IX=v,wa=$X;function Ve(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mL=new Set,Px={};function Ru(e,t){_f(e,t),_f(e+"Capture",t)}function _f(e,t){for(Px[e]=t,e=0;e<t.length;e++)mL.add(t[e])}var yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_S=Object.prototype.hasOwnProperty,FX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,BE={},zE={};function LX(e){return _S.call(zE,e)?!0:_S.call(BE,e)?!1:FX.test(e)?zE[e]=!0:(BE[e]=!0,!1)}function UX(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function BX(e,t,n,s){if(t===null||typeof t>"u"||UX(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ds(e,t,n,s,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Jn[e]=new Ds(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Jn[t]=new Ds(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Jn[e]=new Ds(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Jn[e]=new Ds(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Jn[e]=new Ds(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Jn[e]=new Ds(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Jn[e]=new Ds(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Jn[e]=new Ds(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Jn[e]=new Ds(e,5,!1,e.toLowerCase(),null,!1,!1)});var U_=/[\-:]([a-z])/g;function B_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(U_,B_);Jn[t]=new Ds(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(U_,B_);Jn[t]=new Ds(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(U_,B_);Jn[t]=new Ds(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Jn[e]=new Ds(e,1,!1,e.toLowerCase(),null,!1,!1)});Jn.xlinkHref=new Ds("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Jn[e]=new Ds(e,1,!1,e.toLowerCase(),null,!0,!0)});function z_(e,t,n,s){var a=Jn.hasOwnProperty(t)?Jn[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(BX(t,n,a,s)&&(n=null),s||a===null?LX(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Eo=IX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,by=Symbol.for("react.element"),ch=Symbol.for("react.portal"),dh=Symbol.for("react.fragment"),V_=Symbol.for("react.strict_mode"),AS=Symbol.for("react.profiler"),pL=Symbol.for("react.provider"),xL=Symbol.for("react.context"),q_=Symbol.for("react.forward_ref"),TS=Symbol.for("react.suspense"),ES=Symbol.for("react.suspense_list"),W_=Symbol.for("react.memo"),Xo=Symbol.for("react.lazy"),gL=Symbol.for("react.offscreen"),VE=Symbol.iterator;function cp(e){return e===null||typeof e!="object"?null:(e=VE&&e[VE]||e["@@iterator"],typeof e=="function"?e:null)}var Gr=Object.assign,CN;function Fp(e){if(CN===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);CN=t&&t[1]||""}return`
`+CN+e}var PN=!1;function _N(e,t){if(!e||PN)return"";PN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{PN=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fp(e):""}function zX(e){switch(e.tag){case 5:return Fp(e.type);case 16:return Fp("Lazy");case 13:return Fp("Suspense");case 19:return Fp("SuspenseList");case 0:case 2:case 15:return e=_N(e.type,!1),e;case 11:return e=_N(e.type.render,!1),e;case 1:return e=_N(e.type,!0),e;default:return""}}function OS(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case dh:return"Fragment";case ch:return"Portal";case AS:return"Profiler";case V_:return"StrictMode";case TS:return"Suspense";case ES:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xL:return(e.displayName||"Context")+".Consumer";case pL:return(e._context.displayName||"Context")+".Provider";case q_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W_:return t=e.displayName||null,t!==null?t:OS(e.type)||"Memo";case Xo:t=e._payload,e=e._init;try{return OS(e(t))}catch{}}return null}function VX(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return OS(t);case 8:return t===V_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qX(e){var t=vL(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jy(e){e._valueTracker||(e._valueTracker=qX(e))}function yL(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=vL(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Y0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function RS(e,t){var n=t.checked;return Gr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function qE(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Mc(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bL(e,t){t=t.checked,t!=null&&z_(e,"checked",t,!1)}function DS(e,t){bL(e,t);var n=Mc(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?MS(e,t.type,n):t.hasOwnProperty("defaultValue")&&MS(e,t.type,Mc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function WE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function MS(e,t,n){(t!=="number"||Y0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Lp=Array.isArray;function _h(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Mc(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function $S(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ve(91));return Gr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function HE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ve(92));if(Lp(n)){if(1<n.length)throw Error(Ve(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Mc(n)}}function jL(e,t){var n=Mc(t.value),s=Mc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function KE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wL(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IS(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wL(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wy,NL=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wy=wy||document.createElement("div"),wy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _x(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WX=["Webkit","ms","Moz","O"];Object.keys(Jp).forEach(function(e){WX.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jp[t]=Jp[e]})});function kL(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jp.hasOwnProperty(e)&&Jp[e]?(""+t).trim():t+"px"}function SL(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=kL(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var HX=Gr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function FS(e,t){if(t){if(HX[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ve(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ve(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ve(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ve(62))}}function LS(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var US=null;function H_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var BS=null,Ah=null,Th=null;function GE(e){if(e=Ov(e)){if(typeof BS!="function")throw Error(Ve(280));var t=e.stateNode;t&&(t=Aw(t),BS(e.stateNode,e.type,t))}}function CL(e){Ah?Th?Th.push(e):Th=[e]:Ah=e}function PL(){if(Ah){var e=Ah,t=Th;if(Th=Ah=null,GE(e),t)for(e=0;e<t.length;e++)GE(t[e])}}function _L(e,t){return e(t)}function AL(){}var AN=!1;function TL(e,t,n){if(AN)return e(t,n);AN=!0;try{return _L(e,t,n)}finally{AN=!1,(Ah!==null||Th!==null)&&(AL(),PL())}}function Ax(e,t){var n=e.stateNode;if(n===null)return null;var s=Aw(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ve(231,t,typeof n));return n}var zS=!1;if(yo)try{var dp={};Object.defineProperty(dp,"passive",{get:function(){zS=!0}}),window.addEventListener("test",dp,dp),window.removeEventListener("test",dp,dp)}catch{zS=!1}function KX(e,t,n,s,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var ex=!1,X0=null,Z0=!1,VS=null,GX={onError:function(e){ex=!0,X0=e}};function YX(e,t,n,s,a,i,l,o,c){ex=!1,X0=null,KX.apply(GX,arguments)}function XX(e,t,n,s,a,i,l,o,c){if(YX.apply(this,arguments),ex){if(ex){var d=X0;ex=!1,X0=null}else throw Error(Ve(198));Z0||(Z0=!0,VS=d)}}function Du(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function EL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function YE(e){if(Du(e)!==e)throw Error(Ve(188))}function ZX(e){var t=e.alternate;if(!t){if(t=Du(e),t===null)throw Error(Ve(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return YE(a),e;if(i===s)return YE(a),t;i=i.sibling}throw Error(Ve(188))}if(n.return!==s.return)n=a,s=i;else{for(var l=!1,o=a.child;o;){if(o===n){l=!0,n=a,s=i;break}if(o===s){l=!0,s=a,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,s=a;break}if(o===s){l=!0,s=i,n=a;break}o=o.sibling}if(!l)throw Error(Ve(189))}}if(n.alternate!==s)throw Error(Ve(190))}if(n.tag!==3)throw Error(Ve(188));return n.stateNode.current===n?e:t}function OL(e){return e=ZX(e),e!==null?RL(e):null}function RL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=RL(e);if(t!==null)return t;e=e.sibling}return null}var DL=wa.unstable_scheduleCallback,XE=wa.unstable_cancelCallback,QX=wa.unstable_shouldYield,JX=wa.unstable_requestPaint,an=wa.unstable_now,eZ=wa.unstable_getCurrentPriorityLevel,K_=wa.unstable_ImmediatePriority,ML=wa.unstable_UserBlockingPriority,Q0=wa.unstable_NormalPriority,tZ=wa.unstable_LowPriority,$L=wa.unstable_IdlePriority,Sw=null,bl=null;function rZ(e){if(bl&&typeof bl.onCommitFiberRoot=="function")try{bl.onCommitFiberRoot(Sw,e,void 0,(e.current.flags&128)===128)}catch{}}var Ci=Math.clz32?Math.clz32:aZ,nZ=Math.log,sZ=Math.LN2;function aZ(e){return e>>>=0,e===0?32:31-(nZ(e)/sZ|0)|0}var Ny=64,ky=4194304;function Up(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function J0(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var o=l&~a;o!==0?s=Up(o):(i&=l,i!==0&&(s=Up(i)))}else l=n&~a,l!==0?s=Up(l):i!==0&&(s=Up(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Ci(t),a=1<<n,s|=e[n],t&=~a;return s}function iZ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lZ(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Ci(i),o=1<<l,c=a[l];c===-1?(!(o&n)||o&s)&&(a[l]=iZ(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function qS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function IL(){var e=Ny;return Ny<<=1,!(Ny&4194240)&&(Ny=64),e}function TN(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Tv(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ci(t),e[t]=n}function oZ(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ci(n),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~i}}function G_(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Ci(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var Sr=0;function FL(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var LL,Y_,UL,BL,zL,WS=!1,Sy=[],kc=null,Sc=null,Cc=null,Tx=new Map,Ex=new Map,ec=[],cZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZE(e,t){switch(e){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":Sc=null;break;case"mouseover":case"mouseout":Cc=null;break;case"pointerover":case"pointerout":Tx.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ex.delete(t.pointerId)}}function up(e,t,n,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ov(t),t!==null&&Y_(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function dZ(e,t,n,s,a){switch(t){case"focusin":return kc=up(kc,e,t,n,s,a),!0;case"dragenter":return Sc=up(Sc,e,t,n,s,a),!0;case"mouseover":return Cc=up(Cc,e,t,n,s,a),!0;case"pointerover":var i=a.pointerId;return Tx.set(i,up(Tx.get(i)||null,e,t,n,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Ex.set(i,up(Ex.get(i)||null,e,t,n,s,a)),!0}return!1}function VL(e){var t=kd(e.target);if(t!==null){var n=Du(t);if(n!==null){if(t=n.tag,t===13){if(t=EL(n),t!==null){e.blockedOn=t,zL(e.priority,function(){UL(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function w0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=HS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);US=s,n.target.dispatchEvent(s),US=null}else return t=Ov(n),t!==null&&Y_(t),e.blockedOn=n,!1;t.shift()}return!0}function QE(e,t,n){w0(e)&&n.delete(t)}function uZ(){WS=!1,kc!==null&&w0(kc)&&(kc=null),Sc!==null&&w0(Sc)&&(Sc=null),Cc!==null&&w0(Cc)&&(Cc=null),Tx.forEach(QE),Ex.forEach(QE)}function hp(e,t){e.blockedOn===t&&(e.blockedOn=null,WS||(WS=!0,wa.unstable_scheduleCallback(wa.unstable_NormalPriority,uZ)))}function Ox(e){function t(a){return hp(a,e)}if(0<Sy.length){hp(Sy[0],e);for(var n=1;n<Sy.length;n++){var s=Sy[n];s.blockedOn===e&&(s.blockedOn=null)}}for(kc!==null&&hp(kc,e),Sc!==null&&hp(Sc,e),Cc!==null&&hp(Cc,e),Tx.forEach(t),Ex.forEach(t),n=0;n<ec.length;n++)s=ec[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<ec.length&&(n=ec[0],n.blockedOn===null);)VL(n),n.blockedOn===null&&ec.shift()}var Eh=Eo.ReactCurrentBatchConfig,eb=!0;function hZ(e,t,n,s){var a=Sr,i=Eh.transition;Eh.transition=null;try{Sr=1,X_(e,t,n,s)}finally{Sr=a,Eh.transition=i}}function fZ(e,t,n,s){var a=Sr,i=Eh.transition;Eh.transition=null;try{Sr=4,X_(e,t,n,s)}finally{Sr=a,Eh.transition=i}}function X_(e,t,n,s){if(eb){var a=HS(e,t,n,s);if(a===null)UN(e,t,s,tb,n),ZE(e,s);else if(dZ(a,e,t,n,s))s.stopPropagation();else if(ZE(e,s),t&4&&-1<cZ.indexOf(e)){for(;a!==null;){var i=Ov(a);if(i!==null&&LL(i),i=HS(e,t,n,s),i===null&&UN(e,t,s,tb,n),i===a)break;a=i}a!==null&&s.stopPropagation()}else UN(e,t,s,null,n)}}var tb=null;function HS(e,t,n,s){if(tb=null,e=H_(s),e=kd(e),e!==null)if(t=Du(e),t===null)e=null;else if(n=t.tag,n===13){if(e=EL(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return tb=e,null}function qL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eZ()){case K_:return 1;case ML:return 4;case Q0:case tZ:return 16;case $L:return 536870912;default:return 16}default:return 16}}var xc=null,Z_=null,N0=null;function WL(){if(N0)return N0;var e,t=Z_,n=t.length,s,a="value"in xc?xc.value:xc.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(s=1;s<=l&&t[n-s]===a[i-s];s++);return N0=a.slice(e,1<s?1-s:void 0)}function k0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cy(){return!0}function JE(){return!1}function ka(e){function t(n,s,a,i,l){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cy:JE,this.isPropagationStopped=JE,this}return Gr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cy)},persist:function(){},isPersistent:Cy}),t}var _m={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Q_=ka(_m),Ev=Gr({},_m,{view:0,detail:0}),mZ=ka(Ev),EN,ON,fp,Cw=Gr({},Ev,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:J_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fp&&(fp&&e.type==="mousemove"?(EN=e.screenX-fp.screenX,ON=e.screenY-fp.screenY):ON=EN=0,fp=e),EN)},movementY:function(e){return"movementY"in e?e.movementY:ON}}),eO=ka(Cw),pZ=Gr({},Cw,{dataTransfer:0}),xZ=ka(pZ),gZ=Gr({},Ev,{relatedTarget:0}),RN=ka(gZ),vZ=Gr({},_m,{animationName:0,elapsedTime:0,pseudoElement:0}),yZ=ka(vZ),bZ=Gr({},_m,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jZ=ka(bZ),wZ=Gr({},_m,{data:0}),tO=ka(wZ),NZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CZ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=SZ[e])?!!t[e]:!1}function J_(){return CZ}var PZ=Gr({},Ev,{key:function(e){if(e.key){var t=NZ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=k0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kZ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:J_,charCode:function(e){return e.type==="keypress"?k0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?k0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_Z=ka(PZ),AZ=Gr({},Cw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rO=ka(AZ),TZ=Gr({},Ev,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:J_}),EZ=ka(TZ),OZ=Gr({},_m,{propertyName:0,elapsedTime:0,pseudoElement:0}),RZ=ka(OZ),DZ=Gr({},Cw,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),MZ=ka(DZ),$Z=[9,13,27,32],eA=yo&&"CompositionEvent"in window,tx=null;yo&&"documentMode"in document&&(tx=document.documentMode);var IZ=yo&&"TextEvent"in window&&!tx,HL=yo&&(!eA||tx&&8<tx&&11>=tx),nO=" ",sO=!1;function KL(e,t){switch(e){case"keyup":return $Z.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var uh=!1;function FZ(e,t){switch(e){case"compositionend":return GL(t);case"keypress":return t.which!==32?null:(sO=!0,nO);case"textInput":return e=t.data,e===nO&&sO?null:e;default:return null}}function LZ(e,t){if(uh)return e==="compositionend"||!eA&&KL(e,t)?(e=WL(),N0=Z_=xc=null,uh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return HL&&t.locale!=="ko"?null:t.data;default:return null}}var UZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aO(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!UZ[e.type]:t==="textarea"}function YL(e,t,n,s){CL(s),t=rb(t,"onChange"),0<t.length&&(n=new Q_("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var rx=null,Rx=null;function BZ(e){i6(e,0)}function Pw(e){var t=mh(e);if(yL(t))return e}function zZ(e,t){if(e==="change")return t}var XL=!1;if(yo){var DN;if(yo){var MN="oninput"in document;if(!MN){var iO=document.createElement("div");iO.setAttribute("oninput","return;"),MN=typeof iO.oninput=="function"}DN=MN}else DN=!1;XL=DN&&(!document.documentMode||9<document.documentMode)}function lO(){rx&&(rx.detachEvent("onpropertychange",ZL),Rx=rx=null)}function ZL(e){if(e.propertyName==="value"&&Pw(Rx)){var t=[];YL(t,Rx,e,H_(e)),TL(BZ,t)}}function VZ(e,t,n){e==="focusin"?(lO(),rx=t,Rx=n,rx.attachEvent("onpropertychange",ZL)):e==="focusout"&&lO()}function qZ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pw(Rx)}function WZ(e,t){if(e==="click")return Pw(t)}function HZ(e,t){if(e==="input"||e==="change")return Pw(t)}function KZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ri=typeof Object.is=="function"?Object.is:KZ;function Dx(e,t){if(Ri(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!_S.call(t,a)||!Ri(e[a],t[a]))return!1}return!0}function oO(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cO(e,t){var n=oO(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oO(n)}}function QL(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QL(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function JL(){for(var e=window,t=Y0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Y0(e.document)}return t}function tA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function GZ(e){var t=JL(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&QL(n.ownerDocument.documentElement,n)){if(s!==null&&tA(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=cO(n,i);var l=cO(n,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var YZ=yo&&"documentMode"in document&&11>=document.documentMode,hh=null,KS=null,nx=null,GS=!1;function dO(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;GS||hh==null||hh!==Y0(s)||(s=hh,"selectionStart"in s&&tA(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),nx&&Dx(nx,s)||(nx=s,s=rb(KS,"onSelect"),0<s.length&&(t=new Q_("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=hh)))}function Py(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fh={animationend:Py("Animation","AnimationEnd"),animationiteration:Py("Animation","AnimationIteration"),animationstart:Py("Animation","AnimationStart"),transitionend:Py("Transition","TransitionEnd")},$N={},e6={};yo&&(e6=document.createElement("div").style,"AnimationEvent"in window||(delete fh.animationend.animation,delete fh.animationiteration.animation,delete fh.animationstart.animation),"TransitionEvent"in window||delete fh.transitionend.transition);function _w(e){if($N[e])return $N[e];if(!fh[e])return e;var t=fh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in e6)return $N[e]=t[n];return e}var t6=_w("animationend"),r6=_w("animationiteration"),n6=_w("animationstart"),s6=_w("transitionend"),a6=new Map,uO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gc(e,t){a6.set(e,t),Ru(t,[e])}for(var IN=0;IN<uO.length;IN++){var FN=uO[IN],XZ=FN.toLowerCase(),ZZ=FN[0].toUpperCase()+FN.slice(1);Gc(XZ,"on"+ZZ)}Gc(t6,"onAnimationEnd");Gc(r6,"onAnimationIteration");Gc(n6,"onAnimationStart");Gc("dblclick","onDoubleClick");Gc("focusin","onFocus");Gc("focusout","onBlur");Gc(s6,"onTransitionEnd");_f("onMouseEnter",["mouseout","mouseover"]);_f("onMouseLeave",["mouseout","mouseover"]);_f("onPointerEnter",["pointerout","pointerover"]);_f("onPointerLeave",["pointerout","pointerover"]);Ru("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ru("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ru("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ru("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ru("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ru("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bp));function hO(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,XX(s,t,void 0,e),e.currentTarget=null}function i6(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;hO(a,o,d),i=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;hO(a,o,d),i=c}}}if(Z0)throw e=VS,Z0=!1,VS=null,e}function Mr(e,t){var n=t[JS];n===void 0&&(n=t[JS]=new Set);var s=e+"__bubble";n.has(s)||(l6(t,e,2,!1),n.add(s))}function LN(e,t,n){var s=0;t&&(s|=4),l6(n,e,s,t)}var _y="_reactListening"+Math.random().toString(36).slice(2);function Mx(e){if(!e[_y]){e[_y]=!0,mL.forEach(function(n){n!=="selectionchange"&&(QZ.has(n)||LN(n,!1,e),LN(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_y]||(t[_y]=!0,LN("selectionchange",!1,t))}}function l6(e,t,n,s){switch(qL(t)){case 1:var a=hZ;break;case 4:a=fZ;break;default:a=X_}n=a.bind(null,t,n,e),a=void 0,!zS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function UN(e,t,n,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=kd(o),l===null)return;if(c=l.tag,c===5||c===6){s=i=l;continue e}o=o.parentNode}}s=s.return}TL(function(){var d=i,u=H_(n),h=[];e:{var f=a6.get(e);if(f!==void 0){var m=Q_,g=e;switch(e){case"keypress":if(k0(n)===0)break e;case"keydown":case"keyup":m=_Z;break;case"focusin":g="focus",m=RN;break;case"focusout":g="blur",m=RN;break;case"beforeblur":case"afterblur":m=RN;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=eO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=xZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=EZ;break;case t6:case r6:case n6:m=yZ;break;case s6:m=RZ;break;case"scroll":m=mZ;break;case"wheel":m=MZ;break;case"copy":case"cut":case"paste":m=jZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=rO}var x=(t&4)!==0,w=!x&&e==="scroll",j=x?f!==null?f+"Capture":null:f;x=[];for(var y=d,b;y!==null;){b=y;var p=b.stateNode;if(b.tag===5&&p!==null&&(b=p,j!==null&&(p=Ax(y,j),p!=null&&x.push($x(y,p,b)))),w)break;y=y.return}0<x.length&&(f=new m(f,g,null,n,u),h.push({event:f,listeners:x}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==US&&(g=n.relatedTarget||n.fromElement)&&(kd(g)||g[bo]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=d,g=g?kd(g):null,g!==null&&(w=Du(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=d),m!==g)){if(x=eO,p="onMouseLeave",j="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(x=rO,p="onPointerLeave",j="onPointerEnter",y="pointer"),w=m==null?f:mh(m),b=g==null?f:mh(g),f=new x(p,y+"leave",m,n,u),f.target=w,f.relatedTarget=b,p=null,kd(u)===d&&(x=new x(j,y+"enter",g,n,u),x.target=b,x.relatedTarget=w,p=x),w=p,m&&g)t:{for(x=m,j=g,y=0,b=x;b;b=Wu(b))y++;for(b=0,p=j;p;p=Wu(p))b++;for(;0<y-b;)x=Wu(x),y--;for(;0<b-y;)j=Wu(j),b--;for(;y--;){if(x===j||j!==null&&x===j.alternate)break t;x=Wu(x),j=Wu(j)}x=null}else x=null;m!==null&&fO(h,f,m,x,!1),g!==null&&w!==null&&fO(h,w,g,x,!0)}}e:{if(f=d?mh(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=zZ;else if(aO(f))if(XL)N=HZ;else{N=qZ;var k=VZ}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=WZ);if(N&&(N=N(e,d))){YL(h,N,n,u);break e}k&&k(e,f,d),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&MS(f,"number",f.value)}switch(k=d?mh(d):window,e){case"focusin":(aO(k)||k.contentEditable==="true")&&(hh=k,KS=d,nx=null);break;case"focusout":nx=KS=hh=null;break;case"mousedown":GS=!0;break;case"contextmenu":case"mouseup":case"dragend":GS=!1,dO(h,n,u);break;case"selectionchange":if(YZ)break;case"keydown":case"keyup":dO(h,n,u)}var S;if(eA)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else uh?KL(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(HL&&n.locale!=="ko"&&(uh||P!=="onCompositionStart"?P==="onCompositionEnd"&&uh&&(S=WL()):(xc=u,Z_="value"in xc?xc.value:xc.textContent,uh=!0)),k=rb(d,P),0<k.length&&(P=new tO(P,e,null,n,u),h.push({event:P,listeners:k}),S?P.data=S:(S=GL(n),S!==null&&(P.data=S)))),(S=IZ?FZ(e,n):LZ(e,n))&&(d=rb(d,"onBeforeInput"),0<d.length&&(u=new tO("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=S))}i6(h,t)})}function $x(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rb(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Ax(e,n),i!=null&&s.unshift($x(e,i,a)),i=Ax(e,t),i!=null&&s.push($x(e,i,a))),e=e.return}return s}function Wu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function fO(e,t,n,s,a){for(var i=t._reactName,l=[];n!==null&&n!==s;){var o=n,c=o.alternate,d=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&d!==null&&(o=d,a?(c=Ax(n,i),c!=null&&l.unshift($x(n,c,o))):a||(c=Ax(n,i),c!=null&&l.push($x(n,c,o)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var JZ=/\r\n?/g,eQ=/\u0000|\uFFFD/g;function mO(e){return(typeof e=="string"?e:""+e).replace(JZ,`
`).replace(eQ,"")}function Ay(e,t,n){if(t=mO(t),mO(e)!==t&&n)throw Error(Ve(425))}function nb(){}var YS=null,XS=null;function ZS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var QS=typeof setTimeout=="function"?setTimeout:void 0,tQ=typeof clearTimeout=="function"?clearTimeout:void 0,pO=typeof Promise=="function"?Promise:void 0,rQ=typeof queueMicrotask=="function"?queueMicrotask:typeof pO<"u"?function(e){return pO.resolve(null).then(e).catch(nQ)}:QS;function nQ(e){setTimeout(function(){throw e})}function BN(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Ox(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Ox(t)}function Pc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xO(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Am=Math.random().toString(36).slice(2),cl="__reactFiber$"+Am,Ix="__reactProps$"+Am,bo="__reactContainer$"+Am,JS="__reactEvents$"+Am,sQ="__reactListeners$"+Am,aQ="__reactHandles$"+Am;function kd(e){var t=e[cl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bo]||n[cl]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xO(e);e!==null;){if(n=e[cl])return n;e=xO(e)}return t}e=n,n=e.parentNode}return null}function Ov(e){return e=e[cl]||e[bo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ve(33))}function Aw(e){return e[Ix]||null}var e2=[],ph=-1;function Yc(e){return{current:e}}function Fr(e){0>ph||(e.current=e2[ph],e2[ph]=null,ph--)}function Er(e,t){ph++,e2[ph]=e.current,e.current=t}var $c={},hs=Yc($c),qs=Yc(!1),lu=$c;function Af(e,t){var n=e.type.contextTypes;if(!n)return $c;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ws(e){return e=e.childContextTypes,e!=null}function sb(){Fr(qs),Fr(hs)}function gO(e,t,n){if(hs.current!==$c)throw Error(Ve(168));Er(hs,t),Er(qs,n)}function o6(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(Ve(108,VX(e)||"Unknown",a));return Gr({},n,s)}function ab(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$c,lu=hs.current,Er(hs,e),Er(qs,qs.current),!0}function vO(e,t,n){var s=e.stateNode;if(!s)throw Error(Ve(169));n?(e=o6(e,t,lu),s.__reactInternalMemoizedMergedChildContext=e,Fr(qs),Fr(hs),Er(hs,e)):Fr(qs),Er(qs,n)}var Kl=null,Tw=!1,zN=!1;function c6(e){Kl===null?Kl=[e]:Kl.push(e)}function iQ(e){Tw=!0,c6(e)}function Xc(){if(!zN&&Kl!==null){zN=!0;var e=0,t=Sr;try{var n=Kl;for(Sr=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Kl=null,Tw=!1}catch(a){throw Kl!==null&&(Kl=Kl.slice(e+1)),DL(K_,Xc),a}finally{Sr=t,zN=!1}}return null}var xh=[],gh=0,ib=null,lb=0,Da=[],Ma=0,ou=null,to=1,ro="";function md(e,t){xh[gh++]=lb,xh[gh++]=ib,ib=e,lb=t}function d6(e,t,n){Da[Ma++]=to,Da[Ma++]=ro,Da[Ma++]=ou,ou=e;var s=to;e=ro;var a=32-Ci(s)-1;s&=~(1<<a),n+=1;var i=32-Ci(t)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,to=1<<32-Ci(t)+a|n<<a|s,ro=i+e}else to=1<<i|n<<a|s,ro=e}function rA(e){e.return!==null&&(md(e,1),d6(e,1,0))}function nA(e){for(;e===ib;)ib=xh[--gh],xh[gh]=null,lb=xh[--gh],xh[gh]=null;for(;e===ou;)ou=Da[--Ma],Da[Ma]=null,ro=Da[--Ma],Da[Ma]=null,to=Da[--Ma],Da[Ma]=null}var ga=null,pa=null,Ur=!1,gi=null;function u6(e,t){var n=Fa(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function yO(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ga=e,pa=Pc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ga=e,pa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ou!==null?{id:to,overflow:ro}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Fa(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ga=e,pa=null,!0):!1;default:return!1}}function t2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function r2(e){if(Ur){var t=pa;if(t){var n=t;if(!yO(e,t)){if(t2(e))throw Error(Ve(418));t=Pc(n.nextSibling);var s=ga;t&&yO(e,t)?u6(s,n):(e.flags=e.flags&-4097|2,Ur=!1,ga=e)}}else{if(t2(e))throw Error(Ve(418));e.flags=e.flags&-4097|2,Ur=!1,ga=e}}}function bO(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ga=e}function Ty(e){if(e!==ga)return!1;if(!Ur)return bO(e),Ur=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ZS(e.type,e.memoizedProps)),t&&(t=pa)){if(t2(e))throw h6(),Error(Ve(418));for(;t;)u6(e,t),t=Pc(t.nextSibling)}if(bO(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ve(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){pa=Pc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}pa=null}}else pa=ga?Pc(e.stateNode.nextSibling):null;return!0}function h6(){for(var e=pa;e;)e=Pc(e.nextSibling)}function Tf(){pa=ga=null,Ur=!1}function sA(e){gi===null?gi=[e]:gi.push(e)}var lQ=Eo.ReactCurrentBatchConfig;function mp(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ve(309));var s=n.stateNode}if(!s)throw Error(Ve(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ve(284));if(!n._owner)throw Error(Ve(290,e))}return e}function Ey(e,t){throw e=Object.prototype.toString.call(t),Error(Ve(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jO(e){var t=e._init;return t(e._payload)}function f6(e){function t(j,y){if(e){var b=j.deletions;b===null?(j.deletions=[y],j.flags|=16):b.push(y)}}function n(j,y){if(!e)return null;for(;y!==null;)t(j,y),y=y.sibling;return null}function s(j,y){for(j=new Map;y!==null;)y.key!==null?j.set(y.key,y):j.set(y.index,y),y=y.sibling;return j}function a(j,y){return j=Ec(j,y),j.index=0,j.sibling=null,j}function i(j,y,b){return j.index=b,e?(b=j.alternate,b!==null?(b=b.index,b<y?(j.flags|=2,y):b):(j.flags|=2,y)):(j.flags|=1048576,y)}function l(j){return e&&j.alternate===null&&(j.flags|=2),j}function o(j,y,b,p){return y===null||y.tag!==6?(y=YN(b,j.mode,p),y.return=j,y):(y=a(y,b),y.return=j,y)}function c(j,y,b,p){var N=b.type;return N===dh?u(j,y,b.props.children,p,b.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Xo&&jO(N)===y.type)?(p=a(y,b.props),p.ref=mp(j,y,b),p.return=j,p):(p=E0(b.type,b.key,b.props,null,j.mode,p),p.ref=mp(j,y,b),p.return=j,p)}function d(j,y,b,p){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=XN(b,j.mode,p),y.return=j,y):(y=a(y,b.children||[]),y.return=j,y)}function u(j,y,b,p,N){return y===null||y.tag!==7?(y=Jd(b,j.mode,p,N),y.return=j,y):(y=a(y,b),y.return=j,y)}function h(j,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=YN(""+y,j.mode,b),y.return=j,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case by:return b=E0(y.type,y.key,y.props,null,j.mode,b),b.ref=mp(j,null,y),b.return=j,b;case ch:return y=XN(y,j.mode,b),y.return=j,y;case Xo:var p=y._init;return h(j,p(y._payload),b)}if(Lp(y)||cp(y))return y=Jd(y,j.mode,b,null),y.return=j,y;Ey(j,y)}return null}function f(j,y,b,p){var N=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:o(j,y,""+b,p);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case by:return b.key===N?c(j,y,b,p):null;case ch:return b.key===N?d(j,y,b,p):null;case Xo:return N=b._init,f(j,y,N(b._payload),p)}if(Lp(b)||cp(b))return N!==null?null:u(j,y,b,p,null);Ey(j,b)}return null}function m(j,y,b,p,N){if(typeof p=="string"&&p!==""||typeof p=="number")return j=j.get(b)||null,o(y,j,""+p,N);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case by:return j=j.get(p.key===null?b:p.key)||null,c(y,j,p,N);case ch:return j=j.get(p.key===null?b:p.key)||null,d(y,j,p,N);case Xo:var k=p._init;return m(j,y,b,k(p._payload),N)}if(Lp(p)||cp(p))return j=j.get(b)||null,u(y,j,p,N,null);Ey(y,p)}return null}function g(j,y,b,p){for(var N=null,k=null,S=y,P=y=0,_=null;S!==null&&P<b.length;P++){S.index>P?(_=S,S=null):_=S.sibling;var R=f(j,S,b[P],p);if(R===null){S===null&&(S=_);break}e&&S&&R.alternate===null&&t(j,S),y=i(R,y,P),k===null?N=R:k.sibling=R,k=R,S=_}if(P===b.length)return n(j,S),Ur&&md(j,P),N;if(S===null){for(;P<b.length;P++)S=h(j,b[P],p),S!==null&&(y=i(S,y,P),k===null?N=S:k.sibling=S,k=S);return Ur&&md(j,P),N}for(S=s(j,S);P<b.length;P++)_=m(S,j,P,b[P],p),_!==null&&(e&&_.alternate!==null&&S.delete(_.key===null?P:_.key),y=i(_,y,P),k===null?N=_:k.sibling=_,k=_);return e&&S.forEach(function(O){return t(j,O)}),Ur&&md(j,P),N}function x(j,y,b,p){var N=cp(b);if(typeof N!="function")throw Error(Ve(150));if(b=N.call(b),b==null)throw Error(Ve(151));for(var k=N=null,S=y,P=y=0,_=null,R=b.next();S!==null&&!R.done;P++,R=b.next()){S.index>P?(_=S,S=null):_=S.sibling;var O=f(j,S,R.value,p);if(O===null){S===null&&(S=_);break}e&&S&&O.alternate===null&&t(j,S),y=i(O,y,P),k===null?N=O:k.sibling=O,k=O,S=_}if(R.done)return n(j,S),Ur&&md(j,P),N;if(S===null){for(;!R.done;P++,R=b.next())R=h(j,R.value,p),R!==null&&(y=i(R,y,P),k===null?N=R:k.sibling=R,k=R);return Ur&&md(j,P),N}for(S=s(j,S);!R.done;P++,R=b.next())R=m(S,j,P,R.value,p),R!==null&&(e&&R.alternate!==null&&S.delete(R.key===null?P:R.key),y=i(R,y,P),k===null?N=R:k.sibling=R,k=R);return e&&S.forEach(function(M){return t(j,M)}),Ur&&md(j,P),N}function w(j,y,b,p){if(typeof b=="object"&&b!==null&&b.type===dh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case by:e:{for(var N=b.key,k=y;k!==null;){if(k.key===N){if(N=b.type,N===dh){if(k.tag===7){n(j,k.sibling),y=a(k,b.props.children),y.return=j,j=y;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Xo&&jO(N)===k.type){n(j,k.sibling),y=a(k,b.props),y.ref=mp(j,k,b),y.return=j,j=y;break e}n(j,k);break}else t(j,k);k=k.sibling}b.type===dh?(y=Jd(b.props.children,j.mode,p,b.key),y.return=j,j=y):(p=E0(b.type,b.key,b.props,null,j.mode,p),p.ref=mp(j,y,b),p.return=j,j=p)}return l(j);case ch:e:{for(k=b.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(j,y.sibling),y=a(y,b.children||[]),y.return=j,j=y;break e}else{n(j,y);break}else t(j,y);y=y.sibling}y=XN(b,j.mode,p),y.return=j,j=y}return l(j);case Xo:return k=b._init,w(j,y,k(b._payload),p)}if(Lp(b))return g(j,y,b,p);if(cp(b))return x(j,y,b,p);Ey(j,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(j,y.sibling),y=a(y,b),y.return=j,j=y):(n(j,y),y=YN(b,j.mode,p),y.return=j,j=y),l(j)):n(j,y)}return w}var Ef=f6(!0),m6=f6(!1),ob=Yc(null),cb=null,vh=null,aA=null;function iA(){aA=vh=cb=null}function lA(e){var t=ob.current;Fr(ob),e._currentValue=t}function n2(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Oh(e,t){cb=e,aA=vh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Us=!0),e.firstContext=null)}function Wa(e){var t=e._currentValue;if(aA!==e)if(e={context:e,memoizedValue:t,next:null},vh===null){if(cb===null)throw Error(Ve(308));vh=e,cb.dependencies={lanes:0,firstContext:e}}else vh=vh.next=e;return t}var Sd=null;function oA(e){Sd===null?Sd=[e]:Sd.push(e)}function p6(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,oA(t)):(n.next=a.next,a.next=n),t.interleaved=n,jo(e,s)}function jo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Zo=!1;function cA(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _c(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,dr&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,jo(e,n)}return a=s.interleaved,a===null?(t.next=t,oA(s)):(t.next=a.next,a.next=t),s.interleaved=t,jo(e,n)}function S0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,G_(e,n)}}function wO(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function db(e,t,n,s){var a=e.updateQueue;Zo=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;l=0,u=d=c=null,o=i;do{var f=o.lane,m=o.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,x=o;switch(f=t,m=n,x.tag){case 1:if(g=x.payload,typeof g=="function"){h=g.call(m,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,f=typeof g=="function"?g.call(m,h,f):g,f==null)break e;h=Gr({},h,f);break e;case 2:Zo=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,l|=f;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;f=o,o=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);du|=l,e.lanes=l,e.memoizedState=h}}function NO(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(Ve(191,a));a.call(s)}}}var Rv={},jl=Yc(Rv),Fx=Yc(Rv),Lx=Yc(Rv);function Cd(e){if(e===Rv)throw Error(Ve(174));return e}function dA(e,t){switch(Er(Lx,t),Er(Fx,e),Er(jl,Rv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:IS(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=IS(t,e)}Fr(jl),Er(jl,t)}function Of(){Fr(jl),Fr(Fx),Fr(Lx)}function g6(e){Cd(Lx.current);var t=Cd(jl.current),n=IS(t,e.type);t!==n&&(Er(Fx,e),Er(jl,n))}function uA(e){Fx.current===e&&(Fr(jl),Fr(Fx))}var Hr=Yc(0);function ub(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var VN=[];function hA(){for(var e=0;e<VN.length;e++)VN[e]._workInProgressVersionPrimary=null;VN.length=0}var C0=Eo.ReactCurrentDispatcher,qN=Eo.ReactCurrentBatchConfig,cu=0,Kr=null,jn=null,Rn=null,hb=!1,sx=!1,Ux=0,oQ=0;function rs(){throw Error(Ve(321))}function fA(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ri(e[n],t[n]))return!1;return!0}function mA(e,t,n,s,a,i){if(cu=i,Kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C0.current=e===null||e.memoizedState===null?hQ:fQ,e=n(s,a),sx){i=0;do{if(sx=!1,Ux=0,25<=i)throw Error(Ve(301));i+=1,Rn=jn=null,t.updateQueue=null,C0.current=mQ,e=n(s,a)}while(sx)}if(C0.current=fb,t=jn!==null&&jn.next!==null,cu=0,Rn=jn=Kr=null,hb=!1,t)throw Error(Ve(300));return e}function pA(){var e=Ux!==0;return Ux=0,e}function Ji(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?Kr.memoizedState=Rn=e:Rn=Rn.next=e,Rn}function Ha(){if(jn===null){var e=Kr.alternate;e=e!==null?e.memoizedState:null}else e=jn.next;var t=Rn===null?Kr.memoizedState:Rn.next;if(t!==null)Rn=t,jn=e;else{if(e===null)throw Error(Ve(310));jn=e,e={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Rn===null?Kr.memoizedState=Rn=e:Rn=Rn.next=e}return Rn}function Bx(e,t){return typeof t=="function"?t(e):t}function WN(e){var t=Ha(),n=t.queue;if(n===null)throw Error(Ve(311));n.lastRenderedReducer=e;var s=jn,a=s.baseQueue,i=n.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,s=s.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((cu&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,l=s):c=c.next=h,Kr.lanes|=u,du|=u}d=d.next}while(d!==null&&d!==i);c===null?l=s:c.next=o,Ri(s,t.memoizedState)||(Us=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Kr.lanes|=i,du|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function HN(e){var t=Ha(),n=t.queue;if(n===null)throw Error(Ve(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);Ri(i,t.memoizedState)||(Us=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function v6(){}function y6(e,t){var n=Kr,s=Ha(),a=t(),i=!Ri(s.memoizedState,a);if(i&&(s.memoizedState=a,Us=!0),s=s.queue,xA(w6.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||Rn!==null&&Rn.memoizedState.tag&1){if(n.flags|=2048,zx(9,j6.bind(null,n,s,a,t),void 0,null),In===null)throw Error(Ve(349));cu&30||b6(n,t,a)}return a}function b6(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Kr.updateQueue,t===null?(t={lastEffect:null,stores:null},Kr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function j6(e,t,n,s){t.value=n,t.getSnapshot=s,N6(t)&&k6(e)}function w6(e,t,n){return n(function(){N6(t)&&k6(e)})}function N6(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ri(e,n)}catch{return!0}}function k6(e){var t=jo(e,1);t!==null&&Pi(t,e,1,-1)}function kO(e){var t=Ji();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bx,lastRenderedState:e},t.queue=e,e=e.dispatch=uQ.bind(null,Kr,e),[t.memoizedState,e]}function zx(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Kr.updateQueue,t===null?(t={lastEffect:null,stores:null},Kr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function S6(){return Ha().memoizedState}function P0(e,t,n,s){var a=Ji();Kr.flags|=e,a.memoizedState=zx(1|t,n,void 0,s===void 0?null:s)}function Ew(e,t,n,s){var a=Ha();s=s===void 0?null:s;var i=void 0;if(jn!==null){var l=jn.memoizedState;if(i=l.destroy,s!==null&&fA(s,l.deps)){a.memoizedState=zx(t,n,i,s);return}}Kr.flags|=e,a.memoizedState=zx(1|t,n,i,s)}function SO(e,t){return P0(8390656,8,e,t)}function xA(e,t){return Ew(2048,8,e,t)}function C6(e,t){return Ew(4,2,e,t)}function P6(e,t){return Ew(4,4,e,t)}function _6(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function A6(e,t,n){return n=n!=null?n.concat([e]):null,Ew(4,4,_6.bind(null,t,e),n)}function gA(){}function T6(e,t){var n=Ha();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&fA(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function E6(e,t){var n=Ha();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&fA(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function O6(e,t,n){return cu&21?(Ri(n,t)||(n=IL(),Kr.lanes|=n,du|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Us=!0),e.memoizedState=n)}function cQ(e,t){var n=Sr;Sr=n!==0&&4>n?n:4,e(!0);var s=qN.transition;qN.transition={};try{e(!1),t()}finally{Sr=n,qN.transition=s}}function R6(){return Ha().memoizedState}function dQ(e,t,n){var s=Tc(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},D6(e))M6(t,n);else if(n=p6(e,t,n,s),n!==null){var a=Cs();Pi(n,e,s,a),$6(n,t,s)}}function uQ(e,t,n){var s=Tc(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(D6(e))M6(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,n);if(a.hasEagerState=!0,a.eagerState=o,Ri(o,l)){var c=t.interleaved;c===null?(a.next=a,oA(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=p6(e,t,a,s),n!==null&&(a=Cs(),Pi(n,e,s,a),$6(n,t,s))}}function D6(e){var t=e.alternate;return e===Kr||t!==null&&t===Kr}function M6(e,t){sx=hb=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $6(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,G_(e,n)}}var fb={readContext:Wa,useCallback:rs,useContext:rs,useEffect:rs,useImperativeHandle:rs,useInsertionEffect:rs,useLayoutEffect:rs,useMemo:rs,useReducer:rs,useRef:rs,useState:rs,useDebugValue:rs,useDeferredValue:rs,useTransition:rs,useMutableSource:rs,useSyncExternalStore:rs,useId:rs,unstable_isNewReconciler:!1},hQ={readContext:Wa,useCallback:function(e,t){return Ji().memoizedState=[e,t===void 0?null:t],e},useContext:Wa,useEffect:SO,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,P0(4194308,4,_6.bind(null,t,e),n)},useLayoutEffect:function(e,t){return P0(4194308,4,e,t)},useInsertionEffect:function(e,t){return P0(4,2,e,t)},useMemo:function(e,t){var n=Ji();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Ji();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=dQ.bind(null,Kr,e),[s.memoizedState,e]},useRef:function(e){var t=Ji();return e={current:e},t.memoizedState=e},useState:kO,useDebugValue:gA,useDeferredValue:function(e){return Ji().memoizedState=e},useTransition:function(){var e=kO(!1),t=e[0];return e=cQ.bind(null,e[1]),Ji().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Kr,a=Ji();if(Ur){if(n===void 0)throw Error(Ve(407));n=n()}else{if(n=t(),In===null)throw Error(Ve(349));cu&30||b6(s,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,SO(w6.bind(null,s,i,e),[e]),s.flags|=2048,zx(9,j6.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=Ji(),t=In.identifierPrefix;if(Ur){var n=ro,s=to;n=(s&~(1<<32-Ci(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ux++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=oQ++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fQ={readContext:Wa,useCallback:T6,useContext:Wa,useEffect:xA,useImperativeHandle:A6,useInsertionEffect:C6,useLayoutEffect:P6,useMemo:E6,useReducer:WN,useRef:S6,useState:function(){return WN(Bx)},useDebugValue:gA,useDeferredValue:function(e){var t=Ha();return O6(t,jn.memoizedState,e)},useTransition:function(){var e=WN(Bx)[0],t=Ha().memoizedState;return[e,t]},useMutableSource:v6,useSyncExternalStore:y6,useId:R6,unstable_isNewReconciler:!1},mQ={readContext:Wa,useCallback:T6,useContext:Wa,useEffect:xA,useImperativeHandle:A6,useInsertionEffect:C6,useLayoutEffect:P6,useMemo:E6,useReducer:HN,useRef:S6,useState:function(){return HN(Bx)},useDebugValue:gA,useDeferredValue:function(e){var t=Ha();return jn===null?t.memoizedState=e:O6(t,jn.memoizedState,e)},useTransition:function(){var e=HN(Bx)[0],t=Ha().memoizedState;return[e,t]},useMutableSource:v6,useSyncExternalStore:y6,useId:R6,unstable_isNewReconciler:!1};function si(e,t){if(e&&e.defaultProps){t=Gr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function s2(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Gr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ow={isMounted:function(e){return(e=e._reactInternals)?Du(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Cs(),a=Tc(e),i=fo(s,a);i.payload=t,n!=null&&(i.callback=n),t=_c(e,i,a),t!==null&&(Pi(t,e,a,s),S0(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Cs(),a=Tc(e),i=fo(s,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=_c(e,i,a),t!==null&&(Pi(t,e,a,s),S0(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Cs(),s=Tc(e),a=fo(n,s);a.tag=2,t!=null&&(a.callback=t),t=_c(e,a,s),t!==null&&(Pi(t,e,s,n),S0(t,e,s))}};function CO(e,t,n,s,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):t.prototype&&t.prototype.isPureReactComponent?!Dx(n,s)||!Dx(a,i):!0}function I6(e,t,n){var s=!1,a=$c,i=t.contextType;return typeof i=="object"&&i!==null?i=Wa(i):(a=Ws(t)?lu:hs.current,s=t.contextTypes,i=(s=s!=null)?Af(e,a):$c),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ow,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function PO(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Ow.enqueueReplaceState(t,t.state,null)}function a2(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},cA(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Wa(i):(i=Ws(t)?lu:hs.current,a.context=Af(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(s2(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ow.enqueueReplaceState(a,a.state,null),db(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Rf(e,t){try{var n="",s=t;do n+=zX(s),s=s.return;while(s);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function KN(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function i2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pQ=typeof WeakMap=="function"?WeakMap:Map;function F6(e,t,n){n=fo(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){pb||(pb=!0,x2=s),i2(e,t)},n}function L6(e,t,n){n=fo(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){i2(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){i2(e,t),typeof s!="function"&&(Ac===null?Ac=new Set([this]):Ac.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function _O(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new pQ;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=AQ.bind(null,e,t,n),t.then(e,e))}function AO(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function TO(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=fo(-1,1),t.tag=2,_c(n,t,1))),n.lanes|=1),e)}var xQ=Eo.ReactCurrentOwner,Us=!1;function js(e,t,n,s){t.child=e===null?m6(t,null,n,s):Ef(t,e.child,n,s)}function EO(e,t,n,s,a){n=n.render;var i=t.ref;return Oh(t,a),s=mA(e,t,n,s,i,a),n=pA(),e!==null&&!Us?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wo(e,t,a)):(Ur&&n&&rA(t),t.flags|=1,js(e,t,s,a),t.child)}function OO(e,t,n,s,a){if(e===null){var i=n.type;return typeof i=="function"&&!SA(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,U6(e,t,i,s,a)):(e=E0(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Dx,n(l,s)&&e.ref===t.ref)return wo(e,t,a)}return t.flags|=1,e=Ec(i,s),e.ref=t.ref,e.return=t,t.child=e}function U6(e,t,n,s,a){if(e!==null){var i=e.memoizedProps;if(Dx(i,s)&&e.ref===t.ref)if(Us=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Us=!0);else return t.lanes=e.lanes,wo(e,t,a)}return l2(e,t,n,s,a)}function B6(e,t,n){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(bh,ca),ca|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(bh,ca),ca|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Er(bh,ca),ca|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,Er(bh,ca),ca|=s;return js(e,t,a,n),t.child}function z6(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function l2(e,t,n,s,a){var i=Ws(n)?lu:hs.current;return i=Af(t,i),Oh(t,a),n=mA(e,t,n,s,i,a),s=pA(),e!==null&&!Us?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wo(e,t,a)):(Ur&&s&&rA(t),t.flags|=1,js(e,t,n,a),t.child)}function RO(e,t,n,s,a){if(Ws(n)){var i=!0;ab(t)}else i=!1;if(Oh(t,a),t.stateNode===null)_0(e,t),I6(t,n,s),a2(t,n,s,a),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=Wa(d):(d=Ws(n)?lu:hs.current,d=Af(t,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==d)&&PO(t,l,s,d),Zo=!1;var f=t.memoizedState;l.state=f,db(t,s,l,a),c=t.memoizedState,o!==s||f!==c||qs.current||Zo?(typeof u=="function"&&(s2(t,n,u,s),c=t.memoizedState),(o=Zo||CO(t,n,o,s,f,c,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=d,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,x6(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:si(t.type,o),l.props=d,h=t.pendingProps,f=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Wa(c):(c=Ws(n)?lu:hs.current,c=Af(t,c));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==c)&&PO(t,l,s,c),Zo=!1,f=t.memoizedState,l.state=f,db(t,s,l,a);var g=t.memoizedState;o!==h||f!==g||qs.current||Zo?(typeof m=="function"&&(s2(t,n,m,s),g=t.memoizedState),(d=Zo||CO(t,n,d,s,f,g,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,g,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,g,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),l.props=s,l.state=g,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return o2(e,t,n,s,i,a)}function o2(e,t,n,s,a,i){z6(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return a&&vO(t,n,!1),wo(e,t,i);s=t.stateNode,xQ.current=t;var o=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Ef(t,e.child,null,i),t.child=Ef(t,null,o,i)):js(e,t,o,i),t.memoizedState=s.state,a&&vO(t,n,!0),t.child}function V6(e){var t=e.stateNode;t.pendingContext?gO(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gO(e,t.context,!1),dA(e,t.containerInfo)}function DO(e,t,n,s,a){return Tf(),sA(a),t.flags|=256,js(e,t,n,s),t.child}var c2={dehydrated:null,treeContext:null,retryLane:0};function d2(e){return{baseLanes:e,cachePool:null,transitions:null}}function q6(e,t,n){var s=t.pendingProps,a=Hr.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Er(Hr,a&1),e===null)return r2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,i?(s=t.mode,i=t.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Mw(l,s,0,null),e=Jd(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=d2(n),t.memoizedState=c2,e):vA(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return gQ(e,t,l,s,o,a,n);if(i){i=s.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Ec(a,c),s.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Ec(o,i):(i=Jd(i,l,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,l=e.child.memoizedState,l=l===null?d2(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=c2,s}return i=e.child,e=i.sibling,s=Ec(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function vA(e,t){return t=Mw({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Oy(e,t,n,s){return s!==null&&sA(s),Ef(t,e.child,null,n),e=vA(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gQ(e,t,n,s,a,i,l){if(n)return t.flags&256?(t.flags&=-257,s=KN(Error(Ve(422))),Oy(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Mw({mode:"visible",children:s.children},a,0,null),i=Jd(i,a,l,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Ef(t,e.child,null,l),t.child.memoizedState=d2(l),t.memoizedState=c2,i);if(!(t.mode&1))return Oy(e,t,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var o=s.dgst;return s=o,i=Error(Ve(419)),s=KN(i,s,void 0),Oy(e,t,l,s)}if(o=(l&e.childLanes)!==0,Us||o){if(s=In,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,jo(e,a),Pi(s,e,a,-1))}return kA(),s=KN(Error(Ve(421))),Oy(e,t,l,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=TQ.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,pa=Pc(a.nextSibling),ga=t,Ur=!0,gi=null,e!==null&&(Da[Ma++]=to,Da[Ma++]=ro,Da[Ma++]=ou,to=e.id,ro=e.overflow,ou=t),t=vA(t,s.children),t.flags|=4096,t)}function MO(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),n2(e.return,t,n)}function GN(e,t,n,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=a)}function W6(e,t,n){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(js(e,t,s.children,n),s=Hr.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&MO(e,n,t);else if(e.tag===19)MO(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Er(Hr,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&ub(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),GN(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ub(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}GN(t,!0,n,null,i);break;case"together":GN(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),du|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ve(153));if(t.child!==null){for(e=t.child,n=Ec(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ec(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function vQ(e,t,n){switch(t.tag){case 3:V6(t),Tf();break;case 5:g6(t);break;case 1:Ws(t.type)&&ab(t);break;case 4:dA(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Er(ob,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Er(Hr,Hr.current&1),t.flags|=128,null):n&t.child.childLanes?q6(e,t,n):(Er(Hr,Hr.current&1),e=wo(e,t,n),e!==null?e.sibling:null);Er(Hr,Hr.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return W6(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Er(Hr,Hr.current),s)break;return null;case 22:case 23:return t.lanes=0,B6(e,t,n)}return wo(e,t,n)}var H6,u2,K6,G6;H6=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};u2=function(){};K6=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Cd(jl.current);var i=null;switch(n){case"input":a=RS(e,a),s=RS(e,s),i=[];break;case"select":a=Gr({},a,{value:void 0}),s=Gr({},s,{value:void 0}),i=[];break;case"textarea":a=$S(e,a),s=$S(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=nb)}FS(n,s);var l;n=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Px.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(o=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Px.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Mr("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};G6=function(e,t,n,s){n!==s&&(t.flags|=4)};function pp(e,t){if(!Ur)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ns(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function yQ(e,t,n){var s=t.pendingProps;switch(nA(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ns(t),null;case 1:return Ws(t.type)&&sb(),ns(t),null;case 3:return s=t.stateNode,Of(),Fr(qs),Fr(hs),hA(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ty(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gi!==null&&(y2(gi),gi=null))),u2(e,t),ns(t),null;case 5:uA(t);var a=Cd(Lx.current);if(n=t.type,e!==null&&t.stateNode!=null)K6(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Ve(166));return ns(t),null}if(e=Cd(jl.current),Ty(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[cl]=t,s[Ix]=i,e=(t.mode&1)!==0,n){case"dialog":Mr("cancel",s),Mr("close",s);break;case"iframe":case"object":case"embed":Mr("load",s);break;case"video":case"audio":for(a=0;a<Bp.length;a++)Mr(Bp[a],s);break;case"source":Mr("error",s);break;case"img":case"image":case"link":Mr("error",s),Mr("load",s);break;case"details":Mr("toggle",s);break;case"input":qE(s,i),Mr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Mr("invalid",s);break;case"textarea":HE(s,i),Mr("invalid",s)}FS(n,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?s.textContent!==o&&(i.suppressHydrationWarning!==!0&&Ay(s.textContent,o,e),a=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Ay(s.textContent,o,e),a=["children",""+o]):Px.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Mr("scroll",s)}switch(n){case"input":jy(s),WE(s,i,!0);break;case"textarea":jy(s),KE(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=nb)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wL(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),n==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[cl]=t,e[Ix]=s,H6(e,t,!1,!1),t.stateNode=e;e:{switch(l=LS(n,s),n){case"dialog":Mr("cancel",e),Mr("close",e),a=s;break;case"iframe":case"object":case"embed":Mr("load",e),a=s;break;case"video":case"audio":for(a=0;a<Bp.length;a++)Mr(Bp[a],e);a=s;break;case"source":Mr("error",e),a=s;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),a=s;break;case"details":Mr("toggle",e),a=s;break;case"input":qE(e,s),a=RS(e,s),Mr("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Gr({},s,{value:void 0}),Mr("invalid",e);break;case"textarea":HE(e,s),a=$S(e,s),Mr("invalid",e);break;default:a=s}FS(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?SL(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&NL(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_x(e,c):typeof c=="number"&&_x(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Px.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Mr("scroll",e):c!=null&&z_(e,i,c,l))}switch(n){case"input":jy(e),WE(e,s,!1);break;case"textarea":jy(e),KE(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Mc(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?_h(e,!!s.multiple,i,!1):s.defaultValue!=null&&_h(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=nb)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ns(t),null;case 6:if(e&&t.stateNode!=null)G6(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Ve(166));if(n=Cd(Lx.current),Cd(jl.current),Ty(t)){if(s=t.stateNode,n=t.memoizedProps,s[cl]=t,(i=s.nodeValue!==n)&&(e=ga,e!==null))switch(e.tag){case 3:Ay(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ay(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[cl]=t,t.stateNode=s}return ns(t),null;case 13:if(Fr(Hr),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ur&&pa!==null&&t.mode&1&&!(t.flags&128))h6(),Tf(),t.flags|=98560,i=!1;else if(i=Ty(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(Ve(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ve(317));i[cl]=t}else Tf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ns(t),i=!1}else gi!==null&&(y2(gi),gi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Hr.current&1?_n===0&&(_n=3):kA())),t.updateQueue!==null&&(t.flags|=4),ns(t),null);case 4:return Of(),u2(e,t),e===null&&Mx(t.stateNode.containerInfo),ns(t),null;case 10:return lA(t.type._context),ns(t),null;case 17:return Ws(t.type)&&sb(),ns(t),null;case 19:if(Fr(Hr),i=t.memoizedState,i===null)return ns(t),null;if(s=(t.flags&128)!==0,l=i.rendering,l===null)if(s)pp(i,!1);else{if(_n!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ub(e),l!==null){for(t.flags|=128,pp(i,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Er(Hr,Hr.current&1|2),t.child}e=e.sibling}i.tail!==null&&an()>Df&&(t.flags|=128,s=!0,pp(i,!1),t.lanes=4194304)}else{if(!s)if(e=ub(l),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pp(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Ur)return ns(t),null}else 2*an()-i.renderingStartTime>Df&&n!==1073741824&&(t.flags|=128,s=!0,pp(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=an(),t.sibling=null,n=Hr.current,Er(Hr,s?n&1|2:n&1),t):(ns(t),null);case 22:case 23:return NA(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ca&1073741824&&(ns(t),t.subtreeFlags&6&&(t.flags|=8192)):ns(t),null;case 24:return null;case 25:return null}throw Error(Ve(156,t.tag))}function bQ(e,t){switch(nA(t),t.tag){case 1:return Ws(t.type)&&sb(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Of(),Fr(qs),Fr(hs),hA(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uA(t),null;case 13:if(Fr(Hr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ve(340));Tf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fr(Hr),null;case 4:return Of(),null;case 10:return lA(t.type._context),null;case 22:case 23:return NA(),null;case 24:return null;default:return null}}var Ry=!1,ls=!1,jQ=typeof WeakSet=="function"?WeakSet:Set,rt=null;function yh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Jr(e,t,s)}else n.current=null}function h2(e,t,n){try{n()}catch(s){Jr(e,t,s)}}var $O=!1;function wQ(e,t){if(YS=eb,e=JL(),tA(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var m;h!==n||a!==0&&h.nodeType!==3||(o=l+a),h!==i||s!==0&&h.nodeType!==3||(c=l+s),h.nodeType===3&&(l+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++d===a&&(o=l),f===i&&++u===s&&(c=l),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(XS={focusedElem:e,selectionRange:n},eb=!1,rt=t;rt!==null;)if(t=rt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,rt=e;else for(;rt!==null;){t=rt;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,w=g.memoizedState,j=t.stateNode,y=j.getSnapshotBeforeUpdate(t.elementType===t.type?x:si(t.type,x),w);j.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ve(163))}}catch(p){Jr(t,t.return,p)}if(e=t.sibling,e!==null){e.return=t.return,rt=e;break}rt=t.return}return g=$O,$O=!1,g}function ax(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&h2(t,n,i)}a=a.next}while(a!==s)}}function Rw(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function f2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Y6(e){var t=e.alternate;t!==null&&(e.alternate=null,Y6(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[cl],delete t[Ix],delete t[JS],delete t[sQ],delete t[aQ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function X6(e){return e.tag===5||e.tag===3||e.tag===4}function IO(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||X6(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function m2(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=nb));else if(s!==4&&(e=e.child,e!==null))for(m2(e,t,n),e=e.sibling;e!==null;)m2(e,t,n),e=e.sibling}function p2(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(p2(e,t,n),e=e.sibling;e!==null;)p2(e,t,n),e=e.sibling}var Gn=null,hi=!1;function Bo(e,t,n){for(n=n.child;n!==null;)Z6(e,t,n),n=n.sibling}function Z6(e,t,n){if(bl&&typeof bl.onCommitFiberUnmount=="function")try{bl.onCommitFiberUnmount(Sw,n)}catch{}switch(n.tag){case 5:ls||yh(n,t);case 6:var s=Gn,a=hi;Gn=null,Bo(e,t,n),Gn=s,hi=a,Gn!==null&&(hi?(e=Gn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Gn.removeChild(n.stateNode));break;case 18:Gn!==null&&(hi?(e=Gn,n=n.stateNode,e.nodeType===8?BN(e.parentNode,n):e.nodeType===1&&BN(e,n),Ox(e)):BN(Gn,n.stateNode));break;case 4:s=Gn,a=hi,Gn=n.stateNode.containerInfo,hi=!0,Bo(e,t,n),Gn=s,hi=a;break;case 0:case 11:case 14:case 15:if(!ls&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&h2(n,t,l),a=a.next}while(a!==s)}Bo(e,t,n);break;case 1:if(!ls&&(yh(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Jr(n,t,o)}Bo(e,t,n);break;case 21:Bo(e,t,n);break;case 22:n.mode&1?(ls=(s=ls)||n.memoizedState!==null,Bo(e,t,n),ls=s):Bo(e,t,n);break;default:Bo(e,t,n)}}function FO(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new jQ),t.forEach(function(s){var a=EQ.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function ti(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Gn=o.stateNode,hi=!1;break e;case 3:Gn=o.stateNode.containerInfo,hi=!0;break e;case 4:Gn=o.stateNode.containerInfo,hi=!0;break e}o=o.return}if(Gn===null)throw Error(Ve(160));Z6(i,l,a),Gn=null,hi=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Jr(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Q6(t,e),t=t.sibling}function Q6(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ti(t,e),Zi(e),s&4){try{ax(3,e,e.return),Rw(3,e)}catch(x){Jr(e,e.return,x)}try{ax(5,e,e.return)}catch(x){Jr(e,e.return,x)}}break;case 1:ti(t,e),Zi(e),s&512&&n!==null&&yh(n,n.return);break;case 5:if(ti(t,e),Zi(e),s&512&&n!==null&&yh(n,n.return),e.flags&32){var a=e.stateNode;try{_x(a,"")}catch(x){Jr(e,e.return,x)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&bL(a,i),LS(o,l);var d=LS(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];u==="style"?SL(a,h):u==="dangerouslySetInnerHTML"?NL(a,h):u==="children"?_x(a,h):z_(a,u,h,d)}switch(o){case"input":DS(a,i);break;case"textarea":jL(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?_h(a,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?_h(a,!!i.multiple,i.defaultValue,!0):_h(a,!!i.multiple,i.multiple?[]:"",!1))}a[Ix]=i}catch(x){Jr(e,e.return,x)}}break;case 6:if(ti(t,e),Zi(e),s&4){if(e.stateNode===null)throw Error(Ve(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){Jr(e,e.return,x)}}break;case 3:if(ti(t,e),Zi(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ox(t.containerInfo)}catch(x){Jr(e,e.return,x)}break;case 4:ti(t,e),Zi(e);break;case 13:ti(t,e),Zi(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(jA=an())),s&4&&FO(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(ls=(d=ls)||u,ti(t,e),ls=d):ti(t,e),Zi(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(rt=e,u=e.child;u!==null;){for(h=rt=u;rt!==null;){switch(f=rt,m=f.child,f.tag){case 0:case 11:case 14:case 15:ax(4,f,f.return);break;case 1:yh(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(x){Jr(s,n,x)}}break;case 5:yh(f,f.return);break;case 22:if(f.memoizedState!==null){UO(h);continue}}m!==null?(m.return=f,rt=m):UO(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=kL("display",l))}catch(x){Jr(e,e.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){Jr(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ti(t,e),Zi(e),s&4&&FO(e);break;case 21:break;default:ti(t,e),Zi(e)}}function Zi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(X6(n)){var s=n;break e}n=n.return}throw Error(Ve(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(_x(a,""),s.flags&=-33);var i=IO(e);p2(e,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,o=IO(e);m2(e,o,l);break;default:throw Error(Ve(161))}}catch(c){Jr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function NQ(e,t,n){rt=e,J6(e)}function J6(e,t,n){for(var s=(e.mode&1)!==0;rt!==null;){var a=rt,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||Ry;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||ls;o=Ry;var d=ls;if(Ry=l,(ls=c)&&!d)for(rt=a;rt!==null;)l=rt,c=l.child,l.tag===22&&l.memoizedState!==null?BO(a):c!==null?(c.return=l,rt=c):BO(a);for(;i!==null;)rt=i,J6(i),i=i.sibling;rt=a,Ry=o,ls=d}LO(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,rt=i):LO(e)}}function LO(e){for(;rt!==null;){var t=rt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ls||Rw(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ls)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:si(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&NO(t,i,s);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}NO(t,l,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ox(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ve(163))}ls||t.flags&512&&f2(t)}catch(f){Jr(t,t.return,f)}}if(t===e){rt=null;break}if(n=t.sibling,n!==null){n.return=t.return,rt=n;break}rt=t.return}}function UO(e){for(;rt!==null;){var t=rt;if(t===e){rt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,rt=n;break}rt=t.return}}function BO(e){for(;rt!==null;){var t=rt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rw(4,t)}catch(c){Jr(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Jr(t,a,c)}}var i=t.return;try{f2(t)}catch(c){Jr(t,i,c)}break;case 5:var l=t.return;try{f2(t)}catch(c){Jr(t,l,c)}}}catch(c){Jr(t,t.return,c)}if(t===e){rt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,rt=o;break}rt=t.return}}var kQ=Math.ceil,mb=Eo.ReactCurrentDispatcher,yA=Eo.ReactCurrentOwner,Va=Eo.ReactCurrentBatchConfig,dr=0,In=null,fn=null,Zn=0,ca=0,bh=Yc(0),_n=0,Vx=null,du=0,Dw=0,bA=0,ix=null,Fs=null,jA=0,Df=1/0,Wl=null,pb=!1,x2=null,Ac=null,Dy=!1,gc=null,xb=0,lx=0,g2=null,A0=-1,T0=0;function Cs(){return dr&6?an():A0!==-1?A0:A0=an()}function Tc(e){return e.mode&1?dr&2&&Zn!==0?Zn&-Zn:lQ.transition!==null?(T0===0&&(T0=IL()),T0):(e=Sr,e!==0||(e=window.event,e=e===void 0?16:qL(e.type)),e):1}function Pi(e,t,n,s){if(50<lx)throw lx=0,g2=null,Error(Ve(185));Tv(e,n,s),(!(dr&2)||e!==In)&&(e===In&&(!(dr&2)&&(Dw|=n),_n===4&&tc(e,Zn)),Hs(e,s),n===1&&dr===0&&!(t.mode&1)&&(Df=an()+500,Tw&&Xc()))}function Hs(e,t){var n=e.callbackNode;lZ(e,t);var s=J0(e,e===In?Zn:0);if(s===0)n!==null&&XE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&XE(n),t===1)e.tag===0?iQ(zO.bind(null,e)):c6(zO.bind(null,e)),rQ(function(){!(dr&6)&&Xc()}),n=null;else{switch(FL(s)){case 1:n=K_;break;case 4:n=ML;break;case 16:n=Q0;break;case 536870912:n=$L;break;default:n=Q0}n=l8(n,e8.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function e8(e,t){if(A0=-1,T0=0,dr&6)throw Error(Ve(327));var n=e.callbackNode;if(Rh()&&e.callbackNode!==n)return null;var s=J0(e,e===In?Zn:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=gb(e,s);else{t=s;var a=dr;dr|=2;var i=r8();(In!==e||Zn!==t)&&(Wl=null,Df=an()+500,Qd(e,t));do try{PQ();break}catch(o){t8(e,o)}while(!0);iA(),mb.current=i,dr=a,fn!==null?t=0:(In=null,Zn=0,t=_n)}if(t!==0){if(t===2&&(a=qS(e),a!==0&&(s=a,t=v2(e,a))),t===1)throw n=Vx,Qd(e,0),tc(e,s),Hs(e,an()),n;if(t===6)tc(e,s);else{if(a=e.current.alternate,!(s&30)&&!SQ(a)&&(t=gb(e,s),t===2&&(i=qS(e),i!==0&&(s=i,t=v2(e,i))),t===1))throw n=Vx,Qd(e,0),tc(e,s),Hs(e,an()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(Ve(345));case 2:pd(e,Fs,Wl);break;case 3:if(tc(e,s),(s&130023424)===s&&(t=jA+500-an(),10<t)){if(J0(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Cs(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=QS(pd.bind(null,e,Fs,Wl),t);break}pd(e,Fs,Wl);break;case 4:if(tc(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var l=31-Ci(s);i=1<<l,l=t[l],l>a&&(a=l),s&=~i}if(s=a,s=an()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*kQ(s/1960))-s,10<s){e.timeoutHandle=QS(pd.bind(null,e,Fs,Wl),s);break}pd(e,Fs,Wl);break;case 5:pd(e,Fs,Wl);break;default:throw Error(Ve(329))}}}return Hs(e,an()),e.callbackNode===n?e8.bind(null,e):null}function v2(e,t){var n=ix;return e.current.memoizedState.isDehydrated&&(Qd(e,t).flags|=256),e=gb(e,t),e!==2&&(t=Fs,Fs=n,t!==null&&y2(t)),e}function y2(e){Fs===null?Fs=e:Fs.push.apply(Fs,e)}function SQ(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],i=a.getSnapshot;a=a.value;try{if(!Ri(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function tc(e,t){for(t&=~bA,t&=~Dw,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ci(t),s=1<<n;e[n]=-1,t&=~s}}function zO(e){if(dr&6)throw Error(Ve(327));Rh();var t=J0(e,0);if(!(t&1))return Hs(e,an()),null;var n=gb(e,t);if(e.tag!==0&&n===2){var s=qS(e);s!==0&&(t=s,n=v2(e,s))}if(n===1)throw n=Vx,Qd(e,0),tc(e,t),Hs(e,an()),n;if(n===6)throw Error(Ve(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pd(e,Fs,Wl),Hs(e,an()),null}function wA(e,t){var n=dr;dr|=1;try{return e(t)}finally{dr=n,dr===0&&(Df=an()+500,Tw&&Xc())}}function uu(e){gc!==null&&gc.tag===0&&!(dr&6)&&Rh();var t=dr;dr|=1;var n=Va.transition,s=Sr;try{if(Va.transition=null,Sr=1,e)return e()}finally{Sr=s,Va.transition=n,dr=t,!(dr&6)&&Xc()}}function NA(){ca=bh.current,Fr(bh)}function Qd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,tQ(n)),fn!==null)for(n=fn.return;n!==null;){var s=n;switch(nA(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&sb();break;case 3:Of(),Fr(qs),Fr(hs),hA();break;case 5:uA(s);break;case 4:Of();break;case 13:Fr(Hr);break;case 19:Fr(Hr);break;case 10:lA(s.type._context);break;case 22:case 23:NA()}n=n.return}if(In=e,fn=e=Ec(e.current,null),Zn=ca=t,_n=0,Vx=null,bA=Dw=du=0,Fs=ix=null,Sd!==null){for(t=0;t<Sd.length;t++)if(n=Sd[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,i=n.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}n.pending=s}Sd=null}return e}function t8(e,t){do{var n=fn;try{if(iA(),C0.current=fb,hb){for(var s=Kr.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}hb=!1}if(cu=0,Rn=jn=Kr=null,sx=!1,Ux=0,yA.current=null,n===null||n.return===null){_n=1,Vx=t,fn=null;break}e:{var i=e,l=n.return,o=n,c=t;if(t=Zn,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=AO(l);if(m!==null){m.flags&=-257,TO(m,l,o,i,t),m.mode&1&&_O(i,d,t),t=m,c=d;var g=t.updateQueue;if(g===null){var x=new Set;x.add(c),t.updateQueue=x}else g.add(c);break e}else{if(!(t&1)){_O(i,d,t),kA();break e}c=Error(Ve(426))}}else if(Ur&&o.mode&1){var w=AO(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),TO(w,l,o,i,t),sA(Rf(c,o));break e}}i=c=Rf(c,o),_n!==4&&(_n=2),ix===null?ix=[i]:ix.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var j=F6(i,c,t);wO(i,j);break e;case 1:o=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ac===null||!Ac.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var p=L6(i,o,t);wO(i,p);break e}}i=i.return}while(i!==null)}s8(n)}catch(N){t=N,fn===n&&n!==null&&(fn=n=n.return);continue}break}while(!0)}function r8(){var e=mb.current;return mb.current=fb,e===null?fb:e}function kA(){(_n===0||_n===3||_n===2)&&(_n=4),In===null||!(du&268435455)&&!(Dw&268435455)||tc(In,Zn)}function gb(e,t){var n=dr;dr|=2;var s=r8();(In!==e||Zn!==t)&&(Wl=null,Qd(e,t));do try{CQ();break}catch(a){t8(e,a)}while(!0);if(iA(),dr=n,mb.current=s,fn!==null)throw Error(Ve(261));return In=null,Zn=0,_n}function CQ(){for(;fn!==null;)n8(fn)}function PQ(){for(;fn!==null&&!QX();)n8(fn)}function n8(e){var t=i8(e.alternate,e,ca);e.memoizedProps=e.pendingProps,t===null?s8(e):fn=t,yA.current=null}function s8(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=bQ(n,t),n!==null){n.flags&=32767,fn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_n=6,fn=null;return}}else if(n=yQ(n,t,ca),n!==null){fn=n;return}if(t=t.sibling,t!==null){fn=t;return}fn=t=e}while(t!==null);_n===0&&(_n=5)}function pd(e,t,n){var s=Sr,a=Va.transition;try{Va.transition=null,Sr=1,_Q(e,t,n,s)}finally{Va.transition=a,Sr=s}return null}function _Q(e,t,n,s){do Rh();while(gc!==null);if(dr&6)throw Error(Ve(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ve(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(oZ(e,i),e===In&&(fn=In=null,Zn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dy||(Dy=!0,l8(Q0,function(){return Rh(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Va.transition,Va.transition=null;var l=Sr;Sr=1;var o=dr;dr|=4,yA.current=null,wQ(e,n),Q6(n,e),GZ(XS),eb=!!YS,XS=YS=null,e.current=n,NQ(n),JX(),dr=o,Sr=l,Va.transition=i}else e.current=n;if(Dy&&(Dy=!1,gc=e,xb=a),i=e.pendingLanes,i===0&&(Ac=null),rZ(n.stateNode),Hs(e,an()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(pb)throw pb=!1,e=x2,x2=null,e;return xb&1&&e.tag!==0&&Rh(),i=e.pendingLanes,i&1?e===g2?lx++:(lx=0,g2=e):lx=0,Xc(),null}function Rh(){if(gc!==null){var e=FL(xb),t=Va.transition,n=Sr;try{if(Va.transition=null,Sr=16>e?16:e,gc===null)var s=!1;else{if(e=gc,gc=null,xb=0,dr&6)throw Error(Ve(331));var a=dr;for(dr|=4,rt=e.current;rt!==null;){var i=rt,l=i.child;if(rt.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(rt=d;rt!==null;){var u=rt;switch(u.tag){case 0:case 11:case 15:ax(8,u,i)}var h=u.child;if(h!==null)h.return=u,rt=h;else for(;rt!==null;){u=rt;var f=u.sibling,m=u.return;if(Y6(u),u===d){rt=null;break}if(f!==null){f.return=m,rt=f;break}rt=m}}}var g=i.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}rt=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,rt=l;else e:for(;rt!==null;){if(i=rt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ax(9,i,i.return)}var j=i.sibling;if(j!==null){j.return=i.return,rt=j;break e}rt=i.return}}var y=e.current;for(rt=y;rt!==null;){l=rt;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,rt=b;else e:for(l=y;rt!==null;){if(o=rt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Rw(9,o)}}catch(N){Jr(o,o.return,N)}if(o===l){rt=null;break e}var p=o.sibling;if(p!==null){p.return=o.return,rt=p;break e}rt=o.return}}if(dr=a,Xc(),bl&&typeof bl.onPostCommitFiberRoot=="function")try{bl.onPostCommitFiberRoot(Sw,e)}catch{}s=!0}return s}finally{Sr=n,Va.transition=t}}return!1}function VO(e,t,n){t=Rf(n,t),t=F6(e,t,1),e=_c(e,t,1),t=Cs(),e!==null&&(Tv(e,1,t),Hs(e,t))}function Jr(e,t,n){if(e.tag===3)VO(e,e,n);else for(;t!==null;){if(t.tag===3){VO(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ac===null||!Ac.has(s))){e=Rf(n,e),e=L6(t,e,1),t=_c(t,e,1),e=Cs(),t!==null&&(Tv(t,1,e),Hs(t,e));break}}t=t.return}}function AQ(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Cs(),e.pingedLanes|=e.suspendedLanes&n,In===e&&(Zn&n)===n&&(_n===4||_n===3&&(Zn&130023424)===Zn&&500>an()-jA?Qd(e,0):bA|=n),Hs(e,t)}function a8(e,t){t===0&&(e.mode&1?(t=ky,ky<<=1,!(ky&130023424)&&(ky=4194304)):t=1);var n=Cs();e=jo(e,t),e!==null&&(Tv(e,t,n),Hs(e,n))}function TQ(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),a8(e,n)}function EQ(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Ve(314))}s!==null&&s.delete(t),a8(e,n)}var i8;i8=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||qs.current)Us=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Us=!1,vQ(e,t,n);Us=!!(e.flags&131072)}else Us=!1,Ur&&t.flags&1048576&&d6(t,lb,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;_0(e,t),e=t.pendingProps;var a=Af(t,hs.current);Oh(t,n),a=mA(null,t,s,e,a,n);var i=pA();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ws(s)?(i=!0,ab(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,cA(t),a.updater=Ow,t.stateNode=a,a._reactInternals=t,a2(t,s,e,n),t=o2(null,t,s,!0,i,n)):(t.tag=0,Ur&&i&&rA(t),js(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(_0(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=RQ(s),e=si(s,e),a){case 0:t=l2(null,t,s,e,n);break e;case 1:t=RO(null,t,s,e,n);break e;case 11:t=EO(null,t,s,e,n);break e;case 14:t=OO(null,t,s,si(s.type,e),n);break e}throw Error(Ve(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:si(s,a),l2(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:si(s,a),RO(e,t,s,a,n);case 3:e:{if(V6(t),e===null)throw Error(Ve(387));s=t.pendingProps,i=t.memoizedState,a=i.element,x6(e,t),db(t,s,null,n);var l=t.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Rf(Error(Ve(423)),t),t=DO(e,t,s,n,a);break e}else if(s!==a){a=Rf(Error(Ve(424)),t),t=DO(e,t,s,n,a);break e}else for(pa=Pc(t.stateNode.containerInfo.firstChild),ga=t,Ur=!0,gi=null,n=m6(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tf(),s===a){t=wo(e,t,n);break e}js(e,t,s,n)}t=t.child}return t;case 5:return g6(t),e===null&&r2(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,ZS(s,a)?l=null:i!==null&&ZS(s,i)&&(t.flags|=32),z6(e,t),js(e,t,l,n),t.child;case 6:return e===null&&r2(t),null;case 13:return q6(e,t,n);case 4:return dA(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ef(t,null,s,n):js(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:si(s,a),EO(e,t,s,a,n);case 7:return js(e,t,t.pendingProps,n),t.child;case 8:return js(e,t,t.pendingProps.children,n),t.child;case 12:return js(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Er(ob,s._currentValue),s._currentValue=l,i!==null)if(Ri(i.value,l)){if(i.children===a.children&&!qs.current){t=wo(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=fo(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),n2(i.return,n,t),o.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Ve(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),n2(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}js(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Oh(t,n),a=Wa(a),s=s(a),t.flags|=1,js(e,t,s,n),t.child;case 14:return s=t.type,a=si(s,t.pendingProps),a=si(s.type,a),OO(e,t,s,a,n);case 15:return U6(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:si(s,a),_0(e,t),t.tag=1,Ws(s)?(e=!0,ab(t)):e=!1,Oh(t,n),I6(t,s,a),a2(t,s,a,n),o2(null,t,s,!0,e,n);case 19:return W6(e,t,n);case 22:return B6(e,t,n)}throw Error(Ve(156,t.tag))};function l8(e,t){return DL(e,t)}function OQ(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fa(e,t,n,s){return new OQ(e,t,n,s)}function SA(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RQ(e){if(typeof e=="function")return SA(e)?1:0;if(e!=null){if(e=e.$$typeof,e===q_)return 11;if(e===W_)return 14}return 2}function Ec(e,t){var n=e.alternate;return n===null?(n=Fa(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function E0(e,t,n,s,a,i){var l=2;if(s=e,typeof e=="function")SA(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case dh:return Jd(n.children,a,i,t);case V_:l=8,a|=8;break;case AS:return e=Fa(12,n,t,a|2),e.elementType=AS,e.lanes=i,e;case TS:return e=Fa(13,n,t,a),e.elementType=TS,e.lanes=i,e;case ES:return e=Fa(19,n,t,a),e.elementType=ES,e.lanes=i,e;case gL:return Mw(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pL:l=10;break e;case xL:l=9;break e;case q_:l=11;break e;case W_:l=14;break e;case Xo:l=16,s=null;break e}throw Error(Ve(130,e==null?e:typeof e,""))}return t=Fa(l,n,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function Jd(e,t,n,s){return e=Fa(7,e,s,t),e.lanes=n,e}function Mw(e,t,n,s){return e=Fa(22,e,s,t),e.elementType=gL,e.lanes=n,e.stateNode={isHidden:!1},e}function YN(e,t,n){return e=Fa(6,e,null,t),e.lanes=n,e}function XN(e,t,n){return t=Fa(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function DQ(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=TN(0),this.expirationTimes=TN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=TN(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function CA(e,t,n,s,a,i,l,o,c){return e=new DQ(e,t,n,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Fa(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cA(i),e}function MQ(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ch,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function o8(e){if(!e)return $c;e=e._reactInternals;e:{if(Du(e)!==e||e.tag!==1)throw Error(Ve(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ws(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ve(171))}if(e.tag===1){var n=e.type;if(Ws(n))return o6(e,n,t)}return t}function c8(e,t,n,s,a,i,l,o,c){return e=CA(n,s,!0,e,a,i,l,o,c),e.context=o8(null),n=e.current,s=Cs(),a=Tc(n),i=fo(s,a),i.callback=t??null,_c(n,i,a),e.current.lanes=a,Tv(e,a,s),Hs(e,s),e}function $w(e,t,n,s){var a=t.current,i=Cs(),l=Tc(a);return n=o8(n),t.context===null?t.context=n:t.pendingContext=n,t=fo(i,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=_c(a,t,l),e!==null&&(Pi(e,a,l,i),S0(e,a,l)),l}function vb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qO(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function PA(e,t){qO(e,t),(e=e.alternate)&&qO(e,t)}function $Q(){return null}var d8=typeof reportError=="function"?reportError:function(e){console.error(e)};function _A(e){this._internalRoot=e}Iw.prototype.render=_A.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ve(409));$w(e,t,null,null)};Iw.prototype.unmount=_A.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;uu(function(){$w(null,e,null,null)}),t[bo]=null}};function Iw(e){this._internalRoot=e}Iw.prototype.unstable_scheduleHydration=function(e){if(e){var t=BL();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ec.length&&t!==0&&t<ec[n].priority;n++);ec.splice(n,0,e),n===0&&VL(e)}};function AA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function WO(){}function IQ(e,t,n,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=vb(l);i.call(d)}}var l=c8(t,s,e,0,null,!1,!1,"",WO);return e._reactRootContainer=l,e[bo]=l.current,Mx(e.nodeType===8?e.parentNode:e),uu(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var o=s;s=function(){var d=vb(c);o.call(d)}}var c=CA(e,0,!1,null,null,!1,!1,"",WO);return e._reactRootContainer=c,e[bo]=c.current,Mx(e.nodeType===8?e.parentNode:e),uu(function(){$w(t,c,n,s)}),c}function Lw(e,t,n,s,a){var i=n._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=vb(l);o.call(c)}}$w(t,l,e,a)}else l=IQ(n,t,e,a,s);return vb(l)}LL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Up(t.pendingLanes);n!==0&&(G_(t,n|1),Hs(t,an()),!(dr&6)&&(Df=an()+500,Xc()))}break;case 13:uu(function(){var s=jo(e,1);if(s!==null){var a=Cs();Pi(s,e,1,a)}}),PA(e,1)}};Y_=function(e){if(e.tag===13){var t=jo(e,134217728);if(t!==null){var n=Cs();Pi(t,e,134217728,n)}PA(e,134217728)}};UL=function(e){if(e.tag===13){var t=Tc(e),n=jo(e,t);if(n!==null){var s=Cs();Pi(n,e,t,s)}PA(e,t)}};BL=function(){return Sr};zL=function(e,t){var n=Sr;try{return Sr=e,t()}finally{Sr=n}};BS=function(e,t,n){switch(t){case"input":if(DS(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=Aw(s);if(!a)throw Error(Ve(90));yL(s),DS(s,a)}}}break;case"textarea":jL(e,n);break;case"select":t=n.value,t!=null&&_h(e,!!n.multiple,t,!1)}};_L=wA;AL=uu;var FQ={usingClientEntryPoint:!1,Events:[Ov,mh,Aw,CL,PL,wA]},xp={findFiberByHostInstance:kd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LQ={bundleType:xp.bundleType,version:xp.version,rendererPackageName:xp.rendererPackageName,rendererConfig:xp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Eo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=OL(e),e===null?null:e.stateNode},findFiberByHostInstance:xp.findFiberByHostInstance||$Q,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var My=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!My.isDisabled&&My.supportsFiber)try{Sw=My.inject(LQ),bl=My}catch{}}Na.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FQ;Na.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!AA(t))throw Error(Ve(200));return MQ(e,t,null,n)};Na.createRoot=function(e,t){if(!AA(e))throw Error(Ve(299));var n=!1,s="",a=d8;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=CA(e,1,!1,null,null,n,!1,s,a),e[bo]=t.current,Mx(e.nodeType===8?e.parentNode:e),new _A(t)};Na.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ve(188)):(e=Object.keys(e).join(","),Error(Ve(268,e)));return e=OL(t),e=e===null?null:e.stateNode,e};Na.flushSync=function(e){return uu(e)};Na.hydrate=function(e,t,n){if(!Fw(t))throw Error(Ve(200));return Lw(null,e,t,!0,n)};Na.hydrateRoot=function(e,t,n){if(!AA(e))throw Error(Ve(405));var s=n!=null&&n.hydratedSources||null,a=!1,i="",l=d8;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=c8(t,null,e,1,n??null,a,!1,i,l),e[bo]=t.current,Mx(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Iw(t)};Na.render=function(e,t,n){if(!Fw(t))throw Error(Ve(200));return Lw(null,e,t,!1,n)};Na.unmountComponentAtNode=function(e){if(!Fw(e))throw Error(Ve(40));return e._reactRootContainer?(uu(function(){Lw(null,null,e,!1,function(){e._reactRootContainer=null,e[bo]=null})}),!0):!1};Na.unstable_batchedUpdates=wA;Na.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Fw(n))throw Error(Ve(200));if(e==null||e._reactInternals===void 0)throw Error(Ve(38));return Lw(e,t,n,!1,s)};Na.version="18.3.1-next-f1338f8080-20240426";function u8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u8)}catch(e){console.error(e)}}u8(),uL.exports=Na;var La=uL.exports;const UQ=er(La);var h8,HO=La;h8=HO.createRoot,HO.hydrateRoot;const Pt=e=>typeof e=="string",gp=()=>{let e,t;const n=new Promise((s,a)=>{e=s,t=a});return n.resolve=e,n.reject=t,n},KO=e=>e==null?"":""+e,BQ=(e,t,n)=>{e.forEach(s=>{t[s]&&(n[s]=t[s])})},zQ=/###/g,GO=e=>e&&e.indexOf("###")>-1?e.replace(zQ,"."):e,YO=e=>!e||Pt(e),ox=(e,t,n)=>{const s=Pt(t)?t.split("."):t;let a=0;for(;a<s.length-1;){if(YO(e))return{};const i=GO(s[a]);!e[i]&&n&&(e[i]=new n),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++a}return YO(e)?{}:{obj:e,k:GO(s[a])}},XO=(e,t,n)=>{const{obj:s,k:a}=ox(e,t,Object);if(s!==void 0||t.length===1){s[a]=n;return}let i=t[t.length-1],l=t.slice(0,t.length-1),o=ox(e,l,Object);for(;o.obj===void 0&&l.length;)i=`${l[l.length-1]}.${i}`,l=l.slice(0,l.length-1),o=ox(e,l,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=n},VQ=(e,t,n,s)=>{const{obj:a,k:i}=ox(e,t,Object);a[i]=a[i]||[],a[i].push(n)},yb=(e,t)=>{const{obj:n,k:s}=ox(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,s))return n[s]},qQ=(e,t,n)=>{const s=yb(e,n);return s!==void 0?s:yb(t,n)},f8=(e,t,n)=>{for(const s in t)s!=="__proto__"&&s!=="constructor"&&(s in e?Pt(e[s])||e[s]instanceof String||Pt(t[s])||t[s]instanceof String?n&&(e[s]=t[s]):f8(e[s],t[s],n):e[s]=t[s]);return e},Hu=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var WQ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const HQ=e=>Pt(e)?e.replace(/[&<>"'\/]/g,t=>WQ[t]):e;class KQ{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const s=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,s),this.regExpQueue.push(t),s}}const GQ=[" ",",","?","!",";"],YQ=new KQ(20),XQ=(e,t,n)=>{t=t||"",n=n||"";const s=GQ.filter(l=>t.indexOf(l)<0&&n.indexOf(l)<0);if(s.length===0)return!0;const a=YQ.getRegExp(`(${s.map(l=>l==="?"?"\\?":l).join("|")})`);let i=!a.test(e);if(!i){const l=e.indexOf(n);l>0&&!a.test(e.substring(0,l))&&(i=!0)}return i},b2=(e,t,n=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const s=t.split(n);let a=e;for(let i=0;i<s.length;){if(!a||typeof a!="object")return;let l,o="";for(let c=i;c<s.length;++c)if(c!==i&&(o+=n),o+=s[c],l=a[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&c<s.length-1)continue;i+=c-i+1;break}a=l}return a},qx=e=>e==null?void 0:e.replace("_","-"),ZQ={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,s;(s=(n=console==null?void 0:console[e])==null?void 0:n.apply)==null||s.call(n,console,t)}};class bb{constructor(t,n={}){this.init(t,n)}init(t,n={}){this.prefix=n.prefix||"i18next:",this.logger=t||ZQ,this.options=n,this.debug=n.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,s,a){return a&&!this.debug?null:(Pt(t[0])&&(t[0]=`${s}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new bb(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new bb(this.logger,t)}}var ml=new bb;let Uw=class{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const a=this.observers[s].get(n)||0;this.observers[s].set(n,a+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t,...n){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([a,i])=>{for(let l=0;l<i;l++)a(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,i])=>{for(let l=0;l<i;l++)a.apply(a,[t,...n])})}};class ZO extends Uw{constructor(t,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,s,a={}){var d,u;const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;t.indexOf(".")>-1?o=t.split("."):(o=[t,n],s&&(Array.isArray(s)?o.push(...s):Pt(s)&&i?o.push(...s.split(i)):o.push(s)));const c=yb(this.data,o);return!c&&!n&&!s&&t.indexOf(".")>-1&&(t=o[0],n=o[1],s=o.slice(2).join(".")),c||!l||!Pt(s)?c:b2((u=(d=this.data)==null?void 0:d[t])==null?void 0:u[n],s,i)}addResource(t,n,s,a,i={silent:!1}){const l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[t,n];s&&(o=o.concat(l?s.split(l):s)),t.indexOf(".")>-1&&(o=t.split("."),a=n,n=o[1]),this.addNamespaces(n),XO(this.data,o,a),i.silent||this.emit("added",t,n,s,a)}addResources(t,n,s,a={silent:!1}){for(const i in s)(Pt(s[i])||Array.isArray(s[i]))&&this.addResource(t,n,i,s[i],{silent:!0});a.silent||this.emit("added",t,n,s)}addResourceBundle(t,n,s,a,i,l={silent:!1,skipCopy:!1}){let o=[t,n];t.indexOf(".")>-1&&(o=t.split("."),a=s,s=n,n=o[1]),this.addNamespaces(n);let c=yb(this.data,o)||{};l.skipCopy||(s=JSON.parse(JSON.stringify(s))),a?f8(c,s,i):c={...c,...s},XO(this.data,o,c),l.silent||this.emit("added",t,n,s)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(a=>n[a]&&Object.keys(n[a]).length>0)}toJSON(){return this.data}}var m8={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,s,a){return e.forEach(i=>{var l;t=((l=this.processors[i])==null?void 0:l.process(t,n,s,a))??t}),t}};const QO={},JO=e=>!Pt(e)&&typeof e!="boolean"&&typeof e!="number";let eR=class p8 extends Uw{constructor(t,n={}){super(),BQ(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ml.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,n={interpolation:{}}){const s={...n};if(t==null)return!1;const a=this.resolve(t,s);return(a==null?void 0:a.res)!==void 0}extractFromKey(t,n){let s=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const l=s&&t.indexOf(s)>-1,o=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!XQ(t,s,a);if(l&&!o){const c=t.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:t,namespaces:Pt(i)?[i]:i};const d=t.split(s);(s!==a||s===a&&this.options.ns.indexOf(d[0])>-1)&&(i=d.shift()),t=d.join(a)}return{key:t,namespaces:Pt(i)?[i]:i}}translate(t,n,s){let a=typeof n=="object"?{...n}:n;if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(a={...a}),a||(a={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:o,namespaces:c}=this.extractFromKey(t[t.length-1],a),d=c[c.length-1];let u=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;u===void 0&&(u=":");const h=a.lng||this.language,f=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return f?i?{res:`${d}${u}${o}`,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:d,usedParams:this.getUsedParamsDetails(a)}:`${d}${u}${o}`:i?{res:o,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:d,usedParams:this.getUsedParamsDetails(a)}:o;const m=this.resolve(t,a);let g=m==null?void 0:m.res;const x=(m==null?void 0:m.usedKey)||o,w=(m==null?void 0:m.exactUsedKey)||o,j=["[object Number]","[object Function]","[object RegExp]"],y=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,p=a.count!==void 0&&!Pt(a.count),N=p8.hasDefaultValue(a),k=p?this.pluralResolver.getSuffix(h,a.count,a):"",S=a.ordinal&&p?this.pluralResolver.getSuffix(h,a.count,{ordinal:!1}):"",P=p&&!a.ordinal&&a.count===0,_=P&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${k}`]||a[`defaultValue${S}`]||a.defaultValue;let R=g;b&&!g&&N&&(R=_);const O=JO(R),M=Object.prototype.toString.apply(R);if(b&&R&&O&&j.indexOf(M)<0&&!(Pt(y)&&Array.isArray(R))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const A=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,R,{...a,ns:c}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(m.res=A,m.usedParams=this.getUsedParamsDetails(a),m):A}if(l){const A=Array.isArray(R),T=A?[]:{},B=A?w:x;for(const z in R)if(Object.prototype.hasOwnProperty.call(R,z)){const U=`${B}${l}${z}`;N&&!g?T[z]=this.translate(U,{...a,defaultValue:JO(_)?_[z]:void 0,joinArrays:!1,ns:c}):T[z]=this.translate(U,{...a,joinArrays:!1,ns:c}),T[z]===U&&(T[z]=R[z])}g=T}}else if(b&&Pt(y)&&Array.isArray(g))g=g.join(y),g&&(g=this.extendTranslation(g,t,a,s));else{let A=!1,T=!1;!this.isValidLookup(g)&&N&&(A=!0,g=_),this.isValidLookup(g)||(T=!0,g=o);const z=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&T?void 0:g,U=N&&_!==g&&this.options.updateMissing;if(T||A||U){if(this.logger.log(U?"updateKey":"missingKey",h,d,o,U?_:g),l){const oe=this.resolve(o,{...a,keySeparator:!1});oe&&oe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let E=[];const $=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&$&&$[0])for(let oe=0;oe<$.length;oe++)E.push($[oe]);else this.options.saveMissingTo==="all"?E=this.languageUtils.toResolveHierarchy(a.lng||this.language):E.push(a.lng||this.language);const G=(oe,ee,ce)=>{var je;const ye=N&&ce!==g?ce:z;this.options.missingKeyHandler?this.options.missingKeyHandler(oe,d,ee,ye,U,a):(je=this.backendConnector)!=null&&je.saveMissing&&this.backendConnector.saveMissing(oe,d,ee,ye,U,a),this.emit("missingKey",oe,d,ee,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&p?E.forEach(oe=>{const ee=this.pluralResolver.getSuffixes(oe,a);P&&a[`defaultValue${this.options.pluralSeparator}zero`]&&ee.indexOf(`${this.options.pluralSeparator}zero`)<0&&ee.push(`${this.options.pluralSeparator}zero`),ee.forEach(ce=>{G([oe],o+ce,a[`defaultValue${ce}`]||_)})}):G(E,o,_))}g=this.extendTranslation(g,t,a,m,s),T&&g===o&&this.options.appendNamespaceToMissingKey&&(g=`${d}${u}${o}`),(T||A)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${u}${o}`:o,A?g:void 0,a))}return i?(m.res=g,m.usedParams=this.getUsedParamsDetails(a),m):g}extendTranslation(t,n,s,a,i){var c,d;if((c=this.i18nFormat)!=null&&c.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const u=Pt(t)&&(((d=s==null?void 0:s.interpolation)==null?void 0:d.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(u){const m=t.match(this.interpolator.nestingRegexp);h=m&&m.length}let f=s.replace&&!Pt(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),t=this.interpolator.interpolate(t,f,s.lng||this.language||a.usedLng,s),u){const m=t.match(this.interpolator.nestingRegexp),g=m&&m.length;h<g&&(s.nest=!1)}!s.lng&&a&&a.res&&(s.lng=this.language||a.usedLng),s.nest!==!1&&(t=this.interpolator.nest(t,(...m)=>(i==null?void 0:i[0])===m[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${m[0]} in key: ${n[0]}`),null):this.translate(...m,n),s)),s.interpolation&&this.interpolator.reset()}const l=s.postProcess||this.options.postProcess,o=Pt(l)?[l]:l;return t!=null&&(o!=null&&o.length)&&s.applyPostProcessor!==!1&&(t=m8.handle(o,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),t}resolve(t,n={}){let s,a,i,l,o;return Pt(t)&&(t=[t]),t.forEach(c=>{if(this.isValidLookup(s))return;const d=this.extractFromKey(c,n),u=d.key;a=u;let h=d.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=n.count!==void 0&&!Pt(n.count),m=f&&!n.ordinal&&n.count===0,g=n.context!==void 0&&(Pt(n.context)||typeof n.context=="number")&&n.context!=="",x=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(w=>{var j,y;this.isValidLookup(s)||(o=w,!QO[`${x[0]}-${w}`]&&((j=this.utils)!=null&&j.hasLoadedNamespace)&&!((y=this.utils)!=null&&y.hasLoadedNamespace(o))&&(QO[`${x[0]}-${w}`]=!0,this.logger.warn(`key "${a}" for languages "${x.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(b=>{var k;if(this.isValidLookup(s))return;l=b;const p=[u];if((k=this.i18nFormat)!=null&&k.addLookupKeys)this.i18nFormat.addLookupKeys(p,u,b,w,n);else{let S;f&&(S=this.pluralResolver.getSuffix(b,n.count,n));const P=`${this.options.pluralSeparator}zero`,_=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(p.push(u+S),n.ordinal&&S.indexOf(_)===0&&p.push(u+S.replace(_,this.options.pluralSeparator)),m&&p.push(u+P)),g){const R=`${u}${this.options.contextSeparator}${n.context}`;p.push(R),f&&(p.push(R+S),n.ordinal&&S.indexOf(_)===0&&p.push(R+S.replace(_,this.options.pluralSeparator)),m&&p.push(R+P))}}let N;for(;N=p.pop();)this.isValidLookup(s)||(i=N,s=this.getResource(b,w,N,n))}))})}),{res:s,usedKey:a,exactUsedKey:i,usedLng:l,usedNS:o}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,s,a={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(t,n,s,a):this.resourceStore.getResource(t,n,s,a)}getUsedParamsDetails(t={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=t.replace&&!Pt(t.replace);let a=s?t.replace:t;if(s&&typeof t.count<"u"&&(a.count=t.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!s){a={...a};for(const i of n)delete a[i]}return a}static hasDefaultValue(t){const n="defaultValue";for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&n===s.substring(0,n.length)&&t[s]!==void 0)return!0;return!1}};class tR{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ml.create("languageUtils")}getScriptPartFromCode(t){if(t=qx(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=qx(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(Pt(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(s=>{if(n)return;const a=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(a))&&(n=a)}),!n&&this.options.supportedLngs&&t.forEach(s=>{if(n)return;const a=this.getScriptPartFromCode(s);if(this.isSupportedCode(a))return n=a;const i=this.getLanguagePartFromCode(s);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(l=>{if(l===i)return l;if(!(l.indexOf("-")<0&&i.indexOf("-")<0)&&(l.indexOf("-")>0&&i.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===i||l.indexOf(i)===0&&i.length>1))return l})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),Pt(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let s=t[n];return s||(s=t[this.getScriptPartFromCode(n)]),s||(s=t[this.formatLanguageCode(n)]),s||(s=t[this.getLanguagePartFromCode(n)]),s||(s=t.default),s||[]}toResolveHierarchy(t,n){const s=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],t),a=[],i=l=>{l&&(this.isSupportedCode(l)?a.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Pt(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):Pt(t)&&i(this.formatLanguageCode(t)),s.forEach(l=>{a.indexOf(l)<0&&i(this.formatLanguageCode(l))}),a}}const rR={zero:0,one:1,two:2,few:3,many:4,other:5},nR={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class QQ{constructor(t,n={}){this.languageUtils=t,this.options=n,this.logger=ml.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t,n={}){const s=qx(t==="dev"?"en":t),a=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:a});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let l;try{l=new Intl.PluralRules(s,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),nR;if(!t.match(/-|_/))return nR;const c=this.languageUtils.getLanguagePartFromCode(t);l=this.getRule(c,n)}return this.pluralRulesCache[i]=l,l}needsPlural(t,n={}){let s=this.getRule(t,n);return s||(s=this.getRule("dev",n)),(s==null?void 0:s.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,n,s={}){return this.getSuffixes(t,s).map(a=>`${n}${a}`)}getSuffixes(t,n={}){let s=this.getRule(t,n);return s||(s=this.getRule("dev",n)),s?s.resolvedOptions().pluralCategories.sort((a,i)=>rR[a]-rR[i]).map(a=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(t,n,s={}){const a=this.getRule(t,s);return a?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${a.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,s))}}const sR=(e,t,n,s=".",a=!0)=>{let i=qQ(e,t,n);return!i&&a&&Pt(n)&&(i=b2(e,n,s),i===void 0&&(i=b2(t,n,s))),i},ZN=e=>e.replace(/\$/g,"$$$$");class JQ{constructor(t={}){var n;this.logger=ml.create("interpolator"),this.options=t,this.format=((n=t==null?void 0:t.interpolation)==null?void 0:n.format)||(s=>s),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:s,useRawValueToEscape:a,prefix:i,prefixEscaped:l,suffix:o,suffixEscaped:c,formatSeparator:d,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:m,nestingSuffix:g,nestingSuffixEscaped:x,nestingOptionsSeparator:w,maxReplaces:j,alwaysFormat:y}=t.interpolation;this.escape=n!==void 0?n:HQ,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=i?Hu(i):l||"{{",this.suffix=o?Hu(o):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=f?Hu(f):m||Hu("$t("),this.nestingSuffix=g?Hu(g):x||Hu(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=j||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,s)=>(n==null?void 0:n.source)===s?(n.lastIndex=0,n):new RegExp(s,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,s,a){var m;let i,l,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=g=>{if(g.indexOf(this.formatSeparator)<0){const y=sR(n,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,s,{...a,...n,interpolationkey:g}):y}const x=g.split(this.formatSeparator),w=x.shift().trim(),j=x.join(this.formatSeparator).trim();return this.format(sR(n,c,w,this.options.keySeparator,this.options.ignoreJSONStructure),j,s,{...a,...n,interpolationkey:w})};this.resetRegExp();const u=(a==null?void 0:a.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((m=a==null?void 0:a.interpolation)==null?void 0:m.skipOnVariables)!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>ZN(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?ZN(this.escape(g)):ZN(g)}].forEach(g=>{for(o=0;i=g.regex.exec(t);){const x=i[1].trim();if(l=d(x),l===void 0)if(typeof u=="function"){const j=u(t,i,a);l=Pt(j)?j:""}else if(a&&Object.prototype.hasOwnProperty.call(a,x))l="";else if(h){l=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${t}`),l="";else!Pt(l)&&!this.useRawValueToEscape&&(l=KO(l));const w=g.safeValue(l);if(t=t.replace(i[0],w),h?(g.regex.lastIndex+=l.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),t}nest(t,n,s={}){let a,i,l;const o=(c,d)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const h=c.split(new RegExp(`${u}[ ]*{`));let f=`{${h[1]}`;c=h[0],f=this.interpolate(f,l);const m=f.match(/'/g),g=f.match(/"/g);(((m==null?void 0:m.length)??0)%2===0&&!g||g.length%2!==0)&&(f=f.replace(/'/g,'"'));try{l=JSON.parse(f),d&&(l={...d,...l})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,x),`${c}${u}${f}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,c};for(;a=this.nestingRegexp.exec(t);){let c=[];l={...s},l=l.replace&&!Pt(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const d=/{.*}/.test(a[1])?a[1].lastIndexOf("}")+1:a[1].indexOf(this.formatSeparator);if(d!==-1&&(c=a[1].slice(d).split(this.formatSeparator).map(u=>u.trim()).filter(Boolean),a[1]=a[1].slice(0,d)),i=n(o.call(this,a[1].trim(),l),l),i&&a[0]===t&&!Pt(i))return i;Pt(i)||(i=KO(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${t}`),i=""),c.length&&(i=c.reduce((u,h)=>this.format(u,h,s.lng,{...s,interpolationkey:a[1].trim()}),i.trim())),t=t.replace(a[0],i),this.regexp.lastIndex=0}return t}}const eJ=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const s=e.split("(");t=s[0].toLowerCase().trim();const a=s[1].substring(0,s[1].length-1);t==="currency"&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):t==="relativetime"&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(l=>{if(l){const[o,...c]=l.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),u=o.trim();n[u]||(n[u]=d),d==="false"&&(n[u]=!1),d==="true"&&(n[u]=!0),isNaN(d)||(n[u]=parseInt(d,10))}})}return{formatName:t,formatOptions:n}},aR=e=>{const t={};return(n,s,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i={...i,[a.interpolationkey]:void 0});const l=s+JSON.stringify(i);let o=t[l];return o||(o=e(qx(s),a),t[l]=o),o(n)}},tJ=e=>(t,n,s)=>e(qx(n),s)(t);class rJ{constructor(t={}){this.logger=ml.create("formatter"),this.options=t,this.init(t)}init(t,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const s=n.cacheInBuiltFormats?aR:tJ;this.formats={number:s((a,i)=>{const l=new Intl.NumberFormat(a,{...i});return o=>l.format(o)}),currency:s((a,i)=>{const l=new Intl.NumberFormat(a,{...i,style:"currency"});return o=>l.format(o)}),datetime:s((a,i)=>{const l=new Intl.DateTimeFormat(a,{...i});return o=>l.format(o)}),relativetime:s((a,i)=>{const l=new Intl.RelativeTimeFormat(a,{...i});return o=>l.format(o,i.range||"day")}),list:s((a,i)=>{const l=new Intl.ListFormat(a,{...i});return o=>l.format(o)})}}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=aR(n)}format(t,n,s,a={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,c)=>{var h;const{formatName:d,formatOptions:u}=eJ(c);if(this.formats[d]){let f=o;try{const m=((h=a==null?void 0:a.formatParams)==null?void 0:h[a.interpolationkey])||{},g=m.locale||m.lng||a.locale||a.lng||s;f=this.formats[d](o,g,{...u,...a,...m})}catch(m){this.logger.warn(m)}return f}else this.logger.warn(`there was no format function for ${d}`);return o},t)}}const nJ=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class sJ extends Uw{constructor(t,n,s,a={}){var i,l;super(),this.backend=t,this.store=n,this.services=s,this.languageUtils=s.languageUtils,this.options=a,this.logger=ml.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],(l=(i=this.backend)==null?void 0:i.init)==null||l.call(i,s,a.backend,a)}queueLoad(t,n,s,a){const i={},l={},o={},c={};return t.forEach(d=>{let u=!0;n.forEach(h=>{const f=`${d}|${h}`;!s.reload&&this.store.hasResourceBundle(d,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?l[f]===void 0&&(l[f]=!0):(this.state[f]=1,u=!1,l[f]===void 0&&(l[f]=!0),i[f]===void 0&&(i[f]=!0),c[h]===void 0&&(c[h]=!0)))}),u||(o[d]=!0)}),(Object.keys(i).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(t,n,s){const a=t.split("|"),i=a[0],l=a[1];n&&this.emit("failedLoading",i,l,n),!n&&s&&this.store.addResourceBundle(i,l,s,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&s&&(this.state[t]=0);const o={};this.queue.forEach(c=>{VQ(c.loaded,[i],l),nJ(c,t),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{o[d]||(o[d]={});const u=c.loaded[d];u.length&&u.forEach(h=>{o[d][h]===void 0&&(o[d][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(t,n,s,a=0,i=this.retryTimeout,l){if(!t.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:s,tried:a,wait:i,callback:l});return}this.readingCalls++;const o=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(d&&u&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,s,a+1,i*2,l)},i);return}l(d,u)},c=this.backend[s].bind(this.backend);if(c.length===2){try{const d=c(t,n);d&&typeof d.then=="function"?d.then(u=>o(null,u)).catch(o):o(null,d)}catch(d){o(d)}return}return c(t,n,o)}prepareLoading(t,n,s={},a){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();Pt(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Pt(n)&&(n=[n]);const i=this.queueLoad(t,n,s,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(l=>{this.loadOne(l)})}load(t,n,s){this.prepareLoading(t,n,{},s)}reload(t,n,s){this.prepareLoading(t,n,{reload:!0},s)}loadOne(t,n=""){const s=t.split("|"),a=s[0],i=s[1];this.read(a,i,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${n}loading namespace ${i} for language ${a} failed`,l),!l&&o&&this.logger.log(`${n}loaded namespace ${i} for language ${a}`,o),this.loaded(t,l,o)})}saveMissing(t,n,s,a,i,l={},o=()=>{}){var c,d,u,h,f;if((d=(c=this.services)==null?void 0:c.utils)!=null&&d.hasLoadedNamespace&&!((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${s}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if((f=this.backend)!=null&&f.create){const m={...l,isUpdate:i},g=this.backend.create.bind(this.backend);if(g.length<6)try{let x;g.length===5?x=g(t,n,s,a,m):x=g(t,n,s,a),x&&typeof x.then=="function"?x.then(w=>o(null,w)).catch(o):o(null,x)}catch(x){o(x)}else g(t,n,s,a,o,m)}!t||!t[0]||this.store.addResource(t[0],n,s,a)}}}const iR=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Pt(e[1])&&(t.defaultValue=e[1]),Pt(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(s=>{t[s]=n[s]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),lR=e=>{var t,n;return Pt(e.ns)&&(e.ns=[e.ns]),Pt(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Pt(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((n=(t=e.supportedLngs)==null?void 0:t.indexOf)==null?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},$y=()=>{},aJ=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Wx extends Uw{constructor(t={},n){if(super(),this.options=lR(t),this.services={},this.logger=ml,this.modules={external:[]},aJ(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(t={},n){this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),t.defaultNS==null&&t.ns&&(Pt(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=iR();this.options={...s,...this.options,...lR(t)},this.options.interpolation={...s.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const a=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?ml.init(a(this.modules.logger),this.options):ml.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=rJ;const u=new tR(this.options);this.store=new ZO(this.options.resources,this.options);const h=this.services;h.logger=ml,h.resourceStore=this.store,h.languageUtils=u,h.pluralResolver=new QQ(u,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(h.formatter=a(d),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new JQ(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new sJ(a(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(m,...g)=>{this.emit(m,...g)}),this.modules.languageDetector&&(h.languageDetector=a(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=a(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new eR(this.services,this.options),this.translator.on("*",(m,...g)=>{this.emit(m,...g)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,n||(n=$y),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...u)=>this.store[d](...u)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...u)=>(this.store[d](...u),this)});const o=gp(),c=()=>{const d=(u,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(h),n(u,h)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),o}loadResources(t,n=$y){var i,l;let s=n;const a=Pt(t)?t:this.language;if(typeof t=="function"&&(s=t),!this.options.resources||this.options.partialBundledLanguages){if((a==null?void 0:a.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const o=[],c=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};a?c(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>c(u)),(l=(i=this.options.preload)==null?void 0:i.forEach)==null||l.call(i,d=>c(d)),this.services.backendConnector.load(o,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(d)})}else s(null)}reloadResources(t,n,s){const a=gp();return typeof t=="function"&&(s=t,t=void 0),typeof n=="function"&&(s=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),s||(s=$y),this.services.backendConnector.reload(t,n,i=>{a.resolve(),s(i)}),a}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&m8.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let n=0;n<this.languages.length;n++){const s=this.languages[n];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,n){this.isLanguageChangingTo=t;const s=gp();this.emit("languageChanging",t);const a=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},i=(o,c)=>{c?this.isLanguageChangingTo===t&&(a(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve((...d)=>this.t(...d)),n&&n(o,(...d)=>this.t(...d))},l=o=>{var u,h;!t&&!o&&this.services.languageDetector&&(o=[]);const c=Pt(o)?o:o&&o[0],d=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Pt(o)?[o]:o);d&&(this.language||a(d),this.translator.language||this.translator.changeLanguage(d),(h=(u=this.services.languageDetector)==null?void 0:u.cacheUserLanguage)==null||h.call(u,d)),this.loadResources(d,f=>{i(f,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(t),s}getFixedT(t,n,s){const a=(i,l,...o)=>{let c;typeof l!="object"?c=this.options.overloadTranslationOptionHandler([i,l].concat(o)):c={...l},c.lng=c.lng||a.lng,c.lngs=c.lngs||a.lngs,c.ns=c.ns||a.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||s||a.keyPrefix);const d=this.options.keySeparator||".";let u;return c.keyPrefix&&Array.isArray(i)?u=i.map(h=>`${c.keyPrefix}${d}${h}`):u=c.keyPrefix?`${c.keyPrefix}${d}${i}`:i,this.t(u,c)};return Pt(t)?a.lng=t:a.lngs=t,a.ns=n,a.keyPrefix=s,a}t(...t){var n;return(n=this.translator)==null?void 0:n.translate(...t)}exists(...t){var n;return(n=this.translator)==null?void 0:n.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=n.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const l=(o,c)=>{const d=this.services.backendConnector.state[`${o}|${c}`];return d===-1||d===0||d===2};if(n.precheck){const o=n.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(s,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(s,t)&&(!a||l(i,t)))}loadNamespaces(t,n){const s=gp();return this.options.ns?(Pt(t)&&(t=[t]),t.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{s.resolve(),n&&n(a)}),s):(n&&n(),Promise.resolve())}loadLanguages(t,n){const s=gp();Pt(t)&&(t=[t]);const a=this.options.preload||[],i=t.filter(l=>a.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return i.length?(this.options.preload=a.concat(i),this.loadResources(l=>{s.resolve(),n&&n(l)}),s):(n&&n(),Promise.resolve())}dir(t){var a,i;if(t||(t=this.resolvedLanguage||(((a=this.languages)==null?void 0:a.length)>0?this.languages[0]:this.language)),!t)return"rtl";try{const l=new Intl.Locale(t);if(l&&l.getTextInfo){const o=l.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=((i=this.services)==null?void 0:i.languageUtils)||new tR(iR());return t.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(s.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},n){return new Wx(t,n)}cloneInstance(t={},n=$y){const s=t.forkResourceStore;s&&delete t.forkResourceStore;const a={...this.options,...t,isClone:!0},i=new Wx(a);if((t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s){const o=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},c[d]=Object.keys(c[d]).reduce((u,h)=>(u[h]={...c[d][h]},u),c[d]),c),{});i.store=new ZO(o,a),i.services.resourceStore=i.store}return i.translator=new eR(i.services,a),i.translator.on("*",(o,...c)=>{i.emit(o,...c)}),i.init(a,n),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ts=Wx.createInstance();ts.createInstance=Wx.createInstance;ts.createInstance;ts.dir;ts.init;ts.loadResources;ts.reloadResources;ts.use;ts.changeLanguage;ts.getFixedT;ts.t;ts.exists;ts.setDefaultNamespace;ts.hasLoadedNamespace;ts.loadNamespaces;ts.loadLanguages;const iJ=(e,t,n,s)=>{var i,l,o,c;const a=[n,{code:t,...s||{}}];if((l=(i=e==null?void 0:e.services)==null?void 0:i.logger)!=null&&l.forward)return e.services.logger.forward(a,"warn","react-i18next::",!0);eu(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),(c=(o=e==null?void 0:e.services)==null?void 0:o.logger)!=null&&c.warn?e.services.logger.warn(...a):console!=null&&console.warn&&console.warn(...a)},oR={},j2=(e,t,n,s)=>{eu(n)&&oR[n]||(eu(n)&&(oR[n]=new Date),iJ(e,t,n,s))},x8=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},w2=(e,t,n)=>{e.loadNamespaces(t,x8(e,n))},cR=(e,t,n,s)=>{if(eu(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return w2(e,n,s);n.forEach(a=>{e.options.ns.indexOf(a)<0&&e.options.ns.push(a)}),e.loadLanguages(t,x8(e,s))},lJ=(e,t,n={})=>!t.languages||!t.languages.length?(j2(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(s,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!a(s.isLanguageChangingTo,e))return!1}}),eu=e=>typeof e=="string",oJ=e=>typeof e=="object"&&e!==null,cJ=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,dJ={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},uJ=e=>dJ[e],hJ=e=>e.replace(cJ,uJ);let N2={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:hJ};const fJ=(e={})=>{N2={...N2,...e}},mJ=()=>N2;let g8;const pJ=e=>{g8=e},xJ=()=>g8,gJ={type:"3rdParty",init(e){fJ(e.options.react),pJ(e)}},vJ=v.createContext();class yJ{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const bJ=(e,t)=>{const n=v.useRef();return v.useEffect(()=>{n.current=e},[e,t]),n.current},v8=(e,t,n,s)=>e.getFixedT(t,n,s),jJ=(e,t,n,s)=>v.useCallback(v8(e,t,n,s),[e,t,n,s]),Wt=(e,t={})=>{var p,N,k,S;const{i18n:n}=t,{i18n:s,defaultNS:a}=v.useContext(vJ)||{},i=n||s||xJ();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new yJ),!i){j2(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const P=(R,O)=>eu(O)?O:oJ(O)&&eu(O.defaultValue)?O.defaultValue:Array.isArray(R)?R[R.length-1]:R,_=[P,{},!1];return _.t=P,_.i18n={},_.ready=!1,_}(p=i.options.react)!=null&&p.wait&&j2(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...mJ(),...i.options.react,...t},{useSuspense:o,keyPrefix:c}=l;let d=a||((N=i.options)==null?void 0:N.defaultNS);d=eu(d)?[d]:d||["translation"],(S=(k=i.reportNamespaces).addUsedNamespaces)==null||S.call(k,d);const u=(i.isInitialized||i.initializedStoreOnce)&&d.every(P=>lJ(P,i,l)),h=jJ(i,t.lng||null,l.nsMode==="fallback"?d:d[0],c),f=()=>h,m=()=>v8(i,t.lng||null,l.nsMode==="fallback"?d:d[0],c),[g,x]=v.useState(f);let w=d.join();t.lng&&(w=`${t.lng}${w}`);const j=bJ(w),y=v.useRef(!0);v.useEffect(()=>{const{bindI18n:P,bindI18nStore:_}=l;y.current=!0,!u&&!o&&(t.lng?cR(i,t.lng,d,()=>{y.current&&x(m)}):w2(i,d,()=>{y.current&&x(m)})),u&&j&&j!==w&&y.current&&x(m);const R=()=>{y.current&&x(m)};return P&&(i==null||i.on(P,R)),_&&(i==null||i.store.on(_,R)),()=>{y.current=!1,i&&P&&(P==null||P.split(" ").forEach(O=>i.off(O,R))),_&&i&&_.split(" ").forEach(O=>i.store.off(O,R))}},[i,w]),v.useEffect(()=>{y.current&&u&&x(f)},[i,c,u]);const b=[g,i,u];if(b.t=g,b.i18n=i,b.ready=u,u||!u&&!o)return b;throw new Promise(P=>{t.lng?cR(i,t.lng,d,()=>P()):w2(i,d,()=>P())})},{slice:wJ,forEach:NJ}=[];function kJ(e){return NJ.call(wJ.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}function SJ(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(e))}const dR=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,CJ=function(e,t){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},a=encodeURIComponent(t);let i=`${e}=${a}`;if(s.maxAge>0){const l=s.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(l)}`}if(s.domain){if(!dR.test(s.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${s.domain}`}if(s.path){if(!dR.test(s.path))throw new TypeError("option path is invalid");i+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(i+="; Partitioned"),i},uR={create(e,t,n,s){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+n*60*1e3)),s&&(a.domain=s),document.cookie=CJ(e,t,a)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let s=0;s<n.length;s++){let a=n[s];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(t)===0)return a.substring(t.length,a.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var PJ={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return uR.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:s,cookieDomain:a,cookieOptions:i}=t;n&&typeof document<"u"&&uR.create(n,e,s,a,i)}},_J={name:"querystring",lookup(e){var s;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:a}=window.location;!window.location.search&&((s=window.location.hash)==null?void 0:s.indexOf("?"))>-1&&(a=window.location.hash.substring(window.location.hash.indexOf("?")));const l=a.substring(1).split("&");for(let o=0;o<l.length;o++){const c=l[o].indexOf("=");c>0&&l[o].substring(0,c)===t&&(n=l[o].substring(c+1))}}return n}},AJ={name:"hash",lookup(e){var a;let{lookupHash:t,lookupFromHashIndex:n}=e,s;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const l=i.substring(1);if(t){const o=l.split("&");for(let c=0;c<o.length;c++){const d=o[c].indexOf("=");d>0&&o[c].substring(0,d)===t&&(s=o[c].substring(d+1))}}if(s)return s;if(!s&&n>-1){const o=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?(a=o[typeof n=="number"?n:0])==null?void 0:a.replace("/",""):void 0}}}return s}};let Ku=null;const hR=()=>{if(Ku!==null)return Ku;try{if(Ku=typeof window<"u"&&window.localStorage!==null,!Ku)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Ku=!1}return Ku};var TJ={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&hR())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&hR()&&window.localStorage.setItem(n,e)}};let Gu=null;const fR=()=>{if(Gu!==null)return Gu;try{if(Gu=typeof window<"u"&&window.sessionStorage!==null,!Gu)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Gu=!1}return Gu};var EJ={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&fR())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&fR()&&window.sessionStorage.setItem(n,e)}},OJ={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:s,language:a}=navigator;if(n)for(let i=0;i<n.length;i++)t.push(n[i]);s&&t.push(s),a&&t.push(a)}return t.length>0?t:void 0}},RJ={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const s=t||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(n=s.getAttribute("lang")),n}},DJ={name:"path",lookup(e){var a;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(a=n[typeof t=="number"?t:0])==null?void 0:a.replace("/",""):void 0}},MJ={name:"subdomain",lookup(e){var a,i;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,s=typeof window<"u"&&((i=(a=window.location)==null?void 0:a.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(s)return s[n]}};let y8=!1;try{document.cookie,y8=!0}catch{}const b8=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];y8||b8.splice(1,1);const $J=()=>({order:b8,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class j8{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=kJ(n,this.options||{},$J()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=a=>a.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(PJ),this.addDetector(_J),this.addDetector(TJ),this.addDetector(EJ),this.addDetector(OJ),this.addDetector(RJ),this.addDetector(DJ),this.addDetector(MJ),this.addDetector(AJ)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return t.forEach(s=>{if(this.detectors[s]){let a=this.detectors[s].lookup(this.options);a&&typeof a=="string"&&(a=[a]),a&&(n=n.concat(a))}}),n=n.filter(s=>s!=null&&!SJ(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(t,this.options)}))}}j8.type="languageDetector";const IJ={russian:"Русский",english:"English",select:"Select Language"},FJ={update:"Update",create:"Create",active:"Active",settings:"Settings",profile:"Profile",logout:"Logout",error:"Error",loading:"Loading...",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",view:"View",copy:"Copy",back:"Back",next:"Next",search:"Search",filter:"Filter",actions:"Actions",status:"Status",date:"Date",name:"Name",description:"Description"},LJ={description:"Create and configure user roles with access permissions",createRole:"Create Role",totalRoles:"Total Roles",globalRoles:"Global Roles",advertiserRoles:"Advertiser Roles",activeRoles:"Active Roles",allRoles:"All Roles",global:"Global",advertiser:"Advertiser",affiliate:"Partner",staff:"Staff",superAdmin:"Super Admin",scope:"Scope",permissions:"Permissions",globalRole:"Global",advertiserRole:"Advertiser",noRoles:"No roles found",noDescription:"No description available"},UJ={light:"Light theme",dark:"Dark theme",system:"System theme"},BJ={dashboard:"Dashboard",users:"Users",userAnalytics:"User Analytics",roles:"Roles",offers:"Offers",finances:"Finances",antifraud:"Anti-fraud",postbacks:"Postbacks",blacklist:"Blacklist",auditLogs:"Audit Logs",systemSettings:"System Settings",analytics:"Analytics",support:"Support",team:"Team",statistics:"Statistics",profile:"Profile",creatives:"Creatives",home:"Home",homeDesc:"Cabinet overview",myOffers:"My Offers",myOffersDesc:"Manage offers",partners:"Partners",partnersDesc:"Manage partners",accessRequests:"Access Requests",accessRequestsDesc:"Access requests to offers",referrals:"Referrals",referralsDesc:"Referral program",notifications:"Notifications",notificationsDesc:"System notifications"},zJ={dashboard:"Dashboard",statistics:"Statistics",offers:"Offers",accessRequests:"Access Requests",creatives:"Creatives",team:"Team",finances:"Finances",postbacks:"Postbacks",profile:"Profile",settings:"Settings",notifications:"Notifications",logout:"Logout",help:"Help",referrals:"Referrals"},VJ={findNewOffers:"Find New Offers",checkStatistics:"Check Statistics",contactManager:"Contact Manager",configuredPostbacks:"Configured Postbacks",integrationSetup:"Integration setup with external trackers",createPostbackProfile:"Create Postback Profile",quickActions:"Quick Actions",navigateToOffers:"Navigate to Offers",navigateToOffersDescription:"Opening available offers page",navigateToStatistics:"Navigate to Statistics",navigateToStatisticsDescription:"Opening analytics page",dataUpdated:"Data Updated",dataUpdatedDescription:"Dashboard data successfully updated",totalClicks:"Total Clicks",conversions:"Conversions",revenue:"Revenue",conversionRate:"Conversion Rate",uniqueClicks:"Unique Clicks",activeOffers:"Active Offers",status:"Status",active:"Active",avgEPC:"Avg EPC",loadingError:"Failed to load dashboard data",recentNotifications:"Recent Notifications",allNotifications:"All Notifications",noNotifications:"No Notifications",noNotificationsDesc:"Important notifications about your requests will appear here"},qJ={title:"Offers",subtitle:"Available offers for promotion",availableOffers:"Available Offers",partnerOffers:"Partner Offers",offerDetails:"Offer Details",requestAccess:"Request access",accessRequested:"Access requested",accessApproved:"Access approved",getLink:"Get Link",viewDetails:"View Details",copyLink:"Copy Link",copyId:"Copy ID",openLanding:"Open Landing",category:"Category",payout:"Payout",countries:"Countries",conversionFlow:"Conversion flow",trafficSources:"Traffic sources",requestAccessToOffer:"Request Access to Offer",myAccessRequests:"My Access Requests",accessRequests:"Access Requests",requestSent:"Request Sent",requestSentDesc:"Your access request has been sent to the advertiser",requestError:"Failed to send request",loading:"Loading offers...",pending:"Pending",rejected:"Rejected",accessApprovedTooltip:"Access approved - get link",requestPendingTooltip:"Request sent, awaiting advertiser review",accessRejected:"Access rejected",requestAccessTooltip:"Request access to offer",details:"Details",statistics:"Statistics",retryRequest:"Retry Request",retry:"Retry"},WJ={title:"Team",subtitle:"Manage team members"},HJ={title:"Profile",subtitle:"Partner profile settings"},KJ={title:"Settings",subtitle:"Account and system settings"},GJ={title:"Notifications",subtitle:"System notifications and messages"},YJ={title:"Postbacks",subtitle:"Integration setup with external trackers",createProfile:"Create Profile",createProfileTitle:"Create New Profile",createProfileDescription:"Configure parameters for sending postbacks to external systems",editProfileTitle:"Edit Profile",editProfileDescription:"Modify tracker integration settings",testTitle:"Postback Testing",testDescription:"Send test postback to verify settings",profiles:"Profiles",deliveryLogs:"Delivery Logs",clickId:"Click ID",eventType:"Event Type",amount:"Amount",currency:"Currency",sendTest:"Send Test",configuredPostbacks:"Configured Postbacks",createPostbackProfile:"Create Postback Profile",name:"Name",trackerType:"Tracker Type",scope:"Scope",priority:"Priority",endpointUrl:"Endpoint URL",method:"Method",statusMapping:"Status Mapping",paramsTemplate:"Parameters Template",endpoint:"Endpoint",lastDelivery:"Last Delivery",never:"Never",global:"Global",offer:"Offer",custom:"Custom",placeholderName:"My Tracker",placeholderEndpoint:"https://mytracker.com/postback",time:"Time",profile:"Profile",status:"Status",responseCode:"Response Code",attempt:"Attempt",responseTime:"Response Time",success:"Success",error:"Error",noLogsYet:"No delivery logs yet",quickSetup:"Quick setup with template",templateHelp:"Select a template to automatically fill settings for popular trackers",endpointSettings:"Endpoint Settings",testProfile:"Test Profile",testSuccess:"Test Success",testFailed:"Test Failed",testError:"Test Error",postbackSent:"Postback Sent",deleteProfile:"Delete Profile",editProfile:"Edit Profile",loading:"Loading profiles...",noProfilesFound:"NO PROFILES FOUND!",debugInfo:"DEBUG - FULL INFORMATION",refreshWarning:"IF BUTTONS ARE WHITE: Refresh page (Ctrl+F5) or clear cache!",deliveryHistory:"History of postback delivery to trackers",createError:"Creation Error",deleteError:"Deletion Error",basicTab:"Basic",settingsTab:"Settings",advancedSettings:"Advanced Settings",comingSoon:"Advanced configuration parameters will be added in future versions."},XJ={title:"Finances",subtitle:"Balance and withdrawal management",currentBalance:"Current Balance",availableForWithdrawal:"Available for withdrawal",pendingPayouts:"Pending",awaitingConfirmation:"Awaiting confirmation",totalRevenue:"Total Revenue",allTime:"All time",avgEPC:"Average EPC",earningsPerClick:"Earnings per click",withdrawal:"Withdrawal",createWithdrawal:"Create withdrawal request",availableAmount:"Available",withdrawalAmount:"Amount",paymentMethod:"Payment method",paymentDetails:"Payment details",selectMethod:"Select method",enterDetails:"Enter payment details",submitRequest:"Submit request",transactionHistory:"Transaction History",downloadReport:"Download report",commission:"Commission",bonus:"Bonus",payout:"Payout",paymentMethods:{paypal:"PayPal",bankCard:"Bank Card",bankTransfer:"Bank Transfer",crypto:"Cryptocurrency"},balance:"Balance",pending:"Pending",messages:{withdrawalRequested:"Request submitted",withdrawalRequestedDesc:"Withdrawal request created and will be processed within 24 hours.",fillAllFields:"Fill all fields",fillAllFieldsDesc:"All fields are required",insufficientFunds:"Insufficient funds",insufficientFundsDesc:"Withdrawal amount exceeds available balance",reportDownloaded:"Report downloaded",reportDownloadedDesc:"Financial report in {{format}} format downloaded successfully",downloadError:"Error",downloadErrorDesc:"Failed to download report",withdrawalError:"Failed to create withdrawal request"}},ZJ={login:"Sign In",loginSubtitle:"Enter your credentials to sign in",register:"Sign Up",registerSubtitle:"Create a new account",username:"Username",email:"Email",password:"Password",confirmPassword:"Confirm Password",firstName:"First Name",lastName:"Last Name",company:"Company",phone:"Phone",alreadyHaveAccount:"Already have an account?",noAccount:"Don't have an account?",loginHere:"Sign in here",registerHere:"Sign up here"},QJ={title:"Partner Statistics",subtitle:"Detailed analytics of clicks and conversions with real data",filters:"Filters",dateFrom:"Date from",dateTo:"Date to",offer:"Offer",geo:"Geo",device:"Device",allOffers:"All offers",allCountries:"All countries",allDevices:"All devices",allGeos:"All countries",desktop:"Desktop",mobile:"Mobile",tablet:"Tablet",apply:"Apply",applyFilters:"Apply Filters",resetFilters:"Reset Filters",reset:"Reset",export:"Export",overview:"Overview",clicks:"Clicks",conversions:"Conversions",subids:"SubID",totalClicks:"Total Clicks",totalConversions:"Total Conversions",totalRevenue:"Total Revenue",conversionRate:"Conversion Rate",epc:"EPC",clickId:"Click ID",timestamp:"Time",country:"Country",source:"Source",amount:"Amount",currency:"Currency",copy:"Copy",viewDetails:"View Details",noData:"No Data",loading:"Loading...",dateNotAvailable:"Date unknown",tabs:{overview:"Overview",geography:"Geography",devices:"Devices",sources:"Sources",subid:"SubID",details:"Details"},columns:{date:"Date/Time",offer:"Offer",country:"Country",clicks:"Clicks",conversions:"Conversions",clickId:"ClickID",status:"Status",revenue:"Revenue",actions:"Actions",cr:"CR",epc:"EPC",device:"Device",source:"Source",ip:"IP",sub1:"Sub1",sub2:"Sub2",sub3:"Sub3",sub4:"Sub4",sub5:"Sub5"},status:{click:"Click",conversion:"Conversion"},actions:{copyClickId:"Copy ClickID",viewSubId:"View SubID parameters",viewAllSub:"View all Sub1-Sub16"},messages:{loadingError:"Loading error",loadingErrorDesc:"Failed to load partner statistics",copied:"Copied",copiedDesc:"{{type}} copied to clipboard",copyError:"Failed to copy to clipboard"},pagination:{showing:"Showing",of:"of",records:"records",previous:"Previous",next:"Next"},geography:"Geography",countries:{IN:"India",US:"United States",DE:"Germany",UK:"United Kingdom"},devices:{desktop:"Desktop",mobile:"Mobile",tablet:"Tablet"},subid:{title:"SubID Analysis",description:"Detailed analysis of all Sub1-Sub16 parameters with data preservation",detailsTitle:"Detailed Statistics",parametersFor:"SubID Parameters for",fullList:"Complete list of all Sub1-Sub16 parameters with exact data preservation"}},JJ={title:"My Access Requests",subtitle:"Manage requests for access to advertiser offers",newRequest:"New Request",refresh:"Refresh List",totalRequests:"Total Requests",pending:"Pending",approved:"Approved",rejected:"Rejected",allStatuses:"All Statuses",searchPlaceholder:"Search by offer, advertiser...",offer:"Offer",advertiser:"Advertiser",status:"Status",requestDate:"Request Date",message:"Message",actions:"Actions",noMessage:"No message",noRequests:"No requests found",dateNotAvailable:"Date unknown",dateInvalid:"Invalid date",today:"Today at",yesterday:"Yesterday at"},eee={title:"Links",trackingLinks:"Tracking Links",accessRestricted:"Access to links restricted",waitingApproval:"Tracking links will appear after your request is approved by the advertiser.",status:"Status",pendingApproval:"Awaiting approval",requestAccess:"Request access to offer needed",linkCopied:"Ready link with clickid copied to clipboard"},tee={language:IJ,common:FJ,roles:LJ,theme:UJ,sidebar:BJ,navigation:zJ,dashboard:VJ,offers:qJ,team:WJ,profile:HJ,settings:KJ,notifications:GJ,postbacks:YJ,finances:XJ,auth:ZJ,statistics:QJ,accessRequests:JJ,links:eee},ree={select:"Выбрать язык",russian:"Русский",english:"Английский"},nee={loading:"Загрузка...",save:"Сохранить",cancel:"Отмена",delete:"Удалить",edit:"Редактировать",add:"Добавить",search:"Поиск",filter:"Фильтр",export:"Экспорт",import:"Импорт",settings:"Настройки",profile:"Профиль",logout:"Выход",login:"Вход",register:"Регистрация",close:"Закрыть",confirm:"Подтвердить",status:"Статус",date:"Дата",amount:"Сумма",description:"Описание",type:"Тип",actions:"Действия",details:"Детали",total:"Итого",balance:"Баланс",pending:"В ожидании",completed:"Завершено",failed:"Отклонено",processing:"Обработка",error:"Ошибка",refresh:"Обновить",name:"Название",payoutType:"Тип выплаты",username:"Имя пользователя",email:"Email",password:"Пароль",sign_in:"Войти",active:"Включен",disabled:"Отключен",confirmDelete:"Вы уверены, что хотите удалить?",copied:"Скопировано",copiedToClipboard:"скопировано в буфер обмена",copiedDesc:"{item} скопировано в буфер обмена",getLink:"Получить ссылку",requestOffer:"Запросить оффер",connectPostback:"Подключить постбек",accessGranted:"Доступ открыт",available:"Доступен",rejected:"Отклонено",geo:"Гео",all:"Все",create:"Создать",update:"Обновить",conversions:"Конверсии",theme:"Тема",view:"Просмотр",inactive:"Неактивен"},see={description:"Создание и настройка пользовательских ролей с правами доступа",createRole:"Создать роль",totalRoles:"Всего ролей",globalRoles:"Глобальные роли",advertiserRoles:"Роли рекламодателей",activeRoles:"Активные роли",allRoles:"Все роли",global:"Глобальные",advertiser:"Рекламодатель",affiliate:"Партнер",staff:"Сотрудник",superAdmin:"Супер Админ",scope:"Область действия",permissions:"Права доступа",globalRole:"Глобальная",advertiserRole:"Рекламодателей",noRoles:"Роли не найдены",noDescription:"Описание отсутствует"},aee={dashboard:"Дашборд",users:"Пользователи",userAnalytics:"Аналитика пользователей",roles:"Роли",offers:"Офферы",finances:"Финансы",antifraud:"Антифрод",postbacks:"Постбеки",blacklist:"Черный список",auditLogs:"Журнал аудита",systemSettings:"Настройки системы",analytics:"Аналитика",support:"Поддержка",team:"Команда",statistics:"Статистика",profile:"Профиль",creatives:"Креативы",home:"Главная",homeDesc:"Обзор кабинета",myOffers:"Мои офферы",myOffersDesc:"Управление офферами",partners:"Партнеры",partnersDesc:"Управление партнерами",accessRequests:"Запросы доступа",accessRequestsDesc:"Заявки на доступ к офферам",referrals:"Рефералы",referralsDesc:"Реферальная программа",notifications:"Уведомления",notificationsDesc:"Системные уведомления"},iee={partner:"Партнер",dashboard:"Дашборд",offers:"Офферы",statistics:"Статистика",finances:"Финансы",team:"Команда",creatives:"Креативы",accessRequests:"Запросы доступа",referrals:"Рефералы",postbacks:"Постбеки",profile:"Профиль",settings:"Настройки",notifications:"Уведомления",logout:"Выход",help:"Помощь"},lee="Войти",oee="Имя пользователя",cee="Email",dee="Пароль",uee="Войти",hee={title:"Дашборд владельца",subtitle:"Полная панель управления вашей партнерской платформой",overview:"Обзор",stats:"Статистика",recent:"Недавние",conversions:"Конверсии",refresh:"Обновить",period:{today:"Сегодня","7days":"7 дней","30days":"30 дней","90days":"90 дней"},geo:{all:"Все регионы",russia:"Россия",usa:"США",europe:"Европа"},metrics:{activePartners:"Активные партнеры",activeOffers:"Активные офферы",todayClicks:"Клики сегодня",conversions:"Конверсии",platformRevenue:"Доходы платформы",fraudRate:"Уровень фрода"},charts:{conversionTitle:"Конверсии",conversionDesc:"График конверсий по дням",trafficTitle:"Трафик и конверсии",trafficDesc:"Анализ трафика и отслеживание конверсий в реальном времени",revenueTitle:"Аналитика доходов",revenueDesc:"Разбивка доходов платформы по источникам",geoTitle:"Географическая производительность",geoDesc:"Распределение кликов по странам и регионам"},data:{updated:"Данные обновлены",updateDesc:"Все данные дашборда успешно обновлены"},activities:{title:"Последние действия",desc:"История активности системы"},quickActions:"Быстрые действия",quickActionsDesc:"Основные операции системы",findNewOffers:"Найти новые офферы",checkStatistics:"Проверить статистику",contactManager:"Связаться с менеджером",configuredPostbacks:"Настроенные постбеки",integrationSetup:"Настройка интеграции с внешними трекерами",createPostbackProfile:"Создать профиль постбека",navigateToOffers:"Переход к офферам",navigateToOffersDescription:"Открытие страницы доступных офферов",navigateToStatistics:"Переход к статистике",navigateToStatisticsDescription:"Открытие страницы аналитики",dataUpdated:"Данные обновлены",dataUpdatedDescription:"Данные дашборда успешно обновлены",totalClicks:"Всего кликов",revenue:"Доходы",conversionRate:"Коэффициент конверсии",uniqueClicks:"Уникальные клики",activeOffers:"Активные офферы",status:"Статус",active:"Активный",avgEPC:"Средний EPC",loadingError:"Не удалось загрузить данные дашборда",recentNotifications:"Последние уведомления",allNotifications:"Все уведомления",noNotifications:"Уведомлений нет",noNotificationsDesc:"Здесь будут отображаться важные уведомления о ваших запросах"},fee={title:"Офферы",description:"Управление рекламными предложениями",create:"Создать оффер",edit:"Редактировать оффер",delete:"Удалить оффер",details:"Детали оффера",statistics:"Статистика",creatives:"Креативы",settings:"Настройки",landingPages:"Лендинги",payouts:"Выплаты",partnerOffers:"Офферы партнера",viewDetails:"Просмотр деталей",requestAccess:"Запросить доступ",copyLink:"Копировать ссылку",copyId:"Копировать ID",openLanding:"Открыть лендинг"},mee={title:"Пользователи",description:"Управление пользователями системы",create:"Создать пользователя",edit:"Редактировать пользователя",block:"Заблокировать",delete:"Удалить",details:"Детали пользователя",management:"Управление пользователями",analytics:"Аналитика пользователей"},pee={title:"Партнеры",description:"Управление партнерами",invite:"Пригласить партнера",access:"Доступ к офферам"},xee={title:"Запросы доступа",subtitle:"Управление запросами на доступ к офферам",newRequest:"Новый запрос",refresh:"Обновить",totalRequests:"Всего запросов",pending:"Ожидает",approved:"Одобрено",rejected:"Отклонено",searchPlaceholder:"Поиск по офферу, рекламодателю...",filterStatus:"Фильтр по статусу",allStatuses:"Все статусы",offer:"Оффер",advertiser:"Рекламодатель",status:"Статус",requestDate:"Дата запроса",message:"Сообщение",actions:"Действия",noRequests:"Запросы не найдены",noMessage:"Без сообщения",getLink:"Получить ссылку",viewDetails:"Подробнее",dateNotAvailable:"Дата неизвестна",dateInvalid:"Неверная дата",today:"Сегодня",yesterday:"Вчера"},gee={title:"Статистика",subtitle:"Детальная аналитика и отчеты",filters:"Фильтры",export:"Экспорт",dateFrom:"Дата с",dateTo:"Дата по",offer:"Оффер",allOffers:"Все офферы",geo:"ГЕО",allGeos:"Все страны",device:"Устройство",allDevices:"Все устройства",desktop:"Десктоп",mobile:"Мобильные",tablet:"Планшеты",apply:"Применить",applyFilters:"Применить фильтры",resetFilters:"Сбросить фильтры",reset:"Сбросить",overview:"Обзор",clicks:"Клики",conversions:"Конверсии",subids:"SubID",totalClicks:"Всего кликов",totalConversions:"Всего конверсий",totalRevenue:"Общий доход",conversionRate:"Коэффициент конверсии",epc:"EPC",clickId:"ID клика",timestamp:"Время",country:"Страна",source:"Источник",amount:"Сумма",currency:"Валюта",copy:"Копировать",viewDetails:"Подробнее",noData:"Нет данных",loading:"Загрузка...",dateNotAvailable:"Дата неизвестна",columns:{date:"Дата",offer:"Оффер",country:"Страна",clicks:"Клики",conversions:"Конверсии",revenue:"Доходы",source:"Источник",device:"Устройство",clickId:"ID клика",status:"Статус",actions:"Действия",ip:"IP"},tabs:{overview:"Обзор",geography:"География",devices:"Устройства",sources:"Источники",details:"Детали"},status:{click:"Клик",conversion:"Конверсия"},actions:{copyClickId:"Копировать ID клика",viewSubId:"Посмотреть SubID"},subid:{title:"SubID данные",description:"Детальная информация по SubID параметрам",detailsTitle:"Детализация по кликам"},pagination:{showing:"Показано",of:"из",records:"записей",previous:"Назад",next:"Вперед"},messages:{copied:"Скопировано",copiedDesc:"{{type}} скопировано в буфер обмена",copyError:"Ошибка копирования",loadingError:"Ошибка загрузки",loadingErrorDesc:"Не удалось загрузить данные статистики"}},vee={title:"Команда",subtitle:"Управление участниками команды",addMember:"Добавить участника",editMember:"Редактировать участника",deleteMember:"Удалить участника",role:"Роль",permissions:"Разрешения",status:"Статус",lastActivity:"Последняя активность",buyer:"Байер",analyst:"Аналитик",manager:"Менеджер",active:"Активен",inactive:"Неактивен",email:"Email",username:"Имя пользователя",password:"Пароль",subIdPrefix:"Префикс SubID",viewOffers:"Просмотр офферов",generateLinks:"Генерация ссылок",viewStatistics:"Просмотр статистики",viewCreatives:"Просмотр креативов",createMember:"Создать участника",save:"Сохранить",cancel:"Отмена",delete:"Удалить"},yee={title:"Профиль",subtitle:"Информация об аккаунте",personalInfo:"Личная информация",firstName:"Имя",lastName:"Фамилия",company:"Компания",phone:"Телефон",country:"Страна",city:"Город",address:"Адрес",contactDetails:"Контактные данные",paymentInfo:"Платежная информация",save:"Сохранить изменения",saved:"Сохранено",savedDesc:"Профиль успешно обновлен"},bee={title:"Настройки",subtitle:"Конфигурация системы",general:"Общие",notifications:"Уведомления",security:"Безопасность",api:"API",language:"Язык",theme:"Тема",timezone:"Часовой пояс",emailNotifications:"Email уведомления",smsNotifications:"SMS уведомления",pushNotifications:"Push уведомления",changePassword:"Сменить пароль",currentPassword:"Текущий пароль",newPassword:"Новый пароль",confirmPassword:"Подтвердите пароль",twoFactorAuth:"Двухфакторная аутентификация",apiKey:"API ключ",generateKey:"Сгенерировать ключ",save:"Сохранить",saved:"Настройки сохранены"},jee={title:"Уведомления",subtitle:"Системные сообщения и оповещения",markAllRead:"Отметить все как прочитанные",deleteAll:"Удалить все",filter:"Фильтр",all:"Все",unread:"Непрочитанные",read:"Прочитанные",type:"Тип",date:"Дата",message:"Сообщение",noNotifications:"Нет уведомлений",markRead:"Отметить как прочитанное",delete:"Удалить"},wee={title:"Финансы",subtitle:"Управление финансами и выплатами",balance:"Баланс",pending:"В ожидании",currentBalance:"Текущий баланс",pendingPayouts:"В ожидании",totalRevenue:"Общий доход",avgEPC:"Средний EPC",availableForWithdrawal:"Доступно к выводу",awaitingConfirmation:"Ожидает подтверждения",allTime:"За всё время",earningsPerClick:"Доходность на клик",transactionHistory:"История операций",requestWithdrawal:"Запросить выплату",amount:"Сумма",withdrawalMethod:"Способ выплаты",bankTransfer:"Банковский перевод",paypal:"PayPal",crypto:"Криптовалюта",other:"Другое",details:"Реквизиты",detailsPlaceholder:"Укажите реквизиты для получения средств",cancel:"Отмена",submit:"Отправить заявку",submitting:"Отправка...",date:"Дата",description:"Описание",status:"Статус",transaction:"Транзакция",approved:"Одобрено",rejected:"Отклонено",noTransactions:"Транзакции не найдены",unknownDate:"Дата неизвестна"},Nee={title:"Постбеки",subtitle:"Настройка интеграции с трекерами",configuredPostbacks:"Настроенные постбеки",profiles:"Профили постбеков",createProfile:"Создать профиль",editProfile:"Редактировать профиль",deleteProfile:"Удалить профиль",testProfile:"Тестировать профиль",name:"Название",url:"URL постбека",method:"Метод",headers:"Заголовки",active:"Активный",inactive:"Неактивный",lastDelivery:"Последняя отправка",deliveryLogs:"Логи доставки",testDelivery:"Тестовая отправка",save:"Сохранить",cancel:"Отмена",delete:"Удалить",test:"Тестировать"},kee={title:"Ссылки",trackingLinks:"Трекинговые ссылки",accessRestricted:"Доступ к ссылкам ограничен",waitingApproval:"Трекинговые ссылки появятся после одобрения вашего запроса рекламодателем.",status:"Статус",pendingApproval:"Ожидание одобрения",requestAccess:"Необходимо запросить доступ к офферу",linkCopied:"Готовая ссылка с clickid скопирована в буфер обмена"},See={language:ree,common:nee,roles:see,sidebar:aee,navigation:iee,login:lee,username:oee,email:cee,password:dee,sign_in:uee,dashboard:hee,offers:fee,users:mee,partners:pee,accessRequests:xee,statistics:gee,team:vee,profile:yee,settings:bee,notifications:jee,finances:wee,postbacks:Nee,links:kee},Cee={en:{translation:tee},ru:{translation:See}};ts.use(j8).use(gJ).init({resources:Cee,lng:"ru",fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],lookupLocalStorage:"i18nextLng",caches:["localStorage"]},load:"languageOnly",preload:["ru","en"],saveMissing:!1,initImmediate:!0,compatibilityJSON:"v4"});const Pee="modulepreload",_ee=function(e){return"/"+e},mR={},Aee=function(t,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=_ee(c),c in mR)return;mR[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Pee,d||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};function Tee(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,s,a,i,l=[],o="",c=e.split("/");for(c[0]||c.shift();a=c.shift();)n=a[0],n==="*"?(l.push(n),o+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(s=a.indexOf("?",1),i=a.indexOf(".",1),l.push(a.substring(1,~s?s:~i?i:a.length)),o+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(o+=(~s?"?":"")+"\\"+a.substring(i))):o+="/"+a;return{keys:l,pattern:new RegExp("^"+o+(t?"(?=$|/)":"/?$"),"i")}}var w8={exports:{}},N8={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mf=v;function Eee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oee=typeof Object.is=="function"?Object.is:Eee,Ree=Mf.useState,Dee=Mf.useEffect,Mee=Mf.useLayoutEffect,$ee=Mf.useDebugValue;function Iee(e,t){var n=t(),s=Ree({inst:{value:n,getSnapshot:t}}),a=s[0].inst,i=s[1];return Mee(function(){a.value=n,a.getSnapshot=t,QN(a)&&i({inst:a})},[e,n,t]),Dee(function(){return QN(a)&&i({inst:a}),e(function(){QN(a)&&i({inst:a})})},[e]),$ee(n),n}function QN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Oee(e,n)}catch{return!0}}function Fee(e,t){return t()}var Lee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Fee:Iee;N8.useSyncExternalStore=Mf.useSyncExternalStore!==void 0?Mf.useSyncExternalStore:Lee;w8.exports=N8;var Uee=w8.exports;const Bee=cL.useInsertionEffect,zee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",k8=zee?v.useLayoutEffect:v.useEffect,Vee=Bee||k8,TA=e=>{const t=v.useRef([e,(...n)=>t[0](...n)]).current;return Vee(()=>{t[0]=e}),t[1]},qee="popstate",EA="pushState",OA="replaceState",Wee="hashchange",pR=[qee,EA,OA,Wee],Hee=e=>{for(const t of pR)addEventListener(t,e);return()=>{for(const t of pR)removeEventListener(t,e)}},S8=(e,t)=>Uee.useSyncExternalStore(Hee,e,t),Kee=()=>location.search,Gee=({ssrSearch:e=""}={})=>S8(Kee,()=>e),xR=()=>location.pathname,Yee=({ssrPath:e}={})=>S8(xR,e?()=>e:xR),Xee=(e,{replace:t=!1,state:n=null}={})=>history[t?OA:EA](n,"",e),Zee=(e={})=>[Yee(e),Xee],gR=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[gR]>"u"){for(const e of[EA,OA]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,gR,{value:!0})}const Qee=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",C8=(e="")=>e==="/"?"":e,Jee=(e,t)=>e[0]==="~"?e.slice(1):C8(t)+e,ete=(e="",t)=>Qee(vR(C8(e)),vR(t)),vR=e=>{try{return decodeURI(e)}catch{return e}},P8={hook:Zee,searchHook:Gee,parser:Tee,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},_8=v.createContext(P8),Dv=()=>v.useContext(_8),A8={},T8=v.createContext(A8),Mv=()=>v.useContext(T8),Bw=e=>{const[t,n]=e.hook(e);return[ete(e.base,t),TA((s,a)=>n(Jee(s,e.base),a))]},Bn=()=>Bw(Dv()),E8=(e,t,n,s)=>{const{pattern:a,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),l=a.exec(n)||[],[o,...c]=l;return o!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((h,f)=>[h,c[f]])):l.groups;let u={...c};return d&&Object.assign(u,d),u})(),...s?[o]:[]]:[!1,null]},tte=({children:e,...t})=>{var u,h;const n=Dv(),s=t.hook?P8:n;let a=s;const[i,l]=((u=t.ssrPath)==null?void 0:u.split("?"))??[];l&&(t.ssrSearch=l,t.ssrPath=i),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let o=v.useRef({}),c=o.current,d=c;for(let f in s){const m=f==="base"?s[f]+(t[f]||""):t[f]||s[f];c===d&&m!==d[f]&&(o.current=d={...d}),d[f]=m,m!==s[f]&&(a=d)}return v.createElement(_8.Provider,{value:a,children:e})},yR=({children:e,component:t},n)=>t?v.createElement(t,{params:n}):typeof e=="function"?e(n):e,rte=e=>{let t=v.useRef(A8),n=t.current;for(const s in e)e[s]!==n[s]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},et=({path:e,nest:t,match:n,...s})=>{const a=Dv(),[i]=Bw(a),[l,o,c]=n??E8(a.parser,e,i,t),d=rte({...Mv(),...o});if(!l)return null;const u=c?v.createElement(tte,{base:c},yR(s,d)):yR(s,d);return v.createElement(T8.Provider,{value:d,children:u})},Ls=v.forwardRef((e,t)=>{const n=Dv(),[s,a]=Bw(n),{to:i="",href:l=i,onClick:o,asChild:c,children:d,className:u,replace:h,state:f,...m}=e,g=TA(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(o==null||o(w),w.defaultPrevented||(w.preventDefault(),a(l,e)))}),x=n.hrefs(l[0]==="~"?l.slice(1):n.base+l,n);return c&&v.isValidElement(d)?v.cloneElement(d,{onClick:g,href:x}):v.createElement("a",{...m,onClick:g,href:x,className:u!=null&&u.call?u(s===l):u,children:d,ref:t})}),O8=e=>Array.isArray(e)?e.flatMap(t=>O8(t&&t.type===v.Fragment?t.props.children:t)):[e],nte=({children:e,location:t})=>{const n=Dv(),[s]=Bw(n);for(const a of O8(e)){let i=0;if(v.isValidElement(a)&&(i=E8(n.parser,a.props.path,t||s,a.props.nest))[0])return v.cloneElement(a,{match:i})}return null},jd=e=>{const{to:t,href:n=t}=e,[,s]=Bn(),a=TA(()=>s(t||n,e));return k8(()=>{a()},[]),null};var Tm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hu=typeof window>"u"||"Deno"in globalThis;function Oa(){}function ste(e,t){return typeof e=="function"?e(t):e}function k2(e){return typeof e=="number"&&e>=0&&e!==1/0}function R8(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Dh(e,t){return typeof e=="function"?e(t):e}function vi(e,t){return typeof e=="function"?e(t):e}function bR(e,t){const{type:n="all",exact:s,fetchStatus:a,predicate:i,queryKey:l,stale:o}=e;if(l){if(s){if(t.queryHash!==RA(l,t.options))return!1}else if(!Hx(t.queryKey,l))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||i&&!i(t))}function jR(e,t){const{exact:n,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(fu(t.options.mutationKey)!==fu(i))return!1}else if(!Hx(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function RA(e,t){return((t==null?void 0:t.queryKeyHashFn)||fu)(e)}function fu(e){return JSON.stringify(e,(t,n)=>S2(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function Hx(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Hx(e[n],t[n])):!1}function D8(e,t){if(e===t)return e;const n=wR(e)&&wR(t);if(n||S2(e)&&S2(t)){const s=n?e:Object.keys(e),a=s.length,i=n?t:Object.keys(t),l=i.length,o=n?[]:{};let c=0;for(let d=0;d<l;d++){const u=n?d:i[d];(!n&&s.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(o[u]=void 0,c++):(o[u]=D8(e[u],t[u]),o[u]===e[u]&&e[u]!==void 0&&c++)}return a===l&&c===a?e:o}return t}function jb(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function wR(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function S2(e){if(!NR(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!NR(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function NR(e){return Object.prototype.toString.call(e)==="[object Object]"}function ate(e){return new Promise(t=>{setTimeout(t,e)})}function C2(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?D8(e,t):t}function ite(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function lte(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var DA=Symbol();function M8(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===DA?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Dd,sc,Gh,VF,ote=(VF=class extends Tm{constructor(){super();ve(this,Dd);ve(this,sc);ve(this,Gh);we(this,Gh,t=>{if(!hu&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){L(this,sc)||this.setEventListener(L(this,Gh))}onUnsubscribe(){var t;this.hasListeners()||((t=L(this,sc))==null||t.call(this),we(this,sc,void 0))}setEventListener(t){var n;we(this,Gh,t),(n=L(this,sc))==null||n.call(this),we(this,sc,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){L(this,Dd)!==t&&(we(this,Dd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof L(this,Dd)=="boolean"?L(this,Dd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Dd=new WeakMap,sc=new WeakMap,Gh=new WeakMap,VF),MA=new ote,Yh,ac,Xh,qF,cte=(qF=class extends Tm{constructor(){super();ve(this,Yh,!0);ve(this,ac);ve(this,Xh);we(this,Xh,t=>{if(!hu&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){L(this,ac)||this.setEventListener(L(this,Xh))}onUnsubscribe(){var t;this.hasListeners()||((t=L(this,ac))==null||t.call(this),we(this,ac,void 0))}setEventListener(t){var n;we(this,Xh,t),(n=L(this,ac))==null||n.call(this),we(this,ac,t(this.setOnline.bind(this)))}setOnline(t){L(this,Yh)!==t&&(we(this,Yh,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return L(this,Yh)}},Yh=new WeakMap,ac=new WeakMap,Xh=new WeakMap,qF),wb=new cte;function P2(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},n.reject=a=>{s({status:"rejected",reason:a}),t(a)},n}function dte(e){return Math.min(1e3*2**e,3e4)}function $8(e){return(e??"online")==="online"?wb.isOnline():!0}var I8=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function JN(e){return e instanceof I8}function F8(e){let t=!1,n=0,s=!1,a;const i=P2(),l=x=>{var w;s||(f(new I8(x)),(w=e.abort)==null||w.call(e))},o=()=>{t=!0},c=()=>{t=!1},d=()=>MA.isFocused()&&(e.networkMode==="always"||wb.isOnline())&&e.canRun(),u=()=>$8(e.networkMode)&&e.canRun(),h=x=>{var w;s||(s=!0,(w=e.onSuccess)==null||w.call(e,x),a==null||a(),i.resolve(x))},f=x=>{var w;s||(s=!0,(w=e.onError)==null||w.call(e,x),a==null||a(),i.reject(x))},m=()=>new Promise(x=>{var w;a=j=>{(s||d())&&x(j)},(w=e.onPause)==null||w.call(e)}).then(()=>{var x;a=void 0,s||(x=e.onContinue)==null||x.call(e)}),g=()=>{if(s)return;let x;const w=n===0?e.initialPromise:void 0;try{x=w??e.fn()}catch(j){x=Promise.reject(j)}Promise.resolve(x).then(h).catch(j=>{var k;if(s)return;const y=e.retry??(hu?0:3),b=e.retryDelay??dte,p=typeof b=="function"?b(n,j):b,N=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,j);if(t||!N){f(j);return}n++,(k=e.onFail)==null||k.call(e,n,j),ate(p).then(()=>d()?void 0:m()).then(()=>{t?f(j):g()})})};return{promise:i,cancel:l,continue:()=>(a==null||a(),i),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?g():m().then(g),i)}}function ute(){let e=[],t=0,n=o=>{o()},s=o=>{o()},a=o=>setTimeout(o,0);const i=o=>{t?e.push(o):a(()=>{n(o)})},l=()=>{const o=e;e=[],o.length&&a(()=>{s(()=>{o.forEach(c=>{n(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{a=o}}}var Sn=ute(),Md,WF,L8=(WF=class{constructor(){ve(this,Md)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),k2(this.gcTime)&&we(this,Md,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(hu?1/0:5*60*1e3))}clearGcTimeout(){L(this,Md)&&(clearTimeout(L(this,Md)),we(this,Md,void 0))}},Md=new WeakMap,WF),Zh,Qh,Ta,ss,sv,$d,ai,Vl,HF,hte=(HF=class extends L8{constructor(t){super();ve(this,ai);ve(this,Zh);ve(this,Qh);ve(this,Ta);ve(this,ss);ve(this,sv);ve(this,$d);we(this,$d,!1),we(this,sv,t.defaultOptions),this.setOptions(t.options),this.observers=[],we(this,Ta,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,we(this,Zh,fte(this.options)),this.state=t.state??L(this,Zh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=L(this,ss))==null?void 0:t.promise}setOptions(t){this.options={...L(this,sv),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,Ta).remove(this)}setData(t,n){const s=C2(this.state.data,t,this.options);return Pe(this,ai,Vl).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){Pe(this,ai,Vl).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,a;const n=(s=L(this,ss))==null?void 0:s.promise;return(a=L(this,ss))==null||a.cancel(t),n?n.then(Oa).catch(Oa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,Zh))}isActive(){return this.observers.some(t=>vi(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===DA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!R8(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=L(this,ss))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=L(this,ss))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),L(this,Ta).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(L(this,ss)&&(L(this,$d)?L(this,ss).cancel({revert:!0}):L(this,ss).cancelRetry()),this.scheduleGc()),L(this,Ta).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Pe(this,ai,Vl).call(this,{type:"invalidate"})}fetch(t,n){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(L(this,ss))return L(this,ss).continueRetry(),L(this,ss).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(we(this,$d,!0),s.signal)})},i=()=>{const h=M8(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return a(f),we(this,$d,!1),this.options.persister?this.options.persister(h,f,this):h(f)},l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};a(l),(c=this.options.behavior)==null||c.onFetch(l,this),we(this,Qh,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Pe(this,ai,Vl).call(this,{type:"fetch",meta:(u=l.fetchOptions)==null?void 0:u.meta});const o=h=>{var f,m,g,x;JN(h)&&h.silent||Pe(this,ai,Vl).call(this,{type:"error",error:h}),JN(h)||((m=(f=L(this,Ta).config).onError)==null||m.call(f,h,this),(x=(g=L(this,Ta).config).onSettled)==null||x.call(g,this.state.data,h,this)),this.scheduleGc()};return we(this,ss,F8({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:h=>{var f,m,g,x;if(h===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){o(w);return}(m=(f=L(this,Ta).config).onSuccess)==null||m.call(f,h,this),(x=(g=L(this,Ta).config).onSettled)==null||x.call(g,h,this.state.error,this),this.scheduleGc()},onError:o,onFail:(h,f)=>{Pe(this,ai,Vl).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{Pe(this,ai,Vl).call(this,{type:"pause"})},onContinue:()=>{Pe(this,ai,Vl).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),L(this,ss).start()}},Zh=new WeakMap,Qh=new WeakMap,Ta=new WeakMap,ss=new WeakMap,sv=new WeakMap,$d=new WeakMap,ai=new WeakSet,Vl=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...U8(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return JN(a)&&a.revert&&L(this,Qh)?{...L(this,Qh),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),Sn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),L(this,Ta).notify({query:this,type:"updated",action:t})})},HF);function U8(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$8(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function fte(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var tl,KF,mte=(KF=class extends Tm{constructor(t={}){super();ve(this,tl);this.config=t,we(this,tl,new Map)}build(t,n,s){const a=n.queryKey,i=n.queryHash??RA(a,n);let l=this.get(i);return l||(l=new hte({cache:this,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){L(this,tl).has(t.queryHash)||(L(this,tl).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=L(this,tl).get(t.queryHash);n&&(t.destroy(),n===t&&L(this,tl).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Sn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return L(this,tl).get(t)}getAll(){return[...L(this,tl).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>bR(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>bR(t,s)):n}notify(t){Sn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Sn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Sn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},tl=new WeakMap,KF),rl,gs,Id,nl,Ho,GF,pte=(GF=class extends L8{constructor(t){super();ve(this,nl);ve(this,rl);ve(this,gs);ve(this,Id);this.mutationId=t.mutationId,we(this,gs,t.mutationCache),we(this,rl,[]),this.state=t.state||B8(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){L(this,rl).includes(t)||(L(this,rl).push(t),this.clearGcTimeout(),L(this,gs).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){we(this,rl,L(this,rl).filter(n=>n!==t)),this.scheduleGc(),L(this,gs).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){L(this,rl).length||(this.state.status==="pending"?this.scheduleGc():L(this,gs).remove(this))}continue(){var t;return((t=L(this,Id))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,l,o,c,d,u,h,f,m,g,x,w,j,y,b,p,N,k,S;we(this,Id,F8({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(P,_)=>{Pe(this,nl,Ho).call(this,{type:"failed",failureCount:P,error:_})},onPause:()=>{Pe(this,nl,Ho).call(this,{type:"pause"})},onContinue:()=>{Pe(this,nl,Ho).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,gs).canRun(this)}));const n=this.state.status==="pending",s=!L(this,Id).canStart();try{if(!n){Pe(this,nl,Ho).call(this,{type:"pending",variables:t,isPaused:s}),await((i=(a=L(this,gs).config).onMutate)==null?void 0:i.call(a,t,this));const _=await((o=(l=this.options).onMutate)==null?void 0:o.call(l,t));_!==this.state.context&&Pe(this,nl,Ho).call(this,{type:"pending",context:_,variables:t,isPaused:s})}const P=await L(this,Id).start();return await((d=(c=L(this,gs).config).onSuccess)==null?void 0:d.call(c,P,t,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,P,t,this.state.context)),await((m=(f=L(this,gs).config).onSettled)==null?void 0:m.call(f,P,null,this.state.variables,this.state.context,this)),await((x=(g=this.options).onSettled)==null?void 0:x.call(g,P,null,t,this.state.context)),Pe(this,nl,Ho).call(this,{type:"success",data:P}),P}catch(P){try{throw await((j=(w=L(this,gs).config).onError)==null?void 0:j.call(w,P,t,this.state.context,this)),await((b=(y=this.options).onError)==null?void 0:b.call(y,P,t,this.state.context)),await((N=(p=L(this,gs).config).onSettled)==null?void 0:N.call(p,void 0,P,this.state.variables,this.state.context,this)),await((S=(k=this.options).onSettled)==null?void 0:S.call(k,void 0,P,t,this.state.context)),P}finally{Pe(this,nl,Ho).call(this,{type:"error",error:P})}}finally{L(this,gs).runNext(this)}}},rl=new WeakMap,gs=new WeakMap,Id=new WeakMap,nl=new WeakSet,Ho=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Sn.batch(()=>{L(this,rl).forEach(s=>{s.onMutationUpdate(t)}),L(this,gs).notify({mutation:this,type:"updated",action:t})})},GF);function B8(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var oa,av,YF,xte=(YF=class extends Tm{constructor(t={}){super();ve(this,oa);ve(this,av);this.config=t,we(this,oa,new Map),we(this,av,Date.now())}build(t,n,s){const a=new pte({mutationCache:this,mutationId:++gy(this,av)._,options:t.defaultMutationOptions(n),state:s});return this.add(a),a}add(t){const n=Iy(t),s=L(this,oa).get(n)??[];s.push(t),L(this,oa).set(n,s),this.notify({type:"added",mutation:t})}remove(t){var s;const n=Iy(t);if(L(this,oa).has(n)){const a=(s=L(this,oa).get(n))==null?void 0:s.filter(i=>i!==t);a&&(a.length===0?L(this,oa).delete(n):L(this,oa).set(n,a))}this.notify({type:"removed",mutation:t})}canRun(t){var s;const n=(s=L(this,oa).get(Iy(t)))==null?void 0:s.find(a=>a.state.status==="pending");return!n||n===t}runNext(t){var s;const n=(s=L(this,oa).get(Iy(t)))==null?void 0:s.find(a=>a!==t&&a.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Sn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...L(this,oa).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(s=>jR(n,s))}findAll(t={}){return this.getAll().filter(n=>jR(t,n))}notify(t){Sn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Sn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Oa))))}},oa=new WeakMap,av=new WeakMap,YF);function Iy(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function kR(e){return{onFetch:(t,n)=>{var u,h,f,m,g;const s=t.options,a=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],l=((g=t.state.data)==null?void 0:g.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},j=M8(t.options,t.fetchOptions),y=async(b,p,N)=>{if(x)return Promise.reject();if(p==null&&b.pages.length)return Promise.resolve(b);const k={queryKey:t.queryKey,pageParam:p,direction:N?"backward":"forward",meta:t.options.meta};w(k);const S=await j(k),{maxPages:P}=t.options,_=N?lte:ite;return{pages:_(b.pages,S,P),pageParams:_(b.pageParams,p,P)}};if(a&&i.length){const b=a==="backward",p=b?gte:SR,N={pages:i,pageParams:l},k=p(s,N);o=await y(N,k,b)}else{const b=e??i.length;do{const p=c===0?l[0]??s.initialPageParam:SR(s,o);if(c>0&&p==null)break;o=await y(o,p),c++}while(c<b)}return o};t.options.persister?t.fetchFn=()=>{var x,w;return(w=(x=t.options).persister)==null?void 0:w.call(x,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function SR(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function gte(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var Qr,ic,lc,Jh,ef,oc,tf,rf,XF,z8=(XF=class{constructor(e={}){ve(this,Qr);ve(this,ic);ve(this,lc);ve(this,Jh);ve(this,ef);ve(this,oc);ve(this,tf);ve(this,rf);we(this,Qr,e.queryCache||new mte),we(this,ic,e.mutationCache||new xte),we(this,lc,e.defaultOptions||{}),we(this,Jh,new Map),we(this,ef,new Map),we(this,oc,0)}mount(){gy(this,oc)._++,L(this,oc)===1&&(we(this,tf,MA.subscribe(async e=>{e&&(await this.resumePausedMutations(),L(this,Qr).onFocus())})),we(this,rf,wb.subscribe(async e=>{e&&(await this.resumePausedMutations(),L(this,Qr).onOnline())})))}unmount(){var e,t;gy(this,oc)._--,L(this,oc)===0&&((e=L(this,tf))==null||e.call(this),we(this,tf,void 0),(t=L(this,rf))==null||t.call(this),we(this,rf,void 0))}isFetching(e){return L(this,Qr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return L(this,ic).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=L(this,Qr).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),s=L(this,Qr).build(this,n);return e.revalidateIfStale&&s.isStaleByTime(Dh(n.staleTime,s))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return L(this,Qr).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),a=L(this,Qr).get(s.queryHash),i=a==null?void 0:a.state.data,l=ste(t,i);if(l!==void 0)return L(this,Qr).build(this,s).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return Sn.batch(()=>L(this,Qr).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=L(this,Qr).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=L(this,Qr);Sn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=L(this,Qr),s={type:"active",...e};return Sn.batch(()=>(n.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},s=Sn.batch(()=>L(this,Qr).findAll(e).map(a=>a.cancel(n)));return Promise.all(s).then(Oa).catch(Oa)}invalidateQueries(e={},t={}){return Sn.batch(()=>{if(L(this,Qr).findAll(e).forEach(s=>{s.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},s=Sn.batch(()=>L(this,Qr).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(Oa)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Oa)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=L(this,Qr).build(this,t);return n.isStaleByTime(Dh(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Oa).catch(Oa)}fetchInfiniteQuery(e){return e.behavior=kR(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Oa).catch(Oa)}ensureInfiniteQueryData(e){return e.behavior=kR(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return wb.isOnline()?L(this,ic).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,Qr)}getMutationCache(){return L(this,ic)}getDefaultOptions(){return L(this,lc)}setDefaultOptions(e){we(this,lc,e)}setQueryDefaults(e,t){L(this,Jh).set(fu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...L(this,Jh).values()];let n={};return t.forEach(s=>{Hx(e,s.queryKey)&&(n={...n,...s.defaultOptions})}),n}setMutationDefaults(e,t){L(this,ef).set(fu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...L(this,ef).values()];let n={};return t.forEach(s=>{Hx(e,s.mutationKey)&&(n={...n,...s.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...L(this,lc).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=RA(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===DA&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...L(this,lc).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){L(this,Qr).clear(),L(this,ic).clear()}},Qr=new WeakMap,ic=new WeakMap,lc=new WeakMap,Jh=new WeakMap,ef=new WeakMap,oc=new WeakMap,tf=new WeakMap,rf=new WeakMap,XF),$s,nr,iv,vs,Fd,nf,cc,sl,lv,sf,af,Ld,Ud,dc,lf,jr,zp,_2,A2,T2,E2,O2,R2,D2,V8,ZF,vte=(ZF=class extends Tm{constructor(t,n){super();ve(this,jr);ve(this,$s);ve(this,nr);ve(this,iv);ve(this,vs);ve(this,Fd);ve(this,nf);ve(this,cc);ve(this,sl);ve(this,lv);ve(this,sf);ve(this,af);ve(this,Ld);ve(this,Ud);ve(this,dc);ve(this,lf,new Set);this.options=n,we(this,$s,t),we(this,sl,null),we(this,cc,P2()),this.options.experimental_prefetchInRender||L(this,cc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(L(this,nr).addObserver(this),CR(L(this,nr),this.options)?Pe(this,jr,zp).call(this):this.updateResult(),Pe(this,jr,E2).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return M2(L(this,nr),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return M2(L(this,nr),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Pe(this,jr,O2).call(this),Pe(this,jr,R2).call(this),L(this,nr).removeObserver(this)}setOptions(t,n){const s=this.options,a=L(this,nr);if(this.options=L(this,$s).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof vi(this.options.enabled,L(this,nr))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Pe(this,jr,D2).call(this),L(this,nr).setOptions(this.options),s._defaulted&&!jb(this.options,s)&&L(this,$s).getQueryCache().notify({type:"observerOptionsUpdated",query:L(this,nr),observer:this});const i=this.hasListeners();i&&PR(L(this,nr),a,this.options,s)&&Pe(this,jr,zp).call(this),this.updateResult(n),i&&(L(this,nr)!==a||vi(this.options.enabled,L(this,nr))!==vi(s.enabled,L(this,nr))||Dh(this.options.staleTime,L(this,nr))!==Dh(s.staleTime,L(this,nr)))&&Pe(this,jr,_2).call(this);const l=Pe(this,jr,A2).call(this);i&&(L(this,nr)!==a||vi(this.options.enabled,L(this,nr))!==vi(s.enabled,L(this,nr))||l!==L(this,dc))&&Pe(this,jr,T2).call(this,l)}getOptimisticResult(t){const n=L(this,$s).getQueryCache().build(L(this,$s),t),s=this.createResult(n,t);return bte(this,s)&&(we(this,vs,s),we(this,nf,this.options),we(this,Fd,L(this,nr).state)),s}getCurrentResult(){return L(this,vs)}trackResult(t,n){const s={};return Object.keys(t).forEach(a=>{Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),n==null||n(a),t[a])})}),s}trackProp(t){L(this,lf).add(t)}getCurrentQuery(){return L(this,nr)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=L(this,$s).defaultQueryOptions(t),s=L(this,$s).getQueryCache().build(L(this,$s),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return Pe(this,jr,zp).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),L(this,vs)))}createResult(t,n){var P;const s=L(this,nr),a=this.options,i=L(this,vs),l=L(this,Fd),o=L(this,nf),d=t!==s?t.state:L(this,iv),{state:u}=t;let h={...u},f=!1,m;if(n._optimisticResults){const _=this.hasListeners(),R=!_&&CR(t,n),O=_&&PR(t,s,n,a);(R||O)&&(h={...h,...U8(u.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:g,errorUpdatedAt:x,status:w}=h;if(n.select&&h.data!==void 0)if(i&&h.data===(l==null?void 0:l.data)&&n.select===L(this,lv))m=L(this,sf);else try{we(this,lv,n.select),m=n.select(h.data),m=C2(i==null?void 0:i.data,m,n),we(this,sf,m),we(this,sl,null)}catch(_){we(this,sl,_)}else m=h.data;if(n.placeholderData!==void 0&&m===void 0&&w==="pending"){let _;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData))_=i.data;else if(_=typeof n.placeholderData=="function"?n.placeholderData((P=L(this,af))==null?void 0:P.state.data,L(this,af)):n.placeholderData,n.select&&_!==void 0)try{_=n.select(_),we(this,sl,null)}catch(R){we(this,sl,R)}_!==void 0&&(w="success",m=C2(i==null?void 0:i.data,_,n),f=!0)}L(this,sl)&&(g=L(this,sl),m=L(this,sf),x=Date.now(),w="error");const j=h.fetchStatus==="fetching",y=w==="pending",b=w==="error",p=y&&j,N=m!==void 0,S={status:w,fetchStatus:h.fetchStatus,isPending:y,isSuccess:w==="success",isError:b,isInitialLoading:p,isLoading:p,data:m,dataUpdatedAt:h.dataUpdatedAt,error:g,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:j,isRefetching:j&&!y,isLoadingError:b&&!N,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:b&&N,isStale:$A(t,n),refetch:this.refetch,promise:L(this,cc)};if(this.options.experimental_prefetchInRender){const _=M=>{S.status==="error"?M.reject(S.error):S.data!==void 0&&M.resolve(S.data)},R=()=>{const M=we(this,cc,S.promise=P2());_(M)},O=L(this,cc);switch(O.status){case"pending":t.queryHash===s.queryHash&&_(O);break;case"fulfilled":(S.status==="error"||S.data!==O.value)&&R();break;case"rejected":(S.status!=="error"||S.error!==O.reason)&&R();break}}return S}updateResult(t){const n=L(this,vs),s=this.createResult(L(this,nr),this.options);if(we(this,Fd,L(this,nr).state),we(this,nf,this.options),L(this,Fd).data!==void 0&&we(this,af,L(this,nr)),jb(s,n))return;we(this,vs,s);const a={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:l}=this.options,o=typeof l=="function"?l():l;if(o==="all"||!o&&!L(this,lf).size)return!0;const c=new Set(o??L(this,lf));return this.options.throwOnError&&c.add("error"),Object.keys(L(this,vs)).some(d=>{const u=d;return L(this,vs)[u]!==n[u]&&c.has(u)})};(t==null?void 0:t.listeners)!==!1&&i()&&(a.listeners=!0),Pe(this,jr,V8).call(this,{...a,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Pe(this,jr,E2).call(this)}},$s=new WeakMap,nr=new WeakMap,iv=new WeakMap,vs=new WeakMap,Fd=new WeakMap,nf=new WeakMap,cc=new WeakMap,sl=new WeakMap,lv=new WeakMap,sf=new WeakMap,af=new WeakMap,Ld=new WeakMap,Ud=new WeakMap,dc=new WeakMap,lf=new WeakMap,jr=new WeakSet,zp=function(t){Pe(this,jr,D2).call(this);let n=L(this,nr).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Oa)),n},_2=function(){Pe(this,jr,O2).call(this);const t=Dh(this.options.staleTime,L(this,nr));if(hu||L(this,vs).isStale||!k2(t))return;const s=R8(L(this,vs).dataUpdatedAt,t)+1;we(this,Ld,setTimeout(()=>{L(this,vs).isStale||this.updateResult()},s))},A2=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(L(this,nr)):this.options.refetchInterval)??!1},T2=function(t){Pe(this,jr,R2).call(this),we(this,dc,t),!(hu||vi(this.options.enabled,L(this,nr))===!1||!k2(L(this,dc))||L(this,dc)===0)&&we(this,Ud,setInterval(()=>{(this.options.refetchIntervalInBackground||MA.isFocused())&&Pe(this,jr,zp).call(this)},L(this,dc)))},E2=function(){Pe(this,jr,_2).call(this),Pe(this,jr,T2).call(this,Pe(this,jr,A2).call(this))},O2=function(){L(this,Ld)&&(clearTimeout(L(this,Ld)),we(this,Ld,void 0))},R2=function(){L(this,Ud)&&(clearInterval(L(this,Ud)),we(this,Ud,void 0))},D2=function(){const t=L(this,$s).getQueryCache().build(L(this,$s),this.options);if(t===L(this,nr))return;const n=L(this,nr);we(this,nr,t),we(this,iv,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},V8=function(t){Sn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(L(this,vs))}),L(this,$s).getQueryCache().notify({query:L(this,nr),type:"observerResultsUpdated"})})},ZF);function yte(e,t){return vi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function CR(e,t){return yte(e,t)||e.state.data!==void 0&&M2(e,t,t.refetchOnMount)}function M2(e,t,n){if(vi(t.enabled,e)!==!1){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&$A(e,t)}return!1}function PR(e,t,n,s){return(e!==t||vi(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&$A(e,n)}function $A(e,t){return vi(t.enabled,e)!==!1&&e.isStaleByTime(Dh(t.staleTime,e))}function bte(e,t){return!jb(e.getCurrentResult(),t)}var uc,hc,Is,Yl,vo,O0,$2,QF,jte=(QF=class extends Tm{constructor(n,s){super();ve(this,vo);ve(this,uc);ve(this,hc);ve(this,Is);ve(this,Yl);we(this,uc,n),this.setOptions(s),this.bindMethods(),Pe(this,vo,O0).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const s=this.options;this.options=L(this,uc).defaultMutationOptions(n),jb(this.options,s)||L(this,uc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:L(this,Is),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&fu(s.mutationKey)!==fu(this.options.mutationKey)?this.reset():((a=L(this,Is))==null?void 0:a.state.status)==="pending"&&L(this,Is).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=L(this,Is))==null||n.removeObserver(this)}onMutationUpdate(n){Pe(this,vo,O0).call(this),Pe(this,vo,$2).call(this,n)}getCurrentResult(){return L(this,hc)}reset(){var n;(n=L(this,Is))==null||n.removeObserver(this),we(this,Is,void 0),Pe(this,vo,O0).call(this),Pe(this,vo,$2).call(this)}mutate(n,s){var a;return we(this,Yl,s),(a=L(this,Is))==null||a.removeObserver(this),we(this,Is,L(this,uc).getMutationCache().build(L(this,uc),this.options)),L(this,Is).addObserver(this),L(this,Is).execute(n)}},uc=new WeakMap,hc=new WeakMap,Is=new WeakMap,Yl=new WeakMap,vo=new WeakSet,O0=function(){var s;const n=((s=L(this,Is))==null?void 0:s.state)??B8();we(this,hc,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},$2=function(n){Sn.batch(()=>{var s,a,i,l,o,c,d,u;if(L(this,Yl)&&this.hasListeners()){const h=L(this,hc).variables,f=L(this,hc).context;(n==null?void 0:n.type)==="success"?((a=(s=L(this,Yl)).onSuccess)==null||a.call(s,n.data,h,f),(l=(i=L(this,Yl)).onSettled)==null||l.call(i,n.data,null,h,f)):(n==null?void 0:n.type)==="error"&&((c=(o=L(this,Yl)).onError)==null||c.call(o,n.error,h,f),(u=(d=L(this,Yl)).onSettled)==null||u.call(d,void 0,n.error,h,f))}this.listeners.forEach(h=>{h(L(this,hc))})})},QF),q8=v.createContext(void 0),Et=e=>{const t=v.useContext(q8);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},W8=({client:e,children:t})=>(v.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(q8.Provider,{value:e,children:t})),H8=v.createContext(!1),wte=()=>v.useContext(H8);H8.Provider;function Nte(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var kte=v.createContext(Nte()),Ste=()=>v.useContext(kte);function K8(e,t){return typeof e=="function"?e(...t):!!e}function I2(){}var Cte=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Pte=e=>{v.useEffect(()=>{e.clearReset()},[e])},_te=({result:e,errorResetBoundary:t,throwOnError:n,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&K8(n,[e.error,s]),Ate=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Tte=(e,t)=>e.isLoading&&e.isFetching&&!t,Ete=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,_R=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Ote(e,t,n){var u,h,f,m,g;const s=Et(),a=wte(),i=Ste(),l=s.defaultQueryOptions(e);(h=(u=s.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||h.call(u,l),l._optimisticResults=a?"isRestoring":"optimistic",Ate(l),Cte(l,i),Pte(i);const o=!s.getQueryCache().get(l.queryHash),[c]=v.useState(()=>new t(s,l)),d=c.getOptimisticResult(l);if(v.useSyncExternalStore(v.useCallback(x=>{const w=a?I2:c.subscribe(Sn.batchCalls(x));return c.updateResult(),w},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),v.useEffect(()=>{c.setOptions(l,{listeners:!1})},[l,c]),Ete(l,d))throw _R(l,c,i);if(_te({result:d,errorResetBoundary:i,throwOnError:l.throwOnError,query:s.getQueryCache().get(l.queryHash)}))throw d.error;if((m=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||m.call(f,l,d),l.experimental_prefetchInRender&&!hu&&Tte(d,a)){const x=o?_R(l,c,i):(g=s.getQueryCache().get(l.queryHash))==null?void 0:g.promise;x==null||x.catch(I2).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function Fe(e,t){return Ote(e,vte)}function Oe(e,t){const n=Et(),[s]=v.useState(()=>new jte(n,e));v.useEffect(()=>{s.setOptions(e)},[s,e]);const a=v.useSyncExternalStore(v.useCallback(l=>s.subscribe(Sn.batchCalls(l)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=v.useCallback((l,o)=>{s.mutate(l,o).catch(I2)},[s]);if(a.error&&K8(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}async function Rte(e){if(!e.ok){let t=`HTTP ${e.status}: ${e.statusText}`;try{const n=await e.json();n.error?t=n.error:n.message&&(t=n.message)}catch{}throw new Error(t)}}const Dte=()=>{if(typeof window<"u"){const t=window.location.hostname;if(t.includes("replit.app")||t.includes("replit.dev"))return`${window.location.protocol}//${t}`}return"https://adlinkpro.koyeb.app"},G8=e=>{const t=Dte();if(e.startsWith("http")||!t)return e;const n=t.endsWith("/")?t.slice(0,-1):t,s=e.startsWith("/")?e:`/${e}`;return`${n}${s}`};async function Re(e,t="GET",n,s){var u;const a=typeof t=="string"?t:"GET";if(typeof t!="string")throw new Error(`Invalid method in apiRequest: ${typeof t}. Expected string, got ${typeof t}`);const i=G8(e);let l=localStorage.getItem("auth_token")||localStorage.getItem("token");if(console.log("🔍 API Request Debug:",{url:e.substring(0,50),method:t,hasAuthToken:!!localStorage.getItem("auth_token"),hasToken:!!localStorage.getItem("token"),tokenLength:(l==null?void 0:l.length)||0,tokenStart:(l==null?void 0:l.substring(0,20))||"none"}),(l==="null"||l==="undefined"||!l||l.trim()===""||l==="null")&&(localStorage.removeItem("auth_token"),localStorage.removeItem("token"),l=null,console.log("❌ Invalid token detected and cleared"),e.includes("/api/")&&!e.includes("/api/auth/login")&&!e.includes("/api/health")&&!e.includes("/api/auth/register")))throw console.error("🚨 Production Auth Error:",{url:e,hostname:(u=window==null?void 0:window.location)==null?void 0:u.hostname,hasToken:!!l,environment:"production"}),new Error("Authentication required - please log in again");const o={"Content-Type":"application/json",...s};l&&(o.Authorization=`Bearer ${l}`);let c;try{c=await fetch(i,{method:a,headers:o,body:n?JSON.stringify(n):void 0,credentials:"include",mode:"cors"})}catch(h){if(h.name==="TypeError"&&h.message.includes("fetch"))try{c=await fetch(i,{method:a,headers:o,body:n?JSON.stringify(n):void 0,mode:"cors"})}catch{throw new Error(`Network error: ${h.message}`)}else throw h}if(console.log("📡 API Response:",{url:e.substring(0,50),method:t,status:c.status,statusText:c.statusText,ok:c.ok}),!c.ok){let h=`HTTP ${c.status}: ${c.statusText}`;try{const f=await c.json();f.error?h=f.error:f.message&&(h=f.message)}catch{}throw new Error(h)}const d=await c.text();return d?JSON.parse(d):null}const Mte=({on401:e})=>async({queryKey:t})=>{const n=G8(t[0]),s=localStorage.getItem("auth_token")||localStorage.getItem("token"),a={};s&&s!=="null"&&s!=="undefined"&&s.trim()!==""&&(a.Authorization=`Bearer ${s}`);const i=await fetch(n,{method:"GET",headers:a,credentials:"include"});return e==="returnNull"&&i.status===401?null:(await Rte(i),await i.json())},no=new z8({defaultOptions:{queries:{queryFn:Mte({on401:"returnNull"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:30*1e3,gcTime:5*60*1e3,retry:!1,retryDelay:e=>Math.min(1e3*2**e,3e4)},mutations:{retry:!1}}});window.queryClient=no;const $te=async e=>(await Re("/api/partner/transform-landing-url","POST",e)).transformedUrl;function Le(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function AR(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function No(...e){return t=>{let n=!1;const s=e.map(a=>{const i=AR(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():AR(e[a],null)}}}}function jt(...e){return v.useCallback(No(...e),e)}function Ite(e,t){const n=v.createContext(t),s=i=>{const{children:l,...o}=i,c=v.useMemo(()=>o,Object.values(o));return r.jsx(n.Provider,{value:c,children:l})};s.displayName=e+"Provider";function a(i){const l=v.useContext(n);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,a]}function zn(e,t=[]){let n=[];function s(i,l){const o=v.createContext(l),c=n.length;n=[...n,l];const d=h=>{var j;const{scope:f,children:m,...g}=h,x=((j=f==null?void 0:f[e])==null?void 0:j[c])||o,w=v.useMemo(()=>g,Object.values(g));return r.jsx(x.Provider,{value:w,children:m})};d.displayName=i+"Provider";function u(h,f){var x;const m=((x=f==null?void 0:f[e])==null?void 0:x[c])||o,g=v.useContext(m);if(g)return g;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=n.map(l=>v.createContext(l));return function(o){const c=(o==null?void 0:o[e])||i;return v.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return a.scopeName=e,[s,Fte(a,...t)]}function Fte(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=s.reduce((o,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...o,...h}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}function Ic(e){const t=Lte(e),n=v.forwardRef((s,a)=>{const{children:i,...l}=s,o=v.Children.toArray(i),c=o.find(Ute);if(c){const d=c.props.children,u=o.map(h=>h===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...l,ref:a,children:v.isValidElement(d)?v.cloneElement(d,void 0,u):null})}return r.jsx(t,{...l,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var Y8=Ic("Slot");function Lte(e){const t=v.forwardRef((n,s)=>{const{children:a,...i}=n;if(v.isValidElement(a)){const l=zte(a),o=Bte(i,a.props);return a.type!==v.Fragment&&(o.ref=s?No(s,l):l),v.cloneElement(a,o)}return v.Children.count(a)>1?v.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var X8=Symbol("radix.slottable");function Z8(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=X8,t}function Ute(e){return v.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===X8}function Bte(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...o)=>{i(...o),a(...o)}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function zte(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function $v(e){const t=e+"CollectionProvider",[n,s]=zn(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:w,children:j}=x,y=X.useRef(null),b=X.useRef(new Map).current;return r.jsx(a,{scope:w,itemMap:b,collectionRef:y,children:j})};l.displayName=t;const o=e+"CollectionSlot",c=Ic(o),d=X.forwardRef((x,w)=>{const{scope:j,children:y}=x,b=i(o,j),p=jt(w,b.collectionRef);return r.jsx(c,{ref:p,children:y})});d.displayName=o;const u=e+"CollectionItemSlot",h="data-radix-collection-item",f=Ic(u),m=X.forwardRef((x,w)=>{const{scope:j,children:y,...b}=x,p=X.useRef(null),N=jt(w,p),k=i(u,j);return X.useEffect(()=>(k.itemMap.set(p,{ref:p,...b}),()=>void k.itemMap.delete(p))),r.jsx(f,{[h]:"",ref:N,children:y})});m.displayName=u;function g(x){const w=i(e+"CollectionConsumer",x);return X.useCallback(()=>{const y=w.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((k,S)=>b.indexOf(k.ref.current)-b.indexOf(S.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:l,Slot:d,ItemSlot:m},g,s]}var Vte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Xe=Vte.reduce((e,t)=>{const n=Ic(`Primitive.${t}`),s=v.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...o,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function IA(e,t){e&&La.flushSync(()=>e.dispatchEvent(t))}function zr(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function qte(e,t=globalThis==null?void 0:globalThis.document){const n=zr(e);v.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var Wte="DismissableLayer",F2="dismissableLayer.update",Hte="dismissableLayer.pointerDownOutside",Kte="dismissableLayer.focusOutside",TR,Q8=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mu=v.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...c}=e,d=v.useContext(Q8),[u,h]=v.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=v.useState({}),g=jt(t,S=>h(S)),x=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),j=x.indexOf(w),y=u?x.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,p=y>=j,N=Yte(S=>{const P=S.target,_=[...d.branches].some(R=>R.contains(P));!p||_||(a==null||a(S),l==null||l(S),S.defaultPrevented||o==null||o())},f),k=Xte(S=>{const P=S.target;[...d.branches].some(R=>R.contains(P))||(i==null||i(S),l==null||l(S),S.defaultPrevented||o==null||o())},f);return qte(S=>{y===d.layers.size-1&&(s==null||s(S),!S.defaultPrevented&&o&&(S.preventDefault(),o()))},f),v.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(TR=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),ER(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=TR)}},[u,f,n,d]),v.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),ER())},[u,d]),v.useEffect(()=>{const S=()=>m({});return document.addEventListener(F2,S),()=>document.removeEventListener(F2,S)},[]),r.jsx(Xe.div,{...c,ref:g,style:{pointerEvents:b?p?"auto":"none":void 0,...e.style},onFocusCapture:Le(e.onFocusCapture,k.onFocusCapture),onBlurCapture:Le(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Le(e.onPointerDownCapture,N.onPointerDownCapture)})});Mu.displayName=Wte;var Gte="DismissableLayerBranch",J8=v.forwardRef((e,t)=>{const n=v.useContext(Q8),s=v.useRef(null),a=jt(t,s);return v.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),r.jsx(Xe.div,{...e,ref:a})});J8.displayName=Gte;function Yte(e,t=globalThis==null?void 0:globalThis.document){const n=zr(e),s=v.useRef(!1),a=v.useRef(()=>{});return v.useEffect(()=>{const i=o=>{if(o.target&&!s.current){let c=function(){eU(Hte,n,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function Xte(e,t=globalThis==null?void 0:globalThis.document){const n=zr(e),s=v.useRef(!1);return v.useEffect(()=>{const a=i=>{i.target&&!s.current&&eU(Kte,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function ER(){const e=new CustomEvent(F2);document.dispatchEvent(e)}function eU(e,t,n,{discrete:s}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?IA(a,i):a.dispatchEvent(i)}var Zte=Mu,Qte=J8,pn=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},Jte="Portal",Em=v.forwardRef((e,t)=>{var o;const{container:n,...s}=e,[a,i]=v.useState(!1);pn(()=>i(!0),[]);const l=n||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return l?UQ.createPortal(r.jsx(Xe.div,{...s,ref:t}),l):null});Em.displayName=Jte;function ere(e,t){return v.useReducer((n,s)=>t[n][s]??n,e)}var Vn=e=>{const{present:t,children:n}=e,s=tre(t),a=typeof n=="function"?n({present:s.isPresent}):v.Children.only(n),i=jt(s.ref,rre(a));return typeof n=="function"||s.isPresent?v.cloneElement(a,{ref:i}):null};Vn.displayName="Presence";function tre(e){const[t,n]=v.useState(),s=v.useRef({}),a=v.useRef(e),i=v.useRef("none"),l=e?"mounted":"unmounted",[o,c]=ere(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const d=Fy(s.current);i.current=o==="mounted"?d:"none"},[o]),pn(()=>{const d=s.current,u=a.current;if(u!==e){const f=i.current,m=Fy(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),pn(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=m=>{const x=Fy(s.current).includes(m.animationName);if(m.target===t&&x&&(c("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},f=m=>{m.target===t&&(i.current=Fy(s.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:v.useCallback(d=>{d&&(s.current=getComputedStyle(d)),n(d)},[])}}function Fy(e){return(e==null?void 0:e.animationName)||"none"}function rre(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Di({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,a]=nre({defaultProp:t,onChange:n}),i=e!==void 0,l=i?e:s,o=zr(n),c=v.useCallback(d=>{if(i){const h=typeof d=="function"?d(e):d;h!==e&&o(h)}else a(d)},[i,e,a,o]);return[l,c]}function nre({defaultProp:e,onChange:t}){const n=v.useState(e),[s]=n,a=v.useRef(s),i=zr(t);return v.useEffect(()=>{a.current!==s&&(i(s),a.current=s)},[s,a,i]),n}var sre="VisuallyHidden",Iv=v.forwardRef((e,t)=>r.jsx(Xe.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Iv.displayName=sre;var are=Iv,FA="ToastProvider",[LA,ire,lre]=$v("Toast"),[tU,Vqe]=zn("Toast",[lre]),[ore,zw]=tU(FA),rU=e=>{const{__scopeToast:t,label:n="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:l}=e,[o,c]=v.useState(null),[d,u]=v.useState(0),h=v.useRef(!1),f=v.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${FA}\`. Expected non-empty \`string\`.`),r.jsx(LA.Provider,{scope:t,children:r.jsx(ore,{scope:t,label:n,duration:s,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:v.useCallback(()=>u(m=>m+1),[]),onToastRemove:v.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:l})})};rU.displayName=FA;var nU="ToastViewport",cre=["F8"],L2="toast.viewportPause",U2="toast.viewportResume",sU=v.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=cre,label:a="Notifications ({hotkey})",...i}=e,l=zw(nU,n),o=ire(n),c=v.useRef(null),d=v.useRef(null),u=v.useRef(null),h=v.useRef(null),f=jt(t,h,l.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=l.toastCount>0;v.useEffect(()=>{const w=j=>{var b;s.length!==0&&s.every(p=>j[p]||j.code===p)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[s]),v.useEffect(()=>{const w=c.current,j=h.current;if(g&&w&&j){const y=()=>{if(!l.isClosePausedRef.current){const k=new CustomEvent(L2);j.dispatchEvent(k),l.isClosePausedRef.current=!0}},b=()=>{if(l.isClosePausedRef.current){const k=new CustomEvent(U2);j.dispatchEvent(k),l.isClosePausedRef.current=!1}},p=k=>{!w.contains(k.relatedTarget)&&b()},N=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",y),w.addEventListener("focusout",p),w.addEventListener("pointermove",y),w.addEventListener("pointerleave",N),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",y),w.removeEventListener("focusout",p),w.removeEventListener("pointermove",y),w.removeEventListener("pointerleave",N),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[g,l.isClosePausedRef]);const x=v.useCallback(({tabbingDirection:w})=>{const y=o().map(b=>{const p=b.ref.current,N=[p,...wre(p)];return w==="forwards"?N:N.reverse()});return(w==="forwards"?y.reverse():y).flat()},[o]);return v.useEffect(()=>{const w=h.current;if(w){const j=y=>{var N,k,S;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const P=document.activeElement,_=y.shiftKey;if(y.target===w&&_){(N=d.current)==null||N.focus();return}const M=x({tabbingDirection:_?"backwards":"forwards"}),A=M.findIndex(T=>T===P);ek(M.slice(A+1))?y.preventDefault():_?(k=d.current)==null||k.focus():(S=u.current)==null||S.focus()}};return w.addEventListener("keydown",j),()=>w.removeEventListener("keydown",j)}},[o,x]),r.jsxs(Qte,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&r.jsx(B2,{ref:d,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"forwards"});ek(w)}}),r.jsx(LA.Slot,{scope:n,children:r.jsx(Xe.ol,{tabIndex:-1,...i,ref:f})}),g&&r.jsx(B2,{ref:u,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"backwards"});ek(w)}})]})});sU.displayName=nU;var aU="ToastFocusProxy",B2=v.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...a}=e,i=zw(aU,n);return r.jsx(Iv,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:l=>{var d;const o=l.relatedTarget;!((d=i.viewport)!=null&&d.contains(o))&&s()}})});B2.displayName=aU;var Vw="Toast",dre="toast.swipeStart",ure="toast.swipeMove",hre="toast.swipeCancel",fre="toast.swipeEnd",iU=v.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:a,onOpenChange:i,...l}=e,[o=!0,c]=Di({prop:s,defaultProp:a,onChange:i});return r.jsx(Vn,{present:n||o,children:r.jsx(xre,{open:o,...l,ref:t,onClose:()=>c(!1),onPause:zr(e.onPause),onResume:zr(e.onResume),onSwipeStart:Le(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Le(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Le(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Le(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});iU.displayName=Vw;var[mre,pre]=tU(Vw,{onClose(){}}),xre=v.forwardRef((e,t)=>{const{__scopeToast:n,type:s="foreground",duration:a,open:i,onClose:l,onEscapeKeyDown:o,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...g}=e,x=zw(Vw,n),[w,j]=v.useState(null),y=jt(t,T=>j(T)),b=v.useRef(null),p=v.useRef(null),N=a||x.duration,k=v.useRef(0),S=v.useRef(N),P=v.useRef(0),{onToastAdd:_,onToastRemove:R}=x,O=zr(()=>{var B;(w==null?void 0:w.contains(document.activeElement))&&((B=x.viewport)==null||B.focus()),l()}),M=v.useCallback(T=>{!T||T===1/0||(window.clearTimeout(P.current),k.current=new Date().getTime(),P.current=window.setTimeout(O,T))},[O]);v.useEffect(()=>{const T=x.viewport;if(T){const B=()=>{M(S.current),d==null||d()},z=()=>{const U=new Date().getTime()-k.current;S.current=S.current-U,window.clearTimeout(P.current),c==null||c()};return T.addEventListener(L2,z),T.addEventListener(U2,B),()=>{T.removeEventListener(L2,z),T.removeEventListener(U2,B)}}},[x.viewport,N,c,d,M]),v.useEffect(()=>{i&&!x.isClosePausedRef.current&&M(N)},[i,N,x.isClosePausedRef,M]),v.useEffect(()=>(_(),()=>R()),[_,R]);const A=v.useMemo(()=>w?fU(w):null,[w]);return x.viewport?r.jsxs(r.Fragment,{children:[A&&r.jsx(gre,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:A}),r.jsx(mre,{scope:n,onClose:O,children:La.createPortal(r.jsx(LA.ItemSlot,{scope:n,children:r.jsx(Zte,{asChild:!0,onEscapeKeyDown:Le(o,()=>{x.isFocusedToastEscapeKeyDownRef.current||O(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...g,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Le(e.onKeyDown,T=>{T.key==="Escape"&&(o==null||o(T.nativeEvent),T.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Le(e.onPointerDown,T=>{T.button===0&&(b.current={x:T.clientX,y:T.clientY})}),onPointerMove:Le(e.onPointerMove,T=>{if(!b.current)return;const B=T.clientX-b.current.x,z=T.clientY-b.current.y,U=!!p.current,E=["left","right"].includes(x.swipeDirection),$=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,G=E?$(0,B):0,oe=E?0:$(0,z),ee=T.pointerType==="touch"?10:2,ce={x:G,y:oe},ye={originalEvent:T,delta:ce};U?(p.current=ce,Ly(ure,h,ye,{discrete:!1})):OR(ce,x.swipeDirection,ee)?(p.current=ce,Ly(dre,u,ye,{discrete:!1}),T.target.setPointerCapture(T.pointerId)):(Math.abs(B)>ee||Math.abs(z)>ee)&&(b.current=null)}),onPointerUp:Le(e.onPointerUp,T=>{const B=p.current,z=T.target;if(z.hasPointerCapture(T.pointerId)&&z.releasePointerCapture(T.pointerId),p.current=null,b.current=null,B){const U=T.currentTarget,E={originalEvent:T,delta:B};OR(B,x.swipeDirection,x.swipeThreshold)?Ly(fre,m,E,{discrete:!0}):Ly(hre,f,E,{discrete:!0}),U.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),gre=e=>{const{__scopeToast:t,children:n,...s}=e,a=zw(Vw,t),[i,l]=v.useState(!1),[o,c]=v.useState(!1);return bre(()=>l(!0)),v.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),o?null:r.jsx(Em,{asChild:!0,children:r.jsx(Iv,{...s,children:i&&r.jsxs(r.Fragment,{children:[a.label," ",n]})})})},vre="ToastTitle",lU=v.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(Xe.div,{...s,ref:t})});lU.displayName=vre;var yre="ToastDescription",oU=v.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(Xe.div,{...s,ref:t})});oU.displayName=yre;var cU="ToastAction",dU=v.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?r.jsx(hU,{altText:n,asChild:!0,children:r.jsx(UA,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${cU}\`. Expected non-empty \`string\`.`),null)});dU.displayName=cU;var uU="ToastClose",UA=v.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,a=pre(uU,n);return r.jsx(hU,{asChild:!0,children:r.jsx(Xe.button,{type:"button",...s,ref:t,onClick:Le(e.onClick,a.onClose)})})});UA.displayName=uU;var hU=v.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...a}=e;return r.jsx(Xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function fU(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),jre(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const l=s.dataset.radixToastAnnounceAlt;l&&t.push(l)}else t.push(...fU(s))}}),t}function Ly(e,t,n,{discrete:s}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?IA(a,i):a.dispatchEvent(i)}var OR=(e,t,n=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),i=s>a;return t==="left"||t==="right"?i&&s>n:!i&&a>n};function bre(e=()=>{}){const t=zr(e);pn(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[t])}function jre(e){return e.nodeType===e.ELEMENT_NODE}function wre(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ek(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Nre=rU,mU=sU,pU=iU,xU=lU,gU=oU,vU=dU,yU=UA;function bU(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=bU(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Ot(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=bU(e))&&(s&&(s+=" "),s+=t);return s}const RR=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,DR=Ot,Fv=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return DR(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,l=Object.keys(a).map(d=>{const u=n==null?void 0:n[d],h=i==null?void 0:i[d];if(u===null)return null;const f=RR(u)||RR(h);return a[d][f]}),o=n&&Object.entries(n).reduce((d,u)=>{let[h,f]=u;return f===void 0||(d[h]=f),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:h,className:f,...m}=u;return Object.entries(m).every(g=>{let[x,w]=g;return Array.isArray(w)?w.includes({...i,...o}[x]):{...i,...o}[x]===w})?[...d,h,f]:d},[]);return DR(e,l,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kre=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jU=(...e)=>e.filter((t,n,s)=>!!t&&s.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cre=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:l,...o},c)=>v.createElement("svg",{ref:c,...Sre,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:jU("lucide",a),...o},[...l.map(([d,u])=>v.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(e,t)=>{const n=v.forwardRef(({className:s,...a},i)=>v.createElement(Cre,{ref:i,iconNode:t,className:jU(`lucide-${kre(e)}`,s),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Ne("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=Ne("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pre=Ne("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=Ne("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=Ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _re=Ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Ne("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Are=Ne("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=Ne("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tre=Ne("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=Ne("Bitcoin",[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ere=Ne("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=Ne("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ore=Ne("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rre=Ne("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=Ne("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=Ne("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dre=Ne("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mre=Ne("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $re=Ne("ChartColumnBig",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"15",y:"5",width:"4",height:"12",rx:"1",key:"q8uenq"}],["rect",{x:"7",y:"8",width:"4",height:"9",rx:"1",key:"sr5ea"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Ne("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ire=Ne("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fre=Ne("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=Ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=Ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=Ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=Ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lre=Ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=Ne("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=Ne("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=Ne("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=Ne("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Ne("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=Ne("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=Ne("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ure=Ne("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bre=Ne("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=Ne("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Ne("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vre=Ne("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=Ne("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qre=Ne("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Ne("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=Ne("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wre=Ne("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=Ne("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=Ne("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=Ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=Ne("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=Ne("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=Ne("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Ne("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=Ne("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=Ne("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=Ne("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=Ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gre=Ne("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yre=Ne("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=Ne("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=Ne("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=Ne("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=Ne("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=Ne("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=Ne("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qre=Ne("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=Ne("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=Ne("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=Ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=Ne("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jre=Ne("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ene=Ne("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tne=Ne("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rne=Ne("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Ne("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=Ne("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=Ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=Ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=Ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=Ne("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=Ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=Ne("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=Ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Ne("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=Ne("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=Ne("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=Ne("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sne=Ne("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ane=Ne("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=Ne("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ine=Ne("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lne=Ne("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const one=Ne("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cne=Ne("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=Ne("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=Ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=Ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=Ne("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=Ne("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=Ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=Ne("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=Ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dne=Ne("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const une=Ne("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=Ne("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=Ne("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Ne("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Ne("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hne=Ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=Ne("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=Ne("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=Ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=Ne("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Ne("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=Ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Ne("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=Ne("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Ne("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=Ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fne=Ne("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=Ne("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=Ne("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mne=Ne("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pne=Ne("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=Ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=Ne("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),KA="-",xne=e=>{const t=vne(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:l=>{const o=l.split(KA);return o[0]===""&&o.length!==1&&o.shift(),SU(o,t)||gne(l)},getConflictingClassGroupIds:(l,o)=>{const c=n[l]||[];return o&&s[l]?[...c,...s[l]]:c}}},SU=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),a=s?SU(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(KA);return(l=t.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},HR=/^\[(.+)\]$/,gne=e=>{if(HR.test(e)){const t=HR.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},vne=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return bne(Object.entries(e.classGroups),n).forEach(([i,l])=>{q2(l,s,i,t)}),s},q2=(e,t,n,s)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:KR(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(yne(a)){q2(a(s),t,n,s);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,l])=>{q2(l,KR(t,i),n,s)})})},KR=(e,t)=>{let n=e;return t.split(KA).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},yne=e=>e.isThemeGetter,bne=(e,t)=>t?e.map(([n,s])=>{const a=s.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[t+l,o])):i);return[n,a]}):e,jne=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const a=(i,l)=>{n.set(i,l),t++,t>e&&(t=0,s=n,n=new Map)};return{get(i){let l=n.get(i);if(l!==void 0)return l;if((l=s.get(i))!==void 0)return a(i,l),l},set(i,l){n.has(i)?n.set(i,l):a(i,l)}}},CU="!",wne=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,a=t[0],i=t.length,l=o=>{const c=[];let d=0,u=0,h;for(let w=0;w<o.length;w++){let j=o[w];if(d===0){if(j===a&&(s||o.slice(w,w+i)===t)){c.push(o.slice(u,w)),u=w+i;continue}if(j==="/"){h=w;continue}}j==="["?d++:j==="]"&&d--}const f=c.length===0?o:o.substring(u),m=f.startsWith(CU),g=m?f.substring(1):f,x=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:x}};return n?o=>n({className:o,parseClassName:l}):l},Nne=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},kne=e=>({cache:jne(e.cacheSize),parseClassName:wne(e),...xne(e)}),Sne=/\s+/,Cne=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a}=t,i=[],l=e.trim().split(Sne);let o="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(d);let g=!!m,x=s(g?f.substring(0,m):f);if(!x){if(!g){o=d+(o.length>0?" "+o:o);continue}if(x=s(f),!x){o=d+(o.length>0?" "+o:o);continue}g=!1}const w=Nne(u).join(":"),j=h?w+CU:w,y=j+x;if(i.includes(y))continue;i.push(y);const b=a(x,g);for(let p=0;p<b.length;++p){const N=b[p];i.push(j+N)}o=d+(o.length>0?" "+o:o)}return o};function Pne(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=PU(t))&&(s&&(s+=" "),s+=n);return s}const PU=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=PU(e[s]))&&(n&&(n+=" "),n+=t);return n};function _ne(e,...t){let n,s,a,i=l;function l(c){const d=t.reduce((u,h)=>h(u),e());return n=kne(d),s=n.cache.get,a=n.cache.set,i=o,o(c)}function o(c){const d=s(c);if(d)return d;const u=Cne(c,n);return a(c,u),u}return function(){return i(Pne.apply(null,arguments))}}const Dr=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},_U=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ane=/^\d+\/\d+$/,Tne=new Set(["px","full","screen"]),Ene=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,One=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Rne=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Dne=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Mne=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ll=e=>Ih(e)||Tne.has(e)||Ane.test(e),zo=e=>Rm(e,"length",Vne),Ih=e=>!!e&&!Number.isNaN(Number(e)),rk=e=>Rm(e,"number",Ih),vp=e=>!!e&&Number.isInteger(Number(e)),$ne=e=>e.endsWith("%")&&Ih(e.slice(0,-1)),Bt=e=>_U.test(e),Vo=e=>Ene.test(e),Ine=new Set(["length","size","percentage"]),Fne=e=>Rm(e,Ine,AU),Lne=e=>Rm(e,"position",AU),Une=new Set(["image","url"]),Bne=e=>Rm(e,Une,Wne),zne=e=>Rm(e,"",qne),yp=()=>!0,Rm=(e,t,n)=>{const s=_U.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},Vne=e=>One.test(e)&&!Rne.test(e),AU=()=>!1,qne=e=>Dne.test(e),Wne=e=>Mne.test(e),Hne=()=>{const e=Dr("colors"),t=Dr("spacing"),n=Dr("blur"),s=Dr("brightness"),a=Dr("borderColor"),i=Dr("borderRadius"),l=Dr("borderSpacing"),o=Dr("borderWidth"),c=Dr("contrast"),d=Dr("grayscale"),u=Dr("hueRotate"),h=Dr("invert"),f=Dr("gap"),m=Dr("gradientColorStops"),g=Dr("gradientColorStopPositions"),x=Dr("inset"),w=Dr("margin"),j=Dr("opacity"),y=Dr("padding"),b=Dr("saturate"),p=Dr("scale"),N=Dr("sepia"),k=Dr("skew"),S=Dr("space"),P=Dr("translate"),_=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Bt,t],M=()=>[Bt,t],A=()=>["",Ll,zo],T=()=>["auto",Ih,Bt],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Bt],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],oe=()=>[Ih,Bt];return{cacheSize:500,separator:":",theme:{colors:[yp],spacing:[Ll,zo],blur:["none","",Vo,Bt],brightness:oe(),borderColor:[e],borderRadius:["none","","full",Vo,Bt],borderSpacing:M(),borderWidth:A(),contrast:oe(),grayscale:$(),hueRotate:oe(),invert:$(),gap:M(),gradientColorStops:[e],gradientColorStopPositions:[$ne,zo],inset:O(),margin:O(),opacity:oe(),padding:M(),saturate:oe(),scale:oe(),sepia:$(),skew:oe(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Bt]}],container:["container"],columns:[{columns:[Vo]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),Bt]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vp,Bt]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Bt]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",vp,Bt]}],"grid-cols":[{"grid-cols":[yp]}],"col-start-end":[{col:["auto",{span:["full",vp,Bt]},Bt]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[yp]}],"row-start-end":[{row:["auto",{span:[vp,Bt]},Bt]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Bt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Bt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...E()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...E(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...E(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Bt,t]}],"min-w":[{"min-w":[Bt,t,"min","max","fit"]}],"max-w":[{"max-w":[Bt,t,"none","full","min","max","fit","prose",{screen:[Vo]},Vo]}],h:[{h:[Bt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Bt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Bt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Bt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Vo,zo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rk]}],"font-family":[{font:[yp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Bt]}],"line-clamp":[{"line-clamp":["none",Ih,rk]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ll,Bt]}],"list-image":[{"list-image":["none",Bt]}],"list-style-type":[{list:["none","disc","decimal",Bt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ll,zo]}],"underline-offset":[{"underline-offset":["auto",Ll,Bt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Bt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Bt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),Lne]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Fne]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Bne]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:z()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[Ll,Bt]}],"outline-w":[{outline:[Ll,zo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[Ll,zo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Vo,zne]}],"shadow-color":[{shadow:[yp]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Vo,Bt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Bt]}],duration:[{duration:oe()}],ease:[{ease:["linear","in","out","in-out",Bt]}],delay:[{delay:oe()}],animate:[{animate:["none","spin","ping","pulse","bounce",Bt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[p]}],"scale-x":[{"scale-x":[p]}],"scale-y":[{"scale-y":[p]}],rotate:[{rotate:[vp,Bt]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Bt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Bt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Bt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ll,zo,rk]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Kne=_ne(Hne);function Ee(...e){return Kne(Ot(e))}const Gne=Nre,TU=v.forwardRef(({className:e,...t},n)=>r.jsx(mU,{ref:n,className:Ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));TU.displayName=mU.displayName;const Yne=Fv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),EU=v.forwardRef(({className:e,variant:t,...n},s)=>r.jsx(pU,{ref:s,className:Ee(Yne({variant:t}),e),...n}));EU.displayName=pU.displayName;const Xne=v.forwardRef(({className:e,...t},n)=>r.jsx(vU,{ref:n,className:Ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Xne.displayName=vU.displayName;const OU=v.forwardRef(({className:e,...t},n)=>r.jsx(yU,{ref:n,className:Ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(Fn,{className:"h-4 w-4"})}));OU.displayName=yU.displayName;const RU=v.forwardRef(({className:e,...t},n)=>r.jsx(xU,{ref:n,className:Ee("text-sm font-semibold",e),...t}));RU.displayName=xU.displayName;const DU=v.forwardRef(({className:e,...t},n)=>r.jsx(gU,{ref:n,className:Ee("text-sm opacity-90",e),...t}));DU.displayName=gU.displayName;const Zne=1,Qne=1e6;let nk=0;function Jne(){return nk=(nk+1)%Number.MAX_SAFE_INTEGER,nk.toString()}const sk=new Map,GR=e=>{if(sk.has(e))return;const t=setTimeout(()=>{sk.delete(e),dx({type:"REMOVE_TOAST",toastId:e})},Qne);sk.set(e,t)},ese=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Zne)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?GR(n):e.toasts.forEach(s=>{GR(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},R0=[];let D0={toasts:[]};function dx(e){D0=ese(D0,e),R0.forEach(t=>{t(D0)})}function tse({...e}){const t=Jne(),n=a=>dx({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>dx({type:"DISMISS_TOAST",toastId:t});return dx({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:n}}function at(){const[e,t]=v.useState(D0);return v.useEffect(()=>(R0.push(t),()=>{const n=R0.indexOf(t);n>-1&&R0.splice(n,1)}),[e]),{...e,toast:tse,dismiss:n=>dx({type:"DISMISS_TOAST",toastId:n})}}function rse(){const{toasts:e}=at();return r.jsxs(Gne,{children:[e.map(function({id:t,title:n,description:s,action:a,...i}){return r.jsxs(EU,{...i,children:[r.jsxs("div",{className:"grid gap-1",children:[n&&r.jsx(RU,{children:n}),s&&r.jsx(DU,{children:s})]}),a,r.jsx(OU,{})]},t)}),r.jsx(TU,{})]})}var nse=cL[" useId ".trim().toString()]||(()=>{}),sse=0;function Qn(e){const[t,n]=v.useState(nse());return pn(()=>{n(s=>s??String(sse++))},[e]),t?`radix-${t}`:""}const ase=["top","right","bottom","left"],Fc=Math.min,fa=Math.max,Sb=Math.round,Uy=Math.floor,wl=e=>({x:e,y:e}),ise={left:"right",right:"left",bottom:"top",top:"bottom"},lse={start:"end",end:"start"};function W2(e,t,n){return fa(e,Fc(t,n))}function ko(e,t){return typeof e=="function"?e(t):e}function So(e){return e.split("-")[0]}function Dm(e){return e.split("-")[1]}function GA(e){return e==="x"?"y":"x"}function YA(e){return e==="y"?"height":"width"}function Lc(e){return["top","bottom"].includes(So(e))?"y":"x"}function XA(e){return GA(Lc(e))}function ose(e,t,n){n===void 0&&(n=!1);const s=Dm(e),a=XA(e),i=YA(a);let l=a==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=Cb(l)),[l,Cb(l)]}function cse(e){const t=Cb(e);return[H2(e),t,H2(t)]}function H2(e){return e.replace(/start|end/g,t=>lse[t])}function dse(e,t,n){const s=["left","right"],a=["right","left"],i=["top","bottom"],l=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:s:t?s:a;case"left":case"right":return t?i:l;default:return[]}}function use(e,t,n,s){const a=Dm(e);let i=dse(So(e),n==="start",s);return a&&(i=i.map(l=>l+"-"+a),t&&(i=i.concat(i.map(H2)))),i}function Cb(e){return e.replace(/left|right|bottom|top/g,t=>ise[t])}function hse(e){return{top:0,right:0,bottom:0,left:0,...e}}function MU(e){return typeof e!="number"?hse(e):{top:e,right:e,bottom:e,left:e}}function Pb(e){const{x:t,y:n,width:s,height:a}=e;return{width:s,height:a,top:n,left:t,right:t+s,bottom:n+a,x:t,y:n}}function YR(e,t,n){let{reference:s,floating:a}=e;const i=Lc(t),l=XA(t),o=YA(l),c=So(t),d=i==="y",u=s.x+s.width/2-a.width/2,h=s.y+s.height/2-a.height/2,f=s[o]/2-a[o]/2;let m;switch(c){case"top":m={x:u,y:s.y-a.height};break;case"bottom":m={x:u,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:h};break;case"left":m={x:s.x-a.width,y:h};break;default:m={x:s.x,y:s.y}}switch(Dm(t)){case"start":m[l]-=f*(n&&d?-1:1);break;case"end":m[l]+=f*(n&&d?-1:1);break}return m}const fse=async(e,t,n)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:l}=n,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(t));let d=await l.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:h}=YR(d,s,c),f=s,m={},g=0;for(let x=0;x<o.length;x++){const{name:w,fn:j}=o[x],{x:y,y:b,data:p,reset:N}=await j({x:u,y:h,initialPlacement:s,placement:f,strategy:a,middlewareData:m,rects:d,platform:l,elements:{reference:e,floating:t}});u=y??u,h=b??h,m={...m,[w]:{...m[w],...p}},N&&g<=50&&(g++,typeof N=="object"&&(N.placement&&(f=N.placement),N.rects&&(d=N.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:a}):N.rects),{x:u,y:h}=YR(d,f,c)),x=-1)}return{x:u,y:h,placement:f,strategy:a,middlewareData:m}};async function Xx(e,t){var n;t===void 0&&(t={});const{x:s,y:a,platform:i,rects:l,elements:o,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=ko(t,e),g=MU(m),w=o[f?h==="floating"?"reference":"floating":h],j=Pb(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:d,rootBoundary:u,strategy:c})),y=h==="floating"?{x:s,y:a,width:l.floating.width,height:l.floating.height}:l.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),p=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},N=Pb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:y,offsetParent:b,strategy:c}):y);return{top:(j.top-N.top+g.top)/p.y,bottom:(N.bottom-j.bottom+g.bottom)/p.y,left:(j.left-N.left+g.left)/p.x,right:(N.right-j.right+g.right)/p.x}}const mse=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:a,rects:i,platform:l,elements:o,middlewareData:c}=t,{element:d,padding:u=0}=ko(e,t)||{};if(d==null)return{};const h=MU(u),f={x:n,y:s},m=XA(a),g=YA(m),x=await l.getDimensions(d),w=m==="y",j=w?"top":"left",y=w?"bottom":"right",b=w?"clientHeight":"clientWidth",p=i.reference[g]+i.reference[m]-f[m]-i.floating[g],N=f[m]-i.reference[m],k=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let S=k?k[b]:0;(!S||!await(l.isElement==null?void 0:l.isElement(k)))&&(S=o.floating[b]||i.floating[g]);const P=p/2-N/2,_=S/2-x[g]/2-1,R=Fc(h[j],_),O=Fc(h[y],_),M=R,A=S-x[g]-O,T=S/2-x[g]/2+P,B=W2(M,T,A),z=!c.arrow&&Dm(a)!=null&&T!==B&&i.reference[g]/2-(T<M?R:O)-x[g]/2<0,U=z?T<M?T-M:T-A:0;return{[m]:f[m]+U,data:{[m]:B,centerOffset:T-B-U,...z&&{alignmentOffset:U}},reset:z}}}),pse=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:a,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:x=!0,...w}=ko(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const j=So(a),y=Lc(o),b=So(o)===o,p=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=f||(b||!x?[Cb(o)]:cse(o)),k=g!=="none";!f&&k&&N.push(...use(o,x,g,p));const S=[o,...N],P=await Xx(t,w),_=[];let R=((s=i.flip)==null?void 0:s.overflows)||[];if(u&&_.push(P[j]),h){const T=ose(a,l,p);_.push(P[T[0]],P[T[1]])}if(R=[...R,{placement:a,overflows:_}],!_.every(T=>T<=0)){var O,M;const T=(((O=i.flip)==null?void 0:O.index)||0)+1,B=S[T];if(B)return{data:{index:T,overflows:R},reset:{placement:B}};let z=(M=R.filter(U=>U.overflows[0]<=0).sort((U,E)=>U.overflows[1]-E.overflows[1])[0])==null?void 0:M.placement;if(!z)switch(m){case"bestFit":{var A;const U=(A=R.filter(E=>{if(k){const $=Lc(E.placement);return $===y||$==="y"}return!0}).map(E=>[E.placement,E.overflows.filter($=>$>0).reduce(($,G)=>$+G,0)]).sort((E,$)=>E[1]-$[1])[0])==null?void 0:A[0];U&&(z=U);break}case"initialPlacement":z=o;break}if(a!==z)return{reset:{placement:z}}}return{}}}};function XR(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ZR(e){return ase.some(t=>e[t]>=0)}const xse=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...a}=ko(e,t);switch(s){case"referenceHidden":{const i=await Xx(t,{...a,elementContext:"reference"}),l=XR(i,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:ZR(l)}}}case"escaped":{const i=await Xx(t,{...a,altBoundary:!0}),l=XR(i,n.floating);return{data:{escapedOffsets:l,escaped:ZR(l)}}}default:return{}}}}};async function gse(e,t){const{placement:n,platform:s,elements:a}=e,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),l=So(n),o=Dm(n),c=Lc(n)==="y",d=["left","top"].includes(l)?-1:1,u=i&&c?-1:1,h=ko(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof g=="number"&&(m=o==="end"?g*-1:g),c?{x:m*u,y:f*d}:{x:f*d,y:m*u}}const vse=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:a,y:i,placement:l,middlewareData:o}=t,c=await gse(t,e);return l===((n=o.offset)==null?void 0:n.placement)&&(s=o.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:l}}}}},yse=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:a}=t,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:w=>{let{x:j,y}=w;return{x:j,y}}},...c}=ko(e,t),d={x:n,y:s},u=await Xx(t,c),h=Lc(So(a)),f=GA(h);let m=d[f],g=d[h];if(i){const w=f==="y"?"top":"left",j=f==="y"?"bottom":"right",y=m+u[w],b=m-u[j];m=W2(y,m,b)}if(l){const w=h==="y"?"top":"left",j=h==="y"?"bottom":"right",y=g+u[w],b=g-u[j];g=W2(y,g,b)}const x=o.fn({...t,[f]:m,[h]:g});return{...x,data:{x:x.x-n,y:x.y-s,enabled:{[f]:i,[h]:l}}}}}},bse=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:a,rects:i,middlewareData:l}=t,{offset:o=0,mainAxis:c=!0,crossAxis:d=!0}=ko(e,t),u={x:n,y:s},h=Lc(a),f=GA(h);let m=u[f],g=u[h];const x=ko(o,t),w=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const b=f==="y"?"height":"width",p=i.reference[f]-i.floating[b]+w.mainAxis,N=i.reference[f]+i.reference[b]-w.mainAxis;m<p?m=p:m>N&&(m=N)}if(d){var j,y;const b=f==="y"?"width":"height",p=["top","left"].includes(So(a)),N=i.reference[h]-i.floating[b]+(p&&((j=l.offset)==null?void 0:j[h])||0)+(p?0:w.crossAxis),k=i.reference[h]+i.reference[b]+(p?0:((y=l.offset)==null?void 0:y[h])||0)-(p?w.crossAxis:0);g<N?g=N:g>k&&(g=k)}return{[f]:m,[h]:g}}}},jse=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:a,rects:i,platform:l,elements:o}=t,{apply:c=()=>{},...d}=ko(e,t),u=await Xx(t,d),h=So(a),f=Dm(a),m=Lc(a)==="y",{width:g,height:x}=i.floating;let w,j;h==="top"||h==="bottom"?(w=h,j=f===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(j=h,w=f==="end"?"top":"bottom");const y=x-u.top-u.bottom,b=g-u.left-u.right,p=Fc(x-u[w],y),N=Fc(g-u[j],b),k=!t.middlewareData.shift;let S=p,P=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=b),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(S=y),k&&!f){const R=fa(u.left,0),O=fa(u.right,0),M=fa(u.top,0),A=fa(u.bottom,0);m?P=g-2*(R!==0||O!==0?R+O:fa(u.left,u.right)):S=x-2*(M!==0||A!==0?M+A:fa(u.top,u.bottom))}await c({...t,availableWidth:P,availableHeight:S});const _=await l.getDimensions(o.floating);return g!==_.width||x!==_.height?{reset:{rects:!0}}:{}}}};function Kw(){return typeof window<"u"}function Mm(e){return $U(e)?(e.nodeName||"").toLowerCase():"#document"}function va(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Dl(e){var t;return(t=($U(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function $U(e){return Kw()?e instanceof Node||e instanceof va(e).Node:!1}function Ii(e){return Kw()?e instanceof Element||e instanceof va(e).Element:!1}function Al(e){return Kw()?e instanceof HTMLElement||e instanceof va(e).HTMLElement:!1}function QR(e){return!Kw()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof va(e).ShadowRoot}function Bv(e){const{overflow:t,overflowX:n,overflowY:s,display:a}=Fi(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(a)}function wse(e){return["table","td","th"].includes(Mm(e))}function Gw(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function ZA(e){const t=QA(),n=Ii(e)?Fi(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function Nse(e){let t=Uc(e);for(;Al(t)&&!Lf(t);){if(ZA(t))return t;if(Gw(t))return null;t=Uc(t)}return null}function QA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Lf(e){return["html","body","#document"].includes(Mm(e))}function Fi(e){return va(e).getComputedStyle(e)}function Yw(e){return Ii(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Uc(e){if(Mm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||QR(e)&&e.host||Dl(e);return QR(t)?t.host:t}function IU(e){const t=Uc(e);return Lf(t)?e.ownerDocument?e.ownerDocument.body:e.body:Al(t)&&Bv(t)?t:IU(t)}function Zx(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=IU(e),i=a===((s=e.ownerDocument)==null?void 0:s.body),l=va(a);if(i){const o=K2(l);return t.concat(l,l.visualViewport||[],Bv(a)?a:[],o&&n?Zx(o):[])}return t.concat(a,Zx(a,[],n))}function K2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function FU(e){const t=Fi(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=Al(e),i=a?e.offsetWidth:n,l=a?e.offsetHeight:s,o=Sb(n)!==i||Sb(s)!==l;return o&&(n=i,s=l),{width:n,height:s,$:o}}function JA(e){return Ii(e)?e:e.contextElement}function Fh(e){const t=JA(e);if(!Al(t))return wl(1);const n=t.getBoundingClientRect(),{width:s,height:a,$:i}=FU(t);let l=(i?Sb(n.width):n.width)/s,o=(i?Sb(n.height):n.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const kse=wl(0);function LU(e){const t=va(e);return!QA()||!t.visualViewport?kse:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Sse(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==va(e)?!1:t}function xu(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=JA(e);let l=wl(1);t&&(s?Ii(s)&&(l=Fh(s)):l=Fh(e));const o=Sse(i,n,s)?LU(i):wl(0);let c=(a.left+o.x)/l.x,d=(a.top+o.y)/l.y,u=a.width/l.x,h=a.height/l.y;if(i){const f=va(i),m=s&&Ii(s)?va(s):s;let g=f,x=K2(g);for(;x&&s&&m!==g;){const w=Fh(x),j=x.getBoundingClientRect(),y=Fi(x),b=j.left+(x.clientLeft+parseFloat(y.paddingLeft))*w.x,p=j.top+(x.clientTop+parseFloat(y.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,h*=w.y,c+=b,d+=p,g=va(x),x=K2(g)}}return Pb({width:u,height:h,x:c,y:d})}function eT(e,t){const n=Yw(e).scrollLeft;return t?t.left+n:xu(Dl(e)).left+n}function UU(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(n?0:eT(e,s)),i=s.top+t.scrollTop;return{x:a,y:i}}function Cse(e){let{elements:t,rect:n,offsetParent:s,strategy:a}=e;const i=a==="fixed",l=Dl(s),o=t?Gw(t.floating):!1;if(s===l||o&&i)return n;let c={scrollLeft:0,scrollTop:0},d=wl(1);const u=wl(0),h=Al(s);if((h||!h&&!i)&&((Mm(s)!=="body"||Bv(l))&&(c=Yw(s)),Al(s))){const m=xu(s);d=Fh(s),u.x=m.x+s.clientLeft,u.y=m.y+s.clientTop}const f=l&&!h&&!i?UU(l,c,!0):wl(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x+f.x,y:n.y*d.y-c.scrollTop*d.y+u.y+f.y}}function Pse(e){return Array.from(e.getClientRects())}function _se(e){const t=Dl(e),n=Yw(e),s=e.ownerDocument.body,a=fa(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=fa(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let l=-n.scrollLeft+eT(e);const o=-n.scrollTop;return Fi(s).direction==="rtl"&&(l+=fa(t.clientWidth,s.clientWidth)-a),{width:a,height:i,x:l,y:o}}function Ase(e,t){const n=va(e),s=Dl(e),a=n.visualViewport;let i=s.clientWidth,l=s.clientHeight,o=0,c=0;if(a){i=a.width,l=a.height;const d=QA();(!d||d&&t==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:i,height:l,x:o,y:c}}function Tse(e,t){const n=xu(e,!0,t==="fixed"),s=n.top+e.clientTop,a=n.left+e.clientLeft,i=Al(e)?Fh(e):wl(1),l=e.clientWidth*i.x,o=e.clientHeight*i.y,c=a*i.x,d=s*i.y;return{width:l,height:o,x:c,y:d}}function JR(e,t,n){let s;if(t==="viewport")s=Ase(e,n);else if(t==="document")s=_se(Dl(e));else if(Ii(t))s=Tse(t,n);else{const a=LU(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Pb(s)}function BU(e,t){const n=Uc(e);return n===t||!Ii(n)||Lf(n)?!1:Fi(n).position==="fixed"||BU(n,t)}function Ese(e,t){const n=t.get(e);if(n)return n;let s=Zx(e,[],!1).filter(o=>Ii(o)&&Mm(o)!=="body"),a=null;const i=Fi(e).position==="fixed";let l=i?Uc(e):e;for(;Ii(l)&&!Lf(l);){const o=Fi(l),c=ZA(l);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Bv(l)&&!c&&BU(e,l))?s=s.filter(u=>u!==l):a=o,l=Uc(l)}return t.set(e,s),s}function Ose(e){let{element:t,boundary:n,rootBoundary:s,strategy:a}=e;const l=[...n==="clippingAncestors"?Gw(t)?[]:Ese(t,this._c):[].concat(n),s],o=l[0],c=l.reduce((d,u)=>{const h=JR(t,u,a);return d.top=fa(h.top,d.top),d.right=Fc(h.right,d.right),d.bottom=Fc(h.bottom,d.bottom),d.left=fa(h.left,d.left),d},JR(t,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Rse(e){const{width:t,height:n}=FU(e);return{width:t,height:n}}function Dse(e,t,n){const s=Al(t),a=Dl(t),i=n==="fixed",l=xu(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const c=wl(0);if(s||!s&&!i)if((Mm(t)!=="body"||Bv(a))&&(o=Yw(t)),s){const f=xu(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else a&&(c.x=eT(a));const d=a&&!s&&!i?UU(a,o):wl(0),u=l.left+o.scrollLeft-c.x-d.x,h=l.top+o.scrollTop-c.y-d.y;return{x:u,y:h,width:l.width,height:l.height}}function ak(e){return Fi(e).position==="static"}function eD(e,t){if(!Al(e)||Fi(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Dl(e)===n&&(n=n.ownerDocument.body),n}function zU(e,t){const n=va(e);if(Gw(e))return n;if(!Al(e)){let a=Uc(e);for(;a&&!Lf(a);){if(Ii(a)&&!ak(a))return a;a=Uc(a)}return n}let s=eD(e,t);for(;s&&wse(s)&&ak(s);)s=eD(s,t);return s&&Lf(s)&&ak(s)&&!ZA(s)?n:s||Nse(e)||n}const Mse=async function(e){const t=this.getOffsetParent||zU,n=this.getDimensions,s=await n(e.floating);return{reference:Dse(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function $se(e){return Fi(e).direction==="rtl"}const Ise={convertOffsetParentRelativeRectToViewportRelativeRect:Cse,getDocumentElement:Dl,getClippingRect:Ose,getOffsetParent:zU,getElementRects:Mse,getClientRects:Pse,getDimensions:Rse,getScale:Fh,isElement:Ii,isRTL:$se};function VU(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Fse(e,t){let n=null,s;const a=Dl(e);function i(){var o;clearTimeout(s),(o=n)==null||o.disconnect(),n=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:f,height:m}=d;if(o||t(),!f||!m)return;const g=Uy(h),x=Uy(a.clientWidth-(u+f)),w=Uy(a.clientHeight-(h+m)),j=Uy(u),b={rootMargin:-g+"px "+-x+"px "+-w+"px "+-j+"px",threshold:fa(0,Fc(1,c))||1};let p=!0;function N(k){const S=k[0].intersectionRatio;if(S!==c){if(!p)return l();S?l(!1,S):s=setTimeout(()=>{l(!1,1e-7)},1e3)}S===1&&!VU(d,e.getBoundingClientRect())&&l(),p=!1}try{n=new IntersectionObserver(N,{...b,root:a.ownerDocument})}catch{n=new IntersectionObserver(N,b)}n.observe(e)}return l(!0),i}function Lse(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=JA(e),u=a||i?[...d?Zx(d):[],...Zx(t)]:[];u.forEach(j=>{a&&j.addEventListener("scroll",n,{passive:!0}),i&&j.addEventListener("resize",n)});const h=d&&o?Fse(d,n):null;let f=-1,m=null;l&&(m=new ResizeObserver(j=>{let[y]=j;y&&y.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(t)})),n()}),d&&!c&&m.observe(d),m.observe(t));let g,x=c?xu(e):null;c&&w();function w(){const j=xu(e);x&&!VU(x,j)&&n(),x=j,g=requestAnimationFrame(w)}return n(),()=>{var j;u.forEach(y=>{a&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(j=m)==null||j.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const Use=vse,Bse=yse,zse=pse,Vse=jse,qse=xse,tD=mse,Wse=bse,Hse=(e,t,n)=>{const s=new Map,a={platform:Ise,...n},i={...a.platform,_c:s};return fse(e,t,{...a,platform:i})};var M0=typeof document<"u"?v.useLayoutEffect:v.useEffect;function _b(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!_b(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=n;s--!==0;){const i=a[s];if(!(i==="_owner"&&e.$$typeof)&&!_b(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function qU(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function rD(e,t){const n=qU(e);return Math.round(t*n)/n}function ik(e){const t=v.useRef(e);return M0(()=>{t.current=e}),t}function Kse(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:d}=e,[u,h]=v.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=v.useState(s);_b(f,s)||m(s);const[g,x]=v.useState(null),[w,j]=v.useState(null),y=v.useCallback(E=>{E!==k.current&&(k.current=E,x(E))},[]),b=v.useCallback(E=>{E!==S.current&&(S.current=E,j(E))},[]),p=i||g,N=l||w,k=v.useRef(null),S=v.useRef(null),P=v.useRef(u),_=c!=null,R=ik(c),O=ik(a),M=ik(d),A=v.useCallback(()=>{if(!k.current||!S.current)return;const E={placement:t,strategy:n,middleware:f};O.current&&(E.platform=O.current),Hse(k.current,S.current,E).then($=>{const G={...$,isPositioned:M.current!==!1};T.current&&!_b(P.current,G)&&(P.current=G,La.flushSync(()=>{h(G)}))})},[f,t,n,O,M]);M0(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(E=>({...E,isPositioned:!1})))},[d]);const T=v.useRef(!1);M0(()=>(T.current=!0,()=>{T.current=!1}),[]),M0(()=>{if(p&&(k.current=p),N&&(S.current=N),p&&N){if(R.current)return R.current(p,N,A);A()}},[p,N,A,R,_]);const B=v.useMemo(()=>({reference:k,floating:S,setReference:y,setFloating:b}),[y,b]),z=v.useMemo(()=>({reference:p,floating:N}),[p,N]),U=v.useMemo(()=>{const E={position:n,left:0,top:0};if(!z.floating)return E;const $=rD(z.floating,u.x),G=rD(z.floating,u.y);return o?{...E,transform:"translate("+$+"px, "+G+"px)",...qU(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:G}},[n,o,z.floating,u.x,u.y]);return v.useMemo(()=>({...u,update:A,refs:B,elements:z,floatingStyles:U}),[u,A,B,z,U])}const Gse=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:a}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?tD({element:s.current,padding:a}).fn(n):{}:s?tD({element:s,padding:a}).fn(n):{}}}},Yse=(e,t)=>({...Use(e),options:[e,t]}),Xse=(e,t)=>({...Bse(e),options:[e,t]}),Zse=(e,t)=>({...Wse(e),options:[e,t]}),Qse=(e,t)=>({...zse(e),options:[e,t]}),Jse=(e,t)=>({...Vse(e),options:[e,t]}),eae=(e,t)=>({...qse(e),options:[e,t]}),tae=(e,t)=>({...Gse(e),options:[e,t]});var rae="Arrow",WU=v.forwardRef((e,t)=>{const{children:n,width:s=10,height:a=5,...i}=e;return r.jsx(Xe.svg,{...i,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});WU.displayName=rae;var nae=WU;function Xw(e){const[t,n]=v.useState(void 0);return pn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,o=d.blockSize}else l=e.offsetWidth,o=e.offsetHeight;n({width:l,height:o})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var tT="Popper",[HU,Jc]=zn(tT),[sae,KU]=HU(tT),GU=e=>{const{__scopePopper:t,children:n}=e,[s,a]=v.useState(null);return r.jsx(sae,{scope:t,anchor:s,onAnchorChange:a,children:n})};GU.displayName=tT;var YU="PopperAnchor",XU=v.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...a}=e,i=KU(YU,n),l=v.useRef(null),o=jt(t,l);return v.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||l.current)}),s?null:r.jsx(Xe.div,{...a,ref:o})});XU.displayName=YU;var rT="PopperContent",[aae,iae]=HU(rT),ZU=v.forwardRef((e,t)=>{var ke,be,pe,le,Ie,ae;const{__scopePopper:n,side:s="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:g,...x}=e,w=KU(rT,n),[j,y]=v.useState(null),b=jt(t,st=>y(st)),[p,N]=v.useState(null),k=Xw(p),S=(k==null?void 0:k.width)??0,P=(k==null?void 0:k.height)??0,_=s+(i!=="center"?"-"+i:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(d)?d:[d],M=O.length>0,A={padding:R,boundary:O.filter(oae),altBoundary:M},{refs:T,floatingStyles:B,placement:z,isPositioned:U,middlewareData:E}=Kse({strategy:"fixed",placement:_,whileElementsMounted:(...st)=>Lse(...st,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[Yse({mainAxis:a+P,alignmentAxis:l}),c&&Xse({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Zse():void 0,...A}),c&&Qse({...A}),Jse({...A,apply:({elements:st,rects:K,availableWidth:Me,availableHeight:de})=>{const{width:Be,height:qe}=K.reference,Qe=st.floating.style;Qe.setProperty("--radix-popper-available-width",`${Me}px`),Qe.setProperty("--radix-popper-available-height",`${de}px`),Qe.setProperty("--radix-popper-anchor-width",`${Be}px`),Qe.setProperty("--radix-popper-anchor-height",`${qe}px`)}}),p&&tae({element:p,padding:o}),cae({arrowWidth:S,arrowHeight:P}),f&&eae({strategy:"referenceHidden",...A})]}),[$,G]=e9(z),oe=zr(g);pn(()=>{U&&(oe==null||oe())},[U,oe]);const ee=(ke=E.arrow)==null?void 0:ke.x,ce=(be=E.arrow)==null?void 0:be.y,ye=((pe=E.arrow)==null?void 0:pe.centerOffset)!==0,[je,$e]=v.useState();return pn(()=>{j&&$e(window.getComputedStyle(j).zIndex)},[j]),r.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:U?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[(le=E.transformOrigin)==null?void 0:le.x,(Ie=E.transformOrigin)==null?void 0:Ie.y].join(" "),...((ae=E.hide)==null?void 0:ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(aae,{scope:n,placedSide:$,onArrowChange:N,arrowX:ee,arrowY:ce,shouldHideArrow:ye,children:r.jsx(Xe.div,{"data-side":$,"data-align":G,...x,ref:b,style:{...x.style,animation:U?void 0:"none"}})})})});ZU.displayName=rT;var QU="PopperArrow",lae={top:"bottom",right:"left",bottom:"top",left:"right"},JU=v.forwardRef(function(t,n){const{__scopePopper:s,...a}=t,i=iae(QU,s),l=lae[i.placedSide];return r.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:r.jsx(nae,{...a,ref:n,style:{...a.style,display:"block"}})})});JU.displayName=QU;function oae(e){return e!==null}var cae=e=>({name:"transformOrigin",options:e,fn(t){var w,j,y;const{placement:n,rects:s,middlewareData:a}=t,l=((w=a.arrow)==null?void 0:w.centerOffset)!==0,o=l?0:e.arrowWidth,c=l?0:e.arrowHeight,[d,u]=e9(n),h={start:"0%",center:"50%",end:"100%"}[u],f=(((j=a.arrow)==null?void 0:j.x)??0)+o/2,m=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let g="",x="";return d==="bottom"?(g=l?h:`${f}px`,x=`${-c}px`):d==="top"?(g=l?h:`${f}px`,x=`${s.floating.height+c}px`):d==="right"?(g=`${-c}px`,x=l?h:`${m}px`):d==="left"&&(g=`${s.floating.width+c}px`,x=l?h:`${m}px`),{data:{x:g,y:x}}}});function e9(e){const[t,n="center"]=e.split("-");return[t,n]}var nT=GU,zv=XU,Zw=ZU,Qw=JU,[Jw,qqe]=zn("Tooltip",[Jc]),sT=Jc(),t9="TooltipProvider",dae=700,nD="tooltip.open",[uae,r9]=Jw(t9),n9=e=>{const{__scopeTooltip:t,delayDuration:n=dae,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:i}=e,l=v.useRef(!0),o=v.useRef(!1),c=v.useRef(0);return v.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(uae,{scope:t,isOpenDelayedRef:l,delayDuration:n,onOpen:v.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,s)},[s]),isPointerInTransitRef:o,onPointerInTransitChange:v.useCallback(d=>{o.current=d},[]),disableHoverableContent:a,children:i})};n9.displayName=t9;var s9="Tooltip",[Wqe,e1]=Jw(s9),G2="TooltipTrigger",hae=v.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=e1(G2,n),i=r9(G2,n),l=sT(n),o=v.useRef(null),c=jt(t,o,a.onTriggerChange),d=v.useRef(!1),u=v.useRef(!1),h=v.useCallback(()=>d.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(zv,{asChild:!0,...l,children:r.jsx(Xe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:Le(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:Le(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:Le(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Le(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:Le(e.onBlur,a.onClose),onClick:Le(e.onClick,a.onClose)})})});hae.displayName=G2;var fae="TooltipPortal",[Hqe,mae]=Jw(fae,{forceMount:void 0}),Uf="TooltipContent",a9=v.forwardRef((e,t)=>{const n=mae(Uf,e.__scopeTooltip),{forceMount:s=n.forceMount,side:a="top",...i}=e,l=e1(Uf,e.__scopeTooltip);return r.jsx(Vn,{present:s||l.open,children:l.disableHoverableContent?r.jsx(i9,{side:a,...i,ref:t}):r.jsx(pae,{side:a,...i,ref:t})})}),pae=v.forwardRef((e,t)=>{const n=e1(Uf,e.__scopeTooltip),s=r9(Uf,e.__scopeTooltip),a=v.useRef(null),i=jt(t,a),[l,o]=v.useState(null),{trigger:c,onClose:d}=n,u=a.current,{onPointerInTransitChange:h}=s,f=v.useCallback(()=>{o(null),h(!1)},[h]),m=v.useCallback((g,x)=>{const w=g.currentTarget,j={x:g.clientX,y:g.clientY},y=bae(j,w.getBoundingClientRect()),b=jae(j,y),p=wae(x.getBoundingClientRect()),N=kae([...b,...p]);o(N),h(!0)},[h]);return v.useEffect(()=>()=>f(),[f]),v.useEffect(()=>{if(c&&u){const g=w=>m(w,u),x=w=>m(w,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",x)}}},[c,u,m,f]),v.useEffect(()=>{if(l){const g=x=>{const w=x.target,j={x:x.clientX,y:x.clientY},y=(c==null?void 0:c.contains(w))||(u==null?void 0:u.contains(w)),b=!Nae(j,l);y?f():b&&(f(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,l,d,f]),r.jsx(i9,{...e,ref:i})}),[xae,gae]=Jw(s9,{isInside:!1}),vae=Z8("TooltipContent"),i9=v.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=e,c=e1(Uf,n),d=sT(n),{onClose:u}=c;return v.useEffect(()=>(document.addEventListener(nD,u),()=>document.removeEventListener(nD,u)),[u]),v.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),r.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:r.jsxs(Zw,{"data-state":c.stateAttribute,...d,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(vae,{children:s}),r.jsx(xae,{scope:n,isInside:!0,children:r.jsx(are,{id:c.contentId,role:"tooltip",children:a||s})})]})})});a9.displayName=Uf;var l9="TooltipArrow",yae=v.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=sT(n);return gae(l9,n).isInside?null:r.jsx(Qw,{...a,...s,ref:t})});yae.displayName=l9;function bae(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,s,a,i)){case i:return"left";case a:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function jae(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function wae(e){const{top:t,right:n,bottom:s,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:s},{x:a,y:s}]}function Nae(e,t){const{x:n,y:s}=e;let a=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const o=t[i].x,c=t[i].y,d=t[l].x,u=t[l].y;c>s!=u>s&&n<(d-o)*(s-c)/(u-c)+o&&(a=!a)}return a}function kae(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),Sae(t)}function Sae(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const i=t[t.length-1],l=t[t.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;n.length>=2;){const i=n[n.length-1],l=n[n.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Cae=n9,o9=a9;const Pae=Cae,_ae=v.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(o9,{ref:s,sideOffset:t,className:Ee("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));_ae.displayName=o9.displayName;const c9=v.createContext(void 0);function Aae({children:e}){const[t,n]=v.useState(null),[s,a]=v.useState(null),[i,l]=v.useState(!0);v.useEffect(()=>{const h=localStorage.getItem("auth_token");h&&h!=="null"&&h!=="undefined"&&h.trim()!==""?(a(h),o(h)):(h&&localStorage.removeItem("auth_token"),l(!1))},[]);const o=async h=>{try{const f=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${h}`}});if(f.ok){const m=await f.json();n(m)}else localStorage.removeItem("auth_token"),a(null),n(null)}catch{localStorage.removeItem("auth_token"),a(null),n(null)}finally{l(!1)}},c=async(h,f)=>{try{const m=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:h,password:f})});if(!m.ok){const x=await m.json().catch(()=>({error:"Login failed"}));throw new Error(x.error||"Login failed")}const g=await m.json();if(g.token&&g.token!=="null"&&g.token!==null)a(g.token),localStorage.setItem("auth_token",g.token),window.queryClient&&window.queryClient.clear();else throw new Error("Invalid token received from server");n(g.user)}catch(m){throw m}},d=async h=>{try{const f=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!f.ok){const g=await f.json().catch(()=>({error:"Registration failed"}));throw new Error(g.error||"Registration failed")}const m=await f.json();if(m.token&&m.token!=="null"&&m.token!==null)a(m.token),localStorage.setItem("auth_token",m.token),window.queryClient&&window.queryClient.clear();else throw new Error("Invalid token received from server");n(m.user)}catch(f){throw f}},u=()=>{n(null),a(null),localStorage.removeItem("auth_token"),localStorage.removeItem("token")};return r.jsx(c9.Provider,{value:{user:t,token:s,login:c,register:d,logout:u,loading:i},children:e})}function tr(){const e=v.useContext(c9);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const d9=v.createContext(void 0);function Tae({children:e}){const[t,n]=v.useState(!1);v.useEffect(()=>{if(typeof window<"u"){const i=localStorage.getItem("sidebar-collapsed");i&&n(JSON.parse(i))}},[]),v.useEffect(()=>{typeof window<"u"&&localStorage.setItem("sidebar-collapsed",JSON.stringify(t))},[t]);const s=()=>n(!t),a=t?64:256;return r.jsx(d9.Provider,{value:{collapsed:t,toggleCollapsed:s,setCollapsed:n,sidebarWidth:a},children:e})}function Qs(){const e=v.useContext(d9);if(e===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return e}const Eae={theme:"light",setTheme:()=>null},u9=v.createContext(Eae);function h9({children:e,defaultTheme:t="light",storageKey:n="vite-ui-theme",...s}){const[a,i]=v.useState(()=>(localStorage.removeItem(n),localStorage.setItem(n,"light"),"light"));v.useEffect(()=>{const o=window.document.documentElement;if(o.classList.remove("light","dark"),a==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";o.classList.add(c);return}o.classList.add(a)},[a]);const l={theme:a,setTheme:o=>{localStorage.setItem(n,o),i(o)}};return r.jsx(u9.Provider,{...s,value:l,children:e})}const f9=()=>{const e=v.useContext(u9);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},Qx=Fv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),D=v.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...a},i)=>{const l=s?Y8:"button";return r.jsx(l,{className:Ee(Qx({variant:t,size:n,className:e})),ref:i,...a})});D.displayName="Button";const q=v.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ee("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));q.displayName="Card";const re=v.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ee("flex flex-col space-y-1.5 p-6",e),...t}));re.displayName="CardHeader";const se=v.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ee("text-2xl font-semibold leading-none tracking-tight",e),...t}));se.displayName="CardTitle";const Ze=v.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ee("text-sm text-muted-foreground",e),...t}));Ze.displayName="CardDescription";const W=v.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ee("p-6 pt-0",e),...t}));W.displayName="CardContent";const Oae=v.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ee("flex items-center p-6 pt-0",e),...t}));Oae.displayName="CardFooter";const Rae=Fv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ie({className:e,variant:t,...n}){return r.jsx("div",{className:Ee(Rae({variant:t}),e),...n})}function At(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ys(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Yn(e,t){const n=At(e);return isNaN(t)?Ys(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Li(e,t){const n=At(e);if(isNaN(t))return Ys(e,NaN);if(!t)return n;const s=n.getDate(),a=Ys(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const i=a.getDate();return s>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}const aT=6048e5,Dae=864e5,By=43200,sD=1440;let Mae={};function $m(){return Mae}function Ga(e,t){var o,c,d,u;const n=$m(),s=(t==null?void 0:t.weekStartsOn)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=At(e),i=a.getDay(),l=(i<s?7:0)+i-s;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function gu(e){return Ga(e,{weekStartsOn:1})}function m9(e){const t=At(e),n=t.getFullYear(),s=Ys(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=gu(s),i=Ys(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=gu(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}function Bf(e){const t=At(e);return t.setHours(0,0,0,0),t}function zf(e){const t=At(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function pl(e,t){const n=Bf(e),s=Bf(t),a=+n-zf(n),i=+s-zf(s);return Math.round((a-i)/Dae)}function $ae(e){const t=m9(e),n=Ys(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),gu(n)}function Y2(e,t){const n=t*7;return Yn(e,n)}function Iae(e,t){return Li(e,t*12)}function Fae(e){let t;return e.forEach(function(n){const s=At(n);(t===void 0||t<s||isNaN(Number(s)))&&(t=s)}),t||new Date(NaN)}function Lae(e){let t;return e.forEach(n=>{const s=At(n);(!t||t>s||isNaN(+s))&&(t=s)}),t||new Date(NaN)}function $0(e,t){const n=At(e),s=At(t),a=n.getTime()-s.getTime();return a<0?-1:a>0?1:a}function Uae(e){return Ys(e,Date.now())}function zs(e,t){const n=Bf(e),s=Bf(t);return+n==+s}function iT(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Bae(e){if(!iT(e)&&typeof e!="number")return!1;const t=At(e);return!isNaN(Number(t))}function Vf(e,t){const n=At(e),s=At(t),a=n.getFullYear()-s.getFullYear(),i=n.getMonth()-s.getMonth();return a*12+i}function zae(e,t,n){const s=Ga(e,n),a=Ga(t,n),i=+s-zf(s),l=+a-zf(a);return Math.round((i-l)/aT)}function Vae(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function qae(e,t){return+At(e)-+At(t)}function Wae(e){const t=At(e);return t.setHours(23,59,59,999),t}function t1(e){const t=At(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Hae(e){const t=At(e);return+Wae(t)==+t1(t)}function Kae(e,t){const n=At(e),s=At(t),a=$0(n,s),i=Math.abs(Vf(n,s));let l;if(i<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*i);let o=$0(n,s)===-a;Hae(At(e))&&i===1&&$0(e,s)===1&&(o=!1),l=a*(i-Number(o))}return l===0?0:l}function Gae(e,t,n){const s=qae(e,t)/1e3;return Vae(n==null?void 0:n.roundingMethod)(s)}function Ks(e){const t=At(e);return t.setDate(1),t.setHours(0,0,0,0),t}function p9(e){const t=At(e),n=Ys(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function lT(e,t){var o,c,d,u;const n=$m(),s=(t==null?void 0:t.weekStartsOn)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=At(e),i=a.getDay(),l=(i<s?-7:0)+6-(i-s);return a.setDate(a.getDate()+l),a.setHours(23,59,59,999),a}function x9(e){return lT(e,{weekStartsOn:1})}const Yae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xae=(e,t,n)=>{let s;const a=Yae[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Lh(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Zae={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Qae={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Jae={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},eie={date:Lh({formats:Zae,defaultWidth:"full"}),time:Lh({formats:Qae,defaultWidth:"full"}),dateTime:Lh({formats:Jae,defaultWidth:"full"})},tie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rie=(e,t,n,s)=>tie[e];function dl(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):l;a=e.formattingValues[o]||e.formattingValues[l]}else{const l=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[o]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const nie={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sie={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},iie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},oie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cie=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},die={ordinalNumber:cie,era:dl({values:nie,defaultWidth:"wide"}),quarter:dl({values:sie,defaultWidth:"wide",argumentCallback:e=>e-1}),month:dl({values:aie,defaultWidth:"wide"}),day:dl({values:iie,defaultWidth:"wide"}),dayPeriod:dl({values:lie,defaultWidth:"wide",formattingValues:oie,defaultFormattingWidth:"wide"})};function ul(e){return(t,n={})=>{const s=n.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const l=i[0],o=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?hie(o,h=>h.test(l)):uie(o,h=>h.test(l));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(l.length);return{value:d,rest:u}}}function uie(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function hie(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function g9(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=n.valueCallback?n.valueCallback(l):l;const o=t.slice(a.length);return{value:l,rest:o}}}const fie=/^(\d+)(th|st|nd|rd)?/i,mie=/\d+/i,pie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xie={any:[/^b/i,/^(a|c)/i]},gie={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vie={any:[/1/i,/2/i,/3/i,/4/i]},yie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Nie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Sie={ordinalNumber:g9({matchPattern:fie,parsePattern:mie,valueCallback:e=>parseInt(e,10)}),era:ul({matchPatterns:pie,defaultMatchWidth:"wide",parsePatterns:xie,defaultParseWidth:"any"}),quarter:ul({matchPatterns:gie,defaultMatchWidth:"wide",parsePatterns:vie,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ul({matchPatterns:yie,defaultMatchWidth:"wide",parsePatterns:bie,defaultParseWidth:"any"}),day:ul({matchPatterns:jie,defaultMatchWidth:"wide",parsePatterns:wie,defaultParseWidth:"any"}),dayPeriod:ul({matchPatterns:Nie,defaultMatchWidth:"any",parsePatterns:kie,defaultParseWidth:"any"})},r1={code:"en-US",formatDistance:Xae,formatLong:eie,formatRelative:rie,localize:die,match:Sie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Cie(e){const t=At(e);return pl(t,p9(t))+1}function v9(e){const t=At(e),n=+gu(t)-+$ae(t);return Math.round(n/aT)+1}function y9(e,t){var u,h,f,m;const n=At(e),s=n.getFullYear(),a=$m(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(f=a.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,l=Ys(e,0);l.setFullYear(s+1,0,i),l.setHours(0,0,0,0);const o=Ga(l,t),c=Ys(e,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const d=Ga(c,t);return n.getTime()>=o.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function Pie(e,t){var o,c,d,u;const n=$m(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=y9(e,t),i=Ys(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),Ga(i,t)}function b9(e,t){const n=At(e),s=+Ga(n,t)-+Pie(n,t);return Math.round(s/aT)+1}function kr(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const qo={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return kr(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):kr(n+1,2)},d(e,t){return kr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return kr(e.getHours()%12||12,t.length)},H(e,t){return kr(e.getHours(),t.length)},m(e,t){return kr(e.getMinutes(),t.length)},s(e,t){return kr(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,n-3));return kr(a,t.length)}},Yu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},aD={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return n.ordinalNumber(a,{unit:"year"})}return qo.y(e,t)},Y:function(e,t,n,s){const a=y9(e,s),i=a>0?a:1-a;if(t==="YY"){const l=i%100;return kr(l,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):kr(i,t.length)},R:function(e,t){const n=m9(e);return kr(n,t.length)},u:function(e,t){const n=e.getFullYear();return kr(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return kr(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return kr(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return qo.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return kr(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const a=b9(e,s);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):kr(a,t.length)},I:function(e,t,n){const s=v9(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):kr(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):qo.d(e,t)},D:function(e,t,n){const s=Cie(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):kr(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return kr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return kr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return kr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let a;switch(s===12?a=Yu.noon:s===0?a=Yu.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let a;switch(s>=17?a=Yu.evening:s>=12?a=Yu.afternoon:s>=4?a=Yu.morning:a=Yu.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return qo.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):qo.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):kr(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):kr(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):qo.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):qo.s(e,t)},S:function(e,t){return qo.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return lD(s);case"XXXX":case"XX":return xd(s);case"XXXXX":case"XXX":default:return xd(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return lD(s);case"xxxx":case"xx":return xd(s);case"xxxxx":case"xxx":default:return xd(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+iD(s,":");case"OOOO":default:return"GMT"+xd(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+iD(s,":");case"zzzz":default:return"GMT"+xd(s,":")}},t:function(e,t,n){const s=Math.trunc(e.getTime()/1e3);return kr(s,t.length)},T:function(e,t,n){const s=e.getTime();return kr(s,t.length)}};function iD(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?n+String(a):n+String(a)+t+kr(i,2)}function lD(e,t){return e%60===0?(e>0?"-":"+")+kr(Math.abs(e)/60,2):xd(e,t)}function xd(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=kr(Math.trunc(s/60),2),i=kr(s%60,2);return n+a+t+i}const oD=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},j9=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},_ie=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return oD(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",oD(s,t)).replace("{{time}}",j9(a,t))},Aie={p:j9,P:_ie},Tie=/^D+$/,Eie=/^Y+$/,Oie=["D","DD","YY","YYYY"];function Rie(e){return Tie.test(e)}function Die(e){return Eie.test(e)}function Mie(e,t,n){const s=$ie(e,t,n);if(console.warn(s),Oie.includes(e))throw new RangeError(s)}function $ie(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Iie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lie=/^'([^]*?)'?$/,Uie=/''/g,Bie=/[a-zA-Z]/;function Jt(e,t,n){var u,h,f,m,g,x,w,j;const s=$m(),a=(n==null?void 0:n.locale)??s.locale??r1,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((x=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??s.weekStartsOn??((j=(w=s.locale)==null?void 0:w.options)==null?void 0:j.weekStartsOn)??0,o=At(e);if(!Bae(o))throw new RangeError("Invalid time value");let c=t.match(Fie).map(y=>{const b=y[0];if(b==="p"||b==="P"){const p=Aie[b];return p(y,a.formatLong)}return y}).join("").match(Iie).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:zie(y)};if(aD[b])return{isToken:!0,value:y};if(b.match(Bie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const d={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const b=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Die(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Rie(b))&&Mie(b,t,String(e));const p=aD[b[0]];return p(o,b,a.localize,d)}).join("")}function zie(e){const t=e.match(Lie);return t?t[1].replace(Uie,"'"):e}function Vie(e,t,n){const s=$m(),a=(n==null?void 0:n.locale)??s.locale??r1,i=2520,l=$0(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l});let c,d;l>0?(c=At(t),d=At(e)):(c=At(e),d=At(t));const u=Gae(d,c),h=(zf(d)-zf(c))/1e3,f=Math.round((u-h)/60);let m;if(f<2)return n!=null&&n.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,o):u<10?a.formatDistance("lessThanXSeconds",10,o):u<20?a.formatDistance("lessThanXSeconds",20,o):u<40?a.formatDistance("halfAMinute",0,o):u<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):f===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",f,o);if(f<45)return a.formatDistance("xMinutes",f,o);if(f<90)return a.formatDistance("aboutXHours",1,o);if(f<sD){const g=Math.round(f/60);return a.formatDistance("aboutXHours",g,o)}else{if(f<i)return a.formatDistance("xDays",1,o);if(f<By){const g=Math.round(f/sD);return a.formatDistance("xDays",g,o)}else if(f<By*2)return m=Math.round(f/By),a.formatDistance("aboutXMonths",m,o)}if(m=Kae(d,c),m<12){const g=Math.round(f/By);return a.formatDistance("xMonths",g,o)}else{const g=m%12,x=Math.trunc(m/12);return g<3?a.formatDistance("aboutXYears",x,o):g<9?a.formatDistance("overXYears",x,o):a.formatDistance("almostXYears",x+1,o)}}function n1(e,t){return Vie(e,Uae(e),t)}function qie(e){const t=At(e),n=t.getFullYear(),s=t.getMonth(),a=Ys(e,0);return a.setFullYear(n,s+1,0),a.setHours(0,0,0,0),a.getDate()}function Wie(e){return Math.trunc(+At(e)/1e3)}function Hie(e){const t=At(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function Kie(e,t){return zae(Hie(e),Ks(e),t)+1}function X2(e,t){const n=At(e),s=At(t);return n.getTime()>s.getTime()}function w9(e,t){const n=At(e),s=At(t);return+n<+s}function cD(e,t,n){const s=Ga(e,n),a=Ga(t,n);return+s==+a}function oT(e,t){const n=At(e),s=At(t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function Gie(e,t){const n=At(e),s=At(t);return n.getFullYear()===s.getFullYear()}function hl(e,t){return Yn(e,-t)}function lk(e,t){const n=At(e),s=n.getFullYear(),a=n.getDate(),i=Ys(e,0);i.setFullYear(s,t,15),i.setHours(0,0,0,0);const l=qie(i);return n.setMonth(t,Math.min(a,l)),n}function dD(e,t){const n=At(e);return isNaN(+n)?Ys(e,NaN):(n.setFullYear(t),n)}function bp(e,t){if(e.one!==void 0&&t===1)return e.one;const n=t%10,s=t%100;return n===1&&s!==11?e.singularNominative.replace("{{count}}",String(t)):n>=2&&n<=4&&(s<10||s>20)?e.singularGenitive.replace("{{count}}",String(t)):e.pluralGenitive.replace("{{count}}",String(t))}function ms(e){return(t,n)=>n!=null&&n.addSuffix?n.comparison&&n.comparison>0?e.future?bp(e.future,t):"через "+bp(e.regular,t):e.past?bp(e.past,t):bp(e.regular,t)+" назад":bp(e.regular,t)}const Yie={lessThanXSeconds:ms({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:ms({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(e,t)=>t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:ms({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:ms({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:ms({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:ms({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:ms({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:ms({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:ms({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:ms({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:ms({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:ms({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:ms({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:ms({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:ms({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},Xie=(e,t,n)=>Yie[e](t,n),Zie={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},Qie={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},Jie={any:"{{date}}, {{time}}"},ele={date:Lh({formats:Zie,defaultWidth:"full"}),time:Lh({formats:Qie,defaultWidth:"full"}),dateTime:Lh({formats:Jie,defaultWidth:"any"})},cT=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function tle(e){const t=cT[e];switch(e){case 0:return"'в прошлое "+t+" в' p";case 1:case 2:case 4:return"'в прошлый "+t+" в' p";case 3:case 5:case 6:return"'в прошлую "+t+" в' p"}}function uD(e){const t=cT[e];return e===2?"'во "+t+" в' p":"'в "+t+" в' p"}function rle(e){const t=cT[e];switch(e){case 0:return"'в следующее "+t+" в' p";case 1:case 2:case 4:return"'в следующий "+t+" в' p";case 3:case 5:case 6:return"'в следующую "+t+" в' p"}}const nle={lastWeek:(e,t,n)=>{const s=e.getDay();return cD(e,t,n)?uD(s):tle(s)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(e,t,n)=>{const s=e.getDay();return cD(e,t,n)?uD(s):rle(s)},other:"P"},sle=(e,t,n,s)=>{const a=nle[e];return typeof a=="function"?a(t,n,s):a},ale={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},ile={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},lle={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},ole={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},cle={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},dle={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},ule={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},hle=(e,t)=>{const n=Number(e),s=t==null?void 0:t.unit;let a;return s==="date"?a="-е":s==="week"||s==="minute"||s==="second"?a="-я":a="-й",n+a},fle={ordinalNumber:hle,era:dl({values:ale,defaultWidth:"wide"}),quarter:dl({values:ile,defaultWidth:"wide",argumentCallback:e=>e-1}),month:dl({values:lle,defaultWidth:"wide",formattingValues:ole,defaultFormattingWidth:"wide"}),day:dl({values:cle,defaultWidth:"wide"}),dayPeriod:dl({values:dle,defaultWidth:"any",formattingValues:ule,defaultFormattingWidth:"wide"})},mle=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,ple=/\d+/i,xle={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},gle={any:[/^д/i,/^н/i]},vle={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},yle={any:[/1/i,/2/i,/3/i,/4/i]},ble={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},jle={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},wle={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},Nle={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},kle={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},Sle={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},Cle={ordinalNumber:g9({matchPattern:mle,parsePattern:ple,valueCallback:e=>parseInt(e,10)}),era:ul({matchPatterns:xle,defaultMatchWidth:"wide",parsePatterns:gle,defaultParseWidth:"any"}),quarter:ul({matchPatterns:vle,defaultMatchWidth:"wide",parsePatterns:yle,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ul({matchPatterns:ble,defaultMatchWidth:"wide",parsePatterns:jle,defaultParseWidth:"any"}),day:ul({matchPatterns:wle,defaultMatchWidth:"wide",parsePatterns:Nle,defaultParseWidth:"any"}),dayPeriod:ul({matchPatterns:kle,defaultMatchWidth:"wide",parsePatterns:Sle,defaultParseWidth:"any"})},lo={code:"ru",formatDistance:Xie,formatLong:ele,formatRelative:sle,localize:fle,match:Cle,options:{weekStartsOn:1,firstWeekContainsDate:1}},Ple=e=>{try{if(!e||e==="null"||e==="undefined")return"только что";const t=new Date(e);return isNaN(t.getTime())?(console.warn("Invalid date for formatting:",e),"только что"):n1(t,{addSuffix:!0,locale:lo})}catch(t){return console.error("Error formatting date distance:",t,e),"только что"}};function _le({id:e,type:t,title:n,message:s,metadata:a,createdAt:i,onClose:l,onMarkAsRead:o}){const[c,d]=v.useState(!1);v.useEffect(()=>{const g=setTimeout(()=>d(!0),100),x=setTimeout(()=>{u()},7e3);return()=>{clearTimeout(g),clearTimeout(x)}},[]);const u=()=>{d(!1),setTimeout(l,300)},h=()=>{switch(t){case"offer_request_approved":return r.jsx(ao,{className:"w-5 h-5 text-green-600"});case"offer_request_rejected":return r.jsx(Kt,{className:"w-5 h-5 text-red-600"});case"payment":return r.jsx(Rt,{className:"w-5 h-5 text-green-600"});case"general":return r.jsx(Ua,{className:"w-5 h-5 text-blue-600"});default:return r.jsx($n,{className:"w-5 h-5 text-gray-600"})}},f=()=>{switch(t){case"offer_request_approved":case"payment":return"bg-green-100 text-green-800";case"offer_request_rejected":return"bg-red-100 text-red-800";case"general":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},m=()=>{switch(t){case"offer_request_approved":return"Одобрено";case"offer_request_rejected":return"Отклонено";case"payment":return"Выплата";case"general":return"Системное";default:return"Уведомление"}};return r.jsx("div",{className:`fixed bottom-4 right-4 z-50 transition-all duration-300 ease-in-out transform ${c?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:r.jsx(q,{className:"w-80 shadow-lg border-l-4 border-l-blue-500 bg-white dark:bg-gray-800",children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[h(),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 truncate",children:n}),r.jsx(ie,{className:`text-xs ${f()}`,children:m()})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2 line-clamp-2",children:s}),(a==null?void 0:a.amount)&&r.jsxs("div",{className:"mb-2 p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded text-xs",children:[r.jsx("strong",{children:"Сумма:"})," ",a.amount," ",a.currency||"USD"]}),(a==null?void 0:a.rejectReason)&&r.jsxs("div",{className:"mb-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-xs",children:[r.jsx("strong",{children:"Причина:"})," ",a.rejectReason]}),r.jsxs("div",{className:"flex items-center justify-between mt-3",children:[r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Ple(i)}),r.jsxs("div",{className:"flex gap-1",children:[o&&r.jsx(D,{onClick:o,variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",children:"Прочитано"}),r.jsx(D,{onClick:u,variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:r.jsx(Fn,{className:"w-3 h-3"})})]})]})]})]})})})})}function Ale({notifications:e,onMarkAsRead:t,onRemove:n}){const[s,a]=v.useState([]);v.useEffect(()=>{const o=e.filter(c=>!c.is_read).slice(0,3).map(c=>c.id);a(o)},[e]);const i=o=>{a(c=>c.filter(d=>d!==o)),setTimeout(()=>n(o),300)},l=o=>{t&&(t(o),i(o))};return r.jsx(r.Fragment,{children:s.map((o,c)=>{const d=e.find(u=>u.id===o);return d?r.jsx("div",{style:{bottom:`${4+c*90}px`},className:"fixed right-4 z-50",children:r.jsx(_le,{id:d.id,type:d.type,title:d.title,message:d.message,metadata:d.metadata,createdAt:d.created_at,onClose:()=>i(d.id),onMarkAsRead:()=>l(d.id)})},d.id):null})})}const Tle=v.createContext(void 0);function hD({children:e}){const{user:t}=tr(),n=Et(),[s,a]=v.useState(!0),[i,l]=v.useState([]),{data:o=[]}=Fe({queryKey:["/api/notifications"],enabled:!!t,refetchInterval:3e4}),c=Oe({mutationFn:async g=>{const x=localStorage.getItem("auth_token");if(console.log("🔍 NotificationProvider markAsRead - token check:",{token:x?x.substring(0,20)+"...":"NO_TOKEN"}),!x||x==="null"||x==="undefined")throw new Error("Authentication required");const w=await fetch(`/api/notifications/${g}/read`,{method:"PUT",headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});if(console.log("📡 NotificationProvider response:",w.status),!w.ok)throw await w.text(),new Error("Failed to mark notification as read");return w.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notifications"]})}}),d=g=>{l(x=>x.filter(w=>w!==g))},u=g=>{c.mutate(g)},h=()=>{a(g=>!g)},f=o.filter(g=>!g.is_read).length;v.useEffect(()=>{const g=o.filter(x=>!x.is_read&&!i.includes(x.id)).slice(0,3);if(g.length>0&&s){const x=g.map(w=>w.id);l(w=>[...w,...x])}},[o,i,s]),v.useEffect(()=>{},[t,n]);const m={notifications:o,unreadCount:f,markAsRead:u,removeNotification:d,showPushNotifications:s,togglePushNotifications:h};return r.jsxs(Tle.Provider,{value:m,children:[e,s&&r.jsx(Ale,{notifications:o.filter(g=>!g.is_read&&i.includes(g.id)),onMarkAsRead:u,onRemove:d})]})}function Ele({isMobile:e=!1,onClose:t}){const[n]=Bn(),{collapsed:s,toggleCollapsed:a}=Qs(),{t:i}=Wt(),l=[{title:i("sidebar.home"),href:"/advertiser",icon:Ww,description:i("sidebar.homeDesc")},{title:i("sidebar.myOffers"),href:"/advertiser/offers",icon:Gt,description:i("sidebar.myOffersDesc")},{title:i("sidebar.partners"),href:"/advertiser/partners",icon:or,description:i("sidebar.partnersDesc")},{title:i("sidebar.accessRequests"),href:"/advertiser/access-requests",icon:Yx,description:i("sidebar.accessRequestsDesc")},{title:i("sidebar.notifications"),href:"/advertiser/notifications",icon:$n,description:i("sidebar.notificationsDesc")},{title:i("sidebar.referrals"),href:"/advertiser/referrals",icon:mo,description:i("sidebar.referralsDesc")},{title:i("sidebar.finances"),href:"/advertiser/finances",icon:Oc,description:i("sidebar.financesDesc")},{title:i("sidebar.teamMode"),href:"/advertiser/team",icon:or,description:i("sidebar.teamModeDesc")},{title:i("sidebar.antifraud"),href:"/advertiser/antifraud",icon:Dt,description:i("sidebar.antifraudDesc")},{title:i("sidebar.analytics"),href:"/advertiser/analytics",icon:yr,description:i("sidebar.analyticsDesc")},{title:i("sidebar.postbacks"),href:"/advertiser/postbacks",icon:cs,description:i("sidebar.postbacksDesc")},{title:i("sidebar.profile"),href:"/advertiser/profile",icon:fr,description:i("sidebar.profileDesc")},{title:i("sidebar.documents"),href:"/advertiser/documents",icon:es,description:i("sidebar.documentsDesc")}];return r.jsxs("div",{className:Ee("bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 h-screen flex flex-col transition-all duration-300 ease-in-out",e?"w-64 shadow-lg":s?"w-16":"w-64"),children:[r.jsx("div",{className:"border-b border-gray-200 dark:border-gray-800 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:Ee("flex items-center space-x-3",s&&"justify-center"),children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(Om,{className:"w-6 h-6 text-white"})}),!s&&r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"FraudGuard"}),r.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Кабинет рекламодателя"})]})]}),r.jsx("button",{onClick:e?t:a,className:Ee("p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",s&&!e&&"mx-auto"),title:e?"Закрыть меню":s?"Развернуть меню":"Свернуть меню",children:e?r.jsx(Mi,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):s?r.jsx(kU,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):r.jsx(Mi,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})}),r.jsx("nav",{className:"flex-1 p-4 space-y-2",children:l.map(o=>{const c=o.icon,d=n===o.href||o.href!=="/advertiser"&&n.startsWith(o.href);return r.jsx(Ls,{href:o.href,children:r.jsxs("div",{className:Ee("flex items-center rounded-lg transition-colors group",s&&!e?"px-3 py-3 justify-center":"px-3 py-2 space-x-3",d?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-200"),title:s&&!e?o.title:o.description,"data-testid":`sidebar-link-${o.href.split("/").pop()}`,onClick:()=>e&&(t==null?void 0:t()),children:[r.jsx(c,{className:Ee("w-5 h-5 flex-shrink-0",d?"text-blue-600 dark:text-blue-400":"")}),(!s||e)&&r.jsx("span",{className:"font-medium truncate",children:o.title})]})},o.href)})}),r.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800",children:r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"© 2025 FraudGuard Platform"})})]})}const Ole=[{title:"Главная",href:"/affiliate",icon:Ww,description:"Обзор кабинета"},{title:"Офферы",href:"/affiliate/offers",icon:Gt,description:"Доступные офферы"},{title:"Запросы доступа",href:"/affiliate/access-requests",icon:cs,description:"Запросы к приватным офферам"},{title:"Ссылки",href:"/affiliate/links",icon:If,description:"Мои трекинговые ссылки"},{title:"Статистика",href:"/affiliate/analytics",icon:yr,description:"Статистика переходов"},{title:"Креативы",href:"/affiliate/creatives",icon:ane,description:"Рекламные материалы"},{title:"Постбэки",href:"/affiliate/postbacks",icon:$h,description:"Настройка постбэков"},{title:"Команда",href:"/affiliate/team",icon:or,description:"Управление командой"},{title:"Рефералы",href:"/affiliate/referrals",icon:or,description:"Реферальная программа"},{title:"Финансы",href:"/affiliate/finances",icon:Oc,description:"Выплаты и баланс"},{title:"Профиль",href:"/affiliate/profile",icon:fr,description:"Настройки профиля"},{title:"Безопасность",href:"/affiliate/security",icon:Dt,description:"Настройки безопасности"},{title:"Документы",href:"/affiliate/documents",icon:es,description:"Документооборот"}];function Rle({isMobile:e=!1,onClose:t}){const[n]=Bn(),{collapsed:s,toggleCollapsed:a}=Qs();return r.jsxs("div",{className:Ee("bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 h-screen flex flex-col transition-all duration-300 ease-in-out",e?"w-64 shadow-lg":s?"w-16":"w-64"),children:[r.jsx("div",{className:"border-b border-gray-200 dark:border-gray-800 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:Ee("flex items-center space-x-3",s&&"justify-center"),children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:r.jsx(Om,{className:"w-6 h-6 text-white"})}),!s&&r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"FraudGuard"}),r.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Кабинет партнёра"})]})]}),r.jsx("button",{onClick:e?t:a,className:Ee("p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",s&&!e&&"mx-auto"),title:e?"Закрыть меню":s?"Развернуть меню":"Свернуть меню",children:e?r.jsx(Mi,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):s?r.jsx(kU,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):r.jsx(Mi,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})}),r.jsx("nav",{className:"flex-1 p-4 space-y-2",children:Ole.map(i=>{const l=i.icon,o=n===i.href||i.href!=="/affiliate"&&n.startsWith(i.href);return r.jsx(Ls,{href:i.href,children:r.jsxs("div",{className:Ee("flex items-center rounded-lg transition-colors group",s&&!e?"px-3 py-3 justify-center":"px-3 py-2 space-x-3",o?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-200"),title:s&&!e?i.title:i.description,"data-testid":`sidebar-link-${i.href.split("/").pop()}`,onClick:()=>e&&(t==null?void 0:t()),children:[r.jsx(l,{className:Ee("w-5 h-5 flex-shrink-0",o?"text-green-600 dark:text-green-400":"")}),(!s||e)&&r.jsx("span",{className:"font-medium truncate",children:i.title})]})},i.href)})}),!s&&r.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800",children:r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"© 2025 FraudGuard Platform"})})]})}var Dle=v.createContext(void 0);function Im(e){const t=v.useContext(Dle);return e||t||"ltr"}var ok=0;function s1(){v.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??fD()),document.body.insertAdjacentElement("beforeend",e[1]??fD()),ok++,()=>{ok===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ok--}},[])}function fD(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ck="focusScope.autoFocusOnMount",dk="focusScope.autoFocusOnUnmount",mD={bubbles:!1,cancelable:!0},Mle="FocusScope",Vv=v.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=e,[o,c]=v.useState(null),d=zr(a),u=zr(i),h=v.useRef(null),f=jt(t,x=>c(x)),m=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(s){let x=function(b){if(m.paused||!o)return;const p=b.target;o.contains(p)?h.current=p:Ko(h.current,{select:!0})},w=function(b){if(m.paused||!o)return;const p=b.relatedTarget;p!==null&&(o.contains(p)||Ko(h.current,{select:!0}))},j=function(b){if(document.activeElement===document.body)for(const N of b)N.removedNodes.length>0&&Ko(o)};document.addEventListener("focusin",x),document.addEventListener("focusout",w);const y=new MutationObserver(j);return o&&y.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",w),y.disconnect()}}},[s,o,m.paused]),v.useEffect(()=>{if(o){xD.add(m);const x=document.activeElement;if(!o.contains(x)){const j=new CustomEvent(ck,mD);o.addEventListener(ck,d),o.dispatchEvent(j),j.defaultPrevented||($le(Ble(N9(o)),{select:!0}),document.activeElement===x&&Ko(o))}return()=>{o.removeEventListener(ck,d),setTimeout(()=>{const j=new CustomEvent(dk,mD);o.addEventListener(dk,u),o.dispatchEvent(j),j.defaultPrevented||Ko(x??document.body,{select:!0}),o.removeEventListener(dk,u),xD.remove(m)},0)}}},[o,d,u,m]);const g=v.useCallback(x=>{if(!n&&!s||m.paused)return;const w=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,j=document.activeElement;if(w&&j){const y=x.currentTarget,[b,p]=Ile(y);b&&p?!x.shiftKey&&j===p?(x.preventDefault(),n&&Ko(b,{select:!0})):x.shiftKey&&j===b&&(x.preventDefault(),n&&Ko(p,{select:!0})):j===y&&x.preventDefault()}},[n,s,m.paused]);return r.jsx(Xe.div,{tabIndex:-1,...l,ref:f,onKeyDown:g})});Vv.displayName=Mle;function $le(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Ko(s,{select:t}),document.activeElement!==n)return}function Ile(e){const t=N9(e),n=pD(t,e),s=pD(t.reverse(),e);return[n,s]}function N9(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function pD(e,t){for(const n of e)if(!Fle(n,{upTo:t}))return n}function Fle(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Lle(e){return e instanceof HTMLInputElement&&"select"in e}function Ko(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Lle(e)&&t&&e.select()}}var xD=Ule();function Ule(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=gD(e,t),e.unshift(t)},remove(t){var n;e=gD(e,t),(n=e[0])==null||n.resume()}}}function gD(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function Ble(e){return e.filter(t=>t.tagName!=="A")}var uk="rovingFocusGroup.onEntryFocus",zle={bubbles:!1,cancelable:!0},a1="RovingFocusGroup",[Z2,k9,Vle]=$v(a1),[qle,i1]=zn(a1,[Vle]),[Wle,Hle]=qle(a1),S9=v.forwardRef((e,t)=>r.jsx(Z2.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Z2.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Kle,{...e,ref:t})})}));S9.displayName=a1;var Kle=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,f=v.useRef(null),m=jt(t,f),g=Im(i),[x=null,w]=Di({prop:l,defaultProp:o,onChange:c}),[j,y]=v.useState(!1),b=zr(d),p=k9(n),N=v.useRef(!1),[k,S]=v.useState(0);return v.useEffect(()=>{const P=f.current;if(P)return P.addEventListener(uk,b),()=>P.removeEventListener(uk,b)},[b]),r.jsx(Wle,{scope:n,orientation:s,dir:g,loop:a,currentTabStopId:x,onItemFocus:v.useCallback(P=>w(P),[w]),onItemShiftTab:v.useCallback(()=>y(!0),[]),onFocusableItemAdd:v.useCallback(()=>S(P=>P+1),[]),onFocusableItemRemove:v.useCallback(()=>S(P=>P-1),[]),children:r.jsx(Xe.div,{tabIndex:j||k===0?-1:0,"data-orientation":s,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:Le(e.onMouseDown,()=>{N.current=!0}),onFocus:Le(e.onFocus,P=>{const _=!N.current;if(P.target===P.currentTarget&&_&&!j){const R=new CustomEvent(uk,zle);if(P.currentTarget.dispatchEvent(R),!R.defaultPrevented){const O=p().filter(z=>z.focusable),M=O.find(z=>z.active),A=O.find(z=>z.id===x),B=[M,A,...O].filter(Boolean).map(z=>z.ref.current);_9(B,u)}}N.current=!1}),onBlur:Le(e.onBlur,()=>y(!1))})})}),C9="RovingFocusGroupItem",P9=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:i,...l}=e,o=Qn(),c=i||o,d=Hle(C9,n),u=d.currentTabStopId===c,h=k9(n),{onFocusableItemAdd:f,onFocusableItemRemove:m}=d;return v.useEffect(()=>{if(s)return f(),()=>m()},[s,f,m]),r.jsx(Z2.ItemSlot,{scope:n,id:c,focusable:s,active:a,children:r.jsx(Xe.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Le(e.onMouseDown,g=>{s?d.onItemFocus(c):g.preventDefault()}),onFocus:Le(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:Le(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const x=Xle(g,d.orientation,d.dir);if(x!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let j=h().filter(y=>y.focusable).map(y=>y.ref.current);if(x==="last")j.reverse();else if(x==="prev"||x==="next"){x==="prev"&&j.reverse();const y=j.indexOf(g.currentTarget);j=d.loop?Zle(j,y+1):j.slice(y+1)}setTimeout(()=>_9(j))}})})})});P9.displayName=C9;var Gle={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Yle(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Xle(e,t,n){const s=Yle(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Gle[s]}function _9(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function Zle(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var A9=S9,T9=P9,Qle=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Xu=new WeakMap,zy=new WeakMap,Vy={},hk=0,E9=function(e){return e&&(e.host||E9(e.parentNode))},Jle=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=E9(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},eoe=function(e,t,n,s){var a=Jle(t,Array.isArray(e)?e:[e]);Vy[n]||(Vy[n]=new WeakMap);var i=Vy[n],l=[],o=new Set,c=new Set(a),d=function(h){!h||o.has(h)||(o.add(h),d(h.parentNode))};a.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(o.has(f))u(f);else try{var m=f.getAttribute(s),g=m!==null&&m!=="false",x=(Xu.get(f)||0)+1,w=(i.get(f)||0)+1;Xu.set(f,x),i.set(f,w),l.push(f),x===1&&g&&zy.set(f,!0),w===1&&f.setAttribute(n,"true"),g||f.setAttribute(s,"true")}catch(j){console.error("aria-hidden: cannot operate on ",f,j)}})};return u(t),o.clear(),hk++,function(){l.forEach(function(h){var f=Xu.get(h)-1,m=i.get(h)-1;Xu.set(h,f),i.set(h,m),f||(zy.has(h)||h.removeAttribute(s),zy.delete(h)),m||h.removeAttribute(n)}),hk--,hk||(Xu=new WeakMap,Xu=new WeakMap,zy=new WeakMap,Vy={})}},l1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=Qle(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live]"))),eoe(s,a,n,"aria-hidden")):function(){return null}},fl=function(){return fl=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fl.apply(this,arguments)};function O9(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function toe(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var I0="right-scroll-bar-position",F0="width-before-scroll-bar",roe="with-scroll-bars-hidden",noe="--removed-body-scroll-bar-size";function fk(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function soe(e,t){var n=v.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=t,n.facade}var aoe=typeof window<"u"?v.useLayoutEffect:v.useEffect,vD=new WeakMap;function ioe(e,t){var n=soe(null,function(s){return e.forEach(function(a){return fk(a,s)})});return aoe(function(){var s=vD.get(n);if(s){var a=new Set(s),i=new Set(e),l=n.current;a.forEach(function(o){i.has(o)||fk(o,null)}),i.forEach(function(o){a.has(o)||fk(o,l)})}vD.set(n,e)},[e]),n}function loe(e){return e}function ooe(e,t){t===void 0&&(t=loe);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var l=t(i,s);return n.push(l),function(){n=n.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(s=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){s=!0;var l=[];if(n.length){var o=n;n=[],o.forEach(i),l=n}var c=function(){var u=l;l=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){l.push(u),d()},filter:function(u){return l=l.filter(u),n}}}};return a}function coe(e){e===void 0&&(e={});var t=ooe(null);return t.options=fl({async:!0,ssr:!1},e),t}var R9=function(e){var t=e.sideCar,n=O9(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return v.createElement(s,fl({},n))};R9.isSideCarExport=!0;function doe(e,t){return e.useMedium(t),R9}var D9=coe(),mk=function(){},o1=v.forwardRef(function(e,t){var n=v.useRef(null),s=v.useState({onScrollCapture:mk,onWheelCapture:mk,onTouchMoveCapture:mk}),a=s[0],i=s[1],l=e.forwardProps,o=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,m=e.noIsolation,g=e.inert,x=e.allowPinchZoom,w=e.as,j=w===void 0?"div":w,y=e.gapMode,b=O9(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),p=f,N=ioe([n,t]),k=fl(fl({},b),a);return v.createElement(v.Fragment,null,u&&v.createElement(p,{sideCar:D9,removeScrollBar:d,shards:h,noIsolation:m,inert:g,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:y}),l?v.cloneElement(v.Children.only(o),fl(fl({},k),{ref:N})):v.createElement(j,fl({},k,{className:c,ref:N}),o))});o1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};o1.classNames={fullWidth:F0,zeroRight:I0};var uoe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function hoe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=uoe();return t&&e.setAttribute("nonce",t),e}function foe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function moe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var poe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=hoe())&&(foe(t,n),moe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},xoe=function(){var e=poe();return function(t,n){v.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},M9=function(){var e=xoe(),t=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return t},goe={left:0,top:0,right:0,gap:0},pk=function(e){return parseInt(e||"",10)||0},voe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[pk(n),pk(s),pk(a)]},yoe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return goe;var t=voe(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},boe=M9(),Uh="data-scroll-locked",joe=function(e,t,n,s){var a=e.left,i=e.top,l=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(roe,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(o,"px ").concat(s,`;
  }
  body[`).concat(Uh,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(I0,` {
    right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(F0,` {
    margin-right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(I0," .").concat(I0,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(F0," .").concat(F0,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Uh,`] {
    `).concat(noe,": ").concat(o,`px;
  }
`)},yD=function(){var e=parseInt(document.body.getAttribute(Uh)||"0",10);return isFinite(e)?e:0},woe=function(){v.useEffect(function(){return document.body.setAttribute(Uh,(yD()+1).toString()),function(){var e=yD()-1;e<=0?document.body.removeAttribute(Uh):document.body.setAttribute(Uh,e.toString())}},[])},Noe=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;woe();var i=v.useMemo(function(){return yoe(a)},[a]);return v.createElement(boe,{styles:joe(i,!t,a,n?"":"!important")})},Q2=!1;if(typeof window<"u")try{var qy=Object.defineProperty({},"passive",{get:function(){return Q2=!0,!0}});window.addEventListener("test",qy,qy),window.removeEventListener("test",qy,qy)}catch{Q2=!1}var Zu=Q2?{passive:!1}:!1,koe=function(e){return e.tagName==="TEXTAREA"},$9=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!koe(e)&&n[t]==="visible")},Soe=function(e){return $9(e,"overflowY")},Coe=function(e){return $9(e,"overflowX")},bD=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=I9(e,s);if(a){var i=F9(e,s),l=i[1],o=i[2];if(l>o)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},Poe=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},_oe=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},I9=function(e,t){return e==="v"?Soe(t):Coe(t)},F9=function(e,t){return e==="v"?Poe(t):_oe(t)},Aoe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Toe=function(e,t,n,s,a){var i=Aoe(e,window.getComputedStyle(t).direction),l=i*s,o=n.target,c=t.contains(o),d=!1,u=l>0,h=0,f=0;do{var m=F9(e,o),g=m[0],x=m[1],w=m[2],j=x-w-i*g;(g||j)&&I9(e,o)&&(h+=j,f+=g),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!c&&o!==document.body||c&&(t.contains(o)||t===o));return(u&&(Math.abs(h)<1||!a)||!u&&(Math.abs(f)<1||!a))&&(d=!0),d},Wy=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},jD=function(e){return[e.deltaX,e.deltaY]},wD=function(e){return e&&"current"in e?e.current:e},Eoe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Ooe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Roe=0,Qu=[];function Doe(e){var t=v.useRef([]),n=v.useRef([0,0]),s=v.useRef(),a=v.useState(Roe++)[0],i=v.useState(M9)[0],l=v.useRef(e);v.useEffect(function(){l.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var x=toe([e.lockRef.current],(e.shards||[]).map(wD),!0).filter(Boolean);return x.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=v.useCallback(function(x,w){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!l.current.allowPinchZoom;var j=Wy(x),y=n.current,b="deltaX"in x?x.deltaX:y[0]-j[0],p="deltaY"in x?x.deltaY:y[1]-j[1],N,k=x.target,S=Math.abs(b)>Math.abs(p)?"h":"v";if("touches"in x&&S==="h"&&k.type==="range")return!1;var P=bD(S,k);if(!P)return!0;if(P?N=S:(N=S==="v"?"h":"v",P=bD(S,k)),!P)return!1;if(!s.current&&"changedTouches"in x&&(b||p)&&(s.current=N),!N)return!0;var _=s.current||N;return Toe(_,w,x,_==="h"?b:p,!0)},[]),c=v.useCallback(function(x){var w=x;if(!(!Qu.length||Qu[Qu.length-1]!==i)){var j="deltaY"in w?jD(w):Wy(w),y=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&Eoe(N.delta,j)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var b=(l.current.shards||[]).map(wD).filter(Boolean).filter(function(N){return N.contains(w.target)}),p=b.length>0?o(w,b[0]):!l.current.noIsolation;p&&w.cancelable&&w.preventDefault()}}},[]),d=v.useCallback(function(x,w,j,y){var b={name:x,delta:w,target:j,should:y,shadowParent:Moe(j)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(p){return p!==b})},1)},[]),u=v.useCallback(function(x){n.current=Wy(x),s.current=void 0},[]),h=v.useCallback(function(x){d(x.type,jD(x),x.target,o(x,e.lockRef.current))},[]),f=v.useCallback(function(x){d(x.type,Wy(x),x.target,o(x,e.lockRef.current))},[]);v.useEffect(function(){return Qu.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Zu),document.addEventListener("touchmove",c,Zu),document.addEventListener("touchstart",u,Zu),function(){Qu=Qu.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,Zu),document.removeEventListener("touchmove",c,Zu),document.removeEventListener("touchstart",u,Zu)}},[]);var m=e.removeScrollBar,g=e.inert;return v.createElement(v.Fragment,null,g?v.createElement(i,{styles:Ooe(a)}):null,m?v.createElement(Noe,{gapMode:e.gapMode}):null)}function Moe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const $oe=doe(D9,Doe);var qv=v.forwardRef(function(e,t){return v.createElement(o1,fl({},e,{ref:t,sideCar:$oe}))});qv.classNames=o1.classNames;var J2=["Enter"," "],Ioe=["ArrowDown","PageUp","Home"],L9=["ArrowUp","PageDown","End"],Foe=[...Ioe,...L9],Loe={ltr:[...J2,"ArrowRight"],rtl:[...J2,"ArrowLeft"]},Uoe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Wv="Menu",[Jx,Boe,zoe]=$v(Wv),[$u,U9]=zn(Wv,[zoe,Jc,i1]),c1=Jc(),B9=i1(),[Voe,Iu]=$u(Wv),[qoe,Hv]=$u(Wv),z9=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:a,onOpenChange:i,modal:l=!0}=e,o=c1(t),[c,d]=v.useState(null),u=v.useRef(!1),h=zr(i),f=Im(a);return v.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),r.jsx(nT,{...o,children:r.jsx(Voe,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:r.jsx(qoe,{scope:t,onClose:v.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:f,modal:l,children:s})})})};z9.displayName=Wv;var Woe="MenuAnchor",dT=v.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=c1(n);return r.jsx(zv,{...a,...s,ref:t})});dT.displayName=Woe;var uT="MenuPortal",[Hoe,V9]=$u(uT,{forceMount:void 0}),q9=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:a}=e,i=Iu(uT,t);return r.jsx(Hoe,{scope:t,forceMount:n,children:r.jsx(Vn,{present:n||i.open,children:r.jsx(Em,{asChild:!0,container:a,children:s})})})};q9.displayName=uT;var qa="MenuContent",[Koe,hT]=$u(qa),W9=v.forwardRef((e,t)=>{const n=V9(qa,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,i=Iu(qa,e.__scopeMenu),l=Hv(qa,e.__scopeMenu);return r.jsx(Jx.Provider,{scope:e.__scopeMenu,children:r.jsx(Vn,{present:s||i.open,children:r.jsx(Jx.Slot,{scope:e.__scopeMenu,children:l.modal?r.jsx(Goe,{...a,ref:t}):r.jsx(Yoe,{...a,ref:t})})})})}),Goe=v.forwardRef((e,t)=>{const n=Iu(qa,e.__scopeMenu),s=v.useRef(null),a=jt(t,s);return v.useEffect(()=>{const i=s.current;if(i)return l1(i)},[]),r.jsx(fT,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Le(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Yoe=v.forwardRef((e,t)=>{const n=Iu(qa,e.__scopeMenu);return r.jsx(fT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Xoe=Ic("MenuContent.ScrollLock"),fT=v.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:g,...x}=e,w=Iu(qa,n),j=Hv(qa,n),y=c1(n),b=B9(n),p=Boe(n),[N,k]=v.useState(null),S=v.useRef(null),P=jt(t,S,w.onContentChange),_=v.useRef(0),R=v.useRef(""),O=v.useRef(0),M=v.useRef(null),A=v.useRef("right"),T=v.useRef(0),B=g?qv:v.Fragment,z=g?{as:Xoe,allowPinchZoom:!0}:void 0,U=$=>{var ke,be;const G=R.current+$,oe=p().filter(pe=>!pe.disabled),ee=document.activeElement,ce=(ke=oe.find(pe=>pe.ref.current===ee))==null?void 0:ke.textValue,ye=oe.map(pe=>pe.textValue),je=oce(ye,G,ce),$e=(be=oe.find(pe=>pe.textValue===je))==null?void 0:be.ref.current;(function pe(le){R.current=le,window.clearTimeout(_.current),le!==""&&(_.current=window.setTimeout(()=>pe(""),1e3))})(G),$e&&setTimeout(()=>$e.focus())};v.useEffect(()=>()=>window.clearTimeout(_.current),[]),s1();const E=v.useCallback($=>{var oe,ee;return A.current===((oe=M.current)==null?void 0:oe.side)&&dce($,(ee=M.current)==null?void 0:ee.area)},[]);return r.jsx(Koe,{scope:n,searchRef:R,onItemEnter:v.useCallback($=>{E($)&&$.preventDefault()},[E]),onItemLeave:v.useCallback($=>{var G;E($)||((G=S.current)==null||G.focus(),k(null))},[E]),onTriggerLeave:v.useCallback($=>{E($)&&$.preventDefault()},[E]),pointerGraceTimerRef:O,onPointerGraceIntentChange:v.useCallback($=>{M.current=$},[]),children:r.jsx(B,{...z,children:r.jsx(Vv,{asChild:!0,trapped:a,onMountAutoFocus:Le(i,$=>{var G;$.preventDefault(),(G=S.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:r.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:r.jsx(A9,{asChild:!0,...b,dir:j.dir,orientation:"vertical",loop:s,currentTabStopId:N,onCurrentTabStopIdChange:k,onEntryFocus:Le(c,$=>{j.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(Zw,{role:"menu","aria-orientation":"vertical","data-state":lB(w.open),"data-radix-menu-content":"",dir:j.dir,...y,...x,ref:P,style:{outline:"none",...x.style},onKeyDown:Le(x.onKeyDown,$=>{const oe=$.target.closest("[data-radix-menu-content]")===$.currentTarget,ee=$.ctrlKey||$.altKey||$.metaKey,ce=$.key.length===1;oe&&($.key==="Tab"&&$.preventDefault(),!ee&&ce&&U($.key));const ye=S.current;if($.target!==ye||!Foe.includes($.key))return;$.preventDefault();const $e=p().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);L9.includes($.key)&&$e.reverse(),ice($e)}),onBlur:Le(e.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(_.current),R.current="")}),onPointerMove:Le(e.onPointerMove,eg($=>{const G=$.target,oe=T.current!==$.clientX;if($.currentTarget.contains(G)&&oe){const ee=$.clientX>T.current?"right":"left";A.current=ee,T.current=$.clientX}}))})})})})})})});W9.displayName=qa;var Zoe="MenuGroup",mT=v.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Xe.div,{role:"group",...s,ref:t})});mT.displayName=Zoe;var Qoe="MenuLabel",H9=v.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Xe.div,{...s,ref:t})});H9.displayName=Qoe;var Ab="MenuItem",ND="menu.itemSelect",d1=v.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...a}=e,i=v.useRef(null),l=Hv(Ab,e.__scopeMenu),o=hT(Ab,e.__scopeMenu),c=jt(t,i),d=v.useRef(!1),u=()=>{const h=i.current;if(!n&&h){const f=new CustomEvent(ND,{bubbles:!0,cancelable:!0});h.addEventListener(ND,m=>s==null?void 0:s(m),{once:!0}),IA(h,f),f.defaultPrevented?d.current=!1:l.onClose()}};return r.jsx(K9,{...a,ref:c,disabled:n,onClick:Le(e.onClick,u),onPointerDown:h=>{var f;(f=e.onPointerDown)==null||f.call(e,h),d.current=!0},onPointerUp:Le(e.onPointerUp,h=>{var f;d.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:Le(e.onKeyDown,h=>{const f=o.searchRef.current!=="";n||f&&h.key===" "||J2.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});d1.displayName=Ab;var K9=v.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:a,...i}=e,l=hT(Ab,n),o=B9(n),c=v.useRef(null),d=jt(t,c),[u,h]=v.useState(!1),[f,m]=v.useState("");return v.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[i.children]),r.jsx(Jx.ItemSlot,{scope:n,disabled:s,textValue:a??f,children:r.jsx(T9,{asChild:!0,...o,focusable:!s,children:r.jsx(Xe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:d,onPointerMove:Le(e.onPointerMove,eg(g=>{s?l.onItemLeave(g):(l.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Le(e.onPointerLeave,eg(g=>l.onItemLeave(g))),onFocus:Le(e.onFocus,()=>h(!0)),onBlur:Le(e.onBlur,()=>h(!1))})})})}),Joe="MenuCheckboxItem",G9=v.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...a}=e;return r.jsx(J9,{scope:e.__scopeMenu,checked:n,children:r.jsx(d1,{role:"menuitemcheckbox","aria-checked":Tb(n)?"mixed":n,...a,ref:t,"data-state":xT(n),onSelect:Le(a.onSelect,()=>s==null?void 0:s(Tb(n)?!0:!n),{checkForDefaultPrevented:!1})})})});G9.displayName=Joe;var Y9="MenuRadioGroup",[ece,tce]=$u(Y9,{value:void 0,onValueChange:()=>{}}),X9=v.forwardRef((e,t)=>{const{value:n,onValueChange:s,...a}=e,i=zr(s);return r.jsx(ece,{scope:e.__scopeMenu,value:n,onValueChange:i,children:r.jsx(mT,{...a,ref:t})})});X9.displayName=Y9;var Z9="MenuRadioItem",Q9=v.forwardRef((e,t)=>{const{value:n,...s}=e,a=tce(Z9,e.__scopeMenu),i=n===a.value;return r.jsx(J9,{scope:e.__scopeMenu,checked:i,children:r.jsx(d1,{role:"menuitemradio","aria-checked":i,...s,ref:t,"data-state":xT(i),onSelect:Le(s.onSelect,()=>{var l;return(l=a.onValueChange)==null?void 0:l.call(a,n)},{checkForDefaultPrevented:!1})})})});Q9.displayName=Z9;var pT="MenuItemIndicator",[J9,rce]=$u(pT,{checked:!1}),eB=v.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...a}=e,i=rce(pT,n);return r.jsx(Vn,{present:s||Tb(i.checked)||i.checked===!0,children:r.jsx(Xe.span,{...a,ref:t,"data-state":xT(i.checked)})})});eB.displayName=pT;var nce="MenuSeparator",tB=v.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Xe.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});tB.displayName=nce;var sce="MenuArrow",rB=v.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=c1(n);return r.jsx(Qw,{...a,...s,ref:t})});rB.displayName=sce;var ace="MenuSub",[Kqe,nB]=$u(ace),Vp="MenuSubTrigger",sB=v.forwardRef((e,t)=>{const n=Iu(Vp,e.__scopeMenu),s=Hv(Vp,e.__scopeMenu),a=nB(Vp,e.__scopeMenu),i=hT(Vp,e.__scopeMenu),l=v.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=v.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return v.useEffect(()=>u,[u]),v.useEffect(()=>{const h=o.current;return()=>{window.clearTimeout(h),c(null)}},[o,c]),r.jsx(dT,{asChild:!0,...d,children:r.jsx(K9,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":lB(n.open),...e,ref:No(t,a.onTriggerChange),onClick:h=>{var f;(f=e.onClick)==null||f.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Le(e.onPointerMove,eg(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Le(e.onPointerLeave,eg(h=>{var m,g;u();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const x=(g=n.content)==null?void 0:g.dataset.side,w=x==="right",j=w?-5:5,y=f[w?"left":"right"],b=f[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+j,y:h.clientY},{x:y,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:y,y:f.bottom}],side:x}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Le(e.onKeyDown,h=>{var m;const f=i.searchRef.current!=="";e.disabled||f&&h.key===" "||Loe[s.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});sB.displayName=Vp;var aB="MenuSubContent",iB=v.forwardRef((e,t)=>{const n=V9(qa,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,i=Iu(qa,e.__scopeMenu),l=Hv(qa,e.__scopeMenu),o=nB(aB,e.__scopeMenu),c=v.useRef(null),d=jt(t,c);return r.jsx(Jx.Provider,{scope:e.__scopeMenu,children:r.jsx(Vn,{present:s||i.open,children:r.jsx(Jx.Slot,{scope:e.__scopeMenu,children:r.jsx(fT,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;l.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Le(e.onFocusOutside,u=>{u.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Le(e.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:Le(e.onKeyDown,u=>{var m;const h=u.currentTarget.contains(u.target),f=Uoe[l.dir].includes(u.key);h&&f&&(i.onOpenChange(!1),(m=o.trigger)==null||m.focus(),u.preventDefault())})})})})})});iB.displayName=aB;function lB(e){return e?"open":"closed"}function Tb(e){return e==="indeterminate"}function xT(e){return Tb(e)?"indeterminate":e?"checked":"unchecked"}function ice(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function lce(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function oce(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let l=lce(e,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==n));const c=l.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function cce(e,t){const{x:n,y:s}=e;let a=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const o=t[i].x,c=t[i].y,d=t[l].x,u=t[l].y;c>s!=u>s&&n<(d-o)*(s-c)/(u-c)+o&&(a=!a)}return a}function dce(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return cce(n,t)}function eg(e){return t=>t.pointerType==="mouse"?e(t):void 0}var uce=z9,hce=dT,fce=q9,mce=W9,pce=mT,xce=H9,gce=d1,vce=G9,yce=X9,bce=Q9,jce=eB,wce=tB,Nce=rB,kce=sB,Sce=iB,gT="DropdownMenu",[Cce,Gqe]=zn(gT,[U9]),Ms=U9(),[Pce,oB]=Cce(gT),cB=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:a,defaultOpen:i,onOpenChange:l,modal:o=!0}=e,c=Ms(t),d=v.useRef(null),[u=!1,h]=Di({prop:a,defaultProp:i,onChange:l});return r.jsx(Pce,{scope:t,triggerId:Qn(),triggerRef:d,contentId:Qn(),open:u,onOpenChange:h,onOpenToggle:v.useCallback(()=>h(f=>!f),[h]),modal:o,children:r.jsx(uce,{...c,open:u,onOpenChange:h,dir:s,modal:o,children:n})})};cB.displayName=gT;var dB="DropdownMenuTrigger",uB=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...a}=e,i=oB(dB,n),l=Ms(n);return r.jsx(hce,{asChild:!0,...l,children:r.jsx(Xe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:No(t,i.triggerRef),onPointerDown:Le(e.onPointerDown,o=>{!s&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:Le(e.onKeyDown,o=>{s||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});uB.displayName=dB;var _ce="DropdownMenuPortal",hB=e=>{const{__scopeDropdownMenu:t,...n}=e,s=Ms(t);return r.jsx(fce,{...s,...n})};hB.displayName=_ce;var fB="DropdownMenuContent",mB=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=oB(fB,n),i=Ms(n),l=v.useRef(!1);return r.jsx(mce,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...s,ref:t,onCloseAutoFocus:Le(e.onCloseAutoFocus,o=>{var c;l.current||(c=a.triggerRef.current)==null||c.focus(),l.current=!1,o.preventDefault()}),onInteractOutside:Le(e.onInteractOutside,o=>{const c=o.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});mB.displayName=fB;var Ace="DropdownMenuGroup",Tce=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ms(n);return r.jsx(pce,{...a,...s,ref:t})});Tce.displayName=Ace;var Ece="DropdownMenuLabel",pB=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ms(n);return r.jsx(xce,{...a,...s,ref:t})});pB.displayName=Ece;var Oce="DropdownMenuItem",xB=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ms(n);return r.jsx(gce,{...a,...s,ref:t})});xB.displayName=Oce;var Rce="DropdownMenuCheckboxItem",gB=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ms(n);return r.jsx(vce,{...a,...s,ref:t})});gB.displayName=Rce;var Dce="DropdownMenuRadioGroup",Mce=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ms(n);return r.jsx(yce,{...a,...s,ref:t})});Mce.displayName=Dce;var $ce="DropdownMenuRadioItem",vB=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ms(n);return r.jsx(bce,{...a,...s,ref:t})});vB.displayName=$ce;var Ice="DropdownMenuItemIndicator",yB=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ms(n);return r.jsx(jce,{...a,...s,ref:t})});yB.displayName=Ice;var Fce="DropdownMenuSeparator",bB=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ms(n);return r.jsx(wce,{...a,...s,ref:t})});bB.displayName=Fce;var Lce="DropdownMenuArrow",Uce=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ms(n);return r.jsx(Nce,{...a,...s,ref:t})});Uce.displayName=Lce;var Bce="DropdownMenuSubTrigger",jB=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ms(n);return r.jsx(kce,{...a,...s,ref:t})});jB.displayName=Bce;var zce="DropdownMenuSubContent",wB=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ms(n);return r.jsx(Sce,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});wB.displayName=zce;var Vce=cB,qce=uB,Wce=hB,NB=mB,kB=pB,SB=xB,CB=gB,PB=vB,_B=yB,AB=bB,TB=jB,EB=wB;const Xs=Vce,Zs=qce,Hce=v.forwardRef(({className:e,inset:t,children:n,...s},a)=>r.jsxs(TB,{ref:a,className:Ee("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s,children:[n,r.jsx(Zc,{className:"ml-auto"})]}));Hce.displayName=TB.displayName;const Kce=v.forwardRef(({className:e,...t},n)=>r.jsx(EB,{ref:n,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));Kce.displayName=EB.displayName;const Es=v.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(Wce,{children:r.jsx(NB,{ref:s,sideOffset:t,className:Ee("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Es.displayName=NB.displayName;const Lt=v.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(SB,{ref:s,className:Ee("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));Lt.displayName=SB.displayName;const OB=v.forwardRef(({className:e,children:t,checked:n,...s},a)=>r.jsxs(CB,{ref:a,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(_B,{children:r.jsx(on,{className:"h-4 w-4"})})}),t]}));OB.displayName=CB.displayName;const Gce=v.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(PB,{ref:s,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(_B,{children:r.jsx(Vre,{className:"h-2 w-2 fill-current"})})}),t]}));Gce.displayName=PB.displayName;const vT=v.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(kB,{ref:s,className:Ee("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));vT.displayName=kB.displayName;const qf=v.forwardRef(({className:e,...t},n)=>r.jsx(AB,{ref:n,className:Ee("-mx-1 my-1 h-px bg-muted",e),...t}));qf.displayName=AB.displayName;var yT="Avatar",[Yce,Yqe]=zn(yT),[Xce,RB]=Yce(yT),DB=v.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[a,i]=v.useState("idle");return r.jsx(Xce,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:r.jsx(Xe.span,{...s,ref:t})})});DB.displayName=yT;var MB="AvatarImage",$B=v.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:a=()=>{},...i}=e,l=RB(MB,n),o=Zce(s,i),c=zr(d=>{a(d),l.onImageLoadingStatusChange(d)});return pn(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?r.jsx(Xe.img,{...i,ref:t,src:s}):null});$B.displayName=MB;var IB="AvatarFallback",FB=v.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...a}=e,i=RB(IB,n),[l,o]=v.useState(s===void 0);return v.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>o(!0),s);return()=>window.clearTimeout(c)}},[s]),l&&i.imageLoadingStatus!=="loaded"?r.jsx(Xe.span,{...a,ref:t}):null});FB.displayName=IB;function kD(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Zce(e,{referrerPolicy:t,crossOrigin:n}){const s=Jce(),a=v.useRef(null),i=s?(a.current||(a.current=new window.Image),a.current):null,[l,o]=v.useState(()=>kD(i,e));return pn(()=>{o(kD(i,e))},[i,e]),pn(()=>{const c=h=>()=>{o(h)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,n,t]),l}function Qce(){return()=>{}}function Jce(){return v.useSyncExternalStore(Qce,()=>!0,()=>!1)}var LB=DB,UB=$B,BB=FB;const bT=v.forwardRef(({className:e,...t},n)=>r.jsx(LB,{ref:n,className:Ee("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));bT.displayName=LB.displayName;const jT=v.forwardRef(({className:e,...t},n)=>r.jsx(UB,{ref:n,className:Ee("aspect-square h-full w-full",e),...t}));jT.displayName=UB.displayName;const wT=v.forwardRef(({className:e,...t},n)=>r.jsx(BB,{ref:n,className:Ee("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));wT.displayName=BB.displayName;function Kv(){const{setTheme:e}=f9(),{t}=Wt();return r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsxs(D,{variant:"outline",size:"icon",title:t("common.settings"),children:[r.jsx(WR,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),r.jsx(qR,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),r.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),r.jsxs(Es,{align:"end",children:[r.jsxs(Lt,{onClick:()=>e("light"),children:[r.jsx(WR,{className:"mr-2 h-4 w-4"}),t("theme.light")]}),r.jsxs(Lt,{onClick:()=>e("dark"),children:[r.jsx(qR,{className:"mr-2 h-4 w-4"}),t("theme.dark")]}),r.jsxs(Lt,{onClick:()=>e("system"),children:[r.jsx(tu,{className:"mr-2 h-4 w-4"}),t("theme.system")]})]})]})}function ede(){const{user:e,logout:t}=tr(),{t:n,i18n:s}=Wt(),[,a]=Bn();v.useEffect(()=>{s.language!=="ru"&&(localStorage.setItem("i18nextLng","ru"),s.changeLanguage("ru"))},[s]);const{data:i=[]}=Fe({queryKey:["/api/notifications"],enabled:!!(e!=null&&e.id),refetchInterval:3e4}),l=i.filter(m=>!m.is_read).length,{data:o}=Fe({queryKey:["/api/partner/finance/summary"],enabled:!!e&&e.role==="affiliate",refetchInterval:3e4}),c=()=>{t()},d=()=>{(e==null?void 0:e.role)==="advertiser"?a("/advertiser/notifications"):(e==null?void 0:e.role)==="affiliate"&&a("/affiliate/notifications")},u=()=>{console.log("Settings clicked")},h=()=>{console.log("Support clicked")};if(!e)return null;const f=e.firstName&&e.lastName?`${e.firstName[0]}${e.lastName[0]}`:e.username[0].toUpperCase();return r.jsx("header",{className:"border-b bg-background",children:r.jsxs("div",{className:"flex h-16 items-center justify-between px-6",children:[r.jsx("div",{className:"flex items-center"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Kv,{}),e.role==="affiliate"&&r.jsxs("div",{className:"hidden lg:flex items-center space-x-3",children:[r.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 px-3 py-1.5 rounded-lg border border-green-200 dark:border-green-700",children:[r.jsx(Rt,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),r.jsxs("span",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:["$",o?o.balance.toFixed(2):"0.00"]}),r.jsx("span",{className:"text-xs text-green-600/80 dark:text-green-400/80 font-medium",children:n("finances.balance")})]}),r.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-900/30 dark:to-yellow-900/30 px-3 py-1.5 rounded-lg border border-amber-200 dark:border-amber-700",children:[r.jsx(Rt,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),r.jsxs("span",{className:"font-bold text-lg text-amber-700 dark:text-amber-300",children:["$",o?o.pendingPayouts.toFixed(2):"0.00"]}),r.jsx("span",{className:"text-xs text-amber-600/80 dark:text-amber-400/80 font-medium",children:n("finances.pending")})]})]}),e.role==="affiliate"&&r.jsx("div",{className:"flex lg:hidden items-center space-x-2",children:r.jsxs("div",{className:"flex items-center space-x-1 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 px-2 py-1 rounded-lg border border-green-200 dark:border-green-700",children:[r.jsx(Rt,{className:"h-3 w-3 text-green-600 dark:text-green-400"}),r.jsxs("span",{className:"font-bold text-sm text-green-700 dark:text-green-300",children:["$",o?o.balance.toFixed(0):"0"]})]})}),r.jsxs("div",{className:"hidden md:flex items-center space-x-2 text-sm text-muted-foreground",children:[r.jsx(Mh,{className:"h-4 w-4"}),r.jsx("span",{children:e.email})]}),r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsx(D,{variant:"ghost",className:"relative h-8 w-8 rounded-full","data-testid":"button-user-menu",children:r.jsxs(bT,{className:"h-8 w-8",children:[r.jsx(jT,{src:void 0,alt:e.username}),r.jsx(wT,{children:f})]})})}),r.jsxs(Es,{className:"w-56",align:"end",forceMount:!0,children:[r.jsx(vT,{className:"font-normal",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("p",{className:"text-sm font-medium leading-none",children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.username}),r.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email}),r.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.role==="affiliate"?"Партнёр":e.role==="advertiser"?"Рекламодатель":e.role})]})}),r.jsx(qf,{}),r.jsxs(Lt,{children:[r.jsx(Oo,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Профиль"})]})]})]}),r.jsxs(D,{variant:"ghost",size:"icon",className:"relative hover:bg-blue-50 dark:hover:bg-blue-900/20",onClick:d,title:`Уведомления${l>0?` (${l} непрочитанных)`:""}`,"data-testid":"button-notifications",children:[r.jsx($n,{className:`h-5 w-5 ${l>0?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`}),l>0&&r.jsx(ie,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs font-bold bg-red-500 hover:bg-red-600 animate-pulse",children:l>99?"99+":l})]}),r.jsx(D,{variant:"ghost",size:"icon",onClick:u,title:"Настройки","data-testid":"button-settings",children:r.jsx(fr,{className:"h-5 w-5"})}),r.jsx(D,{variant:"ghost",size:"icon",onClick:h,title:"Поддержка","data-testid":"button-support",children:r.jsx(Lv,{className:"h-5 w-5"})}),r.jsx(D,{variant:"ghost",size:"icon",onClick:c,title:"Выход","data-testid":"button-logout",children:r.jsx(Uv,{className:"h-5 w-5"})})]})]})})}function Lr({children:e}){const{user:t}=tr(),{collapsed:n,sidebarWidth:s}=Qs(),[a,i]=v.useState(!1),[l,o]=v.useState(!1);return v.useEffect(()=>{const c=()=>{i(window.innerWidth<768)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),t?r.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(ede,{}),a&&l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>o(!1)}),r.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[r.jsxs("div",{className:Ee("transition-all duration-300 ease-in-out z-50",a?"absolute inset-y-0 left-0":"relative",a&&!l&&"-translate-x-full"),children:[t.role==="advertiser"&&r.jsx(Ele,{isMobile:a,onClose:()=>o(!1)},`sidebar-${t.id}`),t.role==="affiliate"&&r.jsx(Rle,{isMobile:a,onClose:()=>o(!1)},`sidebar-${t.id}`)]}),r.jsx("main",{className:Ee("flex-1 overflow-auto transition-all duration-300 ease-in-out",a?"w-full":""),style:a?{}:{"--sidebar-width":`${s}px`,width:`calc(100vw - ${s}px)`,maxWidth:`calc(100vw - ${s}px)`},children:r.jsx("div",{className:"w-full h-full",children:r.jsxs("div",{className:Ee("w-full py-4 px-4","sm:py-6",!a&&t.role==="affiliate"&&"sm:px-8 lg:px-12"),children:[a&&r.jsx("button",{onClick:()=>o(!0),className:"mb-4 p-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm md:hidden","data-testid":"button-mobile-menu",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e]})})})]})]}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"text-lg",children:"Загрузка..."})})}function tde(){return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"404"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Page not found"}),r.jsx("a",{href:"/",className:"mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go Home"})]})})}var NT="Progress",kT=100,[rde,Xqe]=zn(NT),[nde,sde]=rde(NT),zB=v.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:a,getValueLabel:i=ade,...l}=e;(a||a===0)&&!SD(a)&&console.error(ide(`${a}`,"Progress"));const o=SD(a)?a:kT;s!==null&&!CD(s,o)&&console.error(lde(`${s}`,"Progress"));const c=CD(s,o)?s:null,d=Eb(c)?i(c,o):void 0;return r.jsx(nde,{scope:n,value:c,max:o,children:r.jsx(Xe.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Eb(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":WB(c,o),"data-value":c??void 0,"data-max":o,...l,ref:t})})});zB.displayName=NT;var VB="ProgressIndicator",qB=v.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,a=sde(VB,n);return r.jsx(Xe.div,{"data-state":WB(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});qB.displayName=VB;function ade(e,t){return`${Math.round(e/t*100)}%`}function WB(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Eb(e){return typeof e=="number"}function SD(e){return Eb(e)&&!isNaN(e)&&e>0}function CD(e,t){return Eb(e)&&!isNaN(e)&&e<=t&&e>=0}function ide(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${kT}\`.`}function lde(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${kT} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var HB=zB,ode=qB;const ru=v.forwardRef(({className:e,value:t,...n},s)=>r.jsx(HB,{ref:s,className:Ee("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:r.jsx(ode,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));ru.displayName=HB.displayName;function tg(e,[t,n]){return Math.min(n,Math.max(t,e))}function u1(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var cde=[" ","Enter","ArrowUp","ArrowDown"],dde=[" ","Enter"],Gv="Select",[h1,f1,ude]=$v(Gv),[Fm,Zqe]=zn(Gv,[ude,Jc]),m1=Jc(),[hde,ed]=Fm(Gv),[fde,mde]=Fm(Gv),KB=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:a,onOpenChange:i,value:l,defaultValue:o,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:f,required:m,form:g}=e,x=m1(t),[w,j]=v.useState(null),[y,b]=v.useState(null),[p,N]=v.useState(!1),k=Im(d),[S=!1,P]=Di({prop:s,defaultProp:a,onChange:i}),[_,R]=Di({prop:l,defaultProp:o,onChange:c}),O=v.useRef(null),M=w?g||!!w.closest("form"):!0,[A,T]=v.useState(new Set),B=Array.from(A).map(z=>z.props.value).join(";");return r.jsx(nT,{...x,children:r.jsxs(hde,{required:m,scope:t,trigger:w,onTriggerChange:j,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:p,onValueNodeHasChildrenChange:N,contentId:Qn(),value:_,onValueChange:R,open:S,onOpenChange:P,dir:k,triggerPointerDownPosRef:O,disabled:f,children:[r.jsx(h1.Provider,{scope:t,children:r.jsx(fde,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(z=>{T(U=>new Set(U).add(z))},[]),onNativeOptionRemove:v.useCallback(z=>{T(U=>{const E=new Set(U);return E.delete(z),E})},[]),children:n})}),M?r.jsxs(v7,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:h,value:_,onChange:z=>R(z.target.value),disabled:f,form:g,children:[_===void 0?r.jsx("option",{value:""}):null,Array.from(A)]},B):null]})})};KB.displayName=Gv;var GB="SelectTrigger",YB=v.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...a}=e,i=m1(n),l=ed(GB,n),o=l.disabled||s,c=jt(t,l.onTriggerChange),d=f1(n),u=v.useRef("touch"),[h,f,m]=y7(x=>{const w=d().filter(b=>!b.disabled),j=w.find(b=>b.value===l.value),y=b7(w,x,j);y!==void 0&&l.onValueChange(y.value)}),g=x=>{o||(l.onOpenChange(!0),m()),x&&(l.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return r.jsx(zv,{asChild:!0,...i,children:r.jsx(Xe.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":g7(l.value)?"":void 0,...a,ref:c,onClick:Le(a.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&g(x)}),onPointerDown:Le(a.onPointerDown,x=>{u.current=x.pointerType;const w=x.target;w.hasPointerCapture(x.pointerId)&&w.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(g(x),x.preventDefault())}),onKeyDown:Le(a.onKeyDown,x=>{const w=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&f(x.key),!(w&&x.key===" ")&&cde.includes(x.key)&&(g(),x.preventDefault())})})})});YB.displayName=GB;var XB="SelectValue",ZB=v.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,children:i,placeholder:l="",...o}=e,c=ed(XB,n),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,h=jt(t,c.onValueNodeChange);return pn(()=>{d(u)},[d,u]),r.jsx(Xe.span,{...o,ref:h,style:{pointerEvents:"none"},children:g7(c.value)?r.jsx(r.Fragment,{children:l}):i})});ZB.displayName=XB;var pde="SelectIcon",QB=v.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...a}=e;return r.jsx(Xe.span,{"aria-hidden":!0,...a,ref:t,children:s||"▼"})});QB.displayName=pde;var xde="SelectPortal",JB=e=>r.jsx(Em,{asChild:!0,...e});JB.displayName=xde;var vu="SelectContent",e7=v.forwardRef((e,t)=>{const n=ed(vu,e.__scopeSelect),[s,a]=v.useState();if(pn(()=>{a(new DocumentFragment)},[]),!n.open){const i=s;return i?La.createPortal(r.jsx(t7,{scope:e.__scopeSelect,children:r.jsx(h1.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),i):null}return r.jsx(r7,{...e,ref:t})});e7.displayName=vu;var ni=10,[t7,td]=Fm(vu),gde="SelectContentImpl",vde=Ic("SelectContent.RemoveScroll"),r7=v.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:g,hideWhenDetached:x,avoidCollisions:w,...j}=e,y=ed(vu,n),[b,p]=v.useState(null),[N,k]=v.useState(null),S=jt(t,ke=>p(ke)),[P,_]=v.useState(null),[R,O]=v.useState(null),M=f1(n),[A,T]=v.useState(!1),B=v.useRef(!1);v.useEffect(()=>{if(b)return l1(b)},[b]),s1();const z=v.useCallback(ke=>{const[be,...pe]=M().map(ae=>ae.ref.current),[le]=pe.slice(-1),Ie=document.activeElement;for(const ae of ke)if(ae===Ie||(ae==null||ae.scrollIntoView({block:"nearest"}),ae===be&&N&&(N.scrollTop=0),ae===le&&N&&(N.scrollTop=N.scrollHeight),ae==null||ae.focus(),document.activeElement!==Ie))return},[M,N]),U=v.useCallback(()=>z([P,b]),[z,P,b]);v.useEffect(()=>{A&&U()},[A,U]);const{onOpenChange:E,triggerPointerDownPosRef:$}=y;v.useEffect(()=>{if(b){let ke={x:0,y:0};const be=le=>{var Ie,ae;ke={x:Math.abs(Math.round(le.pageX)-(((Ie=$.current)==null?void 0:Ie.x)??0)),y:Math.abs(Math.round(le.pageY)-(((ae=$.current)==null?void 0:ae.y)??0))}},pe=le=>{ke.x<=10&&ke.y<=10?le.preventDefault():b.contains(le.target)||E(!1),document.removeEventListener("pointermove",be),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",be),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",be),document.removeEventListener("pointerup",pe,{capture:!0})}}},[b,E,$]),v.useEffect(()=>{const ke=()=>E(!1);return window.addEventListener("blur",ke),window.addEventListener("resize",ke),()=>{window.removeEventListener("blur",ke),window.removeEventListener("resize",ke)}},[E]);const[G,oe]=y7(ke=>{const be=M().filter(Ie=>!Ie.disabled),pe=be.find(Ie=>Ie.ref.current===document.activeElement),le=b7(be,ke,pe);le&&setTimeout(()=>le.ref.current.focus())}),ee=v.useCallback((ke,be,pe)=>{const le=!B.current&&!pe;(y.value!==void 0&&y.value===be||le)&&(_(ke),le&&(B.current=!0))},[y.value]),ce=v.useCallback(()=>b==null?void 0:b.focus(),[b]),ye=v.useCallback((ke,be,pe)=>{const le=!B.current&&!pe;(y.value!==void 0&&y.value===be||le)&&O(ke)},[y.value]),je=s==="popper"?eC:n7,$e=je===eC?{side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:g,hideWhenDetached:x,avoidCollisions:w}:{};return r.jsx(t7,{scope:n,content:b,viewport:N,onViewportChange:k,itemRefCallback:ee,selectedItem:P,onItemLeave:ce,itemTextRefCallback:ye,focusSelectedItem:U,selectedItemText:R,position:s,isPositioned:A,searchRef:G,children:r.jsx(qv,{as:vde,allowPinchZoom:!0,children:r.jsx(Vv,{asChild:!0,trapped:y.open,onMountAutoFocus:ke=>{ke.preventDefault()},onUnmountAutoFocus:Le(a,ke=>{var be;(be=y.trigger)==null||be.focus({preventScroll:!0}),ke.preventDefault()}),children:r.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:ke=>ke.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:r.jsx(je,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:ke=>ke.preventDefault(),...j,...$e,onPlaced:()=>T(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:Le(j.onKeyDown,ke=>{const be=ke.ctrlKey||ke.altKey||ke.metaKey;if(ke.key==="Tab"&&ke.preventDefault(),!be&&ke.key.length===1&&oe(ke.key),["ArrowUp","ArrowDown","Home","End"].includes(ke.key)){let le=M().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current);if(["ArrowUp","End"].includes(ke.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(ke.key)){const Ie=ke.target,ae=le.indexOf(Ie);le=le.slice(ae+1)}setTimeout(()=>z(le)),ke.preventDefault()}})})})})})})});r7.displayName=gde;var yde="SelectItemAlignedPosition",n7=v.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...a}=e,i=ed(vu,n),l=td(vu,n),[o,c]=v.useState(null),[d,u]=v.useState(null),h=jt(t,S=>u(S)),f=f1(n),m=v.useRef(!1),g=v.useRef(!0),{viewport:x,selectedItem:w,selectedItemText:j,focusSelectedItem:y}=l,b=v.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&d&&x&&w&&j){const S=i.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),_=i.valueNode.getBoundingClientRect(),R=j.getBoundingClientRect();if(i.dir!=="rtl"){const Ie=R.left-P.left,ae=_.left-Ie,st=S.left-ae,K=S.width+st,Me=Math.max(K,P.width),de=window.innerWidth-ni,Be=tg(ae,[ni,Math.max(ni,de-Me)]);o.style.minWidth=K+"px",o.style.left=Be+"px"}else{const Ie=P.right-R.right,ae=window.innerWidth-_.right-Ie,st=window.innerWidth-S.right-ae,K=S.width+st,Me=Math.max(K,P.width),de=window.innerWidth-ni,Be=tg(ae,[ni,Math.max(ni,de-Me)]);o.style.minWidth=K+"px",o.style.right=Be+"px"}const O=f(),M=window.innerHeight-ni*2,A=x.scrollHeight,T=window.getComputedStyle(d),B=parseInt(T.borderTopWidth,10),z=parseInt(T.paddingTop,10),U=parseInt(T.borderBottomWidth,10),E=parseInt(T.paddingBottom,10),$=B+z+A+E+U,G=Math.min(w.offsetHeight*5,$),oe=window.getComputedStyle(x),ee=parseInt(oe.paddingTop,10),ce=parseInt(oe.paddingBottom,10),ye=S.top+S.height/2-ni,je=M-ye,$e=w.offsetHeight/2,ke=w.offsetTop+$e,be=B+z+ke,pe=$-be;if(be<=ye){const Ie=O.length>0&&w===O[O.length-1].ref.current;o.style.bottom="0px";const ae=d.clientHeight-x.offsetTop-x.offsetHeight,st=Math.max(je,$e+(Ie?ce:0)+ae+U),K=be+st;o.style.height=K+"px"}else{const Ie=O.length>0&&w===O[0].ref.current;o.style.top="0px";const st=Math.max(ye,B+x.offsetTop+(Ie?ee:0)+$e)+pe;o.style.height=st+"px",x.scrollTop=be-ye+x.offsetTop}o.style.margin=`${ni}px 0`,o.style.minHeight=G+"px",o.style.maxHeight=M+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[f,i.trigger,i.valueNode,o,d,x,w,j,i.dir,s]);pn(()=>b(),[b]);const[p,N]=v.useState();pn(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const k=v.useCallback(S=>{S&&g.current===!0&&(b(),y==null||y(),g.current=!1)},[b,y]);return r.jsx(jde,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:k,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:p},children:r.jsx(Xe.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});n7.displayName=yde;var bde="SelectPopperPosition",eC=v.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:a=ni,...i}=e,l=m1(n);return r.jsx(Zw,{...l,...i,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});eC.displayName=bde;var[jde,ST]=Fm(vu,{}),tC="SelectViewport",s7=v.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...a}=e,i=td(tC,n),l=ST(tC,n),o=jt(t,i.onViewportChange),c=v.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(h1.Slot,{scope:n,children:r.jsx(Xe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Le(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=l;if(f!=null&&f.current&&h){const m=Math.abs(c.current-u.scrollTop);if(m>0){const g=window.innerHeight-ni*2,x=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),j=Math.max(x,w);if(j<g){const y=j+m,b=Math.min(g,y),p=y-b;h.style.height=b+"px",h.style.bottom==="0px"&&(u.scrollTop=p>0?p:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});s7.displayName=tC;var a7="SelectGroup",[wde,Nde]=Fm(a7),kde=v.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Qn();return r.jsx(wde,{scope:n,id:a,children:r.jsx(Xe.div,{role:"group","aria-labelledby":a,...s,ref:t})})});kde.displayName=a7;var i7="SelectLabel",l7=v.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Nde(i7,n);return r.jsx(Xe.div,{id:a.id,...s,ref:t})});l7.displayName=i7;var Ob="SelectItem",[Sde,o7]=Fm(Ob),c7=v.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:a=!1,textValue:i,...l}=e,o=ed(Ob,n),c=td(Ob,n),d=o.value===s,[u,h]=v.useState(i??""),[f,m]=v.useState(!1),g=jt(t,y=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,y,s,a)}),x=Qn(),w=v.useRef("touch"),j=()=>{a||(o.onValueChange(s),o.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(Sde,{scope:n,value:s,disabled:a,textId:x,isSelected:d,onItemTextChange:v.useCallback(y=>{h(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:r.jsx(h1.ItemSlot,{scope:n,value:s,disabled:a,textValue:u,children:r.jsx(Xe.div,{role:"option","aria-labelledby":x,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:g,onFocus:Le(l.onFocus,()=>m(!0)),onBlur:Le(l.onBlur,()=>m(!1)),onClick:Le(l.onClick,()=>{w.current!=="mouse"&&j()}),onPointerUp:Le(l.onPointerUp,()=>{w.current==="mouse"&&j()}),onPointerDown:Le(l.onPointerDown,y=>{w.current=y.pointerType}),onPointerMove:Le(l.onPointerMove,y=>{var b;w.current=y.pointerType,a?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Le(l.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Le(l.onKeyDown,y=>{var p;((p=c.searchRef)==null?void 0:p.current)!==""&&y.key===" "||(dde.includes(y.key)&&j(),y.key===" "&&y.preventDefault())})})})})});c7.displayName=Ob;var qp="SelectItemText",d7=v.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,...i}=e,l=ed(qp,n),o=td(qp,n),c=o7(qp,n),d=mde(qp,n),[u,h]=v.useState(null),f=jt(t,j=>h(j),c.onItemTextChange,j=>{var y;return(y=o.itemTextRefCallback)==null?void 0:y.call(o,j,c.value,c.disabled)}),m=u==null?void 0:u.textContent,g=v.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:x,onNativeOptionRemove:w}=d;return pn(()=>(x(g),()=>w(g)),[x,w,g]),r.jsxs(r.Fragment,{children:[r.jsx(Xe.span,{id:c.textId,...i,ref:f}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?La.createPortal(i.children,l.valueNode):null]})});d7.displayName=qp;var u7="SelectItemIndicator",h7=v.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return o7(u7,n).isSelected?r.jsx(Xe.span,{"aria-hidden":!0,...s,ref:t}):null});h7.displayName=u7;var rC="SelectScrollUpButton",f7=v.forwardRef((e,t)=>{const n=td(rC,e.__scopeSelect),s=ST(rC,e.__scopeSelect),[a,i]=v.useState(!1),l=jt(t,s.onScrollButtonChange);return pn(()=>{if(n.viewport&&n.isPositioned){let o=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?r.jsx(p7,{...e,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});f7.displayName=rC;var nC="SelectScrollDownButton",m7=v.forwardRef((e,t)=>{const n=td(nC,e.__scopeSelect),s=ST(nC,e.__scopeSelect),[a,i]=v.useState(!1),l=jt(t,s.onScrollButtonChange);return pn(()=>{if(n.viewport&&n.isPositioned){let o=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?r.jsx(p7,{...e,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});m7.displayName=nC;var p7=v.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...a}=e,i=td("SelectScrollButton",n),l=v.useRef(null),o=f1(n),c=v.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return v.useEffect(()=>()=>c(),[c]),pn(()=>{var u;const d=o().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),r.jsx(Xe.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Le(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(s,50))}),onPointerMove:Le(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),l.current===null&&(l.current=window.setInterval(s,50))}),onPointerLeave:Le(a.onPointerLeave,()=>{c()})})}),Cde="SelectSeparator",x7=v.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(Xe.div,{"aria-hidden":!0,...s,ref:t})});x7.displayName=Cde;var sC="SelectArrow",Pde=v.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=m1(n),i=ed(sC,n),l=td(sC,n);return i.open&&l.position==="popper"?r.jsx(Qw,{...a,...s,ref:t}):null});Pde.displayName=sC;function g7(e){return e===""||e===void 0}var v7=v.forwardRef((e,t)=>{const{value:n,...s}=e,a=v.useRef(null),i=jt(t,a),l=u1(n);return v.useEffect(()=>{const o=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==n&&u){const h=new Event("change",{bubbles:!0});u.call(o,n),o.dispatchEvent(h)}},[l,n]),r.jsx(Iv,{asChild:!0,children:r.jsx("select",{...s,ref:i,defaultValue:n})})});v7.displayName="BubbleSelect";function y7(e){const t=zr(e),n=v.useRef(""),s=v.useRef(0),a=v.useCallback(l=>{const o=n.current+l;t(o),function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(o)},[t]),i=v.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,a,i]}function b7(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let l=_de(e,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==n));const c=l.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function _de(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var Ade=KB,j7=YB,Tde=ZB,Ede=QB,Ode=JB,w7=e7,Rde=s7,N7=l7,k7=c7,Dde=d7,Mde=h7,S7=f7,C7=m7,P7=x7;const fe=Ade,me=Tde,ue=v.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(j7,{ref:s,className:Ee("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(Ede,{asChild:!0,children:r.jsx(NU,{className:"h-4 w-4 opacity-50"})})]}));ue.displayName=j7.displayName;const _7=v.forwardRef(({className:e,...t},n)=>r.jsx(S7,{ref:n,className:Ee("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Lre,{className:"h-4 w-4"})}));_7.displayName=S7.displayName;const A7=v.forwardRef(({className:e,...t},n)=>r.jsx(C7,{ref:n,className:Ee("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(NU,{className:"h-4 w-4"})}));A7.displayName=C7.displayName;const he=v.forwardRef(({className:e,children:t,position:n="popper",...s},a)=>r.jsx(Ode,{children:r.jsxs(w7,{ref:a,className:Ee("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(_7,{}),r.jsx(Rde,{className:Ee("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(A7,{})]})}));he.displayName=w7.displayName;const $de=v.forwardRef(({className:e,...t},n)=>r.jsx(N7,{ref:n,className:Ee("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));$de.displayName=N7.displayName;const C=v.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(k7,{ref:s,className:Ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(Mde,{children:r.jsx(on,{className:"h-4 w-4"})})}),r.jsx(Dde,{children:t})]}));C.displayName=k7.displayName;const Ide=v.forwardRef(({className:e,...t},n)=>r.jsx(P7,{ref:n,className:Ee("-mx-1 my-1 h-px bg-muted",e),...t}));Ide.displayName=P7.displayName;var Fde=Array.isArray,Js=Fde,Lde=typeof vy=="object"&&vy&&vy.Object===Object&&vy,T7=Lde,Ude=T7,Bde=typeof self=="object"&&self&&self.Object===Object&&self,zde=Ude||Bde||Function("return this")(),Ml=zde,Vde=Ml,qde=Vde.Symbol,Yv=qde,PD=Yv,E7=Object.prototype,Wde=E7.hasOwnProperty,Hde=E7.toString,jp=PD?PD.toStringTag:void 0;function Kde(e){var t=Wde.call(e,jp),n=e[jp];try{e[jp]=void 0;var s=!0}catch{}var a=Hde.call(e);return s&&(t?e[jp]=n:delete e[jp]),a}var Gde=Kde,Yde=Object.prototype,Xde=Yde.toString;function Zde(e){return Xde.call(e)}var Qde=Zde,_D=Yv,Jde=Gde,eue=Qde,tue="[object Null]",rue="[object Undefined]",AD=_D?_D.toStringTag:void 0;function nue(e){return e==null?e===void 0?rue:tue:AD&&AD in Object(e)?Jde(e):eue(e)}var Ro=nue;function sue(e){return e!=null&&typeof e=="object"}var Do=sue,aue=Ro,iue=Do,lue="[object Symbol]";function oue(e){return typeof e=="symbol"||iue(e)&&aue(e)==lue}var Lm=oue,cue=Js,due=Lm,uue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hue=/^\w*$/;function fue(e,t){if(cue(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||due(e)?!0:hue.test(e)||!uue.test(e)||t!=null&&e in Object(t)}var CT=fue;function mue(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var rd=mue;const Um=er(rd);var pue=Ro,xue=rd,gue="[object AsyncFunction]",vue="[object Function]",yue="[object GeneratorFunction]",bue="[object Proxy]";function jue(e){if(!xue(e))return!1;var t=pue(e);return t==vue||t==yue||t==gue||t==bue}var PT=jue;const xt=er(PT);var wue=Ml,Nue=wue["__core-js_shared__"],kue=Nue,xk=kue,TD=function(){var e=/[^.]+$/.exec(xk&&xk.keys&&xk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Sue(e){return!!TD&&TD in e}var Cue=Sue,Pue=Function.prototype,_ue=Pue.toString;function Aue(e){if(e!=null){try{return _ue.call(e)}catch{}try{return e+""}catch{}}return""}var O7=Aue,Tue=PT,Eue=Cue,Oue=rd,Rue=O7,Due=/[\\^$.*+?()[\]{}|]/g,Mue=/^\[object .+?Constructor\]$/,$ue=Function.prototype,Iue=Object.prototype,Fue=$ue.toString,Lue=Iue.hasOwnProperty,Uue=RegExp("^"+Fue.call(Lue).replace(Due,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Bue(e){if(!Oue(e)||Eue(e))return!1;var t=Tue(e)?Uue:Mue;return t.test(Rue(e))}var zue=Bue;function Vue(e,t){return e==null?void 0:e[t]}var que=Vue,Wue=zue,Hue=que;function Kue(e,t){var n=Hue(e,t);return Wue(n)?n:void 0}var Fu=Kue,Gue=Fu,Yue=Gue(Object,"create"),p1=Yue,ED=p1;function Xue(){this.__data__=ED?ED(null):{},this.size=0}var Zue=Xue;function Que(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Jue=Que,ehe=p1,the="__lodash_hash_undefined__",rhe=Object.prototype,nhe=rhe.hasOwnProperty;function she(e){var t=this.__data__;if(ehe){var n=t[e];return n===the?void 0:n}return nhe.call(t,e)?t[e]:void 0}var ahe=she,ihe=p1,lhe=Object.prototype,ohe=lhe.hasOwnProperty;function che(e){var t=this.__data__;return ihe?t[e]!==void 0:ohe.call(t,e)}var dhe=che,uhe=p1,hhe="__lodash_hash_undefined__";function fhe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=uhe&&t===void 0?hhe:t,this}var mhe=fhe,phe=Zue,xhe=Jue,ghe=ahe,vhe=dhe,yhe=mhe;function Bm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Bm.prototype.clear=phe;Bm.prototype.delete=xhe;Bm.prototype.get=ghe;Bm.prototype.has=vhe;Bm.prototype.set=yhe;var bhe=Bm;function jhe(){this.__data__=[],this.size=0}var whe=jhe;function Nhe(e,t){return e===t||e!==e&&t!==t}var _T=Nhe,khe=_T;function She(e,t){for(var n=e.length;n--;)if(khe(e[n][0],t))return n;return-1}var x1=She,Che=x1,Phe=Array.prototype,_he=Phe.splice;function Ahe(e){var t=this.__data__,n=Che(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():_he.call(t,n,1),--this.size,!0}var The=Ahe,Ehe=x1;function Ohe(e){var t=this.__data__,n=Ehe(t,e);return n<0?void 0:t[n][1]}var Rhe=Ohe,Dhe=x1;function Mhe(e){return Dhe(this.__data__,e)>-1}var $he=Mhe,Ihe=x1;function Fhe(e,t){var n=this.__data__,s=Ihe(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var Lhe=Fhe,Uhe=whe,Bhe=The,zhe=Rhe,Vhe=$he,qhe=Lhe;function zm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}zm.prototype.clear=Uhe;zm.prototype.delete=Bhe;zm.prototype.get=zhe;zm.prototype.has=Vhe;zm.prototype.set=qhe;var g1=zm,Whe=Fu,Hhe=Ml,Khe=Whe(Hhe,"Map"),AT=Khe,OD=bhe,Ghe=g1,Yhe=AT;function Xhe(){this.size=0,this.__data__={hash:new OD,map:new(Yhe||Ghe),string:new OD}}var Zhe=Xhe;function Qhe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Jhe=Qhe,efe=Jhe;function tfe(e,t){var n=e.__data__;return efe(t)?n[typeof t=="string"?"string":"hash"]:n.map}var v1=tfe,rfe=v1;function nfe(e){var t=rfe(this,e).delete(e);return this.size-=t?1:0,t}var sfe=nfe,afe=v1;function ife(e){return afe(this,e).get(e)}var lfe=ife,ofe=v1;function cfe(e){return ofe(this,e).has(e)}var dfe=cfe,ufe=v1;function hfe(e,t){var n=ufe(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var ffe=hfe,mfe=Zhe,pfe=sfe,xfe=lfe,gfe=dfe,vfe=ffe;function Vm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Vm.prototype.clear=mfe;Vm.prototype.delete=pfe;Vm.prototype.get=xfe;Vm.prototype.has=gfe;Vm.prototype.set=vfe;var TT=Vm,R7=TT,yfe="Expected a function";function ET(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(yfe);var n=function(){var s=arguments,a=t?t.apply(this,s):s[0],i=n.cache;if(i.has(a))return i.get(a);var l=e.apply(this,s);return n.cache=i.set(a,l)||i,l};return n.cache=new(ET.Cache||R7),n}ET.Cache=R7;var D7=ET;const bfe=er(D7);var jfe=D7,wfe=500;function Nfe(e){var t=jfe(e,function(s){return n.size===wfe&&n.clear(),s}),n=t.cache;return t}var kfe=Nfe,Sfe=kfe,Cfe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pfe=/\\(\\)?/g,_fe=Sfe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Cfe,function(n,s,a,i){t.push(a?i.replace(Pfe,"$1"):s||n)}),t}),Afe=_fe;function Tfe(e,t){for(var n=-1,s=e==null?0:e.length,a=Array(s);++n<s;)a[n]=t(e[n],n,e);return a}var OT=Tfe,RD=Yv,Efe=OT,Ofe=Js,Rfe=Lm,Dfe=1/0,DD=RD?RD.prototype:void 0,MD=DD?DD.toString:void 0;function M7(e){if(typeof e=="string")return e;if(Ofe(e))return Efe(e,M7)+"";if(Rfe(e))return MD?MD.call(e):"";var t=e+"";return t=="0"&&1/e==-Dfe?"-0":t}var Mfe=M7,$fe=Mfe;function Ife(e){return e==null?"":$fe(e)}var $7=Ife,Ffe=Js,Lfe=CT,Ufe=Afe,Bfe=$7;function zfe(e,t){return Ffe(e)?e:Lfe(e,t)?[e]:Ufe(Bfe(e))}var I7=zfe,Vfe=Lm,qfe=1/0;function Wfe(e){if(typeof e=="string"||Vfe(e))return e;var t=e+"";return t=="0"&&1/e==-qfe?"-0":t}var y1=Wfe,Hfe=I7,Kfe=y1;function Gfe(e,t){t=Hfe(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[Kfe(t[n++])];return n&&n==s?e:void 0}var RT=Gfe,Yfe=RT;function Xfe(e,t,n){var s=e==null?void 0:Yfe(e,t);return s===void 0?n:s}var F7=Xfe;const ya=er(F7);function Zfe(e){return e==null}var Qfe=Zfe;const Tt=er(Qfe);var Jfe=Ro,eme=Js,tme=Do,rme="[object String]";function nme(e){return typeof e=="string"||!eme(e)&&tme(e)&&Jfe(e)==rme}var sme=nme;const yu=er(sme);var L7={exports:{}},Cr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DT=Symbol.for("react.element"),MT=Symbol.for("react.portal"),b1=Symbol.for("react.fragment"),j1=Symbol.for("react.strict_mode"),w1=Symbol.for("react.profiler"),N1=Symbol.for("react.provider"),k1=Symbol.for("react.context"),ame=Symbol.for("react.server_context"),S1=Symbol.for("react.forward_ref"),C1=Symbol.for("react.suspense"),P1=Symbol.for("react.suspense_list"),_1=Symbol.for("react.memo"),A1=Symbol.for("react.lazy"),ime=Symbol.for("react.offscreen"),U7;U7=Symbol.for("react.module.reference");function Za(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case DT:switch(e=e.type,e){case b1:case w1:case j1:case C1:case P1:return e;default:switch(e=e&&e.$$typeof,e){case ame:case k1:case S1:case A1:case _1:case N1:return e;default:return t}}case MT:return t}}}Cr.ContextConsumer=k1;Cr.ContextProvider=N1;Cr.Element=DT;Cr.ForwardRef=S1;Cr.Fragment=b1;Cr.Lazy=A1;Cr.Memo=_1;Cr.Portal=MT;Cr.Profiler=w1;Cr.StrictMode=j1;Cr.Suspense=C1;Cr.SuspenseList=P1;Cr.isAsyncMode=function(){return!1};Cr.isConcurrentMode=function(){return!1};Cr.isContextConsumer=function(e){return Za(e)===k1};Cr.isContextProvider=function(e){return Za(e)===N1};Cr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===DT};Cr.isForwardRef=function(e){return Za(e)===S1};Cr.isFragment=function(e){return Za(e)===b1};Cr.isLazy=function(e){return Za(e)===A1};Cr.isMemo=function(e){return Za(e)===_1};Cr.isPortal=function(e){return Za(e)===MT};Cr.isProfiler=function(e){return Za(e)===w1};Cr.isStrictMode=function(e){return Za(e)===j1};Cr.isSuspense=function(e){return Za(e)===C1};Cr.isSuspenseList=function(e){return Za(e)===P1};Cr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===b1||e===w1||e===j1||e===C1||e===P1||e===ime||typeof e=="object"&&e!==null&&(e.$$typeof===A1||e.$$typeof===_1||e.$$typeof===N1||e.$$typeof===k1||e.$$typeof===S1||e.$$typeof===U7||e.getModuleId!==void 0)};Cr.typeOf=Za;L7.exports=Cr;var lme=L7.exports,ome=Ro,cme=Do,dme="[object Number]";function ume(e){return typeof e=="number"||cme(e)&&ome(e)==dme}var B7=ume;const hme=er(B7);var fme=B7;function mme(e){return fme(e)&&e!=+e}var pme=mme;const qm=er(pme);var Ns=function(t){return t===0?0:t>0?1:-1},Pd=function(t){return yu(t)&&t.indexOf("%")===t.length-1},ze=function(t){return hme(t)&&!qm(t)},xme=function(t){return Tt(t)},An=function(t){return ze(t)||yu(t)},gme=0,Lu=function(t){var n=++gme;return"".concat(t||"").concat(n)},ks=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ze(t)&&!yu(t))return s;var i;if(Pd(t)){var l=t.indexOf("%");i=n*parseFloat(t.slice(0,l))/100}else i=+t;return qm(i)&&(i=s),a&&i>n&&(i=n),i},rc=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},vme=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,s={},a=0;a<n;a++)if(!s[t[a]])s[t[a]]=!0;else return!0;return!1},Cn=function(t,n){return ze(t)&&ze(n)?function(s){return t+s*(n-t)}:function(){return n}};function Rb(e,t,n){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):ya(s,t))===n})}var yme=function(t,n){return ze(t)&&ze(n)?t-n:yu(t)&&yu(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function Bh(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function aC(e){"@babel/helpers - typeof";return aC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aC(e)}var bme=["viewBox","children"],jme=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],$D=["points","pathLength"],gk={svg:bme,polygon:$D,polyline:$D},$T=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Db=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(v.isValidElement(t)&&(s=t.props),!Um(s))return null;var a={};return Object.keys(s).forEach(function(i){$T.includes(i)&&(a[i]=n||function(l){return s[i](s,l)})}),a},wme=function(t,n,s){return function(a){return t(n,s,a),null}},bu=function(t,n,s){if(!Um(t)||aC(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var l=t[i];$T.includes(i)&&typeof l=="function"&&(a||(a={}),a[i]=wme(l,n,s))}),a},Nme=["children"],kme=["children"];function ID(e,t){if(e==null)return{};var n=Sme(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Sme(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function iC(e){"@babel/helpers - typeof";return iC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iC(e)}var FD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},po=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},LD=null,vk=null,IT=function e(t){if(t===LD&&Array.isArray(vk))return vk;var n=[];return v.Children.forEach(t,function(s){Tt(s)||(lme.isFragment(s)?n=n.concat(e(s.props.children)):n.push(s))}),vk=n,LD=t,n};function ba(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(function(a){return po(a)}):s=[po(t)],IT(e).forEach(function(a){var i=ya(a,"type.displayName")||ya(a,"type.name");s.indexOf(i)!==-1&&n.push(a)}),n}function da(e,t){var n=ba(e,t);return n&&n[0]}var UD=function(t){if(!t||!t.props)return!1;var n=t.props,s=n.width,a=n.height;return!(!ze(s)||s<=0||!ze(a)||a<=0)},Cme=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Pme=function(t){return t&&t.type&&yu(t.type)&&Cme.indexOf(t.type)>=0},z7=function(t){return t&&iC(t)==="object"&&"clipDot"in t},_me=function(t,n,s,a){var i,l=(i=gk==null?void 0:gk[a])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!xt(t)&&(a&&l.includes(n)||jme.includes(n))||s&&$T.includes(n)},ot=function(t,n,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(v.isValidElement(t)&&(a=t.props),!Um(a))return null;var i={};return Object.keys(a).forEach(function(l){var o;_me((o=a)===null||o===void 0?void 0:o[l],l,n,s)&&(i[l]=a[l])}),i},lC=function e(t,n){if(t===n)return!0;var s=v.Children.count(t);if(s!==v.Children.count(n))return!1;if(s===0)return!0;if(s===1)return BD(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<s;a++){var i=t[a],l=n[a];if(Array.isArray(i)||Array.isArray(l)){if(!e(i,l))return!1}else if(!BD(i,l))return!1}return!0},BD=function(t,n){if(Tt(t)&&Tt(n))return!0;if(!Tt(t)&&!Tt(n)){var s=t.props||{},a=s.children,i=ID(s,Nme),l=n.props||{},o=l.children,c=ID(l,kme);return a&&o?Bh(i,c)&&lC(a,o):!a&&!o?Bh(i,c):!1}return!1},zD=function(t,n){var s=[],a={};return IT(t).forEach(function(i,l){if(Pme(i))s.push(i);else if(i){var o=po(i.type),c=n[o]||{},d=c.handler,u=c.once;if(d&&(!u||!a[o])){var h=d(i,o,l);s.push(h),a[o]=!0}}}),s},Ame=function(t){var n=t&&t.type;return n&&FD[n]?FD[n]:null},Tme=function(t,n){return IT(n).indexOf(t)},Eme=["children","width","height","viewBox","className","style","title","desc"];function oC(){return oC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},oC.apply(this,arguments)}function Ome(e,t){if(e==null)return{};var n=Rme(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Rme(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function cC(e){var t=e.children,n=e.width,s=e.height,a=e.viewBox,i=e.className,l=e.style,o=e.title,c=e.desc,d=Ome(e,Eme),u=a||{width:n,height:s,x:0,y:0},h=Ot("recharts-surface",i);return X.createElement("svg",oC({},ot(d,!0,"svg"),{className:h,width:n,height:s,style:l,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),X.createElement("title",null,o),X.createElement("desc",null,c),t)}var Dme=["children","className"];function dC(){return dC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},dC.apply(this,arguments)}function Mme(e,t){if(e==null)return{};var n=$me(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function $me(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Xt=X.forwardRef(function(e,t){var n=e.children,s=e.className,a=Mme(e,Dme),i=Ot("recharts-layer",s);return X.createElement("g",dC({className:i},ot(a,!0),{ref:t}),n)}),_i=function(t,n){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]};function Ime(e,t,n){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++s<a;)i[s]=e[s+t];return i}var Fme=Ime,Lme=Fme;function Ume(e,t,n){var s=e.length;return n=n===void 0?s:n,!t&&n>=s?e:Lme(e,t,n)}var Bme=Ume,zme="\\ud800-\\udfff",Vme="\\u0300-\\u036f",qme="\\ufe20-\\ufe2f",Wme="\\u20d0-\\u20ff",Hme=Vme+qme+Wme,Kme="\\ufe0e\\ufe0f",Gme="\\u200d",Yme=RegExp("["+Gme+zme+Hme+Kme+"]");function Xme(e){return Yme.test(e)}var V7=Xme;function Zme(e){return e.split("")}var Qme=Zme,q7="\\ud800-\\udfff",Jme="\\u0300-\\u036f",epe="\\ufe20-\\ufe2f",tpe="\\u20d0-\\u20ff",rpe=Jme+epe+tpe,npe="\\ufe0e\\ufe0f",spe="["+q7+"]",uC="["+rpe+"]",hC="\\ud83c[\\udffb-\\udfff]",ape="(?:"+uC+"|"+hC+")",W7="[^"+q7+"]",H7="(?:\\ud83c[\\udde6-\\uddff]){2}",K7="[\\ud800-\\udbff][\\udc00-\\udfff]",ipe="\\u200d",G7=ape+"?",Y7="["+npe+"]?",lpe="(?:"+ipe+"(?:"+[W7,H7,K7].join("|")+")"+Y7+G7+")*",ope=Y7+G7+lpe,cpe="(?:"+[W7+uC+"?",uC,H7,K7,spe].join("|")+")",dpe=RegExp(hC+"(?="+hC+")|"+cpe+ope,"g");function upe(e){return e.match(dpe)||[]}var hpe=upe,fpe=Qme,mpe=V7,ppe=hpe;function xpe(e){return mpe(e)?ppe(e):fpe(e)}var gpe=xpe,vpe=Bme,ype=V7,bpe=gpe,jpe=$7;function wpe(e){return function(t){t=jpe(t);var n=ype(t)?bpe(t):void 0,s=n?n[0]:t.charAt(0),a=n?vpe(n,1).join(""):t.slice(1);return s[e]()+a}}var Npe=wpe,kpe=Npe,Spe=kpe("toUpperCase"),Cpe=Spe;const T1=er(Cpe);function Tr(e){return function(){return e}}const X7=Math.cos,Mb=Math.sin,Hi=Math.sqrt,$b=Math.PI,E1=2*$b,fC=Math.PI,mC=2*fC,gd=1e-6,Ppe=mC-gd;function Z7(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _pe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Z7;const n=10**t;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+s[a]}}class Ape{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Z7:_pe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,a){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(t,n,s,a,i,l){this._append`C${+t},${+n},${+s},${+a},${this._x1=+i},${this._y1=+l}`}arcTo(t,n,s,a,i){if(t=+t,n=+n,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,c=s-t,d=a-n,u=l-t,h=o-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>gd)if(!(Math.abs(h*c-d*u)>gd)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let m=s-l,g=a-o,x=c*c+d*d,w=m*m+g*g,j=Math.sqrt(x),y=Math.sqrt(f),b=i*Math.tan((fC-Math.acos((x+f-w)/(2*j*y)))/2),p=b/y,N=b/j;Math.abs(p-1)>gd&&this._append`L${t+p*u},${n+p*h}`,this._append`A${i},${i},0,0,${+(h*m>u*g)},${this._x1=t+N*c},${this._y1=n+N*d}`}}arc(t,n,s,a,i,l){if(t=+t,n=+n,s=+s,l=!!l,s<0)throw new Error(`negative radius: ${s}`);let o=s*Math.cos(a),c=s*Math.sin(a),d=t+o,u=n+c,h=1^l,f=l?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>gd||Math.abs(this._y1-u)>gd)&&this._append`L${d},${u}`,s&&(f<0&&(f=f%mC+mC),f>Ppe?this._append`A${s},${s},0,1,${h},${t-o},${n-c}A${s},${s},0,1,${h},${this._x1=d},${this._y1=u}`:f>gd&&this._append`A${s},${s},0,${+(f>=fC)},${h},${this._x1=t+s*Math.cos(i)},${this._y1=n+s*Math.sin(i)}`)}rect(t,n,s,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function FT(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new Ape(t)}function LT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Q7(e){this._context=e}Q7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function O1(e){return new Q7(e)}function J7(e){return e[0]}function ez(e){return e[1]}function tz(e,t){var n=Tr(!0),s=null,a=O1,i=null,l=FT(o);e=typeof e=="function"?e:e===void 0?J7:Tr(e),t=typeof t=="function"?t:t===void 0?ez:Tr(t);function o(c){var d,u=(c=LT(c)).length,h,f=!1,m;for(s==null&&(i=a(m=l())),d=0;d<=u;++d)!(d<u&&n(h=c[d],d,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,d,c),+t(h,d,c));if(m)return i=null,m+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Tr(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Tr(+c),o):t},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Tr(!!c),o):n},o.curve=function(c){return arguments.length?(a=c,s!=null&&(i=a(s)),o):a},o.context=function(c){return arguments.length?(c==null?s=i=null:i=a(s=c),o):s},o}function Hy(e,t,n){var s=null,a=Tr(!0),i=null,l=O1,o=null,c=FT(d);e=typeof e=="function"?e:e===void 0?J7:Tr(+e),t=typeof t=="function"?t:Tr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?ez:Tr(+n);function d(h){var f,m,g,x=(h=LT(h)).length,w,j=!1,y,b=new Array(x),p=new Array(x);for(i==null&&(o=l(y=c())),f=0;f<=x;++f){if(!(f<x&&a(w=h[f],f,h))===j)if(j=!j)m=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=f-1;g>=m;--g)o.point(b[g],p[g]);o.lineEnd(),o.areaEnd()}j&&(b[f]=+e(w,f,h),p[f]=+t(w,f,h),o.point(s?+s(w,f,h):b[f],n?+n(w,f,h):p[f]))}if(y)return o=null,y+""||null}function u(){return tz().defined(a).curve(l).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:Tr(+h),s=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Tr(+h),d):e},d.x1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:Tr(+h),d):s},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:Tr(+h),n=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Tr(+h),d):t},d.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Tr(+h),d):n},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(n)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Tr(!!h),d):a},d.curve=function(h){return arguments.length?(l=h,i!=null&&(o=l(i)),d):l},d.context=function(h){return arguments.length?(h==null?i=o=null:o=l(i=h),d):i},d}class rz{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Tpe(e){return new rz(e,!0)}function Epe(e){return new rz(e,!1)}const UT={draw(e,t){const n=Hi(t/$b);e.moveTo(n,0),e.arc(0,0,n,0,E1)}},Ope={draw(e,t){const n=Hi(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},nz=Hi(1/3),Rpe=nz*2,Dpe={draw(e,t){const n=Hi(t/Rpe),s=n*nz;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},Mpe={draw(e,t){const n=Hi(t),s=-n/2;e.rect(s,s,n,n)}},$pe=.8908130915292852,sz=Mb($b/10)/Mb(7*$b/10),Ipe=Mb(E1/10)*sz,Fpe=-X7(E1/10)*sz,Lpe={draw(e,t){const n=Hi(t*$pe),s=Ipe*n,a=Fpe*n;e.moveTo(0,-n),e.lineTo(s,a);for(let i=1;i<5;++i){const l=E1*i/5,o=X7(l),c=Mb(l);e.lineTo(c*n,-o*n),e.lineTo(o*s-c*a,c*s+o*a)}e.closePath()}},yk=Hi(3),Upe={draw(e,t){const n=-Hi(t/(yk*3));e.moveTo(0,n*2),e.lineTo(-yk*n,-n),e.lineTo(yk*n,-n),e.closePath()}},Pa=-.5,_a=Hi(3)/2,pC=1/Hi(12),Bpe=(pC/2+1)*3,zpe={draw(e,t){const n=Hi(t/Bpe),s=n/2,a=n*pC,i=s,l=n*pC+n,o=-i,c=l;e.moveTo(s,a),e.lineTo(i,l),e.lineTo(o,c),e.lineTo(Pa*s-_a*a,_a*s+Pa*a),e.lineTo(Pa*i-_a*l,_a*i+Pa*l),e.lineTo(Pa*o-_a*c,_a*o+Pa*c),e.lineTo(Pa*s+_a*a,Pa*a-_a*s),e.lineTo(Pa*i+_a*l,Pa*l-_a*i),e.lineTo(Pa*o+_a*c,Pa*c-_a*o),e.closePath()}};function Vpe(e,t){let n=null,s=FT(a);e=typeof e=="function"?e:Tr(e||UT),t=typeof t=="function"?t:Tr(t===void 0?64:+t);function a(){let i;if(n||(n=i=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Tr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Tr(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function Ib(){}function Fb(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function az(e){this._context=e}az.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qpe(e){return new az(e)}function iz(e){this._context=e}iz.prototype={areaStart:Ib,areaEnd:Ib,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Fb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wpe(e){return new iz(e)}function lz(e){this._context=e}lz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:Fb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Hpe(e){return new lz(e)}function oz(e){this._context=e}oz.prototype={areaStart:Ib,areaEnd:Ib,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Kpe(e){return new oz(e)}function VD(e){return e<0?-1:1}function qD(e,t,n){var s=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),l=(n-e._y1)/(a||s<0&&-0),o=(i*a+l*s)/(s+a);return(VD(i)+VD(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function WD(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function bk(e,t,n){var s=e._x0,a=e._y0,i=e._x1,l=e._y1,o=(i-s)/3;e._context.bezierCurveTo(s+o,a+o*t,i-o,l-o*n,i,l)}function Lb(e){this._context=e}Lb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bk(this,this._t0,WD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bk(this,WD(this,n=qD(this,e,t)),n);break;default:bk(this,this._t0,n=qD(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function cz(e){this._context=new dz(e)}(cz.prototype=Object.create(Lb.prototype)).point=function(e,t){Lb.prototype.point.call(this,t,e)};function dz(e){this._context=e}dz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,a,i){this._context.bezierCurveTo(t,e,s,n,i,a)}};function Gpe(e){return new Lb(e)}function Ype(e){return new cz(e)}function uz(e){this._context=e}uz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=HD(e),a=HD(t),i=0,l=1;l<n;++i,++l)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function HD(e){var t,n=e.length-1,s,a=new Array(n),i=new Array(n),l=new Array(n);for(a[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=a[t]/i[t-1],i[t]-=s,l[t]-=s*l[t-1];for(a[n-1]=l[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(l[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Xpe(e){return new uz(e)}function R1(e,t){this._context=e,this._t=t}R1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Zpe(e){return new R1(e,.5)}function Qpe(e){return new R1(e,0)}function Jpe(e){return new R1(e,1)}function Wf(e,t){if((l=e.length)>1)for(var n=1,s,a,i=e[t[0]],l,o=i.length;n<l;++n)for(a=i,i=e[t[n]],s=0;s<o;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function xC(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function exe(e,t){return e[t]}function txe(e){const t=[];return t.key=e,t}function rxe(){var e=Tr([]),t=xC,n=Wf,s=exe;function a(i){var l=Array.from(e.apply(this,arguments),txe),o,c=l.length,d=-1,u;for(const h of i)for(o=0,++d;o<c;++o)(l[o][d]=[0,+s(h,l[o].key,d,i)]).data=h;for(o=0,u=LT(t(l));o<c;++o)l[u[o]].index=o;return n(l,u),l}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Tr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:Tr(+i),a):s},a.order=function(i){return arguments.length?(t=i==null?xC:typeof i=="function"?i:Tr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??Wf,a):n},a}function nxe(e,t){if((s=e.length)>0){for(var n,s,a=0,i=e[0].length,l;a<i;++a){for(l=n=0;n<s;++n)l+=e[n][a][1]||0;if(l)for(n=0;n<s;++n)e[n][a][1]/=l}Wf(e,t)}}function sxe(e,t){if((a=e.length)>0){for(var n=0,s=e[t[0]],a,i=s.length;n<i;++n){for(var l=0,o=0;l<a;++l)o+=e[l][n][1]||0;s[n][1]+=s[n][0]=-o/2}Wf(e,t)}}function axe(e,t){if(!(!((l=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,s=1,a,i,l;s<i;++s){for(var o=0,c=0,d=0;o<l;++o){for(var u=e[t[o]],h=u[s][1]||0,f=u[s-1][1]||0,m=(h-f)/2,g=0;g<o;++g){var x=e[t[g]],w=x[s][1]||0,j=x[s-1][1]||0;m+=w-j}c+=h,d+=m*h}a[s-1][1]+=a[s-1][0]=n,c&&(n-=d/c)}a[s-1][1]+=a[s-1][0]=n,Wf(e,t)}}function rg(e){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rg(e)}var ixe=["type","size","sizeType"];function gC(){return gC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gC.apply(this,arguments)}function KD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function GD(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KD(Object(n),!0).forEach(function(s){lxe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KD(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function lxe(e,t,n){return t=oxe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oxe(e){var t=cxe(e,"string");return rg(t)=="symbol"?t:t+""}function cxe(e,t){if(rg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(rg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dxe(e,t){if(e==null)return{};var n=uxe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function uxe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var hz={symbolCircle:UT,symbolCross:Ope,symbolDiamond:Dpe,symbolSquare:Mpe,symbolStar:Lpe,symbolTriangle:Upe,symbolWye:zpe},hxe=Math.PI/180,fxe=function(t){var n="symbol".concat(T1(t));return hz[n]||UT},mxe=function(t,n,s){if(n==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*hxe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},pxe=function(t,n){hz["symbol".concat(T1(t))]=n},BT=function(t){var n=t.type,s=n===void 0?"circle":n,a=t.size,i=a===void 0?64:a,l=t.sizeType,o=l===void 0?"area":l,c=dxe(t,ixe),d=GD(GD({},c),{},{type:s,size:i,sizeType:o}),u=function(){var w=fxe(s),j=Vpe().type(w).size(mxe(i,o,s));return j()},h=d.className,f=d.cx,m=d.cy,g=ot(d,!0);return f===+f&&m===+m&&i===+i?X.createElement("path",gC({},g,{className:Ot("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:u()})):null};BT.registerSymbol=pxe;function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function vC(){return vC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vC.apply(this,arguments)}function YD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function xxe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YD(Object(n),!0).forEach(function(s){ng(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YD(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function gxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vxe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,mz(s.key),s)}}function yxe(e,t,n){return t&&vxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bxe(e,t,n){return t=Ub(t),jxe(e,fz()?Reflect.construct(t,n||[],Ub(e).constructor):t.apply(e,n))}function jxe(e,t){if(t&&(Hf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wxe(e)}function wxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fz=function(){return!!e})()}function Ub(e){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ub(e)}function Nxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yC(e,t)}function yC(e,t){return yC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},yC(e,t)}function ng(e,t,n){return t=mz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mz(e){var t=kxe(e,"string");return Hf(t)=="symbol"?t:t+""}function kxe(e,t){if(Hf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Hf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Aa=32,zT=function(e){function t(){return gxe(this,t),bxe(this,t,arguments)}return Nxe(t,e),yxe(t,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,i=Aa/2,l=Aa/6,o=Aa/3,c=s.inactive?a:s.color;if(s.type==="plainline")return X.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:i,x2:Aa,y2:i,className:"recharts-legend-icon"});if(s.type==="line")return X.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Aa,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(s.type==="rect")return X.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Aa/8,"h").concat(Aa,"v").concat(Aa*3/4,"h").concat(-Aa,"z"),className:"recharts-legend-icon"});if(X.isValidElement(s.legendIcon)){var d=xxe({},s);return delete d.legendIcon,X.cloneElement(s.legendIcon,d)}return X.createElement(BT,{fill:c,cx:i,cy:i,size:Aa,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,i=a.payload,l=a.iconSize,o=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:Aa,height:Aa},h={display:o==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,g){var x=m.formatter||c,w=Ot(ng(ng({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var j=xt(m.value)?null:m.value;_i(!xt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?d:m.color;return X.createElement("li",vC({className:w,style:h,key:"legend-item-".concat(g)},bu(s.props,m,g)),X.createElement(cC,{width:l,height:l,viewBox:u,style:f},s.renderIcon(m)),X.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},x?x(j,m,g):j))})}},{key:"render",value:function(){var s=this.props,a=s.payload,i=s.layout,l=s.align;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return X.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(v.PureComponent);ng(zT,"displayName","Legend");ng(zT,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Sxe=g1;function Cxe(){this.__data__=new Sxe,this.size=0}var Pxe=Cxe;function _xe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Axe=_xe;function Txe(e){return this.__data__.get(e)}var Exe=Txe;function Oxe(e){return this.__data__.has(e)}var Rxe=Oxe,Dxe=g1,Mxe=AT,$xe=TT,Ixe=200;function Fxe(e,t){var n=this.__data__;if(n instanceof Dxe){var s=n.__data__;if(!Mxe||s.length<Ixe-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new $xe(s)}return n.set(e,t),this.size=n.size,this}var Lxe=Fxe,Uxe=g1,Bxe=Pxe,zxe=Axe,Vxe=Exe,qxe=Rxe,Wxe=Lxe;function Wm(e){var t=this.__data__=new Uxe(e);this.size=t.size}Wm.prototype.clear=Bxe;Wm.prototype.delete=zxe;Wm.prototype.get=Vxe;Wm.prototype.has=qxe;Wm.prototype.set=Wxe;var pz=Wm,Hxe="__lodash_hash_undefined__";function Kxe(e){return this.__data__.set(e,Hxe),this}var Gxe=Kxe;function Yxe(e){return this.__data__.has(e)}var Xxe=Yxe,Zxe=TT,Qxe=Gxe,Jxe=Xxe;function Bb(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Zxe;++t<n;)this.add(e[t])}Bb.prototype.add=Bb.prototype.push=Qxe;Bb.prototype.has=Jxe;var xz=Bb;function ege(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var gz=ege;function tge(e,t){return e.has(t)}var vz=tge,rge=xz,nge=gz,sge=vz,age=1,ige=2;function lge(e,t,n,s,a,i){var l=n&age,o=e.length,c=t.length;if(o!=c&&!(l&&c>o))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var h=-1,f=!0,m=n&ige?new rge:void 0;for(i.set(e,t),i.set(t,e);++h<o;){var g=e[h],x=t[h];if(s)var w=l?s(x,g,h,t,e,i):s(g,x,h,e,t,i);if(w!==void 0){if(w)continue;f=!1;break}if(m){if(!nge(t,function(j,y){if(!sge(m,y)&&(g===j||a(g,j,n,s,i)))return m.push(y)})){f=!1;break}}else if(!(g===x||a(g,x,n,s,i))){f=!1;break}}return i.delete(e),i.delete(t),f}var yz=lge,oge=Ml,cge=oge.Uint8Array,dge=cge;function uge(e){var t=-1,n=Array(e.size);return e.forEach(function(s,a){n[++t]=[a,s]}),n}var hge=uge;function fge(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var VT=fge,XD=Yv,ZD=dge,mge=_T,pge=yz,xge=hge,gge=VT,vge=1,yge=2,bge="[object Boolean]",jge="[object Date]",wge="[object Error]",Nge="[object Map]",kge="[object Number]",Sge="[object RegExp]",Cge="[object Set]",Pge="[object String]",_ge="[object Symbol]",Age="[object ArrayBuffer]",Tge="[object DataView]",QD=XD?XD.prototype:void 0,jk=QD?QD.valueOf:void 0;function Ege(e,t,n,s,a,i,l){switch(n){case Tge:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Age:return!(e.byteLength!=t.byteLength||!i(new ZD(e),new ZD(t)));case bge:case jge:case kge:return mge(+e,+t);case wge:return e.name==t.name&&e.message==t.message;case Sge:case Pge:return e==t+"";case Nge:var o=xge;case Cge:var c=s&vge;if(o||(o=gge),e.size!=t.size&&!c)return!1;var d=l.get(e);if(d)return d==t;s|=yge,l.set(e,t);var u=pge(o(e),o(t),s,a,i,l);return l.delete(e),u;case _ge:if(jk)return jk.call(e)==jk.call(t)}return!1}var Oge=Ege;function Rge(e,t){for(var n=-1,s=t.length,a=e.length;++n<s;)e[a+n]=t[n];return e}var bz=Rge,Dge=bz,Mge=Js;function $ge(e,t,n){var s=t(e);return Mge(e)?s:Dge(s,n(e))}var Ige=$ge;function Fge(e,t){for(var n=-1,s=e==null?0:e.length,a=0,i=[];++n<s;){var l=e[n];t(l,n,e)&&(i[a++]=l)}return i}var Lge=Fge;function Uge(){return[]}var Bge=Uge,zge=Lge,Vge=Bge,qge=Object.prototype,Wge=qge.propertyIsEnumerable,JD=Object.getOwnPropertySymbols,Hge=JD?function(e){return e==null?[]:(e=Object(e),zge(JD(e),function(t){return Wge.call(e,t)}))}:Vge,Kge=Hge;function Gge(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var Yge=Gge,Xge=Ro,Zge=Do,Qge="[object Arguments]";function Jge(e){return Zge(e)&&Xge(e)==Qge}var eve=Jge,eM=eve,tve=Do,jz=Object.prototype,rve=jz.hasOwnProperty,nve=jz.propertyIsEnumerable,sve=eM(function(){return arguments}())?eM:function(e){return tve(e)&&rve.call(e,"callee")&&!nve.call(e,"callee")},qT=sve,zb={exports:{}};function ave(){return!1}var ive=ave;zb.exports;(function(e,t){var n=Ml,s=ive,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===a,o=l?n.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||s;e.exports=d})(zb,zb.exports);var wz=zb.exports,lve=9007199254740991,ove=/^(?:0|[1-9]\d*)$/;function cve(e,t){var n=typeof e;return t=t??lve,!!t&&(n=="number"||n!="symbol"&&ove.test(e))&&e>-1&&e%1==0&&e<t}var WT=cve,dve=9007199254740991;function uve(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=dve}var HT=uve,hve=Ro,fve=HT,mve=Do,pve="[object Arguments]",xve="[object Array]",gve="[object Boolean]",vve="[object Date]",yve="[object Error]",bve="[object Function]",jve="[object Map]",wve="[object Number]",Nve="[object Object]",kve="[object RegExp]",Sve="[object Set]",Cve="[object String]",Pve="[object WeakMap]",_ve="[object ArrayBuffer]",Ave="[object DataView]",Tve="[object Float32Array]",Eve="[object Float64Array]",Ove="[object Int8Array]",Rve="[object Int16Array]",Dve="[object Int32Array]",Mve="[object Uint8Array]",$ve="[object Uint8ClampedArray]",Ive="[object Uint16Array]",Fve="[object Uint32Array]",$r={};$r[Tve]=$r[Eve]=$r[Ove]=$r[Rve]=$r[Dve]=$r[Mve]=$r[$ve]=$r[Ive]=$r[Fve]=!0;$r[pve]=$r[xve]=$r[_ve]=$r[gve]=$r[Ave]=$r[vve]=$r[yve]=$r[bve]=$r[jve]=$r[wve]=$r[Nve]=$r[kve]=$r[Sve]=$r[Cve]=$r[Pve]=!1;function Lve(e){return mve(e)&&fve(e.length)&&!!$r[hve(e)]}var Uve=Lve;function Bve(e){return function(t){return e(t)}}var Nz=Bve,Vb={exports:{}};Vb.exports;(function(e,t){var n=T7,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,l=i&&n.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();e.exports=o})(Vb,Vb.exports);var zve=Vb.exports,Vve=Uve,qve=Nz,tM=zve,rM=tM&&tM.isTypedArray,Wve=rM?qve(rM):Vve,kz=Wve,Hve=Yge,Kve=qT,Gve=Js,Yve=wz,Xve=WT,Zve=kz,Qve=Object.prototype,Jve=Qve.hasOwnProperty;function eye(e,t){var n=Gve(e),s=!n&&Kve(e),a=!n&&!s&&Yve(e),i=!n&&!s&&!a&&Zve(e),l=n||s||a||i,o=l?Hve(e.length,String):[],c=o.length;for(var d in e)(t||Jve.call(e,d))&&!(l&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Xve(d,c)))&&o.push(d);return o}var tye=eye,rye=Object.prototype;function nye(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||rye;return e===n}var sye=nye;function aye(e,t){return function(n){return e(t(n))}}var Sz=aye,iye=Sz,lye=iye(Object.keys,Object),oye=lye,cye=sye,dye=oye,uye=Object.prototype,hye=uye.hasOwnProperty;function fye(e){if(!cye(e))return dye(e);var t=[];for(var n in Object(e))hye.call(e,n)&&n!="constructor"&&t.push(n);return t}var mye=fye,pye=PT,xye=HT;function gye(e){return e!=null&&xye(e.length)&&!pye(e)}var Xv=gye,vye=tye,yye=mye,bye=Xv;function jye(e){return bye(e)?vye(e):yye(e)}var D1=jye,wye=Ige,Nye=Kge,kye=D1;function Sye(e){return wye(e,kye,Nye)}var Cye=Sye,nM=Cye,Pye=1,_ye=Object.prototype,Aye=_ye.hasOwnProperty;function Tye(e,t,n,s,a,i){var l=n&Pye,o=nM(e),c=o.length,d=nM(t),u=d.length;if(c!=u&&!l)return!1;for(var h=c;h--;){var f=o[h];if(!(l?f in t:Aye.call(t,f)))return!1}var m=i.get(e),g=i.get(t);if(m&&g)return m==t&&g==e;var x=!0;i.set(e,t),i.set(t,e);for(var w=l;++h<c;){f=o[h];var j=e[f],y=t[f];if(s)var b=l?s(y,j,f,t,e,i):s(j,y,f,e,t,i);if(!(b===void 0?j===y||a(j,y,n,s,i):b)){x=!1;break}w||(w=f=="constructor")}if(x&&!w){var p=e.constructor,N=t.constructor;p!=N&&"constructor"in e&&"constructor"in t&&!(typeof p=="function"&&p instanceof p&&typeof N=="function"&&N instanceof N)&&(x=!1)}return i.delete(e),i.delete(t),x}var Eye=Tye,Oye=Fu,Rye=Ml,Dye=Oye(Rye,"DataView"),Mye=Dye,$ye=Fu,Iye=Ml,Fye=$ye(Iye,"Promise"),Lye=Fye,Uye=Fu,Bye=Ml,zye=Uye(Bye,"Set"),Cz=zye,Vye=Fu,qye=Ml,Wye=Vye(qye,"WeakMap"),Hye=Wye,bC=Mye,jC=AT,wC=Lye,NC=Cz,kC=Hye,Pz=Ro,Hm=O7,sM="[object Map]",Kye="[object Object]",aM="[object Promise]",iM="[object Set]",lM="[object WeakMap]",oM="[object DataView]",Gye=Hm(bC),Yye=Hm(jC),Xye=Hm(wC),Zye=Hm(NC),Qye=Hm(kC),vd=Pz;(bC&&vd(new bC(new ArrayBuffer(1)))!=oM||jC&&vd(new jC)!=sM||wC&&vd(wC.resolve())!=aM||NC&&vd(new NC)!=iM||kC&&vd(new kC)!=lM)&&(vd=function(e){var t=Pz(e),n=t==Kye?e.constructor:void 0,s=n?Hm(n):"";if(s)switch(s){case Gye:return oM;case Yye:return sM;case Xye:return aM;case Zye:return iM;case Qye:return lM}return t});var Jye=vd,wk=pz,e0e=yz,t0e=Oge,r0e=Eye,cM=Jye,dM=Js,uM=wz,n0e=kz,s0e=1,hM="[object Arguments]",fM="[object Array]",Ky="[object Object]",a0e=Object.prototype,mM=a0e.hasOwnProperty;function i0e(e,t,n,s,a,i){var l=dM(e),o=dM(t),c=l?fM:cM(e),d=o?fM:cM(t);c=c==hM?Ky:c,d=d==hM?Ky:d;var u=c==Ky,h=d==Ky,f=c==d;if(f&&uM(e)){if(!uM(t))return!1;l=!0,u=!1}if(f&&!u)return i||(i=new wk),l||n0e(e)?e0e(e,t,n,s,a,i):t0e(e,t,c,n,s,a,i);if(!(n&s0e)){var m=u&&mM.call(e,"__wrapped__"),g=h&&mM.call(t,"__wrapped__");if(m||g){var x=m?e.value():e,w=g?t.value():t;return i||(i=new wk),a(x,w,n,s,i)}}return f?(i||(i=new wk),r0e(e,t,n,s,a,i)):!1}var l0e=i0e,o0e=l0e,pM=Do;function _z(e,t,n,s,a){return e===t?!0:e==null||t==null||!pM(e)&&!pM(t)?e!==e&&t!==t:o0e(e,t,n,s,_z,a)}var KT=_z,c0e=pz,d0e=KT,u0e=1,h0e=2;function f0e(e,t,n,s){var a=n.length,i=a,l=!s;if(e==null)return!i;for(e=Object(e);a--;){var o=n[a];if(l&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<i;){o=n[a];var c=o[0],d=e[c],u=o[1];if(l&&o[2]){if(d===void 0&&!(c in e))return!1}else{var h=new c0e;if(s)var f=s(d,u,c,e,t,h);if(!(f===void 0?d0e(u,d,u0e|h0e,s,h):f))return!1}}return!0}var m0e=f0e,p0e=rd;function x0e(e){return e===e&&!p0e(e)}var Az=x0e,g0e=Az,v0e=D1;function y0e(e){for(var t=v0e(e),n=t.length;n--;){var s=t[n],a=e[s];t[n]=[s,a,g0e(a)]}return t}var b0e=y0e;function j0e(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var Tz=j0e,w0e=m0e,N0e=b0e,k0e=Tz;function S0e(e){var t=N0e(e);return t.length==1&&t[0][2]?k0e(t[0][0],t[0][1]):function(n){return n===e||w0e(n,e,t)}}var C0e=S0e;function P0e(e,t){return e!=null&&t in Object(e)}var _0e=P0e,A0e=I7,T0e=qT,E0e=Js,O0e=WT,R0e=HT,D0e=y1;function M0e(e,t,n){t=A0e(t,e);for(var s=-1,a=t.length,i=!1;++s<a;){var l=D0e(t[s]);if(!(i=e!=null&&n(e,l)))break;e=e[l]}return i||++s!=a?i:(a=e==null?0:e.length,!!a&&R0e(a)&&O0e(l,a)&&(E0e(e)||T0e(e)))}var $0e=M0e,I0e=_0e,F0e=$0e;function L0e(e,t){return e!=null&&F0e(e,t,I0e)}var U0e=L0e,B0e=KT,z0e=F7,V0e=U0e,q0e=CT,W0e=Az,H0e=Tz,K0e=y1,G0e=1,Y0e=2;function X0e(e,t){return q0e(e)&&W0e(t)?H0e(K0e(e),t):function(n){var s=z0e(n,e);return s===void 0&&s===t?V0e(n,e):B0e(t,s,G0e|Y0e)}}var Z0e=X0e;function Q0e(e){return e}var Km=Q0e;function J0e(e){return function(t){return t==null?void 0:t[e]}}var ebe=J0e,tbe=RT;function rbe(e){return function(t){return tbe(t,e)}}var nbe=rbe,sbe=ebe,abe=nbe,ibe=CT,lbe=y1;function obe(e){return ibe(e)?sbe(lbe(e)):abe(e)}var cbe=obe,dbe=C0e,ube=Z0e,hbe=Km,fbe=Js,mbe=cbe;function pbe(e){return typeof e=="function"?e:e==null?hbe:typeof e=="object"?fbe(e)?ube(e[0],e[1]):dbe(e):mbe(e)}var $l=pbe;function xbe(e,t,n,s){for(var a=e.length,i=n+(s?1:-1);s?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Ez=xbe;function gbe(e){return e!==e}var vbe=gbe;function ybe(e,t,n){for(var s=n-1,a=e.length;++s<a;)if(e[s]===t)return s;return-1}var bbe=ybe,jbe=Ez,wbe=vbe,Nbe=bbe;function kbe(e,t,n){return t===t?Nbe(e,t,n):jbe(e,wbe,n)}var Sbe=kbe,Cbe=Sbe;function Pbe(e,t){var n=e==null?0:e.length;return!!n&&Cbe(e,t,0)>-1}var _be=Pbe;function Abe(e,t,n){for(var s=-1,a=e==null?0:e.length;++s<a;)if(n(t,e[s]))return!0;return!1}var Tbe=Abe;function Ebe(){}var Obe=Ebe,Nk=Cz,Rbe=Obe,Dbe=VT,Mbe=1/0,$be=Nk&&1/Dbe(new Nk([,-0]))[1]==Mbe?function(e){return new Nk(e)}:Rbe,Ibe=$be,Fbe=xz,Lbe=_be,Ube=Tbe,Bbe=vz,zbe=Ibe,Vbe=VT,qbe=200;function Wbe(e,t,n){var s=-1,a=Lbe,i=e.length,l=!0,o=[],c=o;if(n)l=!1,a=Ube;else if(i>=qbe){var d=t?null:zbe(e);if(d)return Vbe(d);l=!1,a=Bbe,c=new Fbe}else c=t?[]:o;e:for(;++s<i;){var u=e[s],h=t?t(u):u;if(u=n||u!==0?u:0,l&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;t&&c.push(h),o.push(u)}else a(c,h,n)||(c!==o&&c.push(h),o.push(u))}return o}var Hbe=Wbe,Kbe=$l,Gbe=Hbe;function Ybe(e,t){return e&&e.length?Gbe(e,Kbe(t)):[]}var Xbe=Ybe;const xM=er(Xbe);function Oz(e,t,n){return t===!0?xM(e,n):xt(t)?xM(e,t):e}function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}var Zbe=["ref"];function gM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ul(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gM(Object(n),!0).forEach(function(s){M1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Qbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vM(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Dz(s.key),s)}}function Jbe(e,t,n){return t&&vM(e.prototype,t),n&&vM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function eje(e,t,n){return t=qb(t),tje(e,Rz()?Reflect.construct(t,n||[],qb(e).constructor):t.apply(e,n))}function tje(e,t){if(t&&(Kf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rje(e)}function rje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rz=function(){return!!e})()}function qb(e){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qb(e)}function nje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SC(e,t)}function SC(e,t){return SC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},SC(e,t)}function M1(e,t,n){return t=Dz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dz(e){var t=sje(e,"string");return Kf(t)=="symbol"?t:t+""}function sje(e,t){if(Kf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Kf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aje(e,t){if(e==null)return{};var n=ije(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function ije(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function lje(e){return e.value}function oje(e,t){if(X.isValidElement(e))return X.cloneElement(e,t);if(typeof e=="function")return X.createElement(e,t);t.ref;var n=aje(t,Zbe);return X.createElement(zT,n)}var yM=1,zh=function(e){function t(){var n;Qbe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=eje(this,t,[].concat(a)),M1(n,"lastBoundingBox",{width:-1,height:-1}),n}return nje(t,e),Jbe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>yM||Math.abs(a.height-this.lastBoundingBox.height)>yM)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ul({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,i=a.layout,l=a.align,o=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,h,f;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(l==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();h={left:((d||0)-m.width)/2}}else h=l==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(o==="middle"){var g=this.getBBoxSnapshot();f={top:((u||0)-g.height)/2}}else f=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ul(Ul({},h),f)}},{key:"render",value:function(){var s=this,a=this.props,i=a.content,l=a.width,o=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,h=Ul(Ul({position:"absolute",width:l||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return X.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){s.wrapperNode=m}},oje(i,Ul(Ul({},this.props),{},{payload:Oz(u,d,lje)})))}}],[{key:"getWithHeight",value:function(s,a){var i=Ul(Ul({},this.defaultProps),s.props),l=i.layout;return l==="vertical"&&ze(s.props.height)?{height:s.props.height}:l==="horizontal"?{width:s.props.width||a}:null}}])}(v.PureComponent);M1(zh,"displayName","Legend");M1(zh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var bM=Yv,cje=qT,dje=Js,jM=bM?bM.isConcatSpreadable:void 0;function uje(e){return dje(e)||cje(e)||!!(jM&&e&&e[jM])}var hje=uje,fje=bz,mje=hje;function Mz(e,t,n,s,a){var i=-1,l=e.length;for(n||(n=mje),a||(a=[]);++i<l;){var o=e[i];t>0&&n(o)?t>1?Mz(o,t-1,n,s,a):fje(a,o):s||(a[a.length]=o)}return a}var $z=Mz;function pje(e){return function(t,n,s){for(var a=-1,i=Object(t),l=s(t),o=l.length;o--;){var c=l[e?o:++a];if(n(i[c],c,i)===!1)break}return t}}var xje=pje,gje=xje,vje=gje(),yje=vje,bje=yje,jje=D1;function wje(e,t){return e&&bje(e,t,jje)}var Iz=wje,Nje=Xv;function kje(e,t){return function(n,s){if(n==null)return n;if(!Nje(n))return e(n,s);for(var a=n.length,i=t?a:-1,l=Object(n);(t?i--:++i<a)&&s(l[i],i,l)!==!1;);return n}}var Sje=kje,Cje=Iz,Pje=Sje,_je=Pje(Cje),GT=_je,Aje=GT,Tje=Xv;function Eje(e,t){var n=-1,s=Tje(e)?Array(e.length):[];return Aje(e,function(a,i,l){s[++n]=t(a,i,l)}),s}var Fz=Eje;function Oje(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Rje=Oje,wM=Lm;function Dje(e,t){if(e!==t){var n=e!==void 0,s=e===null,a=e===e,i=wM(e),l=t!==void 0,o=t===null,c=t===t,d=wM(t);if(!o&&!d&&!i&&e>t||i&&l&&c&&!o&&!d||s&&l&&c||!n&&c||!a)return 1;if(!s&&!i&&!d&&e<t||d&&n&&a&&!s&&!i||o&&n&&a||!l&&a||!c)return-1}return 0}var Mje=Dje,$je=Mje;function Ije(e,t,n){for(var s=-1,a=e.criteria,i=t.criteria,l=a.length,o=n.length;++s<l;){var c=$je(a[s],i[s]);if(c){if(s>=o)return c;var d=n[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var Fje=Ije,kk=OT,Lje=RT,Uje=$l,Bje=Fz,zje=Rje,Vje=Nz,qje=Fje,Wje=Km,Hje=Js;function Kje(e,t,n){t.length?t=kk(t,function(i){return Hje(i)?function(l){return Lje(l,i.length===1?i[0]:i)}:i}):t=[Wje];var s=-1;t=kk(t,Vje(Uje));var a=Bje(e,function(i,l,o){var c=kk(t,function(d){return d(i)});return{criteria:c,index:++s,value:i}});return zje(a,function(i,l){return qje(i,l,n)})}var Gje=Kje;function Yje(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Xje=Yje,Zje=Xje,NM=Math.max;function Qje(e,t,n){return t=NM(t===void 0?e.length-1:t,0),function(){for(var s=arguments,a=-1,i=NM(s.length-t,0),l=Array(i);++a<i;)l[a]=s[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=s[a];return o[t]=n(l),Zje(e,this,o)}}var Jje=Qje;function ewe(e){return function(){return e}}var twe=ewe,rwe=Fu,nwe=function(){try{var e=rwe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Lz=nwe,swe=twe,kM=Lz,awe=Km,iwe=kM?function(e,t){return kM(e,"toString",{configurable:!0,enumerable:!1,value:swe(t),writable:!0})}:awe,lwe=iwe,owe=800,cwe=16,dwe=Date.now;function uwe(e){var t=0,n=0;return function(){var s=dwe(),a=cwe-(s-n);if(n=s,a>0){if(++t>=owe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var hwe=uwe,fwe=lwe,mwe=hwe,pwe=mwe(fwe),xwe=pwe,gwe=Km,vwe=Jje,ywe=xwe;function bwe(e,t){return ywe(vwe(e,t,gwe),e+"")}var jwe=bwe,wwe=_T,Nwe=Xv,kwe=WT,Swe=rd;function Cwe(e,t,n){if(!Swe(n))return!1;var s=typeof t;return(s=="number"?Nwe(n)&&kwe(t,n.length):s=="string"&&t in n)?wwe(n[t],e):!1}var $1=Cwe,Pwe=$z,_we=Gje,Awe=jwe,SM=$1,Twe=Awe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&SM(e,t[0],t[1])?t=[]:n>2&&SM(t[0],t[1],t[2])&&(t=[t[0]]),_we(e,Pwe(t,1),[])}),Ewe=Twe;const YT=er(Ewe);function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}function CC(){return CC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},CC.apply(this,arguments)}function Owe(e,t){return $we(e)||Mwe(e,t)||Dwe(e,t)||Rwe()}function Rwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dwe(e,t){if(e){if(typeof e=="string")return CM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CM(e,t)}}function CM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Mwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function $we(e){if(Array.isArray(e))return e}function PM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Sk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PM(Object(n),!0).forEach(function(s){Iwe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Iwe(e,t,n){return t=Fwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fwe(e){var t=Lwe(e,"string");return sg(t)=="symbol"?t:t+""}function Lwe(e,t){if(sg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(sg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uwe(e){return Array.isArray(e)&&An(e[0])&&An(e[1])?e.join(" ~ "):e}var Bwe=function(t){var n=t.separator,s=n===void 0?" : ":n,a=t.contentStyle,i=a===void 0?{}:a,l=t.itemStyle,o=l===void 0?{}:l,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,h=t.formatter,f=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,x=t.label,w=t.labelFormatter,j=t.accessibilityLayer,y=j===void 0?!1:j,b=function(){if(u&&u.length){var M={padding:0,margin:0},A=(f?YT(u,f):u).map(function(T,B){if(T.type==="none")return null;var z=Sk({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},o),U=T.formatter||h||Uwe,E=T.value,$=T.name,G=E,oe=$;if(U&&G!=null&&oe!=null){var ee=U(E,$,T,B,u);if(Array.isArray(ee)){var ce=Owe(ee,2);G=ce[0],oe=ce[1]}else G=ee}return X.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:z},An(oe)?X.createElement("span",{className:"recharts-tooltip-item-name"},oe):null,An(oe)?X.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,X.createElement("span",{className:"recharts-tooltip-item-value"},G),X.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return X.createElement("ul",{className:"recharts-tooltip-item-list",style:M},A)}return null},p=Sk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),N=Sk({margin:0},d),k=!Tt(x),S=k?x:"",P=Ot("recharts-default-tooltip",m),_=Ot("recharts-tooltip-label",g);k&&w&&u!==void 0&&u!==null&&(S=w(x,u));var R=y?{role:"status","aria-live":"assertive"}:{};return X.createElement("div",CC({className:P,style:p},R),X.createElement("p",{className:_,style:N},X.isValidElement(S)?S:"".concat(S)),b())};function ag(e){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ag(e)}function Gy(e,t,n){return t=zwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zwe(e){var t=Vwe(e,"string");return ag(t)=="symbol"?t:t+""}function Vwe(e,t){if(ag(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(ag(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wp="recharts-tooltip-wrapper",qwe={visibility:"hidden"};function Wwe(e){var t=e.coordinate,n=e.translateX,s=e.translateY;return Ot(wp,Gy(Gy(Gy(Gy({},"".concat(wp,"-right"),ze(n)&&t&&ze(t.x)&&n>=t.x),"".concat(wp,"-left"),ze(n)&&t&&ze(t.x)&&n<t.x),"".concat(wp,"-bottom"),ze(s)&&t&&ze(t.y)&&s>=t.y),"".concat(wp,"-top"),ze(s)&&t&&ze(t.y)&&s<t.y))}function _M(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.key,a=e.offsetTopLeft,i=e.position,l=e.reverseDirection,o=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&ze(i[s]))return i[s];var u=n[s]-o-a,h=n[s]+a;if(t[s])return l[s]?u:h;if(l[s]){var f=u,m=c[s];return f<m?Math.max(h,c[s]):Math.max(u,c[s])}var g=h+o,x=c[s]+d;return g>x?Math.max(u,c[s]):Math.max(h,c[s])}function Hwe(e){var t=e.translateX,n=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Kwe(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,l=e.tooltipBox,o=e.useTranslate3d,c=e.viewBox,d,u,h;return l.height>0&&l.width>0&&n?(u=_M({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),h=_M({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=Hwe({translateX:u,translateY:h,useTranslate3d:o})):d=qwe,{cssProperties:d,cssClasses:Wwe({translateX:u,translateY:h,coordinate:n})}}function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}function AM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function TM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AM(Object(n),!0).forEach(function(s){_C(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Gwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ywe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Bz(s.key),s)}}function Xwe(e,t,n){return t&&Ywe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zwe(e,t,n){return t=Wb(t),Qwe(e,Uz()?Reflect.construct(t,n||[],Wb(e).constructor):t.apply(e,n))}function Qwe(e,t){if(t&&(Gf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jwe(e)}function Jwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uz=function(){return!!e})()}function Wb(e){return Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wb(e)}function e1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PC(e,t)}function PC(e,t){return PC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},PC(e,t)}function _C(e,t,n){return t=Bz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bz(e){var t=t1e(e,"string");return Gf(t)=="symbol"?t:t+""}function t1e(e,t){if(Gf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Gf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EM=1,r1e=function(e){function t(){var n;Gwe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=Zwe(this,t,[].concat(a)),_C(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),_C(n,"handleKeyDown",function(l){if(l.key==="Escape"){var o,c,d,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),n}return e1e(t,e),Xwe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>EM||Math.abs(s.height-this.state.lastBoundingBox.height)>EM)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,h=a.hasPayload,f=a.isAnimationActive,m=a.offset,g=a.position,x=a.reverseDirection,w=a.useTranslate3d,j=a.viewBox,y=a.wrapperStyle,b=Kwe({allowEscapeViewBox:l,coordinate:u,offsetTopLeft:m,position:g,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:j}),p=b.cssClasses,N=b.cssProperties,k=TM(TM({transition:f&&i?"transform ".concat(o,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},y);return X.createElement("div",{tabIndex:-1,className:p,style:k,ref:function(P){s.wrapperNode=P}},d)}}])}(v.PureComponent),n1e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ai={isSsr:n1e(),get:function(t){return Ai[t]},set:function(t,n){if(typeof t=="string")Ai[t]=n;else{var s=Object.keys(t);s&&s.length&&s.forEach(function(a){Ai[a]=t[a]})}}};function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(e)}function OM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function RM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OM(Object(n),!0).forEach(function(s){XT(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function s1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a1e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Vz(s.key),s)}}function i1e(e,t,n){return t&&a1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function l1e(e,t,n){return t=Hb(t),o1e(e,zz()?Reflect.construct(t,n||[],Hb(e).constructor):t.apply(e,n))}function o1e(e,t){if(t&&(Yf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c1e(e)}function c1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zz=function(){return!!e})()}function Hb(e){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hb(e)}function d1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AC(e,t)}function AC(e,t){return AC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},AC(e,t)}function XT(e,t,n){return t=Vz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vz(e){var t=u1e(e,"string");return Yf(t)=="symbol"?t:t+""}function u1e(e,t){if(Yf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Yf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h1e(e){return e.dataKey}function f1e(e,t){return X.isValidElement(e)?X.cloneElement(e,t):typeof e=="function"?X.createElement(e,t):X.createElement(Bwe,t)}var tn=function(e){function t(){return s1e(this,t),l1e(this,t,arguments)}return d1e(t,e),i1e(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,h=a.filterNull,f=a.isAnimationActive,m=a.offset,g=a.payload,x=a.payloadUniqBy,w=a.position,j=a.reverseDirection,y=a.useTranslate3d,b=a.viewBox,p=a.wrapperStyle,N=g??[];h&&N.length&&(N=Oz(g.filter(function(S){return S.value!=null&&(S.hide!==!0||s.props.includeHidden)}),x,h1e));var k=N.length>0;return X.createElement(r1e,{allowEscapeViewBox:l,animationDuration:o,animationEasing:c,isAnimationActive:f,active:i,coordinate:u,hasPayload:k,offset:m,position:w,reverseDirection:j,useTranslate3d:y,viewBox:b,wrapperStyle:p},f1e(d,RM(RM({},this.props),{},{payload:N})))}}])}(v.PureComponent);XT(tn,"displayName","Tooltip");XT(tn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ai.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var m1e=Ml,p1e=function(){return m1e.Date.now()},x1e=p1e,g1e=/\s/;function v1e(e){for(var t=e.length;t--&&g1e.test(e.charAt(t)););return t}var y1e=v1e,b1e=y1e,j1e=/^\s+/;function w1e(e){return e&&e.slice(0,b1e(e)+1).replace(j1e,"")}var N1e=w1e,k1e=N1e,DM=rd,S1e=Lm,MM=NaN,C1e=/^[-+]0x[0-9a-f]+$/i,P1e=/^0b[01]+$/i,_1e=/^0o[0-7]+$/i,A1e=parseInt;function T1e(e){if(typeof e=="number")return e;if(S1e(e))return MM;if(DM(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=DM(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=k1e(e);var n=P1e.test(e);return n||_1e.test(e)?A1e(e.slice(2),n?2:8):C1e.test(e)?MM:+e}var qz=T1e,E1e=rd,Ck=x1e,$M=qz,O1e="Expected a function",R1e=Math.max,D1e=Math.min;function M1e(e,t,n){var s,a,i,l,o,c,d=0,u=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(O1e);t=$M(t)||0,E1e(n)&&(u=!!n.leading,h="maxWait"in n,i=h?R1e($M(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f);function m(k){var S=s,P=a;return s=a=void 0,d=k,l=e.apply(P,S),l}function g(k){return d=k,o=setTimeout(j,t),u?m(k):l}function x(k){var S=k-c,P=k-d,_=t-S;return h?D1e(_,i-P):_}function w(k){var S=k-c,P=k-d;return c===void 0||S>=t||S<0||h&&P>=i}function j(){var k=Ck();if(w(k))return y(k);o=setTimeout(j,x(k))}function y(k){return o=void 0,f&&s?m(k):(s=a=void 0,l)}function b(){o!==void 0&&clearTimeout(o),d=0,s=c=a=o=void 0}function p(){return o===void 0?l:y(Ck())}function N(){var k=Ck(),S=w(k);if(s=arguments,a=this,c=k,S){if(o===void 0)return g(c);if(h)return clearTimeout(o),o=setTimeout(j,t),m(c)}return o===void 0&&(o=setTimeout(j,t)),l}return N.cancel=b,N.flush=p,N}var Wz=M1e;const $1e=er(Wz);var I1e=Wz,F1e=rd,L1e="Expected a function";function U1e(e,t,n){var s=!0,a=!0;if(typeof e!="function")throw new TypeError(L1e);return F1e(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),I1e(e,t,{leading:s,maxWait:t,trailing:a})}var B1e=U1e;const ZT=er(B1e);function ig(e){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ig(e)}function IM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Yy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IM(Object(n),!0).forEach(function(s){z1e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function z1e(e,t,n){return t=V1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V1e(e){var t=q1e(e,"string");return ig(t)=="symbol"?t:t+""}function q1e(e,t){if(ig(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(ig(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W1e(e,t){return Y1e(e)||G1e(e,t)||K1e(e,t)||H1e()}function H1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K1e(e,t){if(e){if(typeof e=="string")return FM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FM(e,t)}}function FM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function G1e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Y1e(e){if(Array.isArray(e))return e}var xa=v.forwardRef(function(e,t){var n=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,i=e.width,l=i===void 0?"100%":i,o=e.height,c=o===void 0?"100%":o,d=e.minWidth,u=d===void 0?0:d,h=e.minHeight,f=e.maxHeight,m=e.children,g=e.debounce,x=g===void 0?0:g,w=e.id,j=e.className,y=e.onResize,b=e.style,p=b===void 0?{}:b,N=v.useRef(null),k=v.useRef();k.current=y,v.useImperativeHandle(t,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var S=v.useState({containerWidth:a.width,containerHeight:a.height}),P=W1e(S,2),_=P[0],R=P[1],O=v.useCallback(function(A,T){R(function(B){var z=Math.round(A),U=Math.round(T);return B.containerWidth===z&&B.containerHeight===U?B:{containerWidth:z,containerHeight:U}})},[]);v.useEffect(function(){var A=function($){var G,oe=$[0].contentRect,ee=oe.width,ce=oe.height;O(ee,ce),(G=k.current)===null||G===void 0||G.call(k,ee,ce)};x>0&&(A=ZT(A,x,{trailing:!0,leading:!1}));var T=new ResizeObserver(A),B=N.current.getBoundingClientRect(),z=B.width,U=B.height;return O(z,U),T.observe(N.current),function(){T.disconnect()}},[O,x]);var M=v.useMemo(function(){var A=_.containerWidth,T=_.containerHeight;if(A<0||T<0)return null;_i(Pd(l)||Pd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,c),_i(!n||n>0,"The aspect(%s) must be greater than zero.",n);var B=Pd(l)?A:l,z=Pd(c)?T:c;n&&n>0&&(B?z=B/n:z&&(B=z*n),f&&z>f&&(z=f)),_i(B>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,z,l,c,u,h,n);var U=!Array.isArray(m)&&po(m.type).endsWith("Chart");return X.Children.map(m,function(E){return X.isValidElement(E)?v.cloneElement(E,Yy({width:B,height:z},U?{style:Yy({height:"100%",width:"100%",maxHeight:z,maxWidth:B},E.props.style)}:{})):E})},[n,m,c,f,h,u,_,l]);return X.createElement("div",{id:w?"".concat(w):void 0,className:Ot("recharts-responsive-container",j),style:Yy(Yy({},p),{},{width:l,height:c,minWidth:u,minHeight:h,maxHeight:f}),ref:N},M)}),Gm=function(t){return null};Gm.displayName="Cell";function lg(e){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lg(e)}function LM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function TC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LM(Object(n),!0).forEach(function(s){X1e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function X1e(e,t,n){return t=Z1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z1e(e){var t=Q1e(e,"string");return lg(t)=="symbol"?t:t+""}function Q1e(e,t){if(lg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(lg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ju={widthCache:{},cacheCount:0},J1e=2e3,eNe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UM="recharts_measurement_span";function tNe(e){var t=TC({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var ux=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ai.isSsr)return{width:0,height:0};var s=tNe(n),a=JSON.stringify({text:t,copyStyle:s});if(Ju.widthCache[a])return Ju.widthCache[a];try{var i=document.getElementById(UM);i||(i=document.createElement("span"),i.setAttribute("id",UM),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=TC(TC({},eNe),s);Object.assign(i.style,l),i.textContent="".concat(t);var o=i.getBoundingClientRect(),c={width:o.width,height:o.height};return Ju.widthCache[a]=c,++Ju.cacheCount>J1e&&(Ju.cacheCount=0,Ju.widthCache={}),c}catch{return{width:0,height:0}}},rNe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function og(e){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},og(e)}function Kb(e,t){return iNe(e)||aNe(e,t)||sNe(e,t)||nNe()}function nNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sNe(e,t){if(e){if(typeof e=="string")return BM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BM(e,t)}}function BM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function aNe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function iNe(e){if(Array.isArray(e))return e}function lNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zM(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,cNe(s.key),s)}}function oNe(e,t,n){return t&&zM(e.prototype,t),n&&zM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cNe(e){var t=dNe(e,"string");return og(t)=="symbol"?t:t+""}function dNe(e,t){if(og(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(og(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uNe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,hNe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Hz={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},fNe=Object.keys(Hz),jh="NaN";function mNe(e,t){return e*Hz[t]}var Xy=function(){function e(t,n){lNe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!uNe.test(n)&&(this.num=NaN,this.unit=""),fNe.includes(n)&&(this.num=mNe(t,n),this.unit="px")}return oNe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var s,a=(s=hNe.exec(n))!==null&&s!==void 0?s:[],i=Kb(a,3),l=i[1],o=i[2];return new e(parseFloat(l),o??"")}}])}();function Kz(e){if(e.includes(jh))return jh;for(var t=e;t.includes("*")||t.includes("/");){var n,s=(n=VM.exec(t))!==null&&n!==void 0?n:[],a=Kb(s,4),i=a[1],l=a[2],o=a[3],c=Xy.parse(i??""),d=Xy.parse(o??""),u=l==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return jh;t=t.replace(VM,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,f=(h=qM.exec(t))!==null&&h!==void 0?h:[],m=Kb(f,4),g=m[1],x=m[2],w=m[3],j=Xy.parse(g??""),y=Xy.parse(w??""),b=x==="+"?j.add(y):j.subtract(y);if(b.isNaN())return jh;t=t.replace(qM,b.toString())}return t}var WM=/\(([^()]*)\)/;function pNe(e){for(var t=e;t.includes("(");){var n=WM.exec(t),s=Kb(n,2),a=s[1];t=t.replace(WM,Kz(a))}return t}function xNe(e){var t=e.replace(/\s+/g,"");return t=pNe(t),t=Kz(t),t}function gNe(e){try{return xNe(e)}catch{return jh}}function Pk(e){var t=gNe(e.slice(5,-1));return t===jh?"":t}var vNe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],yNe=["dx","dy","angle","className","breakAll"];function EC(){return EC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},EC.apply(this,arguments)}function HM(e,t){if(e==null)return{};var n=bNe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function bNe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function KM(e,t){return kNe(e)||NNe(e,t)||wNe(e,t)||jNe()}function jNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wNe(e,t){if(e){if(typeof e=="string")return GM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GM(e,t)}}function GM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function NNe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function kNe(e){if(Array.isArray(e))return e}var Gz=/[ \f\n\r\t\v\u2028\u2029]+/,Yz=function(t){var n=t.children,s=t.breakAll,a=t.style;try{var i=[];Tt(n)||(s?i=n.toString().split(""):i=n.toString().split(Gz));var l=i.map(function(c){return{word:c,width:ux(c,a).width}}),o=s?0:ux(" ",a).width;return{wordsWithComputedWidth:l,spaceWidth:o}}catch{return null}},SNe=function(t,n,s,a,i){var l=t.maxLines,o=t.children,c=t.style,d=t.breakAll,u=ze(l),h=o,f=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(z,U){var E=U.word,$=U.width,G=z[z.length-1];if(G&&(a==null||i||G.width+$+s<Number(a)))G.words.push(E),G.width+=$+s;else{var oe={words:[E],width:$};z.push(oe)}return z},[])},m=f(n),g=function(B){return B.reduce(function(z,U){return z.width>U.width?z:U})};if(!u)return m;for(var x="…",w=function(B){var z=h.slice(0,B),U=Yz({breakAll:d,style:c,children:z+x}).wordsWithComputedWidth,E=f(U),$=E.length>l||g(E).width>Number(a);return[$,E]},j=0,y=h.length-1,b=0,p;j<=y&&b<=h.length-1;){var N=Math.floor((j+y)/2),k=N-1,S=w(k),P=KM(S,2),_=P[0],R=P[1],O=w(N),M=KM(O,1),A=M[0];if(!_&&!A&&(j=N+1),_&&A&&(y=N-1),!_&&A){p=R;break}b++}return p||m},YM=function(t){var n=Tt(t)?[]:t.toString().split(Gz);return[{words:n}]},CNe=function(t){var n=t.width,s=t.scaleToFit,a=t.children,i=t.style,l=t.breakAll,o=t.maxLines;if((n||s)&&!Ai.isSsr){var c,d,u=Yz({breakAll:l,children:a,style:i});if(u){var h=u.wordsWithComputedWidth,f=u.spaceWidth;c=h,d=f}else return YM(a);return SNe({breakAll:l,children:a,maxLines:o,style:i},c,d,n,s)}return YM(a)},XM="#808080",ju=function(t){var n=t.x,s=n===void 0?0:n,a=t.y,i=a===void 0?0:a,l=t.lineHeight,o=l===void 0?"1em":l,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,h=u===void 0?!1:u,f=t.textAnchor,m=f===void 0?"start":f,g=t.verticalAnchor,x=g===void 0?"end":g,w=t.fill,j=w===void 0?XM:w,y=HM(t,vNe),b=v.useMemo(function(){return CNe({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),p=y.dx,N=y.dy,k=y.angle,S=y.className,P=y.breakAll,_=HM(y,yNe);if(!An(s)||!An(i))return null;var R=s+(ze(p)?p:0),O=i+(ze(N)?N:0),M;switch(x){case"start":M=Pk("calc(".concat(d,")"));break;case"middle":M=Pk("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(d," / 2))"));break;default:M=Pk("calc(".concat(b.length-1," * -").concat(o,")"));break}var A=[];if(h){var T=b[0].width,B=y.width;A.push("scale(".concat((ze(B)?B/T:1)/T,")"))}return k&&A.push("rotate(".concat(k,", ").concat(R,", ").concat(O,")")),A.length&&(_.transform=A.join(" ")),X.createElement("text",EC({},ot(_,!0),{x:R,y:O,className:Ot("recharts-text",S),textAnchor:m,fill:j.includes("url")?XM:j}),b.map(function(z,U){var E=z.words.join(P?"":" ");return X.createElement("tspan",{x:R,dy:U===0?M:o,key:"".concat(E,"-").concat(U)},E)}))};function Rc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function PNe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function QT(e){let t,n,s;e.length!==2?(t=Rc,n=(o,c)=>Rc(e(o),c),s=(o,c)=>e(o)-c):(t=e===Rc||e===PNe?e:_Ne,n=e,s=e);function a(o,c,d=0,u=o.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;n(o[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(o,c,d=0,u=o.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;n(o[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function l(o,c,d=0,u=o.length){const h=a(o,c,d,u-1);return h>d&&s(o[h-1],c)>-s(o[h],c)?h-1:h}return{left:a,center:l,right:i}}function _Ne(){return 0}function Xz(e){return e===null?NaN:+e}function*ANe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const TNe=QT(Rc),Zv=TNe.right;QT(Xz).center;class ZM extends Map{constructor(t,n=RNe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,a]of t)this.set(s,a)}get(t){return super.get(QM(this,t))}has(t){return super.has(QM(this,t))}set(t,n){return super.set(ENe(this,t),n)}delete(t){return super.delete(ONe(this,t))}}function QM({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function ENe({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function ONe({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function RNe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function DNe(e=Rc){if(e===Rc)return Zz;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const s=e(t,n);return s||s===0?s:(e(n,n)===0)-(e(t,t)===0)}}function Zz(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const MNe=Math.sqrt(50),$Ne=Math.sqrt(10),INe=Math.sqrt(2);function Gb(e,t,n){const s=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),l=i>=MNe?10:i>=$Ne?5:i>=INe?2:1;let o,c,d;return a<0?(d=Math.pow(10,-a)/l,o=Math.round(e*d),c=Math.round(t*d),o/d<e&&++o,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*l,o=Math.round(e/d),c=Math.round(t/d),o*d<e&&++o,c*d>t&&--c),c<o&&.5<=n&&n<2?Gb(e,t,n*2):[o,c,d]}function OC(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const s=t<e,[a,i,l]=s?Gb(t,e,n):Gb(e,t,n);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(s)if(l<0)for(let d=0;d<o;++d)c[d]=(i-d)/-l;else for(let d=0;d<o;++d)c[d]=(i-d)*l;else if(l<0)for(let d=0;d<o;++d)c[d]=(a+d)/-l;else for(let d=0;d<o;++d)c[d]=(a+d)*l;return c}function RC(e,t,n){return t=+t,e=+e,n=+n,Gb(e,t,n)[2]}function DC(e,t,n){t=+t,e=+e,n=+n;const s=t<e,a=s?RC(t,e,n):RC(e,t,n);return(s?-1:1)*(a<0?1/-a:a)}function JM(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function e$(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function Qz(e,t,n=0,s=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),s=Math.floor(Math.min(e.length-1,s)),!(n<=t&&t<=s))return e;for(a=a===void 0?Zz:DNe(a);s>n;){if(s-n>600){const c=s-n+1,d=t-n+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),m=Math.max(n,Math.floor(t-d*h/c+f)),g=Math.min(s,Math.floor(t+(c-d)*h/c+f));Qz(e,t,m,g,a)}const i=e[t];let l=n,o=s;for(Np(e,n,t),a(e[s],i)>0&&Np(e,n,s);l<o;){for(Np(e,l,o),++l,--o;a(e[l],i)<0;)++l;for(;a(e[o],i)>0;)--o}a(e[n],i)===0?Np(e,n,o):(++o,Np(e,o,s)),o<=t&&(n=o+1),t<=o&&(s=o-1)}return e}function Np(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function FNe(e,t,n){if(e=Float64Array.from(ANe(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return e$(e);if(t>=1)return JM(e);var s,a=(s-1)*t,i=Math.floor(a),l=JM(Qz(e,i).subarray(0,i+1)),o=e$(e.subarray(i+1));return l+(o-l)*(a-i)}}function LNe(e,t,n=Xz){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,a=(s-1)*t,i=Math.floor(a),l=+n(e[i],i,e),o=+n(e[i+1],i+1,e);return l+(o-l)*(a-i)}}function UNe(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++s<a;)i[s]=e+s*n;return i}function Qa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Mo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const MC=Symbol("implicit");function JT(){var e=new ZM,t=[],n=[],s=MC;function a(i){let l=e.get(i);if(l===void 0){if(s!==MC)return s;e.set(i,l=t.push(i)-1)}return n[l%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new ZM;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return JT(t,n).unknown(s)},Qa.apply(a,arguments),a}function cg(){var e=JT().unknown(void 0),t=e.domain,n=e.range,s=0,a=1,i,l,o=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var f=t().length,m=a<s,g=m?a:s,x=m?s:a;i=(x-g)/Math.max(1,f-c+d*2),o&&(i=Math.floor(i)),g+=(x-g-i*(f-c))*u,l=i*(1-c),o&&(g=Math.round(g),l=Math.round(l));var w=UNe(f).map(function(j){return g+i*j});return n(m?w.reverse():w)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([s,a]=f,s=+s,a=+a,h()):[s,a]},e.rangeRound=function(f){return[s,a]=f,s=+s,a=+a,o=!0,h()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,h()):o},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return cg(t(),[s,a]).round(o).paddingInner(c).paddingOuter(d).align(u)},Qa.apply(h(),arguments)}function Jz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Jz(t())},e}function hx(){return Jz(cg.apply(null,arguments).paddingInner(1))}function e4(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function eV(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Qv(){}var dg=.7,Yb=1/dg,Vh="\\s*([+-]?\\d+)\\s*",ug="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BNe=/^#([0-9a-f]{3,8})$/,zNe=new RegExp(`^rgb\\(${Vh},${Vh},${Vh}\\)$`),VNe=new RegExp(`^rgb\\(${Nl},${Nl},${Nl}\\)$`),qNe=new RegExp(`^rgba\\(${Vh},${Vh},${Vh},${ug}\\)$`),WNe=new RegExp(`^rgba\\(${Nl},${Nl},${Nl},${ug}\\)$`),HNe=new RegExp(`^hsl\\(${ug},${Nl},${Nl}\\)$`),KNe=new RegExp(`^hsla\\(${ug},${Nl},${Nl},${ug}\\)$`),t$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e4(Qv,hg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:r$,formatHex:r$,formatHex8:GNe,formatHsl:YNe,formatRgb:n$,toString:n$});function r$(){return this.rgb().formatHex()}function GNe(){return this.rgb().formatHex8()}function YNe(){return tV(this).formatHsl()}function n$(){return this.rgb().formatRgb()}function hg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=BNe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?s$(t):n===3?new Vs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Zy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Zy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zNe.exec(e))?new Vs(t[1],t[2],t[3],1):(t=VNe.exec(e))?new Vs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=qNe.exec(e))?Zy(t[1],t[2],t[3],t[4]):(t=WNe.exec(e))?Zy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=HNe.exec(e))?l$(t[1],t[2]/100,t[3]/100,1):(t=KNe.exec(e))?l$(t[1],t[2]/100,t[3]/100,t[4]):t$.hasOwnProperty(e)?s$(t$[e]):e==="transparent"?new Vs(NaN,NaN,NaN,0):null}function s$(e){return new Vs(e>>16&255,e>>8&255,e&255,1)}function Zy(e,t,n,s){return s<=0&&(e=t=n=NaN),new Vs(e,t,n,s)}function XNe(e){return e instanceof Qv||(e=hg(e)),e?(e=e.rgb(),new Vs(e.r,e.g,e.b,e.opacity)):new Vs}function $C(e,t,n,s){return arguments.length===1?XNe(e):new Vs(e,t,n,s??1)}function Vs(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}e4(Vs,$C,eV(Qv,{brighter(e){return e=e==null?Yb:Math.pow(Yb,e),new Vs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dg:Math.pow(dg,e),new Vs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vs(nu(this.r),nu(this.g),nu(this.b),Xb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:a$,formatHex:a$,formatHex8:ZNe,formatRgb:i$,toString:i$}));function a$(){return`#${_d(this.r)}${_d(this.g)}${_d(this.b)}`}function ZNe(){return`#${_d(this.r)}${_d(this.g)}${_d(this.b)}${_d((isNaN(this.opacity)?1:this.opacity)*255)}`}function i$(){const e=Xb(this.opacity);return`${e===1?"rgb(":"rgba("}${nu(this.r)}, ${nu(this.g)}, ${nu(this.b)}${e===1?")":`, ${e})`}`}function Xb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _d(e){return e=nu(e),(e<16?"0":"")+e.toString(16)}function l$(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bi(e,t,n,s)}function tV(e){if(e instanceof bi)return new bi(e.h,e.s,e.l,e.opacity);if(e instanceof Qv||(e=hg(e)),!e)return new bi;if(e instanceof bi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,a=Math.min(t,n,s),i=Math.max(t,n,s),l=NaN,o=i-a,c=(i+a)/2;return o?(t===i?l=(n-s)/o+(n<s)*6:n===i?l=(s-t)/o+2:l=(t-n)/o+4,o/=c<.5?i+a:2-i-a,l*=60):o=c>0&&c<1?0:l,new bi(l,o,c,e.opacity)}function QNe(e,t,n,s){return arguments.length===1?tV(e):new bi(e,t,n,s??1)}function bi(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}e4(bi,QNe,eV(Qv,{brighter(e){return e=e==null?Yb:Math.pow(Yb,e),new bi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dg:Math.pow(dg,e),new bi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,a=2*n-s;return new Vs(_k(e>=240?e-240:e+120,a,s),_k(e,a,s),_k(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new bi(o$(this.h),Qy(this.s),Qy(this.l),Xb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Xb(this.opacity);return`${e===1?"hsl(":"hsla("}${o$(this.h)}, ${Qy(this.s)*100}%, ${Qy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function o$(e){return e=(e||0)%360,e<0?e+360:e}function Qy(e){return Math.max(0,Math.min(1,e||0))}function _k(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const t4=e=>()=>e;function JNe(e,t){return function(n){return e+n*t}}function eke(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function tke(e){return(e=+e)==1?rV:function(t,n){return n-t?eke(t,n,e):t4(isNaN(t)?n:t)}}function rV(e,t){var n=t-e;return n?JNe(e,n):t4(isNaN(e)?t:e)}const c$=function e(t){var n=tke(t);function s(a,i){var l=n((a=$C(a)).r,(i=$C(i)).r),o=n(a.g,i.g),c=n(a.b,i.b),d=rV(a.opacity,i.opacity);return function(u){return a.r=l(u),a.g=o(u),a.b=c(u),a.opacity=d(u),a+""}}return s.gamma=e,s}(1);function rke(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),a;return function(i){for(a=0;a<n;++a)s[a]=e[a]*(1-i)+t[a]*i;return s}}function nke(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ske(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,a=new Array(s),i=new Array(n),l;for(l=0;l<s;++l)a[l]=Ym(e[l],t[l]);for(;l<n;++l)i[l]=t[l];return function(o){for(l=0;l<s;++l)i[l]=a[l](o);return i}}function ake(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function Zb(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ike(e,t){var n={},s={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Ym(e[a],t[a]):s[a]=t[a];return function(i){for(a in n)s[a]=n[a](i);return s}}var IC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ak=new RegExp(IC.source,"g");function lke(e){return function(){return e}}function oke(e){return function(t){return e(t)+""}}function cke(e,t){var n=IC.lastIndex=Ak.lastIndex=0,s,a,i,l=-1,o=[],c=[];for(e=e+"",t=t+"";(s=IC.exec(e))&&(a=Ak.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),o[l]?o[l]+=i:o[++l]=i),(s=s[0])===(a=a[0])?o[l]?o[l]+=a:o[++l]=a:(o[++l]=null,c.push({i:l,x:Zb(s,a)})),n=Ak.lastIndex;return n<t.length&&(i=t.slice(n),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?oke(c[0].x):lke(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)o[(h=c[u]).i]=h.x(d);return o.join("")})}function Ym(e,t){var n=typeof t,s;return t==null||n==="boolean"?t4(t):(n==="number"?Zb:n==="string"?(s=hg(t))?(t=s,c$):cke:t instanceof hg?c$:t instanceof Date?ake:nke(t)?rke:Array.isArray(t)?ske:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ike:Zb)(e,t)}function r4(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function dke(e,t){t===void 0&&(t=e,e=Ym);for(var n=0,s=t.length-1,a=t[0],i=new Array(s<0?0:s);n<s;)i[n]=e(a,a=t[++n]);return function(l){var o=Math.max(0,Math.min(s-1,Math.floor(l*=s)));return i[o](l-o)}}function uke(e){return function(){return e}}function Qb(e){return+e}var d$=[0,1];function Ss(e){return e}function FC(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:uke(isNaN(t)?NaN:.5)}function hke(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function fke(e,t,n){var s=e[0],a=e[1],i=t[0],l=t[1];return a<s?(s=FC(a,s),i=n(l,i)):(s=FC(s,a),i=n(i,l)),function(o){return i(s(o))}}function mke(e,t,n){var s=Math.min(e.length,t.length)-1,a=new Array(s),i=new Array(s),l=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<s;)a[l]=FC(e[l],e[l+1]),i[l]=n(t[l],t[l+1]);return function(o){var c=Zv(e,o,1,s)-1;return i[c](a[c](o))}}function Jv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function I1(){var e=d$,t=d$,n=Ym,s,a,i,l=Ss,o,c,d;function u(){var f=Math.min(e.length,t.length);return l!==Ss&&(l=hke(e[0],e[f-1])),o=f>2?mke:fke,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=o(e.map(s),t,n)))(s(l(f)))}return h.invert=function(f){return l(a((d||(d=o(t,e.map(s),Zb)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Qb),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=r4,u()},h.clamp=function(f){return arguments.length?(l=f?!0:Ss,u()):l!==Ss},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,m){return s=f,a=m,u()}}function n4(){return I1()(Ss,Ss)}function pke(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Jb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function Xf(e){return e=Jb(Math.abs(e)),e?e[1]:NaN}function xke(e,t){return function(n,s){for(var a=n.length,i=[],l=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>s&&(o=Math.max(1,s-c)),i.push(n.substring(a-=o,a+o)),!((c+=o+1)>s));)o=e[l=(l+1)%e.length];return i.reverse().join(t)}}function gke(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var vke=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fg(e){if(!(t=vke.exec(e)))throw new Error("invalid format: "+e);var t;return new s4({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fg.prototype=s4.prototype;function s4(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}s4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yke(e){e:for(var t=e.length,n=1,s=-1,a;n<t;++n)switch(e[n]){case".":s=a=n;break;case"0":s===0&&(s=n),a=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var nV;function bke(e,t){var n=Jb(e,t);if(!n)return e+"";var s=n[0],a=n[1],i=a-(nV=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=s.length;return i===l?s:i>l?s+new Array(i-l+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+Jb(e,Math.max(0,t+i-1))[0]}function u$(e,t){var n=Jb(e,t);if(!n)return e+"";var s=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const h$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:pke,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>u$(e*100,t),r:u$,s:bke,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function f$(e){return e}var m$=Array.prototype.map,p$=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function jke(e){var t=e.grouping===void 0||e.thousands===void 0?f$:xke(m$.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?f$:gke(m$.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=fg(h);var f=h.fill,m=h.align,g=h.sign,x=h.symbol,w=h.zero,j=h.width,y=h.comma,b=h.precision,p=h.trim,N=h.type;N==="n"?(y=!0,N="g"):h$[N]||(b===void 0&&(b=12),p=!0,N="g"),(w||f==="0"&&m==="=")&&(w=!0,f="0",m="=");var k=x==="$"?n:x==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",S=x==="$"?s:/[%p]/.test(N)?l:"",P=h$[N],_=/[defgprs%]/.test(N);b=b===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function R(O){var M=k,A=S,T,B,z;if(N==="c")A=P(O)+A,O="";else{O=+O;var U=O<0||1/O<0;if(O=isNaN(O)?c:P(Math.abs(O),b),p&&(O=yke(O)),U&&+O==0&&g!=="+"&&(U=!1),M=(U?g==="("?g:o:g==="-"||g==="("?"":g)+M,A=(N==="s"?p$[8+nV/3]:"")+A+(U&&g==="("?")":""),_){for(T=-1,B=O.length;++T<B;)if(z=O.charCodeAt(T),48>z||z>57){A=(z===46?a+O.slice(T+1):O.slice(T))+A,O=O.slice(0,T);break}}}y&&!w&&(O=t(O,1/0));var E=M.length+O.length+A.length,$=E<j?new Array(j-E+1).join(f):"";switch(y&&w&&(O=t($+O,$.length?j-A.length:1/0),$=""),m){case"<":O=M+O+A+$;break;case"=":O=M+$+O+A;break;case"^":O=$.slice(0,E=$.length>>1)+M+O+A+$.slice(E);break;default:O=$+M+O+A;break}return i(O)}return R.toString=function(){return h+""},R}function u(h,f){var m=d((h=fg(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(Xf(f)/3)))*3,x=Math.pow(10,-g),w=p$[8+g/3];return function(j){return m(x*j)+w}}return{format:d,formatPrefix:u}}var Jy,a4,sV;wke({thousands:",",grouping:[3],currency:["$",""]});function wke(e){return Jy=jke(e),a4=Jy.format,sV=Jy.formatPrefix,Jy}function Nke(e){return Math.max(0,-Xf(Math.abs(e)))}function kke(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xf(t)/3)))*3-Xf(Math.abs(e)))}function Ske(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Xf(t)-Xf(e))+1}function aV(e,t,n,s){var a=DC(e,t,n),i;switch(s=fg(s??",f"),s.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=kke(a,l))&&(s.precision=i),sV(s,l)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=Ske(a,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=Nke(a))&&(s.precision=i-(s.type==="%")*2);break}}return a4(s)}function nd(e){var t=e.domain;return e.ticks=function(n){var s=t();return OC(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var a=t();return aV(a[0],a[a.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),a=0,i=s.length-1,l=s[a],o=s[i],c,d,u=10;for(o<l&&(d=l,l=o,o=d,d=a,a=i,i=d);u-- >0;){if(d=RC(l,o,n),d===c)return s[a]=l,s[i]=o,t(s);if(d>0)l=Math.floor(l/d)*d,o=Math.ceil(o/d)*d;else if(d<0)l=Math.ceil(l*d)/d,o=Math.floor(o*d)/d;else break;c=d}return e},e}function ej(){var e=n4();return e.copy=function(){return Jv(e,ej())},Qa.apply(e,arguments),nd(e)}function iV(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,Qb),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return iV(e).unknown(t)},e=arguments.length?Array.from(e,Qb):[0,1],nd(n)}function lV(e,t){e=e.slice();var n=0,s=e.length-1,a=e[n],i=e[s],l;return i<a&&(l=n,n=s,s=l,l=a,a=i,i=l),e[n]=t.floor(a),e[s]=t.ceil(i),e}function x$(e){return Math.log(e)}function g$(e){return Math.exp(e)}function Cke(e){return-Math.log(-e)}function Pke(e){return-Math.exp(-e)}function _ke(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Ake(e){return e===10?_ke:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Tke(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function v$(e){return(t,n)=>-e(-t,n)}function i4(e){const t=e(x$,g$),n=t.domain;let s=10,a,i;function l(){return a=Tke(s),i=Ake(s),n()[0]<0?(a=v$(a),i=v$(i),e(Cke,Pke)):e(x$,g$),t}return t.base=function(o){return arguments.length?(s=+o,l()):s},t.domain=function(o){return arguments.length?(n(o),l()):n()},t.ticks=o=>{const c=n();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=a(d),m=a(u),g,x;const w=o==null?10:+o;let j=[];if(!(s%1)&&m-f<w){if(f=Math.floor(f),m=Math.ceil(m),d>0){for(;f<=m;++f)for(g=1;g<s;++g)if(x=f<0?g/i(-f):g*i(f),!(x<d)){if(x>u)break;j.push(x)}}else for(;f<=m;++f)for(g=s-1;g>=1;--g)if(x=f>0?g/i(-f):g*i(f),!(x<d)){if(x>u)break;j.push(x)}j.length*2<w&&(j=OC(d,u,w))}else j=OC(f,m,Math.min(m-f,w)).map(i);return h?j.reverse():j},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=fg(c)).precision==null&&(c.trim=!0),c=a4(c)),o===1/0)return c;const d=Math.max(1,s*o/t.ticks().length);return u=>{let h=u/i(Math.round(a(u)));return h*s<s-.5&&(h*=s),h<=d?c(u):""}},t.nice=()=>n(lV(n(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function oV(){const e=i4(I1()).domain([1,10]);return e.copy=()=>Jv(e,oV()).base(e.base()),Qa.apply(e,arguments),e}function y$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function b$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function l4(e){var t=1,n=e(y$(t),b$(t));return n.constant=function(s){return arguments.length?e(y$(t=+s),b$(t)):t},nd(n)}function cV(){var e=l4(I1());return e.copy=function(){return Jv(e,cV()).constant(e.constant())},Qa.apply(e,arguments)}function j$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Eke(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Oke(e){return e<0?-e*e:e*e}function o4(e){var t=e(Ss,Ss),n=1;function s(){return n===1?e(Ss,Ss):n===.5?e(Eke,Oke):e(j$(n),j$(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,s()):n},nd(t)}function c4(){var e=o4(I1());return e.copy=function(){return Jv(e,c4()).exponent(e.exponent())},Qa.apply(e,arguments),e}function Rke(){return c4.apply(null,arguments).exponent(.5)}function w$(e){return Math.sign(e)*e*e}function Dke(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function dV(){var e=n4(),t=[0,1],n=!1,s;function a(i){var l=Dke(e(i));return isNaN(l)?s:n?Math.round(l):l}return a.invert=function(i){return e.invert(w$(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Qb)).map(w$)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return dV(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},Qa.apply(a,arguments),nd(a)}function uV(){var e=[],t=[],n=[],s;function a(){var l=0,o=Math.max(1,t.length);for(n=new Array(o-1);++l<o;)n[l-1]=LNe(e,l/o);return i}function i(l){return l==null||isNaN(l=+l)?s:t[Zv(n,l)]}return i.invertExtent=function(l){var o=t.indexOf(l);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Rc),a()},i.range=function(l){return arguments.length?(t=Array.from(l),a()):t.slice()},i.unknown=function(l){return arguments.length?(s=l,i):s},i.quantiles=function(){return n.slice()},i.copy=function(){return uV().domain(e).range(t).unknown(s)},Qa.apply(i,arguments)}function hV(){var e=0,t=1,n=1,s=[.5],a=[0,1],i;function l(c){return c!=null&&c<=c?a[Zv(s,c,0,n)]:i}function o(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return l}return l.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},l.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,o()):a.slice()},l.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=n?[s[n-1],t]:[s[d-1],s[d]]},l.unknown=function(c){return arguments.length&&(i=c),l},l.thresholds=function(){return s.slice()},l.copy=function(){return hV().domain([e,t]).range(a).unknown(i)},Qa.apply(nd(l),arguments)}function fV(){var e=[.5],t=[0,1],n,s=1;function a(i){return i!=null&&i<=i?t[Zv(e,i,0,s)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return fV().domain(e).range(t).unknown(n)},Qa.apply(a,arguments)}const Tk=new Date,Ek=new Date;function Tn(e,t,n,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const l=a(i),o=a.ceil(i);return i-l<o-i?l:o},a.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),a.range=(i,l,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return c;let d;do c.push(d=new Date(+i)),t(i,o),e(i);while(d<i&&i<l);return c},a.filter=i=>Tn(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;t(l,-1),!i(l););else for(;--o>=0;)for(;t(l,1),!i(l););}),n&&(a.count=(i,l)=>(Tk.setTime(+i),Ek.setTime(+l),e(Tk),e(Ek),Math.floor(n(Tk,Ek))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?l=>s(l)%i===0:l=>a.count(0,l)%i===0):a)),a}const tj=Tn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);tj.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Tn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):tj);tj.range;const oo=1e3,za=oo*60,co=za*60,Co=co*24,d4=Co*7,N$=Co*30,Ok=Co*365,Ad=Tn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*oo)},(e,t)=>(t-e)/oo,e=>e.getUTCSeconds());Ad.range;const u4=Tn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oo)},(e,t)=>{e.setTime(+e+t*za)},(e,t)=>(t-e)/za,e=>e.getMinutes());u4.range;const h4=Tn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*za)},(e,t)=>(t-e)/za,e=>e.getUTCMinutes());h4.range;const f4=Tn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oo-e.getMinutes()*za)},(e,t)=>{e.setTime(+e+t*co)},(e,t)=>(t-e)/co,e=>e.getHours());f4.range;const m4=Tn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*co)},(e,t)=>(t-e)/co,e=>e.getUTCHours());m4.range;const ey=Tn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*za)/Co,e=>e.getDate()-1);ey.range;const F1=Tn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Co,e=>e.getUTCDate()-1);F1.range;const mV=Tn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Co,e=>Math.floor(e/Co));mV.range;function Uu(e){return Tn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*za)/d4)}const L1=Uu(0),rj=Uu(1),Mke=Uu(2),$ke=Uu(3),Zf=Uu(4),Ike=Uu(5),Fke=Uu(6);L1.range;rj.range;Mke.range;$ke.range;Zf.range;Ike.range;Fke.range;function Bu(e){return Tn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/d4)}const U1=Bu(0),nj=Bu(1),Lke=Bu(2),Uke=Bu(3),Qf=Bu(4),Bke=Bu(5),zke=Bu(6);U1.range;nj.range;Lke.range;Uke.range;Qf.range;Bke.range;zke.range;const p4=Tn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());p4.range;const x4=Tn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());x4.range;const Po=Tn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Po.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Tn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Po.range;const _o=Tn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_o.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Tn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});_o.range;function pV(e,t,n,s,a,i){const l=[[Ad,1,oo],[Ad,5,5*oo],[Ad,15,15*oo],[Ad,30,30*oo],[i,1,za],[i,5,5*za],[i,15,15*za],[i,30,30*za],[a,1,co],[a,3,3*co],[a,6,6*co],[a,12,12*co],[s,1,Co],[s,2,2*Co],[n,1,d4],[t,1,N$],[t,3,3*N$],[e,1,Ok]];function o(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const m=h&&typeof h.range=="function"?h:c(d,u,h),g=m?m.range(d,+u+1):[];return f?g.reverse():g}function c(d,u,h){const f=Math.abs(u-d)/h,m=QT(([,,w])=>w).right(l,f);if(m===l.length)return e.every(DC(d/Ok,u/Ok,h));if(m===0)return tj.every(Math.max(DC(d,u,h),1));const[g,x]=l[f/l[m-1][2]<l[m][2]/f?m-1:m];return g.every(x)}return[o,c]}const[Vke,qke]=pV(_o,x4,U1,mV,m4,h4),[Wke,Hke]=pV(Po,p4,L1,ey,f4,u4);function Rk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Dk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function kp(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Kke(e){var t=e.dateTime,n=e.date,s=e.time,a=e.periods,i=e.days,l=e.shortDays,o=e.months,c=e.shortMonths,d=Sp(a),u=Cp(a),h=Sp(i),f=Cp(i),m=Sp(l),g=Cp(l),x=Sp(o),w=Cp(o),j=Sp(c),y=Cp(c),b={a:U,A:E,b:$,B:G,c:null,d:A$,e:A$,f:xSe,g:CSe,G:_Se,H:fSe,I:mSe,j:pSe,L:xV,m:gSe,M:vSe,p:oe,q:ee,Q:O$,s:R$,S:ySe,u:bSe,U:jSe,V:wSe,w:NSe,W:kSe,x:null,X:null,y:SSe,Y:PSe,Z:ASe,"%":E$},p={a:ce,A:ye,b:je,B:$e,c:null,d:T$,e:T$,f:RSe,g:VSe,G:WSe,H:TSe,I:ESe,j:OSe,L:vV,m:DSe,M:MSe,p:ke,q:be,Q:O$,s:R$,S:$Se,u:ISe,U:FSe,V:LSe,w:USe,W:BSe,x:null,X:null,y:zSe,Y:qSe,Z:HSe,"%":E$},N={a:R,A:O,b:M,B:A,c:T,d:P$,e:P$,f:cSe,g:C$,G:S$,H:_$,I:_$,j:aSe,L:oSe,m:sSe,M:iSe,p:_,q:nSe,Q:uSe,s:hSe,S:lSe,u:Qke,U:Jke,V:eSe,w:Zke,W:tSe,x:B,X:z,y:C$,Y:S$,Z:rSe,"%":dSe};b.x=k(n,b),b.X=k(s,b),b.c=k(t,b),p.x=k(n,p),p.X=k(s,p),p.c=k(t,p);function k(pe,le){return function(Ie){var ae=[],st=-1,K=0,Me=pe.length,de,Be,qe;for(Ie instanceof Date||(Ie=new Date(+Ie));++st<Me;)pe.charCodeAt(st)===37&&(ae.push(pe.slice(K,st)),(Be=k$[de=pe.charAt(++st)])!=null?de=pe.charAt(++st):Be=de==="e"?" ":"0",(qe=le[de])&&(de=qe(Ie,Be)),ae.push(de),K=st+1);return ae.push(pe.slice(K,st)),ae.join("")}}function S(pe,le){return function(Ie){var ae=kp(1900,void 0,1),st=P(ae,pe,Ie+="",0),K,Me;if(st!=Ie.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(le&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(K=Dk(kp(ae.y,0,1)),Me=K.getUTCDay(),K=Me>4||Me===0?nj.ceil(K):nj(K),K=F1.offset(K,(ae.V-1)*7),ae.y=K.getUTCFullYear(),ae.m=K.getUTCMonth(),ae.d=K.getUTCDate()+(ae.w+6)%7):(K=Rk(kp(ae.y,0,1)),Me=K.getDay(),K=Me>4||Me===0?rj.ceil(K):rj(K),K=ey.offset(K,(ae.V-1)*7),ae.y=K.getFullYear(),ae.m=K.getMonth(),ae.d=K.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),Me="Z"in ae?Dk(kp(ae.y,0,1)).getUTCDay():Rk(kp(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(Me+5)%7:ae.w+ae.U*7-(Me+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,Dk(ae)):Rk(ae)}}function P(pe,le,Ie,ae){for(var st=0,K=le.length,Me=Ie.length,de,Be;st<K;){if(ae>=Me)return-1;if(de=le.charCodeAt(st++),de===37){if(de=le.charAt(st++),Be=N[de in k$?le.charAt(st++):de],!Be||(ae=Be(pe,Ie,ae))<0)return-1}else if(de!=Ie.charCodeAt(ae++))return-1}return ae}function _(pe,le,Ie){var ae=d.exec(le.slice(Ie));return ae?(pe.p=u.get(ae[0].toLowerCase()),Ie+ae[0].length):-1}function R(pe,le,Ie){var ae=m.exec(le.slice(Ie));return ae?(pe.w=g.get(ae[0].toLowerCase()),Ie+ae[0].length):-1}function O(pe,le,Ie){var ae=h.exec(le.slice(Ie));return ae?(pe.w=f.get(ae[0].toLowerCase()),Ie+ae[0].length):-1}function M(pe,le,Ie){var ae=j.exec(le.slice(Ie));return ae?(pe.m=y.get(ae[0].toLowerCase()),Ie+ae[0].length):-1}function A(pe,le,Ie){var ae=x.exec(le.slice(Ie));return ae?(pe.m=w.get(ae[0].toLowerCase()),Ie+ae[0].length):-1}function T(pe,le,Ie){return P(pe,t,le,Ie)}function B(pe,le,Ie){return P(pe,n,le,Ie)}function z(pe,le,Ie){return P(pe,s,le,Ie)}function U(pe){return l[pe.getDay()]}function E(pe){return i[pe.getDay()]}function $(pe){return c[pe.getMonth()]}function G(pe){return o[pe.getMonth()]}function oe(pe){return a[+(pe.getHours()>=12)]}function ee(pe){return 1+~~(pe.getMonth()/3)}function ce(pe){return l[pe.getUTCDay()]}function ye(pe){return i[pe.getUTCDay()]}function je(pe){return c[pe.getUTCMonth()]}function $e(pe){return o[pe.getUTCMonth()]}function ke(pe){return a[+(pe.getUTCHours()>=12)]}function be(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var le=k(pe+="",b);return le.toString=function(){return pe},le},parse:function(pe){var le=S(pe+="",!1);return le.toString=function(){return pe},le},utcFormat:function(pe){var le=k(pe+="",p);return le.toString=function(){return pe},le},utcParse:function(pe){var le=S(pe+="",!0);return le.toString=function(){return pe},le}}}var k$={"-":"",_:" ",0:"0"},qn=/^\s*\d+/,Gke=/^%/,Yke=/[\\^$*+?|[\]().{}]/g;function hr(e,t,n){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<n?new Array(n-i+1).join(t)+a:a)}function Xke(e){return e.replace(Yke,"\\$&")}function Sp(e){return new RegExp("^(?:"+e.map(Xke).join("|")+")","i")}function Cp(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Zke(e,t,n){var s=qn.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function Qke(e,t,n){var s=qn.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function Jke(e,t,n){var s=qn.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function eSe(e,t,n){var s=qn.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function tSe(e,t,n){var s=qn.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function S$(e,t,n){var s=qn.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function C$(e,t,n){var s=qn.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function rSe(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function nSe(e,t,n){var s=qn.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function sSe(e,t,n){var s=qn.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function P$(e,t,n){var s=qn.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function aSe(e,t,n){var s=qn.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function _$(e,t,n){var s=qn.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function iSe(e,t,n){var s=qn.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function lSe(e,t,n){var s=qn.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function oSe(e,t,n){var s=qn.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function cSe(e,t,n){var s=qn.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function dSe(e,t,n){var s=Gke.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function uSe(e,t,n){var s=qn.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function hSe(e,t,n){var s=qn.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function A$(e,t){return hr(e.getDate(),t,2)}function fSe(e,t){return hr(e.getHours(),t,2)}function mSe(e,t){return hr(e.getHours()%12||12,t,2)}function pSe(e,t){return hr(1+ey.count(Po(e),e),t,3)}function xV(e,t){return hr(e.getMilliseconds(),t,3)}function xSe(e,t){return xV(e,t)+"000"}function gSe(e,t){return hr(e.getMonth()+1,t,2)}function vSe(e,t){return hr(e.getMinutes(),t,2)}function ySe(e,t){return hr(e.getSeconds(),t,2)}function bSe(e){var t=e.getDay();return t===0?7:t}function jSe(e,t){return hr(L1.count(Po(e)-1,e),t,2)}function gV(e){var t=e.getDay();return t>=4||t===0?Zf(e):Zf.ceil(e)}function wSe(e,t){return e=gV(e),hr(Zf.count(Po(e),e)+(Po(e).getDay()===4),t,2)}function NSe(e){return e.getDay()}function kSe(e,t){return hr(rj.count(Po(e)-1,e),t,2)}function SSe(e,t){return hr(e.getFullYear()%100,t,2)}function CSe(e,t){return e=gV(e),hr(e.getFullYear()%100,t,2)}function PSe(e,t){return hr(e.getFullYear()%1e4,t,4)}function _Se(e,t){var n=e.getDay();return e=n>=4||n===0?Zf(e):Zf.ceil(e),hr(e.getFullYear()%1e4,t,4)}function ASe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+hr(t/60|0,"0",2)+hr(t%60,"0",2)}function T$(e,t){return hr(e.getUTCDate(),t,2)}function TSe(e,t){return hr(e.getUTCHours(),t,2)}function ESe(e,t){return hr(e.getUTCHours()%12||12,t,2)}function OSe(e,t){return hr(1+F1.count(_o(e),e),t,3)}function vV(e,t){return hr(e.getUTCMilliseconds(),t,3)}function RSe(e,t){return vV(e,t)+"000"}function DSe(e,t){return hr(e.getUTCMonth()+1,t,2)}function MSe(e,t){return hr(e.getUTCMinutes(),t,2)}function $Se(e,t){return hr(e.getUTCSeconds(),t,2)}function ISe(e){var t=e.getUTCDay();return t===0?7:t}function FSe(e,t){return hr(U1.count(_o(e)-1,e),t,2)}function yV(e){var t=e.getUTCDay();return t>=4||t===0?Qf(e):Qf.ceil(e)}function LSe(e,t){return e=yV(e),hr(Qf.count(_o(e),e)+(_o(e).getUTCDay()===4),t,2)}function USe(e){return e.getUTCDay()}function BSe(e,t){return hr(nj.count(_o(e)-1,e),t,2)}function zSe(e,t){return hr(e.getUTCFullYear()%100,t,2)}function VSe(e,t){return e=yV(e),hr(e.getUTCFullYear()%100,t,2)}function qSe(e,t){return hr(e.getUTCFullYear()%1e4,t,4)}function WSe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Qf(e):Qf.ceil(e),hr(e.getUTCFullYear()%1e4,t,4)}function HSe(){return"+0000"}function E$(){return"%"}function O$(e){return+e}function R$(e){return Math.floor(+e/1e3)}var eh,bV,jV;KSe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function KSe(e){return eh=Kke(e),bV=eh.format,eh.parse,jV=eh.utcFormat,eh.utcParse,eh}function GSe(e){return new Date(e)}function YSe(e){return e instanceof Date?+e:+new Date(+e)}function g4(e,t,n,s,a,i,l,o,c,d){var u=n4(),h=u.invert,f=u.domain,m=d(".%L"),g=d(":%S"),x=d("%I:%M"),w=d("%I %p"),j=d("%a %d"),y=d("%b %d"),b=d("%B"),p=d("%Y");function N(k){return(c(k)<k?m:o(k)<k?g:l(k)<k?x:i(k)<k?w:s(k)<k?a(k)<k?j:y:n(k)<k?b:p)(k)}return u.invert=function(k){return new Date(h(k))},u.domain=function(k){return arguments.length?f(Array.from(k,YSe)):f().map(GSe)},u.ticks=function(k){var S=f();return e(S[0],S[S.length-1],k??10)},u.tickFormat=function(k,S){return S==null?N:d(S)},u.nice=function(k){var S=f();return(!k||typeof k.range!="function")&&(k=t(S[0],S[S.length-1],k??10)),k?f(lV(S,k)):u},u.copy=function(){return Jv(u,g4(e,t,n,s,a,i,l,o,c,d))},u}function XSe(){return Qa.apply(g4(Wke,Hke,Po,p4,L1,ey,f4,u4,Ad,bV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ZSe(){return Qa.apply(g4(Vke,qke,_o,x4,U1,F1,m4,h4,Ad,jV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function B1(){var e=0,t=1,n,s,a,i,l=Ss,o=!1,c;function d(h){return h==null||isNaN(h=+h)?c:l(a===0?.5:(h=(i(h)-n)*a,o?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),s=i(t=+t),a=n===s?0:1/(s-n),d):[e,t]},d.clamp=function(h){return arguments.length?(o=!!h,d):o},d.interpolator=function(h){return arguments.length?(l=h,d):l};function u(h){return function(f){var m,g;return arguments.length?([m,g]=f,l=h(m,g),d):[l(0),l(1)]}}return d.range=u(Ym),d.rangeRound=u(r4),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,n=h(e),s=h(t),a=n===s?0:1/(s-n),d}}function sd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function wV(){var e=nd(B1()(Ss));return e.copy=function(){return sd(e,wV())},Mo.apply(e,arguments)}function NV(){var e=i4(B1()).domain([1,10]);return e.copy=function(){return sd(e,NV()).base(e.base())},Mo.apply(e,arguments)}function kV(){var e=l4(B1());return e.copy=function(){return sd(e,kV()).constant(e.constant())},Mo.apply(e,arguments)}function v4(){var e=o4(B1());return e.copy=function(){return sd(e,v4()).exponent(e.exponent())},Mo.apply(e,arguments)}function QSe(){return v4.apply(null,arguments).exponent(.5)}function SV(){var e=[],t=Ss;function n(s){if(s!=null&&!isNaN(s=+s))return t((Zv(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Rc),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,a)=>t(a/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(a,i)=>FNe(e,i/s))},n.copy=function(){return SV(t).domain(e)},Mo.apply(n,arguments)}function z1(){var e=0,t=.5,n=1,s=1,a,i,l,o,c,d=Ss,u,h=!1,f;function m(x){return isNaN(x=+x)?f:(x=.5+((x=+u(x))-i)*(s*x<s*i?o:c),d(h?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,n]=x,a=u(e=+e),i=u(t=+t),l=u(n=+n),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),s=i<a?-1:1,m):[e,t,n]},m.clamp=function(x){return arguments.length?(h=!!x,m):h},m.interpolator=function(x){return arguments.length?(d=x,m):d};function g(x){return function(w){var j,y,b;return arguments.length?([j,y,b]=w,d=dke(x,[j,y,b]),m):[d(0),d(.5),d(1)]}}return m.range=g(Ym),m.rangeRound=g(r4),m.unknown=function(x){return arguments.length?(f=x,m):f},function(x){return u=x,a=x(e),i=x(t),l=x(n),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),s=i<a?-1:1,m}}function CV(){var e=nd(z1()(Ss));return e.copy=function(){return sd(e,CV())},Mo.apply(e,arguments)}function PV(){var e=i4(z1()).domain([.1,1,10]);return e.copy=function(){return sd(e,PV()).base(e.base())},Mo.apply(e,arguments)}function _V(){var e=l4(z1());return e.copy=function(){return sd(e,_V()).constant(e.constant())},Mo.apply(e,arguments)}function y4(){var e=o4(z1());return e.copy=function(){return sd(e,y4()).exponent(e.exponent())},Mo.apply(e,arguments)}function JSe(){return y4.apply(null,arguments).exponent(.5)}const D$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:cg,scaleDiverging:CV,scaleDivergingLog:PV,scaleDivergingPow:y4,scaleDivergingSqrt:JSe,scaleDivergingSymlog:_V,scaleIdentity:iV,scaleImplicit:MC,scaleLinear:ej,scaleLog:oV,scaleOrdinal:JT,scalePoint:hx,scalePow:c4,scaleQuantile:uV,scaleQuantize:hV,scaleRadial:dV,scaleSequential:wV,scaleSequentialLog:NV,scaleSequentialPow:v4,scaleSequentialQuantile:SV,scaleSequentialSqrt:QSe,scaleSequentialSymlog:kV,scaleSqrt:Rke,scaleSymlog:cV,scaleThreshold:fV,scaleTime:XSe,scaleUtc:ZSe,tickFormat:aV},Symbol.toStringTag,{value:"Module"}));var e2e=Lm;function t2e(e,t,n){for(var s=-1,a=e.length;++s<a;){var i=e[s],l=t(i);if(l!=null&&(o===void 0?l===l&&!e2e(l):n(l,o)))var o=l,c=i}return c}var V1=t2e;function r2e(e,t){return e>t}var AV=r2e,n2e=V1,s2e=AV,a2e=Km;function i2e(e){return e&&e.length?n2e(e,a2e,s2e):void 0}var l2e=i2e;const bc=er(l2e);function o2e(e,t){return e<t}var TV=o2e,c2e=V1,d2e=TV,u2e=Km;function h2e(e){return e&&e.length?c2e(e,u2e,d2e):void 0}var f2e=h2e;const q1=er(f2e);var m2e=OT,p2e=$l,x2e=Fz,g2e=Js;function v2e(e,t){var n=g2e(e)?m2e:x2e;return n(e,p2e(t))}var y2e=v2e,b2e=$z,j2e=y2e;function w2e(e,t){return b2e(j2e(e,t),1)}var N2e=w2e;const k2e=er(N2e);var S2e=KT;function C2e(e,t){return S2e(e,t)}var P2e=C2e;const wu=er(P2e);var Xm=1e9,_2e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},j4,qr=!0,Ya="[DecimalError] ",su=Ya+"Invalid argument: ",b4=Ya+"Exponent out of range: ",Zm=Math.floor,yd=Math.pow,A2e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ma,On=1e7,Ir=7,EV=9007199254740991,sj=Zm(EV/Ir),nt={};nt.absoluteValue=nt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};nt.comparedTo=nt.cmp=function(e){var t,n,s,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,a=e.d.length,t=0,n=s<a?s:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};nt.decimalPlaces=nt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Ir;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};nt.dividedBy=nt.div=function(e){return xo(this,new this.constructor(e))};nt.dividedToIntegerBy=nt.idiv=function(e){var t=this,n=t.constructor;return _r(xo(t,new n(e),0,1),n.precision)};nt.equals=nt.eq=function(e){return!this.cmp(e)};nt.exponent=function(){return mn(this)};nt.greaterThan=nt.gt=function(e){return this.cmp(e)>0};nt.greaterThanOrEqualTo=nt.gte=function(e){return this.cmp(e)>=0};nt.isInteger=nt.isint=function(){return this.e>this.d.length-2};nt.isNegative=nt.isneg=function(){return this.s<0};nt.isPositive=nt.ispos=function(){return this.s>0};nt.isZero=function(){return this.s===0};nt.lessThan=nt.lt=function(e){return this.cmp(e)<0};nt.lessThanOrEqualTo=nt.lte=function(e){return this.cmp(e)<1};nt.logarithm=nt.log=function(e){var t,n=this,s=n.constructor,a=s.precision,i=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(ma))throw Error(Ya+"NaN");if(n.s<1)throw Error(Ya+(n.s?"NaN":"-Infinity"));return n.eq(ma)?new s(0):(qr=!1,t=xo(mg(n,i),mg(e,i),i),qr=!0,_r(t,a))};nt.minus=nt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?DV(t,e):OV(t,(e.s=-e.s,e))};nt.modulo=nt.mod=function(e){var t,n=this,s=n.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(Ya+"NaN");return n.s?(qr=!1,t=xo(n,e,0,1).times(e),qr=!0,n.minus(t)):_r(new s(n),a)};nt.naturalExponential=nt.exp=function(){return RV(this)};nt.naturalLogarithm=nt.ln=function(){return mg(this)};nt.negated=nt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};nt.plus=nt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?OV(t,e):DV(t,(e.s=-e.s,e))};nt.precision=nt.sd=function(e){var t,n,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(su+e);if(t=mn(a)+1,s=a.d.length-1,n=s*Ir+1,s=a.d[s],s){for(;s%10==0;s/=10)n--;for(s=a.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};nt.squareRoot=nt.sqrt=function(){var e,t,n,s,a,i,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Ya+"NaN")}for(e=mn(o),qr=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=xl(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Zm((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(a.toString()),n=c.precision,a=l=n+3;;)if(i=s,s=i.plus(xo(o,i,l+2)).times(.5),xl(i.d).slice(0,l)===(t=xl(s.d)).slice(0,l)){if(t=t.slice(l-3,l+1),a==l&&t=="4999"){if(_r(i,n+1,0),i.times(i).eq(o)){s=i;break}}else if(t!="9999")break;l+=4}return qr=!0,_r(s,n)};nt.times=nt.mul=function(e){var t,n,s,a,i,l,o,c,d,u=this,h=u.constructor,f=u.d,m=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,n=u.e+e.e,c=f.length,d=m.length,c<d&&(i=f,f=m,m=i,l=c,c=d,d=l),i=[],l=c+d,s=l;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,a=c+s;a>s;)o=i[a]+m[s]*f[a-s-1]+t,i[a--]=o%On|0,t=o/On|0;i[a]=(i[a]+t)%On|0}for(;!i[--l];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,qr?_r(e,h.precision):e};nt.toDecimalPlaces=nt.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(Tl(e,0,Xm),t===void 0?t=s.rounding:Tl(t,0,8),_r(n,e+mn(n)+1,t))};nt.toExponential=function(e,t){var n,s=this,a=s.constructor;return e===void 0?n=Nu(s,!0):(Tl(e,0,Xm),t===void 0?t=a.rounding:Tl(t,0,8),s=_r(new a(s),e+1,t),n=Nu(s,!0,e+1)),n};nt.toFixed=function(e,t){var n,s,a=this,i=a.constructor;return e===void 0?Nu(a):(Tl(e,0,Xm),t===void 0?t=i.rounding:Tl(t,0,8),s=_r(new i(a),e+mn(a)+1,t),n=Nu(s.abs(),!1,e+mn(s)+1),a.isneg()&&!a.isZero()?"-"+n:n)};nt.toInteger=nt.toint=function(){var e=this,t=e.constructor;return _r(new t(e),mn(e)+1,t.rounding)};nt.toNumber=function(){return+this};nt.toPower=nt.pow=function(e){var t,n,s,a,i,l,o=this,c=o.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(ma);if(o=new c(o),!o.s){if(e.s<1)throw Error(Ya+"Infinity");return o}if(o.eq(ma))return o;if(s=c.precision,e.eq(ma))return _r(o,s);if(t=e.e,n=e.d.length-1,l=t>=n,i=o.s,l){if((n=u<0?-u:u)<=EV){for(a=new c(ma),t=Math.ceil(s/Ir+4),qr=!1;n%2&&(a=a.times(o),$$(a.d,t)),n=Zm(n/2),n!==0;)o=o.times(o),$$(o.d,t);return qr=!0,e.s<0?new c(ma).div(a):_r(a,s)}}else if(i<0)throw Error(Ya+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,o.s=1,qr=!1,a=e.times(mg(o,s+d)),qr=!0,a=RV(a),a.s=i,a};nt.toPrecision=function(e,t){var n,s,a=this,i=a.constructor;return e===void 0?(n=mn(a),s=Nu(a,n<=i.toExpNeg||n>=i.toExpPos)):(Tl(e,1,Xm),t===void 0?t=i.rounding:Tl(t,0,8),a=_r(new i(a),e,t),n=mn(a),s=Nu(a,e<=n||n<=i.toExpNeg,e)),s};nt.toSignificantDigits=nt.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Tl(e,1,Xm),t===void 0?t=s.rounding:Tl(t,0,8)),_r(new s(n),e,t)};nt.toString=nt.valueOf=nt.val=nt.toJSON=nt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=mn(e),n=e.constructor;return Nu(e,t<=n.toExpNeg||t>=n.toExpPos)};function OV(e,t){var n,s,a,i,l,o,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),qr?_r(t,h):t;if(c=e.d,d=t.d,l=e.e,a=t.e,c=c.slice(),i=l-a,i){for(i<0?(s=c,i=-i,o=d.length):(s=d,a=l,o=c.length),l=Math.ceil(h/Ir),o=l>o?l+1:o+1,i>o&&(i=o,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(o=c.length,i=d.length,o-i<0&&(i=o,s=d,d=c,c=s),n=0;i;)n=(c[--i]=c[i]+d[i]+n)/On|0,c[i]%=On;for(n&&(c.unshift(n),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,qr?_r(t,h):t}function Tl(e,t,n){if(e!==~~e||e<t||e>n)throw Error(su+e)}function xl(e){var t,n,s,a=e.length-1,i="",l=e[0];if(a>0){for(i+=l,t=1;t<a;t++)s=e[t]+"",n=Ir-s.length,n&&(i+=Qo(n)),i+=s;l=e[t],s=l+"",n=Ir-s.length,n&&(i+=Qo(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var xo=function(){function e(s,a){var i,l=0,o=s.length;for(s=s.slice();o--;)i=s[o]*a+l,s[o]=i%On|0,l=i/On|0;return l&&s.unshift(l),s}function t(s,a,i,l){var o,c;if(i!=l)c=i>l?1:-1;else for(o=c=0;o<i;o++)if(s[o]!=a[o]){c=s[o]>a[o]?1:-1;break}return c}function n(s,a,i){for(var l=0;i--;)s[i]-=l,l=s[i]<a[i]?1:0,s[i]=l*On+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,l){var o,c,d,u,h,f,m,g,x,w,j,y,b,p,N,k,S,P,_=s.constructor,R=s.s==a.s?1:-1,O=s.d,M=a.d;if(!s.s)return new _(s);if(!a.s)throw Error(Ya+"Division by zero");for(c=s.e-a.e,S=M.length,N=O.length,m=new _(R),g=m.d=[],d=0;M[d]==(O[d]||0);)++d;if(M[d]>(O[d]||0)&&--c,i==null?y=i=_.precision:l?y=i+(mn(s)-mn(a))+1:y=i,y<0)return new _(0);if(y=y/Ir+2|0,d=0,S==1)for(u=0,M=M[0],y++;(d<N||u)&&y--;d++)b=u*On+(O[d]||0),g[d]=b/M|0,u=b%M|0;else{for(u=On/(M[0]+1)|0,u>1&&(M=e(M,u),O=e(O,u),S=M.length,N=O.length),p=S,x=O.slice(0,S),w=x.length;w<S;)x[w++]=0;P=M.slice(),P.unshift(0),k=M[0],M[1]>=On/2&&++k;do u=0,o=t(M,x,S,w),o<0?(j=x[0],S!=w&&(j=j*On+(x[1]||0)),u=j/k|0,u>1?(u>=On&&(u=On-1),h=e(M,u),f=h.length,w=x.length,o=t(h,x,f,w),o==1&&(u--,n(h,S<f?P:M,f))):(u==0&&(o=u=1),h=M.slice()),f=h.length,f<w&&h.unshift(0),n(x,h,w),o==-1&&(w=x.length,o=t(M,x,S,w),o<1&&(u++,n(x,S<w?P:M,w))),w=x.length):o===0&&(u++,x=[0]),g[d++]=u,o&&x[0]?x[w++]=O[p]||0:(x=[O[p]],w=1);while((p++<N||x[0]!==void 0)&&y--)}return g[0]||g.shift(),m.e=c,_r(m,l?i+mn(m)+1:i)}}();function RV(e,t){var n,s,a,i,l,o,c=0,d=0,u=e.constructor,h=u.precision;if(mn(e)>16)throw Error(b4+mn(e));if(!e.s)return new u(ma);for(t==null?(qr=!1,o=h):o=t,l=new u(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(s=Math.log(yd(2,d))/Math.LN10*2+5|0,o+=s,n=a=i=new u(ma),u.precision=o;;){if(a=_r(a.times(e),o),n=n.times(++c),l=i.plus(xo(a,n,o)),xl(l.d).slice(0,o)===xl(i.d).slice(0,o)){for(;d--;)i=_r(i.times(i),o);return u.precision=h,t==null?(qr=!0,_r(i,h)):i}i=l}}function mn(e){for(var t=e.e*Ir,n=e.d[0];n>=10;n/=10)t++;return t}function Mk(e,t,n){if(t>e.LN10.sd())throw qr=!0,n&&(e.precision=n),Error(Ya+"LN10 precision limit exceeded");return _r(new e(e.LN10),t)}function Qo(e){for(var t="";e--;)t+="0";return t}function mg(e,t){var n,s,a,i,l,o,c,d,u,h=1,f=10,m=e,g=m.d,x=m.constructor,w=x.precision;if(m.s<1)throw Error(Ya+(m.s?"NaN":"-Infinity"));if(m.eq(ma))return new x(0);if(t==null?(qr=!1,d=w):d=t,m.eq(10))return t==null&&(qr=!0),Mk(x,d);if(d+=f,x.precision=d,n=xl(g),s=n.charAt(0),i=mn(m),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)m=m.times(e),n=xl(m.d),s=n.charAt(0),h++;i=mn(m),s>1?(m=new x("0."+n),i++):m=new x(s+"."+n.slice(1))}else return c=Mk(x,d+2,w).times(i+""),m=mg(new x(s+"."+n.slice(1)),d-f).plus(c),x.precision=w,t==null?(qr=!0,_r(m,w)):m;for(o=l=m=xo(m.minus(ma),m.plus(ma),d),u=_r(m.times(m),d),a=3;;){if(l=_r(l.times(u),d),c=o.plus(xo(l,new x(a),d)),xl(c.d).slice(0,d)===xl(o.d).slice(0,d))return o=o.times(2),i!==0&&(o=o.plus(Mk(x,d+2,w).times(i+""))),o=xo(o,new x(h),d),x.precision=w,t==null?(qr=!0,_r(o,w)):o;o=c,a+=2}}function M$(e,t){var n,s,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(s,a),t){if(a-=s,n=n-s-1,e.e=Zm(n/Ir),e.d=[],s=(n+1)%Ir,n<0&&(s+=Ir),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=Ir;s<a;)e.d.push(+t.slice(s,s+=Ir));t=t.slice(s),s=Ir-t.length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),qr&&(e.e>sj||e.e<-sj))throw Error(b4+n)}else e.s=0,e.e=0,e.d=[0];return e}function _r(e,t,n){var s,a,i,l,o,c,d,u,h=e.d;for(l=1,i=h[0];i>=10;i/=10)l++;if(s=t-l,s<0)s+=Ir,a=t,d=h[u=0];else{if(u=Math.ceil((s+1)/Ir),i=h.length,u>=i)return e;for(d=i=h[u],l=1;i>=10;i/=10)l++;s%=Ir,a=s-Ir+l}if(n!==void 0&&(i=yd(10,l-a-1),o=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=n<4?(o||c)&&(n==0||n==(e.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(s>0?a>0?d/yd(10,l-a):0:h[u-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(i=mn(e),h.length=1,t=t-i-1,h[0]=yd(10,(Ir-t%Ir)%Ir),e.e=Zm(-t/Ir)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(s==0?(h.length=u,i=1,u--):(h.length=u+1,i=yd(10,Ir-s),h[u]=a>0?(d/yd(10,l-a)%yd(10,a)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==On&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=On)break;h[u--]=0,i=1}for(s=h.length;h[--s]===0;)h.pop();if(qr&&(e.e>sj||e.e<-sj))throw Error(b4+mn(e));return e}function DV(e,t){var n,s,a,i,l,o,c,d,u,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),qr?_r(t,m):t;if(c=e.d,h=t.d,s=t.e,d=e.e,c=c.slice(),l=d-s,l){for(u=l<0,u?(n=c,l=-l,o=h.length):(n=h,s=d,o=c.length),a=Math.max(Math.ceil(m/Ir),o)+2,l>a&&(l=a,n.length=1),n.reverse(),a=l;a--;)n.push(0);n.reverse()}else{for(a=c.length,o=h.length,u=a<o,u&&(o=a),a=0;a<o;a++)if(c[a]!=h[a]){u=c[a]<h[a];break}l=0}for(u&&(n=c,c=h,h=n,t.s=-t.s),o=c.length,a=h.length-o;a>0;--a)c[o++]=0;for(a=h.length;a>l;){if(c[--a]<h[a]){for(i=a;i&&c[--i]===0;)c[i]=On-1;--c[i],c[a]+=On}c[a]-=h[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,qr?_r(t,m):t):new f(0)}function Nu(e,t,n){var s,a=mn(e),i=xl(e.d),l=i.length;return t?(n&&(s=n-l)>0?i=i.charAt(0)+"."+i.slice(1)+Qo(s):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Qo(-a-1)+i,n&&(s=n-l)>0&&(i+=Qo(s))):a>=l?(i+=Qo(a+1-l),n&&(s=n-a-1)>0&&(i=i+"."+Qo(s))):((s=a+1)<l&&(i=i.slice(0,s)+"."+i.slice(s)),n&&(s=n-l)>0&&(a+1===l&&(i+="."),i+=Qo(s))),e.s<0?"-"+i:i}function $$(e,t){if(e.length>t)return e.length=t,!0}function MV(e){var t,n,s;function a(i){var l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,i instanceof a){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(su+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return M$(l,i.toString())}else if(typeof i!="string")throw Error(su+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,A2e.test(i))M$(l,i);else throw Error(su+i)}if(a.prototype=nt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=MV,a.config=a.set=T2e,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return a.config(e),a}function T2e(e){if(!e||typeof e!="object")throw Error(Ya+"Object expected");var t,n,s,a=["precision",1,Xm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((s=e[n=a[t]])!==void 0)if(Zm(s)===s&&s>=a[t+1]&&s<=a[t+2])this[n]=s;else throw Error(su+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(su+n+": "+s);return this}var j4=MV(_2e);ma=new j4(1);const Pr=j4;function E2e(e){return M2e(e)||D2e(e)||R2e(e)||O2e()}function O2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R2e(e,t){if(e){if(typeof e=="string")return LC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LC(e,t)}}function D2e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function M2e(e){if(Array.isArray(e))return LC(e)}function LC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var $2e=function(t){return t},$V={"@@functional/placeholder":!0},IV=function(t){return t===$V},I$=function(t){return function n(){return arguments.length===0||arguments.length===1&&IV(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},I2e=function e(t,n){return t===1?n:I$(function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var l=a.filter(function(o){return o!==$V}).length;return l>=t?n.apply(void 0,a):e(t-l,I$(function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];var u=a.map(function(h){return IV(h)?c.shift():h});return n.apply(void 0,E2e(u).concat(c))}))})},W1=function(t){return I2e(t.length,t)},UC=function(t,n){for(var s=[],a=t;a<n;++a)s[a-t]=a;return s},F2e=W1(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),L2e=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return $2e;var a=n.reverse(),i=a[0],l=a.slice(1);return function(){return l.reduce(function(o,c){return c(o)},i.apply(void 0,arguments))}},BC=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},FV=function(t){var n=null,s=null;return function(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n&&i.every(function(o,c){return o===n[c]})||(n=i,s=t.apply(void 0,i)),s}};function U2e(e){var t;return e===0?t=1:t=Math.floor(new Pr(e).abs().log(10).toNumber())+1,t}function B2e(e,t,n){for(var s=new Pr(e),a=0,i=[];s.lt(t)&&a<1e5;)i.push(s.toNumber()),s=s.add(n),a++;return i}var z2e=W1(function(e,t,n){var s=+e,a=+t;return s+n*(a-s)}),V2e=W1(function(e,t,n){var s=t-+e;return s=s||1/0,(n-e)/s}),q2e=W1(function(e,t,n){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(n-e)/s))});const H1={rangeStep:B2e,getDigitCount:U2e,interpolateNumber:z2e,uninterpolateNumber:V2e,uninterpolateTruncation:q2e};function zC(e){return K2e(e)||H2e(e)||LV(e)||W2e()}function W2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H2e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function K2e(e){if(Array.isArray(e))return VC(e)}function pg(e,t){return X2e(e)||Y2e(e,t)||LV(e,t)||G2e()}function G2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LV(e,t){if(e){if(typeof e=="string")return VC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VC(e,t)}}function VC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Y2e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,a=!1,i=void 0;try{for(var l=e[Symbol.iterator](),o;!(s=(o=l.next()).done)&&(n.push(o.value),!(t&&n.length===t));s=!0);}catch(c){a=!0,i=c}finally{try{!s&&l.return!=null&&l.return()}finally{if(a)throw i}}return n}}function X2e(e){if(Array.isArray(e))return e}function UV(e){var t=pg(e,2),n=t[0],s=t[1],a=n,i=s;return n>s&&(a=s,i=n),[a,i]}function BV(e,t,n){if(e.lte(0))return new Pr(0);var s=H1.getDigitCount(e.toNumber()),a=new Pr(10).pow(s),i=e.div(a),l=s!==1?.05:.1,o=new Pr(Math.ceil(i.div(l).toNumber())).add(n).mul(l),c=o.mul(a);return t?c:new Pr(Math.ceil(c))}function Z2e(e,t,n){var s=1,a=new Pr(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(s=new Pr(10).pow(H1.getDigitCount(e)-1),a=new Pr(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new Pr(Math.floor(e)))}else e===0?a=new Pr(Math.floor((t-1)/2)):n||(a=new Pr(Math.floor(e)));var l=Math.floor((t-1)/2),o=L2e(F2e(function(c){return a.add(new Pr(c-l).mul(s)).toNumber()}),UC);return o(0,t)}function zV(e,t,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Pr(0),tickMin:new Pr(0),tickMax:new Pr(0)};var i=BV(new Pr(t).sub(e).div(n-1),s,a),l;e<=0&&t>=0?l=new Pr(0):(l=new Pr(e).add(t).div(2),l=l.sub(new Pr(l).mod(i)));var o=Math.ceil(l.sub(e).div(i).toNumber()),c=Math.ceil(new Pr(t).sub(l).div(i).toNumber()),d=o+c+1;return d>n?zV(e,t,n,s,a+1):(d<n&&(c=t>0?c+(n-d):c,o=t>0?o:o+(n-d)),{step:i,tickMin:l.sub(new Pr(o).mul(i)),tickMax:l.add(new Pr(c).mul(i))})}function Q2e(e){var t=pg(e,2),n=t[0],s=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),o=UV([n,s]),c=pg(o,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var h=u===1/0?[d].concat(zC(UC(0,a-1).map(function(){return 1/0}))):[].concat(zC(UC(0,a-1).map(function(){return-1/0})),[u]);return n>s?BC(h):h}if(d===u)return Z2e(d,a,i);var f=zV(d,u,l,i),m=f.step,g=f.tickMin,x=f.tickMax,w=H1.rangeStep(g,x.add(new Pr(.1).mul(m)),m);return n>s?BC(w):w}function J2e(e,t){var n=pg(e,2),s=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=UV([s,a]),o=pg(l,2),c=o[0],d=o[1];if(c===-1/0||d===1/0)return[s,a];if(c===d)return[c];var u=Math.max(t,2),h=BV(new Pr(d).sub(c).div(u-1),i,0),f=[].concat(zC(H1.rangeStep(new Pr(c),new Pr(d).sub(new Pr(.99).mul(h)),h)),[d]);return s>a?BC(f):f}var eCe=FV(Q2e),tCe=FV(J2e),rCe="Invariant failed";function ku(e,t){throw new Error(rCe)}var nCe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}function aj(){return aj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},aj.apply(this,arguments)}function sCe(e,t){return oCe(e)||lCe(e,t)||iCe(e,t)||aCe()}function aCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iCe(e,t){if(e){if(typeof e=="string")return F$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F$(e,t)}}function F$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function lCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function oCe(e){if(Array.isArray(e))return e}function cCe(e,t){if(e==null)return{};var n=dCe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function dCe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function uCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hCe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,WV(s.key),s)}}function fCe(e,t,n){return t&&hCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mCe(e,t,n){return t=ij(t),pCe(e,VV()?Reflect.construct(t,n||[],ij(e).constructor):t.apply(e,n))}function pCe(e,t){if(t&&(Jf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xCe(e)}function xCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VV=function(){return!!e})()}function ij(e){return ij=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ij(e)}function gCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qC(e,t)}function qC(e,t){return qC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},qC(e,t)}function qV(e,t,n){return t=WV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WV(e){var t=vCe(e,"string");return Jf(t)=="symbol"?t:t+""}function vCe(e,t){if(Jf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Jf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ty=function(e){function t(){return uCe(this,t),mCe(this,t,arguments)}return gCe(t,e),fCe(t,[{key:"render",value:function(){var s=this.props,a=s.offset,i=s.layout,l=s.width,o=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,h=s.yAxis,f=cCe(s,nCe),m=ot(f,!1);this.props.direction==="x"&&u.type!=="number"&&ku();var g=c.map(function(x){var w=d(x,o),j=w.x,y=w.y,b=w.value,p=w.errorVal;if(!p)return null;var N=[],k,S;if(Array.isArray(p)){var P=sCe(p,2);k=P[0],S=P[1]}else k=S=p;if(i==="vertical"){var _=u.scale,R=y+a,O=R+l,M=R-l,A=_(b-k),T=_(b+S);N.push({x1:T,y1:O,x2:T,y2:M}),N.push({x1:A,y1:R,x2:T,y2:R}),N.push({x1:A,y1:O,x2:A,y2:M})}else if(i==="horizontal"){var B=h.scale,z=j+a,U=z-l,E=z+l,$=B(b-k),G=B(b+S);N.push({x1:U,y1:G,x2:E,y2:G}),N.push({x1:z,y1:$,x2:z,y2:G}),N.push({x1:U,y1:$,x2:E,y2:$})}return X.createElement(Xt,aj({className:"recharts-errorBar",key:"bar-".concat(N.map(function(oe){return"".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))},m),N.map(function(oe){return X.createElement("line",aj({},oe,{key:"line-".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))}))});return X.createElement(Xt,{className:"recharts-errorBars"},g)}}])}(X.Component);qV(ty,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});qV(ty,"displayName","ErrorBar");function xg(e){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(e)}function L$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function cd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L$(Object(n),!0).forEach(function(s){yCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function yCe(e,t,n){return t=bCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bCe(e){var t=jCe(e,"string");return xg(t)=="symbol"?t:t+""}function jCe(e,t){if(xg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(xg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HV=function(t){var n=t.children,s=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,l=da(n,zh);if(!l)return null;var o=zh.defaultProps,c=o!==void 0?cd(cd({},o),l.props):{},d;return l.props&&l.props.payload?d=l.props&&l.props.payload:i==="children"?d=(s||[]).reduce(function(u,h){var f=h.item,m=h.props,g=m.sectors||m.data||[];return u.concat(g.map(function(x){return{type:l.props.iconType||f.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):d=(s||[]).map(function(u){var h=u.item,f=h.type.defaultProps,m=f!==void 0?cd(cd({},f),h.props):{},g=m.dataKey,x=m.name,w=m.legendType,j=m.hide;return{inactive:j,dataKey:g,type:c.iconType||w||"square",color:w4(h),value:x||g,payload:m}}),cd(cd(cd({},c),zh.getWithHeight(l,a)),{},{payload:d,item:l})};function gg(e){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gg(e)}function U$(e){return SCe(e)||kCe(e)||NCe(e)||wCe()}function wCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NCe(e,t){if(e){if(typeof e=="string")return WC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WC(e,t)}}function kCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function SCe(e){if(Array.isArray(e))return WC(e)}function WC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function B$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B$(Object(n),!0).forEach(function(s){qh(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function qh(e,t,n){return t=CCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CCe(e){var t=PCe(e,"string");return gg(t)=="symbol"?t:t+""}function PCe(e,t){if(gg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(gg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ln(e,t,n){return Tt(e)||Tt(t)?n:An(t)?ya(e,t,n):xt(t)?t(e):n}function fx(e,t,n,s){var a=k2e(e,function(o){return ln(o,t)});if(n==="number"){var i=a.filter(function(o){return ze(o)||parseFloat(o)});return i.length?[q1(i),bc(i)]:[1/0,-1/0]}var l=s?a.filter(function(o){return!Tt(o)}):a;return l.map(function(o){return An(o)||o instanceof Date?o:""})}var _Ce=function(t){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,o=(n=s==null?void 0:s.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<o;d++){var u=d>0?a[d-1].coordinate:a[o-1].coordinate,h=a[d].coordinate,f=d>=o-1?a[0].coordinate:a[d+1].coordinate,m=void 0;if(Ns(h-u)!==Ns(f-h)){var g=[];if(Ns(f-h)===Ns(c[1]-c[0])){m=f;var x=h+c[1]-c[0];g[0]=Math.min(x,(x+u)/2),g[1]=Math.max(x,(x+u)/2)}else{m=u;var w=f+c[1]-c[0];g[0]=Math.min(h,(w+h)/2),g[1]=Math.max(h,(w+h)/2)}var j=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(t>j[0]&&t<=j[1]||t>=g[0]&&t<=g[1]){l=a[d].index;break}}else{var y=Math.min(u,f),b=Math.max(u,f);if(t>(y+h)/2&&t<=(b+h)/2){l=a[d].index;break}}}else for(var p=0;p<o;p++)if(p===0&&t<=(s[p].coordinate+s[p+1].coordinate)/2||p>0&&p<o-1&&t>(s[p].coordinate+s[p-1].coordinate)/2&&t<=(s[p].coordinate+s[p+1].coordinate)/2||p===o-1&&t>(s[p].coordinate+s[p-1].coordinate)/2){l=s[p].index;break}return l},w4=function(t){var n,s=t,a=s.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?en(en({},t.type.defaultProps),t.props):t.props,l=i.stroke,o=i.fill,c;switch(a){case"Line":c=l;break;case"Area":case"Radar":c=l&&l!=="none"?l:o;break;default:c=o;break}return c},ACe=function(t){var n=t.barSize,s=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var l={},o=Object.keys(i),c=0,d=o.length;c<d;c++)for(var u=i[o[c]].stackGroups,h=Object.keys(u),f=0,m=h.length;f<m;f++){var g=u[h[f]],x=g.items,w=g.cateAxisId,j=x.filter(function(S){return po(S.type).indexOf("Bar")>=0});if(j&&j.length){var y=j[0].type.defaultProps,b=y!==void 0?en(en({},y),j[0].props):j[0].props,p=b.barSize,N=b[w];l[N]||(l[N]=[]);var k=Tt(p)?n:p;l[N].push({item:j[0],stackList:j.slice(1),barSize:Tt(k)?void 0:ks(k,s,0)})}}return l},TCe=function(t){var n=t.barGap,s=t.barCategoryGap,a=t.bandSize,i=t.sizeList,l=i===void 0?[]:i,o=t.maxBarSize,c=l.length;if(c<1)return null;var d=ks(n,a,0,!0),u,h=[];if(l[0].barSize===+l[0].barSize){var f=!1,m=a/c,g=l.reduce(function(p,N){return p+N.barSize||0},0);g+=(c-1)*d,g>=a&&(g-=(c-1)*d,d=0),g>=a&&m>0&&(f=!0,m*=.9,g=c*m);var x=(a-g)/2>>0,w={offset:x-d,size:0};u=l.reduce(function(p,N){var k={item:N.item,position:{offset:w.offset+w.size+d,size:f?m:N.barSize}},S=[].concat(U$(p),[k]);return w=S[S.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(P){S.push({item:P,position:w})}),S},h)}else{var j=ks(s,a,0,!0);a-2*j-(c-1)*d<=0&&(d=0);var y=(a-2*j-(c-1)*d)/c;y>1&&(y>>=0);var b=o===+o?Math.min(y,o):y;u=l.reduce(function(p,N,k){var S=[].concat(U$(p),[{item:N.item,position:{offset:j+(y+d)*k+(y-b)/2,size:b}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(P){S.push({item:P,position:S[S.length-1].position})}),S},h)}return u},ECe=function(t,n,s,a){var i=s.children,l=s.width,o=s.margin,c=l-(o.left||0)-(o.right||0),d=HV({children:i,legendWidth:c});if(d){var u=a||{},h=u.width,f=u.height,m=d.align,g=d.verticalAlign,x=d.layout;if((x==="vertical"||x==="horizontal"&&g==="middle")&&m!=="center"&&ze(t[m]))return en(en({},t),{},qh({},m,t[m]+(h||0)));if((x==="horizontal"||x==="vertical"&&m==="center")&&g!=="middle"&&ze(t[g]))return en(en({},t),{},qh({},g,t[g]+(f||0)))}return t},OCe=function(t,n,s){return Tt(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||s==="x"?n==="xAxis":s==="y"?n==="yAxis":!0},KV=function(t,n,s,a,i){var l=n.props.children,o=ba(l,ty).filter(function(d){return OCe(a,i,d.props.direction)});if(o&&o.length){var c=o.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var h=ln(u,s);if(Tt(h))return d;var f=Array.isArray(h)?[q1(h),bc(h)]:[h,h],m=c.reduce(function(g,x){var w=ln(u,x,0),j=f[0]-Math.abs(Array.isArray(w)?w[0]:w),y=f[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(j,g[0]),Math.max(y,g[1])]},[1/0,-1/0]);return[Math.min(m[0],d[0]),Math.max(m[1],d[1])]},[1/0,-1/0])}return null},RCe=function(t,n,s,a,i){var l=n.map(function(o){return KV(t,o,s,i,a)}).filter(function(o){return!Tt(o)});return l&&l.length?l.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},GV=function(t,n,s,a,i){var l=n.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&KV(t,c,d,a)||fx(t,d,s,i)});if(s==="number")return l.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var o={};return l.reduce(function(c,d){for(var u=0,h=d.length;u<h;u++)o[d[u]]||(o[d[u]]=!0,c.push(d[u]));return c},[])},YV=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},XV=function(t,n,s,a){if(a)return t.map(function(c){return c.coordinate});var i,l,o=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===s&&(l=!0),c.coordinate});return i||o.push(n),l||o.push(s),o},uo=function(t,n,s){if(!t)return null;var a=t.scale,i=t.duplicateDomain,l=t.type,o=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(n||s)&&l==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Ns(o[0]-o[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(h){var f=i?i.indexOf(h):h;return{coordinate:a(f)+d,value:h,offset:d}});return u.filter(function(h){return!qm(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,f){return{coordinate:a(h)+d,value:h,index:f,offset:d}}):a.ticks&&!s?a.ticks(t.tickCount).map(function(h){return{coordinate:a(h)+d,value:h,offset:d}}):a.domain().map(function(h,f){return{coordinate:a(h)+d,value:i?i[h]:h,index:f,offset:d}})},$k=new WeakMap,e0=function(t,n){if(typeof n!="function")return t;$k.has(t)||$k.set(t,new WeakMap);var s=$k.get(t);if(s.has(n))return s.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return s.set(n,a),a},ZV=function(t,n,s){var a=t.scale,i=t.type,l=t.layout,o=t.axisType;if(a==="auto")return l==="radial"&&o==="radiusAxis"?{scale:cg(),realScaleType:"band"}:l==="radial"&&o==="angleAxis"?{scale:ej(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?{scale:hx(),realScaleType:"point"}:i==="category"?{scale:cg(),realScaleType:"band"}:{scale:ej(),realScaleType:"linear"};if(yu(a)){var c="scale".concat(T1(a));return{scale:(D$[c]||hx)(),realScaleType:D$[c]?c:"point"}}return xt(a)?{scale:a}:{scale:hx(),realScaleType:"point"}},z$=1e-4,QV=function(t){var n=t.domain();if(!(!n||n.length<=2)){var s=n.length,a=t.range(),i=Math.min(a[0],a[1])-z$,l=Math.max(a[0],a[1])+z$,o=t(n[0]),c=t(n[s-1]);(o<i||o>l||c<i||c>l)&&t.domain([n[0],n[s-1]])}},DCe=function(t,n){if(!t)return null;for(var s=0,a=t.length;s<a;s++)if(t[s].item===n)return t[s].position;return null},MCe=function(t,n){if(!n||n.length!==2||!ze(n[0])||!ze(n[1]))return t;var s=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!ze(t[0])||t[0]<s)&&(i[0]=s),(!ze(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<s&&(i[1]=s),i},$Ce=function(t){var n=t.length;if(!(n<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,l=0,o=0;o<n;++o){var c=qm(t[o][s][1])?t[o][s][0]:t[o][s][1];c>=0?(t[o][s][0]=i,t[o][s][1]=i+c,i=t[o][s][1]):(t[o][s][0]=l,t[o][s][1]=l+c,l=t[o][s][1])}},ICe=function(t){var n=t.length;if(!(n<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,l=0;l<n;++l){var o=qm(t[l][s][1])?t[l][s][0]:t[l][s][1];o>=0?(t[l][s][0]=i,t[l][s][1]=i+o,i=t[l][s][1]):(t[l][s][0]=0,t[l][s][1]=0)}},FCe={sign:$Ce,expand:nxe,none:Wf,silhouette:sxe,wiggle:axe,positive:ICe},LCe=function(t,n,s){var a=n.map(function(o){return o.props.dataKey}),i=FCe[s],l=rxe().keys(a).value(function(o,c){return+ln(o,c,0)}).order(xC).offset(i);return l(t)},UCe=function(t,n,s,a,i,l){if(!t)return null;var o=l?n.reverse():n,c={},d=o.reduce(function(h,f){var m,g=(m=f.type)!==null&&m!==void 0&&m.defaultProps?en(en({},f.type.defaultProps),f.props):f.props,x=g.stackId,w=g.hide;if(w)return h;var j=g[s],y=h[j]||{hasStack:!1,stackGroups:{}};if(An(x)){var b=y.stackGroups[x]||{numericAxisId:s,cateAxisId:a,items:[]};b.items.push(f),y.hasStack=!0,y.stackGroups[x]=b}else y.stackGroups[Lu("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[f]};return en(en({},h),{},qh({},j,y))},c),u={};return Object.keys(d).reduce(function(h,f){var m=d[f];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(x,w){var j=m.stackGroups[w];return en(en({},x),{},qh({},w,{numericAxisId:s,cateAxisId:a,items:j.items,stackedData:LCe(t,j.items,i)}))},g)}return en(en({},h),{},qh({},f,m))},u)},JV=function(t,n){var s=n.realScaleType,a=n.type,i=n.tickCount,l=n.originalDomain,o=n.allowDecimals,c=s||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=eCe(d,i,o);return t.domain([q1(u),bc(u)]),{niceTicks:u}}if(i&&a==="number"){var h=t.domain(),f=tCe(h,i,o);return{niceTicks:f}}return null};function lj(e){var t=e.axis,n=e.ticks,s=e.bandSize,a=e.entry,i=e.index,l=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Tt(a[t.dataKey])){var o=Rb(n,"value",a[t.dataKey]);if(o)return o.coordinate+s/2}return n[i]?n[i].coordinate+s/2:null}var c=ln(a,Tt(l)?t.dataKey:l);return Tt(c)?null:t.scale(c)}var V$=function(t){var n=t.axis,s=t.ticks,a=t.offset,i=t.bandSize,l=t.entry,o=t.index;if(n.type==="category")return s[o]?s[o].coordinate+a:null;var c=ln(l,n.dataKey,n.domain[o]);return Tt(c)?null:n.scale(c)-i/2+a},BCe=function(t){var n=t.numericAxis,s=n.scale.domain();if(n.type==="number"){var a=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return a<=0&&i>=0?0:i<0?i:a}return s[0]},zCe=function(t,n){var s,a=(s=t.type)!==null&&s!==void 0&&s.defaultProps?en(en({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(An(i)){var l=n[i];if(l){var o=l.items.indexOf(t);return o>=0?l.stackedData[o]:null}}return null},VCe=function(t){return t.reduce(function(n,s){return[q1(s.concat([n[0]]).filter(ze)),bc(s.concat([n[1]]).filter(ze))]},[1/0,-1/0])},eq=function(t,n,s){return Object.keys(t).reduce(function(a,i){var l=t[i],o=l.stackedData,c=o.reduce(function(d,u){var h=VCe(u.slice(n,s+1));return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},q$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,W$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,HC=function(t,n,s){if(xt(t))return t(n,s);if(!Array.isArray(t))return n;var a=[];if(ze(t[0]))a[0]=s?t[0]:Math.min(t[0],n[0]);else if(q$.test(t[0])){var i=+q$.exec(t[0])[1];a[0]=n[0]-i}else xt(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(ze(t[1]))a[1]=s?t[1]:Math.max(t[1],n[1]);else if(W$.test(t[1])){var l=+W$.exec(t[1])[1];a[1]=n[1]+l}else xt(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},oj=function(t,n,s){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!s||a>0)return a}if(t&&n&&n.length>=2){for(var i=YT(n,function(h){return h.coordinate}),l=1/0,o=1,c=i.length;o<c;o++){var d=i[o],u=i[o-1];l=Math.min((d.coordinate||0)-(u.coordinate||0),l)}return l===1/0?0:l}return s?void 0:0},H$=function(t,n,s){return!t||!t.length||wu(t,ya(s,"type.defaultProps.domain"))?n:t},tq=function(t,n){var s=t.type.defaultProps?en(en({},t.type.defaultProps),t.props):t.props,a=s.dataKey,i=s.name,l=s.unit,o=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return en(en({},ot(t,!1)),{},{dataKey:a,unit:l,formatter:o,name:i||a,color:w4(t),value:ln(n,a),type:c,payload:n,chartType:d,hide:u})};function vg(e){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vg(e)}function K$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Hl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K$(Object(n),!0).forEach(function(s){rq(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function rq(e,t,n){return t=qCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qCe(e){var t=WCe(e,"string");return vg(t)=="symbol"?t:t+""}function WCe(e,t){if(vg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(vg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HCe(e,t){return XCe(e)||YCe(e,t)||GCe(e,t)||KCe()}function KCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GCe(e,t){if(e){if(typeof e=="string")return G$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G$(e,t)}}function G$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function YCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function XCe(e){if(Array.isArray(e))return e}var cj=Math.PI/180,ZCe=function(t){return t*180/Math.PI},Or=function(t,n,s,a){return{x:t+Math.cos(-cj*a)*s,y:n+Math.sin(-cj*a)*s}},nq=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(n-(s.top||0)-(s.bottom||0)))/2},QCe=function(t,n,s,a,i){var l=t.width,o=t.height,c=t.startAngle,d=t.endAngle,u=ks(t.cx,l,l/2),h=ks(t.cy,o,o/2),f=nq(l,o,s),m=ks(t.innerRadius,f,0),g=ks(t.outerRadius,f,f*.8),x=Object.keys(n);return x.reduce(function(w,j){var y=n[j],b=y.domain,p=y.reversed,N;if(Tt(y.range))a==="angleAxis"?N=[c,d]:a==="radiusAxis"&&(N=[m,g]),p&&(N=[N[1],N[0]]);else{N=y.range;var k=N,S=HCe(k,2);c=S[0],d=S[1]}var P=ZV(y,i),_=P.realScaleType,R=P.scale;R.domain(b).range(N),QV(R);var O=JV(R,Hl(Hl({},y),{},{realScaleType:_})),M=Hl(Hl(Hl({},y),O),{},{range:N,radius:g,realScaleType:_,scale:R,cx:u,cy:h,innerRadius:m,outerRadius:g,startAngle:c,endAngle:d});return Hl(Hl({},w),{},rq({},j,M))},{})},JCe=function(t,n){var s=t.x,a=t.y,i=n.x,l=n.y;return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-l,2))},ePe=function(t,n){var s=t.x,a=t.y,i=n.cx,l=n.cy,o=JCe({x:s,y:a},{x:i,y:l});if(o<=0)return{radius:o};var c=(s-i)/o,d=Math.acos(c);return a>l&&(d=2*Math.PI-d),{radius:o,angle:ZCe(d),angleInRadian:d}},tPe=function(t){var n=t.startAngle,s=t.endAngle,a=Math.floor(n/360),i=Math.floor(s/360),l=Math.min(a,i);return{startAngle:n-l*360,endAngle:s-l*360}},rPe=function(t,n){var s=n.startAngle,a=n.endAngle,i=Math.floor(s/360),l=Math.floor(a/360),o=Math.min(i,l);return t+o*360},Y$=function(t,n){var s=t.x,a=t.y,i=ePe({x:s,y:a},n),l=i.radius,o=i.angle,c=n.innerRadius,d=n.outerRadius;if(l<c||l>d)return!1;if(l===0)return!0;var u=tPe(n),h=u.startAngle,f=u.endAngle,m=o,g;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}return g?Hl(Hl({},n),{},{radius:l,angle:rPe(m,n)}):null},sq=function(t){return!v.isValidElement(t)&&!xt(t)&&typeof t!="boolean"?t.className:""};function yg(e){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yg(e)}var nPe=["offset"];function sPe(e){return oPe(e)||lPe(e)||iPe(e)||aPe()}function aPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iPe(e,t){if(e){if(typeof e=="string")return KC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KC(e,t)}}function lPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oPe(e){if(Array.isArray(e))return KC(e)}function KC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function cPe(e,t){if(e==null)return{};var n=dPe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function dPe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function X$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X$(Object(n),!0).forEach(function(s){uPe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uPe(e,t,n){return t=hPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hPe(e){var t=fPe(e,"string");return yg(t)=="symbol"?t:t+""}function fPe(e,t){if(yg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(yg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bg(){return bg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},bg.apply(this,arguments)}var mPe=function(t){var n=t.value,s=t.formatter,a=Tt(t.children)?n:t.children;return xt(s)?s(a):a},pPe=function(t,n){var s=Ns(n-t),a=Math.min(Math.abs(n-t),360);return s*a},xPe=function(t,n,s){var a=t.position,i=t.viewBox,l=t.offset,o=t.className,c=i,d=c.cx,u=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,g=c.endAngle,x=c.clockWise,w=(h+f)/2,j=pPe(m,g),y=j>=0?1:-1,b,p;a==="insideStart"?(b=m+y*l,p=x):a==="insideEnd"?(b=g-y*l,p=!x):a==="end"&&(b=g+y*l,p=x),p=j<=0?p:!p;var N=Or(d,u,w,b),k=Or(d,u,w,b+(p?1:-1)*359),S="M".concat(N.x,",").concat(N.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(p?0:1,`,
    `).concat(k.x,",").concat(k.y),P=Tt(t.id)?Lu("recharts-radial-line-"):t.id;return X.createElement("text",bg({},s,{dominantBaseline:"central",className:Ot("recharts-radial-bar-label",o)}),X.createElement("defs",null,X.createElement("path",{id:P,d:S})),X.createElement("textPath",{xlinkHref:"#".concat(P)},n))},gPe=function(t){var n=t.viewBox,s=t.offset,a=t.position,i=n,l=i.cx,o=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,h=i.endAngle,f=(u+h)/2;if(a==="outside"){var m=Or(l,o,d+s,f),g=m.x,x=m.y;return{x:g,y:x,textAnchor:g>=l?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"end"};var w=(c+d)/2,j=Or(l,o,w,f),y=j.x,b=j.y;return{x:y,y:b,textAnchor:"middle",verticalAnchor:"middle"}},vPe=function(t){var n=t.viewBox,s=t.parentViewBox,a=t.offset,i=t.position,l=n,o=l.x,c=l.y,d=l.width,u=l.height,h=u>=0?1:-1,f=h*a,m=h>0?"end":"start",g=h>0?"start":"end",x=d>=0?1:-1,w=x*a,j=x>0?"end":"start",y=x>0?"start":"end";if(i==="top"){var b={x:o+d/2,y:c-h*a,textAnchor:"middle",verticalAnchor:m};return yn(yn({},b),s?{height:Math.max(c-s.y,0),width:d}:{})}if(i==="bottom"){var p={x:o+d/2,y:c+u+f,textAnchor:"middle",verticalAnchor:g};return yn(yn({},p),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(i==="left"){var N={x:o-w,y:c+u/2,textAnchor:j,verticalAnchor:"middle"};return yn(yn({},N),s?{width:Math.max(N.x-s.x,0),height:u}:{})}if(i==="right"){var k={x:o+d+w,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return yn(yn({},k),s?{width:Math.max(s.x+s.width-k.x,0),height:u}:{})}var S=s?{width:d,height:u}:{};return i==="insideLeft"?yn({x:o+w,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},S):i==="insideRight"?yn({x:o+d-w,y:c+u/2,textAnchor:j,verticalAnchor:"middle"},S):i==="insideTop"?yn({x:o+d/2,y:c+f,textAnchor:"middle",verticalAnchor:g},S):i==="insideBottom"?yn({x:o+d/2,y:c+u-f,textAnchor:"middle",verticalAnchor:m},S):i==="insideTopLeft"?yn({x:o+w,y:c+f,textAnchor:y,verticalAnchor:g},S):i==="insideTopRight"?yn({x:o+d-w,y:c+f,textAnchor:j,verticalAnchor:g},S):i==="insideBottomLeft"?yn({x:o+w,y:c+u-f,textAnchor:y,verticalAnchor:m},S):i==="insideBottomRight"?yn({x:o+d-w,y:c+u-f,textAnchor:j,verticalAnchor:m},S):Um(i)&&(ze(i.x)||Pd(i.x))&&(ze(i.y)||Pd(i.y))?yn({x:o+ks(i.x,d),y:c+ks(i.y,u),textAnchor:"end",verticalAnchor:"end"},S):yn({x:o+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},S)},yPe=function(t){return"cx"in t&&ze(t.cx)};function Mn(e){var t=e.offset,n=t===void 0?5:t,s=cPe(e,nPe),a=yn({offset:n},s),i=a.viewBox,l=a.position,o=a.value,c=a.children,d=a.content,u=a.className,h=u===void 0?"":u,f=a.textBreakAll;if(!i||Tt(o)&&Tt(c)&&!v.isValidElement(d)&&!xt(d))return null;if(v.isValidElement(d))return v.cloneElement(d,a);var m;if(xt(d)){if(m=v.createElement(d,a),v.isValidElement(m))return m}else m=mPe(a);var g=yPe(i),x=ot(a,!0);if(g&&(l==="insideStart"||l==="insideEnd"||l==="end"))return xPe(a,m,x);var w=g?gPe(a):vPe(a);return X.createElement(ju,bg({className:Ot("recharts-label",h)},x,w,{breakAll:f}),m)}Mn.displayName="Label";var aq=function(t){var n=t.cx,s=t.cy,a=t.angle,i=t.startAngle,l=t.endAngle,o=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,h=t.x,f=t.y,m=t.top,g=t.left,x=t.width,w=t.height,j=t.clockWise,y=t.labelViewBox;if(y)return y;if(ze(x)&&ze(w)){if(ze(h)&&ze(f))return{x:h,y:f,width:x,height:w};if(ze(m)&&ze(g))return{x:m,y:g,width:x,height:w}}return ze(h)&&ze(f)?{x:h,y:f,width:0,height:0}:ze(n)&&ze(s)?{cx:n,cy:s,startAngle:i||a||0,endAngle:l||a||0,innerRadius:d||0,outerRadius:u||c||o||0,clockWise:j}:t.viewBox?t.viewBox:{}},bPe=function(t,n){return t?t===!0?X.createElement(Mn,{key:"label-implicit",viewBox:n}):An(t)?X.createElement(Mn,{key:"label-implicit",viewBox:n,value:t}):v.isValidElement(t)?t.type===Mn?v.cloneElement(t,{key:"label-implicit",viewBox:n}):X.createElement(Mn,{key:"label-implicit",content:t,viewBox:n}):xt(t)?X.createElement(Mn,{key:"label-implicit",content:t,viewBox:n}):Um(t)?X.createElement(Mn,bg({viewBox:n},t,{key:"label-implicit"})):null:null},jPe=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var a=t.children,i=aq(t),l=ba(a,Mn).map(function(c,d){return v.cloneElement(c,{viewBox:n||i,key:"label-".concat(d)})});if(!s)return l;var o=bPe(t.label,n||i);return[o].concat(sPe(l))};Mn.parseViewBox=aq;Mn.renderCallByParent=jPe;function wPe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var NPe=wPe;const kPe=er(NPe);function jg(e){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jg(e)}var SPe=["valueAccessor"],CPe=["data","dataKey","clockWise","id","textBreakAll"];function PPe(e){return EPe(e)||TPe(e)||APe(e)||_Pe()}function _Pe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function APe(e,t){if(e){if(typeof e=="string")return GC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GC(e,t)}}function TPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function EPe(e){if(Array.isArray(e))return GC(e)}function GC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function dj(){return dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},dj.apply(this,arguments)}function Z$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Q$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z$(Object(n),!0).forEach(function(s){OPe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function OPe(e,t,n){return t=RPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RPe(e){var t=DPe(e,"string");return jg(t)=="symbol"?t:t+""}function DPe(e,t){if(jg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(jg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J$(e,t){if(e==null)return{};var n=MPe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function MPe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var $Pe=function(t){return Array.isArray(t.value)?kPe(t.value):t.value};function kl(e){var t=e.valueAccessor,n=t===void 0?$Pe:t,s=J$(e,SPe),a=s.data,i=s.dataKey,l=s.clockWise,o=s.id,c=s.textBreakAll,d=J$(s,CPe);return!a||!a.length?null:X.createElement(Xt,{className:"recharts-label-list"},a.map(function(u,h){var f=Tt(i)?n(u,h):ln(u&&u.payload,i),m=Tt(o)?{}:{id:"".concat(o,"-").concat(h)};return X.createElement(Mn,dj({},ot(u,!0),d,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:Mn.parseViewBox(Tt(l)?u:Q$(Q$({},u),{},{clockWise:l})),key:"label-".concat(h),index:h}))}))}kl.displayName="LabelList";function IPe(e,t){return e?e===!0?X.createElement(kl,{key:"labelList-implicit",data:t}):X.isValidElement(e)||xt(e)?X.createElement(kl,{key:"labelList-implicit",data:t,content:e}):Um(e)?X.createElement(kl,dj({data:t},e,{key:"labelList-implicit"})):null:null}function FPe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,a=ba(s,kl).map(function(l,o){return v.cloneElement(l,{data:t,key:"labelList-".concat(o)})});if(!n)return a;var i=IPe(e.label,t);return[i].concat(PPe(a))}kl.renderCallByParent=FPe;function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function YC(){return YC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},YC.apply(this,arguments)}function e5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function t5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e5(Object(n),!0).forEach(function(s){LPe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function LPe(e,t,n){return t=UPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UPe(e){var t=BPe(e,"string");return wg(t)=="symbol"?t:t+""}function BPe(e,t){if(wg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(wg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zPe=function(t,n){var s=Ns(n-t),a=Math.min(Math.abs(n-t),359.999);return s*a},t0=function(t){var n=t.cx,s=t.cy,a=t.radius,i=t.angle,l=t.sign,o=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(o?1:-1)+a,h=Math.asin(c/u)/cj,f=d?i:i+l*h,m=Or(n,s,u,f),g=Or(n,s,a,f),x=d?i-l*h:i,w=Or(n,s,u*Math.cos(h*cj),x);return{center:m,circleTangency:g,lineTangency:w,theta:h}},iq=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,l=t.startAngle,o=t.endAngle,c=zPe(l,o),d=l+c,u=Or(n,s,i,l),h=Or(n,s,i,d),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(l>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var m=Or(n,s,a,l),g=Or(n,s,a,d);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(l<=d),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(s," Z");return f},VPe=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,l=t.cornerRadius,o=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,h=Ns(u-d),f=t0({cx:n,cy:s,radius:i,angle:d,sign:h,cornerRadius:l,cornerIsExternal:c}),m=f.circleTangency,g=f.lineTangency,x=f.theta,w=t0({cx:n,cy:s,radius:i,angle:u,sign:-h,cornerRadius:l,cornerIsExternal:c}),j=w.circleTangency,y=w.lineTangency,b=w.theta,p=c?Math.abs(d-u):Math.abs(d-u)-x-b;if(p<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):iq({cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var N="M ".concat(g.x,",").concat(g.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(p>180),",").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
  `);if(a>0){var k=t0({cx:n,cy:s,radius:a,angle:d,sign:h,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),S=k.circleTangency,P=k.lineTangency,_=k.theta,R=t0({cx:n,cy:s,radius:a,angle:u,sign:-h,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),O=R.circleTangency,M=R.lineTangency,A=R.theta,T=c?Math.abs(d-u):Math.abs(d-u)-_-A;if(T<0&&l===0)return"".concat(N,"L").concat(n,",").concat(s,"Z");N+="L".concat(M.x,",").concat(M.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(h<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(T>180),",").concat(+(h>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,"Z")}else N+="L".concat(n,",").concat(s,"Z");return N},qPe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},lq=function(t){var n=t5(t5({},qPe),t),s=n.cx,a=n.cy,i=n.innerRadius,l=n.outerRadius,o=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,u=n.startAngle,h=n.endAngle,f=n.className;if(l<i||u===h)return null;var m=Ot("recharts-sector",f),g=l-i,x=ks(o,g,0,!0),w;return x>0&&Math.abs(u-h)<360?w=VPe({cx:s,cy:a,innerRadius:i,outerRadius:l,cornerRadius:Math.min(x,g/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:h}):w=iq({cx:s,cy:a,innerRadius:i,outerRadius:l,startAngle:u,endAngle:h}),X.createElement("path",YC({},ot(n,!0),{className:m,d:w,role:"img"}))};function Ng(e){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function XC(){return XC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},XC.apply(this,arguments)}function r5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function n5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r5(Object(n),!0).forEach(function(s){WPe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function WPe(e,t,n){return t=HPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HPe(e){var t=KPe(e,"string");return Ng(t)=="symbol"?t:t+""}function KPe(e,t){if(Ng(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ng(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s5={curveBasisClosed:Wpe,curveBasisOpen:Hpe,curveBasis:qpe,curveBumpX:Tpe,curveBumpY:Epe,curveLinearClosed:Kpe,curveLinear:O1,curveMonotoneX:Gpe,curveMonotoneY:Ype,curveNatural:Xpe,curveStep:Zpe,curveStepAfter:Jpe,curveStepBefore:Qpe},r0=function(t){return t.x===+t.x&&t.y===+t.y},Pp=function(t){return t.x},_p=function(t){return t.y},GPe=function(t,n){if(xt(t))return t;var s="curve".concat(T1(t));return(s==="curveMonotone"||s==="curveBump")&&n?s5["".concat(s).concat(n==="vertical"?"Y":"X")]:s5[s]||O1},YPe=function(t){var n=t.type,s=n===void 0?"linear":n,a=t.points,i=a===void 0?[]:a,l=t.baseLine,o=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=GPe(s,o),h=d?i.filter(function(x){return r0(x)}):i,f;if(Array.isArray(l)){var m=d?l.filter(function(x){return r0(x)}):l,g=h.map(function(x,w){return n5(n5({},x),{},{base:m[w]})});return o==="vertical"?f=Hy().y(_p).x1(Pp).x0(function(x){return x.base.x}):f=Hy().x(Pp).y1(_p).y0(function(x){return x.base.y}),f.defined(r0).curve(u),f(g)}return o==="vertical"&&ze(l)?f=Hy().y(_p).x1(Pp).x0(l):ze(l)?f=Hy().x(Pp).y1(_p).y0(l):f=tz().x(Pp).y(_p),f.defined(r0).curve(u),f(h)},au=function(t){var n=t.className,s=t.points,a=t.path,i=t.pathRef;if((!s||!s.length)&&!a)return null;var l=s&&s.length?YPe(t):a;return v.createElement("path",XC({},ot(t,!1),Db(t),{className:Ot("recharts-curve",n),d:l,ref:i}))},oq={exports:{}},XPe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ZPe=XPe,QPe=ZPe;function cq(){}function dq(){}dq.resetWarningCache=cq;var JPe=function(){function e(s,a,i,l,o,c){if(c!==QPe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:dq,resetWarningCache:cq};return n.PropTypes=n,n};oq.exports=JPe();var e_e=oq.exports;const xr=er(e_e);var t_e=Object.getOwnPropertyNames,r_e=Object.getOwnPropertySymbols,n_e=Object.prototype.hasOwnProperty;function a5(e,t){return function(s,a,i){return e(s,a,i)&&t(s,a,i)}}function n0(e){return function(n,s,a){if(!n||!s||typeof n!="object"||typeof s!="object")return e(n,s,a);var i=a.cache,l=i.get(n),o=i.get(s);if(l&&o)return l===s&&o===n;i.set(n,s),i.set(s,n);var c=e(n,s,a);return i.delete(n),i.delete(s),c}}function i5(e){return t_e(e).concat(r_e(e))}var s_e=Object.hasOwn||function(e,t){return n_e.call(e,t)};function zu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var a_e="__v",i_e="__o",l_e="_owner",l5=Object.getOwnPropertyDescriptor,o5=Object.keys;function o_e(e,t,n){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!n.equals(e[s],t[s],s,s,e,t,n))return!1;return!0}function c_e(e,t){return zu(e.getTime(),t.getTime())}function d_e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function u_e(e,t){return e===t}function c5(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.entries(),l,o,c=0;(l=i.next())&&!l.done;){for(var d=t.entries(),u=!1,h=0;(o=d.next())&&!o.done;){if(a[h]){h++;continue}var f=l.value,m=o.value;if(n.equals(f[0],m[0],c,h,e,t,n)&&n.equals(f[1],m[1],f[0],m[0],e,t,n)){u=a[h]=!0;break}h++}if(!u)return!1;c++}return!0}var h_e=zu;function f_e(e,t,n){var s=o5(e),a=s.length;if(o5(t).length!==a)return!1;for(;a-- >0;)if(!uq(e,t,n,s[a]))return!1;return!0}function Ap(e,t,n){var s=i5(e),a=s.length;if(i5(t).length!==a)return!1;for(var i,l,o;a-- >0;)if(i=s[a],!uq(e,t,n,i)||(l=l5(e,i),o=l5(t,i),(l||o)&&(!l||!o||l.configurable!==o.configurable||l.enumerable!==o.enumerable||l.writable!==o.writable)))return!1;return!0}function m_e(e,t){return zu(e.valueOf(),t.valueOf())}function p_e(e,t){return e.source===t.source&&e.flags===t.flags}function d5(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.values(),l,o;(l=i.next())&&!l.done;){for(var c=t.values(),d=!1,u=0;(o=c.next())&&!o.done;){if(!a[u]&&n.equals(l.value,o.value,l.value,o.value,e,t,n)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function x_e(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function g_e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function uq(e,t,n,s){return(s===l_e||s===i_e||s===a_e)&&(e.$$typeof||t.$$typeof)?!0:s_e(t,s)&&n.equals(e[s],t[s],s,s,e,t,n)}var v_e="[object Arguments]",y_e="[object Boolean]",b_e="[object Date]",j_e="[object Error]",w_e="[object Map]",N_e="[object Number]",k_e="[object Object]",S_e="[object RegExp]",C_e="[object Set]",P_e="[object String]",__e="[object URL]",A_e=Array.isArray,u5=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,h5=Object.assign,T_e=Object.prototype.toString.call.bind(Object.prototype.toString);function E_e(e){var t=e.areArraysEqual,n=e.areDatesEqual,s=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,l=e.areNumbersEqual,o=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,u=e.areSetsEqual,h=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(g,x,w){if(g===x)return!0;if(g==null||x==null)return!1;var j=typeof g;if(j!==typeof x)return!1;if(j!=="object")return j==="number"?l(g,x,w):j==="function"?a(g,x,w):!1;var y=g.constructor;if(y!==x.constructor)return!1;if(y===Object)return o(g,x,w);if(A_e(g))return t(g,x,w);if(u5!=null&&u5(g))return h(g,x,w);if(y===Date)return n(g,x,w);if(y===RegExp)return d(g,x,w);if(y===Map)return i(g,x,w);if(y===Set)return u(g,x,w);var b=T_e(g);return b===b_e?n(g,x,w):b===S_e?d(g,x,w):b===w_e?i(g,x,w):b===C_e?u(g,x,w):b===k_e?typeof g.then!="function"&&typeof x.then!="function"&&o(g,x,w):b===__e?f(g,x,w):b===j_e?s(g,x,w):b===v_e?o(g,x,w):b===y_e||b===N_e||b===P_e?c(g,x,w):!1}}function O_e(e){var t=e.circular,n=e.createCustomConfig,s=e.strict,a={areArraysEqual:s?Ap:o_e,areDatesEqual:c_e,areErrorsEqual:d_e,areFunctionsEqual:u_e,areMapsEqual:s?a5(c5,Ap):c5,areNumbersEqual:h_e,areObjectsEqual:s?Ap:f_e,arePrimitiveWrappersEqual:m_e,areRegExpsEqual:p_e,areSetsEqual:s?a5(d5,Ap):d5,areTypedArraysEqual:s?Ap:x_e,areUrlsEqual:g_e};if(n&&(a=h5({},a,n(a))),t){var i=n0(a.areArraysEqual),l=n0(a.areMapsEqual),o=n0(a.areObjectsEqual),c=n0(a.areSetsEqual);a=h5({},a,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:c})}return a}function R_e(e){return function(t,n,s,a,i,l,o){return e(t,n,o)}}function D_e(e){var t=e.circular,n=e.comparator,s=e.createState,a=e.equals,i=e.strict;if(s)return function(c,d){var u=s(),h=u.cache,f=h===void 0?t?new WeakMap:void 0:h,m=u.meta;return n(c,d,{cache:f,equals:a,meta:m,strict:i})};if(t)return function(c,d){return n(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var l={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return n(c,d,l)}}var M_e=ad();ad({strict:!0});ad({circular:!0});ad({circular:!0,strict:!0});ad({createInternalComparator:function(){return zu}});ad({strict:!0,createInternalComparator:function(){return zu}});ad({circular:!0,createInternalComparator:function(){return zu}});ad({circular:!0,createInternalComparator:function(){return zu},strict:!0});function ad(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,s=e.createInternalComparator,a=e.createState,i=e.strict,l=i===void 0?!1:i,o=O_e(e),c=E_e(o),d=s?s(c):R_e(c);return D_e({circular:n,comparator:c,createState:a,equals:d,strict:l})}function $_e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function f5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,s=function a(i){n<0&&(n=i),i-n>t?(e(i),n=-1):$_e(a)};requestAnimationFrame(s)}function ZC(e){"@babel/helpers - typeof";return ZC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ZC(e)}function I_e(e){return B_e(e)||U_e(e)||L_e(e)||F_e()}function F_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L_e(e,t){if(e){if(typeof e=="string")return m5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m5(e,t)}}function m5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function U_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function B_e(e){if(Array.isArray(e))return e}function z_e(){var e={},t=function(){return null},n=!1,s=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,o=I_e(l),c=o[0],d=o.slice(1);if(typeof c=="number"){f5(a.bind(null,d),c);return}a(c),f5(a.bind(null,d));return}ZC(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,s(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}function p5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function x5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p5(Object(n),!0).forEach(function(s){hq(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function hq(e,t,n){return t=V_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V_e(e){var t=q_e(e,"string");return kg(t)==="symbol"?t:String(t)}function q_e(e,t){if(kg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(kg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var W_e=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(s,a){return s.filter(function(i){return a.includes(i)})})},H_e=function(t){return t},K_e=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},mx=function(t,n){return Object.keys(n).reduce(function(s,a){return x5(x5({},s),{},hq({},a,t(a,n[a])))},{})},g5=function(t,n,s){return t.map(function(a){return"".concat(K_e(a)," ").concat(n,"ms ").concat(s)}).join(",")};function G_e(e,t){return Z_e(e)||X_e(e,t)||fq(e,t)||Y_e()}function Y_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X_e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Z_e(e){if(Array.isArray(e))return e}function Q_e(e){return tAe(e)||eAe(e)||fq(e)||J_e()}function J_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fq(e,t){if(e){if(typeof e=="string")return QC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QC(e,t)}}function eAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tAe(e){if(Array.isArray(e))return QC(e)}function QC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var uj=1e-4,mq=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},pq=function(t,n){return t.map(function(s,a){return s*Math.pow(n,a)}).reduce(function(s,a){return s+a})},v5=function(t,n){return function(s){var a=mq(t,n);return pq(a,s)}},rAe=function(t,n){return function(s){var a=mq(t,n),i=[].concat(Q_e(a.map(function(l,o){return l*o}).slice(1)),[0]);return pq(i,s)}},y5=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0],i=n[1],l=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,l=1,o=1;break;case"ease":a=.25,i=.1,l=.25,o=1;break;case"ease-in":a=.42,i=0,l=1,o=1;break;case"ease-out":a=.42,i=0,l=.58,o=1;break;case"ease-in-out":a=0,i=0,l=.58,o=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),u=G_e(d,4);a=u[0],i=u[1],l=u[2],o=u[3]}}}var h=v5(a,l),f=v5(i,o),m=rAe(a,l),g=function(j){return j>1?1:j<0?0:j},x=function(j){for(var y=j>1?1:j,b=y,p=0;p<8;++p){var N=h(b)-y,k=m(b);if(Math.abs(N-y)<uj||k<uj)return f(b);b=g(b-N/k)}return f(b)};return x.isStepper=!1,x},nAe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,s=n===void 0?100:n,a=t.damping,i=a===void 0?8:a,l=t.dt,o=l===void 0?17:l,c=function(u,h,f){var m=-(u-h)*s,g=f*i,x=f+(m-g)*o/1e3,w=f*o/1e3+u;return Math.abs(w-h)<uj&&Math.abs(x)<uj?[h,0]:[w,x]};return c.isStepper=!0,c.dt=o,c},sAe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return y5(a);case"spring":return nAe();default:if(a.split("(")[0]==="cubic-bezier")return y5(a)}return typeof a=="function"?a:null};function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function b5(e){return lAe(e)||iAe(e)||xq(e)||aAe()}function aAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lAe(e){if(Array.isArray(e))return eP(e)}function j5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j5(Object(n),!0).forEach(function(s){JC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function JC(e,t,n){return t=oAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oAe(e){var t=cAe(e,"string");return Sg(t)==="symbol"?t:String(t)}function cAe(e,t){if(Sg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Sg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dAe(e,t){return fAe(e)||hAe(e,t)||xq(e,t)||uAe()}function uAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xq(e,t){if(e){if(typeof e=="string")return eP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eP(e,t)}}function eP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function hAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function fAe(e){if(Array.isArray(e))return e}var hj=function(t,n,s){return t+(n-t)*s},tP=function(t){var n=t.from,s=t.to;return n!==s},mAe=function e(t,n,s){var a=mx(function(i,l){if(tP(l)){var o=t(l.from,l.to,l.velocity),c=dAe(o,2),d=c[0],u=c[1];return Kn(Kn({},l),{},{from:d,velocity:u})}return l},n);return s<1?mx(function(i,l){return tP(l)?Kn(Kn({},l),{},{velocity:hj(l.velocity,a[i].velocity,s),from:hj(l.from,a[i].from,s)}):l},n):e(t,a,s-1)};const pAe=function(e,t,n,s,a){var i=W_e(e,t),l=i.reduce(function(w,j){return Kn(Kn({},w),{},JC({},j,[e[j],t[j]]))},{}),o=i.reduce(function(w,j){return Kn(Kn({},w),{},JC({},j,{from:e[j],velocity:0,to:t[j]}))},{}),c=-1,d,u,h=function(){return null},f=function(){return mx(function(j,y){return y.from},o)},m=function(){return!Object.values(o).filter(tP).length},g=function(j){d||(d=j);var y=j-d,b=y/n.dt;o=mAe(n,o,b),a(Kn(Kn(Kn({},e),t),f())),d=j,m()||(c=requestAnimationFrame(h))},x=function(j){u||(u=j);var y=(j-u)/s,b=mx(function(N,k){return hj.apply(void 0,b5(k).concat([n(y)]))},l);if(a(Kn(Kn(Kn({},e),t),b)),y<1)c=requestAnimationFrame(h);else{var p=mx(function(N,k){return hj.apply(void 0,b5(k).concat([n(1)]))},l);a(Kn(Kn(Kn({},e),t),p))}};return h=n.isStepper?g:x,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function em(e){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(e)}var xAe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function gAe(e,t){if(e==null)return{};var n=vAe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function vAe(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Ik(e){return wAe(e)||jAe(e)||bAe(e)||yAe()}function yAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bAe(e,t){if(e){if(typeof e=="string")return rP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rP(e,t)}}function jAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wAe(e){if(Array.isArray(e))return rP(e)}function rP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function w5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ri(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w5(Object(n),!0).forEach(function(s){Wp(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Wp(e,t,n){return t=gq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kAe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,gq(s.key),s)}}function SAe(e,t,n){return t&&kAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gq(e){var t=CAe(e,"string");return em(t)==="symbol"?t:String(t)}function CAe(e,t){if(em(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(em(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nP(e,t)}function nP(e,t){return nP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},nP(e,t)}function _Ae(e){var t=AAe();return function(){var s=fj(e),a;if(t){var i=fj(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return sP(this,a)}}function sP(e,t){if(t&&(em(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aP(e)}function aP(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fj(e){return fj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fj(e)}var Ui=function(e){PAe(n,e);var t=_Ae(n);function n(s,a){var i;NAe(this,n),i=t.call(this,s,a);var l=i.props,o=l.isActive,c=l.attributeName,d=l.from,u=l.to,h=l.steps,f=l.children,m=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(aP(i)),i.changeStyle=i.changeStyle.bind(aP(i)),!o||m<=0)return i.state={style:{}},typeof f=="function"&&(i.state={style:u}),sP(i);if(h&&h.length)i.state={style:h[0].style};else if(d){if(typeof f=="function")return i.state={style:d},sP(i);i.state={style:c?Wp({},c,d):d}}else i.state={style:{}};return i}return SAe(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,l=a.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,l=i.isActive,o=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,h=i.from,f=this.state.style;if(o){if(!l){var m={style:c?Wp({},c,u):u};this.state&&f&&(c&&f[c]!==u||!c&&f!==u)&&this.setState(m);return}if(!(M_e(a.to,u)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=g||d?h:a.to;if(this.state&&f){var w={style:c?Wp({},c,x):x};(c&&f[c]!==x||!c&&f!==x)&&this.setState(w)}this.runAnimation(ri(ri({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,l=a.from,o=a.to,c=a.duration,d=a.easing,u=a.begin,h=a.onAnimationEnd,f=a.onAnimationStart,m=pAe(l,o,sAe(d),c,this.changeStyle),g=function(){i.stopJSAnimation=m()};this.manager.start([f,u,g,c,h])}},{key:"runStepAnimation",value:function(a){var i=this,l=a.steps,o=a.begin,c=a.onAnimationStart,d=l[0],u=d.style,h=d.duration,f=h===void 0?0:h,m=function(x,w,j){if(j===0)return x;var y=w.duration,b=w.easing,p=b===void 0?"ease":b,N=w.style,k=w.properties,S=w.onAnimationEnd,P=j>0?l[j-1]:w,_=k||Object.keys(N);if(typeof p=="function"||p==="spring")return[].concat(Ik(x),[i.runJSAnimation.bind(i,{from:P.style,to:N,duration:y,easing:p}),y]);var R=g5(_,y,p),O=ri(ri(ri({},P.style),N),{},{transition:R});return[].concat(Ik(x),[O,y,S]).filter(H_e)};return this.manager.start([c].concat(Ik(l.reduce(m,[u,Math.max(f,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=z_e());var i=a.begin,l=a.duration,o=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,h=a.onAnimationEnd,f=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof d=="function"||typeof m=="function"||d==="spring"){this.runJSAnimation(a);return}if(f.length>1){this.runStepAnimation(a);return}var x=o?Wp({},o,c):c,w=g5(Object.keys(x),l,d);g.start([u,i,ri(ri({},x),{},{transition:w}),l,h])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var l=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=gAe(a,xAe),d=v.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!o||d===0||l<=0)return i;var h=function(m){var g=m.props,x=g.style,w=x===void 0?{}:x,j=g.className,y=v.cloneElement(m,ri(ri({},c),{},{style:ri(ri({},w),u),className:j}));return y};return d===1?h(v.Children.only(i)):X.createElement("div",null,v.Children.map(i,function(f){return h(f)}))}}]),n}(v.PureComponent);Ui.displayName="Animate";Ui.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ui.propTypes={from:xr.oneOfType([xr.object,xr.string]),to:xr.oneOfType([xr.object,xr.string]),attributeName:xr.string,duration:xr.number,begin:xr.number,easing:xr.oneOfType([xr.string,xr.func]),steps:xr.arrayOf(xr.shape({duration:xr.number.isRequired,style:xr.object.isRequired,easing:xr.oneOfType([xr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),xr.func]),properties:xr.arrayOf("string"),onAnimationEnd:xr.func})),children:xr.oneOfType([xr.node,xr.func]),isActive:xr.bool,canBegin:xr.bool,onAnimationEnd:xr.func,shouldReAnimate:xr.bool,onAnimationStart:xr.func,onAnimationReStart:xr.func};function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function mj(){return mj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},mj.apply(this,arguments)}function TAe(e,t){return DAe(e)||RAe(e,t)||OAe(e,t)||EAe()}function EAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OAe(e,t){if(e){if(typeof e=="string")return N5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N5(e,t)}}function N5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function RAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function DAe(e){if(Array.isArray(e))return e}function k5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function S5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k5(Object(n),!0).forEach(function(s){MAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function MAe(e,t,n){return t=$Ae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $Ae(e){var t=IAe(e,"string");return Cg(t)=="symbol"?t:t+""}function IAe(e,t){if(Cg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Cg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C5=function(t,n,s,a,i){var l=Math.min(Math.abs(s)/2,Math.abs(a)/2),o=a>=0?1:-1,c=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,u;if(l>0&&i instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=i[f]>l?l:i[f];u="M".concat(t,",").concat(n+o*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(t+c*h[0],",").concat(n)),u+="L ".concat(t+s-c*h[1],",").concat(n),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(n+o*h[1])),u+="L ".concat(t+s,",").concat(n+a-o*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(t+s-c*h[2],",").concat(n+a)),u+="L ".concat(t+c*h[3],",").concat(n+a),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+a-o*h[3])),u+="Z"}else if(l>0&&i===+i&&i>0){var g=Math.min(l,i);u="M ".concat(t,",").concat(n+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(t+c*g,",").concat(n,`
            L `).concat(t+s-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(t+s,",").concat(n+o*g,`
            L `).concat(t+s,",").concat(n+a-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(t+s-c*g,",").concat(n+a,`
            L `).concat(t+c*g,",").concat(n+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(t,",").concat(n+a-o*g," Z")}else u="M ".concat(t,",").concat(n," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return u},FAe=function(t,n){if(!t||!n)return!1;var s=t.x,a=t.y,i=n.x,l=n.y,o=n.width,c=n.height;if(Math.abs(o)>0&&Math.abs(c)>0){var d=Math.min(i,i+o),u=Math.max(i,i+o),h=Math.min(l,l+c),f=Math.max(l,l+c);return s>=d&&s<=u&&a>=h&&a<=f}return!1},LAe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},N4=function(t){var n=S5(S5({},LAe),t),s=v.useRef(),a=v.useState(-1),i=TAe(a,2),l=i[0],o=i[1];v.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var p=s.current.getTotalLength();p&&o(p)}catch{}},[]);var c=n.x,d=n.y,u=n.width,h=n.height,f=n.radius,m=n.className,g=n.animationEasing,x=n.animationDuration,w=n.animationBegin,j=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||u===0||h===0)return null;var b=Ot("recharts-rectangle",m);return y?X.createElement(Ui,{canBegin:l>0,from:{width:u,height:h,x:c,y:d},to:{width:u,height:h,x:c,y:d},duration:x,animationEasing:g,isActive:y},function(p){var N=p.width,k=p.height,S=p.x,P=p.y;return X.createElement(Ui,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:x,isActive:j,easing:g},X.createElement("path",mj({},ot(n,!0),{className:b,d:C5(S,P,N,k,f),ref:s})))}):X.createElement("path",mj({},ot(n,!0),{className:b,d:C5(c,d,u,h,f)}))},UAe=["points","className","baseLinePoints","connectNulls"];function wh(){return wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wh.apply(this,arguments)}function BAe(e,t){if(e==null)return{};var n=zAe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function zAe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function P5(e){return HAe(e)||WAe(e)||qAe(e)||VAe()}function VAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qAe(e,t){if(e){if(typeof e=="string")return iP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iP(e,t)}}function WAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function HAe(e){if(Array.isArray(e))return iP(e)}function iP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var _5=function(t){return t&&t.x===+t.x&&t.y===+t.y},KAe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(s){_5(s)?n[n.length-1].push(s):n[n.length-1].length>0&&n.push([])}),_5(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},px=function(t,n){var s=KAe(t);n&&(s=[s.reduce(function(i,l){return[].concat(P5(i),P5(l))},[])]);var a=s.map(function(i){return i.reduce(function(l,o,c){return"".concat(l).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return s.length===1?"".concat(a,"Z"):a},GAe=function(t,n,s){var a=px(t,s);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(px(n.reverse(),s).slice(1))},YAe=function(t){var n=t.points,s=t.className,a=t.baseLinePoints,i=t.connectNulls,l=BAe(t,UAe);if(!n||!n.length)return null;var o=Ot("recharts-polygon",s);if(a&&a.length){var c=l.stroke&&l.stroke!=="none",d=GAe(n,a,i);return X.createElement("g",{className:o},X.createElement("path",wh({},ot(l,!0),{fill:d.slice(-1)==="Z"?l.fill:"none",stroke:"none",d})),c?X.createElement("path",wh({},ot(l,!0),{fill:"none",d:px(n,i)})):null,c?X.createElement("path",wh({},ot(l,!0),{fill:"none",d:px(a,i)})):null)}var u=px(n,i);return X.createElement("path",wh({},ot(l,!0),{fill:u.slice(-1)==="Z"?l.fill:"none",className:o,d:u}))};function lP(){return lP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},lP.apply(this,arguments)}var ry=function(t){var n=t.cx,s=t.cy,a=t.r,i=t.className,l=Ot("recharts-dot",i);return n===+n&&s===+s&&a===+a?v.createElement("circle",lP({},ot(t,!1),Db(t),{className:l,cx:n,cy:s,r:a})):null};function Pg(e){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pg(e)}var XAe=["x","y","top","left","width","height","className"];function oP(){return oP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},oP.apply(this,arguments)}function A5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ZAe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A5(Object(n),!0).forEach(function(s){QAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function QAe(e,t,n){return t=JAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JAe(e){var t=eTe(e,"string");return Pg(t)=="symbol"?t:t+""}function eTe(e,t){if(Pg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Pg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tTe(e,t){if(e==null)return{};var n=rTe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function rTe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var nTe=function(t,n,s,a,i,l){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(l,",").concat(n,"h").concat(s)},sTe=function(t){var n=t.x,s=n===void 0?0:n,a=t.y,i=a===void 0?0:a,l=t.top,o=l===void 0?0:l,c=t.left,d=c===void 0?0:c,u=t.width,h=u===void 0?0:u,f=t.height,m=f===void 0?0:f,g=t.className,x=tTe(t,XAe),w=ZAe({x:s,y:i,top:o,left:d,width:h,height:m},x);return!ze(s)||!ze(i)||!ze(h)||!ze(m)||!ze(o)||!ze(d)?null:X.createElement("path",oP({},ot(w,!0),{className:Ot("recharts-cross",g),d:nTe(s,i,h,m,o,d)}))},aTe=V1,iTe=AV,lTe=$l;function oTe(e,t){return e&&e.length?aTe(e,lTe(t),iTe):void 0}var cTe=oTe;const dTe=er(cTe);var uTe=V1,hTe=$l,fTe=TV;function mTe(e,t){return e&&e.length?uTe(e,hTe(t),fTe):void 0}var pTe=mTe;const xTe=er(pTe);var gTe=["cx","cy","angle","ticks","axisLine"],vTe=["ticks","tick","angle","tickFormatter","stroke"];function tm(e){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tm(e)}function xx(){return xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xx.apply(this,arguments)}function T5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function dd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T5(Object(n),!0).forEach(function(s){K1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function E5(e,t){if(e==null)return{};var n=yTe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function yTe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function bTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,yq(s.key),s)}}function jTe(e,t,n){return t&&O5(e.prototype,t),n&&O5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wTe(e,t,n){return t=pj(t),NTe(e,vq()?Reflect.construct(t,n||[],pj(e).constructor):t.apply(e,n))}function NTe(e,t){if(t&&(tm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kTe(e)}function kTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vq=function(){return!!e})()}function pj(e){return pj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pj(e)}function STe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cP(e,t)}function cP(e,t){return cP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},cP(e,t)}function K1(e,t,n){return t=yq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yq(e){var t=CTe(e,"string");return tm(t)=="symbol"?t:t+""}function CTe(e,t){if(tm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(tm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G1=function(e){function t(){return bTe(this,t),wTe(this,t,arguments)}return STe(t,e),jTe(t,[{key:"getTickValueCoord",value:function(s){var a=s.coordinate,i=this.props,l=i.angle,o=i.cx,c=i.cy;return Or(o,c,a,l)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,a;switch(s){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var s=this.props,a=s.cx,i=s.cy,l=s.angle,o=s.ticks,c=dTe(o,function(u){return u.coordinate||0}),d=xTe(o,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:l,endAngle:l,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,l=s.angle,o=s.ticks,c=s.axisLine,d=E5(s,gTe),u=o.reduce(function(g,x){return[Math.min(g[0],x.coordinate),Math.max(g[1],x.coordinate)]},[1/0,-1/0]),h=Or(a,i,u[0],l),f=Or(a,i,u[1],l),m=dd(dd(dd({},ot(d,!1)),{},{fill:"none"},ot(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return X.createElement("line",xx({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,l=a.tick,o=a.angle,c=a.tickFormatter,d=a.stroke,u=E5(a,vTe),h=this.getTickTextAnchor(),f=ot(u,!1),m=ot(l,!1),g=i.map(function(x,w){var j=s.getTickValueCoord(x),y=dd(dd(dd(dd({textAnchor:h,transform:"rotate(".concat(90-o,", ").concat(j.x,", ").concat(j.y,")")},f),{},{stroke:"none",fill:d},m),{},{index:w},j),{},{payload:x});return X.createElement(Xt,xx({className:Ot("recharts-polar-radius-axis-tick",sq(l)),key:"tick-".concat(x.coordinate)},bu(s.props,x,w)),t.renderTickItem(l,y,c?c(x.value,w):x.value))});return X.createElement(Xt,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.axisLine,l=s.tick;return!a||!a.length?null:X.createElement(Xt,{className:Ot("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),Mn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,a,i){var l;return X.isValidElement(s)?l=X.cloneElement(s,a):xt(s)?l=s(a):l=X.createElement(ju,xx({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])}(v.PureComponent);K1(G1,"displayName","PolarRadiusAxis");K1(G1,"axisType","radiusAxis");K1(G1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function rm(e){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rm(e)}function wd(){return wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wd.apply(this,arguments)}function R5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ud(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R5(Object(n),!0).forEach(function(s){Y1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function PTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,jq(s.key),s)}}function _Te(e,t,n){return t&&D5(e.prototype,t),n&&D5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ATe(e,t,n){return t=xj(t),TTe(e,bq()?Reflect.construct(t,n||[],xj(e).constructor):t.apply(e,n))}function TTe(e,t){if(t&&(rm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ETe(e)}function ETe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bq=function(){return!!e})()}function xj(e){return xj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xj(e)}function OTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dP(e,t)}function dP(e,t){return dP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},dP(e,t)}function Y1(e,t,n){return t=jq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jq(e){var t=RTe(e,"string");return rm(t)=="symbol"?t:t+""}function RTe(e,t){if(rm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(rm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DTe=Math.PI/180,M5=1e-5,X1=function(e){function t(){return PTe(this,t),ATe(this,t,arguments)}return OTe(t,e),_Te(t,[{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.cx,l=a.cy,o=a.radius,c=a.orientation,d=a.tickSize,u=d||8,h=Or(i,l,o,s.coordinate),f=Or(i,l,o+(c==="inner"?-1:1)*u,s.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(s){var a=this.props.orientation,i=Math.cos(-s.coordinate*DTe),l;return i>M5?l=a==="outer"?"start":"end":i<-M5?l=a==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,l=s.radius,o=s.axisLine,c=s.axisLineType,d=ud(ud({},ot(this.props,!1)),{},{fill:"none"},ot(o,!1));if(c==="circle")return X.createElement(ry,wd({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:l}));var u=this.props.ticks,h=u.map(function(f){return Or(a,i,l,f.coordinate)});return X.createElement(YAe,wd({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,l=a.tick,o=a.tickLine,c=a.tickFormatter,d=a.stroke,u=ot(this.props,!1),h=ot(l,!1),f=ud(ud({},u),{},{fill:"none"},ot(o,!1)),m=i.map(function(g,x){var w=s.getTickLineCoord(g),j=s.getTickTextAnchor(g),y=ud(ud(ud({textAnchor:j},u),{},{stroke:"none",fill:d},h),{},{index:x,payload:g,x:w.x2,y:w.y2});return X.createElement(Xt,wd({className:Ot("recharts-polar-angle-axis-tick",sq(l)),key:"tick-".concat(g.coordinate)},bu(s.props,g,x)),o&&X.createElement("line",wd({className:"recharts-polar-angle-axis-tick-line"},f,w)),l&&t.renderTickItem(l,y,c?c(g.value,x):g.value))});return X.createElement(Xt,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.radius,l=s.axisLine;return i<=0||!a||!a.length?null:X.createElement(Xt,{className:Ot("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,a,i){var l;return X.isValidElement(s)?l=X.cloneElement(s,a):xt(s)?l=s(a):l=X.createElement(ju,wd({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])}(v.PureComponent);Y1(X1,"displayName","PolarAngleAxis");Y1(X1,"axisType","angleAxis");Y1(X1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var MTe=Sz,$Te=MTe(Object.getPrototypeOf,Object),ITe=$Te,FTe=Ro,LTe=ITe,UTe=Do,BTe="[object Object]",zTe=Function.prototype,VTe=Object.prototype,wq=zTe.toString,qTe=VTe.hasOwnProperty,WTe=wq.call(Object);function HTe(e){if(!UTe(e)||FTe(e)!=BTe)return!1;var t=LTe(e);if(t===null)return!0;var n=qTe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&wq.call(n)==WTe}var KTe=HTe;const GTe=er(KTe);var YTe=Ro,XTe=Do,ZTe="[object Boolean]";function QTe(e){return e===!0||e===!1||XTe(e)&&YTe(e)==ZTe}var JTe=QTe;const e4e=er(JTe);function _g(e){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_g(e)}function gj(){return gj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gj.apply(this,arguments)}function t4e(e,t){return a4e(e)||s4e(e,t)||n4e(e,t)||r4e()}function r4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n4e(e,t){if(e){if(typeof e=="string")return $5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $5(e,t)}}function $5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function s4e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function a4e(e){if(Array.isArray(e))return e}function I5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function F5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I5(Object(n),!0).forEach(function(s){i4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function i4e(e,t,n){return t=l4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l4e(e){var t=o4e(e,"string");return _g(t)=="symbol"?t:t+""}function o4e(e,t){if(_g(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(_g(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L5=function(t,n,s,a,i){var l=s-a,o;return o="M ".concat(t,",").concat(n),o+="L ".concat(t+s,",").concat(n),o+="L ".concat(t+s-l/2,",").concat(n+i),o+="L ".concat(t+s-l/2-a,",").concat(n+i),o+="L ".concat(t,",").concat(n," Z"),o},c4e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},d4e=function(t){var n=F5(F5({},c4e),t),s=v.useRef(),a=v.useState(-1),i=t4e(a,2),l=i[0],o=i[1];v.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var b=s.current.getTotalLength();b&&o(b)}catch{}},[]);var c=n.x,d=n.y,u=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,g=n.animationEasing,x=n.animationDuration,w=n.animationBegin,j=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||f!==+f||u===0&&h===0||f===0)return null;var y=Ot("recharts-trapezoid",m);return j?X.createElement(Ui,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:d},to:{upperWidth:u,lowerWidth:h,height:f,x:c,y:d},duration:x,animationEasing:g,isActive:j},function(b){var p=b.upperWidth,N=b.lowerWidth,k=b.height,S=b.x,P=b.y;return X.createElement(Ui,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:x,easing:g},X.createElement("path",gj({},ot(n,!0),{className:y,d:L5(S,P,p,N,k),ref:s})))}):X.createElement("g",null,X.createElement("path",gj({},ot(n,!0),{className:y,d:L5(c,d,u,h,f)})))},u4e=["option","shapeType","propTransformer","activeClassName","isActive"];function Ag(e){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(e)}function h4e(e,t){if(e==null)return{};var n=f4e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function f4e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function U5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function vj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U5(Object(n),!0).forEach(function(s){m4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function m4e(e,t,n){return t=p4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p4e(e){var t=x4e(e,"string");return Ag(t)=="symbol"?t:t+""}function x4e(e,t){if(Ag(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ag(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g4e(e,t){return vj(vj({},t),e)}function v4e(e,t){return e==="symbols"}function B5(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return X.createElement(N4,n);case"trapezoid":return X.createElement(d4e,n);case"sector":return X.createElement(lq,n);case"symbols":if(v4e(t))return X.createElement(BT,n);break;default:return null}}function y4e(e){return v.isValidElement(e)?e.props:e}function Nq(e){var t=e.option,n=e.shapeType,s=e.propTransformer,a=s===void 0?g4e:s,i=e.activeClassName,l=i===void 0?"recharts-active-shape":i,o=e.isActive,c=h4e(e,u4e),d;if(v.isValidElement(t))d=v.cloneElement(t,vj(vj({},c),y4e(t)));else if(xt(t))d=t(c);else if(GTe(t)&&!e4e(t)){var u=a(t,c);d=X.createElement(B5,{shapeType:n,elementProps:u})}else{var h=c;d=X.createElement(B5,{shapeType:n,elementProps:h})}return o?X.createElement(Xt,{className:l},d):d}function Z1(e,t){return t!=null&&"trapezoids"in e.props}function Q1(e,t){return t!=null&&"sectors"in e.props}function Tg(e,t){return t!=null&&"points"in e.props}function b4e(e,t){var n,s,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return a&&i}function j4e(e,t){var n=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return n&&s}function w4e(e,t){var n=e.x===t.x,s=e.y===t.y,a=e.z===t.z;return n&&s&&a}function N4e(e,t){var n;return Z1(e,t)?n=b4e:Q1(e,t)?n=j4e:Tg(e,t)&&(n=w4e),n}function k4e(e,t){var n;return Z1(e,t)?n="trapezoids":Q1(e,t)?n="sectors":Tg(e,t)&&(n="points"),n}function S4e(e,t){if(Z1(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Q1(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Tg(e,t)?t.payload:{}}function C4e(e){var t=e.activeTooltipItem,n=e.graphicalItem,s=e.itemData,a=k4e(n,t),i=S4e(n,t),l=s.filter(function(c,d){var u=wu(i,c),h=n.props[a].filter(function(g){var x=N4e(n,t);return x(g,t)}),f=n.props[a].indexOf(h[h.length-1]),m=d===f;return u&&m}),o=s.indexOf(l[l.length-1]);return o}var L0;function nm(e){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nm(e)}function Nh(){return Nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Nh.apply(this,arguments)}function z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z5(Object(n),!0).forEach(function(s){Ia(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function P4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Sq(s.key),s)}}function _4e(e,t,n){return t&&V5(e.prototype,t),n&&V5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function A4e(e,t,n){return t=yj(t),T4e(e,kq()?Reflect.construct(t,n||[],yj(e).constructor):t.apply(e,n))}function T4e(e,t){if(t&&(nm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E4e(e)}function E4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kq=function(){return!!e})()}function yj(e){return yj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yj(e)}function O4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uP(e,t)}function uP(e,t){return uP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},uP(e,t)}function Ia(e,t,n){return t=Sq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sq(e){var t=R4e(e,"string");return nm(t)=="symbol"?t:t+""}function R4e(e,t){if(nm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(nm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ki=function(e){function t(n){var s;return P4e(this,t),s=A4e(this,t,[n]),Ia(s,"pieRef",null),Ia(s,"sectorRefs",[]),Ia(s,"id",Lu("recharts-pie-")),Ia(s,"handleAnimationEnd",function(){var a=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),xt(a)&&a()}),Ia(s,"handleAnimationStart",function(){var a=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),xt(a)&&a()}),s.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},s}return O4e(t,e),_4e(t,[{key:"isActiveIndex",value:function(s){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(s)!==-1:s===a}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,o=i.labelLine,c=i.dataKey,d=i.valueKey,u=ot(this.props,!1),h=ot(l,!1),f=ot(o,!1),m=l&&l.offsetRadius||20,g=s.map(function(x,w){var j=(x.startAngle+x.endAngle)/2,y=Or(x.cx,x.cy,x.outerRadius+m,j),b=Ar(Ar(Ar(Ar({},u),x),{},{stroke:"none"},h),{},{index:w,textAnchor:t.getTextAnchor(y.x,x.cx)},y),p=Ar(Ar(Ar(Ar({},u),x),{},{fill:"none",stroke:x.fill},f),{},{index:w,points:[Or(x.cx,x.cy,x.outerRadius,j),y]}),N=c;return Tt(c)&&Tt(d)?N="value":Tt(c)&&(N=d),X.createElement(Xt,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(w)},o&&t.renderLabelLineItem(o,p,"line"),t.renderLabelItem(l,b,ln(x,N)))});return X.createElement(Xt,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(s){var a=this,i=this.props,l=i.activeShape,o=i.blendStroke,c=i.inactiveShape;return s.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&s.length!==1)return null;var h=a.isActiveIndex(u),f=c&&a.hasActiveIndex()?c:null,m=h?l:f,g=Ar(Ar({},d),{},{stroke:o?d.fill:d.stroke,tabIndex:-1});return X.createElement(Xt,Nh({ref:function(w){w&&!a.sectorRefs.includes(w)&&a.sectorRefs.push(w)},tabIndex:-1,className:"recharts-pie-sector"},bu(a.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),X.createElement(Nq,Nh({option:m,isActive:h,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,a=this.props,i=a.sectors,l=a.isAnimationActive,o=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return X.createElement(Ui,{begin:o,duration:c,isActive:l,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var x=g.t,w=[],j=i&&i[0],y=j.startAngle;return i.forEach(function(b,p){var N=f&&f[p],k=p>0?ya(b,"paddingAngle",0):0;if(N){var S=Cn(N.endAngle-N.startAngle,b.endAngle-b.startAngle),P=Ar(Ar({},b),{},{startAngle:y+k,endAngle:y+S(x)+k});w.push(P),y=P.endAngle}else{var _=b.endAngle,R=b.startAngle,O=Cn(0,_-R),M=O(x),A=Ar(Ar({},b),{},{startAngle:y+k,endAngle:y+M+k});w.push(A),y=A.endAngle}}),X.createElement(Xt,null,s.renderSectorsStatically(w))})}},{key:"attachKeyboardHandlers",value:function(s){var a=this;s.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"ArrowRight":{var o=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,a=s.sectors,i=s.isAnimationActive,l=this.state.prevSectors;return i&&a&&a.length&&(!l||!wu(l,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,a=this.props,i=a.hide,l=a.sectors,o=a.className,c=a.label,d=a.cx,u=a.cy,h=a.innerRadius,f=a.outerRadius,m=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!l||!l.length||!ze(d)||!ze(u)||!ze(h)||!ze(f))return null;var x=Ot("recharts-pie",o);return X.createElement(Xt,{tabIndex:this.props.rootTabIndex,className:x,ref:function(j){s.pieRef=j}},this.renderSectors(),c&&this.renderLabels(l),Mn.renderCallByParent(this.props,null,!1),(!m||g)&&kl.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return a.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:s.sectors!==a.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,a){return s>a?"start":s<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,a,i){if(X.isValidElement(s))return X.cloneElement(s,a);if(xt(s))return s(a);var l=Ot("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return X.createElement(au,Nh({},a,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(s,a,i){if(X.isValidElement(s))return X.cloneElement(s,a);var l=i;if(xt(s)&&(l=s(a),X.isValidElement(l)))return l;var o=Ot("recharts-pie-label-text",typeof s!="boolean"&&!xt(s)?s.className:"");return X.createElement(ju,Nh({},a,{alignmentBaseline:"middle",className:o}),l)}}])}(v.PureComponent);L0=Ki;Ia(Ki,"displayName","Pie");Ia(Ki,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ai.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ia(Ki,"parseDeltaAngle",function(e,t){var n=Ns(t-e),s=Math.min(Math.abs(t-e),360);return n*s});Ia(Ki,"getRealPieData",function(e){var t=e.data,n=e.children,s=ot(e,!1),a=ba(n,Gm);return t&&t.length?t.map(function(i,l){return Ar(Ar(Ar({payload:i},s),i),a&&a[l]&&a[l].props)}):a&&a.length?a.map(function(i){return Ar(Ar({},s),i.props)}):[]});Ia(Ki,"parseCoordinateOfPie",function(e,t){var n=t.top,s=t.left,a=t.width,i=t.height,l=nq(a,i),o=s+ks(e.cx,a,a/2),c=n+ks(e.cy,i,i/2),d=ks(e.innerRadius,l,0),u=ks(e.outerRadius,l,l*.8),h=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:d,outerRadius:u,maxRadius:h}});Ia(Ki,"getComposedData",function(e){var t=e.item,n=e.offset,s=t.type.defaultProps!==void 0?Ar(Ar({},t.type.defaultProps),t.props):t.props,a=L0.getRealPieData(s);if(!a||!a.length)return null;var i=s.cornerRadius,l=s.startAngle,o=s.endAngle,c=s.paddingAngle,d=s.dataKey,u=s.nameKey,h=s.valueKey,f=s.tooltipType,m=Math.abs(s.minAngle),g=L0.parseCoordinateOfPie(s,n),x=L0.parseDeltaAngle(l,o),w=Math.abs(x),j=d;Tt(d)&&Tt(h)?(_i(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):Tt(d)&&(_i(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=h);var y=a.filter(function(P){return ln(P,j,0)!==0}).length,b=(w>=360?y:y-1)*c,p=w-y*m-b,N=a.reduce(function(P,_){var R=ln(_,j,0);return P+(ze(R)?R:0)},0),k;if(N>0){var S;k=a.map(function(P,_){var R=ln(P,j,0),O=ln(P,u,_),M=(ze(R)?R:0)/N,A;_?A=S.endAngle+Ns(x)*c*(R!==0?1:0):A=l;var T=A+Ns(x)*((R!==0?m:0)+M*p),B=(A+T)/2,z=(g.innerRadius+g.outerRadius)/2,U=[{name:O,value:R,payload:P,dataKey:j,type:f}],E=Or(g.cx,g.cy,z,B);return S=Ar(Ar(Ar({percent:M,cornerRadius:i,name:O,tooltipPayload:U,midAngle:B,middleRadius:z,tooltipPosition:E},P),g),{},{value:ln(P,j),startAngle:A,endAngle:T,payload:P,paddingAngle:Ns(x)*c}),S})}return Ar(Ar({},g),{},{sectors:k,data:a})});var D4e=Math.ceil,M4e=Math.max;function $4e(e,t,n,s){for(var a=-1,i=M4e(D4e((t-e)/(n||1)),0),l=Array(i);i--;)l[s?i:++a]=e,e+=n;return l}var I4e=$4e,F4e=qz,q5=1/0,L4e=17976931348623157e292;function U4e(e){if(!e)return e===0?e:0;if(e=F4e(e),e===q5||e===-q5){var t=e<0?-1:1;return t*L4e}return e===e?e:0}var Cq=U4e,B4e=I4e,z4e=$1,Fk=Cq;function V4e(e){return function(t,n,s){return s&&typeof s!="number"&&z4e(t,n,s)&&(n=s=void 0),t=Fk(t),n===void 0?(n=t,t=0):n=Fk(n),s=s===void 0?t<n?1:-1:Fk(s),B4e(t,n,s,e)}}var q4e=V4e,W4e=q4e,H4e=W4e(),K4e=H4e;const bj=er(K4e);function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(e)}function W5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function H5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W5(Object(n),!0).forEach(function(s){Pq(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Pq(e,t,n){return t=G4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G4e(e){var t=Y4e(e,"string");return Eg(t)=="symbol"?t:t+""}function Y4e(e,t){if(Eg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Eg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X4e=["Webkit","Moz","O","ms"],Z4e=function(t,n){var s=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=X4e.reduce(function(i,l){return H5(H5({},i),{},Pq({},l+s,n))},{});return a[t]=n,a};function sm(e){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sm(e)}function jj(){return jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jj.apply(this,arguments)}function K5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Lk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K5(Object(n),!0).forEach(function(s){la(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Q4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Aq(s.key),s)}}function J4e(e,t,n){return t&&G5(e.prototype,t),n&&G5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function eEe(e,t,n){return t=wj(t),tEe(e,_q()?Reflect.construct(t,n||[],wj(e).constructor):t.apply(e,n))}function tEe(e,t){if(t&&(sm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rEe(e)}function rEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_q=function(){return!!e})()}function wj(e){return wj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wj(e)}function nEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hP(e,t)}function hP(e,t){return hP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},hP(e,t)}function la(e,t,n){return t=Aq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Aq(e){var t=sEe(e,"string");return sm(t)=="symbol"?t:t+""}function sEe(e,t){if(sm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(sm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aEe=function(t){var n=t.data,s=t.startIndex,a=t.endIndex,i=t.x,l=t.width,o=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=hx().domain(bj(0,c)).range([i,i+l-o]),u=d.domain().map(function(h){return d(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(a),scale:d,scaleValues:u}},Y5=function(t){return t.changedTouches&&!!t.changedTouches.length},am=function(e){function t(n){var s;return Q4e(this,t),s=eEe(this,t,[n]),la(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),la(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),la(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,i=a.endIndex,l=a.onDragEnd,o=a.startIndex;l==null||l({endIndex:i,startIndex:o})}),s.detachDragEndListener()}),la(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),la(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),la(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),la(s,"handleSlideDragStart",function(a){var i=Y5(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return nEe(t,e),J4e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,i=s.endX,l=this.state.scaleValues,o=this.props,c=o.gap,d=o.data,u=d.length-1,h=Math.min(a,i),f=Math.max(a,i),m=t.getIndexInRange(l,h),g=t.getIndexInRange(l,f);return{startIndex:m-m%c,endIndex:g===u?u:g-g%c}}},{key:"getTextOfTick",value:function(s){var a=this.props,i=a.data,l=a.tickFormatter,o=a.dataKey,c=ln(i[s],o,s);return xt(l)?l(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,i=a.slideMoveStartX,l=a.startX,o=a.endX,c=this.props,d=c.x,u=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,g=c.onChange,x=s.pageX-i;x>0?x=Math.min(x,d+u-h-o,d+u-h-l):x<0&&(x=Math.max(x,d-l,d-o));var w=this.getIndex({startX:l+x,endX:o+x});(w.startIndex!==f||w.endIndex!==m)&&g&&g(w),this.setState({startX:l+x,endX:o+x,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var i=Y5(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,i=a.brushMoveStartX,l=a.movingTravellerId,o=a.endX,c=a.startX,d=this.state[l],u=this.props,h=u.x,f=u.width,m=u.travellerWidth,g=u.onChange,x=u.gap,w=u.data,j={startX:this.state.startX,endX:this.state.endX},y=s.pageX-i;y>0?y=Math.min(y,h+f-m-d):y<0&&(y=Math.max(y,h-d)),j[l]=d+y;var b=this.getIndex(j),p=b.startIndex,N=b.endIndex,k=function(){var P=w.length-1;return l==="startX"&&(o>c?p%x===0:N%x===0)||o<c&&N===P||l==="endX"&&(o>c?N%x===0:p%x===0)||o>c&&N===P};this.setState(la(la({},l,d+y),"brushMoveStartX",s.pageX),function(){g&&k()&&g(b)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var i=this,l=this.state,o=l.scaleValues,c=l.startX,d=l.endX,u=this.state[a],h=o.indexOf(u);if(h!==-1){var f=h+s;if(!(f===-1||f>=o.length)){var m=o[f];a==="startX"&&m>=d||a==="endX"&&m<=c||this.setState(la({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,i=s.y,l=s.width,o=s.height,c=s.fill,d=s.stroke;return X.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:l,height:o})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,i=s.y,l=s.width,o=s.height,c=s.data,d=s.children,u=s.padding,h=v.Children.only(d);return h?X.cloneElement(h,{x:a,y:i,width:l,height:o,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,a){var i,l,o=this,c=this.props,d=c.y,u=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,g=c.data,x=c.startIndex,w=c.endIndex,j=Math.max(s,this.props.x),y=Lk(Lk({},ot(this.props,!1)),{},{x:j,y:d,width:u,height:h}),b=m||"Min value: ".concat((i=g[x])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=g[w])===null||l===void 0?void 0:l.name);return X.createElement(Xt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),o.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,a))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,y))}},{key:"renderSlide",value:function(s,a){var i=this.props,l=i.y,o=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(s,a)+d,h=Math.max(Math.abs(a-s)-d,0);return X.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:l,width:h,height:o})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,i=s.endIndex,l=s.y,o=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,h=u.startX,f=u.endX,m=5,g={pointerEvents:"none",fill:d};return X.createElement(Xt,{className:"recharts-brush-texts"},X.createElement(ju,jj({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:l+o/2},g),this.getTextOfTick(a)),X.createElement(ju,jj({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:l+o/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var s=this.props,a=s.data,i=s.className,l=s.children,o=s.x,c=s.y,d=s.width,u=s.height,h=s.alwaysShowText,f=this.state,m=f.startX,g=f.endX,x=f.isTextActive,w=f.isSlideMoving,j=f.isTravellerMoving,y=f.isTravellerFocused;if(!a||!a.length||!ze(o)||!ze(c)||!ze(d)||!ze(u)||d<=0||u<=0)return null;var b=Ot("recharts-brush",i),p=X.Children.count(l)===1,N=Z4e("userSelect","none");return X.createElement(Xt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),p&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(x||w||j||y||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,i=s.y,l=s.width,o=s.height,c=s.stroke,d=Math.floor(i+o/2)-1;return X.createElement(X.Fragment,null,X.createElement("rect",{x:a,y:i,width:l,height:o,fill:c,stroke:"none"}),X.createElement("line",{x1:a+1,y1:d,x2:a+l-1,y2:d,fill:"none",stroke:"#fff"}),X.createElement("line",{x1:a+1,y1:d+2,x2:a+l-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var i;return X.isValidElement(s)?i=X.cloneElement(s,a):xt(s)?i=s(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(s,a){var i=s.data,l=s.width,o=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,h=s.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return Lk({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l},i&&i.length?aEe({data:i,width:l,x:o,travellerWidth:c,startIndex:u,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(l!==a.prevWidth||o!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([o,o+l-c]);var f=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(s,a){for(var i=s.length,l=0,o=i-1;o-l>1;){var c=Math.floor((l+o)/2);s[c]>a?o=c:l=c}return a>=s[o]?o:l}}])}(v.PureComponent);la(am,"displayName","Brush");la(am,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var iEe=GT;function lEe(e,t){var n;return iEe(e,function(s,a,i){return n=t(s,a,i),!n}),!!n}var oEe=lEe,cEe=gz,dEe=$l,uEe=oEe,hEe=Js,fEe=$1;function mEe(e,t,n){var s=hEe(e)?cEe:uEe;return n&&fEe(e,t,n)&&(t=void 0),s(e,dEe(t))}var pEe=mEe;const xEe=er(pEe);var Sl=function(t,n){var s=t.alwaysShow,a=t.ifOverflow;return s&&(a="extendDomain"),a===n},X5=Lz;function gEe(e,t,n){t=="__proto__"&&X5?X5(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var vEe=gEe,yEe=vEe,bEe=Iz,jEe=$l;function wEe(e,t){var n={};return t=jEe(t),bEe(e,function(s,a,i){yEe(n,a,t(s,a,i))}),n}var NEe=wEe;const kEe=er(NEe);function SEe(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(!t(e[n],n,e))return!1;return!0}var CEe=SEe,PEe=GT;function _Ee(e,t){var n=!0;return PEe(e,function(s,a,i){return n=!!t(s,a,i),n}),n}var AEe=_Ee,TEe=CEe,EEe=AEe,OEe=$l,REe=Js,DEe=$1;function MEe(e,t,n){var s=REe(e)?TEe:EEe;return n&&DEe(e,t,n)&&(t=void 0),s(e,OEe(t))}var $Ee=MEe;const Tq=er($Ee);var IEe=["x","y"];function Og(e){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}function fP(){return fP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},fP.apply(this,arguments)}function Z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Tp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z5(Object(n),!0).forEach(function(s){FEe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function FEe(e,t,n){return t=LEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LEe(e){var t=UEe(e,"string");return Og(t)=="symbol"?t:t+""}function UEe(e,t){if(Og(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Og(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BEe(e,t){if(e==null)return{};var n=zEe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function zEe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function VEe(e,t){var n=e.x,s=e.y,a=BEe(e,IEe),i="".concat(n),l=parseInt(i,10),o="".concat(s),c=parseInt(o,10),d="".concat(t.height||a.height),u=parseInt(d,10),h="".concat(t.width||a.width),f=parseInt(h,10);return Tp(Tp(Tp(Tp(Tp({},t),a),l?{x:l}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function Q5(e){return X.createElement(Nq,fP({shapeType:"rectangle",propTransformer:VEe,activeClassName:"recharts-active-bar"},e))}var qEe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof t=="number")return t;var i=ze(s)||xme(s);return i?t(s,a):(i||ku(),n)}},WEe=["value","background"],Eq;function im(e){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},im(e)}function HEe(e,t){if(e==null)return{};var n=KEe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function KEe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Nj(){return Nj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Nj.apply(this,arguments)}function J5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J5(Object(n),!0).forEach(function(s){jc(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function GEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eI(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Rq(s.key),s)}}function YEe(e,t,n){return t&&eI(e.prototype,t),n&&eI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function XEe(e,t,n){return t=kj(t),ZEe(e,Oq()?Reflect.construct(t,n||[],kj(e).constructor):t.apply(e,n))}function ZEe(e,t){if(t&&(im(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QEe(e)}function QEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oq=function(){return!!e})()}function kj(e){return kj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kj(e)}function JEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mP(e,t)}function mP(e,t){return mP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},mP(e,t)}function jc(e,t,n){return t=Rq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rq(e){var t=eOe(e,"string");return im(t)=="symbol"?t:t+""}function eOe(e,t){if(im(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(im(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ao=function(e){function t(){var n;GEe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=XEe(this,t,[].concat(a)),jc(n,"state",{isAnimationFinished:!1}),jc(n,"id",Lu("recharts-bar-")),jc(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),l&&l()}),jc(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),l&&l()}),n}return JEe(t,e),YEe(t,[{key:"renderRectanglesStatically",value:function(s){var a=this,i=this.props,l=i.shape,o=i.dataKey,c=i.activeIndex,d=i.activeBar,u=ot(this.props,!1);return s&&s.map(function(h,f){var m=f===c,g=m?d:l,x=un(un(un({},u),h),{},{isActive:m,option:g,index:f,dataKey:o,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return X.createElement(Xt,Nj({className:"recharts-bar-rectangle"},bu(a.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),X.createElement(Q5,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,i=a.data,l=a.layout,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,h=a.animationId,f=this.state.prevData;return X.createElement(Ui,{begin:c,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,x=i.map(function(w,j){var y=f&&f[j];if(y){var b=Cn(y.x,w.x),p=Cn(y.y,w.y),N=Cn(y.width,w.width),k=Cn(y.height,w.height);return un(un({},w),{},{x:b(g),y:p(g),width:N(g),height:k(g)})}if(l==="horizontal"){var S=Cn(0,w.height),P=S(g);return un(un({},w),{},{y:w.y+w.height-P,height:P})}var _=Cn(0,w.width),R=_(g);return un(un({},w),{},{width:R})});return X.createElement(Xt,null,s.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,i=s.isAnimationActive,l=this.state.prevData;return i&&a&&a.length&&(!l||!wu(l,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,i=a.data,l=a.dataKey,o=a.activeIndex,c=ot(this.props.background,!1);return i.map(function(d,u){d.value;var h=d.background,f=HEe(d,WEe);if(!h)return null;var m=un(un(un(un(un({},f),{},{fill:"#eee"},h),c),bu(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:l,index:u,className:"recharts-bar-background-rectangle"});return X.createElement(Q5,Nj({key:"background-bar-".concat(u),option:s.props.background,isActive:u===o},m))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=ba(u,ty);if(!h)return null;var f=d==="vertical"?l[0].height/2:l[0].width/2,m=function(w,j){var y=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:y,errorVal:ln(w,j)}},g={clipPath:s?"url(#clipPath-".concat(a,")"):null};return X.createElement(Xt,g,h.map(function(x){return X.cloneElement(x,{key:"error-bar-".concat(a,"-").concat(x.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.data,l=s.className,o=s.xAxis,c=s.yAxis,d=s.left,u=s.top,h=s.width,f=s.height,m=s.isAnimationActive,g=s.background,x=s.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,j=Ot("recharts-bar",l),y=o&&o.allowDataOverflow,b=c&&c.allowDataOverflow,p=y||b,N=Tt(x)?this.id:x;return X.createElement(Xt,{className:j},y||b?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(N)},X.createElement("rect",{x:y?d:d-h/2,y:b?u:u-f/2,width:y?h:h*2,height:b?f:f*2}))):null,X.createElement(Xt,{className:"recharts-bar-rectangles",clipPath:p?"url(#clipPath-".concat(N,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(p,N),(!m||w)&&kl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])}(v.PureComponent);Eq=Ao;jc(Ao,"displayName","Bar");jc(Ao,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ai.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});jc(Ao,"getComposedData",function(e){var t=e.props,n=e.item,s=e.barPosition,a=e.bandSize,i=e.xAxis,l=e.yAxis,o=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,f=e.offset,m=DCe(s,n);if(!m)return null;var g=t.layout,x=n.type.defaultProps,w=x!==void 0?un(un({},x),n.props):n.props,j=w.dataKey,y=w.children,b=w.minPointSize,p=g==="horizontal"?l:i,N=d?p.scale.domain():null,k=BCe({numericAxis:p}),S=ba(y,Gm),P=h.map(function(_,R){var O,M,A,T,B,z;d?O=MCe(d[u+R],N):(O=ln(_,j),Array.isArray(O)||(O=[k,O]));var U=qEe(b,Eq.defaultProps.minPointSize)(O[1],R);if(g==="horizontal"){var E,$=[l.scale(O[0]),l.scale(O[1])],G=$[0],oe=$[1];M=V$({axis:i,ticks:o,bandSize:a,offset:m.offset,entry:_,index:R}),A=(E=oe??G)!==null&&E!==void 0?E:void 0,T=m.size;var ee=G-oe;if(B=Number.isNaN(ee)?0:ee,z={x:M,y:l.y,width:T,height:l.height},Math.abs(U)>0&&Math.abs(B)<Math.abs(U)){var ce=Ns(B||U)*(Math.abs(U)-Math.abs(B));A-=ce,B+=ce}}else{var ye=[i.scale(O[0]),i.scale(O[1])],je=ye[0],$e=ye[1];if(M=je,A=V$({axis:l,ticks:c,bandSize:a,offset:m.offset,entry:_,index:R}),T=$e-je,B=m.size,z={x:i.x,y:A,width:i.width,height:B},Math.abs(U)>0&&Math.abs(T)<Math.abs(U)){var ke=Ns(T||U)*(Math.abs(U)-Math.abs(T));T+=ke}}return un(un(un({},_),{},{x:M,y:A,width:T,height:B,value:d?O:O[1],payload:_,background:z},S&&S[R]&&S[R].props),{},{tooltipPayload:[tq(n,_)],tooltipPosition:{x:M+T/2,y:A+B/2}})});return un({data:P,layout:g},f)});function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}function tOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tI(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Dq(s.key),s)}}function rOe(e,t,n){return t&&tI(e.prototype,t),n&&tI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function fi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rI(Object(n),!0).forEach(function(s){J1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function J1(e,t,n){return t=Dq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dq(e){var t=nOe(e,"string");return Rg(t)=="symbol"?t:t+""}function nOe(e,t){if(Rg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Rg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k4=function(t,n,s,a,i){var l=t.width,o=t.height,c=t.layout,d=t.children,u=Object.keys(n),h={left:s.left,leftMirror:s.left,right:l-s.right,rightMirror:l-s.right,top:s.top,topMirror:s.top,bottom:o-s.bottom,bottomMirror:o-s.bottom},f=!!da(d,Ao);return u.reduce(function(m,g){var x=n[g],w=x.orientation,j=x.domain,y=x.padding,b=y===void 0?{}:y,p=x.mirror,N=x.reversed,k="".concat(w).concat(p?"Mirror":""),S,P,_,R,O;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var M=j[1]-j[0],A=1/0,T=x.categoricalDomain.sort(yme);if(T.forEach(function(ye,je){je>0&&(A=Math.min((ye||0)-(T[je-1]||0),A))}),Number.isFinite(A)){var B=A/M,z=x.layout==="vertical"?s.height:s.width;if(x.padding==="gap"&&(S=B*z/2),x.padding==="no-gap"){var U=ks(t.barCategoryGap,B*z),E=B*z/2;S=E-U-(E-U)/z*U}}}a==="xAxis"?P=[s.left+(b.left||0)+(S||0),s.left+s.width-(b.right||0)-(S||0)]:a==="yAxis"?P=c==="horizontal"?[s.top+s.height-(b.bottom||0),s.top+(b.top||0)]:[s.top+(b.top||0)+(S||0),s.top+s.height-(b.bottom||0)-(S||0)]:P=x.range,N&&(P=[P[1],P[0]]);var $=ZV(x,i,f),G=$.scale,oe=$.realScaleType;G.domain(j).range(P),QV(G);var ee=JV(G,fi(fi({},x),{},{realScaleType:oe}));a==="xAxis"?(O=w==="top"&&!p||w==="bottom"&&p,_=s.left,R=h[k]-O*x.height):a==="yAxis"&&(O=w==="left"&&!p||w==="right"&&p,_=h[k]-O*x.width,R=s.top);var ce=fi(fi(fi({},x),ee),{},{realScaleType:oe,x:_,y:R,scale:G,width:a==="xAxis"?s.width:x.width,height:a==="yAxis"?s.height:x.height});return ce.bandSize=oj(ce,ee),!x.hide&&a==="xAxis"?h[k]+=(O?-1:1)*ce.height:x.hide||(h[k]+=(O?-1:1)*ce.width),fi(fi({},m),{},J1({},g,ce))},{})},Mq=function(t,n){var s=t.x,a=t.y,i=n.x,l=n.y;return{x:Math.min(s,i),y:Math.min(a,l),width:Math.abs(i-s),height:Math.abs(l-a)}},sOe=function(t){var n=t.x1,s=t.y1,a=t.x2,i=t.y2;return Mq({x:n,y:s},{x:a,y:i})},$q=function(){function e(t){tOe(this,e),this.scale=t}return rOe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,i=s.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var s=this.range(),a=s[0],i=s[s.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();J1($q,"EPS",1e-4);var S4=function(t){var n=Object.keys(t).reduce(function(s,a){return fi(fi({},s),{},J1({},a,$q.create(t[a])))},{});return fi(fi({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,o=i.position;return kEe(a,function(c,d){return n[d].apply(c,{bandAware:l,position:o})})},isInRange:function(a){return Tq(a,function(i,l){return n[l].isInRange(i)})}})};function aOe(e){return(e%180+180)%180}var iOe=function(t){var n=t.width,s=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=aOe(a),l=i*Math.PI/180,o=Math.atan(s/n),c=l>o&&l<Math.PI-o?s/Math.sin(l):n/Math.cos(l);return Math.abs(c)},lOe=$l,oOe=Xv,cOe=D1;function dOe(e){return function(t,n,s){var a=Object(t);if(!oOe(t)){var i=lOe(n);t=cOe(t),n=function(o){return i(a[o],o,a)}}var l=e(t,n,s);return l>-1?a[i?t[l]:l]:void 0}}var uOe=dOe,hOe=Cq;function fOe(e){var t=hOe(e),n=t%1;return t===t?n?t-n:t:0}var mOe=fOe,pOe=Ez,xOe=$l,gOe=mOe,vOe=Math.max;function yOe(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var a=n==null?0:gOe(n);return a<0&&(a=vOe(s+a,0)),pOe(e,xOe(t),a)}var bOe=yOe,jOe=uOe,wOe=bOe,NOe=jOe(wOe),kOe=NOe;const SOe=er(kOe);var COe=bfe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),C4=v.createContext(void 0),P4=v.createContext(void 0),Iq=v.createContext(void 0),Fq=v.createContext({}),Lq=v.createContext(void 0),Uq=v.createContext(0),Bq=v.createContext(0),nI=function(t){var n=t.state,s=n.xAxisMap,a=n.yAxisMap,i=n.offset,l=t.clipPathId,o=t.children,c=t.width,d=t.height,u=COe(i);return X.createElement(C4.Provider,{value:s},X.createElement(P4.Provider,{value:a},X.createElement(Fq.Provider,{value:i},X.createElement(Iq.Provider,{value:u},X.createElement(Lq.Provider,{value:l},X.createElement(Uq.Provider,{value:d},X.createElement(Bq.Provider,{value:c},o)))))))},POe=function(){return v.useContext(Lq)},zq=function(t){var n=v.useContext(C4);n==null&&ku();var s=n[t];return s==null&&ku(),s},_Oe=function(){var t=v.useContext(C4);return rc(t)},AOe=function(){var t=v.useContext(P4),n=SOe(t,function(s){return Tq(s.domain,Number.isFinite)});return n||rc(t)},Vq=function(t){var n=v.useContext(P4);n==null&&ku();var s=n[t];return s==null&&ku(),s},TOe=function(){var t=v.useContext(Iq);return t},EOe=function(){return v.useContext(Fq)},_4=function(){return v.useContext(Bq)},A4=function(){return v.useContext(Uq)};function lm(e){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lm(e)}function OOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ROe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Wq(s.key),s)}}function DOe(e,t,n){return t&&ROe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function MOe(e,t,n){return t=Sj(t),$Oe(e,qq()?Reflect.construct(t,n||[],Sj(e).constructor):t.apply(e,n))}function $Oe(e,t){if(t&&(lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IOe(e)}function IOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qq=function(){return!!e})()}function Sj(e){return Sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sj(e)}function FOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pP(e,t)}function pP(e,t){return pP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},pP(e,t)}function sI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function aI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sI(Object(n),!0).forEach(function(s){T4(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function T4(e,t,n){return t=Wq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wq(e){var t=LOe(e,"string");return lm(t)=="symbol"?t:t+""}function LOe(e,t){if(lm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(lm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UOe(e,t){return qOe(e)||VOe(e,t)||zOe(e,t)||BOe()}function BOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zOe(e,t){if(e){if(typeof e=="string")return iI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iI(e,t)}}function iI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function VOe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function qOe(e){if(Array.isArray(e))return e}function xP(){return xP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xP.apply(this,arguments)}var WOe=function(t,n){var s;return X.isValidElement(t)?s=X.cloneElement(t,n):xt(t)?s=t(n):s=X.createElement("line",xP({},n,{className:"recharts-reference-line-line"})),s},HOe=function(t,n,s,a,i,l,o,c,d){var u=i.x,h=i.y,f=i.width,m=i.height;if(s){var g=d.y,x=t.y.apply(g,{position:l});if(Sl(d,"discard")&&!t.y.isInRange(x))return null;var w=[{x:u+f,y:x},{x:u,y:x}];return c==="left"?w.reverse():w}if(n){var j=d.x,y=t.x.apply(j,{position:l});if(Sl(d,"discard")&&!t.x.isInRange(y))return null;var b=[{x:y,y:h+m},{x:y,y:h}];return o==="top"?b.reverse():b}if(a){var p=d.segment,N=p.map(function(k){return t.apply(k,{position:l})});return Sl(d,"discard")&&xEe(N,function(k){return!t.isInRange(k)})?null:N}return null};function KOe(e){var t=e.x,n=e.y,s=e.segment,a=e.xAxisId,i=e.yAxisId,l=e.shape,o=e.className,c=e.alwaysShow,d=POe(),u=zq(a),h=Vq(i),f=TOe();if(!d||!f)return null;_i(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=S4({x:u.scale,y:h.scale}),g=An(t),x=An(n),w=s&&s.length===2,j=HOe(m,g,x,w,f,e.position,u.orientation,h.orientation,e);if(!j)return null;var y=UOe(j,2),b=y[0],p=b.x,N=b.y,k=y[1],S=k.x,P=k.y,_=Sl(e,"hidden")?"url(#".concat(d,")"):void 0,R=aI(aI({clipPath:_},ot(e,!0)),{},{x1:p,y1:N,x2:S,y2:P});return X.createElement(Xt,{className:Ot("recharts-reference-line",o)},WOe(l,R),Mn.renderCallByParent(e,sOe({x1:p,y1:N,x2:S,y2:P})))}var E4=function(e){function t(){return OOe(this,t),MOe(this,t,arguments)}return FOe(t,e),DOe(t,[{key:"render",value:function(){return X.createElement(KOe,this.props)}}])}(X.Component);T4(E4,"displayName","ReferenceLine");T4(E4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function gP(){return gP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gP.apply(this,arguments)}function om(e){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},om(e)}function lI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function oI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lI(Object(n),!0).forEach(function(s){eN(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function GOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YOe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Kq(s.key),s)}}function XOe(e,t,n){return t&&YOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZOe(e,t,n){return t=Cj(t),QOe(e,Hq()?Reflect.construct(t,n||[],Cj(e).constructor):t.apply(e,n))}function QOe(e,t){if(t&&(om(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JOe(e)}function JOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hq=function(){return!!e})()}function Cj(e){return Cj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cj(e)}function eRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vP(e,t)}function vP(e,t){return vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},vP(e,t)}function eN(e,t,n){return t=Kq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kq(e){var t=tRe(e,"string");return om(t)=="symbol"?t:t+""}function tRe(e,t){if(om(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(om(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rRe=function(t){var n=t.x,s=t.y,a=t.xAxis,i=t.yAxis,l=S4({x:a.scale,y:i.scale}),o=l.apply({x:n,y:s},{bandAware:!0});return Sl(t,"discard")&&!l.isInRange(o)?null:o},tN=function(e){function t(){return GOe(this,t),ZOe(this,t,arguments)}return eRe(t,e),XOe(t,[{key:"render",value:function(){var s=this.props,a=s.x,i=s.y,l=s.r,o=s.alwaysShow,c=s.clipPathId,d=An(a),u=An(i);if(_i(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var h=rRe(this.props);if(!h)return null;var f=h.x,m=h.y,g=this.props,x=g.shape,w=g.className,j=Sl(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=oI(oI({clipPath:j},ot(this.props,!0)),{},{cx:f,cy:m});return X.createElement(Xt,{className:Ot("recharts-reference-dot",w)},t.renderDot(x,y),Mn.renderCallByParent(this.props,{x:f-l,y:m-l,width:2*l,height:2*l}))}}])}(X.Component);eN(tN,"displayName","ReferenceDot");eN(tN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});eN(tN,"renderDot",function(e,t){var n;return X.isValidElement(e)?n=X.cloneElement(e,t):xt(e)?n=e(t):n=X.createElement(ry,gP({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function yP(){return yP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yP.apply(this,arguments)}function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}function cI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function dI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cI(Object(n),!0).forEach(function(s){rN(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function nRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sRe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Yq(s.key),s)}}function aRe(e,t,n){return t&&sRe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function iRe(e,t,n){return t=Pj(t),lRe(e,Gq()?Reflect.construct(t,n||[],Pj(e).constructor):t.apply(e,n))}function lRe(e,t){if(t&&(cm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oRe(e)}function oRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gq=function(){return!!e})()}function Pj(e){return Pj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pj(e)}function cRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bP(e,t)}function bP(e,t){return bP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},bP(e,t)}function rN(e,t,n){return t=Yq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yq(e){var t=dRe(e,"string");return cm(t)=="symbol"?t:t+""}function dRe(e,t){if(cm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(cm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uRe=function(t,n,s,a,i){var l=i.x1,o=i.x2,c=i.y1,d=i.y2,u=i.xAxis,h=i.yAxis;if(!u||!h)return null;var f=S4({x:u.scale,y:h.scale}),m={x:t?f.x.apply(l,{position:"start"}):f.x.rangeMin,y:s?f.y.apply(c,{position:"start"}):f.y.rangeMin},g={x:n?f.x.apply(o,{position:"end"}):f.x.rangeMax,y:a?f.y.apply(d,{position:"end"}):f.y.rangeMax};return Sl(i,"discard")&&(!f.isInRange(m)||!f.isInRange(g))?null:Mq(m,g)},nN=function(e){function t(){return nRe(this,t),iRe(this,t,arguments)}return cRe(t,e),aRe(t,[{key:"render",value:function(){var s=this.props,a=s.x1,i=s.x2,l=s.y1,o=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;_i(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=An(a),f=An(i),m=An(l),g=An(o),x=this.props.shape;if(!h&&!f&&!m&&!g&&!x)return null;var w=uRe(h,f,m,g,this.props);if(!w&&!x)return null;var j=Sl(this.props,"hidden")?"url(#".concat(u,")"):void 0;return X.createElement(Xt,{className:Ot("recharts-reference-area",c)},t.renderRect(x,dI(dI({clipPath:j},ot(this.props,!0)),w)),Mn.renderCallByParent(this.props,w))}}])}(X.Component);rN(nN,"displayName","ReferenceArea");rN(nN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});rN(nN,"renderRect",function(e,t){var n;return X.isValidElement(e)?n=X.cloneElement(e,t):xt(e)?n=e(t):n=X.createElement(N4,yP({},t,{className:"recharts-reference-area-rect"})),n});function Xq(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var s=[],a=0;a<e.length;a+=t)s.push(e[a]);return s}function hRe(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return iOe(s,n)}function fRe(e,t,n){var s=n==="width",a=e.x,i=e.y,l=e.width,o=e.height;return t===1?{start:s?a:i,end:s?a+l:i+o}:{start:s?a+l:i+o,end:s?a:i}}function _j(e,t,n,s,a){if(e*t<e*s||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-a)<=0}function mRe(e,t){return Xq(e,t+1)}function pRe(e,t,n,s,a){for(var i=(s||[]).slice(),l=t.start,o=t.end,c=0,d=1,u=l,h=function(){var g=s==null?void 0:s[c];if(g===void 0)return{v:Xq(s,d)};var x=c,w,j=function(){return w===void 0&&(w=n(g,x)),w},y=g.coordinate,b=c===0||_j(e,y,j,u,o);b||(c=0,u=l,d+=1),b&&(u=y+e*(j()/2+a),c+=d)},f;d<=i.length;)if(f=h(),f)return f.v;return[]}function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}function uI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uI(Object(n),!0).forEach(function(s){xRe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function xRe(e,t,n){return t=gRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gRe(e){var t=vRe(e,"string");return Dg(t)=="symbol"?t:t+""}function vRe(e,t){if(Dg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Dg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yRe(e,t,n,s,a){for(var i=(s||[]).slice(),l=i.length,o=t.start,c=t.end,d=function(f){var m=i[f],g,x=function(){return g===void 0&&(g=n(m,f)),g};if(f===l-1){var w=e*(m.coordinate+e*x()/2-c);i[f]=m=as(as({},m),{},{tickCoord:w>0?m.coordinate-w*e:m.coordinate})}else i[f]=m=as(as({},m),{},{tickCoord:m.coordinate});var j=_j(e,m.tickCoord,x,o,c);j&&(c=m.tickCoord-e*(x()/2+a),i[f]=as(as({},m),{},{isShow:!0}))},u=l-1;u>=0;u--)d(u);return i}function bRe(e,t,n,s,a,i){var l=(s||[]).slice(),o=l.length,c=t.start,d=t.end;if(i){var u=s[o-1],h=n(u,o-1),f=e*(u.coordinate+e*h/2-d);l[o-1]=u=as(as({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var m=_j(e,u.tickCoord,function(){return h},c,d);m&&(d=u.tickCoord-e*(h/2+a),l[o-1]=as(as({},u),{},{isShow:!0}))}for(var g=i?o-1:o,x=function(y){var b=l[y],p,N=function(){return p===void 0&&(p=n(b,y)),p};if(y===0){var k=e*(b.coordinate-e*N()/2-c);l[y]=b=as(as({},b),{},{tickCoord:k<0?b.coordinate-k*e:b.coordinate})}else l[y]=b=as(as({},b),{},{tickCoord:b.coordinate});var S=_j(e,b.tickCoord,N,c,d);S&&(c=b.tickCoord+e*(N()/2+a),l[y]=as(as({},b),{},{isShow:!0}))},w=0;w<g;w++)x(w);return l}function O4(e,t,n){var s=e.tick,a=e.ticks,i=e.viewBox,l=e.minTickGap,o=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,h=e.angle;if(!a||!a.length||!s)return[];if(ze(c)||Ai.isSsr)return mRe(a,typeof c=="number"&&ze(c)?c:0);var f=[],m=o==="top"||o==="bottom"?"width":"height",g=u&&m==="width"?ux(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},x=function(b,p){var N=xt(d)?d(b.value,p):b.value;return m==="width"?hRe(ux(N,{fontSize:t,letterSpacing:n}),g,h):ux(N,{fontSize:t,letterSpacing:n})[m]},w=a.length>=2?Ns(a[1].coordinate-a[0].coordinate):1,j=fRe(i,w,m);return c==="equidistantPreserveStart"?pRe(w,j,x,a,l):(c==="preserveStart"||c==="preserveStartEnd"?f=bRe(w,j,x,a,l,c==="preserveStartEnd"):f=yRe(w,j,x,a,l),f.filter(function(y){return y.isShow}))}var jRe=["viewBox"],wRe=["viewBox"],NRe=["ticks"];function dm(e){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kh.apply(this,arguments)}function hI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hI(Object(n),!0).forEach(function(s){R4(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Uk(e,t){if(e==null)return{};var n=kRe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function kRe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function SRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fI(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Qq(s.key),s)}}function CRe(e,t,n){return t&&fI(e.prototype,t),n&&fI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function PRe(e,t,n){return t=Aj(t),_Re(e,Zq()?Reflect.construct(t,n||[],Aj(e).constructor):t.apply(e,n))}function _Re(e,t){if(t&&(dm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ARe(e)}function ARe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zq=function(){return!!e})()}function Aj(e){return Aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Aj(e)}function TRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jP(e,t)}function jP(e,t){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},jP(e,t)}function R4(e,t,n){return t=Qq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qq(e){var t=ERe(e,"string");return dm(t)=="symbol"?t:t+""}function ERe(e,t){if(dm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(dm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qm=function(e){function t(n){var s;return SRe(this,t),s=PRe(this,t,[n]),s.state={fontSize:"",letterSpacing:""},s}return TRe(t,e),CRe(t,[{key:"shouldComponentUpdate",value:function(s,a){var i=s.viewBox,l=Uk(s,jRe),o=this.props,c=o.viewBox,d=Uk(o,wRe);return!Bh(i,c)||!Bh(l,d)||!Bh(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.x,l=a.y,o=a.width,c=a.height,d=a.orientation,u=a.tickSize,h=a.mirror,f=a.tickMargin,m,g,x,w,j,y,b=h?-1:1,p=s.tickSize||u,N=ze(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":m=g=s.coordinate,w=l+ +!h*c,x=w-b*p,y=x-b*f,j=N;break;case"left":x=w=s.coordinate,g=i+ +!h*o,m=g-b*p,j=m-b*f,y=N;break;case"right":x=w=s.coordinate,g=i+ +h*o,m=g+b*p,j=m+b*f,y=N;break;default:m=g=s.coordinate,w=l+ +h*c,x=w+b*p,y=x+b*f,j=N;break}return{line:{x1:m,y1:x,x2:g,y2:w},tick:{x:j,y}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,l;switch(a){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,l="end";switch(a){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,i=s.y,l=s.width,o=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,h=vn(vn(vn({},ot(this.props,!1)),ot(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);h=vn(vn({},h),{},{x1:a,y1:i+f*o,x2:a+l,y2:i+f*o})}else{var m=+(c==="left"&&!d||c==="right"&&d);h=vn(vn({},h),{},{x1:a+m*l,y1:i,x2:a+m*l,y2:i+o})}return X.createElement("line",kh({},h,{className:Ot("recharts-cartesian-axis-line",ya(u,"className"))}))}},{key:"renderTicks",value:function(s,a,i){var l=this,o=this.props,c=o.tickLine,d=o.stroke,u=o.tick,h=o.tickFormatter,f=o.unit,m=O4(vn(vn({},this.props),{},{ticks:s}),a,i),g=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),w=ot(this.props,!1),j=ot(u,!1),y=vn(vn({},w),{},{fill:"none"},ot(c,!1)),b=m.map(function(p,N){var k=l.getTickLineCoord(p),S=k.line,P=k.tick,_=vn(vn(vn(vn({textAnchor:g,verticalAnchor:x},w),{},{stroke:"none",fill:d},j),P),{},{index:N,payload:p,visibleTicksCount:m.length,tickFormatter:h});return X.createElement(Xt,kh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(p.value,"-").concat(p.coordinate,"-").concat(p.tickCoord)},bu(l.props,p,N)),c&&X.createElement("line",kh({},y,S,{className:Ot("recharts-cartesian-axis-tick-line",ya(c,"className"))})),u&&t.renderTickItem(u,_,"".concat(xt(h)?h(p.value,N):p.value).concat(f||"")))});return X.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var s=this,a=this.props,i=a.axisLine,l=a.width,o=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var h=this.props,f=h.ticks,m=Uk(h,NRe),g=f;return xt(c)&&(g=f&&f.length>0?c(this.props):c(m)),l<=0||o<=0||!g||!g.length?null:X.createElement(Xt,{className:Ot("recharts-cartesian-axis",d),ref:function(w){s.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Mn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,i){var l,o=Ot(a.className,"recharts-cartesian-axis-tick-value");return X.isValidElement(s)?l=X.cloneElement(s,vn(vn({},a),{},{className:o})):xt(s)?l=s(vn(vn({},a),{},{className:o})):l=X.createElement(ju,kh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])}(v.Component);R4(Qm,"displayName","CartesianAxis");R4(Qm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var ORe=["x1","y1","x2","y2","key"],RRe=["offset"];function Su(e){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(e)}function mI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function os(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mI(Object(n),!0).forEach(function(s){DRe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function DRe(e,t,n){return t=MRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MRe(e){var t=$Re(e,"string");return Su(t)=="symbol"?t:t+""}function $Re(e,t){if(Su(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Su(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Td(){return Td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Td.apply(this,arguments)}function pI(e,t){if(e==null)return{};var n=IRe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function IRe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var FRe=function(t){var n=t.fill;if(!n||n==="none")return null;var s=t.fillOpacity,a=t.x,i=t.y,l=t.width,o=t.height,c=t.ry;return X.createElement("rect",{x:a,y:i,ry:c,width:l,height:o,stroke:"none",fill:n,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function Jq(e,t){var n;if(X.isValidElement(e))n=X.cloneElement(e,t);else if(xt(e))n=e(t);else{var s=t.x1,a=t.y1,i=t.x2,l=t.y2,o=t.key,c=pI(t,ORe),d=ot(c,!1);d.offset;var u=pI(d,RRe);n=X.createElement("line",Td({},u,{x1:s,y1:a,x2:i,y2:l,fill:"none",key:o}))}return n}function LRe(e){var t=e.x,n=e.width,s=e.horizontal,a=s===void 0?!0:s,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=os(os({},e),{},{x1:t,y1:o,x2:t+n,y2:o,key:"line-".concat(c),index:c});return Jq(a,d)});return X.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function URe(e){var t=e.y,n=e.height,s=e.vertical,a=s===void 0?!0:s,i=e.verticalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=os(os({},e),{},{x1:o,y1:t,x2:o,y2:t+n,key:"line-".concat(c),index:c});return Jq(a,d)});return X.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function BRe(e){var t=e.horizontalFill,n=e.fillOpacity,s=e.x,a=e.y,i=e.width,l=e.height,o=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=o.map(function(f){return Math.round(f+a-a)}).sort(function(f,m){return f-m});a!==u[0]&&u.unshift(0);var h=u.map(function(f,m){var g=!u[m+1],x=g?a+l-f:u[m+1]-f;if(x<=0)return null;var w=m%t.length;return X.createElement("rect",{key:"react-".concat(m),y:f,x:s,height:x,width:i,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function zRe(e){var t=e.vertical,n=t===void 0?!0:t,s=e.verticalFill,a=e.fillOpacity,i=e.x,l=e.y,o=e.width,c=e.height,d=e.verticalPoints;if(!n||!s||!s.length)return null;var u=d.map(function(f){return Math.round(f+i-i)}).sort(function(f,m){return f-m});i!==u[0]&&u.unshift(0);var h=u.map(function(f,m){var g=!u[m+1],x=g?i+o-f:u[m+1]-f;if(x<=0)return null;var w=m%s.length;return X.createElement("rect",{key:"react-".concat(m),x:f,y:l,width:x,height:c,stroke:"none",fill:s[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var VRe=function(t,n){var s=t.xAxis,a=t.width,i=t.height,l=t.offset;return XV(O4(os(os(os({},Qm.defaultProps),s),{},{ticks:uo(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.left,l.left+l.width,n)},qRe=function(t,n){var s=t.yAxis,a=t.width,i=t.height,l=t.offset;return XV(O4(os(os(os({},Qm.defaultProps),s),{},{ticks:uo(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.top,l.top+l.height,n)},th={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ti(e){var t,n,s,a,i,l,o=_4(),c=A4(),d=EOe(),u=os(os({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:th.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:th.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:th.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:th.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:th.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:th.verticalFill,x:ze(e.x)?e.x:d.left,y:ze(e.y)?e.y:d.top,width:ze(e.width)?e.width:d.width,height:ze(e.height)?e.height:d.height}),h=u.x,f=u.y,m=u.width,g=u.height,x=u.syncWithTicks,w=u.horizontalValues,j=u.verticalValues,y=_Oe(),b=AOe();if(!ze(m)||m<=0||!ze(g)||g<=0||!ze(h)||h!==+h||!ze(f)||f!==+f)return null;var p=u.verticalCoordinatesGenerator||VRe,N=u.horizontalCoordinatesGenerator||qRe,k=u.horizontalPoints,S=u.verticalPoints;if((!k||!k.length)&&xt(N)){var P=w&&w.length,_=N({yAxis:b?os(os({},b),{},{ticks:P?w:b.ticks}):void 0,width:o,height:c,offset:d},P?!0:x);_i(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Su(_),"]")),Array.isArray(_)&&(k=_)}if((!S||!S.length)&&xt(p)){var R=j&&j.length,O=p({xAxis:y?os(os({},y),{},{ticks:R?j:y.ticks}):void 0,width:o,height:c,offset:d},R?!0:x);_i(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Su(O),"]")),Array.isArray(O)&&(S=O)}return X.createElement("g",{className:"recharts-cartesian-grid"},X.createElement(FRe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),X.createElement(LRe,Td({},u,{offset:d,horizontalPoints:k,xAxis:y,yAxis:b})),X.createElement(URe,Td({},u,{offset:d,verticalPoints:S,xAxis:y,yAxis:b})),X.createElement(BRe,Td({},u,{horizontalPoints:k})),X.createElement(zRe,Td({},u,{verticalPoints:S})))}Ti.displayName="CartesianGrid";var WRe=["type","layout","connectNulls","ref"],HRe=["key"];function um(e){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(e)}function xI(e,t){if(e==null)return{};var n=KRe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function KRe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function gx(){return gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gx.apply(this,arguments)}function gI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ia(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gI(Object(n),!0).forEach(function(s){mi(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function rh(e){return ZRe(e)||XRe(e)||YRe(e)||GRe()}function GRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YRe(e,t){if(e){if(typeof e=="string")return wP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wP(e,t)}}function XRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZRe(e){if(Array.isArray(e))return wP(e)}function wP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function QRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vI(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,tW(s.key),s)}}function JRe(e,t,n){return t&&vI(e.prototype,t),n&&vI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function eDe(e,t,n){return t=Tj(t),tDe(e,eW()?Reflect.construct(t,n||[],Tj(e).constructor):t.apply(e,n))}function tDe(e,t){if(t&&(um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rDe(e)}function rDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eW=function(){return!!e})()}function Tj(e){return Tj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tj(e)}function nDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NP(e,t)}function NP(e,t){return NP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},NP(e,t)}function mi(e,t,n){return t=tW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tW(e){var t=sDe(e,"string");return um(t)=="symbol"?t:t+""}function sDe(e,t){if(um(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(um(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var us=function(e){function t(){var n;QRe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=eDe(this,t,[].concat(a)),mi(n,"state",{isAnimationFinished:!0,totalLength:0}),mi(n,"generateSimpleStrokeDasharray",function(l,o){return"".concat(o,"px ").concat(l-o,"px")}),mi(n,"getStrokeDasharray",function(l,o,c){var d=c.reduce(function(j,y){return j+y});if(!d)return n.generateSimpleStrokeDasharray(o,l);for(var u=Math.floor(l/d),h=l%d,f=o-l,m=[],g=0,x=0;g<c.length;x+=c[g],++g)if(x+c[g]>h){m=[].concat(rh(c.slice(0,g)),[h-x]);break}var w=m.length%2===0?[0,f]:[f];return[].concat(rh(t.repeat(c,u)),rh(m),w).map(function(j){return"".concat(j,"px")}).join(", ")}),mi(n,"id",Lu("recharts-line-")),mi(n,"pathRef",function(l){n.mainCurve=l}),mi(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),mi(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return nDe(t,e),JRe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=ba(u,ty);if(!h)return null;var f=function(x,w){return{x:x.x,y:x.y,value:x.value,errorVal:ln(x.payload,w)}},m={clipPath:s?"url(#clipPath-".concat(a,")"):null};return X.createElement(Xt,m,h.map(function(g){return X.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,dataPointFormatter:f})}))}},{key:"renderDots",value:function(s,a,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,d=o.points,u=o.dataKey,h=ot(this.props,!1),f=ot(c,!0),m=d.map(function(x,w){var j=ia(ia(ia({key:"dot-".concat(w),r:3},h),f),{},{index:w,cx:x.x,cy:x.y,value:x.value,dataKey:u,payload:x.payload,points:d});return t.renderDotItem(c,j)}),g={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return X.createElement(Xt,gx({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(s,a,i,l){var o=this.props,c=o.type,d=o.layout,u=o.connectNulls;o.ref;var h=xI(o,WRe),f=ia(ia(ia({},ot(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:s},l),{},{type:c,layout:d,connectNulls:u});return X.createElement(au,gx({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,a){var i=this,l=this.props,o=l.points,c=l.strokeDasharray,d=l.isAnimationActive,u=l.animationBegin,h=l.animationDuration,f=l.animationEasing,m=l.animationId,g=l.animateNewValues,x=l.width,w=l.height,j=this.state,y=j.prevPoints,b=j.totalLength;return X.createElement(Ui,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var N=p.t;if(y){var k=y.length/o.length,S=o.map(function(M,A){var T=Math.floor(A*k);if(y[T]){var B=y[T],z=Cn(B.x,M.x),U=Cn(B.y,M.y);return ia(ia({},M),{},{x:z(N),y:U(N)})}if(g){var E=Cn(x*2,M.x),$=Cn(w/2,M.y);return ia(ia({},M),{},{x:E(N),y:$(N)})}return ia(ia({},M),{},{x:M.x,y:M.y})});return i.renderCurveStatically(S,s,a)}var P=Cn(0,b),_=P(N),R;if(c){var O="".concat(c).split(/[,\s]+/gim).map(function(M){return parseFloat(M)});R=i.getStrokeDasharray(_,b,O)}else R=i.generateSimpleStrokeDasharray(b,_);return i.renderCurveStatically(o,s,a,{strokeDasharray:R})})}},{key:"renderCurve",value:function(s,a){var i=this.props,l=i.points,o=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return o&&l&&l.length&&(!d&&u>0||!wu(d,l))?this.renderCurveWithAnimation(s,a):this.renderCurveStatically(l,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,l=a.dot,o=a.points,c=a.className,d=a.xAxis,u=a.yAxis,h=a.top,f=a.left,m=a.width,g=a.height,x=a.isAnimationActive,w=a.id;if(i||!o||!o.length)return null;var j=this.state.isAnimationFinished,y=o.length===1,b=Ot("recharts-line",c),p=d&&d.allowDataOverflow,N=u&&u.allowDataOverflow,k=p||N,S=Tt(w)?this.id:w,P=(s=ot(l,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},_=P.r,R=_===void 0?3:_,O=P.strokeWidth,M=O===void 0?2:O,A=z7(l)?l:{},T=A.clipDot,B=T===void 0?!0:T,z=R*2+M;return X.createElement(Xt,{className:b},p||N?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(S)},X.createElement("rect",{x:p?f:f-m/2,y:N?h:h-g/2,width:p?m:m*2,height:N?g:g*2})),!B&&X.createElement("clipPath",{id:"clipPath-dots-".concat(S)},X.createElement("rect",{x:f-z/2,y:h-z/2,width:m+z,height:g+z}))):null,!y&&this.renderCurve(k,S),this.renderErrorBar(k,S),(y||l)&&this.renderDots(k,B,S),(!x||j)&&kl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,a){for(var i=s.length%2!==0?[].concat(rh(s),[0]):s,l=[],o=0;o<a;++o)l=[].concat(rh(l),rh(i));return l}},{key:"renderDotItem",value:function(s,a){var i;if(X.isValidElement(s))i=X.cloneElement(s,a);else if(xt(s))i=s(a);else{var l=a.key,o=xI(a,HRe),c=Ot("recharts-line-dot",typeof s!="boolean"?s.className:"");i=X.createElement(ry,gx({key:l},o,{className:c}))}return i}}])}(v.PureComponent);mi(us,"displayName","Line");mi(us,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ai.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});mi(us,"getComposedData",function(e){var t=e.props,n=e.xAxis,s=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,l=e.dataKey,o=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,h=c.map(function(f,m){var g=ln(f,l);return u==="horizontal"?{x:lj({axis:n,ticks:a,bandSize:o,entry:f,index:m}),y:Tt(g)?null:s.scale(g),value:g,payload:f}:{x:Tt(g)?null:n.scale(g),y:lj({axis:s,ticks:i,bandSize:o,entry:f,index:m}),value:g,payload:f}});return ia({points:h,layout:u},d)});var aDe=["layout","type","stroke","connectNulls","isRange","ref"],iDe=["key"],rW;function hm(e){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hm(e)}function nW(e,t){if(e==null)return{};var n=lDe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function lDe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Ed(){return Ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ed.apply(this,arguments)}function yI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yI(Object(n),!0).forEach(function(s){gl(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function oDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bI(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,aW(s.key),s)}}function cDe(e,t,n){return t&&bI(e.prototype,t),n&&bI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dDe(e,t,n){return t=Ej(t),uDe(e,sW()?Reflect.construct(t,n||[],Ej(e).constructor):t.apply(e,n))}function uDe(e,t){if(t&&(hm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hDe(e)}function hDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sW=function(){return!!e})()}function Ej(e){return Ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ej(e)}function fDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kP(e,t)}function kP(e,t){return kP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},kP(e,t)}function gl(e,t,n){return t=aW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aW(e){var t=mDe(e,"string");return hm(t)=="symbol"?t:t+""}function mDe(e,t){if(hm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(hm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ei=function(e){function t(){var n;oDe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=dDe(this,t,[].concat(a)),gl(n,"state",{isAnimationFinished:!0}),gl(n,"id",Lu("recharts-area-")),gl(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),xt(l)&&l()}),gl(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),xt(l)&&l()}),n}return fDe(t,e),cDe(t,[{key:"renderDots",value:function(s,a,i){var l=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(l&&!o)return null;var c=this.props,d=c.dot,u=c.points,h=c.dataKey,f=ot(this.props,!1),m=ot(d,!0),g=u.map(function(w,j){var y=Go(Go(Go({key:"dot-".concat(j),r:3},f),m),{},{index:j,cx:w.x,cy:w.y,dataKey:h,value:w.value,payload:w.payload,points:u});return t.renderDotItem(d,y)}),x={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return X.createElement(Xt,Ed({className:"recharts-area-dots"},x),g)}},{key:"renderHorizontalRect",value:function(s){var a=this.props,i=a.baseLine,l=a.points,o=a.strokeWidth,c=l[0].x,d=l[l.length-1].x,u=s*Math.abs(c-d),h=bc(l.map(function(f){return f.y||0}));return ze(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(bc(i.map(function(f){return f.y||0})),h)),ze(h)?X.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(h+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var a=this.props,i=a.baseLine,l=a.points,o=a.strokeWidth,c=l[0].y,d=l[l.length-1].y,u=s*Math.abs(c-d),h=bc(l.map(function(f){return f.x||0}));return ze(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(bc(i.map(function(f){return f.x||0})),h)),ze(h)?X.createElement("rect",{x:0,y:c<d?c:c-u,width:h+(o?parseInt("".concat(o),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(s){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,a,i,l){var o=this.props,c=o.layout,d=o.type,u=o.stroke,h=o.connectNulls,f=o.isRange;o.ref;var m=nW(o,aDe);return X.createElement(Xt,{clipPath:i?"url(#clipPath-".concat(l,")"):null},X.createElement(au,Ed({},ot(m,!0),{points:s,connectNulls:h,type:d,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&X.createElement(au,Ed({},ot(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:s})),u!=="none"&&f&&X.createElement(au,Ed({},ot(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(s,a){var i=this,l=this.props,o=l.points,c=l.baseLine,d=l.isAnimationActive,u=l.animationBegin,h=l.animationDuration,f=l.animationEasing,m=l.animationId,g=this.state,x=g.prevPoints,w=g.prevBaseLine;return X.createElement(Ui,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var y=j.t;if(x){var b=x.length/o.length,p=o.map(function(P,_){var R=Math.floor(_*b);if(x[R]){var O=x[R],M=Cn(O.x,P.x),A=Cn(O.y,P.y);return Go(Go({},P),{},{x:M(y),y:A(y)})}return P}),N;if(ze(c)&&typeof c=="number"){var k=Cn(w,c);N=k(y)}else if(Tt(c)||qm(c)){var S=Cn(w,0);N=S(y)}else N=c.map(function(P,_){var R=Math.floor(_*b);if(w[R]){var O=w[R],M=Cn(O.x,P.x),A=Cn(O.y,P.y);return Go(Go({},P),{},{x:M(y),y:A(y)})}return P});return i.renderAreaStatically(p,N,s,a)}return X.createElement(Xt,null,X.createElement("defs",null,X.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(y))),X.createElement(Xt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(o,c,s,a)))})}},{key:"renderArea",value:function(s,a){var i=this.props,l=i.points,o=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,h=d.prevBaseLine,f=d.totalLength;return c&&l&&l.length&&(!u&&f>0||!wu(u,l)||!wu(h,o))?this.renderAreaWithAnimation(s,a):this.renderAreaStatically(l,o,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,l=a.dot,o=a.points,c=a.className,d=a.top,u=a.left,h=a.xAxis,f=a.yAxis,m=a.width,g=a.height,x=a.isAnimationActive,w=a.id;if(i||!o||!o.length)return null;var j=this.state.isAnimationFinished,y=o.length===1,b=Ot("recharts-area",c),p=h&&h.allowDataOverflow,N=f&&f.allowDataOverflow,k=p||N,S=Tt(w)?this.id:w,P=(s=ot(l,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},_=P.r,R=_===void 0?3:_,O=P.strokeWidth,M=O===void 0?2:O,A=z7(l)?l:{},T=A.clipDot,B=T===void 0?!0:T,z=R*2+M;return X.createElement(Xt,{className:b},p||N?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(S)},X.createElement("rect",{x:p?u:u-m/2,y:N?d:d-g/2,width:p?m:m*2,height:N?g:g*2})),!B&&X.createElement("clipPath",{id:"clipPath-dots-".concat(S)},X.createElement("rect",{x:u-z/2,y:d-z/2,width:m+z,height:g+z}))):null,y?null:this.renderArea(k,S),(l||y)&&this.renderDots(k,B,S),(!x||j)&&kl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:s.points!==a.curPoints||s.baseLine!==a.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(v.PureComponent);rW=Ei;gl(Ei,"displayName","Area");gl(Ei,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ai.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});gl(Ei,"getBaseValue",function(e,t,n,s){var a=e.layout,i=e.baseValue,l=t.props.baseValue,o=l??i;if(ze(o)&&typeof o=="number")return o;var c=a==="horizontal"?s:n,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return o==="dataMin"?h:o==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return o==="dataMin"?d[0]:o==="dataMax"?d[1]:d[0]});gl(Ei,"getComposedData",function(e){var t=e.props,n=e.item,s=e.xAxis,a=e.yAxis,i=e.xAxisTicks,l=e.yAxisTicks,o=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,f=e.offset,m=t.layout,g=d&&d.length,x=rW.getBaseValue(t,n,s,a),w=m==="horizontal",j=!1,y=h.map(function(p,N){var k;g?k=d[u+N]:(k=ln(p,c),Array.isArray(k)?j=!0:k=[x,k]);var S=k[1]==null||g&&ln(p,c)==null;return w?{x:lj({axis:s,ticks:i,bandSize:o,entry:p,index:N}),y:S?null:a.scale(k[1]),value:k,payload:p}:{x:S?null:s.scale(k[1]),y:lj({axis:a,ticks:l,bandSize:o,entry:p,index:N}),value:k,payload:p}}),b;return g||j?b=y.map(function(p){var N=Array.isArray(p.value)?p.value[0]:null;return w?{x:p.x,y:N!=null&&p.y!=null?a.scale(N):null}:{x:N!=null?s.scale(N):null,y:p.y}}):b=w?a.scale(x):s.scale(x),Go({points:y,baseLine:b,layout:m,isRange:j},f)});gl(Ei,"renderDotItem",function(e,t){var n;if(X.isValidElement(e))n=X.cloneElement(e,t);else if(xt(e))n=e(t);else{var s=Ot("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=nW(t,iDe);n=X.createElement(ry,Ed({},i,{key:a,className:s}))}return n});function fm(e){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fm(e)}function pDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xDe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,oW(s.key),s)}}function gDe(e,t,n){return t&&xDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vDe(e,t,n){return t=Oj(t),yDe(e,iW()?Reflect.construct(t,n||[],Oj(e).constructor):t.apply(e,n))}function yDe(e,t){if(t&&(fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bDe(e)}function bDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iW=function(){return!!e})()}function Oj(e){return Oj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Oj(e)}function jDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SP(e,t)}function SP(e,t){return SP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},SP(e,t)}function lW(e,t,n){return t=oW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oW(e){var t=wDe(e,"string");return fm(t)=="symbol"?t:t+""}function wDe(e,t){if(fm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(fm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CP(){return CP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},CP.apply(this,arguments)}function NDe(e){var t=e.xAxisId,n=_4(),s=A4(),a=zq(t);return a==null?null:v.createElement(Qm,CP({},a,{className:Ot("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return uo(l,!0)}}))}var Ps=function(e){function t(){return pDe(this,t),vDe(this,t,arguments)}return jDe(t,e),gDe(t,[{key:"render",value:function(){return v.createElement(NDe,this.props)}}])}(v.Component);lW(Ps,"displayName","XAxis");lW(Ps,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function mm(e){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mm(e)}function kDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SDe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uW(s.key),s)}}function CDe(e,t,n){return t&&SDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PDe(e,t,n){return t=Rj(t),_De(e,cW()?Reflect.construct(t,n||[],Rj(e).constructor):t.apply(e,n))}function _De(e,t){if(t&&(mm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ADe(e)}function ADe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cW=function(){return!!e})()}function Rj(e){return Rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rj(e)}function TDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PP(e,t)}function PP(e,t){return PP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},PP(e,t)}function dW(e,t,n){return t=uW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uW(e){var t=EDe(e,"string");return mm(t)=="symbol"?t:t+""}function EDe(e,t){if(mm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(mm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _P(){return _P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_P.apply(this,arguments)}var ODe=function(t){var n=t.yAxisId,s=_4(),a=A4(),i=Vq(n);return i==null?null:v.createElement(Qm,_P({},i,{className:Ot("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(o){return uo(o,!0)}}))},_s=function(e){function t(){return kDe(this,t),PDe(this,t,arguments)}return TDe(t,e),CDe(t,[{key:"render",value:function(){return v.createElement(ODe,this.props)}}])}(v.Component);dW(_s,"displayName","YAxis");dW(_s,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function jI(e){return $De(e)||MDe(e)||DDe(e)||RDe()}function RDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DDe(e,t){if(e){if(typeof e=="string")return AP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AP(e,t)}}function MDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $De(e){if(Array.isArray(e))return AP(e)}function AP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var TP=function(t,n,s,a,i){var l=ba(t,E4),o=ba(t,tN),c=[].concat(jI(l),jI(o)),d=ba(t,nN),u="".concat(a,"Id"),h=a[0],f=n;if(c.length&&(f=c.reduce(function(x,w){if(w.props[u]===s&&Sl(w.props,"extendDomain")&&ze(w.props[h])){var j=w.props[h];return[Math.min(x[0],j),Math.max(x[1],j)]}return x},f)),d.length){var m="".concat(h,"1"),g="".concat(h,"2");f=d.reduce(function(x,w){if(w.props[u]===s&&Sl(w.props,"extendDomain")&&ze(w.props[m])&&ze(w.props[g])){var j=w.props[m],y=w.props[g];return[Math.min(x[0],j,y),Math.max(x[1],j,y)]}return x},f)}return i&&i.length&&(f=i.reduce(function(x,w){return ze(w)?[Math.min(x[0],w),Math.max(x[1],w)]:x},f)),f},hW={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new a(u,h||c,f),g=n?n+d:d;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},o.prototype.listeners=function(d){var u=n?n+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,g=new Array(m);f<m;f++)g[f]=h[f].fn;return g},o.prototype.listenerCount=function(d){var u=n?n+d:d,h=this._events[u];return h?h.fn?1:h.length:0},o.prototype.emit=function(d,u,h,f,m,g){var x=n?n+d:d;if(!this._events[x])return!1;var w=this._events[x],j=arguments.length,y,b;if(w.fn){switch(w.once&&this.removeListener(d,w.fn,void 0,!0),j){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,h),!0;case 4:return w.fn.call(w.context,u,h,f),!0;case 5:return w.fn.call(w.context,u,h,f,m),!0;case 6:return w.fn.call(w.context,u,h,f,m,g),!0}for(b=1,y=new Array(j-1);b<j;b++)y[b-1]=arguments[b];w.fn.apply(w.context,y)}else{var p=w.length,N;for(b=0;b<p;b++)switch(w[b].once&&this.removeListener(d,w[b].fn,void 0,!0),j){case 1:w[b].fn.call(w[b].context);break;case 2:w[b].fn.call(w[b].context,u);break;case 3:w[b].fn.call(w[b].context,u,h);break;case 4:w[b].fn.call(w[b].context,u,h,f);break;default:if(!y)for(N=1,y=new Array(j-1);N<j;N++)y[N-1]=arguments[N];w[b].fn.apply(w[b].context,y)}}return!0},o.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},o.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},o.prototype.removeListener=function(d,u,h,f){var m=n?n+d:d;if(!this._events[m])return this;if(!u)return l(this,m),this;var g=this._events[m];if(g.fn)g.fn===u&&(!f||g.once)&&(!h||g.context===h)&&l(this,m);else{for(var x=0,w=[],j=g.length;x<j;x++)(g[x].fn!==u||f&&!g[x].once||h&&g[x].context!==h)&&w.push(g[x]);w.length?this._events[m]=w.length===1?w[0]:w:l(this,m)}return this},o.prototype.removeAllListeners=function(d){var u;return d?(u=n?n+d:d,this._events[u]&&l(this,u)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o})(hW);var IDe=hW.exports;const FDe=er(IDe);var Bk=new FDe,zk="recharts.syncMouseEvents";function Mg(e){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mg(e)}function LDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UDe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,fW(s.key),s)}}function BDe(e,t,n){return t&&UDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vk(e,t,n){return t=fW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fW(e){var t=zDe(e,"string");return Mg(t)=="symbol"?t:t+""}function zDe(e,t){if(Mg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Mg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VDe=function(){function e(){LDe(this,e),Vk(this,"activeIndex",0),Vk(this,"coordinateList",[]),Vk(this,"layout","horizontal")}return BDe(e,[{key:"setDetails",value:function(n){var s,a=n.coordinateList,i=a===void 0?null:a,l=n.container,o=l===void 0?null:l,c=n.layout,d=c===void 0?null:c,u=n.offset,h=u===void 0?null:u,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(s=i??this.coordinateList)!==null&&s!==void 0?s:[],this.container=o??this.container,this.layout=d??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,l=a.y,o=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,h=i+c+d,f=l+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function qDe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],a=e==null?void 0:e[1];if(s&&a&&ze(s)&&ze(a))return!0}return!1}function WDe(e,t,n,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function mW(e){var t=e.cx,n=e.cy,s=e.radius,a=e.startAngle,i=e.endAngle,l=Or(t,n,s,a),o=Or(t,n,s,i);return{points:[l,o],cx:t,cy:n,radius:s,startAngle:a,endAngle:i}}function HDe(e,t,n){var s,a,i,l;if(e==="horizontal")s=t.x,i=s,a=n.top,l=n.top+n.height;else if(e==="vertical")a=t.y,l=a,s=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,h=t.angle,f=Or(o,c,d,h),m=Or(o,c,u,h);s=f.x,a=f.y,i=m.x,l=m.y}else return mW(t);return[{x:s,y:a},{x:i,y:l}]}function $g(e){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$g(e)}function wI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function s0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(n),!0).forEach(function(s){KDe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function KDe(e,t,n){return t=GDe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GDe(e){var t=YDe(e,"string");return $g(t)=="symbol"?t:t+""}function YDe(e,t){if($g(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if($g(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XDe(e){var t,n,s=e.element,a=e.tooltipEventType,i=e.isActive,l=e.activeCoordinate,o=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,h=e.layout,f=e.chartName,m=(t=s.props.cursor)!==null&&t!==void 0?t:(n=s.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!s||!m||!i||!l||f!=="ScatterChart"&&a!=="axis")return null;var g,x=au;if(f==="ScatterChart")g=l,x=sTe;else if(f==="BarChart")g=WDe(h,l,c,u),x=N4;else if(h==="radial"){var w=mW(l),j=w.cx,y=w.cy,b=w.radius,p=w.startAngle,N=w.endAngle;g={cx:j,cy:y,startAngle:p,endAngle:N,innerRadius:b,outerRadius:b},x=lq}else g={points:HDe(h,l,c)},x=au;var k=s0(s0(s0(s0({stroke:"#ccc",pointerEvents:"none"},c),g),ot(m,!1)),{},{payload:o,payloadIndex:d,className:Ot("recharts-tooltip-cursor",m.className)});return v.isValidElement(m)?v.cloneElement(m,k):v.createElement(x,k)}var ZDe=["item"],QDe=["children","className","width","height","style","compact","title","desc"];function pm(e){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pm(e)}function Sh(){return Sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Sh.apply(this,arguments)}function NI(e,t){return tMe(e)||eMe(e,t)||xW(e,t)||JDe()}function JDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eMe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(o.push(s.value),o.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function tMe(e){if(Array.isArray(e))return e}function kI(e,t){if(e==null)return{};var n=rMe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function rMe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function nMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sMe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,gW(s.key),s)}}function aMe(e,t,n){return t&&sMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function iMe(e,t,n){return t=Dj(t),lMe(e,pW()?Reflect.construct(t,n||[],Dj(e).constructor):t.apply(e,n))}function lMe(e,t){if(t&&(pm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oMe(e)}function oMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pW=function(){return!!e})()}function Dj(e){return Dj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dj(e)}function cMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EP(e,t)}function EP(e,t){return EP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},EP(e,t)}function xm(e){return hMe(e)||uMe(e)||xW(e)||dMe()}function dMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xW(e,t){if(e){if(typeof e=="string")return OP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OP(e,t)}}function uMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hMe(e){if(Array.isArray(e))return OP(e)}function OP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function SI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SI(Object(n),!0).forEach(function(s){pt(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function pt(e,t,n){return t=gW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gW(e){var t=fMe(e,"string");return pm(t)=="symbol"?t:t+""}function fMe(e,t){if(pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(pm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mMe={xAxis:["bottom","top"],yAxis:["left","right"]},pMe={width:"100%",height:"100%"},vW={x:0,y:0};function a0(e){return e}var xMe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},gMe=function(t,n,s,a){var i=n.find(function(u){return u&&u.index===s});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var l=i.coordinate,o=a.radius;return Ce(Ce(Ce({},a),Or(a.cx,a.cy,o,l)),{},{angle:l,radius:o})}var c=i.coordinate,d=a.angle;return Ce(Ce(Ce({},a),Or(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return vW},sN=function(t,n){var s=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,l=(s??[]).reduce(function(o,c){var d=c.props.data;return d&&d.length?[].concat(xm(o),xm(d)):o},[]);return l.length>0?l:t&&t.length&&ze(a)&&ze(i)?t.slice(a,i+1):[]};function yW(e){return e==="number"?[0,"auto"]:void 0}var RP=function(t,n,s,a){var i=t.graphicalItems,l=t.tooltipAxis,o=sN(n,t);return s<0||!i||!i.length||s>=o.length?null:i.reduce(function(c,d){var u,h=(u=d.props.data)!==null&&u!==void 0?u:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(l.dataKey&&!l.allowDuplicatedCategory){var m=h===void 0?o:h;f=Rb(m,l.dataKey,a)}else f=h&&h[s]||o[s];return f?[].concat(xm(c),[tq(d,f)]):c},[])},CI=function(t,n,s,a){var i=a||{x:t.chartX,y:t.chartY},l=xMe(i,s),o=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=_Ce(l,o,d,c);if(u>=0&&d){var h=d[u]&&d[u].value,f=RP(t,n,u,h),m=gMe(s,o,u,i);return{activeTooltipIndex:u,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},vMe=function(t,n){var s=n.axes,a=n.graphicalItems,i=n.axisType,l=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,h=t.children,f=t.stackOffset,m=YV(u,i);return s.reduce(function(g,x){var w,j=x.type.defaultProps!==void 0?Ce(Ce({},x.type.defaultProps),x.props):x.props,y=j.type,b=j.dataKey,p=j.allowDataOverflow,N=j.allowDuplicatedCategory,k=j.scale,S=j.ticks,P=j.includeHidden,_=j[l];if(g[_])return g;var R=sN(t.data,{graphicalItems:a.filter(function(ee){var ce,ye=l in ee.props?ee.props[l]:(ce=ee.type.defaultProps)===null||ce===void 0?void 0:ce[l];return ye===_}),dataStartIndex:c,dataEndIndex:d}),O=R.length,M,A,T;qDe(j.domain,p,y)&&(M=HC(j.domain,null,p),m&&(y==="number"||k!=="auto")&&(T=fx(R,b,"category")));var B=yW(y);if(!M||M.length===0){var z,U=(z=j.domain)!==null&&z!==void 0?z:B;if(b){if(M=fx(R,b,y),y==="category"&&m){var E=vme(M);N&&E?(A=M,M=bj(0,O)):N||(M=H$(U,M,x).reduce(function(ee,ce){return ee.indexOf(ce)>=0?ee:[].concat(xm(ee),[ce])},[]))}else if(y==="category")N?M=M.filter(function(ee){return ee!==""&&!Tt(ee)}):M=H$(U,M,x).reduce(function(ee,ce){return ee.indexOf(ce)>=0||ce===""||Tt(ce)?ee:[].concat(xm(ee),[ce])},[]);else if(y==="number"){var $=RCe(R,a.filter(function(ee){var ce,ye,je=l in ee.props?ee.props[l]:(ce=ee.type.defaultProps)===null||ce===void 0?void 0:ce[l],$e="hide"in ee.props?ee.props.hide:(ye=ee.type.defaultProps)===null||ye===void 0?void 0:ye.hide;return je===_&&(P||!$e)}),b,i,u);$&&(M=$)}m&&(y==="number"||k!=="auto")&&(T=fx(R,b,"category"))}else m?M=bj(0,O):o&&o[_]&&o[_].hasStack&&y==="number"?M=f==="expand"?[0,1]:eq(o[_].stackGroups,c,d):M=GV(R,a.filter(function(ee){var ce=l in ee.props?ee.props[l]:ee.type.defaultProps[l],ye="hide"in ee.props?ee.props.hide:ee.type.defaultProps.hide;return ce===_&&(P||!ye)}),y,u,!0);if(y==="number")M=TP(h,M,_,i,S),U&&(M=HC(U,M,p));else if(y==="category"&&U){var G=U,oe=M.every(function(ee){return G.indexOf(ee)>=0});oe&&(M=G)}}return Ce(Ce({},g),{},pt({},_,Ce(Ce({},j),{},{axisType:i,domain:M,categoricalDomain:T,duplicateDomain:A,originalDomain:(w=j.domain)!==null&&w!==void 0?w:B,isCategorical:m,layout:u})))},{})},yMe=function(t,n){var s=n.graphicalItems,a=n.Axis,i=n.axisType,l=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,h=t.children,f=sN(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),m=f.length,g=YV(u,i),x=-1;return s.reduce(function(w,j){var y=j.type.defaultProps!==void 0?Ce(Ce({},j.type.defaultProps),j.props):j.props,b=y[l],p=yW("number");if(!w[b]){x++;var N;return g?N=bj(0,m):o&&o[b]&&o[b].hasStack?(N=eq(o[b].stackGroups,c,d),N=TP(h,N,b,i)):(N=HC(p,GV(f,s.filter(function(k){var S,P,_=l in k.props?k.props[l]:(S=k.type.defaultProps)===null||S===void 0?void 0:S[l],R="hide"in k.props?k.props.hide:(P=k.type.defaultProps)===null||P===void 0?void 0:P.hide;return _===b&&!R}),"number",u),a.defaultProps.allowDataOverflow),N=TP(h,N,b,i)),Ce(Ce({},w),{},pt({},b,Ce(Ce({axisType:i},a.defaultProps),{},{hide:!0,orientation:ya(mMe,"".concat(i,".").concat(x%2),null),domain:N,originalDomain:p,isCategorical:g,layout:u})))}return w},{})},bMe=function(t,n){var s=n.axisType,a=s===void 0?"xAxis":s,i=n.AxisComp,l=n.graphicalItems,o=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.children,h="".concat(a,"Id"),f=ba(u,i),m={};return f&&f.length?m=vMe(t,{axes:f,graphicalItems:l,axisType:a,axisIdKey:h,stackGroups:o,dataStartIndex:c,dataEndIndex:d}):l&&l.length&&(m=yMe(t,{Axis:i,graphicalItems:l,axisType:a,axisIdKey:h,stackGroups:o,dataStartIndex:c,dataEndIndex:d})),m},jMe=function(t){var n=rc(t),s=uo(n,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:YT(s,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:oj(n,s)}},PI=function(t){var n=t.children,s=t.defaultShowTooltip,a=da(n,am),i=0,l=0;return t.data&&t.data.length!==0&&(l=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(l=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!s}},wMe=function(t){return!t||!t.length?!1:t.some(function(n){var s=po(n&&n.type);return s&&s.indexOf("Bar")>=0})},_I=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},NMe=function(t,n){var s=t.props,a=t.graphicalItems,i=t.xAxisMap,l=i===void 0?{}:i,o=t.yAxisMap,c=o===void 0?{}:o,d=s.width,u=s.height,h=s.children,f=s.margin||{},m=da(h,am),g=da(h,zh),x=Object.keys(c).reduce(function(N,k){var S=c[k],P=S.orientation;return!S.mirror&&!S.hide?Ce(Ce({},N),{},pt({},P,N[P]+S.width)):N},{left:f.left||0,right:f.right||0}),w=Object.keys(l).reduce(function(N,k){var S=l[k],P=S.orientation;return!S.mirror&&!S.hide?Ce(Ce({},N),{},pt({},P,ya(N,"".concat(P))+S.height)):N},{top:f.top||0,bottom:f.bottom||0}),j=Ce(Ce({},w),x),y=j.bottom;m&&(j.bottom+=m.props.height||am.defaultProps.height),g&&n&&(j=ECe(j,a,s,n));var b=d-j.left-j.right,p=u-j.top-j.bottom;return Ce(Ce({brushBottom:y},j),{},{width:Math.max(b,0),height:Math.max(p,0)})},kMe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},aN=function(t){var n=t.chartName,s=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,l=t.validateTooltipEventTypes,o=l===void 0?["axis"]:l,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,h=t.defaultProps,f=function(j,y){var b=y.graphicalItems,p=y.stackGroups,N=y.offset,k=y.updateId,S=y.dataStartIndex,P=y.dataEndIndex,_=j.barSize,R=j.layout,O=j.barGap,M=j.barCategoryGap,A=j.maxBarSize,T=_I(R),B=T.numericAxisName,z=T.cateAxisName,U=wMe(b),E=[];return b.forEach(function($,G){var oe=sN(j.data,{graphicalItems:[$],dataStartIndex:S,dataEndIndex:P}),ee=$.type.defaultProps!==void 0?Ce(Ce({},$.type.defaultProps),$.props):$.props,ce=ee.dataKey,ye=ee.maxBarSize,je=ee["".concat(B,"Id")],$e=ee["".concat(z,"Id")],ke={},be=c.reduce(function(rr,V){var I=y["".concat(V.axisType,"Map")],J=ee["".concat(V.axisType,"Id")];I&&I[J]||V.axisType==="zAxis"||ku();var xe=I[J];return Ce(Ce({},rr),{},pt(pt({},V.axisType,xe),"".concat(V.axisType,"Ticks"),uo(xe)))},ke),pe=be[z],le=be["".concat(z,"Ticks")],Ie=p&&p[je]&&p[je].hasStack&&zCe($,p[je].stackGroups),ae=po($.type).indexOf("Bar")>=0,st=oj(pe,le),K=[],Me=U&&ACe({barSize:_,stackGroups:p,totalSize:kMe(be,z)});if(ae){var de,Be,qe=Tt(ye)?A:ye,Qe=(de=(Be=oj(pe,le,!0))!==null&&Be!==void 0?Be:qe)!==null&&de!==void 0?de:0;K=TCe({barGap:O,barCategoryGap:M,bandSize:Qe!==st?Qe:st,sizeList:Me[$e],maxBarSize:qe}),Qe!==st&&(K=K.map(function(rr){return Ce(Ce({},rr),{},{position:Ce(Ce({},rr.position),{},{offset:rr.position.offset-Qe/2})})}))}var wt=$&&$.type&&$.type.getComposedData;wt&&E.push({props:Ce(Ce({},wt(Ce(Ce({},be),{},{displayedData:oe,props:j,dataKey:ce,item:$,bandSize:st,barPosition:K,offset:N,stackedData:Ie,layout:R,dataStartIndex:S,dataEndIndex:P}))),{},pt(pt(pt({key:$.key||"item-".concat(G)},B,be[B]),z,be[z]),"animationId",k)),childIndex:Tme($,j.children),item:$})}),E},m=function(j,y){var b=j.props,p=j.dataStartIndex,N=j.dataEndIndex,k=j.updateId;if(!UD({props:b}))return null;var S=b.children,P=b.layout,_=b.stackOffset,R=b.data,O=b.reverseStackOrder,M=_I(P),A=M.numericAxisName,T=M.cateAxisName,B=ba(S,s),z=UCe(R,B,"".concat(A,"Id"),"".concat(T,"Id"),_,O),U=c.reduce(function(ee,ce){var ye="".concat(ce.axisType,"Map");return Ce(Ce({},ee),{},pt({},ye,bMe(b,Ce(Ce({},ce),{},{graphicalItems:B,stackGroups:ce.axisType===A&&z,dataStartIndex:p,dataEndIndex:N}))))},{}),E=NMe(Ce(Ce({},U),{},{props:b,graphicalItems:B}),y==null?void 0:y.legendBBox);Object.keys(U).forEach(function(ee){U[ee]=u(b,U[ee],E,ee.replace("Map",""),n)});var $=U["".concat(T,"Map")],G=jMe($),oe=f(b,Ce(Ce({},U),{},{dataStartIndex:p,dataEndIndex:N,updateId:k,graphicalItems:B,stackGroups:z,offset:E}));return Ce(Ce({formattedGraphicalItems:oe,graphicalItems:B,offset:E,stackGroups:z},G),U)},g=function(w){function j(y){var b,p,N;return nMe(this,j),N=iMe(this,j,[y]),pt(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),pt(N,"accessibilityManager",new VDe),pt(N,"handleLegendBBoxUpdate",function(k){if(k){var S=N.state,P=S.dataStartIndex,_=S.dataEndIndex,R=S.updateId;N.setState(Ce({legendBBox:k},m({props:N.props,dataStartIndex:P,dataEndIndex:_,updateId:R},Ce(Ce({},N.state),{},{legendBBox:k}))))}}),pt(N,"handleReceiveSyncEvent",function(k,S,P){if(N.props.syncId===k){if(P===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(S)}}),pt(N,"handleBrushChange",function(k){var S=k.startIndex,P=k.endIndex;if(S!==N.state.dataStartIndex||P!==N.state.dataEndIndex){var _=N.state.updateId;N.setState(function(){return Ce({dataStartIndex:S,dataEndIndex:P},m({props:N.props,dataStartIndex:S,dataEndIndex:P,updateId:_},N.state))}),N.triggerSyncEvent({dataStartIndex:S,dataEndIndex:P})}}),pt(N,"handleMouseEnter",function(k){var S=N.getMouseInfo(k);if(S){var P=Ce(Ce({},S),{},{isTooltipActive:!0});N.setState(P),N.triggerSyncEvent(P);var _=N.props.onMouseEnter;xt(_)&&_(P,k)}}),pt(N,"triggeredAfterMouseMove",function(k){var S=N.getMouseInfo(k),P=S?Ce(Ce({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(P),N.triggerSyncEvent(P);var _=N.props.onMouseMove;xt(_)&&_(P,k)}),pt(N,"handleItemMouseEnter",function(k){N.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),pt(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),pt(N,"handleMouseMove",function(k){k.persist(),N.throttleTriggeredAfterMouseMove(k)}),pt(N,"handleMouseLeave",function(k){N.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};N.setState(S),N.triggerSyncEvent(S);var P=N.props.onMouseLeave;xt(P)&&P(S,k)}),pt(N,"handleOuterEvent",function(k){var S=Ame(k),P=ya(N.props,"".concat(S));if(S&&xt(P)){var _,R;/.*touch.*/i.test(S)?R=N.getMouseInfo(k.changedTouches[0]):R=N.getMouseInfo(k),P((_=R)!==null&&_!==void 0?_:{},k)}}),pt(N,"handleClick",function(k){var S=N.getMouseInfo(k);if(S){var P=Ce(Ce({},S),{},{isTooltipActive:!0});N.setState(P),N.triggerSyncEvent(P);var _=N.props.onClick;xt(_)&&_(P,k)}}),pt(N,"handleMouseDown",function(k){var S=N.props.onMouseDown;if(xt(S)){var P=N.getMouseInfo(k);S(P,k)}}),pt(N,"handleMouseUp",function(k){var S=N.props.onMouseUp;if(xt(S)){var P=N.getMouseInfo(k);S(P,k)}}),pt(N,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),pt(N,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&N.handleMouseDown(k.changedTouches[0])}),pt(N,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&N.handleMouseUp(k.changedTouches[0])}),pt(N,"handleDoubleClick",function(k){var S=N.props.onDoubleClick;if(xt(S)){var P=N.getMouseInfo(k);S(P,k)}}),pt(N,"handleContextMenu",function(k){var S=N.props.onContextMenu;if(xt(S)){var P=N.getMouseInfo(k);S(P,k)}}),pt(N,"triggerSyncEvent",function(k){N.props.syncId!==void 0&&Bk.emit(zk,N.props.syncId,k,N.eventEmitterSymbol)}),pt(N,"applySyncEvent",function(k){var S=N.props,P=S.layout,_=S.syncMethod,R=N.state.updateId,O=k.dataStartIndex,M=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)N.setState(Ce({dataStartIndex:O,dataEndIndex:M},m({props:N.props,dataStartIndex:O,dataEndIndex:M,updateId:R},N.state)));else if(k.activeTooltipIndex!==void 0){var A=k.chartX,T=k.chartY,B=k.activeTooltipIndex,z=N.state,U=z.offset,E=z.tooltipTicks;if(!U)return;if(typeof _=="function")B=_(E,k);else if(_==="value"){B=-1;for(var $=0;$<E.length;$++)if(E[$].value===k.activeLabel){B=$;break}}var G=Ce(Ce({},U),{},{x:U.left,y:U.top}),oe=Math.min(A,G.x+G.width),ee=Math.min(T,G.y+G.height),ce=E[B]&&E[B].value,ye=RP(N.state,N.props.data,B),je=E[B]?{x:P==="horizontal"?E[B].coordinate:oe,y:P==="horizontal"?ee:E[B].coordinate}:vW;N.setState(Ce(Ce({},k),{},{activeLabel:ce,activeCoordinate:je,activePayload:ye,activeTooltipIndex:B}))}else N.setState(k)}),pt(N,"renderCursor",function(k){var S,P=N.state,_=P.isTooltipActive,R=P.activeCoordinate,O=P.activePayload,M=P.offset,A=P.activeTooltipIndex,T=P.tooltipAxisBandSize,B=N.getTooltipEventType(),z=(S=k.props.active)!==null&&S!==void 0?S:_,U=N.props.layout,E=k.key||"_recharts-cursor";return X.createElement(XDe,{key:E,activeCoordinate:R,activePayload:O,activeTooltipIndex:A,chartName:n,element:k,isActive:z,layout:U,offset:M,tooltipAxisBandSize:T,tooltipEventType:B})}),pt(N,"renderPolarAxis",function(k,S,P){var _=ya(k,"type.axisType"),R=ya(N.state,"".concat(_,"Map")),O=k.type.defaultProps,M=O!==void 0?Ce(Ce({},O),k.props):k.props,A=R&&R[M["".concat(_,"Id")]];return v.cloneElement(k,Ce(Ce({},A),{},{className:Ot(_,A.className),key:k.key||"".concat(S,"-").concat(P),ticks:uo(A,!0)}))}),pt(N,"renderPolarGrid",function(k){var S=k.props,P=S.radialLines,_=S.polarAngles,R=S.polarRadius,O=N.state,M=O.radiusAxisMap,A=O.angleAxisMap,T=rc(M),B=rc(A),z=B.cx,U=B.cy,E=B.innerRadius,$=B.outerRadius;return v.cloneElement(k,{polarAngles:Array.isArray(_)?_:uo(B,!0).map(function(G){return G.coordinate}),polarRadius:Array.isArray(R)?R:uo(T,!0).map(function(G){return G.coordinate}),cx:z,cy:U,innerRadius:E,outerRadius:$,key:k.key||"polar-grid",radialLines:P})}),pt(N,"renderLegend",function(){var k=N.state.formattedGraphicalItems,S=N.props,P=S.children,_=S.width,R=S.height,O=N.props.margin||{},M=_-(O.left||0)-(O.right||0),A=HV({children:P,formattedGraphicalItems:k,legendWidth:M,legendContent:d});if(!A)return null;var T=A.item,B=kI(A,ZDe);return v.cloneElement(T,Ce(Ce({},B),{},{chartWidth:_,chartHeight:R,margin:O,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),pt(N,"renderTooltip",function(){var k,S=N.props,P=S.children,_=S.accessibilityLayer,R=da(P,tn);if(!R)return null;var O=N.state,M=O.isTooltipActive,A=O.activeCoordinate,T=O.activePayload,B=O.activeLabel,z=O.offset,U=(k=R.props.active)!==null&&k!==void 0?k:M;return v.cloneElement(R,{viewBox:Ce(Ce({},z),{},{x:z.left,y:z.top}),active:U,label:B,payload:U?T:[],coordinate:A,accessibilityLayer:_})}),pt(N,"renderBrush",function(k){var S=N.props,P=S.margin,_=S.data,R=N.state,O=R.offset,M=R.dataStartIndex,A=R.dataEndIndex,T=R.updateId;return v.cloneElement(k,{key:k.key||"_recharts-brush",onChange:e0(N.handleBrushChange,k.props.onChange),data:_,x:ze(k.props.x)?k.props.x:O.left,y:ze(k.props.y)?k.props.y:O.top+O.height+O.brushBottom-(P.bottom||0),width:ze(k.props.width)?k.props.width:O.width,startIndex:M,endIndex:A,updateId:"brush-".concat(T)})}),pt(N,"renderReferenceElement",function(k,S,P){if(!k)return null;var _=N,R=_.clipPathId,O=N.state,M=O.xAxisMap,A=O.yAxisMap,T=O.offset,B=k.type.defaultProps||{},z=k.props,U=z.xAxisId,E=U===void 0?B.xAxisId:U,$=z.yAxisId,G=$===void 0?B.yAxisId:$;return v.cloneElement(k,{key:k.key||"".concat(S,"-").concat(P),xAxis:M[E],yAxis:A[G],viewBox:{x:T.left,y:T.top,width:T.width,height:T.height},clipPathId:R})}),pt(N,"renderActivePoints",function(k){var S=k.item,P=k.activePoint,_=k.basePoint,R=k.childIndex,O=k.isRange,M=[],A=S.props.key,T=S.item.type.defaultProps!==void 0?Ce(Ce({},S.item.type.defaultProps),S.item.props):S.item.props,B=T.activeDot,z=T.dataKey,U=Ce(Ce({index:R,dataKey:z,cx:P.x,cy:P.y,r:4,fill:w4(S.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},ot(B,!1)),Db(B));return M.push(j.renderActiveDot(B,U,"".concat(A,"-activePoint-").concat(R))),_?M.push(j.renderActiveDot(B,Ce(Ce({},U),{},{cx:_.x,cy:_.y}),"".concat(A,"-basePoint-").concat(R))):O&&M.push(null),M}),pt(N,"renderGraphicChild",function(k,S,P){var _=N.filterFormatItem(k,S,P);if(!_)return null;var R=N.getTooltipEventType(),O=N.state,M=O.isTooltipActive,A=O.tooltipAxis,T=O.activeTooltipIndex,B=O.activeLabel,z=N.props.children,U=da(z,tn),E=_.props,$=E.points,G=E.isRange,oe=E.baseLine,ee=_.item.type.defaultProps!==void 0?Ce(Ce({},_.item.type.defaultProps),_.item.props):_.item.props,ce=ee.activeDot,ye=ee.hide,je=ee.activeBar,$e=ee.activeShape,ke=!!(!ye&&M&&U&&(ce||je||$e)),be={};R!=="axis"&&U&&U.props.trigger==="click"?be={onClick:e0(N.handleItemMouseEnter,k.props.onClick)}:R!=="axis"&&(be={onMouseLeave:e0(N.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:e0(N.handleItemMouseEnter,k.props.onMouseEnter)});var pe=v.cloneElement(k,Ce(Ce({},_.props),be));function le(V){return typeof A.dataKey=="function"?A.dataKey(V.payload):null}if(ke)if(T>=0){var Ie,ae;if(A.dataKey&&!A.allowDuplicatedCategory){var st=typeof A.dataKey=="function"?le:"payload.".concat(A.dataKey.toString());Ie=Rb($,st,B),ae=G&&oe&&Rb(oe,st,B)}else Ie=$==null?void 0:$[T],ae=G&&oe&&oe[T];if($e||je){var K=k.props.activeIndex!==void 0?k.props.activeIndex:T;return[v.cloneElement(k,Ce(Ce(Ce({},_.props),be),{},{activeIndex:K})),null,null]}if(!Tt(Ie))return[pe].concat(xm(N.renderActivePoints({item:_,activePoint:Ie,basePoint:ae,childIndex:T,isRange:G})))}else{var Me,de=(Me=N.getItemByXY(N.state.activeCoordinate))!==null&&Me!==void 0?Me:{graphicalItem:pe},Be=de.graphicalItem,qe=Be.item,Qe=qe===void 0?k:qe,wt=Be.childIndex,rr=Ce(Ce(Ce({},_.props),be),{},{activeIndex:wt});return[v.cloneElement(Qe,rr),null,null]}return G?[pe,null,null]:[pe,null]}),pt(N,"renderCustomized",function(k,S,P){return v.cloneElement(k,Ce(Ce({key:"recharts-customized-".concat(P)},N.props),N.state))}),pt(N,"renderMap",{CartesianGrid:{handler:a0,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:a0},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:a0},YAxis:{handler:a0},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((b=y.id)!==null&&b!==void 0?b:Lu("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=ZT(N.triggeredAfterMouseMove,(p=y.throttleDelay)!==null&&p!==void 0?p:1e3/60),N.state={},N}return cMe(j,w),aMe(j,[{key:"componentDidMount",value:function(){var b,p;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(p=this.props.margin.top)!==null&&p!==void 0?p:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,p=b.children,N=b.data,k=b.height,S=b.layout,P=da(p,tn);if(P){var _=P.props.defaultIndex;if(!(typeof _!="number"||_<0||_>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[_]&&this.state.tooltipTicks[_].value,O=RP(this.state,N,_,R),M=this.state.tooltipTicks[_].coordinate,A=(this.state.offset.top+k)/2,T=S==="horizontal",B=T?{x:M,y:A}:{y:M,x:A},z=this.state.formattedGraphicalItems.find(function(E){var $=E.item;return $.type.name==="Scatter"});z&&(B=Ce(Ce({},B),z.props.points[_].tooltipPosition),O=z.props.points[_].tooltipPayload);var U={activeTooltipIndex:_,isTooltipActive:!0,activeLabel:R,activePayload:O,activeCoordinate:B};this.setState(U),this.renderCursor(P),this.accessibilityManager.setIndex(_)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,p){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==p.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var N,k;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(b){lC([da(b.children,tn)],[da(this.props.children,tn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=da(this.props.children,tn);if(b&&typeof b.props.shared=="boolean"){var p=b.props.shared?"axis":"item";return o.indexOf(p)>=0?p:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var p=this.container,N=p.getBoundingClientRect(),k=rNe(N),S={chartX:Math.round(b.pageX-k.left),chartY:Math.round(b.pageY-k.top)},P=N.width/p.offsetWidth||1,_=this.inRange(S.chartX,S.chartY,P);if(!_)return null;var R=this.state,O=R.xAxisMap,M=R.yAxisMap,A=this.getTooltipEventType(),T=CI(this.state,this.props.data,this.props.layout,_);if(A!=="axis"&&O&&M){var B=rc(O).scale,z=rc(M).scale,U=B&&B.invert?B.invert(S.chartX):null,E=z&&z.invert?z.invert(S.chartY):null;return Ce(Ce({},S),{},{xValue:U,yValue:E},T)}return T?Ce(Ce({},S),T):null}},{key:"inRange",value:function(b,p){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,S=b/N,P=p/N;if(k==="horizontal"||k==="vertical"){var _=this.state.offset,R=S>=_.left&&S<=_.left+_.width&&P>=_.top&&P<=_.top+_.height;return R?{x:S,y:P}:null}var O=this.state,M=O.angleAxisMap,A=O.radiusAxisMap;if(M&&A){var T=rc(M);return Y$({x:S,y:P},T)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,p=this.getTooltipEventType(),N=da(b,tn),k={};N&&p==="axis"&&(N.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=Db(this.props,this.handleOuterEvent);return Ce(Ce({},S),k)}},{key:"addListener",value:function(){Bk.on(zk,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Bk.removeListener(zk,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,p,N){for(var k=this.state.formattedGraphicalItems,S=0,P=k.length;S<P;S++){var _=k[S];if(_.item===b||_.props.key===b.key||p===po(_.item.type)&&N===_.childIndex)return _}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,p=this.state.offset,N=p.left,k=p.top,S=p.height,P=p.width;return X.createElement("defs",null,X.createElement("clipPath",{id:b},X.createElement("rect",{x:N,y:k,height:S,width:P})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(p,N){var k=NI(N,2),S=k[0],P=k[1];return Ce(Ce({},p),{},pt({},S,P.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(p,N){var k=NI(N,2),S=k[0],P=k[1];return Ce(Ce({},p),{},pt({},S,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var p;return(p=this.state.xAxisMap)===null||p===void 0||(p=p[b])===null||p===void 0?void 0:p.scale}},{key:"getYScaleByAxisId",value:function(b){var p;return(p=this.state.yAxisMap)===null||p===void 0||(p=p[b])===null||p===void 0?void 0:p.scale}},{key:"getItemByXY",value:function(b){var p=this.state,N=p.formattedGraphicalItems,k=p.activeItem;if(N&&N.length)for(var S=0,P=N.length;S<P;S++){var _=N[S],R=_.props,O=_.item,M=O.type.defaultProps!==void 0?Ce(Ce({},O.type.defaultProps),O.props):O.props,A=po(O.type);if(A==="Bar"){var T=(R.data||[]).find(function(E){return FAe(b,E)});if(T)return{graphicalItem:_,payload:T}}else if(A==="RadialBar"){var B=(R.data||[]).find(function(E){return Y$(b,E)});if(B)return{graphicalItem:_,payload:B}}else if(Z1(_,k)||Q1(_,k)||Tg(_,k)){var z=C4e({graphicalItem:_,activeTooltipItem:k,itemData:M.data}),U=M.activeIndex===void 0?z:M.activeIndex;return{graphicalItem:Ce(Ce({},_),{},{childIndex:U}),payload:Tg(_,k)?M.data[z]:_.props.data[z]}}}return null}},{key:"render",value:function(){var b=this;if(!UD(this))return null;var p=this.props,N=p.children,k=p.className,S=p.width,P=p.height,_=p.style,R=p.compact,O=p.title,M=p.desc,A=kI(p,QDe),T=ot(A,!1);if(R)return X.createElement(nI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement(cC,Sh({},T,{width:S,height:P,title:O,desc:M}),this.renderClipPath(),zD(N,this.renderMap)));if(this.props.accessibilityLayer){var B,z;T.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,T.role=(z=this.props.role)!==null&&z!==void 0?z:"application",T.onKeyDown=function(E){b.accessibilityManager.keyboardEvent(E)},T.onFocus=function(){b.accessibilityManager.focus()}}var U=this.parseEventsOfWrapper();return X.createElement(nI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement("div",Sh({className:Ot("recharts-wrapper",k),style:Ce({position:"relative",cursor:"default",width:S,height:P},_)},U,{ref:function($){b.container=$}}),X.createElement(cC,Sh({},T,{width:S,height:P,title:O,desc:M,style:pMe}),this.renderClipPath(),zD(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(v.Component);pt(g,"displayName",n),pt(g,"defaultProps",Ce({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),pt(g,"getDerivedStateFromProps",function(w,j){var y=w.dataKey,b=w.data,p=w.children,N=w.width,k=w.height,S=w.layout,P=w.stackOffset,_=w.margin,R=j.dataStartIndex,O=j.dataEndIndex;if(j.updateId===void 0){var M=PI(w);return Ce(Ce(Ce({},M),{},{updateId:0},m(Ce(Ce({props:w},M),{},{updateId:0}),j)),{},{prevDataKey:y,prevData:b,prevWidth:N,prevHeight:k,prevLayout:S,prevStackOffset:P,prevMargin:_,prevChildren:p})}if(y!==j.prevDataKey||b!==j.prevData||N!==j.prevWidth||k!==j.prevHeight||S!==j.prevLayout||P!==j.prevStackOffset||!Bh(_,j.prevMargin)){var A=PI(w),T={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},B=Ce(Ce({},CI(j,b,S)),{},{updateId:j.updateId+1}),z=Ce(Ce(Ce({},A),T),B);return Ce(Ce(Ce({},z),m(Ce({props:w},z),j)),{},{prevDataKey:y,prevData:b,prevWidth:N,prevHeight:k,prevLayout:S,prevStackOffset:P,prevMargin:_,prevChildren:p})}if(!lC(p,j.prevChildren)){var U,E,$,G,oe=da(p,am),ee=oe&&(U=(E=oe.props)===null||E===void 0?void 0:E.startIndex)!==null&&U!==void 0?U:R,ce=oe&&($=(G=oe.props)===null||G===void 0?void 0:G.endIndex)!==null&&$!==void 0?$:O,ye=ee!==R||ce!==O,je=!Tt(b),$e=je&&!ye?j.updateId:j.updateId+1;return Ce(Ce({updateId:$e},m(Ce(Ce({props:w},j),{},{updateId:$e,dataStartIndex:ee,dataEndIndex:ce}),j)),{},{prevChildren:p,dataStartIndex:ee,dataEndIndex:ce})}return null}),pt(g,"renderActiveDot",function(w,j,y){var b;return v.isValidElement(w)?b=v.cloneElement(w,j):xt(w)?b=w(j):b=X.createElement(ry,j),X.createElement(Xt,{className:"recharts-active-dot",key:y},b)});var x=v.forwardRef(function(j,y){return X.createElement(g,Sh({},j,{ref:y}))});return x.displayName=g.displayName,x},ny=aN({chartName:"LineChart",GraphicalChild:us,axisComponents:[{axisType:"xAxis",AxisComp:Ps},{axisType:"yAxis",AxisComp:_s}],formatAxisMap:k4}),DP=aN({chartName:"BarChart",GraphicalChild:Ao,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ps},{axisType:"yAxis",AxisComp:_s}],formatAxisMap:k4}),D4=aN({chartName:"PieChart",GraphicalChild:Ki,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:X1},{axisType:"radiusAxis",AxisComp:G1}],formatAxisMap:QCe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),bW=aN({chartName:"AreaChart",GraphicalChild:Ei,axisComponents:[{axisType:"xAxis",AxisComp:Ps},{axisType:"yAxis",AxisComp:_s}],formatAxisMap:k4});const SMe=[{labelKey:"sidebar.dashboard",href:"/admin",icon:ene,roles:["super_admin"]},{labelKey:"sidebar.users",href:"/admin/users",icon:or,roles:["super_admin"],badge:3},{labelKey:"sidebar.userAnalytics",href:"/admin/user-analytics",icon:yr,roles:["super_admin"]},{labelKey:"sidebar.roles",href:"/admin/roles",icon:Dt,roles:["super_admin"]},{labelKey:"sidebar.offers",href:"/admin/OffersManagement",icon:Gt,roles:["super_admin","advertiser"]},{labelKey:"sidebar.finances",href:"/admin/finances",icon:Rt,roles:["super_admin","advertiser"]},{labelKey:"sidebar.antifraud",href:"/admin/fraud",icon:Dt,roles:["super_admin"]},{labelKey:"sidebar.postbacks",href:"/super-admin/postbacks",icon:$h,roles:["super_admin","advertiser","affiliate"]},{labelKey:"sidebar.blacklist",href:"/admin/blacklist",icon:Kx,roles:["super_admin"]},{labelKey:"sidebar.auditLogs",href:"/admin/audit-logs",icon:Qre,roles:["super_admin"]},{labelKey:"sidebar.systemSettings",href:"/admin/system-settings",icon:fr,roles:["super_admin"]},{labelKey:"sidebar.analytics",href:"/super-admin/analytics",icon:yr,roles:["super_admin","advertiser","affiliate"]},{labelKey:"sidebar.support",href:"/admin/support",icon:Zre,roles:["super_admin","advertiser","affiliate"]}];function xn({className:e}){const{user:t}=tr(),{t:n}=Wt(),[s]=Bn(),{collapsed:a,toggleCollapsed:i}=Qs();if(!t)return null;const l=SMe.filter(c=>c.roles.includes(t.role)),o=()=>{switch(t.role){case"super_admin":return n("roles.superAdmin");case"advertiser":return n("roles.advertiser");case"affiliate":return n("roles.affiliate");case"staff":return n("roles.staff");default:return t.role}};return r.jsx("aside",{className:Ee("fixed inset-y-0 left-0 z-[60] bg-white dark:bg-gray-800 border-r border-slate-200 dark:border-gray-600 transform transition-all duration-300 lg:translate-x-0",a?"w-16":"w-64",e),children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:Ee("flex items-center border-b border-slate-200 dark:border-gray-600",a?"px-4 py-4 justify-center":"px-6 py-4 justify-between"),children:[!a&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(Gt,{className:"text-white w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"AdLinkPro"}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:o()})]})]}),r.jsx(D,{variant:"ghost",size:"sm",onClick:i,className:"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300","data-testid":"button-toggle-sidebar",children:a?r.jsx(Zc,{className:"w-4 h-4"}):r.jsx(Mi,{className:"w-4 h-4"})})]}),r.jsx("nav",{className:"flex-1 px-3 py-6 space-y-1 overflow-y-auto",children:l.map(c=>{const d=c.icon;return r.jsxs(Ls,{href:c.href,className:Ee("flex items-center px-3 py-2 text-sm font-medium rounded-lg group transition-colors relative",s===c.href?"text-white bg-blue-600 dark:bg-blue-700":"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-gray-700",a?"justify-center":""),"data-testid":`nav-${c.labelKey.split(".")[1]}`,title:a?n(c.labelKey):void 0,children:[r.jsx(d,{className:Ee("w-5 h-5",a?"":"mr-3",s===c.href?"text-white":"text-slate-400 dark:text-slate-500")}),!a&&r.jsxs(r.Fragment,{children:[n(c.labelKey),c.badge&&r.jsx("span",{className:"ml-auto bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-300 text-xs font-medium px-2 py-1 rounded-full",children:c.badge})]}),a&&c.badge&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-medium w-5 h-5 rounded-full flex items-center justify-center",children:c.badge})]},c.href)})}),r.jsx("div",{className:"p-3 border-t border-slate-200 dark:border-gray-600",children:r.jsxs("div",{className:Ee("flex items-center",a?"justify-center":"justify-between"),children:[!a&&r.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:n("common.theme")}),r.jsx(Kv,{})]})})]})})}function gn({title:e,subtitle:t,children:n}){const{t:s,i18n:a}=Wt(),i=a.language,l=h=>a.changeLanguage(h),{user:o,logout:c}=tr(),d=()=>o!=null&&o.firstName&&(o!=null&&o.lastName)?`${o.firstName} ${o.lastName}`:(o==null?void 0:o.username)||"User",u=()=>{var h;return o!=null&&o.firstName&&(o!=null&&o.lastName)?`${o.firstName[0]}${o.lastName[0]}`.toUpperCase():((h=o==null?void 0:o.username)==null?void 0:h.substring(0,2).toUpperCase())||"U"};return r.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-slate-200 dark:border-gray-600 px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(D,{variant:"ghost",size:"sm",className:"lg:hidden text-slate-600",children:r.jsx("i",{className:"fas fa-bars w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:s(e)}),t&&r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:s(t)})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Kv,{}),r.jsxs(fe,{value:i,onValueChange:l,children:[r.jsx(ue,{className:"w-[120px] text-sm border-0 bg-transparent","data-testid":"language-switcher",children:r.jsx(me,{placeholder:s("language.select")})}),r.jsxs(he,{children:[r.jsxs(C,{value:"en",children:["🇺🇸 ",s("language.english")]}),r.jsxs(C,{value:"ru",children:["🇷🇺 ",s("language.russian")]})]})]}),r.jsxs(D,{variant:"ghost",size:"sm",className:"relative text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-slate-100","data-testid":"button-notifications",children:[r.jsx($n,{className:"w-5 h-5"}),r.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"})]}),r.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm text-green-700","data-testid":"live-traffic",children:"247 online"})]}),r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsxs(D,{variant:"ghost",className:"flex items-center space-x-3 hover:bg-slate-100 p-2 rounded-lg","data-testid":"user-profile-menu",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-medium",children:u()})}),r.jsxs("div",{className:"text-left hidden sm:block",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:d()}),r.jsx("p",{className:"text-xs text-slate-500",children:o==null?void 0:o.email})]}),r.jsx(fr,{className:"w-4 h-4 text-slate-400"})]})}),r.jsxs(Es,{className:"w-56",align:"end",forceMount:!0,children:[r.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:r.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[r.jsx("p",{className:"font-medium",children:d()}),r.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:o==null?void 0:o.email})]})}),r.jsx(qf,{}),r.jsxs(Lt,{className:"cursor-pointer","data-testid":"menu-profile",children:[r.jsx(Oo,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:s("common.profile")||"Профиль"})]}),r.jsxs(Lt,{className:"cursor-pointer","data-testid":"menu-settings",children:[r.jsx(fr,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:s("common.settings")||"Настройки"})]}),r.jsxs(Lt,{className:"cursor-pointer","data-testid":"menu-help",children:[r.jsx(Lv,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:s("navigation.help")||"Помощь"})]}),r.jsx(qf,{}),r.jsxs(Lt,{className:"cursor-pointer",onClick:c,"data-testid":"menu-logout",children:[r.jsx(Uv,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:s("common.logout")||"Выход"})]})]})]}),n]})]})})}const AI=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function TI(){var w,j,y,b,p,N,k,S,P;const{toast:e}=at();tr();const{t}=Wt(),{collapsed:n}=Qs(),s=Et(),[a,i]=v.useState("7d"),[l,o]=v.useState("all"),{data:c}=Fe({queryKey:["/api/admin/dashboard-metrics",a]}),{data:d=[]}=Fe({queryKey:["/api/admin/dashboard-chart",a]}),{data:u=[]}=Fe({queryKey:["/api/admin/recent-activities"]}),{data:h=[]}=Fe({queryKey:["/api/admin/geo-distribution",a]}),f=_=>{switch(_){case"registration":return r.jsx(mo,{className:"w-4 h-4"});case"offer":return r.jsx(Gt,{className:"w-4 h-4"});case"fraud":return r.jsx(Dt,{className:"w-4 h-4"});case"ticket":return r.jsx(es,{className:"w-4 h-4"});default:return r.jsx(Vr,{className:"w-4 h-4"})}},m=_=>{switch(_){case"registration":return"text-green-600";case"offer":return"text-blue-600";case"fraud":return"text-red-600";case"ticket":return"text-yellow-600";default:return"text-gray-600"}},g=_=>{switch(_){case"high":return r.jsx(ie,{className:"bg-red-100 text-red-800",children:"Высокий"});case"medium":return r.jsx(ie,{className:"bg-yellow-100 text-yellow-800",children:"Средний"});case"low":return r.jsx(ie,{className:"bg-green-100 text-green-800",children:"Низкий"});default:return r.jsx(ie,{children:"Обычный"})}},x=()=>{s.invalidateQueries({queryKey:["/api/admin/dashboard-metrics"]}),s.invalidateQueries({queryKey:["/api/admin/dashboard-chart"]}),s.invalidateQueries({queryKey:["/api/admin/recent-activities"]}),s.invalidateQueries({queryKey:["/api/admin/geo-distribution"]}),e({title:t("dashboard.data.updated"),description:t("dashboard.data.updateDesc")})};return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${n?"ml-16":"ml-64"}`,children:[r.jsx(gn,{title:"Дашборд владельца"}),r.jsxs("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 dark:bg-gray-900 p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["🧭 ",t("dashboard.title")]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t("dashboard.subtitle")})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs(D,{variant:"outline",onClick:x,"data-testid":"button-refresh",title:t("dashboard.refresh"),children:[r.jsx(Vt,{className:"w-4 h-4 mr-2"}),t("dashboard.refresh")]}),r.jsxs(fe,{value:a,onValueChange:i,children:[r.jsx(ue,{className:"w-40",title:"Период",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"1d",children:t("dashboard.period.today")}),r.jsx(C,{value:"7d",children:t("dashboard.period.7days")}),r.jsx(C,{value:"30d",children:t("dashboard.period.30days")}),r.jsx(C,{value:"90d",children:t("dashboard.period.90days")})]})]}),r.jsxs(fe,{value:l,onValueChange:o,children:[r.jsx(ue,{className:"w-32",title:"География",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:t("dashboard.geo.all")}),r.jsx(C,{value:"RU",children:t("dashboard.geo.russia")}),r.jsx(C,{value:"US",children:t("dashboard.geo.usa")}),r.jsx(C,{value:"EU",children:t("dashboard.geo.europe")})]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-8",children:[r.jsx(q,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-0 shadow-sm",children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-500 rounded-lg shrink-0",children:r.jsx(or,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[r.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 truncate",children:t("dashboard.metrics.activePartners")}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:((w=c==null?void 0:c.activePartners)==null?void 0:w.toLocaleString())||"0"}),(c==null?void 0:c.partnersGrowth)&&r.jsxs("div",{className:"flex items-center mt-0.5",children:[c.partnersGrowth>0?r.jsx($a,{className:"w-3 h-3 text-green-500"}):r.jsx(so,{className:"w-3 h-3 text-red-500"}),r.jsxs("span",{className:`text-xs ${c.partnersGrowth>0?"text-green-600":"text-red-600"}`,children:[c.partnersGrowth>0?"+":"",c.partnersGrowth.toFixed(1),"%"]})]})]})]})})}),r.jsx(q,{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-0 shadow-sm",children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-500 rounded-lg shrink-0",children:r.jsx(Gt,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[r.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 truncate",children:t("dashboard.metrics.activeOffers")}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:((j=c==null?void 0:c.activeOffers)==null?void 0:j.toLocaleString())||"0"}),(c==null?void 0:c.offersGrowth)&&r.jsxs("div",{className:"flex items-center mt-1",children:[c.offersGrowth>0?r.jsx($a,{className:"w-4 h-4 text-green-500"}):r.jsx(so,{className:"w-4 h-4 text-red-500"}),r.jsxs("span",{className:`text-sm ${c.offersGrowth>0?"text-green-600":"text-red-600"}`,children:[c.offersGrowth>0?"+":"",c.offersGrowth.toFixed(1),"%"]})]})]})]})})}),r.jsx(q,{className:"bg-gradient-to-br from-purple-50 to-violet-50 dark:from-purple-900/20 dark:to-violet-900/20 border-0 shadow-sm",children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-purple-500 rounded-lg shrink-0",children:r.jsx(Qc,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[r.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 truncate",children:t("dashboard.metrics.todayClicks")}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:((y=c==null?void 0:c.todayClicks)==null?void 0:y.toLocaleString())||"0"}),(c==null?void 0:c.clicksGrowth)&&r.jsxs("div",{className:"flex items-center mt-1",children:[c.clicksGrowth>0?r.jsx($a,{className:"w-4 h-4 text-green-500"}):r.jsx(so,{className:"w-4 h-4 text-red-500"}),r.jsxs("span",{className:`text-sm ${c.clicksGrowth>0?"text-green-600":"text-red-600"}`,children:[c.clicksGrowth>0?"+":"",c.clicksGrowth.toFixed(1),"%"]})]})]})]})})}),r.jsx(q,{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 border-0 shadow-sm",children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-orange-500 rounded-lg shrink-0",children:r.jsx(cr,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[r.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 truncate",children:t("dashboard.metrics.conversions")}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:((b=c==null?void 0:c.conversions)==null?void 0:b.toLocaleString())||"0"}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx($a,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{className:"text-sm text-green-600",children:"+8%"})]})]})]})})}),r.jsx(q,{className:"bg-gradient-to-br from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 border-0 shadow-sm",children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-yellow-500 rounded-lg shrink-0",children:r.jsx(Rt,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[r.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 truncate",children:t("dashboard.metrics.platformRevenue")}),r.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["$",((p=c==null?void 0:c.platformRevenue)==null?void 0:p.toLocaleString())||"0"]}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx($a,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{className:"text-sm text-green-600",children:"+15%"})]})]})]})})}),r.jsx(q,{className:"bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 border-0 shadow-sm",children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-red-500 rounded-lg shrink-0",children:r.jsx(Ka,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[r.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 truncate",children:t("dashboard.metrics.fraudRate")}),r.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[((N=c==null?void 0:c.fraudRate)==null?void 0:N.toFixed(1))||"0.0","%"]}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx(so,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{className:"text-sm text-green-600",children:"-2%"})]})]})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx(q,{className:"bg-gradient-to-br from-cyan-50 to-cyan-100 dark:from-cyan-900/20 dark:to-cyan-800/20 border-cyan-200 dark:border-cyan-700",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-cyan-700 dark:text-cyan-300",children:"CR (Conversion Rate)"}),r.jsxs("p",{className:"text-3xl font-bold text-cyan-900 dark:text-cyan-100",children:[((k=c==null?void 0:c.cr)==null?void 0:k.toFixed(2))||"0.00","%"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(ru,{value:(c==null?void 0:c.cr)||31.3,className:"w-16"}),r.jsx("p",{className:"text-sm text-cyan-600 dark:text-cyan-400 mt-1",children:"Целевой: 3.5%"})]})]})})}),r.jsx(q,{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 border-emerald-200 dark:border-emerald-700",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-emerald-700 dark:text-emerald-300",children:"EPC (Earnings Per Click)"}),r.jsxs("p",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:["$",((S=c==null?void 0:c.epc)==null?void 0:S.toFixed(2))||"2.97"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(ru,{value:((c==null?void 0:c.epc)||2.97)/5*100,className:"w-16"}),r.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 mt-1",children:"Целевой: $2.5"})]})]})})}),r.jsx(q,{className:"bg-gradient-to-br from-rose-50 to-rose-100 dark:from-rose-900/20 dark:to-rose-800/20 border-rose-200 dark:border-rose-700",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-rose-700 dark:text-rose-300",children:"ROI (Return on Investment)"}),r.jsxs("p",{className:"text-3xl font-bold text-rose-900 dark:text-rose-100",children:[((P=c==null?void 0:c.roi)==null?void 0:P.toFixed(0))||"167","%"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(ru,{value:Math.min(((c==null?void 0:c.roi)||167)/2,100),className:"w-16"}),r.jsx("p",{className:"text-sm text-rose-600 dark:text-rose-400 mt-1",children:"Целевой: 150%"})]})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[r.jsxs(q,{className:"lg:col-span-2",children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(yr,{className:"w-5 h-5"}),t("dashboard.charts.trafficTitle")]}),r.jsx(Ze,{children:t("dashboard.charts.trafficDesc")})]}),r.jsx(W,{children:r.jsx("div",{className:"h-80",children:r.jsx(xa,{width:"100%",height:"100%",children:r.jsxs(ny,{data:d,children:[r.jsx(Ti,{strokeDasharray:"3 3"}),r.jsx(Ps,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(us,{type:"monotone",dataKey:"clicks",stroke:"#8884d8",strokeWidth:2,name:"Клики"}),r.jsx(us,{type:"monotone",dataKey:"leads",stroke:"#82ca9d",strokeWidth:2,name:"Лиды"}),r.jsx(us,{type:"monotone",dataKey:"conversions",stroke:"#ffc658",strokeWidth:2,name:"Конверсии"})]})})})})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Rt,{className:"w-5 h-5"}),t("dashboard.charts.revenueTitle")]}),r.jsx(Ze,{children:t("dashboard.charts.revenueDesc")})]}),r.jsx(W,{children:r.jsx("div",{className:"h-64",children:r.jsx(xa,{width:"100%",height:"100%",children:r.jsxs(bW,{data:d,children:[r.jsx(Ti,{strokeDasharray:"3 3"}),r.jsx(Ps,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(Ei,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})})})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Vr,{className:"w-5 h-5"}),t("dashboard.charts.geoTitle")]}),r.jsx(Ze,{children:t("dashboard.charts.geoDesc")})]}),r.jsx(W,{children:r.jsx("div",{className:"h-64",children:r.jsx(xa,{width:"100%",height:"100%",children:r.jsxs(D4,{children:[r.jsx(Ki,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:({name:_,percent:R})=>`${_} ${(R*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:h.map((_,R)=>r.jsx(Gm,{fill:AI[R%AI.length]},`cell-${R}`))}),r.jsx(tn,{})]})})})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(q,{className:"lg:col-span-2",children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx($n,{className:"w-5 h-5"}),t("dashboard.activities.title")]}),r.jsx(Ze,{children:t("dashboard.activities.desc")})]}),r.jsx(W,{children:r.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:u.map(_=>r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800",children:[r.jsx("div",{className:`p-1 rounded ${m(_.type)}`,children:f(_.type)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:_.title}),g(_.priority)]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:_.description}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(_.timestamp).toLocaleString("ru-RU")})]})]},_.id))})})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"w-5 h-5"}),t("dashboard.quickActions.title")]}),r.jsx(Ze,{children:t("dashboard.quickActions.desc")})]}),r.jsx(W,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs(D,{className:"w-full justify-start",variant:"outline",onClick:()=>window.location.href="/admin/OffersManagement","data-testid":"quick-action-add-offer",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),t("dashboard.quickActions.addOffer")]}),r.jsxs(D,{className:"w-full justify-start",variant:"outline",onClick:()=>window.location.href="/admin/users","data-testid":"quick-action-add-user",children:[r.jsx(mo,{className:"w-4 h-4 mr-2"}),t("dashboard.quickActions.addUser")]}),r.jsxs(D,{className:"w-full justify-start",variant:"outline",onClick:()=>window.location.href="/admin/postbacks","data-testid":"quick-action-postback",children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),t("dashboard.quickActions.postback")]}),r.jsxs(D,{className:"w-full justify-start",variant:"outline",onClick:()=>window.location.href="/admin/analytics","data-testid":"quick-action-analytics",children:[r.jsx(yr,{className:"w-4 h-4 mr-2"}),t("dashboard.quickActions.analytics")]}),r.jsxs(D,{className:"w-full justify-start",variant:"outline",onClick:()=>window.location.href="/admin/fraud","data-testid":"quick-action-fraud",children:[r.jsx(Dt,{className:"w-4 h-4 mr-2"}),t("dashboard.quickActions.fraud")]}),r.jsxs(D,{className:"w-full justify-start",variant:"outline",onClick:()=>window.location.href="/admin/finances","data-testid":"quick-action-finances",children:[r.jsx(ir,{className:"w-4 h-4 mr-2"}),t("dashboard.quickActions.finances")]})]})})]})]})]})]})]})}const ne=v.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:Ee("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...n}));ne.displayName="Input";const Mt=v.forwardRef(({className:e,...t},n)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:n,className:Ee("w-full caption-bottom text-sm",e),...t})}));Mt.displayName="Table";const $t=v.forwardRef(({className:e,...t},n)=>r.jsx("thead",{ref:n,className:Ee("[&_tr]:border-b",e),...t}));$t.displayName="TableHeader";const It=v.forwardRef(({className:e,...t},n)=>r.jsx("tbody",{ref:n,className:Ee("[&_tr:last-child]:border-0",e),...t}));It.displayName="TableBody";const CMe=v.forwardRef(({className:e,...t},n)=>r.jsx("tfoot",{ref:n,className:Ee("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));CMe.displayName="TableFooter";const De=v.forwardRef(({className:e,...t},n)=>r.jsx("tr",{ref:n,className:Ee("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));De.displayName="TableRow";const Z=v.forwardRef(({className:e,...t},n)=>r.jsx("th",{ref:n,className:Ee("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Z.displayName="TableHead";const H=v.forwardRef(({className:e,...t},n)=>r.jsx("td",{ref:n,className:Ee("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));H.displayName="TableCell";const PMe=v.forwardRef(({className:e,...t},n)=>r.jsx("caption",{ref:n,className:Ee("mt-4 text-sm text-muted-foreground",e),...t}));PMe.displayName="TableCaption";var M4="Dialog",[jW,wW]=zn(M4),[_Me,Gi]=jW(M4),NW=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,o=v.useRef(null),c=v.useRef(null),[d=!1,u]=Di({prop:s,defaultProp:a,onChange:i});return r.jsx(_Me,{scope:t,triggerRef:o,contentRef:c,contentId:Qn(),titleId:Qn(),descriptionId:Qn(),open:d,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(h=>!h),[u]),modal:l,children:n})};NW.displayName=M4;var kW="DialogTrigger",SW=v.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Gi(kW,n),i=jt(t,a.triggerRef);return r.jsx(Xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":F4(a.open),...s,ref:i,onClick:Le(e.onClick,a.onOpenToggle)})});SW.displayName=kW;var $4="DialogPortal",[AMe,CW]=jW($4,{forceMount:void 0}),PW=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:a}=e,i=Gi($4,t);return r.jsx(AMe,{scope:t,forceMount:n,children:v.Children.map(s,l=>r.jsx(Vn,{present:n||i.open,children:r.jsx(Em,{asChild:!0,container:a,children:l})}))})};PW.displayName=$4;var Mj="DialogOverlay",_W=v.forwardRef((e,t)=>{const n=CW(Mj,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,i=Gi(Mj,e.__scopeDialog);return i.modal?r.jsx(Vn,{present:s||i.open,children:r.jsx(EMe,{...a,ref:t})}):null});_W.displayName=Mj;var TMe=Ic("DialogOverlay.RemoveScroll"),EMe=v.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Gi(Mj,n);return r.jsx(qv,{as:TMe,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(Xe.div,{"data-state":F4(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Cu="DialogContent",AW=v.forwardRef((e,t)=>{const n=CW(Cu,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,i=Gi(Cu,e.__scopeDialog);return r.jsx(Vn,{present:s||i.open,children:i.modal?r.jsx(OMe,{...a,ref:t}):r.jsx(RMe,{...a,ref:t})})});AW.displayName=Cu;var OMe=v.forwardRef((e,t)=>{const n=Gi(Cu,e.__scopeDialog),s=v.useRef(null),a=jt(t,n.contentRef,s);return v.useEffect(()=>{const i=s.current;if(i)return l1(i)},[]),r.jsx(TW,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Le(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Le(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,o=l.button===0&&l.ctrlKey===!0;(l.button===2||o)&&i.preventDefault()}),onFocusOutside:Le(e.onFocusOutside,i=>i.preventDefault())})}),RMe=v.forwardRef((e,t)=>{const n=Gi(Cu,e.__scopeDialog),s=v.useRef(!1),a=v.useRef(!1);return r.jsx(TW,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=e.onCloseAutoFocus)==null||l.call(e,i),i.defaultPrevented||(s.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),TW=v.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=e,o=Gi(Cu,n),c=v.useRef(null),d=jt(t,c);return s1(),r.jsxs(r.Fragment,{children:[r.jsx(Vv,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(Mu,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":F4(o.open),...l,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(MMe,{titleId:o.titleId}),r.jsx(IMe,{contentRef:c,descriptionId:o.descriptionId})]})]})}),I4="DialogTitle",EW=v.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Gi(I4,n);return r.jsx(Xe.h2,{id:a.titleId,...s,ref:t})});EW.displayName=I4;var OW="DialogDescription",RW=v.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Gi(OW,n);return r.jsx(Xe.p,{id:a.descriptionId,...s,ref:t})});RW.displayName=OW;var DW="DialogClose",MW=v.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Gi(DW,n);return r.jsx(Xe.button,{type:"button",...s,ref:t,onClick:Le(e.onClick,()=>a.onOpenChange(!1))})});MW.displayName=DW;function F4(e){return e?"open":"closed"}var $W="DialogTitleWarning",[DMe,IW]=Ite($W,{contentName:Cu,titleName:I4,docsSlug:"dialog"}),MMe=({titleId:e})=>{const t=IW($W),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return v.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},$Me="DialogDescriptionWarning",IMe=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${IW($Me).contentName}}.`;return v.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},L4=NW,FW=SW,U4=PW,iN=_W,lN=AW,B4=EW,z4=RW,V4=MW;const _t=L4,Ja=FW,FMe=U4,LW=v.forwardRef(({className:e,...t},n)=>r.jsx(iN,{ref:n,className:Ee("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));LW.displayName=iN.displayName;const kt=v.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(FMe,{children:[r.jsx(LW,{}),r.jsxs(lN,{ref:s,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,r.jsxs(V4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Fn,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));kt.displayName=lN.displayName;const St=({className:e,...t})=>r.jsx("div",{className:Ee("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});St.displayName="DialogHeader";const go=({className:e,...t})=>r.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});go.displayName="DialogFooter";const Ct=v.forwardRef(({className:e,...t},n)=>r.jsx(B4,{ref:n,className:Ee("text-lg font-semibold leading-none tracking-tight",e),...t}));Ct.displayName=B4.displayName;const Br=v.forwardRef(({className:e,...t},n)=>r.jsx(z4,{ref:n,className:Ee("text-sm text-muted-foreground",e),...t}));Br.displayName=z4.displayName;var LMe="Label",UW=v.forwardRef((e,t)=>r.jsx(Xe.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));UW.displayName=LMe;var BW=UW;const UMe=Fv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),F=v.forwardRef(({className:e,...t},n)=>r.jsx(BW,{ref:n,className:Ee(UMe(),e),...t}));F.displayName=BW.displayName;const gt=v.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:Ee("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));gt.displayName="Textarea";function qk(){var _e,Ae,Y,Se;const{t:e,i18n:t}=Wt(),n=t.language,{toast:s}=at(),{collapsed:a}=Qs(),i=Et(),[l,o]=v.useState({search:"",role:"all",status:"all",userType:"all",country:"",dateFrom:"",dateTo:"",lastActivityFrom:"",lastActivityTo:"",geoIP:"",page:1,limit:20,sortBy:"createdAt",sortOrder:"desc"}),[c,d]=v.useState([]),[u,h]=v.useState(""),[f,m]=v.useState(!1),[g,x]=v.useState(null),[w,j]=v.useState(!1),[y,b]=v.useState(!1),[p,N]=v.useState(!1),[k,S]=v.useState(!1),[P,_]=v.useState(!1),[R,O]=v.useState(null),[M,A]=v.useState("soft"),[T,B]=v.useState("block"),[z,U]=v.useState(""),[E,$]=v.useState({firstName:"",lastName:"",email:"",role:"affiliate",country:"",isActive:!0,twoFactorEnabled:!1,ipRestrictions:"",geoRestrictions:"",advertiserName:""}),[G,oe]=v.useState({username:"",email:"",password:"",firstName:"",lastName:"",role:"affiliate",userType:"affiliate",country:"",advertiserName:""}),ee=v.useCallback(te=>{o(Te=>({...Te,search:te,page:1}))},[]),ce=v.useCallback((te,Te)=>{o(Yt=>({...Yt,[te]:Te,page:1}))},[]),ye=te=>{const Te=l.sortBy===te&&l.sortOrder==="asc"?"desc":"asc";o({...l,sortBy:te,sortOrder:Te})},je=te=>l.sortBy!==te?"↕️":l.sortOrder==="asc"?"↑":"↓",$e=te=>{x(te),m(!0)},ke=te=>Jt(new Date(te),"dd.MM.yyyy HH:mm",{locale:n==="ru"?lo:r1}),{data:be,isLoading:pe,refetch:le}=Fe({queryKey:["/api/admin/users",l],queryFn:async()=>{const te=new URLSearchParams;Object.entries(l).forEach(([Yt,Nr])=>{Nr&&Nr!=="all"&&te.append(Yt,Nr.toString())});const Te=await fetch(`/api/admin/users?${te.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!Te.ok)throw new Error("Failed to fetch users");return Te.json()}}),Ie=Oe({mutationFn:async({userId:te,reason:Te})=>Re(`/api/admin/users/${te}/block`,"POST",{reason:Te}),onSuccess:()=>{s({title:"Пользователь заблокирован",description:"Пользователь успешно заблокирован"}),i.invalidateQueries({queryKey:["/api/admin/users"]}),m(!1),h("")}}),ae=Oe({mutationFn:async te=>Re(`/api/admin/users/${te}/unblock`,"POST"),onSuccess:()=>{s({title:"Пользователь разблокирован",description:"Пользователь успешно разблокирован"}),i.invalidateQueries({queryKey:["/api/admin/users"]})}}),st=Oe({mutationFn:async te=>Re(`/api/admin/users/${te}/force-logout`,"POST"),onSuccess:()=>{s({title:"Сессии завершены",description:"Все сессии пользователя успешно завершены"}),i.invalidateQueries({queryKey:["/api/admin/users"]})}}),K=Oe({mutationFn:async te=>Re(`/api/admin/users/${te}/reset-password`,"POST"),onSuccess:()=>{s({title:"Пароль сброшен",description:"Новый пароль отправлен на email пользователя"}),i.invalidateQueries({queryKey:["/api/admin/users"]})}}),Me=Oe({mutationFn:async({userId:te,userData:Te})=>Re(`/api/admin/users/${te}`,"PATCH",Te),onSuccess:()=>{s({title:"Пользователь обновлен",description:"Данные пользователя успешно обновлены"}),i.invalidateQueries({queryKey:["/api/admin/users"]}),j(!1)}}),de=Oe({mutationFn:async({userId:te,type:Te})=>Re(`/api/admin/users/${te}`,"DELETE",{deleteType:Te}),onSuccess:()=>{s({title:"Пользователь удален",description:M==="soft"?"Пользователь перемещен в архив":"Пользователь полностью удален"}),i.invalidateQueries({queryKey:["/api/admin/users"]}),N(!1)}});Oe({mutationFn:async({userId:te,enabled:Te})=>Re(`/api/admin/users/${te}/2fa`,"PATCH",{enabled:Te}),onSuccess:()=>{s({title:"2FA настроена",description:"Настройки двухфакторной аутентификации обновлены"}),i.invalidateQueries({queryKey:["/api/admin/users"]})}}),Oe({mutationFn:async({userId:te,restrictions:Te})=>Re(`/api/admin/users/${te}/restrictions`,"PATCH",Te),onSuccess:()=>{s({title:"Ограничения обновлены",description:"IP и GEO ограничения успешно применены"}),i.invalidateQueries({queryKey:["/api/admin/users"]})}});const Be=()=>{g&&u.trim()&&Ie.mutate({userId:g,reason:u})},qe=te=>{O(te),$({firstName:te.firstName||"",lastName:te.lastName||"",email:te.email,role:te.role,country:te.country||"",isActive:te.isActive,twoFactorEnabled:!1,ipRestrictions:"",geoRestrictions:"",advertiserName:te.advertiserName||""}),j(!0)},Qe=te=>{O(te),N(!0)},wt=()=>{R&&de.mutate({userId:R.id,type:M})},rr=()=>{R&&Me.mutate({userId:R.id,userData:E})},V=()=>{J.mutate(G)},I=()=>{c.length!==0&&xe.mutate({action:T,userIds:c,reason:z})},J=Oe({mutationFn:async te=>Re("/api/admin/users","POST",te),onSuccess:()=>{s({title:"Пользователь создан",description:"Новый пользователь успешно создан"}),i.invalidateQueries({queryKey:["/api/admin/users"]}),S(!1),oe({username:"",email:"",password:"",firstName:"",lastName:"",role:"affiliate",userType:"affiliate",country:"",advertiserName:""})}}),xe=Oe({mutationFn:async({action:te,userIds:Te,reason:Yt})=>{switch(te){case"block":return Re("/api/admin/users/bulk-block","POST",{userIds:Te,reason:Yt});case"unblock":return Re("/api/admin/users/bulk-unblock","POST",{userIds:Te});case"delete":return Re("/api/admin/users/bulk-delete","POST",{userIds:Te,deleteType:"soft"});default:throw new Error("Unknown bulk action")}},onSuccess:()=>{s({title:"Массовая операция завершена",description:`Операция выполнена для ${c.length} пользователей`}),i.invalidateQueries({queryKey:["/api/admin/users"]}),d([]),_(!1),U("")}});return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${a?"ml-0 lg:ml-16":"ml-0 lg:ml-64"}`,children:[r.jsx(gn,{title:"Управление пользователями"}),r.jsx("main",{className:"flex-1 overflow-auto",children:r.jsxs("div",{className:"space-y-6 p-4 sm:p-6 max-w-full",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Управление пользователями"}),r.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Управляйте пользователями системы, их ролями и настройками"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(D,{onClick:()=>S(!0),children:[r.jsx(Zt,{className:"mr-2 h-4 w-4"}),"Создать пользователя"]}),c.length>0&&r.jsxs(D,{variant:"outline",onClick:()=>_(!0),className:"border-orange-200 text-orange-700 hover:bg-orange-50",children:[r.jsx(Dt,{className:"mr-2 h-4 w-4"}),"Массовые действия (",c.length,")"]})]})]}),r.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Всего пользователей"}),r.jsx(Oo,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold",children:Array.isArray(be==null?void 0:be.data)?be.data.length:0})})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Активных"}),r.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600",children:Array.isArray(be==null?void 0:be.data)?be.data.filter(te=>te.isActive).length:0})})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Заблокированных"}),r.jsx(Kx,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold text-red-600",children:Array.isArray(be==null?void 0:be.data)?be.data.filter(te=>!te.isActive).length:0})})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Новых сегодня"}),r.jsx(Xn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Array.isArray(be==null?void 0:be.data)?be.data.filter(te=>{const Te=new Date().toDateString();return new Date(te.createdAt).toDateString()===Te}).length:0})})]})]}),r.jsx(q,{children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(ne,{placeholder:"Поиск по email, ID, имени...",value:l.search,onChange:te=>ee(te.target.value),className:"pl-10"})]}),r.jsxs(fe,{value:l.role,onValueChange:te=>ce("role",te),children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите роль"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все роли"}),r.jsx(C,{value:"super_admin",children:"Супер-админ"}),r.jsx(C,{value:"advertiser",children:"Рекламодатель"}),r.jsx(C,{value:"affiliate",children:"Партнер"}),r.jsx(C,{value:"staff",children:"Сотрудник"})]})]}),r.jsxs(fe,{value:l.status,onValueChange:te=>ce("status",te),children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите статус"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все статусы"}),r.jsx(C,{value:"active",children:"Активные"}),r.jsx(C,{value:"blocked",children:"Заблокированные"}),r.jsx(C,{value:"inactive",children:"Неактивные"})]})]}),r.jsxs(fe,{value:l.userType,onValueChange:te=>ce("userType",te),children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Тип пользователя"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все типы"}),r.jsx(C,{value:"affiliate",children:"Партнер"}),r.jsx(C,{value:"advertiser",children:"Рекламодатель"}),r.jsx(C,{value:"admin",children:"Администратор"})]})]}),r.jsx(ne,{placeholder:"Страна",value:l.country,onChange:te=>ce("country",te.target.value)}),r.jsx(ne,{placeholder:"Geo IP",value:l.geoIP,onChange:te=>ce("geoIP",te.target.value)})]}),r.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Дата регистрации от:"}),r.jsx(ne,{type:"date",value:l.dateFrom,onChange:te=>ce("dateFrom",te.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Дата регистрации до:"}),r.jsx(ne,{type:"date",value:l.dateTo,onChange:te=>ce("dateTo",te.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Последний вход от:"}),r.jsx(ne,{type:"date",value:l.lastActivityFrom,onChange:te=>ce("lastActivityFrom",te.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-muted-foreground",children:"Последний вход до:"}),r.jsx(ne,{type:"date",value:l.lastActivityTo,onChange:te=>ce("lastActivityTo",te.target.value),className:"mt-1"})]}),r.jsxs("div",{className:"flex items-end gap-2",children:[r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>{o({search:"",role:"all",status:"all",userType:"all",country:"",dateFrom:"",dateTo:"",lastActivityFrom:"",lastActivityTo:"",geoIP:"",page:1,limit:20,sortBy:"createdAt",sortOrder:"desc"})},children:[r.jsx(As,{className:"h-4 w-4 mr-1"}),"Сбросить"]}),r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>le(),children:[r.jsx(Vt,{className:"h-4 w-4 mr-1"}),"Обновить"]}),r.jsxs(D,{variant:"outline",size:"sm",children:[r.jsx(br,{className:"h-4 w-4 mr-1"}),"Экспорт"]})]})]})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{className:"w-12",children:r.jsx("input",{type:"checkbox",className:"rounded",checked:c.length===((_e=be==null?void 0:be.data)==null?void 0:_e.length)&&((Ae=be==null?void 0:be.data)==null?void 0:Ae.length)>0,onChange:te=>{var Te;te.target.checked?d(((Te=be==null?void 0:be.data)==null?void 0:Te.map(Yt=>Yt.id))||[]):d([])}})}),r.jsxs(Z,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>ye("id"),children:["ID ",je("id")]}),r.jsxs(Z,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>ye("userType"),children:["Тип ",je("userType")]}),r.jsxs(Z,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>ye("username"),children:["Название аккаунта / Имя ",je("username")]}),r.jsxs(Z,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>ye("email"),children:["Email / Telegram ",je("email")]}),r.jsxs(Z,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>ye("role"),children:["Роль ",je("role")]}),r.jsxs(Z,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>ye("status"),children:["Статус ",je("status")]}),r.jsxs(Z,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>ye("createdAt"),children:["Дата регистрации ",je("createdAt")]}),r.jsxs(Z,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>ye("lastLoginAt"),children:["Последний вход (IP) ",je("lastLoginAt")]}),r.jsxs(Z,{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>ye("advertiserName"),children:["Привязанный рекламодатель ",je("advertiserName")]}),r.jsx(Z,{className:"text-right",children:"Действия"})]})}),r.jsx(It,{children:pe?r.jsx(De,{children:r.jsx(H,{colSpan:11,className:"text-center py-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Загрузка..."]})})}):((Y=be==null?void 0:be.data)==null?void 0:Y.length)===0?r.jsx(De,{children:r.jsx(H,{colSpan:11,className:"text-center py-8",children:"Пользователи не найдены"})}):(Se=be==null?void 0:be.data)==null?void 0:Se.map(te=>r.jsxs(De,{children:[r.jsx(H,{children:r.jsx("input",{type:"checkbox",className:"rounded",checked:c.includes(te.id),onChange:Te=>{Te.target.checked?d([...c,te.id]):d(c.filter(Yt=>Yt!==te.id))}})}),r.jsxs(H,{className:"font-mono text-xs",children:[te.id.substring(0,8),"..."]}),r.jsx(H,{children:r.jsx(ie,{variant:te.userType==="advertiser"?"default":te.userType==="affiliate"?"secondary":te.userType==="staff"?"outline":"destructive",children:te.userType==="advertiser"?"Рекламодатель":te.userType==="affiliate"?"Партнёр":te.userType==="staff"?"Сотрудник":"Админ"})}),r.jsx(H,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:te.username}),(te.firstName||te.lastName)&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:[te.firstName," ",te.lastName]})]})}),r.jsx(H,{children:r.jsx("div",{className:"text-sm",children:te.email})}),r.jsx(H,{children:r.jsx(ie,{variant:"outline",className:te.role==="super_admin"?"bg-purple-100 text-purple-800 border-purple-200":te.role==="advertiser"?"bg-blue-100 text-blue-800 border-blue-200":te.role==="affiliate"?"bg-green-100 text-green-800 border-green-200":te.role==="staff"?"bg-orange-100 text-orange-800 border-orange-200":"bg-gray-100 text-gray-800 border-gray-200",children:te.role==="super_admin"?"Супер-админ":te.role==="advertiser"?"Рекламодатель":te.role==="affiliate"?"Партнёр":te.role==="staff"?"Сотрудник":te.role})}),r.jsx(H,{children:r.jsx(ie,{variant:te.isActive?"default":"destructive",children:te.isActive?"Активен":"Заблокирован"})}),r.jsx(H,{children:r.jsx("div",{className:"text-sm",children:ke(te.createdAt)})}),r.jsx(H,{children:r.jsx("div",{className:"text-sm",children:te.lastLoginAt?r.jsxs(r.Fragment,{children:[r.jsx("div",{children:ke(te.lastLoginAt)}),te.lastLoginIP&&r.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:te.lastLoginIP})]}):r.jsx("span",{className:"text-muted-foreground",children:"Никогда"})})}),r.jsx(H,{children:te.advertiserName?r.jsx(ie,{variant:"outline",className:"bg-indigo-100 text-indigo-800 border-indigo-200",children:te.advertiserName}):r.jsx(ie,{variant:"outline",className:"bg-gray-100 text-gray-500 border-gray-200",children:"Не привязан"})}),r.jsx(H,{className:"text-right",children:r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsx(D,{variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(Gx,{className:"h-4 w-4"})})}),r.jsxs(Es,{align:"end",children:[r.jsxs(Lt,{onClick:()=>{O(te),b(!0)},children:[r.jsx(ir,{className:"mr-2 h-4 w-4"}),"Просмотр"]}),r.jsxs(Lt,{onClick:()=>qe(te),children:[r.jsx(Ts,{className:"mr-2 h-4 w-4"}),"Редактировать"]}),te.isActive?r.jsxs(Lt,{onClick:()=>$e(te.id),children:[r.jsx(Kx,{className:"mr-2 h-4 w-4"}),"Заблокировать"]}):r.jsxs(Lt,{onClick:()=>ae.mutate(te.id),children:[r.jsx(une,{className:"mr-2 h-4 w-4"}),"Разблокировать"]}),r.jsxs(Lt,{onClick:()=>st.mutate(te.id),children:[r.jsx(Uv,{className:"mr-2 h-4 w-4"}),"Завершить сессии"]}),r.jsxs(Lt,{onClick:()=>K.mutate(te.id),children:[r.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Сбросить пароль"]}),r.jsxs(Lt,{onClick:()=>Qe(te),className:"text-red-600",children:[r.jsx(wr,{className:"mr-2 h-4 w-4"}),"Удалить"]})]})]})})]},te.id))})]})})})}),r.jsx(_t,{open:f,onOpenChange:m,children:r.jsxs(kt,{children:[r.jsx(St,{children:r.jsx(Ct,{children:"Заблокировать пользователя"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"blockReason",children:"Причина блокировки"}),r.jsx(gt,{id:"blockReason",placeholder:"Укажите причину блокировки...",value:u,onChange:te=>h(te.target.value)})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(D,{variant:"outline",onClick:()=>m(!1),children:"Отмена"}),r.jsx(D,{variant:"destructive",onClick:Be,disabled:!u.trim()||Ie.isPending,children:Ie.isPending?r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}):"Заблокировать"})]})]})]})}),r.jsx(_t,{open:w,onOpenChange:j,children:r.jsxs(kt,{className:"max-w-2xl",children:[r.jsx(St,{children:r.jsx(Ct,{children:"Редактировать пользователя"})}),r.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Имя"}),r.jsx(ne,{value:E.firstName,onChange:te=>$({...E,firstName:te.target.value}),placeholder:"Введите имя"})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Фамилия"}),r.jsx(ne,{value:E.lastName,onChange:te=>$({...E,lastName:te.target.value}),placeholder:"Введите фамилию"})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Email"}),r.jsx(ne,{type:"email",value:E.email,onChange:te=>$({...E,email:te.target.value}),placeholder:"email@example.com"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Роль"}),r.jsxs(fe,{value:E.role,onValueChange:te=>$({...E,role:te}),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"super_admin",children:"Супер-админ"}),r.jsx(C,{value:"advertiser",children:"Рекламодатель"}),r.jsx(C,{value:"affiliate",children:"Партнер"}),r.jsx(C,{value:"staff",children:"Сотрудник"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Страна"}),r.jsx(ne,{value:E.country,onChange:te=>$({...E,country:te.target.value}),placeholder:"Россия"})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Привязанный рекламодатель"}),r.jsx(ne,{value:E.advertiserName,onChange:te=>$({...E,advertiserName:te.target.value}),placeholder:"Название рекламодателя"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"IP ограничения (через запятую)"}),r.jsx(gt,{value:E.ipRestrictions,onChange:te=>$({...E,ipRestrictions:te.target.value}),placeholder:"192.168.1.1, 10.0.0.0/24",rows:2})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"GEO ограничения (коды стран через запятую)"}),r.jsx(gt,{value:E.geoRestrictions,onChange:te=>$({...E,geoRestrictions:te.target.value}),placeholder:"RU, BY, KZ",rows:2})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:E.isActive,onChange:te=>$({...E,isActive:te.target.checked})}),r.jsx(F,{htmlFor:"isActive",children:"Активный пользователь"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"twoFactorEnabled",checked:E.twoFactorEnabled,onChange:te=>$({...E,twoFactorEnabled:te.target.checked})}),r.jsx(F,{htmlFor:"twoFactorEnabled",children:"2FA включена"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(D,{variant:"outline",onClick:()=>j(!1),children:"Отмена"}),r.jsxs(D,{onClick:rr,disabled:Me.isPending,children:[Me.isPending?r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Сохранить"]})]})]})}),r.jsx(_t,{open:y,onOpenChange:b,children:r.jsxs(kt,{className:"max-w-2xl",children:[r.jsx(St,{children:r.jsx(Ct,{children:"Профиль пользователя"})}),R&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"ID пользователя"}),r.jsx("div",{className:"font-mono text-sm bg-gray-100 p-2 rounded",children:R.id})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Имя пользователя"}),r.jsx("div",{className:"font-medium",children:R.username})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Email"}),r.jsx("div",{children:R.email})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Роль"}),r.jsx(ie,{variant:"outline",children:R.role})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Статус"}),r.jsx(ie,{variant:R.isActive?"default":"destructive",children:R.isActive?"Активен":"Заблокирован"})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Страна"}),r.jsx("div",{children:R.country||"Не указана"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Дата регистрации"}),r.jsx("div",{children:ke(R.createdAt)})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Последний вход"}),r.jsxs("div",{children:[R.lastLoginAt?ke(R.lastLoginAt):"Никогда",R.lastLoginIP&&r.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:R.lastLoginIP})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Привязанный рекламодатель"}),r.jsx("div",{children:R.advertiserName||"Не привязан"})]})]})]})}),r.jsx(_t,{open:p,onOpenChange:N,children:r.jsxs(kt,{children:[r.jsx(St,{children:r.jsx(Ct,{children:"Удаление пользователя"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Выберите тип удаления для пользователя: ",r.jsx("strong",{children:R==null?void 0:R.username})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"radio",id:"soft-delete",name:"deleteType",checked:M==="soft",onChange:()=>A("soft")}),r.jsxs(F,{htmlFor:"soft-delete",className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:"Мягкое удаление (архив)"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Пользователь будет перемещен в архив, данные сохранятся"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"radio",id:"hard-delete",name:"deleteType",checked:M==="hard",onChange:()=>A("hard")}),r.jsxs(F,{htmlFor:"hard-delete",className:"flex-1",children:[r.jsx("div",{className:"font-medium text-red-600",children:"Полное удаление"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Все данные пользователя будут безвозвратно удалены"})]})]})]}),M==="hard"&&r.jsx("div",{className:"bg-red-50 border border-red-200 p-3 rounded",children:r.jsx("div",{className:"text-sm text-red-800",children:"⚠️ Внимание! Это действие нельзя отменить. Все данные пользователя, включая статистику и историю, будут полностью удалены."})})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(D,{variant:"outline",onClick:()=>N(!1),children:"Отмена"}),r.jsxs(D,{variant:M==="hard"?"destructive":"default",onClick:wt,disabled:de.isPending,children:[de.isPending?r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}):null,M==="soft"?"В архив":"Удалить навсегда"]})]})]})}),r.jsx(_t,{open:k,onOpenChange:S,children:r.jsxs(kt,{className:"max-w-2xl",children:[r.jsx(St,{children:r.jsx(Ct,{children:"Создать нового пользователя"})}),r.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Имя пользователя *"}),r.jsx(ne,{value:G.username,onChange:te=>oe({...G,username:te.target.value}),placeholder:"username",required:!0})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Email *"}),r.jsx(ne,{type:"email",value:G.email,onChange:te=>oe({...G,email:te.target.value}),placeholder:"email@example.com",required:!0})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Пароль *"}),r.jsx(ne,{type:"password",value:G.password,onChange:te=>oe({...G,password:te.target.value}),placeholder:"Введите пароль",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Имя"}),r.jsx(ne,{value:G.firstName,onChange:te=>oe({...G,firstName:te.target.value}),placeholder:"Введите имя"})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Фамилия"}),r.jsx(ne,{value:G.lastName,onChange:te=>oe({...G,lastName:te.target.value}),placeholder:"Введите фамилию"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Роль"}),r.jsxs(fe,{value:G.role,onValueChange:te=>oe({...G,role:te}),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"super_admin",children:"Супер-админ"}),r.jsx(C,{value:"advertiser",children:"Рекламодатель"}),r.jsx(C,{value:"affiliate",children:"Партнер"}),r.jsx(C,{value:"staff",children:"Сотрудник"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Тип пользователя"}),r.jsxs(fe,{value:G.userType,onValueChange:te=>oe({...G,userType:te}),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"advertiser",children:"Рекламодатель"}),r.jsx(C,{value:"affiliate",children:"Партнер"}),r.jsx(C,{value:"staff",children:"Сотрудник"}),r.jsx(C,{value:"admin",children:"Администратор"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Страна"}),r.jsx(ne,{value:G.country,onChange:te=>oe({...G,country:te.target.value}),placeholder:"Россия"})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Привязанный рекламодатель"}),r.jsx(ne,{value:G.advertiserName,onChange:te=>oe({...G,advertiserName:te.target.value}),placeholder:"Название рекламодателя"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(D,{variant:"outline",onClick:()=>S(!1),children:"Отмена"}),r.jsxs(D,{onClick:V,disabled:J.isPending||!G.username||!G.email||!G.password,children:[J.isPending?r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Создать пользователя"]})]})]})}),r.jsx(_t,{open:P,onOpenChange:_,children:r.jsxs(kt,{children:[r.jsx(St,{children:r.jsx(Ct,{children:"Массовые действия"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Выбрано пользователей: ",r.jsx("strong",{children:c.length})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Выберите действие"}),r.jsxs(fe,{value:T,onValueChange:te=>B(te),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"block",children:"Заблокировать пользователей"}),r.jsx(C,{value:"unblock",children:"Разблокировать пользователей"}),r.jsx(C,{value:"delete",children:"Удалить пользователей (в архив)"})]})]})]}),(T==="block"||T==="delete")&&r.jsxs("div",{children:[r.jsx(F,{children:"Причина"}),r.jsx(gt,{value:z,onChange:te=>U(te.target.value),placeholder:"Укажите причину...",required:T==="block"})]}),T==="delete"&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded",children:r.jsx("div",{className:"text-sm text-yellow-800",children:"⚠️ Пользователи будут перемещены в архив (мягкое удаление)"})})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(D,{variant:"outline",onClick:()=>_(!1),children:"Отмена"}),r.jsxs(D,{variant:T==="delete"?"destructive":"default",onClick:I,disabled:xe.isPending||T==="block"&&!z.trim(),children:[xe.isPending?r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}):null,T==="block"?"Заблокировать":T==="unblock"?"Разблокировать":"Удалить в архив"]})]})]})})]})})]})]})}function BMe(){const{t:e}=Wt();at();const{isCollapsed:t}=Qs();Et();const[n,s]=v.useState(""),[a,i]=v.useState("all"),[l,o]=v.useState(!1),[c,d]=v.useState(!1),[u,h]=v.useState(!1),[f,m]=v.useState(null),[g,x]=v.useState({name:"",description:"",permissions:[],advertiserId:null,ipRestrictions:"",geoRestrictions:"",timeRestrictions:{startTime:"",endTime:"",allowedDays:[]}}),{data:w,isLoading:j,refetch:y}=Fe({queryKey:["/api/admin/roles",n,a],queryFn:async()=>{const p=new URLSearchParams;n&&p.append("search",n),a!=="all"&&p.append("scope",a);const N=await fetch(`/api/admin/roles?${p.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!N.ok)throw new Error("Failed to fetch roles");return N.json()}}),b={total:(w==null?void 0:w.length)||0,global:(w==null?void 0:w.filter(p=>!p.advertiserId).length)||0,advertiser:(w==null?void 0:w.filter(p=>p.advertiserId).length)||0,active:(w==null?void 0:w.filter(p=>p.isActive).length)||0};return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${t?"lg:ml-16":"lg:ml-64"} transition-all duration-300`,children:[r.jsx(gn,{}),r.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 dark:bg-gray-900 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:e("sidebar.roles")}),r.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:e("roles.description")})]}),r.jsxs(D,{onClick:()=>o(!0),className:"mt-4 sm:mt-0",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),e("roles.createRole")]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[r.jsx(q,{children:r.jsx(W,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Dt,{className:"h-8 w-8 text-blue-600"}),r.jsx("div",{className:"ml-4",children:r.jsxs("div",{className:"text-lg font-medium",children:[e("roles.totalRoles"),": ",b.total]})})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(mr,{className:"h-8 w-8 text-green-600"}),r.jsx("div",{className:"ml-4",children:r.jsxs("div",{className:"text-lg font-medium",children:[e("roles.globalRoles"),": ",b.global]})})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(or,{className:"h-8 w-8 text-purple-600"}),r.jsx("div",{className:"ml-4",children:r.jsxs("div",{className:"text-lg font-medium",children:[e("roles.advertiserRoles"),": ",b.advertiser]})})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Gt,{className:"h-8 w-8 text-orange-600"}),r.jsx("div",{className:"ml-4",children:r.jsxs("div",{className:"text-lg font-medium",children:[e("roles.activeRoles"),": ",b.active]})})]})})})]}),r.jsx(q,{className:"mb-6",children:r.jsx(W,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(ne,{placeholder:e("common.search"),value:n,onChange:p=>s(p.target.value),className:"pl-10"})]}),r.jsxs(fe,{value:a,onValueChange:i,children:[r.jsx(ue,{className:"w-full sm:w-48",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:e("roles.allRoles")}),r.jsx(C,{value:"global",children:e("roles.global")}),r.jsx(C,{value:"advertiser",children:e("roles.advertiser")})]})]}),r.jsxs(D,{variant:"outline",onClick:()=>y(),children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),e("common.refresh")]})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:e("common.name")}),r.jsx(Z,{children:e("common.description")}),r.jsx(Z,{children:e("roles.scope")}),r.jsx(Z,{children:e("roles.permissions")}),r.jsx(Z,{children:e("common.status")}),r.jsx(Z,{className:"text-right",children:e("common.actions")})]})}),r.jsx(It,{children:j?r.jsx(De,{children:r.jsx(H,{colSpan:6,className:"text-center py-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}),e("common.loading")]})})}):(w==null?void 0:w.length)===0?r.jsx(De,{children:r.jsx(H,{colSpan:6,className:"text-center py-8",children:e("roles.noRoles")})}):w==null?void 0:w.map(p=>r.jsxs(De,{children:[r.jsx(H,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:p.name}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",p.id.substring(0,8),"..."]})]})}),r.jsx(H,{children:r.jsx("div",{className:"max-w-xs truncate",children:p.description||e("roles.noDescription")})}),r.jsxs(H,{children:[r.jsx(ie,{variant:p.advertiserId?"secondary":"default",className:p.advertiserId?"bg-orange-100 text-orange-800 border-orange-200":"bg-blue-100 text-blue-800 border-blue-200",children:p.advertiserId?e("roles.advertiserRole"):e("roles.globalRole")}),p.advertiserName&&r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:p.advertiserName})]}),r.jsx(H,{children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.permissions.slice(0,3).map(N=>r.jsx(ie,{variant:"outline",className:"text-xs",children:N},N)),p.permissions.length>3&&r.jsxs(ie,{variant:"outline",className:"text-xs",children:["+",p.permissions.length-3]})]})}),r.jsx(H,{children:r.jsx(ie,{variant:p.isActive?"default":"secondary",className:p.isActive?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-800 border-gray-200",children:p.isActive?e("common.active"):e("common.inactive")})}),r.jsx(H,{children:r.jsx("div",{className:"flex items-center justify-end gap-2",children:r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsx(D,{variant:"ghost",size:"sm",children:r.jsx(Gx,{className:"h-4 w-4"})})}),r.jsxs(Es,{align:"end",children:[r.jsxs(Lt,{onClick:()=>{m(p),h(!0)},children:[r.jsx(ir,{className:"mr-2 h-4 w-4"}),e("common.view")]}),r.jsxs(Lt,{onClick:()=>{m(p),x({name:p.name,description:p.description,permissions:p.permissions,advertiserId:p.advertiserId,ipRestrictions:p.ipRestrictions.join(", "),geoRestrictions:p.geoRestrictions.join(", "),timeRestrictions:p.timeRestrictions||{startTime:"",endTime:"",allowedDays:[]}}),d(!0)},children:[r.jsx(Ts,{className:"mr-2 h-4 w-4"}),e("common.edit")]}),r.jsxs(Lt,{className:"text-destructive",children:[r.jsx(wr,{className:"mr-2 h-4 w-4"}),e("common.delete")]})]})]})})})]},p.id))})]})})})})]})})]})]})}function zMe(e,t){const[n,s]=v.useState(e);return v.useEffect(()=>{const a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t]),n}var q4="Tabs",[VMe,Qqe]=zn(q4,[i1]),zW=i1(),[qMe,W4]=VMe(q4),VW=v.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=e,u=Im(o),[h,f]=Di({prop:s,onChange:a,defaultProp:i});return r.jsx(qMe,{scope:n,baseId:Qn(),value:h,onValueChange:f,orientation:l,dir:u,activationMode:c,children:r.jsx(Xe.div,{dir:u,"data-orientation":l,...d,ref:t})})});VW.displayName=q4;var qW="TabsList",WW=v.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...a}=e,i=W4(qW,n),l=zW(n);return r.jsx(A9,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:s,children:r.jsx(Xe.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});WW.displayName=qW;var HW="TabsTrigger",KW=v.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...i}=e,l=W4(HW,n),o=zW(n),c=XW(l.baseId,s),d=ZW(l.baseId,s),u=s===l.value;return r.jsx(T9,{asChild:!0,...o,focusable:!a,active:u,children:r.jsx(Xe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Le(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?l.onValueChange(s):h.preventDefault()}),onKeyDown:Le(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&l.onValueChange(s)}),onFocus:Le(e.onFocus,()=>{const h=l.activationMode!=="manual";!u&&!a&&h&&l.onValueChange(s)})})})});KW.displayName=HW;var GW="TabsContent",YW=v.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:a,children:i,...l}=e,o=W4(GW,n),c=XW(o.baseId,s),d=ZW(o.baseId,s),u=s===o.value,h=v.useRef(u);return v.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),r.jsx(Vn,{present:a||u,children:({present:f})=>r.jsx(Xe.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});YW.displayName=GW;function XW(e,t){return`${e}-trigger-${t}`}function ZW(e,t){return`${e}-content-${t}`}var WMe=VW,QW=WW,JW=KW,eH=YW;const rn=WMe,Zr=v.forwardRef(({className:e,...t},n)=>r.jsx(QW,{ref:n,className:Ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Zr.displayName=QW.displayName;const We=v.forwardRef(({className:e,...t},n)=>r.jsx(JW,{ref:n,className:Ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));We.displayName=JW.displayName;const He=v.forwardRef(({className:e,...t},n)=>r.jsx(eH,{ref:n,className:Ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));He.displayName=eH.displayName;var H4="Switch",[HMe,Jqe]=zn(H4),[KMe,GMe]=HMe(H4),tH=v.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:d,form:u,...h}=e,[f,m]=v.useState(null),g=jt(t,b=>m(b)),x=v.useRef(!1),w=f?u||!!f.closest("form"):!0,[j=!1,y]=Di({prop:a,defaultProp:i,onChange:d});return r.jsxs(KMe,{scope:n,checked:j,disabled:o,children:[r.jsx(Xe.button,{type:"button",role:"switch","aria-checked":j,"aria-required":l,"data-state":sH(j),"data-disabled":o?"":void 0,disabled:o,value:c,...h,ref:g,onClick:Le(e.onClick,b=>{y(p=>!p),w&&(x.current=b.isPropagationStopped(),x.current||b.stopPropagation())})}),w&&r.jsx(YMe,{control:f,bubbles:!x.current,name:s,value:c,checked:j,required:l,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});tH.displayName=H4;var rH="SwitchThumb",nH=v.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,a=GMe(rH,n);return r.jsx(Xe.span,{"data-state":sH(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});nH.displayName=rH;var YMe=e=>{const{control:t,checked:n,bubbles:s=!0,...a}=e,i=v.useRef(null),l=u1(n),o=Xw(t);return v.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&h){const f=new Event("click",{bubbles:s});h.call(c,n),c.dispatchEvent(f)}},[l,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:i,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function sH(e){return e?"checked":"unchecked"}var aH=tH,XMe=nH;const Je=v.forwardRef(({className:e,...t},n)=>r.jsx(aH,{className:Ee("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:r.jsx(XMe,{className:Ee("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Je.displayName=aH.displayName;var sy=e=>e.type==="checkbox",Od=e=>e instanceof Date,ws=e=>e==null;const iH=e=>typeof e=="object";var cn=e=>!ws(e)&&!Array.isArray(e)&&iH(e)&&!Od(e),lH=e=>cn(e)&&e.target?sy(e.target)?e.target.checked:e.target.value:e,ZMe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,oH=(e,t)=>e.has(ZMe(t)),QMe=e=>{const t=e.constructor&&e.constructor.prototype;return cn(t)&&t.hasOwnProperty("isPrototypeOf")},K4=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Hn(e){let t;const n=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(K4&&(e instanceof Blob||s))&&(n||cn(e)))if(t=n?[]:{},!n&&!QMe(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Hn(e[a]));else return e;return t}var oN=e=>Array.isArray(e)?e.filter(Boolean):[],nn=e=>e===void 0,Ge=(e,t,n)=>{if(!t||!cn(e))return n;const s=oN(t.split(/[,[\].]+?/)).reduce((a,i)=>ws(a)?a:a[i],e);return nn(s)||s===e?nn(e[t])?n:e[t]:s},ua=e=>typeof e=="boolean",G4=e=>/^\w*$/.test(e),cH=e=>oN(e.replace(/["|']|\]/g,"").split(/\.|\[/)),gr=(e,t,n)=>{let s=-1;const a=G4(t)?[t]:cH(t),i=a.length,l=i-1;for(;++s<i;){const o=a[s];let c=n;if(s!==l){const d=e[o];c=cn(d)||Array.isArray(d)?d:isNaN(+a[s+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const $j={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ji={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Bl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},dH=X.createContext(null),cN=()=>X.useContext(dH),JMe=e=>{const{children:t,...n}=e;return X.createElement(dH.Provider,{value:n},t)};var uH=(e,t,n,s=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const l=i;return t._proxyFormState[l]!==ji.all&&(t._proxyFormState[l]=!s||ji.all),n&&(n[l]=!0),e[l]}});return a};function e$e(e){const t=cN(),{control:n=t.control,disabled:s,name:a,exact:i}=e||{},[l,o]=X.useState(n._formState),c=X.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=X.useRef(a);return d.current=a,X.useEffect(()=>n._subscribe({name:d.current,formState:c.current,exact:i,callback:u=>{!s&&o({...n._formState,...u})}}),[n,s,i]),X.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),X.useMemo(()=>uH(l,n,c.current,!1),[l,n])}var vl=e=>typeof e=="string",hH=(e,t,n,s,a)=>vl(e)?(s&&t.watch.add(e),Ge(n,e,a)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),Ge(n,i))):(s&&(t.watchAll=!0),n);function t$e(e){const t=cN(),{control:n=t.control,name:s,defaultValue:a,disabled:i,exact:l}=e||{},o=X.useRef(s),c=X.useRef(a);o.current=s,X.useEffect(()=>n._subscribe({name:o.current,formState:{values:!0},exact:l,callback:h=>!i&&u(hH(o.current,n._names,h.values||n._formValues,!1,c.current))}),[n,i,l]);const[d,u]=X.useState(n._getWatch(s,a));return X.useEffect(()=>n._removeUnmounted()),d}function r$e(e){const t=cN(),{name:n,disabled:s,control:a=t.control,shouldUnregister:i}=e,l=oH(a._names.array,n),o=t$e({control:a,name:n,defaultValue:Ge(a._formValues,n,Ge(a._defaultValues,n,e.defaultValue)),exact:!0}),c=e$e({control:a,name:n,exact:!0}),d=X.useRef(e),u=X.useRef(a.register(n,{...e.rules,value:o,...ua(e.disabled)?{disabled:e.disabled}:{}})),h=X.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ge(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ge(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ge(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ge(c.validatingFields,n)},error:{enumerable:!0,get:()=>Ge(c.errors,n)}}),[c,n]),f=X.useCallback(w=>u.current.onChange({target:{value:lH(w),name:n},type:$j.CHANGE}),[n]),m=X.useCallback(()=>u.current.onBlur({target:{value:Ge(a._formValues,n),name:n},type:$j.BLUR}),[n,a._formValues]),g=X.useCallback(w=>{const j=Ge(a._fields,n);j&&w&&(j._f.ref={focus:()=>w.focus(),select:()=>w.select(),setCustomValidity:y=>w.setCustomValidity(y),reportValidity:()=>w.reportValidity()})},[a._fields,n]),x=X.useMemo(()=>({name:n,value:o,...ua(s)||c.disabled?{disabled:c.disabled||s}:{},onChange:f,onBlur:m,ref:g}),[n,s,c.disabled,f,m,g,o]);return X.useEffect(()=>{const w=a._options.shouldUnregister||i;a.register(n,{...d.current.rules,...ua(d.current.disabled)?{disabled:d.current.disabled}:{}});const j=(y,b)=>{const p=Ge(a._fields,y);p&&p._f&&(p._f.mount=b)};if(j(n,!0),w){const y=Hn(Ge(a._options.defaultValues,n));gr(a._defaultValues,n,y),nn(Ge(a._formValues,n))&&gr(a._formValues,n,y)}return!l&&a.register(n),()=>{(l?w&&!a._state.action:w)?a.unregister(n):j(n,!1)}},[n,a,l,i]),X.useEffect(()=>{a._setDisabledField({disabled:s,name:n})},[s,n,a]),X.useMemo(()=>({field:x,formState:c,fieldState:h}),[x,c,h])}const n$e=e=>e.render(r$e(e));var fH=(e,t,n,s,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:a||!0}}:{},vx=e=>Array.isArray(e)?e:[e],EI=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},MP=e=>ws(e)||!iH(e);function nc(e,t){if(MP(e)||MP(t))return e===t;if(Od(e)&&Od(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(const a of n){const i=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const l=t[a];if(Od(i)&&Od(l)||cn(i)&&cn(l)||Array.isArray(i)&&Array.isArray(l)?!nc(i,l):i!==l)return!1}}return!0}var bs=e=>cn(e)&&!Object.keys(e).length,Y4=e=>e.type==="file",wi=e=>typeof e=="function",Ij=e=>{if(!K4)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},mH=e=>e.type==="select-multiple",X4=e=>e.type==="radio",s$e=e=>X4(e)||sy(e),Wk=e=>Ij(e)&&e.isConnected;function a$e(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=nn(e)?s++:e[t[s++]];return e}function i$e(e){for(const t in e)if(e.hasOwnProperty(t)&&!nn(e[t]))return!1;return!0}function bn(e,t){const n=Array.isArray(t)?t:G4(t)?[t]:cH(t),s=n.length===1?e:a$e(e,n),a=n.length-1,i=n[a];return s&&delete s[i],a!==0&&(cn(s)&&bs(s)||Array.isArray(s)&&i$e(s))&&bn(e,n.slice(0,-1)),e}var pH=e=>{for(const t in e)if(wi(e[t]))return!0;return!1};function Fj(e,t={}){const n=Array.isArray(e);if(cn(e)||n)for(const s in e)Array.isArray(e[s])||cn(e[s])&&!pH(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Fj(e[s],t[s])):ws(e[s])||(t[s]=!0);return t}function xH(e,t,n){const s=Array.isArray(e);if(cn(e)||s)for(const a in e)Array.isArray(e[a])||cn(e[a])&&!pH(e[a])?nn(t)||MP(n[a])?n[a]=Array.isArray(e[a])?Fj(e[a],[]):{...Fj(e[a])}:xH(e[a],ws(t)?{}:t[a],n[a]):n[a]=!nc(e[a],t[a]);return n}var Ep=(e,t)=>xH(e,t,Fj(t));const OI={value:!1,isValid:!1},RI={value:!0,isValid:!0};var gH=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!nn(e[0].attributes.value)?nn(e[0].value)||e[0].value===""?RI:{value:e[0].value,isValid:!0}:RI:OI}return OI},vH=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>nn(e)?e:t?e===""?NaN:e&&+e:n&&vl(e)?new Date(e):s?s(e):e;const DI={isValid:!1,value:null};var yH=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,DI):DI;function MI(e){const t=e.ref;return Y4(t)?t.files:X4(t)?yH(e.refs).value:mH(t)?[...t.selectedOptions].map(({value:n})=>n):sy(t)?gH(e.refs).value:vH(nn(t.value)?e.ref.value:t.value,e)}var l$e=(e,t,n,s)=>{const a={};for(const i of e){const l=Ge(t,i);l&&gr(a,i,l._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:s}},Lj=e=>e instanceof RegExp,Op=e=>nn(e)?e:Lj(e)?e.source:cn(e)?Lj(e.value)?e.value.source:e.value:e,$I=e=>({isOnSubmit:!e||e===ji.onSubmit,isOnBlur:e===ji.onBlur,isOnChange:e===ji.onChange,isOnAll:e===ji.all,isOnTouch:e===ji.onTouched});const II="AsyncFunction";var o$e=e=>!!e&&!!e.validate&&!!(wi(e.validate)&&e.validate.constructor.name===II||cn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===II)),c$e=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),FI=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const yx=(e,t,n,s)=>{for(const a of n||Object.keys(e)){const i=Ge(e,a);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],a)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(yx(o,t))break}else if(cn(o)&&yx(o,t))break}}};function LI(e,t,n){const s=Ge(e,n);if(s||G4(n))return{error:s,name:n};const a=n.split(".");for(;a.length;){const i=a.join("."),l=Ge(t,i),o=Ge(e,i);if(l&&!Array.isArray(l)&&n!==i)return{name:n};if(o&&o.type)return{name:i,error:o};a.pop()}return{name:n}}var d$e=(e,t,n,s)=>{n(e);const{name:a,...i}=e;return bs(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!s||ji.all))},u$e=(e,t,n)=>!e||!t||e===t||vx(e).some(s=>s&&(n?s===t:s.startsWith(t)||t.startsWith(s))),h$e=(e,t,n,s,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(t||e):(n?s.isOnBlur:a.isOnBlur)?!e:(n?s.isOnChange:a.isOnChange)?e:!0,f$e=(e,t)=>!oN(Ge(e,t)).length&&bn(e,t),m$e=(e,t,n)=>{const s=vx(Ge(e,n));return gr(s,"root",t[n]),gr(e,n,s),e},U0=e=>vl(e);function UI(e,t,n="validate"){if(U0(e)||Array.isArray(e)&&e.every(U0)||ua(e)&&!e)return{type:n,message:U0(e)?e:"",ref:t}}var nh=e=>cn(e)&&!Lj(e)?e:{value:e,message:""},BI=async(e,t,n,s,a,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:h,max:f,pattern:m,validate:g,name:x,valueAsNumber:w,mount:j}=e._f,y=Ge(n,x);if(!j||t.has(x))return{};const b=o?o[0]:l,p=M=>{a&&b.reportValidity&&(b.setCustomValidity(ua(M)?"":M||""),b.reportValidity())},N={},k=X4(l),S=sy(l),P=k||S,_=(w||Y4(l))&&nn(l.value)&&nn(y)||Ij(l)&&l.value===""||y===""||Array.isArray(y)&&!y.length,R=fH.bind(null,x,s,N),O=(M,A,T,B=Bl.maxLength,z=Bl.minLength)=>{const U=M?A:T;N[x]={type:M?B:z,message:U,ref:l,...R(M?B:z,U)}};if(i?!Array.isArray(y)||!y.length:c&&(!P&&(_||ws(y))||ua(y)&&!y||S&&!gH(o).isValid||k&&!yH(o).isValid)){const{value:M,message:A}=U0(c)?{value:!!c,message:c}:nh(c);if(M&&(N[x]={type:Bl.required,message:A,ref:b,...R(Bl.required,A)},!s))return p(A),N}if(!_&&(!ws(h)||!ws(f))){let M,A;const T=nh(f),B=nh(h);if(!ws(y)&&!isNaN(y)){const z=l.valueAsNumber||y&&+y;ws(T.value)||(M=z>T.value),ws(B.value)||(A=z<B.value)}else{const z=l.valueAsDate||new Date(y),U=G=>new Date(new Date().toDateString()+" "+G),E=l.type=="time",$=l.type=="week";vl(T.value)&&y&&(M=E?U(y)>U(T.value):$?y>T.value:z>new Date(T.value)),vl(B.value)&&y&&(A=E?U(y)<U(B.value):$?y<B.value:z<new Date(B.value))}if((M||A)&&(O(!!M,T.message,B.message,Bl.max,Bl.min),!s))return p(N[x].message),N}if((d||u)&&!_&&(vl(y)||i&&Array.isArray(y))){const M=nh(d),A=nh(u),T=!ws(M.value)&&y.length>+M.value,B=!ws(A.value)&&y.length<+A.value;if((T||B)&&(O(T,M.message,A.message),!s))return p(N[x].message),N}if(m&&!_&&vl(y)){const{value:M,message:A}=nh(m);if(Lj(M)&&!y.match(M)&&(N[x]={type:Bl.pattern,message:A,ref:l,...R(Bl.pattern,A)},!s))return p(A),N}if(g){if(wi(g)){const M=await g(y,n),A=UI(M,b);if(A&&(N[x]={...A,...R(Bl.validate,A.message)},!s))return p(A.message),N}else if(cn(g)){let M={};for(const A in g){if(!bs(M)&&!s)break;const T=UI(await g[A](y,n),b,A);T&&(M={...T,...R(A,T.message)},p(T.message),s&&(N[x]=M))}if(!bs(M)&&(N[x]={ref:b,...M},!s))return N}}return p(!0),N};const p$e={mode:ji.onSubmit,reValidateMode:ji.onChange,shouldFocusError:!0};function x$e(e={}){let t={...p$e,...e},n={submitCount:0,isDirty:!1,isLoading:wi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const s={};let a=cn(t.defaultValues)||cn(t.values)?Hn(t.values||t.defaultValues)||{}:{},i=t.shouldUnregister?{}:Hn(a),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const f={array:EI(),state:EI()},m=$I(t.mode),g=$I(t.reValidateMode),x=t.criteriaMode===ji.all,w=V=>I=>{clearTimeout(d),d=setTimeout(V,I)},j=async V=>{if(!t.disabled&&(u.isValid||h.isValid||V)){const I=t.resolver?bs((await _()).errors):await O(s,!0);I!==n.isValid&&f.state.next({isValid:I})}},y=(V,I)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((V||Array.from(o.mount)).forEach(J=>{J&&(I?gr(n.validatingFields,J,I):bn(n.validatingFields,J))}),f.state.next({validatingFields:n.validatingFields,isValidating:!bs(n.validatingFields)}))},b=(V,I=[],J,xe,_e=!0,Ae=!0)=>{if(xe&&J&&!t.disabled){if(l.action=!0,Ae&&Array.isArray(Ge(s,V))){const Y=J(Ge(s,V),xe.argA,xe.argB);_e&&gr(s,V,Y)}if(Ae&&Array.isArray(Ge(n.errors,V))){const Y=J(Ge(n.errors,V),xe.argA,xe.argB);_e&&gr(n.errors,V,Y),f$e(n.errors,V)}if((u.touchedFields||h.touchedFields)&&Ae&&Array.isArray(Ge(n.touchedFields,V))){const Y=J(Ge(n.touchedFields,V),xe.argA,xe.argB);_e&&gr(n.touchedFields,V,Y)}(u.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Ep(a,i)),f.state.next({name:V,isDirty:A(V,I),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else gr(i,V,I)},p=(V,I)=>{gr(n.errors,V,I),f.state.next({errors:n.errors})},N=V=>{n.errors=V,f.state.next({errors:n.errors,isValid:!1})},k=(V,I,J,xe)=>{const _e=Ge(s,V);if(_e){const Ae=Ge(i,V,nn(J)?Ge(a,V):J);nn(Ae)||xe&&xe.defaultChecked||I?gr(i,V,I?Ae:MI(_e._f)):z(V,Ae),l.mount&&j()}},S=(V,I,J,xe,_e)=>{let Ae=!1,Y=!1;const Se={name:V};if(!t.disabled){if(!J||xe){(u.isDirty||h.isDirty)&&(Y=n.isDirty,n.isDirty=Se.isDirty=A(),Ae=Y!==Se.isDirty);const te=nc(Ge(a,V),I);Y=!!Ge(n.dirtyFields,V),te?bn(n.dirtyFields,V):gr(n.dirtyFields,V,!0),Se.dirtyFields=n.dirtyFields,Ae=Ae||(u.dirtyFields||h.dirtyFields)&&Y!==!te}if(J){const te=Ge(n.touchedFields,V);te||(gr(n.touchedFields,V,J),Se.touchedFields=n.touchedFields,Ae=Ae||(u.touchedFields||h.touchedFields)&&te!==J)}Ae&&_e&&f.state.next(Se)}return Ae?Se:{}},P=(V,I,J,xe)=>{const _e=Ge(n.errors,V),Ae=(u.isValid||h.isValid)&&ua(I)&&n.isValid!==I;if(t.delayError&&J?(c=w(()=>p(V,J)),c(t.delayError)):(clearTimeout(d),c=null,J?gr(n.errors,V,J):bn(n.errors,V)),(J?!nc(_e,J):_e)||!bs(xe)||Ae){const Y={...xe,...Ae&&ua(I)?{isValid:I}:{},errors:n.errors,name:V};n={...n,...Y},f.state.next(Y)}},_=async V=>{y(V,!0);const I=await t.resolver(i,t.context,l$e(V||o.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return y(V),I},R=async V=>{const{errors:I}=await _(V);if(V)for(const J of V){const xe=Ge(I,J);xe?gr(n.errors,J,xe):bn(n.errors,J)}else n.errors=I;return I},O=async(V,I,J={valid:!0})=>{for(const xe in V){const _e=V[xe];if(_e){const{_f:Ae,...Y}=_e;if(Ae){const Se=o.array.has(Ae.name),te=_e._f&&o$e(_e._f);te&&u.validatingFields&&y([xe],!0);const Te=await BI(_e,o.disabled,i,x,t.shouldUseNativeValidation&&!I,Se);if(te&&u.validatingFields&&y([xe]),Te[Ae.name]&&(J.valid=!1,I))break;!I&&(Ge(Te,Ae.name)?Se?m$e(n.errors,Te,Ae.name):gr(n.errors,Ae.name,Te[Ae.name]):bn(n.errors,Ae.name))}!bs(Y)&&await O(Y,I,J)}}return J.valid},M=()=>{for(const V of o.unMount){const I=Ge(s,V);I&&(I._f.refs?I._f.refs.every(J=>!Wk(J)):!Wk(I._f.ref))&&pe(V)}o.unMount=new Set},A=(V,I)=>!t.disabled&&(V&&I&&gr(i,V,I),!nc(ee(),a)),T=(V,I,J)=>hH(V,o,{...l.mount?i:nn(I)?a:vl(V)?{[V]:I}:I},J,I),B=V=>oN(Ge(l.mount?i:a,V,t.shouldUnregister?Ge(a,V,[]):[])),z=(V,I,J={})=>{const xe=Ge(s,V);let _e=I;if(xe){const Ae=xe._f;Ae&&(!Ae.disabled&&gr(i,V,vH(I,Ae)),_e=Ij(Ae.ref)&&ws(I)?"":I,mH(Ae.ref)?[...Ae.ref.options].forEach(Y=>Y.selected=_e.includes(Y.value)):Ae.refs?sy(Ae.ref)?Ae.refs.length>1?Ae.refs.forEach(Y=>(!Y.defaultChecked||!Y.disabled)&&(Y.checked=Array.isArray(_e)?!!_e.find(Se=>Se===Y.value):_e===Y.value)):Ae.refs[0]&&(Ae.refs[0].checked=!!_e):Ae.refs.forEach(Y=>Y.checked=Y.value===_e):Y4(Ae.ref)?Ae.ref.value="":(Ae.ref.value=_e,Ae.ref.type||f.state.next({name:V,values:Hn(i)})))}(J.shouldDirty||J.shouldTouch)&&S(V,_e,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&oe(V)},U=(V,I,J)=>{for(const xe in I){const _e=I[xe],Ae=`${V}.${xe}`,Y=Ge(s,Ae);(o.array.has(V)||cn(_e)||Y&&!Y._f)&&!Od(_e)?U(Ae,_e,J):z(Ae,_e,J)}},E=(V,I,J={})=>{const xe=Ge(s,V),_e=o.array.has(V),Ae=Hn(I);gr(i,V,Ae),_e?(f.array.next({name:V,values:Hn(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&J.shouldDirty&&f.state.next({name:V,dirtyFields:Ep(a,i),isDirty:A(V,Ae)})):xe&&!xe._f&&!ws(Ae)?U(V,Ae,J):z(V,Ae,J),FI(V,o)&&f.state.next({...n}),f.state.next({name:l.mount?V:void 0,values:Hn(i)})},$=async V=>{l.mount=!0;const I=V.target;let J=I.name,xe=!0;const _e=Ge(s,J),Ae=Y=>{xe=Number.isNaN(Y)||Od(Y)&&isNaN(Y.getTime())||nc(Y,Ge(i,J,Y))};if(_e){let Y,Se;const te=I.type?MI(_e._f):lH(V),Te=V.type===$j.BLUR||V.type===$j.FOCUS_OUT,Yt=!c$e(_e._f)&&!t.resolver&&!Ge(n.errors,J)&&!_e._f.deps||h$e(Te,Ge(n.touchedFields,J),n.isSubmitted,g,m),Nr=FI(J,o,Te);gr(i,J,te),Te?(_e._f.onBlur&&_e._f.onBlur(V),c&&c(0)):_e._f.onChange&&_e._f.onChange(V);const Nt=S(J,te,Te),pr=!bs(Nt)||Nr;if(!Te&&f.state.next({name:J,type:V.type,values:Hn(i)}),Yt)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?Te&&j():Te||j()),pr&&f.state.next({name:J,...Nr?{}:Nt});if(!Te&&Nr&&f.state.next({...n}),t.resolver){const{errors:Ht}=await _([J]);if(Ae(te),xe){const Sa=LI(n.errors,s,J),ra=LI(Ht,s,Sa.name||J);Y=ra.error,J=ra.name,Se=bs(Ht)}}else y([J],!0),Y=(await BI(_e,o.disabled,i,x,t.shouldUseNativeValidation))[J],y([J]),Ae(te),xe&&(Y?Se=!1:(u.isValid||h.isValid)&&(Se=await O(s,!0)));xe&&(_e._f.deps&&oe(_e._f.deps),P(J,Se,Y,Nt))}},G=(V,I)=>{if(Ge(n.errors,I)&&V.focus)return V.focus(),1},oe=async(V,I={})=>{let J,xe;const _e=vx(V);if(t.resolver){const Ae=await R(nn(V)?V:_e);J=bs(Ae),xe=V?!_e.some(Y=>Ge(Ae,Y)):J}else V?(xe=(await Promise.all(_e.map(async Ae=>{const Y=Ge(s,Ae);return await O(Y&&Y._f?{[Ae]:Y}:Y)}))).every(Boolean),!(!xe&&!n.isValid)&&j()):xe=J=await O(s);return f.state.next({...!vl(V)||(u.isValid||h.isValid)&&J!==n.isValid?{}:{name:V},...t.resolver||!V?{isValid:J}:{},errors:n.errors}),I.shouldFocus&&!xe&&yx(s,G,V?_e:o.mount),xe},ee=V=>{const I={...l.mount?i:a};return nn(V)?I:vl(V)?Ge(I,V):V.map(J=>Ge(I,J))},ce=(V,I)=>({invalid:!!Ge((I||n).errors,V),isDirty:!!Ge((I||n).dirtyFields,V),error:Ge((I||n).errors,V),isValidating:!!Ge(n.validatingFields,V),isTouched:!!Ge((I||n).touchedFields,V)}),ye=V=>{V&&vx(V).forEach(I=>bn(n.errors,I)),f.state.next({errors:V?n.errors:{}})},je=(V,I,J)=>{const xe=(Ge(s,V,{_f:{}})._f||{}).ref,_e=Ge(n.errors,V)||{},{ref:Ae,message:Y,type:Se,...te}=_e;gr(n.errors,V,{...te,...I,ref:xe}),f.state.next({name:V,errors:n.errors,isValid:!1}),J&&J.shouldFocus&&xe&&xe.focus&&xe.focus()},$e=(V,I)=>wi(V)?f.state.subscribe({next:J=>V(T(void 0,I),J)}):T(V,I,!0),ke=V=>f.state.subscribe({next:I=>{u$e(V.name,I.name,V.exact)&&d$e(I,V.formState||u,Qe,V.reRenderRoot)&&V.callback({values:{...i},...n,...I})}}).unsubscribe,be=V=>(l.mount=!0,h={...h,...V.formState},ke({...V,formState:h})),pe=(V,I={})=>{for(const J of V?vx(V):o.mount)o.mount.delete(J),o.array.delete(J),I.keepValue||(bn(s,J),bn(i,J)),!I.keepError&&bn(n.errors,J),!I.keepDirty&&bn(n.dirtyFields,J),!I.keepTouched&&bn(n.touchedFields,J),!I.keepIsValidating&&bn(n.validatingFields,J),!t.shouldUnregister&&!I.keepDefaultValue&&bn(a,J);f.state.next({values:Hn(i)}),f.state.next({...n,...I.keepDirty?{isDirty:A()}:{}}),!I.keepIsValid&&j()},le=({disabled:V,name:I})=>{(ua(V)&&l.mount||V||o.disabled.has(I))&&(V?o.disabled.add(I):o.disabled.delete(I))},Ie=(V,I={})=>{let J=Ge(s,V);const xe=ua(I.disabled)||ua(t.disabled);return gr(s,V,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:V}},name:V,mount:!0,...I}}),o.mount.add(V),J?le({disabled:ua(I.disabled)?I.disabled:t.disabled,name:V}):k(V,!0,I.value),{...xe?{disabled:I.disabled||t.disabled}:{},...t.progressive?{required:!!I.required,min:Op(I.min),max:Op(I.max),minLength:Op(I.minLength),maxLength:Op(I.maxLength),pattern:Op(I.pattern)}:{},name:V,onChange:$,onBlur:$,ref:_e=>{if(_e){Ie(V,I),J=Ge(s,V);const Ae=nn(_e.value)&&_e.querySelectorAll&&_e.querySelectorAll("input,select,textarea")[0]||_e,Y=s$e(Ae),Se=J._f.refs||[];if(Y?Se.find(te=>te===Ae):Ae===J._f.ref)return;gr(s,V,{_f:{...J._f,...Y?{refs:[...Se.filter(Wk),Ae,...Array.isArray(Ge(a,V))?[{}]:[]],ref:{type:Ae.type,name:V}}:{ref:Ae}}}),k(V,!1,void 0,Ae)}else J=Ge(s,V,{}),J._f&&(J._f.mount=!1),(t.shouldUnregister||I.shouldUnregister)&&!(oH(o.array,V)&&l.action)&&o.unMount.add(V)}}},ae=()=>t.shouldFocusError&&yx(s,G,o.mount),st=V=>{ua(V)&&(f.state.next({disabled:V}),yx(s,(I,J)=>{const xe=Ge(s,J);xe&&(I.disabled=xe._f.disabled||V,Array.isArray(xe._f.refs)&&xe._f.refs.forEach(_e=>{_e.disabled=xe._f.disabled||V}))},0,!1))},K=(V,I)=>async J=>{let xe;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let _e=Hn(i);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:Ae,values:Y}=await _();n.errors=Ae,_e=Y}else await O(s);if(o.disabled.size)for(const Ae of o.disabled)gr(_e,Ae,void 0);if(bn(n.errors,"root"),bs(n.errors)){f.state.next({errors:{}});try{await V(_e,J)}catch(Ae){xe=Ae}}else I&&await I({...n.errors},J),ae(),setTimeout(ae);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:bs(n.errors)&&!xe,submitCount:n.submitCount+1,errors:n.errors}),xe)throw xe},Me=(V,I={})=>{Ge(s,V)&&(nn(I.defaultValue)?E(V,Hn(Ge(a,V))):(E(V,I.defaultValue),gr(a,V,Hn(I.defaultValue))),I.keepTouched||bn(n.touchedFields,V),I.keepDirty||(bn(n.dirtyFields,V),n.isDirty=I.defaultValue?A(V,Hn(Ge(a,V))):A()),I.keepError||(bn(n.errors,V),u.isValid&&j()),f.state.next({...n}))},de=(V,I={})=>{const J=V?Hn(V):a,xe=Hn(J),_e=bs(V),Ae=_e?a:xe;if(I.keepDefaultValues||(a=J),!I.keepValues){if(I.keepDirtyValues){const Y=new Set([...o.mount,...Object.keys(Ep(a,i))]);for(const Se of Array.from(Y))Ge(n.dirtyFields,Se)?gr(Ae,Se,Ge(i,Se)):E(Se,Ge(Ae,Se))}else{if(K4&&nn(V))for(const Y of o.mount){const Se=Ge(s,Y);if(Se&&Se._f){const te=Array.isArray(Se._f.refs)?Se._f.refs[0]:Se._f.ref;if(Ij(te)){const Te=te.closest("form");if(Te){Te.reset();break}}}}for(const Y of o.mount)E(Y,Ge(Ae,Y))}i=Hn(Ae),f.array.next({values:{...Ae}}),f.state.next({values:{...Ae}})}o={mount:I.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!I.keepIsValid||!!I.keepDirtyValues,l.watch=!!t.shouldUnregister,f.state.next({submitCount:I.keepSubmitCount?n.submitCount:0,isDirty:_e?!1:I.keepDirty?n.isDirty:!!(I.keepDefaultValues&&!nc(V,a)),isSubmitted:I.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:_e?{}:I.keepDirtyValues?I.keepDefaultValues&&i?Ep(a,i):n.dirtyFields:I.keepDefaultValues&&V?Ep(a,V):I.keepDirty?n.dirtyFields:{},touchedFields:I.keepTouched?n.touchedFields:{},errors:I.keepErrors?n.errors:{},isSubmitSuccessful:I.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Be=(V,I)=>de(wi(V)?V(i):V,I),qe=(V,I={})=>{const J=Ge(s,V),xe=J&&J._f;if(xe){const _e=xe.refs?xe.refs[0]:xe.ref;_e.focus&&(_e.focus(),I.shouldSelect&&wi(_e.select)&&_e.select())}},Qe=V=>{n={...n,...V}},rr={control:{register:Ie,unregister:pe,getFieldState:ce,handleSubmit:K,setError:je,_subscribe:ke,_runSchema:_,_getWatch:T,_getDirty:A,_setValid:j,_setFieldArray:b,_setDisabledField:le,_setErrors:N,_getFieldArray:B,_reset:de,_resetDefaultValues:()=>wi(t.defaultValues)&&t.defaultValues().then(V=>{Be(V,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:M,_disableForm:st,_subjects:f,_proxyFormState:u,get _fields(){return s},get _formValues(){return i},get _state(){return l},set _state(V){l=V},get _defaultValues(){return a},get _names(){return o},set _names(V){o=V},get _formState(){return n},get _options(){return t},set _options(V){t={...t,...V}}},subscribe:be,trigger:oe,register:Ie,handleSubmit:K,watch:$e,setValue:E,getValues:ee,reset:Be,resetField:Me,clearErrors:ye,unregister:pe,setError:je,setFocus:qe,getFieldState:ce};return{...rr,formControl:rr}}function Jm(e={}){const t=X.useRef(void 0),n=X.useRef(void 0),[s,a]=X.useState({isDirty:!1,isValidating:!1,isLoading:wi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:wi(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:x$e(e),formState:s},e.formControl&&e.defaultValues&&!wi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const i=t.current.control;return i._options=e,X.useLayoutEffect(()=>i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0}),[i]),X.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),X.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==s.isDirty&&i._subjects.state.next({isDirty:l})}},[i,s.isDirty]),X.useEffect(()=>{e.values&&!nc(e.values,n.current)?(i._reset(e.values,i._options.resetOptions),n.current=e.values,a(l=>({...l}))):i._resetDefaultValues()},[e.values,i]),X.useEffect(()=>{e.errors&&!bs(e.errors)&&i._setErrors(e.errors)},[e.errors,i]),X.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),X.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[e.shouldUnregister,i]),t.current.formState=uH(s,i),t.current}const ep=JMe,bH=v.createContext({}),dt=({...e})=>r.jsx(bH.Provider,{value:{name:e.name},children:r.jsx(n$e,{...e})}),dN=()=>{const e=v.useContext(bH),t=v.useContext(jH),{getFieldState:n,formState:s}=cN(),a=n(e.name,s);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},jH=v.createContext({}),ct=v.forwardRef(({className:e,...t},n)=>{const s=v.useId();return r.jsx(jH.Provider,{value:{id:s},children:r.jsx("div",{ref:n,className:Ee("space-y-2",e),...t})})});ct.displayName="FormItem";const ut=v.forwardRef(({className:e,...t},n)=>{const{error:s,formItemId:a}=dN();return r.jsx(F,{ref:n,className:Ee(s&&"text-destructive",e),htmlFor:a,...t})});ut.displayName="FormLabel";const ft=v.forwardRef(({...e},t)=>{const{error:n,formItemId:s,formDescriptionId:a,formMessageId:i}=dN();return r.jsx(Y8,{ref:t,id:s,"aria-describedby":n?`${a} ${i}`:`${a}`,"aria-invalid":!!n,...e})});ft.displayName="FormControl";const g$e=v.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:s}=dN();return r.jsx("p",{ref:n,id:s,className:Ee("text-sm text-muted-foreground",e),...t})});g$e.displayName="FormDescription";const mt=v.forwardRef(({className:e,children:t,...n},s)=>{const{error:a,formMessageId:i}=dN(),l=a?String((a==null?void 0:a.message)??""):t;return l?r.jsx("p",{ref:s,id:i,className:Ee("text-sm font-medium text-destructive",e),...n,children:l}):null});mt.displayName="FormMessage";const zI=(e,t,n)=>{if(e&&"reportValidity"in e){const s=Ge(n,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},wH=(e,t)=>{for(const n in t.fields){const s=t.fields[n];s&&s.ref&&"reportValidity"in s.ref?zI(s.ref,n,e):s.refs&&s.refs.forEach(a=>zI(a,n,e))}},v$e=(e,t)=>{t.shouldUseNativeValidation&&wH(e,t);const n={};for(const s in e){const a=Ge(t.fields,s),i=Object.assign(e[s]||{},{ref:a&&a.ref});if(y$e(t.names||Object.keys(e),s)){const l=Object.assign({},Ge(n,s));gr(l,"root",i),gr(n,s,l)}else gr(n,s,i)}return n},y$e=(e,t)=>e.some(n=>n.startsWith(t+"."));var b$e=function(e,t){for(var n={};e.length;){var s=e[0],a=s.code,i=s.message,l=s.path.join(".");if(!n[l])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];n[l]={message:o.message,type:o.code}}else n[l]={message:i,type:a};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var c=n[l].types,d=c&&c[s.code];n[l]=fH(l,t,n,a,d?[].concat(d,s.message):s.message)}e.shift()}return n},tp=function(e,t,n){return n===void 0&&(n={}),function(s,a,i){try{return Promise.resolve(function(l,o){try{var c=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(d){return i.shouldUseNativeValidation&&wH({},i),{errors:{},values:n.raw?s:d}})}catch(d){return o(d)}return c&&c.then?c.then(void 0,o):c}(0,function(l){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(l))return{values:{},errors:v$e(b$e(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}},ar;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const l of a)i[l]=l;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),l={};for(const o of i)l[o]=a[o];return e.objectValues(l)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&i.push(l);return i},e.find=(a,i)=>{for(const l of a)if(i(l))return l},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function s(a,i=" | "){return a.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}e.joinValues=s,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(ar||(ar={}));var $P;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})($P||($P={}));const tt=ar.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Gl=e=>{switch(typeof e){case"undefined":return tt.undefined;case"string":return tt.string;case"number":return isNaN(e)?tt.nan:tt.number;case"boolean":return tt.boolean;case"function":return tt.function;case"bigint":return tt.bigint;case"symbol":return tt.symbol;case"object":return Array.isArray(e)?tt.array:e===null?tt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?tt.promise:typeof Map<"u"&&e instanceof Map?tt.map:typeof Set<"u"&&e instanceof Set?tt.set:typeof Date<"u"&&e instanceof Date?tt.date:tt.object;default:return tt.unknown}},Ue=ar.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),j$e=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ja extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},s={_errors:[]},a=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(a);else if(l.code==="invalid_return_type")a(l.returnTypeError);else if(l.code==="invalid_arguments")a(l.argumentsError);else if(l.path.length===0)s._errors.push(n(l));else{let o=s,c=0;for(;c<l.path.length;){const d=l.path[c];c===l.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(n(l))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return a(this),s}static assert(t){if(!(t instanceof ja))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ar.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},s=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):s.push(t(a));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}ja.create=e=>new ja(e);const gm=(e,t)=>{let n;switch(e.code){case Ue.invalid_type:e.received===tt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,ar.jsonStringifyReplacer)}`;break;case Ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${ar.joinValues(e.keys,", ")}`;break;case Ue.invalid_union:n="Invalid input";break;case Ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ar.joinValues(e.options)}`;break;case Ue.invalid_enum_value:n=`Invalid enum value. Expected ${ar.joinValues(e.options)}, received '${e.received}'`;break;case Ue.invalid_arguments:n="Invalid function arguments";break;case Ue.invalid_return_type:n="Invalid function return type";break;case Ue.invalid_date:n="Invalid date";break;case Ue.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:ar.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Ue.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Ue.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Ue.custom:n="Invalid input";break;case Ue.invalid_intersection_types:n="Intersection results could not be merged";break;case Ue.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Ue.not_finite:n="Number must be finite";break;default:n=t.defaultError,ar.assertNever(e)}return{message:n}};let NH=gm;function w$e(e){NH=e}function Uj(){return NH}const Bj=e=>{const{data:t,path:n,errorMaps:s,issueData:a}=e,i=[...n,...a.path||[]],l={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const c=s.filter(d=>!!d).slice().reverse();for(const d of c)o=d(l,{data:t,defaultError:o}).message;return{...a,path:i,message:o}},N$e=[];function Ye(e,t){const n=Uj(),s=Bj({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===gm?void 0:gm].filter(a=>!!a)});e.common.issues.push(s)}class fs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const s=[];for(const a of n){if(a.status==="aborted")return bt;a.status==="dirty"&&t.dirty(),s.push(a.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,n){const s=[];for(const a of n){const i=await a.key,l=await a.value;s.push({key:i,value:l})}return fs.mergeObjectSync(t,s)}static mergeObjectSync(t,n){const s={};for(const a of n){const{key:i,value:l}=a;if(i.status==="aborted"||l.status==="aborted")return bt;i.status==="dirty"&&t.dirty(),l.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||a.alwaysSet)&&(s[i.value]=l.value)}return{status:t.value,value:s}}}const bt=Object.freeze({status:"aborted"}),Ch=e=>({status:"dirty",value:e}),Os=e=>({status:"valid",value:e}),IP=e=>e.status==="aborted",FP=e=>e.status==="dirty",Pu=e=>e.status==="valid",Ig=e=>typeof Promise<"u"&&e instanceof Promise;function zj(e,t,n,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function kH(e,t,n,s,a){if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var lt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(lt||(lt={}));var Hp,Kp;class El{constructor(t,n,s,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=s,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const VI=(e,t)=>{if(Pu(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ja(e.common.issues);return this._error=n,this._error}}};function Ut(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:s,description:a}=e;if(t&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(l,o)=>{var c,d;const{message:u}=e;return l.code==="invalid_enum_value"?{message:u??o.defaultError}:typeof o.data>"u"?{message:(c=u??s)!==null&&c!==void 0?c:o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:(d=u??n)!==null&&d!==void 0?d:o.defaultError}},description:a}}class qt{get description(){return this._def.description}_getType(t){return Gl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Gl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new fs,ctx:{common:t.parent.common,data:t.data,parsedType:Gl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Ig(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const s=this.safeParse(t,n);if(s.success)return s.data;throw s.error}safeParse(t,n){var s;const a={common:{issues:[],async:(s=n==null?void 0:n.async)!==null&&s!==void 0?s:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Gl(t)},i=this._parseSync({data:t,path:a.path,parent:a});return VI(a,i)}"~validate"(t){var n,s;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Gl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return Pu(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((s=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>Pu(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const s=await this.safeParseAsync(t,n);if(s.success)return s.data;throw s.error}async safeParseAsync(t,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Gl(t)},a=this._parse({data:t,path:s.path,parent:s}),i=await(Ig(a)?a:Promise.resolve(a));return VI(s,i)}refine(t,n){const s=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const l=t(a),o=()=>i.addIssue({code:Ue.custom,...s(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(t,n){return this._refinement((s,a)=>t(s)?!0:(a.addIssue(typeof n=="function"?n(s,a):n),!1))}_refinement(t){return new Bi({schema:this,typeName:vt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Cl.create(this,this._def)}nullable(){return qc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Oi.create(this)}promise(){return ym.create(this,this._def)}or(t){return Bg.create([this,t],this._def)}and(t){return zg.create(this,t,this._def)}transform(t){return new Bi({...Ut(this._def),schema:this,typeName:vt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Kg({...Ut(this._def),innerType:this,defaultValue:n,typeName:vt.ZodDefault})}brand(){return new Z4({typeName:vt.ZodBranded,type:this,...Ut(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Gg({...Ut(this._def),innerType:this,catchValue:n,typeName:vt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return ay.create(this,t)}readonly(){return Yg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const k$e=/^c[^\s-]{8,}$/i,S$e=/^[0-9a-z]+$/,C$e=/^[0-9A-HJKMNP-TV-Z]{26}$/i,P$e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_$e=/^[a-z0-9_-]{21}$/i,A$e=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,T$e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,E$e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,O$e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Hk;const R$e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,D$e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,M$e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,$$e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,I$e=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,F$e=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,SH="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",L$e=new RegExp(`^${SH}$`);function CH(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function U$e(e){return new RegExp(`^${CH(e)}$`)}function PH(e){let t=`${SH}T${CH(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function B$e(e,t){return!!((t==="v4"||!t)&&R$e.test(e)||(t==="v6"||!t)&&M$e.test(e))}function z$e(e,t){if(!A$e.test(e))return!1;try{const[n]=e.split("."),s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(s));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function V$e(e,t){return!!((t==="v4"||!t)&&D$e.test(e)||(t==="v6"||!t)&&$$e.test(e))}class ki extends qt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==tt.string){const i=this._getOrReturnCtx(t);return Ye(i,{code:Ue.invalid_type,expected:tt.string,received:i.parsedType}),bt}const s=new fs;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Ye(a,{code:Ue.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Ye(a,{code:Ue.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const l=t.data.length>i.value,o=t.data.length<i.value;(l||o)&&(a=this._getOrReturnCtx(t,a),l?Ye(a,{code:Ue.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&Ye(a,{code:Ue.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")E$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"email",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")Hk||(Hk=new RegExp(O$e,"u")),Hk.test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"emoji",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")P$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"uuid",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")_$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"nanoid",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")k$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"cuid",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")S$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"cuid2",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")C$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"ulid",code:Ue.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Ye(a,{validation:"url",code:Ue.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"regex",code:Ue.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Ye(a,{code:Ue.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Ye(a,{code:Ue.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Ye(a,{code:Ue.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?PH(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{code:Ue.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?L$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{code:Ue.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?U$e(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{code:Ue.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?T$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"duration",code:Ue.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?B$e(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"ip",code:Ue.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?z$e(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"jwt",code:Ue.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?V$e(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"cidr",code:Ue.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?I$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"base64",code:Ue.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?F$e.test(t.data)||(a=this._getOrReturnCtx(t,a),Ye(a,{validation:"base64url",code:Ue.invalid_string,message:i.message}),s.dirty()):ar.assertNever(i);return{status:s.value,value:t.data}}_regex(t,n,s){return this.refinement(a=>t.test(a),{validation:n,code:Ue.invalid_string,...lt.errToObj(s)})}_addCheck(t){return new ki({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...lt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...lt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...lt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...lt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...lt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...lt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...lt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...lt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...lt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...lt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...lt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...lt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...lt.errToObj(t)})}datetime(t){var n,s;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(s=t==null?void 0:t.local)!==null&&s!==void 0?s:!1,...lt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...lt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...lt.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...lt.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...lt.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...lt.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...lt.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...lt.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...lt.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...lt.errToObj(n)})}nonempty(t){return this.min(1,lt.errToObj(t))}trim(){return new ki({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ki({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ki({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ki.create=e=>{var t;return new ki({checks:[],typeName:vt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ut(e)})};function q$e(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,a=n>s?n:s,i=parseInt(e.toFixed(a).replace(".","")),l=parseInt(t.toFixed(a).replace(".",""));return i%l/Math.pow(10,a)}class Bc extends qt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==tt.number){const i=this._getOrReturnCtx(t);return Ye(i,{code:Ue.invalid_type,expected:tt.number,received:i.parsedType}),bt}let s;const a=new fs;for(const i of this._def.checks)i.kind==="int"?ar.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),Ye(s,{code:Ue.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(s=this._getOrReturnCtx(t,s),Ye(s,{code:Ue.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(s=this._getOrReturnCtx(t,s),Ye(s,{code:Ue.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?q$e(t.data,i.value)!==0&&(s=this._getOrReturnCtx(t,s),Ye(s,{code:Ue.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),Ye(s,{code:Ue.not_finite,message:i.message}),a.dirty()):ar.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,lt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,lt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,lt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,lt.toString(n))}setLimit(t,n,s,a){return new Bc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:lt.toString(a)}]})}_addCheck(t){return new Bc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:lt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:lt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:lt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:lt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:lt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:lt.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:lt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:lt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:lt.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ar.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Bc.create=e=>new Bc({checks:[],typeName:vt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ut(e)});class zc extends qt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==tt.bigint)return this._getInvalidInput(t);let s;const a=new fs;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(s=this._getOrReturnCtx(t,s),Ye(s,{code:Ue.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(s=this._getOrReturnCtx(t,s),Ye(s,{code:Ue.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),Ye(s,{code:Ue.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):ar.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Ye(n,{code:Ue.invalid_type,expected:tt.bigint,received:n.parsedType}),bt}gte(t,n){return this.setLimit("min",t,!0,lt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,lt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,lt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,lt.toString(n))}setLimit(t,n,s,a){return new zc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:lt.toString(a)}]})}_addCheck(t){return new zc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:lt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:lt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:lt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:lt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:lt.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}zc.create=e=>{var t;return new zc({checks:[],typeName:vt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ut(e)})};class Fg extends qt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==tt.boolean){const s=this._getOrReturnCtx(t);return Ye(s,{code:Ue.invalid_type,expected:tt.boolean,received:s.parsedType}),bt}return Os(t.data)}}Fg.create=e=>new Fg({typeName:vt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ut(e)});class _u extends qt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==tt.date){const i=this._getOrReturnCtx(t);return Ye(i,{code:Ue.invalid_type,expected:tt.date,received:i.parsedType}),bt}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Ye(i,{code:Ue.invalid_date}),bt}const s=new fs;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Ye(a,{code:Ue.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Ye(a,{code:Ue.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):ar.assertNever(i);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new _u({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:lt.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:lt.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}_u.create=e=>new _u({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:vt.ZodDate,...Ut(e)});class Vj extends qt{_parse(t){if(this._getType(t)!==tt.symbol){const s=this._getOrReturnCtx(t);return Ye(s,{code:Ue.invalid_type,expected:tt.symbol,received:s.parsedType}),bt}return Os(t.data)}}Vj.create=e=>new Vj({typeName:vt.ZodSymbol,...Ut(e)});class Lg extends qt{_parse(t){if(this._getType(t)!==tt.undefined){const s=this._getOrReturnCtx(t);return Ye(s,{code:Ue.invalid_type,expected:tt.undefined,received:s.parsedType}),bt}return Os(t.data)}}Lg.create=e=>new Lg({typeName:vt.ZodUndefined,...Ut(e)});class Ug extends qt{_parse(t){if(this._getType(t)!==tt.null){const s=this._getOrReturnCtx(t);return Ye(s,{code:Ue.invalid_type,expected:tt.null,received:s.parsedType}),bt}return Os(t.data)}}Ug.create=e=>new Ug({typeName:vt.ZodNull,...Ut(e)});class vm extends qt{constructor(){super(...arguments),this._any=!0}_parse(t){return Os(t.data)}}vm.create=e=>new vm({typeName:vt.ZodAny,...Ut(e)});class iu extends qt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Os(t.data)}}iu.create=e=>new iu({typeName:vt.ZodUnknown,...Ut(e)});class To extends qt{_parse(t){const n=this._getOrReturnCtx(t);return Ye(n,{code:Ue.invalid_type,expected:tt.never,received:n.parsedType}),bt}}To.create=e=>new To({typeName:vt.ZodNever,...Ut(e)});class qj extends qt{_parse(t){if(this._getType(t)!==tt.undefined){const s=this._getOrReturnCtx(t);return Ye(s,{code:Ue.invalid_type,expected:tt.void,received:s.parsedType}),bt}return Os(t.data)}}qj.create=e=>new qj({typeName:vt.ZodVoid,...Ut(e)});class Oi extends qt{_parse(t){const{ctx:n,status:s}=this._processInputParams(t),a=this._def;if(n.parsedType!==tt.array)return Ye(n,{code:Ue.invalid_type,expected:tt.array,received:n.parsedType}),bt;if(a.exactLength!==null){const l=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(l||o)&&(Ye(n,{code:l?Ue.too_big:Ue.too_small,minimum:o?a.exactLength.value:void 0,maximum:l?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),s.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Ye(n,{code:Ue.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),s.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Ye(n,{code:Ue.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((l,o)=>a.type._parseAsync(new El(n,l,n.path,o)))).then(l=>fs.mergeArray(s,l));const i=[...n.data].map((l,o)=>a.type._parseSync(new El(n,l,n.path,o)));return fs.mergeArray(s,i)}get element(){return this._def.type}min(t,n){return new Oi({...this._def,minLength:{value:t,message:lt.toString(n)}})}max(t,n){return new Oi({...this._def,maxLength:{value:t,message:lt.toString(n)}})}length(t,n){return new Oi({...this._def,exactLength:{value:t,message:lt.toString(n)}})}nonempty(t){return this.min(1,t)}}Oi.create=(e,t)=>new Oi({type:e,minLength:null,maxLength:null,exactLength:null,typeName:vt.ZodArray,...Ut(t)});function ih(e){if(e instanceof Wr){const t={};for(const n in e.shape){const s=e.shape[n];t[n]=Cl.create(ih(s))}return new Wr({...e._def,shape:()=>t})}else return e instanceof Oi?new Oi({...e._def,type:ih(e.element)}):e instanceof Cl?Cl.create(ih(e.unwrap())):e instanceof qc?qc.create(ih(e.unwrap())):e instanceof Ol?Ol.create(e.items.map(t=>ih(t))):e}class Wr extends qt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=ar.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==tt.object){const d=this._getOrReturnCtx(t);return Ye(d,{code:Ue.invalid_type,expected:tt.object,received:d.parsedType}),bt}const{status:s,ctx:a}=this._processInputParams(t),{shape:i,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof To&&this._def.unknownKeys==="strip"))for(const d in a.data)l.includes(d)||o.push(d);const c=[];for(const d of l){const u=i[d],h=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new El(a,h,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof To){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")o.length>0&&(Ye(a,{code:Ue.unrecognized_keys,keys:o}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of o){const h=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new El(a,h,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const h=await u.key,f=await u.value;d.push({key:h,value:f,alwaysSet:u.alwaysSet})}return d}).then(d=>fs.mergeObjectSync(s,d)):fs.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return lt.errToObj,new Wr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,s)=>{var a,i,l,o;const c=(l=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,s).message)!==null&&l!==void 0?l:s.defaultError;return n.code==="unrecognized_keys"?{message:(o=lt.errToObj(t).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new Wr({...this._def,unknownKeys:"strip"})}passthrough(){return new Wr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Wr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Wr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:vt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Wr({...this._def,catchall:t})}pick(t){const n={};return ar.objectKeys(t).forEach(s=>{t[s]&&this.shape[s]&&(n[s]=this.shape[s])}),new Wr({...this._def,shape:()=>n})}omit(t){const n={};return ar.objectKeys(this.shape).forEach(s=>{t[s]||(n[s]=this.shape[s])}),new Wr({...this._def,shape:()=>n})}deepPartial(){return ih(this)}partial(t){const n={};return ar.objectKeys(this.shape).forEach(s=>{const a=this.shape[s];t&&!t[s]?n[s]=a:n[s]=a.optional()}),new Wr({...this._def,shape:()=>n})}required(t){const n={};return ar.objectKeys(this.shape).forEach(s=>{if(t&&!t[s])n[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof Cl;)i=i._def.innerType;n[s]=i}}),new Wr({...this._def,shape:()=>n})}keyof(){return _H(ar.objectKeys(this.shape))}}Wr.create=(e,t)=>new Wr({shape:()=>e,unknownKeys:"strip",catchall:To.create(),typeName:vt.ZodObject,...Ut(t)});Wr.strictCreate=(e,t)=>new Wr({shape:()=>e,unknownKeys:"strict",catchall:To.create(),typeName:vt.ZodObject,...Ut(t)});Wr.lazycreate=(e,t)=>new Wr({shape:e,unknownKeys:"strip",catchall:To.create(),typeName:vt.ZodObject,...Ut(t)});class Bg extends qt{_parse(t){const{ctx:n}=this._processInputParams(t),s=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const l=i.map(o=>new ja(o.ctx.common.issues));return Ye(n,{code:Ue.invalid_union,unionErrors:l}),bt}if(n.common.async)return Promise.all(s.map(async i=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(a);{let i;const l=[];for(const c of s){const d={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=l.map(c=>new ja(c));return Ye(n,{code:Ue.invalid_union,unionErrors:o}),bt}}get options(){return this._def.options}}Bg.create=(e,t)=>new Bg({options:e,typeName:vt.ZodUnion,...Ut(t)});const ql=e=>e instanceof qg?ql(e.schema):e instanceof Bi?ql(e.innerType()):e instanceof Wg?[e.value]:e instanceof Vc?e.options:e instanceof Hg?ar.objectValues(e.enum):e instanceof Kg?ql(e._def.innerType):e instanceof Lg?[void 0]:e instanceof Ug?[null]:e instanceof Cl?[void 0,...ql(e.unwrap())]:e instanceof qc?[null,...ql(e.unwrap())]:e instanceof Z4||e instanceof Yg?ql(e.unwrap()):e instanceof Gg?ql(e._def.innerType):[];class uN extends qt{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==tt.object)return Ye(n,{code:Ue.invalid_type,expected:tt.object,received:n.parsedType}),bt;const s=this.discriminator,a=n.data[s],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ye(n,{code:Ue.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),bt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,s){const a=new Map;for(const i of n){const l=ql(i.shape[t]);if(!l.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of l){if(a.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);a.set(o,i)}}return new uN({typeName:vt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...Ut(s)})}}function LP(e,t){const n=Gl(e),s=Gl(t);if(e===t)return{valid:!0,data:e};if(n===tt.object&&s===tt.object){const a=ar.objectKeys(t),i=ar.objectKeys(e).filter(o=>a.indexOf(o)!==-1),l={...e,...t};for(const o of i){const c=LP(e[o],t[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(n===tt.array&&s===tt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const l=e[i],o=t[i],c=LP(l,o);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return n===tt.date&&s===tt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class zg extends qt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t),a=(i,l)=>{if(IP(i)||IP(l))return bt;const o=LP(i.value,l.value);return o.valid?((FP(i)||FP(l))&&n.dirty(),{status:n.value,value:o.data}):(Ye(s,{code:Ue.invalid_intersection_types}),bt)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,l])=>a(i,l)):a(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}zg.create=(e,t,n)=>new zg({left:e,right:t,typeName:vt.ZodIntersection,...Ut(n)});class Ol extends qt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==tt.array)return Ye(s,{code:Ue.invalid_type,expected:tt.array,received:s.parsedType}),bt;if(s.data.length<this._def.items.length)return Ye(s,{code:Ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),bt;!this._def.rest&&s.data.length>this._def.items.length&&(Ye(s,{code:Ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...s.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new El(s,l,s.path,o)):null}).filter(l=>!!l);return s.common.async?Promise.all(i).then(l=>fs.mergeArray(n,l)):fs.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Ol({...this._def,rest:t})}}Ol.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ol({items:e,typeName:vt.ZodTuple,rest:null,...Ut(t)})};class Vg extends qt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==tt.object)return Ye(s,{code:Ue.invalid_type,expected:tt.object,received:s.parsedType}),bt;const a=[],i=this._def.keyType,l=this._def.valueType;for(const o in s.data)a.push({key:i._parse(new El(s,o,s.path,o)),value:l._parse(new El(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?fs.mergeObjectAsync(n,a):fs.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,s){return n instanceof qt?new Vg({keyType:t,valueType:n,typeName:vt.ZodRecord,...Ut(s)}):new Vg({keyType:ki.create(),valueType:t,typeName:vt.ZodRecord,...Ut(n)})}}class Wj extends qt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==tt.map)return Ye(s,{code:Ue.invalid_type,expected:tt.map,received:s.parsedType}),bt;const a=this._def.keyType,i=this._def.valueType,l=[...s.data.entries()].map(([o,c],d)=>({key:a._parse(new El(s,o,s.path,[d,"key"])),value:i._parse(new El(s,c,s.path,[d,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return bt;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(d.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const c of l){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return bt;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(d.value,u.value)}return{status:n.value,value:o}}}}Wj.create=(e,t,n)=>new Wj({valueType:t,keyType:e,typeName:vt.ZodMap,...Ut(n)});class Au extends qt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==tt.set)return Ye(s,{code:Ue.invalid_type,expected:tt.set,received:s.parsedType}),bt;const a=this._def;a.minSize!==null&&s.data.size<a.minSize.value&&(Ye(s,{code:Ue.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&s.data.size>a.maxSize.value&&(Ye(s,{code:Ue.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function l(c){const d=new Set;for(const u of c){if(u.status==="aborted")return bt;u.status==="dirty"&&n.dirty(),d.add(u.value)}return{status:n.value,value:d}}const o=[...s.data.values()].map((c,d)=>i._parse(new El(s,c,s.path,d)));return s.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(t,n){return new Au({...this._def,minSize:{value:t,message:lt.toString(n)}})}max(t,n){return new Au({...this._def,maxSize:{value:t,message:lt.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Au.create=(e,t)=>new Au({valueType:e,minSize:null,maxSize:null,typeName:vt.ZodSet,...Ut(t)});class Wh extends qt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==tt.function)return Ye(n,{code:Ue.invalid_type,expected:tt.function,received:n.parsedType}),bt;function s(o,c){return Bj({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Uj(),gm].filter(d=>!!d),issueData:{code:Ue.invalid_arguments,argumentsError:c}})}function a(o,c){return Bj({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Uj(),gm].filter(d=>!!d),issueData:{code:Ue.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof ym){const o=this;return Os(async function(...c){const d=new ja([]),u=await o._def.args.parseAsync(c,i).catch(m=>{throw d.addIssue(s(c,m)),d}),h=await Reflect.apply(l,this,u);return await o._def.returns._def.type.parseAsync(h,i).catch(m=>{throw d.addIssue(a(h,m)),d})})}else{const o=this;return Os(function(...c){const d=o._def.args.safeParse(c,i);if(!d.success)throw new ja([s(c,d.error)]);const u=Reflect.apply(l,this,d.data),h=o._def.returns.safeParse(u,i);if(!h.success)throw new ja([a(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Wh({...this._def,args:Ol.create(t).rest(iu.create())})}returns(t){return new Wh({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,s){return new Wh({args:t||Ol.create([]).rest(iu.create()),returns:n||iu.create(),typeName:vt.ZodFunction,...Ut(s)})}}class qg extends qt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}qg.create=(e,t)=>new qg({getter:e,typeName:vt.ZodLazy,...Ut(t)});class Wg extends qt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Ye(n,{received:n.data,code:Ue.invalid_literal,expected:this._def.value}),bt}return{status:"valid",value:t.data}}get value(){return this._def.value}}Wg.create=(e,t)=>new Wg({value:e,typeName:vt.ZodLiteral,...Ut(t)});function _H(e,t){return new Vc({values:e,typeName:vt.ZodEnum,...Ut(t)})}class Vc extends qt{constructor(){super(...arguments),Hp.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),s=this._def.values;return Ye(n,{expected:ar.joinValues(s),received:n.parsedType,code:Ue.invalid_type}),bt}if(zj(this,Hp)||kH(this,Hp,new Set(this._def.values)),!zj(this,Hp).has(t.data)){const n=this._getOrReturnCtx(t),s=this._def.values;return Ye(n,{received:n.data,code:Ue.invalid_enum_value,options:s}),bt}return Os(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Vc.create(t,{...this._def,...n})}exclude(t,n=this._def){return Vc.create(this.options.filter(s=>!t.includes(s)),{...this._def,...n})}}Hp=new WeakMap;Vc.create=_H;class Hg extends qt{constructor(){super(...arguments),Kp.set(this,void 0)}_parse(t){const n=ar.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==tt.string&&s.parsedType!==tt.number){const a=ar.objectValues(n);return Ye(s,{expected:ar.joinValues(a),received:s.parsedType,code:Ue.invalid_type}),bt}if(zj(this,Kp)||kH(this,Kp,new Set(ar.getValidEnumValues(this._def.values))),!zj(this,Kp).has(t.data)){const a=ar.objectValues(n);return Ye(s,{received:s.data,code:Ue.invalid_enum_value,options:a}),bt}return Os(t.data)}get enum(){return this._def.values}}Kp=new WeakMap;Hg.create=(e,t)=>new Hg({values:e,typeName:vt.ZodNativeEnum,...Ut(t)});class ym extends qt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==tt.promise&&n.common.async===!1)return Ye(n,{code:Ue.invalid_type,expected:tt.promise,received:n.parsedType}),bt;const s=n.parsedType===tt.promise?n.data:Promise.resolve(n.data);return Os(s.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ym.create=(e,t)=>new ym({type:e,typeName:vt.ZodPromise,...Ut(t)});class Bi extends qt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===vt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:s}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:l=>{Ye(s,l),l.fatal?n.abort():n.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const l=a.transform(s.data,i);if(s.common.async)return Promise.resolve(l).then(async o=>{if(n.value==="aborted")return bt;const c=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return c.status==="aborted"?bt:c.status==="dirty"||n.value==="dirty"?Ch(c.value):c});{if(n.value==="aborted")return bt;const o=this._def.schema._parseSync({data:l,path:s.path,parent:s});return o.status==="aborted"?bt:o.status==="dirty"||n.value==="dirty"?Ch(o.value):o}}if(a.type==="refinement"){const l=o=>{const c=a.refinement(o,i);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?bt:(o.status==="dirty"&&n.dirty(),l(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?bt:(o.status==="dirty"&&n.dirty(),l(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Pu(l))return l;const o=a.transform(l.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>Pu(l)?Promise.resolve(a.transform(l.value,i)).then(o=>({status:n.value,value:o})):l);ar.assertNever(a)}}Bi.create=(e,t,n)=>new Bi({schema:e,typeName:vt.ZodEffects,effect:t,...Ut(n)});Bi.createWithPreprocess=(e,t,n)=>new Bi({schema:t,effect:{type:"preprocess",transform:e},typeName:vt.ZodEffects,...Ut(n)});class Cl extends qt{_parse(t){return this._getType(t)===tt.undefined?Os(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Cl.create=(e,t)=>new Cl({innerType:e,typeName:vt.ZodOptional,...Ut(t)});class qc extends qt{_parse(t){return this._getType(t)===tt.null?Os(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}qc.create=(e,t)=>new qc({innerType:e,typeName:vt.ZodNullable,...Ut(t)});class Kg extends qt{_parse(t){const{ctx:n}=this._processInputParams(t);let s=n.data;return n.parsedType===tt.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Kg.create=(e,t)=>new Kg({innerType:e,typeName:vt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ut(t)});class Gg extends qt{_parse(t){const{ctx:n}=this._processInputParams(t),s={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Ig(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ja(s.common.issues)},input:s.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ja(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Gg.create=(e,t)=>new Gg({innerType:e,typeName:vt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ut(t)});class Hj extends qt{_parse(t){if(this._getType(t)!==tt.nan){const s=this._getOrReturnCtx(t);return Ye(s,{code:Ue.invalid_type,expected:tt.nan,received:s.parsedType}),bt}return{status:"valid",value:t.data}}}Hj.create=e=>new Hj({typeName:vt.ZodNaN,...Ut(e)});const W$e=Symbol("zod_brand");class Z4 extends qt{_parse(t){const{ctx:n}=this._processInputParams(t),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class ay extends qt{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?bt:i.status==="dirty"?(n.dirty(),Ch(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const a=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?bt:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:s.path,parent:s})}}static create(t,n){return new ay({in:t,out:n,typeName:vt.ZodPipeline})}}class Yg extends qt{_parse(t){const n=this._def.innerType._parse(t),s=a=>(Pu(a)&&(a.value=Object.freeze(a.value)),a);return Ig(n)?n.then(a=>s(a)):s(n)}unwrap(){return this._def.innerType}}Yg.create=(e,t)=>new Yg({innerType:e,typeName:vt.ZodReadonly,...Ut(t)});function qI(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function AH(e,t={},n){return e?vm.create().superRefine((s,a)=>{var i,l;const o=e(s);if(o instanceof Promise)return o.then(c=>{var d,u;if(!c){const h=qI(t,s),f=(u=(d=h.fatal)!==null&&d!==void 0?d:n)!==null&&u!==void 0?u:!0;a.addIssue({code:"custom",...h,fatal:f})}});if(!o){const c=qI(t,s),d=(l=(i=c.fatal)!==null&&i!==void 0?i:n)!==null&&l!==void 0?l:!0;a.addIssue({code:"custom",...c,fatal:d})}}):vm.create()}const H$e={object:Wr.lazycreate};var vt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(vt||(vt={}));const K$e=(e,t={message:`Input not instance of ${e.name}`})=>AH(n=>n instanceof e,t),TH=ki.create,EH=Bc.create,G$e=Hj.create,Y$e=zc.create,OH=Fg.create,X$e=_u.create,Z$e=Vj.create,Q$e=Lg.create,J$e=Ug.create,e5e=vm.create,t5e=iu.create,r5e=To.create,n5e=qj.create,s5e=Oi.create,a5e=Wr.create,i5e=Wr.strictCreate,l5e=Bg.create,o5e=uN.create,c5e=zg.create,d5e=Ol.create,u5e=Vg.create,h5e=Wj.create,f5e=Au.create,m5e=Wh.create,p5e=qg.create,x5e=Wg.create,g5e=Vc.create,v5e=Hg.create,y5e=ym.create,WI=Bi.create,b5e=Cl.create,j5e=qc.create,w5e=Bi.createWithPreprocess,N5e=ay.create,k5e=()=>TH().optional(),S5e=()=>EH().optional(),C5e=()=>OH().optional(),P5e={string:e=>ki.create({...e,coerce:!0}),number:e=>Bc.create({...e,coerce:!0}),boolean:e=>Fg.create({...e,coerce:!0}),bigint:e=>zc.create({...e,coerce:!0}),date:e=>_u.create({...e,coerce:!0})},_5e=bt;var Ke=Object.freeze({__proto__:null,defaultErrorMap:gm,setErrorMap:w$e,getErrorMap:Uj,makeIssue:Bj,EMPTY_PATH:N$e,addIssueToContext:Ye,ParseStatus:fs,INVALID:bt,DIRTY:Ch,OK:Os,isAborted:IP,isDirty:FP,isValid:Pu,isAsync:Ig,get util(){return ar},get objectUtil(){return $P},ZodParsedType:tt,getParsedType:Gl,ZodType:qt,datetimeRegex:PH,ZodString:ki,ZodNumber:Bc,ZodBigInt:zc,ZodBoolean:Fg,ZodDate:_u,ZodSymbol:Vj,ZodUndefined:Lg,ZodNull:Ug,ZodAny:vm,ZodUnknown:iu,ZodNever:To,ZodVoid:qj,ZodArray:Oi,ZodObject:Wr,ZodUnion:Bg,ZodDiscriminatedUnion:uN,ZodIntersection:zg,ZodTuple:Ol,ZodRecord:Vg,ZodMap:Wj,ZodSet:Au,ZodFunction:Wh,ZodLazy:qg,ZodLiteral:Wg,ZodEnum:Vc,ZodNativeEnum:Hg,ZodPromise:ym,ZodEffects:Bi,ZodTransformer:Bi,ZodOptional:Cl,ZodNullable:qc,ZodDefault:Kg,ZodCatch:Gg,ZodNaN:Hj,BRAND:W$e,ZodBranded:Z4,ZodPipeline:ay,ZodReadonly:Yg,custom:AH,Schema:qt,ZodSchema:qt,late:H$e,get ZodFirstPartyTypeKind(){return vt},coerce:P5e,any:e5e,array:s5e,bigint:Y$e,boolean:OH,date:X$e,discriminatedUnion:o5e,effect:WI,enum:g5e,function:m5e,instanceof:K$e,intersection:c5e,lazy:p5e,literal:x5e,map:h5e,nan:G$e,nativeEnum:v5e,never:r5e,null:J$e,nullable:j5e,number:EH,object:a5e,oboolean:C5e,onumber:S5e,optional:b5e,ostring:k5e,pipeline:N5e,preprocess:w5e,promise:y5e,record:u5e,set:f5e,strictObject:i5e,string:TH,symbol:Z$e,transformer:WI,tuple:d5e,undefined:Q$e,union:l5e,unknown:t5e,void:n5e,NEVER:_5e,ZodIssueCode:Ue,quotelessJson:j$e,ZodError:ja}),Q4="Checkbox",[A5e,eWe]=zn(Q4),[T5e,E5e]=A5e(Q4),RH=v.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:d,form:u,...h}=e,[f,m]=v.useState(null),g=jt(t,p=>m(p)),x=v.useRef(!1),w=f?u||!!f.closest("form"):!0,[j=!1,y]=Di({prop:a,defaultProp:i,onChange:d}),b=v.useRef(j);return v.useEffect(()=>{const p=f==null?void 0:f.form;if(p){const N=()=>y(b.current);return p.addEventListener("reset",N),()=>p.removeEventListener("reset",N)}},[f,y]),r.jsxs(T5e,{scope:n,state:j,disabled:o,children:[r.jsx(Xe.button,{type:"button",role:"checkbox","aria-checked":Dc(j)?"mixed":j,"aria-required":l,"data-state":$H(j),"data-disabled":o?"":void 0,disabled:o,value:c,...h,ref:g,onKeyDown:Le(e.onKeyDown,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:Le(e.onClick,p=>{y(N=>Dc(N)?!0:!N),w&&(x.current=p.isPropagationStopped(),x.current||p.stopPropagation())})}),w&&r.jsx(O5e,{control:f,bubbles:!x.current,name:s,value:c,checked:j,required:l,disabled:o,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Dc(i)?!1:i})]})});RH.displayName=Q4;var DH="CheckboxIndicator",MH=v.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...a}=e,i=E5e(DH,n);return r.jsx(Vn,{present:s||Dc(i.state)||i.state===!0,children:r.jsx(Xe.span,{"data-state":$H(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});MH.displayName=DH;var O5e=e=>{const{control:t,checked:n,bubbles:s=!0,defaultChecked:a,...i}=e,l=v.useRef(null),o=u1(n),c=Xw(t);v.useEffect(()=>{const u=l.current,h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(o!==n&&m){const g=new Event("click",{bubbles:s});u.indeterminate=Dc(n),m.call(u,Dc(n)?!1:n),u.dispatchEvent(g)}},[o,n,s]);const d=v.useRef(Dc(n)?!1:n);return r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...i,tabIndex:-1,ref:l,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Dc(e){return e==="indeterminate"}function $H(e){return Dc(e)?"indeterminate":e?"checked":"unchecked"}var IH=RH,R5e=MH;const dn=v.forwardRef(({className:e,...t},n)=>r.jsx(IH,{ref:n,className:Ee("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(R5e,{className:Ee("flex items-center justify-center text-current"),children:r.jsx(on,{className:"h-4 w-4"})})}));dn.displayName=IH.displayName;const D5e=Ke.object({name:Ke.string().min(1,"Название оффера обязательно"),category:Ke.string().min(1,"Категория обязательна"),description_ru:Ke.string().optional(),description_en:Ke.string().optional(),goals_ru:Ke.string().optional(),goals_en:Ke.string().optional(),logo:Ke.string().optional(),status:Ke.string().default("draft"),payoutType:Ke.string().default("cpa"),currency:Ke.string().default("USD"),landingPages:Ke.array(Ke.object({name:Ke.string().min(1,"Название обязательно"),url:Ke.string().url("Неверный URL"),payoutAmount:Ke.number().min(0,"Сумма должна быть положительной"),currency:Ke.string().default("USD"),geo:Ke.string().optional()})).default([{name:"Основная страница",url:"",payoutAmount:0,currency:"USD",geo:""}]),kpiConditions_ru:Ke.string().optional(),kpiConditions_en:Ke.string().optional(),allowedTrafficSources:Ke.array(Ke.string()).default([]),allowedApps:Ke.array(Ke.string()).default([]),dailyLimit:Ke.number().optional(),monthlyLimit:Ke.number().optional(),antifraudEnabled:Ke.boolean().default(!0),autoApprovePartners:Ke.boolean().default(!1)});function M5e({onSuccess:e}){const{t,i18n:n}=Wt();n.language;const{toast:s}=at(),a=Et(),i=Jm({resolver:tp(D5e),defaultValues:{name:"",category:"",description_ru:"",description_en:"",goals_ru:"",goals_en:"",logo:"",status:"draft",landingPages:[{name:"Основная страница",url:"",payoutAmount:0,currency:"USD",geo:""}],payoutType:"cpa",currency:"USD",kpiConditions_ru:"",kpiConditions_en:"",allowedTrafficSources:[],allowedApps:[],antifraudEnabled:!0,autoApprovePartners:!1}}),l=Oe({mutationFn:async d=>{const u={...d,description:{ru:d.description_ru||"",en:d.description_en||""},goals:{ru:d.goals_ru||"",en:d.goals_en||""},kpiConditions:{ru:d.kpiConditions_ru||"",en:d.kpiConditions_en||""},trafficSources:d.allowedTrafficSources||[],allowedApps:d.allowedApps||[]};return console.log("Sending offer data:",u),await Re("/api/admin/offers","POST",u)},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),s({title:t("success"),description:t("offer_created_successfully")}),e(),i.reset()},onError:d=>{s({title:t("error"),description:d.message||t("failed_to_create_offer"),variant:"destructive"})}}),o=["gambling","finance","nutra","dating","sweepstakes","crypto","e-commerce","mobile","games","software"],c=["facebook_ads","google_ads","tiktok_ads","instagram_ads","snapchat_ads","twitter_ads","pinterest_ads","reddit_ads","linkedin_ads","mytarget","push_traffic","inpage_push","calendar_push","sms_push","outbrain","taboola","mgid","revcontent","adnow","pop_traffic","email_marketing","seo_organic","mobile_app","influencer","teaser_networks","uac","pps","kmc","other"];return r.jsx(ep,{...i,children:r.jsxs("form",{onSubmit:i.handleSubmit(d=>l.mutate(d)),className:"space-y-6",children:[r.jsx(dt,{control:i.control,name:"name",render:({field:d})=>r.jsxs(ct,{children:[r.jsxs(ut,{children:[t("offer_name")," *"]}),r.jsx(ft,{children:r.jsx(ne,{...d,placeholder:t("offer_name_placeholder"),"data-testid":"input-offer-name"})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(dt,{control:i.control,name:"category",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:t("category")}),r.jsxs(fe,{onValueChange:d.onChange,defaultValue:d.value,children:[r.jsx(ft,{children:r.jsx(ue,{"data-testid":"select-category",children:r.jsx(me,{placeholder:t("select_category")})})}),r.jsx(he,{children:o.map(u=>r.jsx(C,{value:u,children:u.charAt(0).toUpperCase()+u.slice(1)},u))})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:"status",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:t("status")}),r.jsxs(fe,{onValueChange:d.onChange,defaultValue:d.value,children:[r.jsx(ft,{children:r.jsx(ue,{"data-testid":"select-status",children:r.jsx(me,{})})}),r.jsxs(he,{children:[r.jsx(C,{value:"draft",children:t("draft")}),r.jsx(C,{value:"pending",children:t("waiting")}),r.jsx(C,{value:"active",children:t("active")}),r.jsx(C,{value:"paused",children:t("paused")})]})]}),r.jsx(mt,{})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{className:"text-base font-medium",children:t("description")}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(dt,{control:i.control,name:"description_ru",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Описание (Русский)"}),r.jsx(ft,{children:r.jsx(gt,{...d,placeholder:"Описание оффера на русском языке",rows:3,"data-testid":"textarea-description-ru"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:"description_en",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Description (English)"}),r.jsx(ft,{children:r.jsx(gt,{...d,placeholder:"Offer description in English",rows:3,"data-testid":"textarea-description-en"})}),r.jsx(mt,{})]})})]})]}),r.jsx(dt,{control:i.control,name:"logo",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:t("offer_logo")}),r.jsx(ft,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(D,{type:"button",variant:"outline",onClick:()=>{const u=document.createElement("input");u.type="file",u.accept="image/*",u.onchange=h=>{var m;const f=(m=h.target.files)==null?void 0:m[0];if(f){if(f.size>2*1024*1024){alert(t("file_size_too_large"));return}const g=new FileReader;g.onload=()=>{d.onChange(g.result)},g.readAsDataURL(f)}},u.click()},"data-testid":"button-choose-logo",children:t("choose_file")}),d.value&&r.jsx("span",{className:"text-sm text-muted-foreground",children:t("file_selected")})]}),d.value&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:d.value,alt:t("logo"),className:"h-16 w-16 object-cover rounded border"}),r.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>d.onChange(""),title:t("remove_logo"),children:t("remove_logo")})]})]})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{className:"text-base font-medium",children:t("landing_pages")}),r.jsxs(D,{type:"button",className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-200",size:"sm",onClick:()=>{const d=i.getValues("landingPages");i.setValue("landingPages",[...d,{name:"",url:"",payoutAmount:0,currency:"USD",geo:""}])},"data-testid":"button-add-landing-page",title:"Добавить новую посадочную страницу",children:[r.jsx(zre,{className:"w-4 h-4 mr-2"}),"Добавить страницу"]})]}),r.jsx("div",{className:"space-y-3",children:i.watch("landingPages").map((d,u)=>r.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 dark:bg-gray-800",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[r.jsx(dt,{control:i.control,name:`landingPages.${u}.name`,render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{className:"text-sm",children:t("landing_name")}),r.jsx(ft,{children:r.jsx(ne,{...h,placeholder:t("main_page"),"data-testid":`input-landing-name-${u}`})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:`landingPages.${u}.url`,render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{className:"text-sm",children:"URL"}),r.jsx(ft,{children:r.jsx(ne,{...h,placeholder:t("url_placeholder"),"data-testid":`input-landing-url-${u}`})}),r.jsx(mt,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[r.jsx(dt,{control:i.control,name:`landingPages.${u}.payoutAmount`,render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{className:"text-sm",children:t("payout_amount")}),r.jsx(ft,{children:r.jsx(ne,{...h,type:"number",step:"0.01",value:h.value||"",onChange:f=>h.onChange(parseFloat(f.target.value)||0),onWheel:f=>f.currentTarget.blur(),placeholder:"0.00","data-testid":`input-landing-payout-${u}`,className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:`landingPages.${u}.currency`,render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{className:"text-sm",children:t("currency")}),r.jsxs(fe,{onValueChange:h.onChange,defaultValue:h.value,children:[r.jsx(ft,{children:r.jsx(ue,{"data-testid":`select-landing-currency-${u}`,children:r.jsx(me,{})})}),r.jsxs(he,{children:[r.jsx(C,{value:"USD",children:"USD"}),r.jsx(C,{value:"EUR",children:"EUR"}),r.jsx(C,{value:"GBP",children:"GBP"}),r.jsx(C,{value:"RUB",children:"RUB"})]})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:`landingPages.${u}.geo`,render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{className:"text-sm",children:t("geo")}),r.jsx(ft,{children:r.jsx(ne,{...h,placeholder:t("geo_placeholder"),"data-testid":`input-landing-geo-${u}`})}),r.jsx(mt,{})]})}),r.jsx("div",{className:"flex justify-end",children:i.watch("landingPages").length>1&&r.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const h=i.getValues("landingPages");i.setValue("landingPages",h.filter((f,m)=>m!==u))},"data-testid":`button-remove-landing-page-${u}`,title:t("remove_landing_page"),children:r.jsx(wr,{className:"w-4 h-4"})})})]})]},u))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(dt,{control:i.control,name:"payoutType",render:({field:d})=>r.jsxs(ct,{children:[r.jsxs(ut,{children:[t("payout_type")," (",t("default"),")"]}),r.jsxs(fe,{onValueChange:d.onChange,defaultValue:d.value,children:[r.jsx(ft,{children:r.jsx(ue,{"data-testid":"select-payout-type",children:r.jsx(me,{})})}),r.jsxs(he,{children:[r.jsx(C,{value:"cpa",children:"CPA - Cost Per Action"}),r.jsx(C,{value:"cps",children:"CPS - Cost Per Sale"}),r.jsx(C,{value:"cpl",children:"CPL - Cost Per Lead"}),r.jsx(C,{value:"cpm",children:"CPM - Cost Per Mile"}),r.jsx(C,{value:"cpc",children:"CPC - Cost Per Click"}),r.jsx(C,{value:"cpi",children:"CPI - Cost Per Install"}),r.jsx(C,{value:"cro",children:"CRO - Cost Per Registration"}),r.jsx(C,{value:"revshare",children:"RevShare - Revenue Share"}),r.jsx(C,{value:"hybrid",children:"Hybrid"}),r.jsx(C,{value:"fixed",children:"Fixed"})]})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:"currency",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:t("default_currency")}),r.jsxs(fe,{onValueChange:d.onChange,defaultValue:d.value,children:[r.jsx(ft,{children:r.jsx(ue,{"data-testid":"select-currency",children:r.jsx(me,{})})}),r.jsxs(he,{children:[r.jsx(C,{value:"USD",children:"USD"}),r.jsx(C,{value:"EUR",children:"EUR"}),r.jsx(C,{value:"GBP",children:"GBP"})]})]}),r.jsx(mt,{})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{className:"text-base font-medium",children:t("kpi_conditions")}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(dt,{control:i.control,name:"kpiConditions_ru",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"KPI условия (Русский)"}),r.jsx(ft,{children:r.jsx(gt,{...d,placeholder:"Условия KPI на русском языке",rows:2,"data-testid":"textarea-kpi-conditions-ru"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:"kpiConditions_en",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"KPI Conditions (English)"}),r.jsx(ft,{children:r.jsx(gt,{...d,placeholder:"KPI conditions in English",rows:2,"data-testid":"textarea-kpi-conditions-en"})}),r.jsx(mt,{})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{className:"text-base font-medium",children:t("offer_goals")}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(dt,{control:i.control,name:"goals_ru",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Цели (Русский)"}),r.jsx(ft,{children:r.jsx(gt,{...d,placeholder:"Цели оффера на русском языке",rows:2,"data-testid":"textarea-goals-ru"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:"goals_en",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Goals (English)"}),r.jsx(ft,{children:r.jsx(gt,{...d,placeholder:"Offer goals in English",rows:2,"data-testid":"textarea-goals-en"})}),r.jsx(mt,{})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{className:"text-base font-medium",children:t("allowed_traffic_sources")}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 max-h-60 overflow-y-auto border rounded-md p-3",children:c.map(d=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(dn,{id:`source-${d}`,checked:i.watch("allowedTrafficSources").includes(d),onCheckedChange:u=>{const h=i.getValues("allowedTrafficSources");u?i.setValue("allowedTrafficSources",[...h,d]):i.setValue("allowedTrafficSources",h.filter(f=>f!==d))}}),r.jsx(F,{htmlFor:`source-${d}`,className:"text-sm",children:d.replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase())})]},d))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{className:"text-base font-medium",children:t("allowed_apps")}),r.jsx(dt,{control:i.control,name:"allowedApps",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ft,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs(fe,{onValueChange:u=>{const h=d.value||[];h.includes(u)||d.onChange([...h,u])},children:[r.jsx(ue,{"data-testid":"select-allowed-apps",children:r.jsx(me,{placeholder:t("select_app")})}),r.jsxs(he,{children:[r.jsx(C,{value:"PWA apps",children:t("pwa_apps")}),r.jsx(C,{value:"WebView apps",children:t("webview_apps")}),r.jsx(C,{value:"Native Android (.apk) apps",children:t("android_apps")}),r.jsx(C,{value:"iOS apps",children:t("ios_apps")}),r.jsx(C,{value:"Mobile apps",children:t("mobile_apps")}),r.jsx(C,{value:"Desktop apps",children:t("desktop_apps")}),r.jsx(C,{value:"Web apps",children:t("web_apps")}),r.jsx(C,{value:"Telegram bots",children:t("telegram_bots")}),r.jsx(C,{value:"Browser extensions",children:t("browser_extensions")}),r.jsx(C,{value:"Chrome extensions",children:t("chrome_extensions")}),r.jsx(C,{value:"Firefox extensions",children:t("firefox_extensions")})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ne,{placeholder:t("custom_app_placeholder"),onKeyDown:u=>{if(u.key==="Enter"){u.preventDefault();const h=u.currentTarget.value.trim();if(h){const f=d.value||[];f.includes(h)||d.onChange([...f,h]),u.currentTarget.value=""}}},"data-testid":"input-custom-app"}),r.jsx(D,{type:"button",variant:"outline",onClick:u=>{const h=u.currentTarget.previousElementSibling,f=h.value.trim();if(f){const m=d.value||[];m.includes(f)||d.onChange([...m,f]),h.value=""}},"data-testid":"button-add-custom-app",children:t("add")})]}),d.value&&d.value.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:d.value.map((u,h)=>r.jsxs(ie,{variant:"secondary",className:"flex items-center gap-1",children:[u,r.jsx(D,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>{const f=d.value||[];d.onChange(f.filter((m,g)=>g!==h))},children:"×"})]},h))})]})}),r.jsx(mt,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(dt,{control:i.control,name:"dailyLimit",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:t("daily_limit")}),r.jsx(ft,{children:r.jsx(ne,{...d,type:"number",value:d.value||"",onChange:u=>d.onChange(u.target.value?parseInt(u.target.value):void 0),onWheel:u=>u.currentTarget.blur(),placeholder:t("unlimited"),"data-testid":"input-daily-limit",className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:i.control,name:"monthlyLimit",render:({field:d})=>r.jsxs(ct,{children:[r.jsx(ut,{children:t("monthly_limit")}),r.jsx(ft,{children:r.jsx(ne,{...d,type:"number",value:d.value||"",onChange:u=>d.onChange(u.target.value?parseInt(u.target.value):void 0),onWheel:u=>u.currentTarget.blur(),placeholder:t("unlimited"),"data-testid":"input-monthly-limit",className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})}),r.jsx(mt,{})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(dt,{control:i.control,name:"antifraudEnabled",render:({field:d})=>r.jsxs(ct,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsx("div",{className:"space-y-0.5",children:r.jsx(ut,{className:"text-base",children:t("antifraud_enabled")})}),r.jsx(ft,{children:r.jsx(Je,{checked:d.value,onCheckedChange:d.onChange,"data-testid":"switch-antifraud"})})]})}),r.jsx(dt,{control:i.control,name:"autoApprovePartners",render:({field:d})=>r.jsxs(ct,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsx("div",{className:"space-y-0.5",children:r.jsx(ut,{className:"text-base",children:t("auto_approve_partners")})}),r.jsx(ft,{children:r.jsx(Je,{checked:d.value,onCheckedChange:d.onChange,"data-testid":"switch-auto-approve"})})]})})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-6",children:[r.jsx(D,{type:"button",variant:"outline",onClick:e,children:t("cancel")}),r.jsx(D,{type:"submit",disabled:l.isPending,"data-testid":"button-submit-offer",children:l.isPending?t("creating"):t("create_offer")})]})]})})}function $5e(){var xe,_e,Ae;const{t:e,i18n:t}=Wt(),n=t.language,{toast:s}=at(),a=Et(),[,i]=Bn(),{isCollapsed:l}=Qs(),[o,c]=v.useState(null),[d,u]=v.useState({}),h=async(Y,Se)=>{try{await navigator.clipboard.writeText(Y),u(te=>({...te,[Se]:!0})),s({title:"URL скопирован",description:"URL успешно скопирован в буфер обмена"}),setTimeout(()=>{u(te=>({...te,[Se]:!1}))},2e3)}catch{s({title:"Ошибка",description:"Не удалось скопировать URL",variant:"destructive"})}},[f,m]=v.useState(null),[g,x]=v.useState(!1),[w,j]=v.useState(!1),[y,b]=v.useState([]),[p,N]=v.useState(!1),[k,S]=v.useState(!1),[P,_]=v.useState(!1),[R,O]=v.useState(!1),[M,A]=v.useState(null),[T,B]=v.useState("");zMe(T,300);const[z,U]=v.useState("all"),[E,$]=v.useState("all"),[G,oe]=v.useState("all"),[ee,ce]=v.useState("all"),{data:ye=[]}=Fe({queryKey:["/api/admin/offers"]}),je=ye.sort((Y,Se)=>new Date(Se.createdAt).getTime()-new Date(Y.createdAt).getTime()).filter(Y=>{var Nt,pr;const Se=!T||Y.name.toLowerCase().includes(T.toLowerCase())||(typeof Y.description=="object"?getMultilingualText(Y.description,n,"").toLowerCase().includes(T.toLowerCase()):(Nt=Y.description)==null?void 0:Nt.toLowerCase().includes(T.toLowerCase()))||((pr=Y.advertiserName)==null?void 0:pr.toLowerCase().includes(T.toLowerCase())),te=!ee||ee==="all"||Y.name===ee,Te=z==="all"||Y.status===z,Yt=E==="all"||Y.category===E,Nr=G==="all"||Y.advertiserId===G;return Se&&te&&Te&&Yt&&Nr}),$e=!ye.length,{data:ke=[]}=Fe({queryKey:["/api/admin/offer-logs",o==null?void 0:o.id],enabled:!!(o!=null&&o.id)}),{data:be}=Fe({queryKey:["/api/admin/offer-stats",o==null?void 0:o.id],enabled:!!(o!=null&&o.id)}),pe=Oe({mutationFn:async({offerId:Y,action:Se,comment:te})=>(await Re(`/api/admin/offers/${Y}/moderate`,"POST",{action:Se,comment:te})).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),N(!1),s({title:e("success"),description:e("operation_completed")})},onError:Y=>{s({title:e("error"),description:Y.message,variant:"destructive"})}}),le=Oe({mutationFn:async Y=>(await Re("/api/admin/offers/bulk-activate","POST",{offerIds:Y})).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),b([]),_(!1),s({title:"Успех",description:`Активировано офферов: ${y.length}`})},onError:Y=>{s({title:"Ошибка",description:Y.message||"Не удалось активировать офферы",variant:"destructive"})}}),Ie=Oe({mutationFn:async Y=>(await Re("/api/admin/offers/bulk-pause","POST",{offerIds:Y})).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),b([]),_(!1),s({title:"Успех",description:`Остановлено офферов: ${y.length}`})},onError:Y=>{s({title:"Ошибка",description:Y.message||"Не удалось остановить офферы",variant:"destructive"})}}),ae=Oe({mutationFn:async Y=>(await Re("/api/admin/offers/bulk-delete","POST",{offerIds:Y})).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),b([]),_(!1),s({title:"Успех",description:`Удалено офферов: ${y.length}`})},onError:Y=>{s({title:"Ошибка",description:Y.message||"Не удалось удалить офферы",variant:"destructive"})}}),st=(Y,Se)=>{b(Se?te=>[...te,Y]:te=>te.filter(Te=>Te!==Y))},K=Y=>{b(Y?je.map(Se=>Se.id):[])};v.useEffect(()=>{_(y.length>0)},[y]);const Me=Oe({mutationFn:async Y=>(await Re("PUT",`/api/admin/offers/${Y.id}`,Y)).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),x(!1),s({title:e("success"),description:e("data_updated")})},onError:Y=>{s({title:e("error"),description:Y.message,variant:"destructive"})}}),de=Oe({mutationFn:async Y=>(await Re(`/api/admin/offers/${Y}`,"DELETE")).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/offers"]}),s({title:"Успех",description:"Оффер успешно удален"})},onError:Y=>{s({title:"Ошибка",description:Y.message||"Не удалось удалить оффер",variant:"destructive"})}}),Be=()=>{try{const Se=(y.length>0?je.filter(Nt=>y.includes(Nt.id)):je).map(Nt=>({id:Nt.id,name:Nt.name,category:Nt.category,description:typeof Nt.description=="object"?getMultilingualText(Nt.description,n,""):Nt.description,status:Nt.status,payoutType:Nt.payoutType,geoPricing:Nt.geoPricing,landingPages:Nt.landingPages,allowedTrafficSources:Nt.trafficSources,allowedApplications:Nt.allowedApps,kycRequired:Nt.kycRequired,isPrivate:Nt.isPrivate,restrictions:Nt.restrictions,createdAt:Nt.createdAt,advertiserId:Nt.advertiserId})),te=JSON.stringify(Se,null,2),Te=new Blob([te],{type:"application/json"}),Yt=URL.createObjectURL(Te),Nr=document.createElement("a");Nr.href=Yt,Nr.download=`offers_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Nr),Nr.click(),document.body.removeChild(Nr),URL.revokeObjectURL(Yt),s({title:"Успех",description:`Экспортировано ${Se.length} офферов`}),b([])}catch{s({title:"Ошибка",description:"Не удалось экспортировать офферы",variant:"destructive"})}},qe=je.length>0&&y.length===je.length,Qe=y.length>0&&y.length<je.length,wt=async Y=>{try{const Se=await Y.text(),te=JSON.parse(Se);if(!Array.isArray(te))throw new Error("Файл должен содержать массив офферов");if((await Re("POST","/api/admin/offers/import",{offers:te})).ok)a.invalidateQueries({queryKey:["/api/admin/offers"]}),j(!1),s({title:"Успех",description:`Импортировано ${te.length} офферов`});else throw new Error("Ошибка импорта на сервере")}catch(Se){s({title:"Ошибка",description:Se.message||"Не удалось импортировать офферы",variant:"destructive"})}},rr=(Y,Se,te,Te)=>{if(Te)return r.jsx(ie,{variant:"secondary",children:e("archived")});if(te)return r.jsx(ie,{variant:"destructive",children:e("blocked")});switch(Y){case"active":return r.jsx(ie,{className:"bg-green-500 hover:bg-green-600 text-white",children:e("active")});case"paused":return r.jsx(ie,{className:"bg-red-500 hover:bg-red-600 text-white",children:e("paused")});case"pending":return r.jsx(ie,{className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:e("pending")});case"draft":return r.jsx(ie,{variant:"outline",children:e("draft")});default:return r.jsx(ie,{variant:"outline",children:e(Y)})}},V=Oe({mutationFn:async({offerId:Y,status:Se})=>await(await Re(`/api/admin/offers/${Y}`,"PUT",{status:Se})).json(),onSuccess:Y=>{a.setQueryData(["/api/admin/offers"],Se=>Se&&Se.map(te=>te.id===Y.id?{...te,status:Y.status}:te)),O(!1),A(null),s({title:e("success"),description:e("status_changed_successfully")})},onError:Y=>{s({title:e("error"),description:e("failed_to_change_status"),variant:"destructive"})}}),I=(Y,Se)=>{o&&pe.mutate({offerId:o.id,action:Y,comment:Se})},J=Y=>{f&&m({...f,...Y})};return $e?r.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx(gn,{title:"",subtitle:""}),r.jsx("main",{className:"flex-1 p-6",children:r.jsx("div",{className:"flex items-center justify-center p-8",children:e("loading")})})]})]}):r.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${l?"lg:ml-16":"lg:ml-64"}`,children:[r.jsx(gn,{title:"",subtitle:""}),r.jsx("main",{className:"flex-1 p-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx("h1",{className:"text-3xl font-bold",children:"OffersManagement"})}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(_t,{open:k,onOpenChange:S,children:[r.jsx(Ja,{asChild:!0,children:r.jsxs(D,{"data-testid":"button-create-offer",title:e("create_offer_button"),children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),e("create_offer_button")]})}),r.jsxs(kt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(St,{children:[r.jsx(Ct,{children:e("create_new_offer")}),r.jsx(Br,{children:e("fill_offer_information")})]}),r.jsx(M5e,{onSuccess:()=>S(!1)})]})]})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(As,{className:"w-5 h-5"}),e("filters")]})}),r.jsx(W,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{placeholder:e("search"),value:T,onChange:Y=>B(Y.target.value),className:"pl-10","data-testid":"input-search-offers"})]}),r.jsxs(fe,{value:ee,onValueChange:ce,children:[r.jsx(ue,{"data-testid":"select-offer-name",title:e("offer_name_filter_tooltip"),children:r.jsx(me,{placeholder:e("all_offers")})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:e("all_offers")}),ye==null?void 0:ye.map(Y=>r.jsx(C,{value:Y.name,children:Y.name},Y.id))]})]}),r.jsxs(fe,{value:z,onValueChange:U,children:[r.jsx(ue,{"data-testid":"select-status-filter",title:e("status_filter_tooltip"),children:r.jsx(me,{placeholder:e("status")})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:e("all_statuses_filter")}),r.jsx(C,{value:"active",children:e("active")}),r.jsx(C,{value:"paused",children:e("paused")}),r.jsx(C,{value:"pending",children:e("waiting")}),r.jsx(C,{value:"draft",children:e("draft")})]})]}),r.jsxs(fe,{value:E,onValueChange:$,children:[r.jsx(ue,{"data-testid":"select-category-filter",title:e("category_filter_tooltip"),children:r.jsx(me,{placeholder:e("category")})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:e("all_categories_filter")}),r.jsx(C,{value:"gambling",children:e("gambling")}),r.jsx(C,{value:"finance",children:e("finance")}),r.jsx(C,{value:"nutra",children:e("nutra")}),r.jsx(C,{value:"dating",children:e("dating")}),r.jsx(C,{value:"sweepstakes",children:e("sweepstakes")}),r.jsx(C,{value:"crypto",children:e("crypto")}),r.jsx(C,{value:"e-commerce",children:e("e_commerce")}),r.jsx(C,{value:"mobile",children:e("mobile")}),r.jsx(C,{value:"games",children:e("games")}),r.jsx(C,{value:"software",children:e("software")})]})]}),r.jsxs(fe,{value:G,onValueChange:oe,children:[r.jsx(ue,{"data-testid":"select-advertiser-filter",title:e("advertiser_filter_tooltip"),children:r.jsx(me,{placeholder:e("advertiser")})}),r.jsx(he,{children:r.jsx(C,{value:"all",children:e("all_advertisers_filter")})})]})]})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(se,{children:[e("offers")," (",je.length,")"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(D,{size:"sm",variant:"outline",onClick:Be,className:"border-green-600 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20","data-testid":"button-export-offers",disabled:je.length===0,title:e("export_csv_tooltip"),children:[r.jsx(br,{className:"w-4 h-4 mr-2"}),y.length>0?`${e("export")} (${y.length})`:e("export")]}),r.jsxs(D,{size:"sm",variant:"outline",onClick:()=>j(!0),className:"border-purple-600 text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/20","data-testid":"button-import-offers",title:e("import_csv_tooltip"),children:[r.jsx(Ba,{className:"w-4 h-4 mr-2"}),e("import")]})]})]})}),r.jsxs(W,{children:[P&&r.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(on,{className:"w-5 h-5 text-blue-600"}),r.jsxs("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[e("selected_offers"),": ",y.length]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(D,{size:"sm",variant:"outline",onClick:()=>le.mutate(y),disabled:le.isPending,className:"border-green-600 text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20",title:e("activate_selected_tooltip"),children:[r.jsx(WA,{className:"w-4 h-4 mr-1"}),e("activate")]}),r.jsxs(D,{size:"sm",variant:"outline",onClick:()=>Ie.mutate(y),disabled:Ie.isPending,className:"border-yellow-600 text-yellow-700 hover:bg-yellow-50 dark:hover:bg-yellow-900/20",title:e("pause_selected_tooltip"),children:[r.jsx(qA,{className:"w-4 h-4 mr-1"}),e("pause")]}),r.jsxs(D,{size:"sm",variant:"outline",onClick:()=>ae.mutate(y),disabled:ae.isPending,className:"border-red-600 text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",title:e("delete_selected_tooltip"),children:[r.jsx(wr,{className:"w-4 h-4 mr-1"}),e("delete")]}),r.jsxs(D,{size:"sm",variant:"ghost",onClick:()=>{b([]),_(!1)},className:"text-gray-600 hover:text-gray-800",title:e("cancel_selection_tooltip"),children:[r.jsx(Kt,{className:"w-4 h-4 mr-1"}),e("cancel")]})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{className:"w-12",children:r.jsx(dn,{checked:qe,onCheckedChange:K,"data-testid":"checkbox-select-all",className:Qe?"data-[state=checked]:bg-blue-600":"",ref:Y=>{Y&&(Y.indeterminate=Qe)}})}),r.jsx(Z,{children:e("offer_name")}),r.jsx(Z,{children:e("advertiser")}),r.jsx(Z,{children:e("category")}),r.jsx(Z,{children:e("payout")}),r.jsx(Z,{children:e("traffic_sources_column")}),r.jsx(Z,{children:e("allowed_apps_column")}),r.jsx(Z,{children:e("status")}),r.jsx(Z,{children:e("created")}),r.jsx(Z,{children:e("actions")})]})}),r.jsx(It,{children:je.map(Y=>{var Se,te,Te,Yt,Nr;return r.jsxs(De,{children:[r.jsx(H,{children:r.jsx(dn,{checked:y.includes(Y.id),onCheckedChange:Nt=>st(Y.id,Nt),"data-testid":`checkbox-select-${Y.id}`})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[Y.logo&&r.jsx("img",{src:Y.logo,alt:Y.name,className:"w-8 h-8 rounded object-cover",onError:Nt=>{Nt.target.style.display="none"}}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium cursor-pointer hover:text-blue-600 hover:underline transition-colors",onClick:()=>i(`/admin/OfferDetails/${Y.id}`),"data-testid":`link-offer-name-${Y.id}`,title:"Открыть детали оффера",children:Y.name}),r.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-48",children:getMultilingualText(Y.description,n,e("not_specified"))})]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{children:Y.advertiserName||"Unknown"}),r.jsx("div",{className:"text-muted-foreground text-xs",children:Y.advertiserId.slice(0,8)})]})}),r.jsxs(H,{children:[(()=>{const pr=(ra=>{switch(ra==null?void 0:ra.toLowerCase()){case"gambling":return"bg-red-100 text-red-800 border-red-200";case"finance":return"bg-green-100 text-green-800 border-green-200";case"nutra":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"dating":return"bg-pink-100 text-pink-800 border-pink-200";case"sweepstakes":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"crypto":return"bg-orange-100 text-orange-800 border-orange-200";case"e-commerce":return"bg-blue-100 text-blue-800 border-blue-200";case"mobile":return"bg-purple-100 text-purple-800 border-purple-200";case"games":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"software":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}})(Y.category),Sa={gambling:e("gambling"),finance:e("finance"),nutra:e("nutra"),dating:e("dating"),sweepstakes:e("sweepstakes"),crypto:e("crypto"),"e-commerce":e("e_commerce"),mobile:e("mobile"),games:e("games"),software:e("software")}[Y.category]||Y.category;return r.jsx(ie,{className:`${pr} border text-xs`,children:Sa})})(),Y.vertical&&r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:Y.vertical})]}),r.jsx(H,{children:Y.landingPages&&Y.landingPages.length>0?r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-bold text-green-600 uppercase mb-1",children:Y.payoutType}),r.jsx("div",{className:`text-sm font-medium ${((Se=Y.landingPages)==null?void 0:Se.length)>=3?"grid grid-cols-2 gap-1":"space-x-1"}`,children:(te=Y.landingPages)==null?void 0:te.map((Nt,pr)=>{var Io,Ft;const Sa={us:"🇺🇸",gb:"🇬🇧",uk:"🇬🇧",it:"🇮🇹",de:"🇩🇪",fr:"🇫🇷",es:"🇪🇸",ca:"🇨🇦",au:"🇦🇺",br:"🇧🇷",mx:"🇲🇽",jp:"🇯🇵",kr:"🇰🇷",in:"🇮🇳",ru:"🇷🇺",cn:"🇨🇳"}[((Io=Nt.geo)==null?void 0:Io.toLowerCase())||""]||"🌍",ra=(Nt.geo||"XX").toUpperCase(),ld={USD:"$",EUR:"€",GBP:"£",RUB:"₽",JPY:"¥",CNY:"¥",KRW:"₩",INR:"₹",CAD:"C$",AUD:"A$",BRL:"R$",MXN:"$"}[Nt.currency]||Nt.currency;return r.jsxs("span",{className:`text-xs ${(((Ft=Y.landingPages)==null?void 0:Ft.length)||0)>=3?"block":"inline-block mr-1"}`,children:[Sa,ra,"-",Nt.payoutAmount,ld]},pr)})})]}):r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-bold text-green-600 uppercase mb-1",children:Y.payoutType}),r.jsxs("div",{className:"font-medium",children:["$",Y.payout]})]})}),r.jsx(H,{children:r.jsx("div",{className:"text-xs space-y-1",children:Y.trafficSources&&Y.trafficSources.length>0?r.jsxs("div",{className:"space-y-1",children:[Array.from({length:Math.ceil(Math.min(Y.trafficSources.length,4)/2)},(Nt,pr)=>r.jsx("div",{className:"flex gap-1",children:Y.trafficSources.slice(pr*2,(pr+1)*2).map((Ht,Sa)=>{const Vu={facebook_ads:"Facebook",google_ads:"Google",instagram_ads:"Instagram",tiktok_ads:"TikTok",youtube_ads:"YouTube",twitter_ads:"Twitter",linkedin_ads:"LinkedIn",pinterest_ads:"Pinterest",snapchat_ads:"Snapchat",reddit_ads:"Reddit",mytarget:"MyTarget",push_traffic:"Push",inpage_push:"InPage",calendar_push:"Calendar",sms_push:"SMS Push",outbrain:"Outbrain",taboola:"Taboola",mgid:"MGID",revcontent:"RevContent",adnow:"AdNow",pop_traffic:"Pop",email_marketing:"Email",seo_organic:"SEO",mobile_app:"Mobile",influencer:"Influencer",teaser_networks:"Teaser",uac:"UAC",pps:"PPS",kmc:"KMC",other:"Other"}[Ht]||Ht,Io=(Ft=>Ft.includes("facebook")||Ft.includes("instagram")?"bg-blue-100 text-blue-800":Ft.includes("google")||Ft.includes("youtube")?"bg-red-100 text-red-800":Ft.includes("tiktok")?"bg-black text-white":Ft.includes("twitter")||Ft.includes("linkedin")?"bg-cyan-100 text-cyan-800":Ft.includes("pinterest")?"bg-red-100 text-red-800":Ft.includes("snapchat")?"bg-yellow-100 text-yellow-800":Ft.includes("push")||Ft.includes("pop")?"bg-orange-100 text-orange-800":Ft.includes("email")||Ft.includes("sms")?"bg-green-100 text-green-800":Ft.includes("outbrain")||Ft.includes("taboola")||Ft.includes("mgid")||Ft.includes("revcontent")||Ft.includes("adnow")?"bg-purple-100 text-purple-800":Ft.includes("seo")||Ft.includes("organic")?"bg-emerald-100 text-emerald-800":Ft.includes("influencer")||Ft.includes("teaser")?"bg-pink-100 text-pink-800":"bg-gray-100 text-gray-800")(Ht);return r.jsx(ie,{className:`text-xs whitespace-nowrap ${Io} border-0`,children:Vu},pr*2+Sa)})},pr)),Y.trafficSources.length>4&&r.jsxs("div",{className:"text-muted-foreground text-xs",children:["+",Y.trafficSources.length-4," ",e("more")]})]}):r.jsx("span",{className:"text-muted-foreground",children:e("not_specified")})})}),r.jsx(H,{children:r.jsx("div",{className:"text-xs space-y-1",children:Y.allowedApps&&Array.isArray(Y.allowedApps)&&Y.allowedApps.length>0?r.jsxs("div",{className:"space-y-1",children:[Array.from({length:Math.ceil(Math.min(((Te=Y.allowedApps)==null?void 0:Te.length)||0,4)/2)},(Nt,pr)=>r.jsx("div",{className:"flex gap-1",children:(Y.allowedApps||[]).slice(pr*2,(pr+1)*2).map((Ht,Sa)=>{const Vu={"PWA apps":"PWA","WebView apps":"WebView","Native Android (.apk) apps":"Android","iOS apps":"iOS","Mobile apps":"Mobile","Desktop apps":"Desktop","Web apps":"Web","Telegram bots":"Telegram","Browser extensions":"Extensions","Chrome extensions":"Chrome Ext","Firefox extensions":"Firefox Ext"}[Ht]||Ht,ld=["bg-blue-100 text-blue-800","bg-green-100 text-green-800","bg-purple-100 text-purple-800","bg-orange-100 text-orange-800"],Io=ld[(pr*2+Sa)%ld.length];return r.jsx(ie,{className:`text-xs whitespace-nowrap ${Io} border-0`,children:Vu},pr*2+Sa)})},pr)),(((Yt=Y.allowedApps)==null?void 0:Yt.length)||0)>4&&r.jsxs("div",{className:"text-muted-foreground text-xs",children:["+",(((Nr=Y.allowedApps)==null?void 0:Nr.length)||0)-4," ",e("more")]})]}):r.jsx("span",{className:"text-muted-foreground",children:e("not_specified")})})}),r.jsx(H,{children:r.jsx("div",{className:"cursor-pointer",onClick:()=>{A(Y),O(!0)},children:rr(Y.status,Y.moderationStatus,Y.isBlocked,Y.isArchived)})}),r.jsx(H,{children:r.jsx("div",{className:"text-sm",children:new Date(Y.createdAt).toLocaleDateString()})}),r.jsx(H,{children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>i(`/admin/OfferDetails/${Y.id}`),className:"h-8 w-8 p-0 hover:bg-blue-50 dark:hover:bg-blue-900/20","data-testid":`button-view-offer-${Y.id}`,title:e("view_details"),children:r.jsx(ir,{className:"w-4 h-4 text-blue-600"})}),r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>{m(Y),x(!0)},className:"h-8 w-8 p-0 hover:bg-green-50 dark:hover:bg-green-900/20","data-testid":`button-edit-offer-${Y.id}`,title:e("edit_offer_action"),children:r.jsx(Ts,{className:"w-4 h-4 text-green-600"})}),r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>{confirm(e("confirm_delete_offer"))&&de.mutate(Y.id)},className:"h-8 w-8 p-0 hover:bg-red-50 dark:hover:bg-red-900/20","data-testid":`button-delete-offer-${Y.id}`,disabled:de.isPending,title:e("delete_offer"),children:r.jsx(wr,{className:"w-4 h-4 text-red-600"})})]})})]},Y.id)})})]})})]})]}),o&&r.jsx(_t,{open:!!o,onOpenChange:()=>c(null),children:r.jsxs(kt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(St,{children:[r.jsx(Ct,{children:o.name}),r.jsx(Br,{children:o.description})]}),r.jsxs(rn,{defaultValue:"details",className:"w-full",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-4",children:[r.jsx(We,{value:"details",children:e("details")}),r.jsx(We,{value:"analytics",children:e("analytics")}),r.jsx(We,{value:"creatives",children:e("creatives")}),r.jsx(We,{value:"history",children:e("history")})]}),r.jsxs(He,{value:"details",className:"space-y-4",children:[o.logo&&r.jsxs("div",{children:[r.jsx(F,{children:e("logo")}),r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:o.logo,alt:o.name,className:"w-16 h-16 rounded object-cover border"})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:e("category")}),r.jsx("div",{className:"font-medium",children:(()=>{const Se=(Yt=>{switch(Yt==null?void 0:Yt.toLowerCase()){case"gambling":return"bg-red-100 text-red-800 border-red-200";case"finance":return"bg-green-100 text-green-800 border-green-200";case"nutra":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"dating":return"bg-pink-100 text-pink-800 border-pink-200";case"sweepstakes":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"crypto":return"bg-orange-100 text-orange-800 border-orange-200";case"e-commerce":return"bg-blue-100 text-blue-800 border-blue-200";case"mobile":return"bg-purple-100 text-purple-800 border-purple-200";case"games":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"software":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}})(o.category),Te={gambling:e("gambling"),finance:e("finance"),nutra:e("nutra"),dating:e("dating"),sweepstakes:e("sweepstakes"),crypto:e("crypto"),"e-commerce":e("e_commerce"),mobile:e("mobile"),games:e("games"),software:e("software")}[o.category]||o.category;return r.jsx(ie,{className:`${Se} border inline-block`,children:Te})})()})]}),r.jsxs("div",{children:[r.jsx(F,{children:e("vertical")}),r.jsx("div",{className:"font-medium",children:o.vertical||"N/A"})]}),r.jsxs("div",{children:[r.jsx(F,{children:e("payout")}),r.jsxs("div",{className:"font-medium",children:["$",o.payout," ",o.payoutType]})]}),r.jsxs("div",{children:[r.jsx(F,{children:e("countries")}),r.jsx("div",{className:"font-medium",children:Array.isArray(o.countries)&&o.countries.length>0?o.countries.join(", "):e("all_countries")})]})]}),o.landingPages&&o.landingPages.length>0&&r.jsxs("div",{children:[r.jsx(F,{children:"Лендинги и цены по гео"}),r.jsx("div",{className:"mt-2 space-y-2",children:o.landingPages.map((Y,Se)=>{var pr;const Te={us:"🇺🇸",gb:"🇬🇧",uk:"🇬🇧",it:"🇮🇹",de:"🇩🇪",fr:"🇫🇷",es:"🇪🇸",ca:"🇨🇦",au:"🇦🇺",br:"🇧🇷",mx:"🇲🇽",jp:"🇯🇵",kr:"🇰🇷",in:"🇮🇳",ru:"🇷🇺",cn:"🇨🇳"}[((pr=Y.geo)==null?void 0:pr.toLowerCase())||""]||"🌍",Yt=(Y.geo||"XX").toUpperCase(),Nt={USD:"$",EUR:"€",GBP:"£",RUB:"₽",JPY:"¥",CNY:"¥",KRW:"₩",INR:"₹",CAD:"C$",AUD:"A$",BRL:"R$",MXN:"$"}[Y.currency]||Y.currency;return r.jsx("div",{className:"border rounded p-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"font-medium flex items-center gap-2",children:[r.jsxs("span",{children:[Te," ",Yt]}),r.jsx("span",{children:Y.name})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx("span",{className:"break-all",children:Y.url}),r.jsx(D,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100 hover:text-blue-600",onClick:()=>h(Y.url,`modal-landing-${Se}`),title:"Копировать URL",children:d[`modal-landing-${Se}`]?r.jsx(on,{className:"w-4 h-4 text-green-600"}):r.jsx(Yr,{className:"w-4 h-4 text-blue-600"})})]})]}),r.jsxs("div",{className:"text-right ml-4",children:[r.jsxs("div",{className:"font-medium text-lg",children:[Te,Yt,"-",Y.payoutAmount,Nt]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:Y.currency})]})]})},Se)})})]}),r.jsxs("div",{children:[r.jsx(F,{children:e("landing_page")}),r.jsx("div",{className:"font-medium break-all",children:o.landingPageUrl||"Не указано"})]}),o.trafficSources&&o.trafficSources.length>0&&r.jsxs("div",{children:[r.jsx(F,{children:"Разрешенные источники трафика"}),r.jsx("div",{className:"mt-2 space-y-2",children:Array.from({length:Math.ceil(o.trafficSources.length/2)},(Y,Se)=>r.jsx("div",{className:"flex gap-2",children:o.trafficSources.slice(Se*2,(Se+1)*2).map((te,Te)=>{const Nr={facebook_ads:"Facebook Ads",google_ads:"Google Ads",instagram_ads:"Instagram Ads",tiktok_ads:"TikTok Ads",youtube_ads:"YouTube Ads",twitter_ads:"Twitter Ads",linkedin_ads:"LinkedIn Ads",pinterest_ads:"Pinterest Ads",snapchat_ads:"Snapchat Ads",reddit_ads:"Reddit Ads",mytarget:"MyTarget",push_traffic:"Push трафик",inpage_push:"InPage Push",calendar_push:"Calendar Push",sms_push:"SMS Push",outbrain:"Outbrain",taboola:"Taboola",mgid:"MGID",revcontent:"RevContent",adnow:"AdNow",pop_traffic:"Pop трафик",email_marketing:"Email маркетинг",seo_organic:"SEO органический",mobile_app:"Мобильные приложения",influencer:"Инфлюенсер маркетинг",teaser_networks:"Тизерные сети",uac:"UAC",pps:"PPS",kmc:"KMC",other:"Другое"}[te]||te,pr=(Ht=>Ht.includes("facebook")||Ht.includes("instagram")?"bg-blue-100 text-blue-800 border-blue-200":Ht.includes("google")||Ht.includes("youtube")?"bg-red-100 text-red-800 border-red-200":Ht.includes("tiktok")?"bg-gray-800 text-white border-gray-900":Ht.includes("twitter")||Ht.includes("linkedin")?"bg-cyan-100 text-cyan-800 border-cyan-200":Ht.includes("pinterest")?"bg-red-100 text-red-800 border-red-200":Ht.includes("snapchat")?"bg-yellow-100 text-yellow-800 border-yellow-200":Ht.includes("push")||Ht.includes("pop")?"bg-orange-100 text-orange-800 border-orange-200":Ht.includes("email")||Ht.includes("sms")?"bg-green-100 text-green-800 border-green-200":Ht.includes("outbrain")||Ht.includes("taboola")||Ht.includes("mgid")||Ht.includes("revcontent")||Ht.includes("adnow")?"bg-purple-100 text-purple-800 border-purple-200":Ht.includes("seo")||Ht.includes("organic")?"bg-emerald-100 text-emerald-800 border-emerald-200":Ht.includes("influencer")||Ht.includes("teaser")?"bg-pink-100 text-pink-800 border-pink-200":Ht.includes("mytarget")||Ht.includes("reddit")?"bg-indigo-100 text-indigo-800 border-indigo-200":"bg-gray-100 text-gray-800 border-gray-200")(te);return r.jsx(ie,{className:`${pr} border`,children:Nr},Se*2+Te)})},Se))})]}),o.allowedApps&&Array.isArray(o.allowedApps)&&o.allowedApps.length>0&&r.jsxs("div",{children:[r.jsx(F,{children:"Разрешенные приложения"}),r.jsx("div",{className:"mt-2 space-y-2",children:Array.from({length:Math.ceil((((xe=o.allowedApps)==null?void 0:xe.length)||0)/2)},(Y,Se)=>r.jsx("div",{className:"flex gap-2",children:(o.allowedApps||[]).slice(Se*2,(Se+1)*2).map((te,Te)=>{const Nr={"PWA apps":"PWA приложения","WebView apps":"WebView приложения","Native Android (.apk) apps":"Android приложения (.apk)","iOS apps":"iOS приложения","Mobile apps":"Мобильные приложения","Desktop apps":"Настольные приложения","Web apps":"Веб приложения","Telegram bots":"Telegram боты","Browser extensions":"Браузерные расширения","Chrome extensions":"Расширения Chrome","Firefox extensions":"Расширения Firefox"}[te]||te,Nt=["bg-blue-100 text-blue-800 border-blue-200","bg-green-100 text-green-800 border-green-200","bg-purple-100 text-purple-800 border-purple-200","bg-orange-100 text-orange-800 border-orange-200","bg-red-100 text-red-800 border-red-200","bg-indigo-100 text-indigo-800 border-indigo-200"],pr=Nt[(Se*2+Te)%Nt.length];return r.jsx(ie,{className:`${pr} border`,children:Nr},Se*2+Te)})},Se))})]}),r.jsxs("div",{children:[r.jsx(F,{children:e("restrictions")}),r.jsx("div",{className:"font-medium",children:o.restrictions||e("no_restrictions")})]})]}),r.jsx(He,{value:"analytics",className:"space-y-4",children:be?r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs(q,{children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:e("clicks")})}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold",children:(be==null?void 0:be.clicks)||0})})]}),r.jsxs(q,{children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:e("conversions")})}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold",children:(be==null?void 0:be.conversions)||0})})]}),r.jsxs(q,{children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:e("cr")})}),r.jsx(W,{children:r.jsxs("div",{className:"text-2xl font-bold",children:[(be==null?void 0:be.cr)||"0.00","%"]})})]}),r.jsxs(q,{children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:e("epc")})}),r.jsx(W,{children:r.jsxs("div",{className:"text-2xl font-bold",children:["$",(be==null?void 0:be.epc)||"0.00"]})})]})]}):r.jsx("div",{className:"text-center py-8",children:e("no_data")})}),r.jsx(He,{value:"creatives",className:"space-y-4",children:r.jsx("div",{className:"text-center py-8",children:e("no_creatives_available")})}),r.jsx(He,{value:"history",className:"space-y-4",children:Array.isArray(ke)&&ke.length>0?r.jsx("div",{className:"space-y-2",children:ke.map(Y=>r.jsx("div",{className:"border rounded p-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:Y.action}),Y.fieldChanged&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:[Y.fieldChanged,": ",Y.oldValue," → ",Y.newValue]}),Y.comment&&r.jsx("div",{className:"text-sm mt-1",children:Y.comment})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("div",{children:Y.userName}),r.jsx("div",{children:new Date(Y.createdAt).toLocaleString()})]})]})},Y.id))}):r.jsx("div",{className:"text-center py-8",children:e("no_history_available")})})]})]})}),f&&r.jsx(_t,{open:g,onOpenChange:Y=>{x(Y),Y||m(null)},children:r.jsxs(kt,{className:"max-w-6xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(St,{children:[r.jsxs(Ct,{children:["Редактировать оффер: ",f.name]}),r.jsx(Br,{children:"Полное редактирование всех параметров оффера"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Название оффера"}),r.jsx(ne,{defaultValue:f.name,onChange:Y=>J({name:Y.target.value}),placeholder:"Введите название оффера"})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Категория"}),r.jsxs(fe,{defaultValue:f.category,onValueChange:Y=>J({category:Y}),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"gambling",children:"Гемблинг"}),r.jsx(C,{value:"finance",children:"Финансы"}),r.jsx(C,{value:"nutra",children:"Нутра"}),r.jsx(C,{value:"dating",children:"Знакомства"}),r.jsx(C,{value:"sweepstakes",children:"Лотереи"}),r.jsx(C,{value:"crypto",children:"Криптовалюты"}),r.jsx(C,{value:"e-commerce",children:"E-commerce"}),r.jsx(C,{value:"mobile",children:"Мобильные"}),r.jsx(C,{value:"gaming",children:"Игры"}),r.jsx(C,{value:"software",children:"ПО"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Описание"}),r.jsx(gt,{defaultValue:f.description,onChange:Y=>J({description:Y.target.value}),placeholder:"Описание оффера",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Статус"}),r.jsxs(fe,{defaultValue:f.status,onValueChange:Y=>J({status:Y}),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"active",children:"Активен"}),r.jsx(C,{value:"paused",children:"Остановлен"}),r.jsx(C,{value:"pending",children:"Ожидает"}),r.jsx(C,{value:"draft",children:"Черновик"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Тип выплаты"}),r.jsxs(fe,{defaultValue:f.payoutType,onValueChange:Y=>J({payoutType:Y}),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"CPA",children:"CPA"}),r.jsx(C,{value:"CPS",children:"CPS"}),r.jsx(C,{value:"CPL",children:"CPL"}),r.jsx(C,{value:"CRL",children:"CRL"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Валюта"}),r.jsxs(fe,{defaultValue:f.currency,onValueChange:Y=>J({currency:Y}),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"USD",children:"USD"}),r.jsx(C,{value:"EUR",children:"EUR"}),r.jsx(C,{value:"RUB",children:"RUB"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"URL логотипа"}),r.jsx(ne,{defaultValue:f.logo||"",onChange:Y=>J({logo:Y.target.value}),placeholder:"https://example.com/logo.png"})]}),r.jsxs("div",{children:[r.jsx(F,{children:"KPI условия"}),r.jsx(gt,{defaultValue:f.kpiConditions||"",onChange:Y=>J({kpiConditions:Y.target.value}),placeholder:"Условия достижения KPI",rows:2})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Дневной лимит"}),r.jsx(ne,{type:"number",defaultValue:((_e=f.dailyLimit)==null?void 0:_e.toString())||"",onChange:Y=>J({dailyLimit:Y.target.value?parseInt(Y.target.value):void 0}),placeholder:"Без ограничений"})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Месячный лимит"}),r.jsx(ne,{type:"number",defaultValue:((Ae=f.monthlyLimit)==null?void 0:Ae.toString())||"",onChange:Y=>J({monthlyLimit:Y.target.value?parseInt(Y.target.value):void 0}),placeholder:"Без ограничений"})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Разрешенные источники трафика"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:["Facebook","Google","TikTok","Instagram","YouTube","Twitter","LinkedIn","Snapchat","Pinterest"].map(Y=>{var Se;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`traffic-${Y}`,checked:((Se=f.trafficSources)==null?void 0:Se.includes(Y))||!1,onChange:te=>{const Te=f.trafficSources||[],Yt=te.target.checked?[...Te,Y]:Te.filter(Nr=>Nr!==Y);J({trafficSources:Yt})},className:"rounded border-gray-300"}),r.jsx("label",{htmlFor:`traffic-${Y}`,className:"text-sm",children:Y})]},Y)})})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Разрешенные приложения"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:["Мобильные приложения","Веб-приложения","Telegram боты","Браузерные расширения","Desktop приложения","PWA"].map(Y=>{var Se;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`app-${Y}`,checked:((Se=f.allowedApps)==null?void 0:Se.includes(Y))||!1,onChange:te=>{const Te=f.allowedApps||[],Yt=te.target.checked?[...Te,Y]:Te.filter(Nr=>Nr!==Y);J({allowedApps:Yt})},className:"rounded border-gray-300"}),r.jsx("label",{htmlFor:`app-${Y}`,className:"text-sm",children:Y})]},Y)})})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Landing Pages"}),r.jsxs("div",{className:"space-y-3 mt-2",children:[(f.landingPages||[]).map((Y,Se)=>r.jsxs("div",{className:"space-y-3 p-3 border rounded",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(ne,{placeholder:"Название",defaultValue:Y.name,onChange:te=>{const Te=[...f.landingPages||[]];Te[Se]={...Y,name:te.target.value},J({landingPages:Te})}}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ne,{placeholder:"URL",defaultValue:Y.url,className:"flex-1",onChange:te=>{const Te=[...f.landingPages||[]];Te[Se]={...Y,url:te.target.value},J({landingPages:Te})}}),Y.url&&r.jsx(D,{type:"button",variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100 hover:text-blue-600",onClick:()=>h(Y.url,`edit-landing-${Se}`),title:"Копировать URL",children:d[`edit-landing-${Se}`]?r.jsx(on,{className:"w-4 h-4 text-green-600"}):r.jsx(Yr,{className:"w-4 h-4 text-blue-600"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(ne,{type:"number",placeholder:"Сумма",defaultValue:Y.payoutAmount.toString(),onChange:te=>{const Te=[...f.landingPages||[]];Te[Se]={...Y,payoutAmount:parseFloat(te.target.value)||0},J({landingPages:Te})}}),r.jsx(ne,{placeholder:"GEO",defaultValue:Y.geo,onChange:te=>{const Te=[...f.landingPages||[]];Te[Se]={...Y,geo:te.target.value},J({landingPages:Te})}})]})]},Se)),r.jsx(D,{type:"button",variant:"outline",onClick:()=>{const Y=[...f.landingPages||[],{name:"",url:"",payoutAmount:0,currency:f.currency,geo:""}];J({landingPages:Y})},title:"Добавить новую лендинг страницу",children:"Добавить Landing Page"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Ограничения"}),r.jsx(gt,{defaultValue:f.restrictions||"",onChange:Y=>J({restrictions:Y.target.value}),placeholder:"Ограничения по траффику",rows:2})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Комментарий модерации"}),r.jsx(gt,{defaultValue:f.moderationComment||"",onChange:Y=>J({moderationComment:Y.target.value}),placeholder:"Комментарий модератора",rows:2})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-base",children:"Защита от фрода"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Включить автоматическую защиту от мошенничества"})]}),r.jsx(Je,{defaultChecked:f.antifraudEnabled||!1,onCheckedChange:Y=>J({antifraudEnabled:Y})})]}),r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-base",children:"Автоодобрение партнеров"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Автоматически одобрять новых партнеров"})]}),r.jsx(Je,{defaultChecked:f.autoApprovePartners||!1,onCheckedChange:Y=>J({autoApprovePartners:Y})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-base",children:"KYC обязателен"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Требовать верификацию партнеров"})]}),r.jsx(Je,{defaultChecked:f.kycRequired||!1,onCheckedChange:Y=>J({kycRequired:Y})})]}),r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-base",children:"Приватный оффер"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Скрыть от публичного просмотра"})]}),r.jsx(Je,{defaultChecked:f.isPrivate||!1,onCheckedChange:Y=>J({isPrivate:Y})})]}),r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-base",children:"Smartlink"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Включить умную маршрутизацию"})]}),r.jsx(Je,{defaultChecked:f.smartlinkEnabled||!1,onCheckedChange:Y=>J({smartlinkEnabled:Y})})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(D,{variant:"outline",onClick:()=>x(!1),children:"Отмена"}),r.jsx(D,{onClick:()=>{f&&Me.mutate(f)},disabled:Me.isPending,children:Me.isPending?"Сохранение...":"Сохранить изменения"})]})]})]})}),M&&r.jsx(_t,{open:R,onOpenChange:O,children:r.jsxs(kt,{children:[r.jsxs(St,{children:[r.jsx(Ct,{children:e("change_offer_status")}),r.jsxs(Br,{children:[e("select_new_status_for"),' "',M.name,'"']})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(D,{variant:M.status==="active"?"default":"outline",className:M.status==="active"?"bg-green-500 hover:bg-green-600":"border-green-500 text-green-600 hover:bg-green-50",onClick:()=>V.mutate({offerId:M.id,status:"active"}),disabled:V.isPending,"data-testid":"button-status-active",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e("active")]})}),r.jsx(D,{variant:M.status==="paused"?"default":"outline",className:M.status==="paused"?"bg-red-500 hover:bg-red-600":"border-red-500 text-red-600 hover:bg-red-50",onClick:()=>V.mutate({offerId:M.id,status:"paused"}),disabled:V.isPending,"data-testid":"button-status-paused",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e("paused")]})}),r.jsx(D,{variant:M.status==="pending"?"default":"outline",className:M.status==="pending"?"bg-yellow-500 hover:bg-yellow-600":"border-yellow-500 text-yellow-600 hover:bg-yellow-50",onClick:()=>V.mutate({offerId:M.id,status:"pending"}),disabled:V.isPending,"data-testid":"button-status-pending",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e("pending")]})}),r.jsx(D,{variant:M.status==="draft"?"default":"outline",onClick:()=>V.mutate({offerId:M.id,status:"draft"}),disabled:V.isPending,"data-testid":"button-status-draft",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),e("draft")]})})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[e("current_status"),": ",r.jsx("strong",{children:e(M.status)})]})]})]})}),o&&r.jsx(_t,{open:p,onOpenChange:N,children:r.jsxs(kt,{children:[r.jsxs(St,{children:[r.jsx(Ct,{children:e("moderate_offer")}),r.jsx(Br,{children:o.name})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(D,{onClick:()=>I("approve"),className:"flex-1",disabled:pe.isPending,"data-testid":"button-approve-offer",children:[r.jsx(ur,{className:"w-4 h-4 mr-2"}),e("approve")]}),r.jsxs(D,{variant:"destructive",onClick:()=>I("reject"),className:"flex-1",disabled:pe.isPending,"data-testid":"button-reject-offer",children:[r.jsx(Kt,{className:"w-4 h-4 mr-2"}),e("reject")]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(D,{variant:"outline",onClick:()=>I("needs_revision"),className:"flex-1",disabled:pe.isPending,"data-testid":"button-needs-revision-offer",children:[r.jsx(Ka,{className:"w-4 h-4 mr-2"}),e("needs_revision")]}),r.jsxs(D,{variant:"outline",onClick:()=>I("archive"),className:"flex-1",disabled:pe.isPending,"data-testid":"button-archive-offer",children:[r.jsx(BA,{className:"w-4 h-4 mr-2"}),e("archive")]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"moderationComment",children:e("comment")}),r.jsx(gt,{id:"moderationComment",placeholder:e("enter_moderation_comment"),"data-testid":"textarea-moderation-comment"})]})]})]})}),r.jsx(_t,{open:w,onOpenChange:j,children:r.jsxs(kt,{children:[r.jsxs(St,{children:[r.jsx(Ct,{children:"Импорт офферов"}),r.jsx(Br,{children:"Выберите JSON файл с офферами для импорта"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"importFile",children:"Файл офферов (JSON)"}),r.jsx(ne,{id:"importFile",type:"file",accept:".json",onChange:Y=>{var te;const Se=(te=Y.target.files)==null?void 0:te[0];Se&&wt(Se)},"data-testid":"input-import-file"})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("p",{children:"Файл должен содержать массив объектов офферов в формате JSON."}),r.jsx("p",{children:"Поддерживаемые поля: name, category, description, status, payoutType, geoPricing, и другие."})]})]})]})})]})})]})]})}const FH=v.memo(({currentPage:e,onNavigateToPartner:t,onNavigateToGeo:n,onNavigateToFraud:s,dateFilter:a,offerId:i})=>{const l=v.useMemo(()=>Array.from({length:10},(u,h)=>{const f=(e-1)*10+h;return{date:new Date(Date.now()-f*24*60*60*1e3).toLocaleDateString("ru-RU"),uniques:Math.floor(Math.random()*500)+100+f*10,cr_value:`$${(Math.random()*100+20+f*2).toFixed(2)}`,epc_value:`$${(Math.random()*2+.1+f*.05).toFixed(3)}`,registrations:Math.floor(Math.random()*80)+20+f*5,deposits:Math.floor(Math.random()*25)+8+f*2,geo:`🇺🇸 US (${(Math.random()*12+2).toFixed(1)}%)`,fraud_rejects:Math.floor(Math.random()*20)+1,partner:`П#${f+1}`}}),[e]),o=v.useCallback(u=>{t(u)},[t]),c=v.useCallback(u=>{n(u)},[n]),d=v.useCallback(()=>{i&&s(i)},[s,i]);return r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Дата"}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(or,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),"Уники"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Rt,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"CR$"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(cr,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),"EPC$"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Bs,{className:"w-4 h-4 text-cyan-600 dark:text-cyan-400"}),"REG"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Om,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),"DEP"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(mr,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),"GEO"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Dt,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),"Фрод-Отклонение"]})}),r.jsx(Z,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(or,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"}),"Партнер"]})})]})}),r.jsx(It,{children:l.map((u,h)=>r.jsxs(De,{children:[r.jsx(H,{className:"font-medium",children:u.date}),r.jsx(H,{className:"text-blue-600 dark:text-blue-400 font-medium",children:u.uniques}),r.jsx(H,{className:"text-green-600 dark:text-green-400 font-medium",children:u.cr_value}),r.jsx(H,{className:"text-purple-600 dark:text-purple-400 font-medium",children:u.epc_value}),r.jsx(H,{className:"text-cyan-600 dark:text-cyan-400 font-medium",children:u.registrations}),r.jsx(H,{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:u.deposits}),r.jsx(H,{className:"text-orange-600 dark:text-orange-400 font-medium",children:r.jsxs("button",{onClick:()=>c("US"),className:"flex items-center gap-1 hover:underline hover:bg-orange-50 dark:hover:bg-orange-900/20 px-2 py-1 rounded transition-all duration-200 cursor-pointer group",title:"Перейти к аналитике по гео",children:[r.jsx(mr,{className:"w-3 h-3 opacity-60 group-hover:opacity-100 transition-opacity"}),u.geo,r.jsx(yr,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity ml-1"})]})}),r.jsx(H,{className:"text-red-600 dark:text-red-400 font-medium",children:r.jsxs("button",{onClick:d,className:"flex items-center gap-1 hover:underline hover:bg-red-50 dark:hover:bg-red-900/20 px-2 py-1 rounded transition-all duration-200 cursor-pointer group",title:"Перейти к управлению фродом",children:[r.jsx(Dt,{className:"w-3 h-3 opacity-60 group-hover:opacity-100 transition-opacity"}),u.fraud_rejects,r.jsx(ir,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity ml-1"})]})}),r.jsx(H,{className:"text-indigo-600 dark:text-indigo-400 font-medium",children:r.jsxs("button",{onClick:()=>o(u.partner),className:"flex items-center gap-1 hover:underline hover:bg-indigo-50 dark:hover:bg-indigo-900/20 px-2 py-1 rounded transition-all duration-200 cursor-pointer group",title:"Перейти к управлению партнером",children:[r.jsx(or,{className:"w-3 h-3 opacity-60 group-hover:opacity-100 transition-opacity"}),u.partner,r.jsx(ir,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity ml-1"})]})})]},`${e}-${h}`))})]})});FH.displayName="OptimizedAnalyticsTable";const bx=(e,t,n="")=>e?typeof e=="string"?e:e[t]||e.en||e.ru||n:n;function I5e(){var rr;const[,e]=Bn(),t=Mv(),{t:n,i18n:s}=Wt(),a=s.language,{collapsed:i}=Qs(),[l,o]=v.useState("details"),[c,d]=v.useState([]),[u,h]=v.useState(!1),f=v.useRef(null),{toast:m}=at(),[g,x]=v.useState("7"),[w,j]=v.useState(""),[y,b]=v.useState(""),[p,N]=v.useState("all"),[k,S]=v.useState(""),[P,_]=v.useState("all"),[R,O]=v.useState(""),[M,A]=v.useState("all"),[T,B]=v.useState(""),[z,U]=v.useState("all"),[E,$]=v.useState(""),[G,oe]=v.useState({uniques:1}),[ee,ce]=v.useState(!1),[ye,je]=v.useState({}),$e=async(V,I)=>{try{await navigator.clipboard.writeText(V),je(J=>({...J,[I]:!0})),m({title:n("url_copied"),description:n("url_copied_success")}),setTimeout(()=>{je(J=>({...J,[I]:!1}))},2e3)}catch{m({title:n("copy_error"),description:n("copy_error_message"),variant:"destructive"})}},ke=t.id,{data:be=[],isLoading:pe}=Fe({queryKey:["/api/admin/offers"],enabled:!!ke}),le=be.find(V=>V.id===ke),{data:Ie}=Fe({queryKey:["/api/admin/offer-stats",ke],enabled:!!ke}),ae=Ie;if(pe)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:n("loading")})]})});if(!le)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600",children:n("offer_not_found")}),r.jsx(D,{onClick:()=>e("/admin/OffersManagement"),className:"mt-4",children:n("back_to_offers")})]})});const st=V=>({gambling:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",finance:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",nutra:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400",dating:"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-400",lottery:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",crypto:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",ecommerce:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",mobile:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",gaming:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/20 dark:text-indigo-400",software:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"})[V]||"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",K=V=>({active:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",draft:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",blocked:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",archived:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400"})[V]||"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",Me=V=>{if(!V||!Array.isArray(V))return[];const I={Facebook:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",Instagram:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",Google:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",YouTube:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",TikTok:"bg-gray-900 text-white dark:bg-gray-800 dark:text-gray-200",Twitter:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/20 dark:text-cyan-400",LinkedIn:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/20 dark:text-cyan-400",Push:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",Pop:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",Email:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",SMS:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",Native:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",SEO:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400",Organic:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400",Influencer:"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-400",Teaser:"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-400"};return V.map((J,xe)=>({name:J,color:I[J]||"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}))},de=V=>{if(!V||!Array.isArray(V))return[];const I={web:"Веб-сайты",mobile_app:"Мобильные приложения",social_media:"Социальные сети",email:"Email рассылки",sms:"SMS рассылки",telegram_bots:"Telegram боты",browser_extensions:"Браузерные расширения",push_notifications:"Push уведомления",popup_ads:"Popup реклама",banner_ads:"Баннерная реклама",video_ads:"Видео реклама",native_ads:"Нативная реклама"},J=["bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400","bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400","bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400","bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400"];return V.map((xe,_e)=>({name:I[xe]||xe,color:J[_e%J.length]}))},Be=async V=>{const I=V.target.files;if(!(!I||I.length===0)){h(!0);try{const J=new FormData;Array.from(I).forEach((_e,Ae)=>{J.append(`creative_${Ae}`,_e)}),J.append("offerId",le.id),await new Promise(_e=>setTimeout(_e,2e3));const xe=Array.from(I).map((_e,Ae)=>({id:Date.now()+Ae,name:_e.name,size:_e.size,type:_e.type,url:URL.createObjectURL(_e),uploadedAt:new Date().toISOString()}));d(_e=>[..._e,...xe]),m({title:"Успех",description:`Загружено ${I.length} файлов`})}catch{m({title:"Ошибка",description:"Не удалось загрузить файлы",variant:"destructive"})}finally{h(!1),f.current&&(f.current.value="")}}},qe=()=>{var V;(V=f.current)==null||V.click()},Qe=V=>{d(I=>I.filter(J=>J.id!==V)),m({title:"Удалено",description:"Креатив удален"})},wt=V=>{if(V===0)return"0 Bytes";const I=1024,J=["Bytes","KB","MB","GB"],xe=Math.floor(Math.log(V)/Math.log(I));return parseFloat((V/Math.pow(I,xe)).toFixed(2))+" "+J[xe]};return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${i?"lg:ml-16":"lg:ml-64"}`,children:[r.jsx(gn,{title:"",subtitle:""}),r.jsx("main",{className:"flex-1 p-6",children:r.jsxs("div",{className:"container mx-auto px-6 py-8 max-w-6xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-6",children:"OfferDetails"}),r.jsxs(D,{variant:"ghost",onClick:()=>e("/admin/OffersManagement"),className:"mb-4 hover:bg-gray-100 dark:hover:bg-gray-800",title:n("back_to_offers"),children:[r.jsx(vc,{className:"w-4 h-4 mr-2"}),n("back_to_offers")]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"mb-2",children:r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:le.name})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ie,{className:K(le.status),children:n(le.status)}),r.jsx(ie,{className:st(le.category),children:n(le.category)}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[r.jsx(Xn,{className:"w-4 h-4"}),r.jsx("span",{children:new Date(le.createdAt).toLocaleDateString("ru-RU")})]})]})]}),r.jsx("div",{className:"flex items-center gap-4",children:le.logo&&r.jsx("img",{src:le.logo,alt:le.name,className:"w-20 h-20 object-contain rounded-lg border border-gray-200 dark:border-gray-700"})})]})]}),r.jsxs(rn,{value:l,onValueChange:o,className:"space-y-6",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-4 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[r.jsxs(We,{value:"details",className:"flex items-center gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700",children:[r.jsx(Gt,{className:"w-4 h-4"}),n("details")]}),r.jsxs(We,{value:"analytics",className:"flex items-center gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700",children:[r.jsx(yr,{className:"w-4 h-4"}),n("analytics")]}),r.jsxs(We,{value:"creatives",className:"flex items-center gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700",children:[r.jsx(io,{className:"w-4 h-4"}),n("creatives")]}),r.jsxs(We,{value:"history",className:"flex items-center gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700",children:[r.jsx(lr,{className:"w-4 h-4"}),n("history")]})]}),r.jsx(He,{value:"details",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[le.kpiConditions&&r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(yr,{className:"w-5 h-5"}),n("kpi_description")]})}),r.jsx(W,{children:r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 break-words overflow-hidden",children:bx(le.kpiConditions,a,n("not_specified"))})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(mr,{className:"w-5 h-5"}),n("preview_url")]})}),r.jsx(W,{children:le.landingPages&&le.landingPages.length>0?r.jsx("div",{className:"space-y-4",children:le.landingPages.map((V,I)=>{var J;return r.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:V.name||`${n("preview_url")} ${I+1}`}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 truncate",children:[r.jsx(mr,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"font-mono truncate",children:V.url})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(D,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-100 hover:text-blue-600",onClick:()=>$e(V.url,`landing-${I}`),title:n("copy_link"),children:ye[`landing-${I}`]?r.jsx(on,{className:"w-4 h-4 text-green-600"}):r.jsx(Yr,{className:"w-4 h-4 text-blue-600"})}),r.jsx(D,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-purple-100 hover:text-purple-600",asChild:!0,title:n("preview_url"),children:r.jsx("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",children:r.jsx(ir,{className:"w-4 h-4 text-purple-600"})})})]})]}),r.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-center",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:"Выплата"}),r.jsx("div",{className:"text-xl font-bold text-green-700 dark:text-green-300",children:(()=>{const xe=le.currency==="USD"?"$":le.currency==="EUR"?"€":le.currency==="RUB"?"₽":"";return V.payoutAmount?`${xe}${V.payoutAmount}`:V.payout&&V.payout!=="0.00"?`${xe}${V.payout}`:le.payout&&le.payout!=="0.00"?`${xe}${le.payout}`:`${xe}0`})()})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:"Валюта"}),r.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:le.currency||"USD"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:"Тип"}),r.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:((J=le.payoutType)==null?void 0:J.toUpperCase())||"CPA"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:"Гео"}),r.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:(()=>{const xe={us:"🇺🇸",gb:"🇬🇧",de:"🇩🇪",fr:"🇫🇷",es:"🇪🇸",it:"🇮🇹",ca:"🇨🇦",au:"🇦🇺",br:"🇧🇷",mx:"🇲🇽",ru:"🇷🇺",ua:"🇺🇦",pl:"🇵🇱",nl:"🇳🇱",se:"🇸🇪",no:"🇳🇴",dk:"🇩🇰",fi:"🇫🇮",jp:"🇯🇵",kr:"🇰🇷",cn:"🇨🇳",in:"🇮🇳",th:"🇹🇭",vn:"🇻🇳"};if(V.geo){const _e=V.geo.toLowerCase(),Ae=xe[_e]||"🌍";return r.jsxs("span",{className:"text-sm",children:[Ae,_e.toUpperCase(),"-",V.payoutAmount||0,"$"]})}return r.jsx("span",{className:"text-sm",children:"Не указано"})})()})]})]})})]},I)})}):r.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-center text-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:"Выплата"}),r.jsx("div",{className:"text-xl font-bold text-green-700 dark:text-green-300",children:le.payout&&le.payout!=="0.00"?`${le.currency==="USD"?"$":le.currency==="EUR"?"€":le.currency==="RUB"?"₽":""}${le.payout}`:le.geoPricing&&Array.isArray(le.geoPricing)&&le.geoPricing.length>0?`${le.currency==="USD"?"$":le.currency==="EUR"?"€":le.currency==="RUB"?"₽":""}${le.geoPricing[0].payout}`:`${le.currency==="USD"?"$":le.currency==="EUR"?"€":le.currency==="RUB"?"₽":"$"}0`})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:n("currency")}),r.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:le.currency||"USD"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:n("type")}),r.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:((rr=le.payoutType)==null?void 0:rr.toUpperCase())||"CPA"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400 mb-1",children:n("geo")}),r.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:(()=>{let V=[];if(le.geoPricing&&Array.isArray(le.geoPricing)&&le.geoPricing.length>0?V=le.geoPricing.map(J=>J.country).filter(Boolean):le.countries&&Array.isArray(le.countries)&&le.countries.length>0&&(V=le.countries),V.length===0)return r.jsx("span",{className:"text-sm",children:n("not_specified")});const I={US:"🇺🇸",GB:"🇬🇧",DE:"🇩🇪",FR:"🇫🇷",ES:"🇪🇸",IT:"🇮🇹",CA:"🇨🇦",AU:"🇦🇺",BR:"🇧🇷",MX:"🇲🇽",RU:"🇷🇺",UA:"🇺🇦",PL:"🇵🇱",NL:"🇳🇱",SE:"🇸🇪",NO:"🇳🇴",DK:"🇩🇰",FI:"🇫🇮",JP:"🇯🇵",KR:"🇰🇷",CN:"🇨🇳",IN:"🇮🇳",TH:"🇹🇭",VN:"🇻🇳"};return r.jsxs("div",{className:"flex flex-wrap justify-center gap-1",children:[V.slice(0,3).map((J,xe)=>r.jsxs("span",{className:"text-sm",children:[I[J]||"🌍",J]},xe)),V.length>3&&r.jsxs("span",{className:"text-sm",children:["+",V.length-3]})]})})()})]})]})})})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(yr,{className:"w-5 h-5"}),n("analytics")]})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:(ae==null?void 0:ae.clicks)||0}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("clicks")})]}),r.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:(ae==null?void 0:ae.conversions)||0}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("conversions")})]})]}),r.jsxs("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:ae!=null&&ae.cr?`${ae.cr}%`:"0%"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CR"})]}),r.jsxs("div",{className:"text-center p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[r.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:["$",(ae==null?void 0:ae.revenue)||0]}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("revenue")})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Ff,{className:"w-5 h-5"}),n("additional_info")]})}),r.jsxs(W,{className:"space-y-3",children:[le.dailyLimit&&r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("daily_limit")}),r.jsxs(ie,{variant:"secondary",children:[le.dailyLimit," ",n("conversions")]})]}),le.vertical&&r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("vertical")}),r.jsx(ie,{variant:"secondary",children:le.vertical})]})]})]}),le.goals&&r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Gt,{className:"w-5 h-5"}),n("offer_goals")]})}),r.jsx(W,{children:r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 break-words overflow-hidden",children:bx(le.goals,a,n("not_specified"))})})]}),le.description&&r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(es,{className:"w-5 h-5"}),n("description")]})}),r.jsx(W,{children:r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 break-words overflow-hidden max-h-32 overflow-y-auto",children:bx(le.description,a,n("not_specified"))})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(yr,{className:"w-5 h-5"}),n("traffic_sources")]})}),r.jsx(W,{children:le.trafficSources&&Array.isArray(le.trafficSources)&&le.trafficSources.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:Me(le.trafficSources).map((V,I)=>r.jsx(ie,{className:V.color,children:V.name},I))}):r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n("traffic_sources_not_specified")})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Dt,{className:"w-5 h-5"}),n("allowed_applications")]})}),r.jsx(W,{children:le.allowedApps&&Array.isArray(le.allowedApps)&&le.allowedApps.length>0?r.jsx("div",{className:"grid grid-cols-2 gap-2",children:de(le.allowedApps).map((V,I)=>r.jsx(ie,{className:V.color,children:V.name},I))}):r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n("allowed_apps_not_specified")})})]})]})]})}),r.jsxs(He,{value:"analytics",className:"space-y-6",children:[r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(As,{className:"w-5 h-5"}),"Фильтры аналитики"]})}),r.jsxs(W,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(Xn,{className:"w-4 h-4"}),"Период"]}),r.jsxs(fe,{value:g,onValueChange:x,children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите период"})}),r.jsxs(he,{children:[r.jsx(C,{value:"1",children:"Сегодня"}),r.jsx(C,{value:"7",children:"7 дней"}),r.jsx(C,{value:"30",children:"30 дней"}),r.jsx(C,{value:"90",children:"90 дней"}),r.jsx(C,{value:"365",children:"Год"}),r.jsx(C,{value:"all",children:"Все время"}),r.jsx(C,{value:"custom",children:"Пользовательский"})]})]}),g==="custom"&&r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-500",children:"От"}),r.jsx(ne,{type:"date",value:w,onChange:V=>j(V.target.value),className:"text-xs"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-500",children:"До"}),r.jsx(ne,{type:"date",value:y,onChange:V=>b(V.target.value),className:"text-xs"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(mr,{className:"w-4 h-4"}),"География"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(ne,{placeholder:"Поиск стран...",value:k,onChange:V=>S(V.target.value),className:"text-sm"}),r.jsxs(fe,{value:p,onValueChange:N,children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите страну"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все страны"}),[{code:"US",name:"США",flag:"🇺🇸"},{code:"GB",name:"Великобритания",flag:"🇬🇧"},{code:"DE",name:"Германия",flag:"🇩🇪"},{code:"FR",name:"Франция",flag:"🇫🇷"},{code:"CA",name:"Канада",flag:"🇨🇦"},{code:"AU",name:"Австралия",flag:"🇦🇺"},{code:"RU",name:"Россия",flag:"🇷🇺"},{code:"BR",name:"Бразилия",flag:"🇧🇷"},{code:"IT",name:"Италия",flag:"🇮🇹"},{code:"ES",name:"Испания",flag:"🇪🇸"},{code:"PL",name:"Польша",flag:"🇵🇱"},{code:"NL",name:"Нидерланды",flag:"🇳🇱"},{code:"SE",name:"Швеция",flag:"🇸🇪"},{code:"NO",name:"Норвегия",flag:"🇳🇴"},{code:"DK",name:"Дания",flag:"🇩🇰"},{code:"FI",name:"Финляндия",flag:"🇫🇮"},{code:"CH",name:"Швейцария",flag:"🇨🇭"},{code:"AT",name:"Австрия",flag:"🇦🇹"},{code:"BE",name:"Бельгия",flag:"🇧🇪"},{code:"PT",name:"Португалия",flag:"🇵🇹"},{code:"IE",name:"Ирландия",flag:"🇮🇪"},{code:"CZ",name:"Чехия",flag:"🇨🇿"},{code:"HU",name:"Венгрия",flag:"🇭🇺"},{code:"GR",name:"Греция",flag:"🇬🇷"},{code:"JP",name:"Япония",flag:"🇯🇵"},{code:"KR",name:"Корея",flag:"🇰🇷"},{code:"CN",name:"Китай",flag:"🇨🇳"},{code:"IN",name:"Индия",flag:"🇮🇳"},{code:"SG",name:"Сингапур",flag:"🇸🇬"},{code:"HK",name:"Гонконг",flag:"🇭🇰"},{code:"TW",name:"Тайвань",flag:"🇹🇼"},{code:"TH",name:"Таиланд",flag:"🇹🇭"},{code:"MY",name:"Малайзия",flag:"🇲🇾"},{code:"ID",name:"Индонезия",flag:"🇮🇩"},{code:"PH",name:"Филиппины",flag:"🇵🇭"},{code:"VN",name:"Вьетнам",flag:"🇻🇳"},{code:"MX",name:"Мексика",flag:"🇲🇽"},{code:"AR",name:"Аргентина",flag:"🇦🇷"},{code:"CL",name:"Чили",flag:"🇨🇱"},{code:"CO",name:"Колумбия",flag:"🇨🇴"},{code:"PE",name:"Перу",flag:"🇵🇪"},{code:"ZA",name:"ЮАР",flag:"🇿🇦"},{code:"EG",name:"Египет",flag:"🇪🇬"},{code:"NG",name:"Нигерия",flag:"🇳🇬"},{code:"KE",name:"Кения",flag:"🇰🇪"},{code:"IL",name:"Израиль",flag:"🇮🇱"},{code:"AE",name:"ОАЭ",flag:"🇦🇪"},{code:"SA",name:"Саудовская Аравия",flag:"🇸🇦"},{code:"TR",name:"Турция",flag:"🇹🇷"},{code:"UA",name:"Украина",flag:"🇺🇦"},{code:"BY",name:"Беларусь",flag:"🇧🇾"},{code:"KZ",name:"Казахстан",flag:"🇰🇿"},{code:"UZ",name:"Узбекистан",flag:"🇺🇿"}].filter(I=>k===""||I.name.toLowerCase().includes(k.toLowerCase())||I.code.toLowerCase().includes(k.toLowerCase())).map(I=>r.jsxs(C,{value:I.code,children:[I.flag," ",I.name]},I.code))]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx($i,{className:"w-4 h-4"}),"Устройства"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(ne,{placeholder:"Поиск устройств...",value:R,onChange:V=>O(V.target.value),className:"text-sm"}),r.jsxs(fe,{value:P,onValueChange:_,children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите устройство"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все устройства"}),[{value:"desktop",name:"Десктоп",icon:"🖥️"},{value:"mobile",name:"Мобильные",icon:"📱"},{value:"tablet",name:"Планшеты",icon:"📲"},{value:"ios",name:"iOS",icon:"🍎"},{value:"android",name:"Android",icon:"🤖"},{value:"windows",name:"Windows",icon:"🪟"},{value:"macos",name:"macOS",icon:"🍎"},{value:"linux",name:"Linux",icon:"🐧"},{value:"smart-tv",name:"Smart TV",icon:"📺"},{value:"console",name:"Игровые консоли",icon:"🎮"}].filter(I=>R===""||I.name.toLowerCase().includes(R.toLowerCase())||I.value.toLowerCase().includes(R.toLowerCase())).map(I=>r.jsxs(C,{value:I.value,children:[I.icon," ",I.name]},I.value))]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(Om,{className:"w-4 h-4"}),"Рекламодатель"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(ne,{placeholder:"Поиск рекламодателей...",value:T,onChange:V=>B(V.target.value),className:"text-sm"}),r.jsxs(fe,{value:M,onValueChange:A,children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите рекламодателя"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все рекламодатели"}),[{id:"advertiser1",name:"Advertiser Corp"},{id:"advertiser2",name:"Global Marketing Ltd"},{id:"advertiser3",name:"Digital Ads Inc"},{id:"advertiser4",name:"Performance Media"},{id:"advertiser5",name:"MediaMax Solutions"},{id:"advertiser6",name:"AdTech Partners"},{id:"advertiser7",name:"Revenue Network"},{id:"advertiser8",name:"Conversion Masters"},{id:"advertiser9",name:"Traffic Universe"},{id:"advertiser10",name:"Lead Generation Pro"}].filter(I=>T===""||I.name.toLowerCase().includes(T.toLowerCase())||I.id.toLowerCase().includes(T.toLowerCase())).map(I=>r.jsx(C,{value:I.id,children:I.name},I.id))]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[r.jsx(Bs,{className:"w-4 h-4"}),"Партнер"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(ne,{placeholder:"Поиск партнеров...",value:E,onChange:V=>$(V.target.value),className:"text-sm"}),r.jsxs(fe,{value:z,onValueChange:U,children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите партнера"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все партнеры"}),[{id:"partner1",name:"TopAffiliates Pro"},{id:"partner2",name:"Performance Partners"},{id:"partner3",name:"Digital Media Network"},{id:"partner4",name:"Elite Affiliates"},{id:"partner5",name:"Global Traffic Hub"},{id:"partner6",name:"MediaBuyers United"},{id:"partner7",name:"Conversion Leaders"},{id:"partner8",name:"Traffic Masters"},{id:"partner9",name:"Revenue Rockets"},{id:"partner10",name:"Lead Champions"},{id:"partner11",name:"AdVantage Group"},{id:"partner12",name:"Performance Elite"},{id:"partner13",name:"Digital Success"},{id:"partner14",name:"Growth Partners"},{id:"partner15",name:"Media Professionals"}].filter(I=>E===""||I.name.toLowerCase().includes(E.toLowerCase())||I.id.toLowerCase().includes(E.toLowerCase())).map(I=>r.jsx(C,{value:I.id,children:I.name},I.id))]})]})]})]})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Активные фильтры:"}),g!=="all"&&r.jsx(ie,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:g==="1"?"Сегодня":g==="7"?"7 дней":g==="30"?"30 дней":g==="90"?"90 дней":g==="365"?"Год":"Все время"}),p!=="all"&&r.jsx(ie,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:p==="US"?"🇺🇸 США":p==="GB"?"🇬🇧 Великобритания":p==="DE"?"🇩🇪 Германия":p==="FR"?"🇫🇷 Франция":p==="CA"?"🇨🇦 Канада":p==="AU"?"🇦🇺 Австралия":p==="RU"?"🇷🇺 Россия":p==="BR"?"🇧🇷 Бразилия":p}),P!=="all"&&r.jsx(ie,{variant:"secondary",className:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:P==="desktop"?"🖥️ Десктоп":P==="mobile"?"📱 Мобильные":P==="tablet"?"📱 Планшеты":P==="ios"?"🍎 iOS":P==="android"?"🤖 Android":P}),M!=="all"&&r.jsx(ie,{variant:"secondary",className:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400",children:M==="advertiser1"?"Advertiser Corp":M==="advertiser2"?"Global Marketing Ltd":M==="advertiser3"?"Digital Ads Inc":M==="advertiser4"?"Performance Media":M}),z!=="all"&&r.jsx(ie,{variant:"secondary",className:"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-400",children:z==="partner1"?"TopAffiliates Pro":z==="partner2"?"Performance Partners":z==="partner3"?"Digital Media Network":z==="partner4"?"Elite Affiliates":z==="partner5"?"Global Traffic Hub":z}),g==="all"&&p==="all"&&P==="all"&&M==="all"&&z==="all"&&r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Нет активных фильтров"})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(q,{children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:r.jsx(ir,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Клики"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(ae==null?void 0:ae.clicks)||0}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Всего переходов"})]})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:r.jsx(or,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Конверсии"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(ae==null?void 0:ae.conversions)||0}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Целевые действия"})]})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:r.jsx(yr,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"CR %"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ae!=null&&ae.cr?`${ae.cr}%`:"0%"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Конверсия"})]})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:r.jsx(Rt,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Доход"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",(ae==null?void 0:ae.revenue)||0]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Общая выручка"})]})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2 text-lg",children:[r.jsx(cr,{className:"w-5 h-5"}),"Эффективность"]})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CTR"}),r.jsx("span",{className:"text-sm font-medium",children:ae!=null&&ae.clicks&&(ae==null?void 0:ae.clicks)>0?`${((ae.conversions||0)/ae.clicks*100).toFixed(2)}%`:"0%"})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ARPU"}),r.jsxs("span",{className:"text-sm font-medium",children:["$",ae!=null&&ae.conversions&&ae.conversions>0?((ae.revenue||0)/ae.conversions).toFixed(2):"0"]})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"EPC"}),r.jsxs("span",{className:"text-sm font-medium",children:["$",ae!=null&&ae.clicks&&ae.clicks>0?((ae.revenue||0)/ae.clicks).toFixed(3):"0"]})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2 text-lg",children:[r.jsx(Xn,{className:"w-5 h-5"}),"Активность"]})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Сегодня"}),r.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:["+",Math.floor(((ae==null?void 0:ae.clicks)||0)*.1)]})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Вчера"}),r.jsx("span",{className:"text-sm font-medium",children:Math.floor(((ae==null?void 0:ae.clicks)||0)*.15)})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"7 дней"}),r.jsx("span",{className:"text-sm font-medium",children:Math.floor(((ae==null?void 0:ae.clicks)||0)*.8)})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2 text-lg",children:[r.jsx(Gt,{className:"w-5 h-5"}),"Качество"]})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Рейтинг"}),r.jsx("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"★ 4.2"})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Отказы"}),r.jsx("span",{className:"text-sm font-medium",children:"12%"})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Время на сайте"}),r.jsx("span",{className:"text-sm font-medium",children:"2:34"})]})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yr,{className:"w-5 h-5"}),"Детальная аналитика"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>{const V=Array.from({length:10},(Ae,Y)=>{const te=((G.uniques||1)-1)*10+Y;return{Дата:new Date(Date.now()-te*24*60*60*1e3).toLocaleDateString("ru-RU"),Уники:Math.floor(Math.random()*500)+100+te*10,CR$:`$${(Math.random()*100+20+te*2).toFixed(2)}`,EPC$:`$${(Math.random()*2+.1+te*.05).toFixed(3)}`,REG:Math.floor(Math.random()*80)+20+te*5,DEP:Math.floor(Math.random()*25)+8+te*2,GEO:`US (${(Math.random()*12+2).toFixed(1)}%)`,"Фрод-Отклонение":Math.floor(Math.random()*20)+1,Партнер:`П#${te+1}`}}),I=["\uFEFF"+Object.keys(V[0]).join(","),...V.map(Ae=>Object.values(Ae).join(","))].join(`
`),J=new Blob([I],{type:"text/csv;charset=utf-8;"}),xe=document.createElement("a"),_e=URL.createObjectURL(J);xe.setAttribute("href",_e),xe.setAttribute("download",`analytics_${new Date().toISOString().split("T")[0]}.csv`),xe.style.visibility="hidden",document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),m({title:"Экспорт завершен",description:"Таблица аналитики экспортирована в CSV файл"})},className:"flex items-center gap-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20",title:"Экспортировать таблицу в CSV",children:[r.jsx(br,{className:"w-4 h-4"}),"Экспорт CSV"]}),r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>{const V=Array.from({length:10},(Ae,Y)=>{const te=((G.uniques||1)-1)*10+Y;return{Дата:new Date(Date.now()-te*24*60*60*1e3).toLocaleDateString("ru-RU"),Уники:Math.floor(Math.random()*500)+100+te*10,CR$:(Math.random()*100+20+te*2).toFixed(2),EPC$:(Math.random()*2+.1+te*.05).toFixed(3),REG:Math.floor(Math.random()*80)+20+te*5,DEP:Math.floor(Math.random()*25)+8+te*2,GEO:`US (${(Math.random()*12+2).toFixed(1)}%)`,"Фрод-Отклонение":Math.floor(Math.random()*20)+1,Партнер:`П#${te+1}`}}),I=[Object.keys(V[0]).join("	"),...V.map(Ae=>Object.values(Ae).join("	"))].join(`
`),J=new Blob([I],{type:"application/vnd.ms-excel;charset=utf-8;"}),xe=document.createElement("a"),_e=URL.createObjectURL(J);xe.setAttribute("href",_e),xe.setAttribute("download",`analytics_${new Date().toISOString().split("T")[0]}.xls`),xe.style.visibility="hidden",document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),m({title:"Экспорт завершен",description:"Таблица аналитики экспортирована в Excel файл"})},className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20",title:"Экспортировать таблицу в Excel",children:[r.jsx(es,{className:"w-4 h-4"}),"Экспорт Excel"]})]})]})}),r.jsxs(W,{children:[r.jsx(FH,{currentPage:G.uniques,onNavigateToPartner:V=>{e(`/super-admin/users?filter=affiliate&search=${V}`)},onNavigateToGeo:V=>{e(`/super-admin/analytics?geo=${V}&date=${g}`)},onNavigateToFraud:V=>{e(`/super-admin/fraud-alerts?offer=${V}&date=${g}`)},dateFilter:g,offerId:t.id||""}),r.jsxs("div",{className:"flex justify-center mt-4 gap-2",children:[G.uniques>1&&r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>oe(V=>({...V,uniques:V.uniques-1})),children:["← Страница ",G.uniques-1]}),r.jsxs("span",{className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400",children:["Страница ",G.uniques]}),r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>oe(V=>({...V,uniques:V.uniques+1})),children:["Страница ",G.uniques+1," →"]})]})]})]})]}),r.jsx(He,{value:"creatives",className:"space-y-6",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(io,{className:"w-5 h-5"}),"Рекламные материалы"]}),r.jsx(D,{onClick:qe,disabled:u,className:"bg-blue-600 hover:bg-blue-700 text-white",children:u?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Загрузка..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ba,{className:"w-4 h-4 mr-2"}),"Загрузить файлы"]})})]})}),r.jsxs(W,{children:[r.jsx("input",{ref:f,type:"file",multiple:!0,accept:"image/*,video/*,.pdf,.zip,.rar",onChange:Be,className:"hidden"}),c.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(io,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Креативы не загружены"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Загрузите баннеры, изображения, видео и другие рекламные материалы"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Поддерживаются форматы: JPG, PNG, GIF, MP4, PDF, ZIP, RAR"})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Загружено файлов: ",c.length]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(V=>{var I;return r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:V.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:wt(V.size)})]}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>Qe(V.id),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",title:"Удалить креатив",children:r.jsx(Fn,{className:"w-4 h-4"})})]}),V.type.startsWith("image/")?r.jsx("div",{className:"mb-3",children:r.jsx("img",{src:V.url,alt:V.name,className:"w-full h-32 object-cover rounded border"})}):r.jsx("div",{className:"mb-3 h-32 bg-gray-100 dark:bg-gray-700 rounded border flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(io,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:((I=V.type.split("/")[1])==null?void 0:I.toUpperCase())||"FILE"})]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(V.uploadedAt).toLocaleDateString("ru-RU")}),r.jsxs(D,{size:"sm",variant:"outline",onClick:()=>{const J=document.createElement("a");J.href=V.url,J.download=V.name,J.click()},className:"h-7 px-2 text-xs",children:[r.jsx(br,{className:"w-3 h-3 mr-1"}),"Скачать"]})]})]},V.id)})})]})]})]})}),r.jsx(He,{value:"history",className:"space-y-6",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(lr,{className:"w-5 h-5"}),"История изменений"]})}),r.jsx(W,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-full",children:r.jsx(Xn,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Оффер создан"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(le.createdAt).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Дополнительная история изменений будет отображаться здесь"})})]})})]})})]})]})})]}),r.jsx(_t,{open:ee,onOpenChange:ce,children:r.jsxs(kt,{className:"max-w-6xl max-h-[80vh] overflow-y-auto",children:[r.jsx(St,{children:r.jsxs(Ct,{children:["Редактировать оффер: ",le.name]})}),r.jsx(F5e,{offer:le,onSuccess:()=>ce(!1)})]})})]})}function F5e({offer:e,onSuccess:t}){const{toast:n}=at(),s=Et(),{t:a,i18n:i}=Wt(),l=i.language,o=Ke.object({name:Ke.string().min(1,"Название обязательно"),description:Ke.string().min(1,"Описание обязательно"),category:Ke.string().min(1,"Категория обязательна"),status:Ke.string().min(1,"Статус обязателен"),payoutType:Ke.string().min(1,"Тип выплаты обязателен"),currency:Ke.string().min(1,"Валюта обязательна"),logo:Ke.string().optional(),kpiConditions:Ke.string().optional(),allowedTrafficSources:Ke.array(Ke.string()).optional(),allowedApps:Ke.array(Ke.string()).optional(),antifraudEnabled:Ke.boolean().optional(),autoApprovePartners:Ke.boolean().optional(),dailyLimit:Ke.number().optional(),monthlyLimit:Ke.number().optional(),landingPages:Ke.array(Ke.object({name:Ke.string(),url:Ke.string(),payoutAmount:Ke.number(),currency:Ke.string(),geo:Ke.string().optional()})).optional()}),c=Jm({resolver:tp(o),defaultValues:{name:e.name||"",description:typeof e.description=="object"?bx(e.description,l,""):e.description||"",category:e.category||"",status:e.status||"draft",payoutType:e.payoutType||"cpa",currency:e.currency||"USD",logo:e.logo||"",kpiConditions:typeof e.kpiConditions=="object"?bx(e.kpiConditions,l,""):e.kpiConditions||"",allowedTrafficSources:e.trafficSources||[],allowedApps:e.allowedApps||[],antifraudEnabled:e.antifraudEnabled||!0,autoApprovePartners:e.autoApprovePartners||!1,dailyLimit:e.dailyLimit||void 0,monthlyLimit:e.monthlyLimit||void 0,landingPages:e.landingPages||[{name:"Основная страница",url:"",payoutAmount:0,currency:"USD",geo:""}]}}),d=Oe({mutationFn:async h=>{const f={...h,trafficSources:h.allowedTrafficSources||[],allowedApps:h.allowedApps||[]};return await Re(`/api/admin/offers/${e.id}`,"PUT",f)},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/offers"]}),s.invalidateQueries({queryKey:[`/api/admin/offer-stats/${e.id}`]}),n({title:"Успех",description:"Оффер успешно обновлен"}),t()},onError:h=>{n({title:"Ошибка",description:h.message||"Не удалось обновить оффер",variant:"destructive"})}}),u=h=>{d.mutate(h)};return r.jsx(ep,{...c,children:r.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(dt,{control:c.control,name:"name",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Название оффера"}),r.jsx(ft,{children:r.jsx(ne,{...h,placeholder:"Введите название оффера"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:c.control,name:"category",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Категория"}),r.jsxs(fe,{onValueChange:h.onChange,defaultValue:h.value,children:[r.jsx(ft,{children:r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите категорию"})})}),r.jsxs(he,{children:[r.jsx(C,{value:"gambling",children:"Гемблинг"}),r.jsx(C,{value:"finance",children:"Финансы"}),r.jsx(C,{value:"nutra",children:"Нутра"}),r.jsx(C,{value:"dating",children:"Знакомства"}),r.jsx(C,{value:"lottery",children:"Лотереи"}),r.jsx(C,{value:"crypto",children:"Криптовалюты"}),r.jsx(C,{value:"ecommerce",children:"E-commerce"}),r.jsx(C,{value:"mobile",children:"Мобильные"}),r.jsx(C,{value:"gaming",children:"Игры"}),r.jsx(C,{value:"software",children:"ПО"})]})]}),r.jsx(mt,{})]})})]}),r.jsx(dt,{control:c.control,name:"description",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Описание"}),r.jsx(ft,{children:r.jsx(gt,{...h,placeholder:"Подробное описание оффера",rows:3})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(dt,{control:c.control,name:"status",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Статус"}),r.jsxs(fe,{onValueChange:h.onChange,defaultValue:h.value,children:[r.jsx(ft,{children:r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите статус"})})}),r.jsxs(he,{children:[r.jsx(C,{value:"draft",children:"Черновик"}),r.jsx(C,{value:"active",children:"Активен"}),r.jsx(C,{value:"pending",children:"Ожидает"}),r.jsx(C,{value:"blocked",children:"Заблокирован"}),r.jsx(C,{value:"archived",children:"Архивный"})]})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:c.control,name:"payoutType",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Тип выплаты"}),r.jsxs(fe,{onValueChange:h.onChange,defaultValue:h.value,children:[r.jsx(ft,{children:r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите тип"})})}),r.jsxs(he,{children:[r.jsx(C,{value:"cpa",children:"CPA (за действие)"}),r.jsx(C,{value:"cps",children:"CPS (от продажи)"}),r.jsx(C,{value:"crl",children:"CRL (RevShare)"})]})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:c.control,name:"currency",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Валюта"}),r.jsxs(fe,{onValueChange:h.onChange,defaultValue:h.value,children:[r.jsx(ft,{children:r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите валюту"})})}),r.jsxs(he,{children:[r.jsx(C,{value:"USD",children:"USD"}),r.jsx(C,{value:"EUR",children:"EUR"}),r.jsx(C,{value:"RUB",children:"RUB"})]})]}),r.jsx(mt,{})]})})]}),r.jsx(dt,{control:c.control,name:"logo",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"URL логотипа"}),r.jsx(ft,{children:r.jsx(ne,{...h,placeholder:"https://example.com/logo.png"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:c.control,name:"kpiConditions",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"KPI условия"}),r.jsx(ft,{children:r.jsx(gt,{...h,placeholder:"Условия достижения KPI",rows:2})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(dt,{control:c.control,name:"dailyLimit",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Дневной лимит"}),r.jsx(ft,{children:r.jsx(ne,{type:"number",...h,value:h.value||"",onChange:f=>h.onChange(f.target.value?parseInt(f.target.value):void 0),placeholder:"Без ограничений"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:c.control,name:"monthlyLimit",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Месячный лимит"}),r.jsx(ft,{children:r.jsx(ne,{type:"number",...h,value:h.value||"",onChange:f=>h.onChange(f.target.value?parseInt(f.target.value):void 0),placeholder:"Без ограничений"})}),r.jsx(mt,{})]})})]}),r.jsx(dt,{control:c.control,name:"allowedTrafficSources",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Разрешенные источники трафика"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:["facebook_ads","google_ads","tiktok_ads","instagram_ads","youtube_ads","twitter_ads","linkedin_ads","snapchat_ads","pinterest_ads","reddit_ads","mytarget","push_traffic","pop_traffic","email_marketing","seo_organic","mobile_app","influencer","teaser_networks"].map(f=>{var g;const m={facebook_ads:"Facebook Ads",google_ads:"Google Ads",tiktok_ads:"TikTok Ads",instagram_ads:"Instagram Ads",youtube_ads:"YouTube Ads",twitter_ads:"Twitter Ads",linkedin_ads:"LinkedIn Ads",snapchat_ads:"Snapchat Ads",pinterest_ads:"Pinterest Ads",reddit_ads:"Reddit Ads",mytarget:"MyTarget",push_traffic:"Push трафик",pop_traffic:"Pop трафик",email_marketing:"Email маркетинг",seo_organic:"SEO органический",mobile_app:"Мобильные приложения",influencer:"Инфлюенсер маркетинг",teaser_networks:"Тизерные сети"};return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(dn,{id:`traffic-${f}`,checked:((g=h.value)==null?void 0:g.includes(f))||!1,onCheckedChange:x=>{const w=h.value||[],j=x?[...w,f]:w.filter(y=>y!==f);h.onChange(j)}}),r.jsx("label",{htmlFor:`traffic-${f}`,className:"text-sm cursor-pointer",children:m[f]||f})]},f)})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:c.control,name:"allowedApps",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Разрешенные приложения"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:["Mobile apps","Web apps","Desktop apps","PWA apps","WebView apps","Native Android (.apk) apps","iOS apps","Telegram bots","Browser extensions"].map(f=>{var g;const m={"Mobile apps":"Мобильные приложения","Web apps":"Веб-приложения","Desktop apps":"Desktop приложения","PWA apps":"PWA приложения","WebView apps":"WebView приложения","Native Android (.apk) apps":"Android приложения (.apk)","iOS apps":"iOS приложения","Telegram bots":"Telegram боты","Browser extensions":"Браузерные расширения"};return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(dn,{id:`app-${f}`,checked:((g=h.value)==null?void 0:g.includes(f))||!1,onCheckedChange:x=>{const w=h.value||[],j=x?[...w,f]:w.filter(y=>y!==f);h.onChange(j)}}),r.jsx("label",{htmlFor:`app-${f}`,className:"text-sm cursor-pointer",children:m[f]||f})]},f)})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:c.control,name:"landingPages",render:({field:h})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Landing Pages"}),r.jsxs("div",{className:"space-y-3 mt-2",children:[(h.value||[]).map((f,m)=>{var g;return r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 p-3 border rounded",children:[r.jsx(ne,{placeholder:"Название",value:f.name,onChange:x=>{const w=[...h.value||[]];w[m]={...f,name:x.target.value},h.onChange(w)}}),r.jsx(ne,{placeholder:"URL",value:f.url,onChange:x=>{const w=[...h.value||[]];w[m]={...f,url:x.target.value},h.onChange(w)}}),r.jsx(ne,{type:"number",placeholder:"Сумма",value:((g=f.payoutAmount)==null?void 0:g.toString())||"",onChange:x=>{const w=[...h.value||[]];w[m]={...f,payoutAmount:parseFloat(x.target.value)||0},h.onChange(w)}}),r.jsx(ne,{placeholder:"GEO",value:f.geo||"",onChange:x=>{const w=[...h.value||[]];w[m]={...f,geo:x.target.value},h.onChange(w)}})]},m)}),r.jsx(D,{type:"button",variant:"outline",onClick:()=>{const f=[...h.value||[],{name:"",url:"",payoutAmount:0,currency:c.getValues("currency")||"USD",geo:""}];h.onChange(f)},children:"Добавить Landing Page"})]}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(dt,{control:c.control,name:"antifraudEnabled",render:({field:h})=>r.jsxs(ct,{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(ut,{className:"text-base",children:"Защита от фрода"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Включить автоматическую защиту от мошенничества"})]}),r.jsx(ft,{children:r.jsx(Je,{checked:h.value,onCheckedChange:h.onChange})})]})}),r.jsx(dt,{control:c.control,name:"autoApprovePartners",render:({field:h})=>r.jsxs(ct,{className:"flex items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{children:[r.jsx(ut,{className:"text-base",children:"Автоодобрение партнеров"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Автоматически одобрять новых партнеров"})]}),r.jsx(ft,{children:r.jsx(Je,{checked:h.value,onCheckedChange:h.onChange})})]})})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(D,{type:"button",variant:"outline",onClick:t,children:"Отмена"}),r.jsx(D,{type:"submit",disabled:d.isPending,children:d.isPending?"Сохранение...":"Сохранить изменения"})]})]})})}function L5e(){var qe,Qe,wt,rr,V;const{toast:e}=at(),{token:t}=tr(),{isCollapsed:n}=Qs(),s=Et(),[a,i]=v.useState("dashboard"),[l,o]=v.useState(""),[c,d]=v.useState("all"),[u,h]=v.useState(!1),[f,m]=v.useState(!1);v.useState(null);const[g,x]=v.useState(""),[w,j]=v.useState(""),[y,b]=v.useState(""),[p,N]=v.useState("all"),[k,S]=v.useState("all"),[P,_]=v.useState("all"),[R,O]=v.useState("30d"),[M,A]=v.useState([]),[T,B]=v.useState(!1);v.useState(!1);const[z,U]=v.useState(null),[E,$]=v.useState(null);v.useState("");const{data:G}=Fe({queryKey:["/api/admin/financial-metrics",R],queryFn:async()=>{const I=await fetch(`/api/admin/financial-metrics/${R}`,{headers:{Authorization:`Bearer ${t}`}});if(!I.ok)throw new Error("Failed to fetch financial metrics");return I.json()},staleTime:30*1e3,gcTime:2*60*1e3,refetchOnWindowFocus:!0}),{data:oe=[]}=Fe({queryKey:["/api/admin/finances",{status:c,type:p,currency:k,method:P,search:l}],queryFn:async()=>{const I=await fetch("/api/admin/finances",{headers:{Authorization:`Bearer ${t}`}});if(!I.ok)throw new Error("Failed to fetch transactions");return I.json()},staleTime:30*1e3,gcTime:2*60*1e3}),{data:ee=[]}=Fe({queryKey:["/api/admin/payout-requests",{status:c,currency:k,method:P,search:l}],queryFn:async()=>{const I=await fetch("/api/admin/payout-requests",{headers:{Authorization:`Bearer ${t}`}});if(!I.ok)throw new Error("Failed to fetch payout requests");return I.json()},staleTime:30*1e3,gcTime:2*60*1e3}),{data:ce=[]}=Fe({queryKey:["/api/admin/deposits",{status:c,currency:k,method:P,search:l,period:R}],queryFn:async()=>{const I=await fetch("/api/admin/deposits",{headers:{Authorization:`Bearer ${t}`}});if(!I.ok)throw new Error("Failed to fetch deposits");return I.json()},staleTime:30*1e3,gcTime:2*60*1e3}),{data:ye=[]}=Fe({queryKey:["/api/admin/commission-data",{period:R}],queryFn:async()=>{const I=await fetch("/api/admin/commission-data",{headers:{Authorization:`Bearer ${t}`}});if(!I.ok)throw new Error("Failed to fetch commission data");return I.json()},staleTime:30*1e3,gcTime:2*60*1e3}),{data:je=[]}=Fe({queryKey:["/api/admin/financial-chart",R],queryFn:async()=>{const I=await fetch(`/api/admin/financial-chart/${R}`,{headers:{Authorization:`Bearer ${t}`}});if(!I.ok)throw new Error("Failed to fetch chart data");return I.json()},staleTime:30*1e3,gcTime:2*60*1e3,refetchOnWindowFocus:!0}),{data:$e=[]}=Fe({queryKey:["/api/admin/crypto-portfolio"],queryFn:async()=>{const I=await fetch("/api/admin/crypto-portfolio",{headers:{Authorization:`Bearer ${t}`}});if(!I.ok)throw new Error("Failed to fetch crypto portfolio");return I.json()}}),{data:ke=[]}=Fe({queryKey:["/api/admin/crypto-wallets"],queryFn:async()=>{const I=await fetch("/api/admin/crypto-wallets",{headers:{Authorization:`Bearer ${t}`}});if(!I.ok)throw new Error("Failed to fetch crypto wallets");return I.json()}}),be=Oe({mutationFn:async({transactionId:I,status:J,note:xe})=>{const _e=await fetch(`/api/admin/transactions/${I}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({status:J,note:xe})});if(!_e.ok)throw new Error("Failed to update transaction");return _e.json()},onSuccess:()=>{s.invalidateQueries({predicate:I=>{const J=I.queryKey[0];return(J==null?void 0:J.includes("/api/admin/financial"))||(J==null?void 0:J.includes("/api/admin/finances"))||(J==null?void 0:J.includes("/api/admin/payout-requests"))||(J==null?void 0:J.includes("/api/admin/deposits"))||(J==null?void 0:J.includes("/api/admin/commission-data"))}}),e({title:"Успешно",description:"Статус транзакции обновлён"})}}),pe=Oe({mutationFn:async({payoutId:I,action:J,note:xe})=>{const _e=await fetch(`/api/admin/payouts/${I}/${J}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({note:xe})});if(!_e.ok)throw new Error("Failed to process payout");return _e.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/payout-requests"]}),s.invalidateQueries({queryKey:["/api/admin/financial-metrics"]}),e({title:"Успешно",description:"Выплата обработана"})}}),le=Oe({mutationFn:async I=>{const J=await fetch("/api/admin/invoices",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(I)});if(!J.ok)throw new Error("Failed to create invoice");return J.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/deposits"]}),B(!1),e({title:"Инвойс создан",description:"Уведомление отправлено рекламодателю"})}}),Ie=oe.filter(I=>{var Se;const J=!l||I.user.username.toLowerCase().includes(l.toLowerCase())||I.user.email.toLowerCase().includes(l.toLowerCase())||I.id.toLowerCase().includes(l.toLowerCase())||((Se=I.description)==null?void 0:Se.toLowerCase().includes(l.toLowerCase())),xe=c==="all"||I.status===c,_e=p==="all"||I.type===p,Ae=k==="all"||I.currency===k,Y=P==="all"||I.paymentMethod===P;return J&&xe&&_e&&Ae&&Y}),ae=ee.filter(I=>{const J=!l||I.user.username.toLowerCase().includes(l.toLowerCase())||I.user.email.toLowerCase().includes(l.toLowerCase())||I.walletAddress.toLowerCase().includes(l.toLowerCase()),xe=c==="all"||I.status===c,_e=k==="all"||I.currency===k,Ae=P==="all"||I.paymentMethod===P;return J&&xe&&_e&&Ae}),st=I=>{const J={completed:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",icon:ur},pending:{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",icon:lr},processing:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",icon:Vt},failed:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",icon:Kt},cancelled:{color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",icon:Kt},approved:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",icon:ur},rejected:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",icon:Kt}},xe=J[I]||J.pending,_e=xe.icon;return r.jsxs(ie,{className:`${xe.color} flex items-center gap-1`,children:[r.jsx(_e,{className:"w-3 h-3"}),I]})},K=I=>({deposit:r.jsx($a,{className:"w-4 h-4 text-green-600"}),payout:r.jsx(so,{className:"w-4 h-4 text-red-600"}),hold:r.jsx(lr,{className:"w-4 h-4 text-yellow-600"}),cancel:r.jsx(Kt,{className:"w-4 h-4 text-gray-600"}),correction:r.jsx(Ts,{className:"w-4 h-4 text-blue-600"})})[I]||r.jsx(Rt,{className:"w-4 h-4"}),Me=I=>({USDT:r.jsx(od,{className:"w-4 h-4 text-green-600"}),BTC:r.jsx(od,{className:"w-4 h-4 text-orange-600"}),ETH:r.jsx(od,{className:"w-4 h-4 text-blue-600"}),Crypto:r.jsx(od,{className:"w-4 h-4 text-purple-600"}),Wire:r.jsx(wU,{className:"w-4 h-4 text-blue-600"}),Card:r.jsx(cx,{className:"w-4 h-4 text-green-600"}),Payeer:r.jsx(Oc,{className:"w-4 h-4 text-red-600"}),Qiwi:r.jsx($i,{className:"w-4 h-4 text-orange-600"}),YuMoney:r.jsx(Tre,{className:"w-4 h-4 text-purple-600"})})[I]||r.jsx(mr,{className:"w-4 h-4"}),de=I=>{let J=[],xe="";switch(I){case"transactions":J=Ie,xe="transactions";break;case"payouts":J=ae,xe="payouts";break;case"deposits":J=ce,xe="deposits";break;default:return}const Ae=[(I==="transactions"?["ID","Тип","Пользователь","Сумма","Валюта","Статус","Дата"]:I==="payouts"?["ID","Пользователь","Сумма","Валюта","Кошелёк","Статус","Дата"]:["ID","Пользователь","Сумма","Валюта","Статус","Дата"]).join(","),...J.map(Te=>{var Yt;return I==="transactions"?[Te.id,Te.type,Te.user.username,Te.amount,Te.currency,Te.status,new Date(Te.createdAt).toLocaleDateString()].join(","):I==="payouts"?[Te.id,Te.user.username,Te.amount,Te.currency,Te.walletAddress,Te.status,new Date(Te.requestedAt).toLocaleDateString()].join(","):[Te.id,((Yt=Te.user)==null?void 0:Yt.username)||"N/A",Te.amount,Te.currency,Te.status,new Date(Te.createdAt).toLocaleDateString()].join(",")})].join(`
`),Y=new Blob([Ae],{type:"text/csv;charset=utf-8;"}),Se=document.createElement("a"),te=URL.createObjectURL(Y);Se.setAttribute("href",te),Se.setAttribute("download",`${xe}_${new Date().toISOString().split("T")[0]}.csv`),Se.style.visibility="hidden",document.body.appendChild(Se),Se.click(),document.body.removeChild(Se),e({title:"Экспорт завершён",description:`Файл ${xe}.csv успешно скачан`})},Be=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${n?"ml-16":"ml-64"}`,children:[r.jsx(gn,{title:"Финансы"}),r.jsxs("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 dark:bg-gray-900 p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"💰 Финансы"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Управление финансами платформы и выплатами"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(D,{variant:"outline",onClick:()=>de(a),"data-testid":"button-export",title:"Экспорт данных",children:[r.jsx(br,{className:"w-4 h-4 mr-2"}),"Экспорт"]}),r.jsxs(fe,{value:R,onValueChange:O,children:[r.jsx(ue,{className:"w-32",title:"Период",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"7d",children:"7 дней"}),r.jsx(C,{value:"30d",children:"30 дней"}),r.jsx(C,{value:"90d",children:"90 дней"}),r.jsx(C,{value:"1y",children:"1 год"})]})]})]})]})}),r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-1",children:r.jsx("div",{className:"flex space-x-1 overflow-x-auto",children:[{id:"dashboard",label:"📊 Дашборд",icon:yr},{id:"transactions",label:"🧾 Транзакции",icon:cx},{id:"payouts",label:"💳 Выплаты",icon:cs},{id:"deposits",label:"🧮 Пополнения",icon:$a},{id:"commission",label:"📦 Комиссия",icon:Rt},{id:"crypto",label:"₿ Криптокошельки",icon:od},{id:"reports",label:"📁 Отчёты",icon:es}].map(I=>{const J=I.icon;return r.jsxs("button",{onClick:()=>i(I.id),className:`flex items-center space-x-2 py-3 px-4 rounded-md transition-all ${a===I.id?"bg-blue-500 text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,"data-testid":`tab-${I.id}`,children:[r.jsx(J,{className:"w-4 h-4"}),r.jsx("span",{className:"whitespace-nowrap text-sm font-medium",children:I.label})]},I.id)})})})}),r.jsxs("div",{className:"space-y-6",children:[a==="dashboard"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(q,{className:"w-full",children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Баланс платформы"})}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",((qe=G==null?void 0:G.platformBalance)==null?void 0:qe.toLocaleString())||"0"]}),r.jsx("div",{className:"text-sm text-gray-500",children:"USD • EUR • USDT • BTC"})]}),r.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-lg",children:r.jsx(Oc,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})})]}),r.jsxs(q,{className:"w-full",children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Доход от рекламодателей"})}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",((Qe=G==null?void 0:G.advertiserRevenue)==null?void 0:Qe.toLocaleString())||"0"]}),r.jsxs("div",{className:"flex items-center text-sm text-green-600 dark:text-green-400",children:[r.jsx(cr,{className:"w-4 h-4 mr-1"}),"+12.5%"]})]}),r.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:r.jsx($a,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})})]}),r.jsxs(q,{className:"w-full",children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Выплаты партнёрам"})}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",((wt=G==null?void 0:G.partnerPayouts)==null?void 0:wt.toLocaleString())||"0"]}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Выплачено: $",(G==null?void 0:G.paidOut)||"0"," • В холде: $",(G==null?void 0:G.onHold)||"0"]})]}),r.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900 rounded-lg",children:r.jsx(so,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]})})]}),r.jsxs(q,{className:"w-full",children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Комиссия платформы"})}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",((rr=G==null?void 0:G.platformCommission)==null?void 0:rr.toLocaleString())||"0"]}),r.jsxs("div",{className:"flex items-center text-sm text-green-600 dark:text-green-400",children:[r.jsx(cr,{className:"w-4 h-4 mr-1"}),"+8.2%"]})]}),r.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-lg",children:r.jsx(Rt,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]})})]})]}),r.jsxs(q,{className:"w-full",children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(yr,{className:"w-5 h-5"}),"Финансовые потоки по дням"]}),r.jsx(Ze,{children:"Доходы и расходы за выбранный период"})]}),r.jsx(W,{children:r.jsx("div",{className:"h-80 w-full",children:r.jsx(xa,{width:"100%",height:"100%",children:r.jsxs(ny,{data:je,children:[r.jsx(Ti,{strokeDasharray:"3 3"}),r.jsx(Ps,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(us,{type:"monotone",dataKey:"income",stroke:"#10B981",strokeWidth:2,name:"Доходы"}),r.jsx(us,{type:"monotone",dataKey:"expenses",stroke:"#EF4444",strokeWidth:2,name:"Расходы"})]})})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(q,{className:"w-full",children:[r.jsx(re,{children:r.jsx(se,{children:"Распределение по валютам"})}),r.jsx(W,{children:r.jsx("div",{className:"h-64",children:r.jsx(xa,{width:"100%",height:"100%",children:r.jsxs(D4,{children:[r.jsx(Ki,{data:(G==null?void 0:G.currencyDistribution)||[],cx:"50%",cy:"50%",labelLine:!1,label:({name:I,percent:J})=>`${I} ${(J*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:((G==null?void 0:G.currencyDistribution)||[]).map((I,J)=>r.jsx(Gm,{fill:Be[J%Be.length]},`cell-${J}`))}),r.jsx(tn,{})]})})})})]}),r.jsxs(q,{className:"w-full",children:[r.jsx(re,{children:r.jsx(se,{children:"Методы платежей"})}),r.jsx(W,{children:r.jsx("div",{className:"space-y-3",children:((G==null?void 0:G.paymentMethods)||[]).map((I,J)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[Me(I.name),r.jsx("span",{className:"font-medium",children:I.name})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-bold",children:["$",I.amount.toLocaleString()]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[I.count," транзакций"]})]})]},I.name))})})]})]})]}),a==="transactions"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx(q,{className:"w-full",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск транзакций...",value:l,onChange:I=>o(I.target.value),className:"pl-10","data-testid":"input-search-transactions",title:"Поиск транзакций"})]}),r.jsxs(fe,{value:c,onValueChange:d,children:[r.jsx(ue,{title:"Фильтр по статусу",children:r.jsx(me,{placeholder:"Статус"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все статусы"}),r.jsx(C,{value:"completed",children:"Выполнено"}),r.jsx(C,{value:"pending",children:"Ожидает"}),r.jsx(C,{value:"processing",children:"В обработке"}),r.jsx(C,{value:"failed",children:"Ошибка"}),r.jsx(C,{value:"cancelled",children:"Отменено"})]})]}),r.jsxs(fe,{value:p,onValueChange:N,children:[r.jsx(ue,{title:"Фильтр по типу",children:r.jsx(me,{placeholder:"Тип"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все типы"}),r.jsx(C,{value:"deposit",children:"Пополнение"}),r.jsx(C,{value:"payout",children:"Выплата"}),r.jsx(C,{value:"hold",children:"Холд"}),r.jsx(C,{value:"cancel",children:"Отмена"}),r.jsx(C,{value:"correction",children:"Корректировка"})]})]}),r.jsxs(fe,{value:k,onValueChange:S,children:[r.jsx(ue,{title:"Фильтр по валюте",children:r.jsx(me,{placeholder:"Валюта"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все валюты"}),r.jsx(C,{value:"USD",children:"USD"}),r.jsx(C,{value:"EUR",children:"EUR"}),r.jsx(C,{value:"USDT",children:"USDT"}),r.jsx(C,{value:"BTC",children:"BTC"})]})]}),r.jsxs(fe,{value:P,onValueChange:_,children:[r.jsx(ue,{title:"Фильтр по методу",children:r.jsx(me,{placeholder:"Метод"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все методы"}),r.jsx(C,{value:"USDT",children:"USDT"}),r.jsx(C,{value:"Crypto",children:"Crypto"}),r.jsx(C,{value:"Wire",children:"Wire"}),r.jsx(C,{value:"Card",children:"Card"}),r.jsx(C,{value:"Payeer",children:"Payeer"}),r.jsx(C,{value:"Qiwi",children:"Qiwi"}),r.jsx(C,{value:"YuMoney",children:"ЮMoney"})]})]}),r.jsx(D,{variant:"outline",onClick:()=>{o(""),d("all"),N("all"),S("all"),_("all")},"data-testid":"button-clear-filters",title:"Очистить фильтры",children:"Очистить"})]})})}),r.jsxs(q,{className:"w-full",children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(cx,{className:"w-5 h-5"}),"История транзакций (",Ie.length,")"]})}),r.jsx(W,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"ID"}),r.jsx(Z,{children:"Тип"}),r.jsx(Z,{children:"Кому / От кого"}),r.jsx(Z,{children:"Сумма"}),r.jsx(Z,{children:"Дата и время"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Метод оплаты"}),r.jsx(Z,{children:"Примечание"}),r.jsx(Z,{children:"Действия"})]})}),r.jsx(It,{children:Ie.map(I=>{var J;return r.jsxs(De,{children:[r.jsxs(H,{className:"font-mono text-sm",children:[I.id.slice(0,8),"..."]}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[K(I.type),r.jsx("span",{className:"capitalize",children:I.type})]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-semibold",children:((J=I.user.firstName)==null?void 0:J.charAt(0))||I.user.username.charAt(0)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:I.user.username}),r.jsx("div",{className:"text-sm text-gray-500",children:I.user.email})]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"font-medium",children:[I.amount>=0?"+":"","$",I.amount.toLocaleString()," ",I.currency]})}),r.jsx(H,{children:r.jsx("div",{className:"text-sm",children:new Date(I.createdAt).toLocaleString("ru-RU")})}),r.jsx(H,{children:st(I.status)}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[Me(I.paymentMethod),r.jsx("span",{children:I.paymentMethod})]})}),r.jsx(H,{children:r.jsx("div",{className:"max-w-xs truncate text-sm text-gray-500",children:I.description||"—"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(D,{size:"icon",variant:"ghost",onClick:()=>{U(I),e({title:"Просмотр транзакции",description:`Детали транзакции ${I.id}`})},title:"Просмотр","data-testid":`button-view-transaction-${I.id}`,children:r.jsx(ir,{className:"w-4 h-4"})}),I.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx(D,{size:"icon",variant:"ghost",onClick:()=>be.mutate({transactionId:I.id,status:"completed",note:"Approved by admin"}),title:"Одобрить","data-testid":`button-approve-transaction-${I.id}`,children:r.jsx(ur,{className:"w-4 h-4 text-green-600"})}),r.jsx(D,{size:"icon",variant:"ghost",onClick:()=>be.mutate({transactionId:I.id,status:"failed",note:"Rejected by admin"}),title:"Отклонить","data-testid":`button-reject-transaction-${I.id}`,children:r.jsx(Kt,{className:"w-4 h-4 text-red-600"})})]}),r.jsx(D,{size:"icon",variant:"ghost",onClick:()=>be.mutate({transactionId:I.id,status:"refunded",note:"Refunded by admin"}),title:"Возврат","data-testid":`button-refund-transaction-${I.id}`,children:r.jsx(Vt,{className:"w-4 h-4 text-orange-600"})})]})})]},I.id)})})]})})})]})]}),a==="payouts"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Выплаты партнёрам"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Запросы на выплату от партнёров"})]}),r.jsx("div",{className:"flex space-x-2",children:M.length>0&&r.jsxs(D,{onClick:()=>{M.forEach(I=>{pe.mutate({payoutId:I,action:"approve",note:"Bulk approval by admin"})}),A([]),e({title:"Массовая выплата",description:`${M.length} выплат одобрено`})},className:"bg-green-600 hover:bg-green-700",title:"Массовая выплата","data-testid":"button-bulk-approve",disabled:pe.isPending,children:[r.jsx(cs,{className:"w-4 h-4 mr-2"}),pe.isPending?"Обработка...":`Выплатить выбранные (${M.length})`]})})]}),r.jsx(q,{className:"w-full",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск выплат...",value:l,onChange:I=>o(I.target.value),className:"pl-10",title:"Поиск выплат"})]}),r.jsxs(fe,{value:c,onValueChange:d,children:[r.jsx(ue,{title:"Фильтр по статусу",children:r.jsx(me,{placeholder:"Статус"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все статусы"}),r.jsx(C,{value:"pending",children:"Ожидает"}),r.jsx(C,{value:"approved",children:"Одобрено"}),r.jsx(C,{value:"rejected",children:"Отказ"}),r.jsx(C,{value:"completed",children:"Выплачено"})]})]}),r.jsxs(fe,{value:k,onValueChange:S,children:[r.jsx(ue,{title:"Фильтр по валюте",children:r.jsx(me,{placeholder:"Валюта"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все валюты"}),r.jsx(C,{value:"USD",children:"USD"}),r.jsx(C,{value:"EUR",children:"EUR"}),r.jsx(C,{value:"USDT",children:"USDT"}),r.jsx(C,{value:"BTC",children:"BTC"})]})]}),r.jsxs(fe,{value:P,onValueChange:_,children:[r.jsx(ue,{title:"Фильтр по методу",children:r.jsx(me,{placeholder:"Метод"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все методы"}),r.jsx(C,{value:"USDT",children:"USDT"}),r.jsx(C,{value:"BTC",children:"BTC"}),r.jsx(C,{value:"Qiwi",children:"Qiwi"}),r.jsx(C,{value:"Payeer",children:"Payeer"}),r.jsx(C,{value:"YuMoney",children:"ЮMoney"})]})]}),r.jsx(D,{variant:"outline",onClick:()=>{o(""),d("all"),S("all"),_("all")},title:"Очистить фильтры",children:"Очистить"})]})})}),r.jsxs(q,{className:"w-full",children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(cs,{className:"w-5 h-5"}),"Запросы на выплату (",ae.length,")"]})}),r.jsx(W,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{className:"w-12",children:r.jsx(dn,{checked:M.length===ae.length&&ae.length>0,onCheckedChange:I=>{A(I?ae.map(J=>J.id):[])},title:"Выбрать все"})}),r.jsx(Z,{children:"ФИО / Название"}),r.jsx(Z,{children:"Сумма"}),r.jsx(Z,{children:"Кошелёк / Реквизиты"}),r.jsx(Z,{children:"Метод"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Дата запроса"}),r.jsx(Z,{children:"Действия"})]})}),r.jsx(It,{children:ae.map(I=>{var J;return r.jsxs(De,{children:[r.jsx(H,{children:r.jsx(dn,{checked:M.includes(I.id),onCheckedChange:xe=>{A(xe?[...M,I.id]:M.filter(_e=>_e!==I.id))}})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-semibold",children:((J=I.user.firstName)==null?void 0:J.charAt(0))||I.user.username.charAt(0)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:I.user.firstName&&I.user.lastName?`${I.user.firstName} ${I.user.lastName}`:I.user.username}),r.jsx("div",{className:"text-sm text-gray-500",children:I.user.email})]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"font-medium",children:["$",I.amount.toLocaleString()," ",I.currency]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(D,{size:"icon",variant:"ghost",onClick:()=>navigator.clipboard.writeText(I.walletAddress),title:"Копировать адрес",children:r.jsx(Yr,{className:"w-4 h-4"})}),r.jsx("span",{className:"font-mono text-sm max-w-xs truncate",children:I.walletAddress})]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[Me(I.paymentMethod),r.jsx("span",{children:I.paymentMethod})]})}),r.jsx(H,{children:st(I.status)}),r.jsx(H,{children:r.jsx("div",{className:"text-sm",children:new Date(I.requestedAt).toLocaleString("ru-RU")})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[I.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx(D,{size:"icon",variant:"ghost",onClick:()=>{$(I),pe.mutate({payoutId:I.id,action:"approve",note:"Approved by admin"})},title:"Одобрить","data-testid":`button-approve-${I.id}`,children:r.jsx(ur,{className:"w-4 h-4 text-green-600"})}),r.jsx(D,{size:"icon",variant:"ghost",onClick:()=>{$(I),pe.mutate({payoutId:I.id,action:"reject",note:"Rejected by admin"})},title:"Отклонить","data-testid":`button-reject-${I.id}`,children:r.jsx(Kt,{className:"w-4 h-4 text-red-600"})})]}),I.status==="approved"&&r.jsx(D,{size:"icon",variant:"ghost",onClick:()=>{$(I),pe.mutate({payoutId:I.id,action:"complete",note:"Payment completed by admin"})},title:"Отметить как выплачено","data-testid":`button-complete-${I.id}`,children:r.jsx(cs,{className:"w-4 h-4 text-blue-600"})})]})})]},I.id)})})]})})})]})]}),a==="deposits"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Пополнения от рекламодателей"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"История пополнений и создание инвойсов"})]}),r.jsxs(_t,{open:T,onOpenChange:B,children:[r.jsx(Ja,{asChild:!0,children:r.jsxs(D,{"data-testid":"button-create-invoice",title:"Создать инвойс",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Создать инвойс"]})}),r.jsxs(kt,{children:[r.jsxs(St,{children:[r.jsx(Ct,{children:"Создать инвойс для рекламодателя"}),r.jsx(Br,{children:"Создайте инвойс для пополнения баланса рекламодателя"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"advertiser",children:"Рекламодатель"}),r.jsxs(fe,{children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите рекламодателя"})}),r.jsx(he,{})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"amount",children:"Сумма"}),r.jsx(ne,{type:"number",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"currency",children:"Валюта"}),r.jsxs(fe,{children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите валюту"})}),r.jsxs(he,{children:[r.jsx(C,{value:"USD",children:"USD"}),r.jsx(C,{value:"EUR",children:"EUR"}),r.jsx(C,{value:"USDT",children:"USDT"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"description",children:"Описание"}),r.jsx(gt,{placeholder:"Описание инвойса..."})]})]}),r.jsxs(go,{children:[r.jsx(D,{variant:"outline",onClick:()=>B(!1),children:"Отмена"}),r.jsx(D,{onClick:()=>{const I={advertiserId:"adv-1",amount:1e3,currency:"USD",description:"Platform deposit invoice"};le.mutate(I)},disabled:le.isPending,"data-testid":"button-submit-invoice",children:le.isPending?"Создание...":"Создать инвойс"})]})]})]})]}),r.jsxs(q,{className:"w-full",children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx($a,{className:"w-5 h-5"}),"История пополнений (",ce.length,")"]})}),r.jsx(W,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Рекламодатель"}),r.jsx(Z,{children:"Сумма"}),r.jsx(Z,{children:"Валюта"}),r.jsx(Z,{children:"Метод оплаты"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Дата"}),r.jsx(Z,{children:"Действия"})]})}),r.jsx(It,{children:ce.map(I=>{var J,xe;return r.jsxs(De,{children:[r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-semibold",children:((J=I.advertiser)==null?void 0:J.charAt(0))||"A"}),r.jsx("span",{className:"font-medium",children:I.advertiser})]})}),r.jsx(H,{children:r.jsxs("div",{className:"font-medium",children:["$",((xe=I.amount)==null?void 0:xe.toLocaleString())||"0"]})}),r.jsx(H,{children:I.currency}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[Me(I.method),r.jsx("span",{children:I.method})]})}),r.jsx(H,{children:st(I.status)}),r.jsx(H,{children:r.jsx("div",{className:"text-sm",children:new Date(I.createdAt).toLocaleString("ru-RU")})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(D,{size:"icon",variant:"ghost",title:"Просмотр","data-testid":`button-view-deposit-${I.id}`,onClick:()=>{e({title:"Просмотр депозита",description:`Депозит ${I.id} от ${I.advertiser}`})},children:r.jsx(ir,{className:"w-4 h-4"})}),I.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx(D,{size:"icon",variant:"ghost",title:"Подтвердить","data-testid":`button-approve-deposit-${I.id}`,onClick:()=>{e({title:"Депозит подтвержден",description:`Депозит ${I.id} успешно подтвержден`})},children:r.jsx(ur,{className:"w-4 h-4 text-green-600"})}),r.jsx(D,{size:"icon",variant:"ghost",title:"Отклонить","data-testid":`button-reject-deposit-${I.id}`,onClick:()=>{e({title:"Депозит отклонен",description:`Депозит ${I.id} отклонен`,variant:"destructive"})},children:r.jsx(Kt,{className:"w-4 h-4 text-red-600"})})]})]})})]},I.id)})})]})})})]})]}),a==="commission"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(q,{className:"w-full",children:[r.jsx(re,{children:r.jsx(se,{className:"text-lg",children:"Общий доход платформы"})}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["$",((V=G==null?void 0:G.totalPlatformRevenue)==null?void 0:V.toLocaleString())||"0"]}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"За выбранный период"})]})]}),r.jsxs(q,{className:"w-full",children:[r.jsx(re,{children:r.jsx(se,{className:"text-lg",children:"Средняя комиссия"})}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[(G==null?void 0:G.averageCommission)||"0","%"]}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Процент от оборота"})]})]}),r.jsxs(q,{className:"w-full",children:[r.jsx(re,{children:r.jsx(se,{className:"text-lg",children:"Прибыль с учётом фрода"})}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[(G==null?void 0:G.profitMargin)||"0","%"]}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"С учётом возвратов и холдов"})]})]})]}),r.jsxs(q,{className:"w-full",children:[r.jsxs(re,{children:[r.jsx(se,{children:"Комиссия по офферам"}),r.jsx(Ze,{children:"Доход платформы с каждого оффера"})]}),r.jsx(W,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Оффер"}),r.jsx(Z,{children:"Цена рекламодателя"}),r.jsx(Z,{children:"Выплата партнёру"}),r.jsx(Z,{children:"Комиссия платформы"}),r.jsx(Z,{children:"Конверсий"}),r.jsx(Z,{children:"Общий доход"})]})}),r.jsx(It,{children:ye.map(I=>{var J;return r.jsxs(De,{children:[r.jsxs(H,{children:[r.jsx("div",{className:"font-medium",children:I.offerName}),r.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",I.offerId]})]}),r.jsx(H,{children:r.jsxs("div",{className:"font-medium text-green-600",children:["$",I.advertiserPrice]})}),r.jsx(H,{children:r.jsxs("div",{className:"font-medium text-red-600",children:["$",I.partnerPayout]})}),r.jsxs(H,{children:[r.jsxs("div",{className:"font-bold text-blue-600",children:["$",I.platformCommission]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[I.commissionPercent,"%"]})]}),r.jsx(H,{children:r.jsx("div",{className:"font-medium",children:I.conversions})}),r.jsx(H,{children:r.jsxs("div",{className:"font-bold",children:["$",(J=I.totalRevenue)==null?void 0:J.toLocaleString()]})})]},I.offerId)})})]})})})]})]}),a==="crypto"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:$e.map(I=>r.jsx(q,{className:"bg-gradient-to-br from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:r.jsx(od,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:I.currency}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:parseFloat(I.balance).toFixed(8)})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Заблокировано"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:parseFloat(I.lockedBalance).toFixed(8)})]})]})})},I.currency))}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs(se,{className:"flex items-center space-x-2",children:[r.jsx(Oc,{className:"w-5 h-5"}),r.jsx("span",{children:"Криптокошельки"})]}),r.jsx(Ze,{children:"Управление криптокошельками платформы"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(D,{variant:"outline",onClick:()=>h(!0),"data-testid":"button-deposit-crypto",title:"Пополнить",children:[r.jsx(so,{className:"w-4 h-4 mr-2"}),"Пополнить"]}),r.jsxs(D,{variant:"outline",onClick:()=>m(!0),"data-testid":"button-withdraw-crypto",title:"Вывести",children:[r.jsx($a,{className:"w-4 h-4 mr-2"}),"Вывести"]}),r.jsxs(D,{className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-create-wallet",title:"Создать кошелёк",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Новый кошелёк"]})]})]})}),r.jsx(W,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex space-x-4",children:[r.jsxs(fe,{children:[r.jsx(ue,{className:"w-48",children:r.jsx(me,{placeholder:"Валюта"})}),r.jsxs(he,{children:[r.jsx(C,{value:"BTC",children:"Bitcoin (BTC)"}),r.jsx(C,{value:"ETH",children:"Ethereum (ETH)"}),r.jsx(C,{value:"USDT",children:"Tether (USDT)"}),r.jsx(C,{value:"USDC",children:"USD Coin (USDC)"})]})]}),r.jsxs(fe,{children:[r.jsx(ue,{className:"w-48",children:r.jsx(me,{placeholder:"Тип кошелька"})}),r.jsxs(he,{children:[r.jsx(C,{value:"platform",children:"Платформенный"}),r.jsx(C,{value:"user",children:"Пользовательский"})]})]}),r.jsxs(fe,{children:[r.jsx(ue,{className:"w-48",children:r.jsx(me,{placeholder:"Статус"})}),r.jsxs(he,{children:[r.jsx(C,{value:"active",children:"Активный"}),r.jsx(C,{value:"suspended",children:"Приостановлен"}),r.jsx(C,{value:"maintenance",children:"Обслуживание"})]})]})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Валюта"}),r.jsx(Z,{children:"Адрес"}),r.jsx(Z,{children:"Тип"}),r.jsx(Z,{children:"Баланс"}),r.jsx(Z,{children:"Заблокировано"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Действия"})]})}),r.jsx(It,{children:ke.map(I=>r.jsxs(De,{children:[r.jsx(H,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"p-1 bg-orange-100 dark:bg-orange-900/30 rounded",children:r.jsx(od,{className:"w-4 h-4 text-orange-600"})}),r.jsx("span",{className:"font-medium",children:I.currency})]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:I.address}),r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(I.address),"data-testid":"button-copy-address",title:"Копировать адрес",children:r.jsx(Yr,{className:"w-4 h-4"})})]})}),r.jsx(H,{children:r.jsx(ie,{variant:I.walletType==="platform"?"default":"secondary",children:I.walletType==="platform"?"Платформенный":"Пользовательский"})}),r.jsx(H,{className:"font-mono",children:parseFloat(I.balance).toFixed(8)}),r.jsx(H,{className:"font-mono",children:parseFloat(I.lockedBalance).toFixed(8)}),r.jsx(H,{children:r.jsx(ie,{variant:I.status==="active"?"default":I.status==="suspended"?"destructive":"secondary",children:I.status==="active"?"Активный":I.status==="suspended"?"Приостановлен":"Обслуживание"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(D,{variant:"ghost",size:"sm","data-testid":"button-sync-wallet",title:"Синхронизировать",children:r.jsx(Vt,{className:"w-4 h-4"})}),r.jsx(D,{variant:"ghost",size:"sm","data-testid":"button-view-wallet",title:"Просмотр",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsx(D,{variant:"ghost",size:"sm","data-testid":"button-edit-wallet",title:"Редактировать",children:r.jsx(Ts,{className:"w-4 h-4"})})]})})]},I.id))})]})})]})})]})]}),a==="reports"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs(q,{className:"w-full",children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(es,{className:"w-5 h-5"}),"Экспорт транзакций"]}),r.jsx(Ze,{children:"Выгрузка всех транзакций в CSV/XLSX"})]}),r.jsx(W,{children:r.jsxs(D,{onClick:()=>{de("transactions"),e({title:"Экспорт транзакций",description:"Файл с транзакциями готовится для скачивания"})},className:"w-full",title:"Экспорт транзакций","data-testid":"button-export-transactions",children:[r.jsx(br,{className:"w-4 h-4 mr-2"}),"Скачать транзакции"]})})]}),r.jsxs(q,{className:"w-full",children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(cs,{className:"w-5 h-5"}),"Экспорт выплат"]}),r.jsx(Ze,{children:"Выгрузка данных о выплатах партнёрам"})]}),r.jsx(W,{children:r.jsxs(D,{onClick:()=>{de("payouts"),e({title:"Экспорт выплат",description:"Файл с выплатами готовится для скачивания"})},className:"w-full",title:"Экспорт выплат","data-testid":"button-export-payouts",children:[r.jsx(br,{className:"w-4 h-4 mr-2"}),"Скачать выплаты"]})})]}),r.jsxs(q,{className:"w-full",children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Rt,{className:"w-5 h-5"}),"Отчёт по комиссии"]}),r.jsx(Ze,{children:"Данные о доходах платформы"})]}),r.jsx(W,{children:r.jsxs(D,{onClick:()=>{de("commission"),e({title:"Экспорт комиссии",description:"Файл с данными комиссии готовится для скачивания"})},className:"w-full",title:"Экспорт комиссии","data-testid":"button-export-commission",children:[r.jsx(br,{className:"w-4 h-4 mr-2"}),"Скачать комиссию"]})})]})]}),r.jsxs(q,{className:"w-full",children:[r.jsxs(re,{children:[r.jsx(se,{children:"Автоматические отчёты"}),r.jsx(Ze,{children:"Настройка автоматической генерации отчётов"})]}),r.jsx(W,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Месячный отчёт по финансам"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Автоматическая отправка каждый месяц"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ie,{className:"bg-green-100 text-green-800",children:"Активен"}),r.jsx(D,{size:"sm",variant:"outline",onClick:()=>{e({title:"Настройка месячного отчёта",description:"Открыта панель настройки автоматических отчётов по финансам"})},"data-testid":"button-configure-monthly-report",title:"Настроить месячный отчёт",children:"Настроить"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Отчёт для бухгалтера"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Еженедельная выгрузка данных"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ie,{className:"bg-gray-100 text-gray-800",children:"Неактивен"}),r.jsx(D,{size:"sm",variant:"outline",onClick:()=>{e({title:"Настройка отчёта для бухгалтера",description:"Открыта панель настройки еженедельных отчётов"})},"data-testid":"button-configure-accounting-report",title:"Настроить отчёт для бухгалтера",children:"Настроить"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Smart-уведомления"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Уведомления о важных событиях"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ie,{className:"bg-green-100 text-green-800",children:"Активен"}),r.jsx(D,{size:"sm",variant:"outline",onClick:()=>{e({title:"Настройка Smart-уведомлений",description:"Открыта панель настройки умных уведомлений"})},"data-testid":"button-configure-smart-notifications",title:"Настроить Smart-уведомления",children:"Настроить"})]})]})]})})]})]})]}),r.jsx(_t,{open:u,onOpenChange:h,children:r.jsxs(kt,{className:"max-w-md",children:[r.jsxs(St,{children:[r.jsx(Ct,{children:"Пополнение криптокошелька"}),r.jsx(Br,{children:"Внесение средств на выбранный криптокошелёк"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"deposit-currency",children:"Валюта"}),r.jsxs(fe,{children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите валюту"})}),r.jsxs(he,{children:[r.jsx(C,{value:"BTC",children:"Bitcoin (BTC)"}),r.jsx(C,{value:"ETH",children:"Ethereum (ETH)"}),r.jsx(C,{value:"USDT",children:"Tether (USDT)"}),r.jsx(C,{value:"USDC",children:"USD Coin (USDC)"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"deposit-amount",children:"Сумма"}),r.jsx(ne,{id:"deposit-amount",type:"number",step:"0.00000001",placeholder:"0.00000000",value:g,onChange:I=>x(I.target.value)})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"deposit-address",children:"Адрес отправителя"}),r.jsx(ne,{id:"deposit-address",placeholder:"Адрес кошелька отправителя",value:y,onChange:I=>b(I.target.value)})]})]}),r.jsxs(go,{children:[r.jsx(D,{variant:"outline",onClick:()=>h(!1),children:"Отмена"}),r.jsx(D,{onClick:async()=>{try{if(!(await fetch("/api/admin/crypto-deposit",{method:"POST",body:JSON.stringify({currency:"BTC",amount:parseFloat(g),fromAddress:y}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}})).ok)throw new Error("Failed to deposit");e({title:"Пополнение оформлено",description:`Внесено ${g} BTC`}),h(!1),x(""),b(""),s.invalidateQueries({queryKey:["/api/admin/crypto-portfolio"]})}catch{e({title:"Ошибка пополнения",description:"Не удалось внести средства",variant:"destructive"})}},children:"Пополнить"})]})]})}),r.jsx(_t,{open:f,onOpenChange:m,children:r.jsxs(kt,{className:"max-w-md",children:[r.jsxs(St,{children:[r.jsx(Ct,{children:"Вывод криптовалюты"}),r.jsx(Br,{children:"Вывод средств с платформенного кошелька"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"withdraw-currency",children:"Валюта"}),r.jsxs(fe,{children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите валюту"})}),r.jsxs(he,{children:[r.jsx(C,{value:"BTC",children:"Bitcoin (BTC)"}),r.jsx(C,{value:"ETH",children:"Ethereum (ETH)"}),r.jsx(C,{value:"USDT",children:"Tether (USDT)"}),r.jsx(C,{value:"USDC",children:"USD Coin (USDC)"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"withdraw-amount",children:"Сумма"}),r.jsx(ne,{id:"withdraw-amount",type:"number",step:"0.00000001",placeholder:"0.00000000",value:w,onChange:I=>j(I.target.value)})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"withdraw-address",children:"Адрес получателя"}),r.jsx(ne,{id:"withdraw-address",placeholder:"Адрес кошелька получателя",value:y,onChange:I=>b(I.target.value)})]})]}),r.jsxs(go,{children:[r.jsx(D,{variant:"outline",onClick:()=>m(!1),children:"Отмена"}),r.jsx(D,{onClick:async()=>{try{if(!(await fetch("/api/admin/crypto-withdraw",{method:"POST",body:JSON.stringify({currency:"BTC",amount:parseFloat(w),toAddress:y}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}})).ok)throw new Error("Failed to withdraw");e({title:"Вывод оформлен",description:`Выведено ${w} BTC`}),m(!1),j(""),b(""),s.invalidateQueries({queryKey:["/api/admin/crypto-portfolio"]})}catch{e({title:"Ошибка вывода",description:"Не удалось вывести средства",variant:"destructive"})}},children:"Вывести"})]})]})})]})]})]})}function U5e(){var y,b;const{token:e}=tr(),{t}=Wt(),[n,s]=v.useState(""),[a,i]=v.useState("all"),[l,o]=v.useState("all"),[c,d]=v.useState(null),{data:u,isLoading:h}=Fe({queryKey:["/api/admin/fraud-alerts"],queryFn:async()=>{const p=await fetch("/api/admin/fraud-alerts",{headers:{Authorization:`Bearer ${e}`}});if(!p.ok)throw new Error("Failed to fetch fraud alerts");return p.json()}}),f=(u==null?void 0:u.filter(p=>{var P,_,R,O,M,A,T,B;const N=n===""||((_=(P=p.user)==null?void 0:P.username)==null?void 0:_.toLowerCase().includes(n.toLowerCase()))||((O=(R=p.user)==null?void 0:R.email)==null?void 0:O.toLowerCase().includes(n.toLowerCase()))||((A=(M=p.offer)==null?void 0:M.name)==null?void 0:A.toLowerCase().includes(n.toLowerCase()))||((T=p.description)==null?void 0:T.toLowerCase().includes(n.toLowerCase()))||((B=p.type)==null?void 0:B.toLowerCase().includes(n.toLowerCase())),k=a==="all"||p.severity===a,S=l==="all"||(p.isResolved?"resolved":"pending")===l;return N&&k&&S}))||[],{data:m}=Fe({queryKey:["/api/admin/fraud-metrics"],queryFn:async()=>{const p=await fetch("/api/admin/fraud-metrics",{headers:{Authorization:`Bearer ${e}`}});if(!p.ok)throw new Error("Failed to fetch fraud metrics");return p.json()}}),g=Oe({mutationFn:async({alertId:p,isResolved:N})=>{const k=await fetch(`/api/admin/fraud-alerts/${p}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({isResolved:N})});if(!k.ok)throw new Error("Failed to update fraud alert");return k.json()},onSuccess:()=>{no.invalidateQueries({queryKey:["/api/admin/fraud-alerts"]}),no.invalidateQueries({queryKey:["/api/admin/fraud-metrics"]})}}),x=p=>{switch(p){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},w=p=>{switch(p){case"suspicious_activity":return r.jsx(Vr,{className:"w-4 h-4"});case"high_velocity":return r.jsx(Rt,{className:"w-4 h-4"});case"duplicate_conversion":return r.jsx(or,{className:"w-4 h-4"});case"geo_mismatch":return r.jsx(mr,{className:"w-4 h-4"});default:return r.jsx(Ka,{className:"w-4 h-4"})}},j=[{label:"active_alerts",value:((y=m==null?void 0:m.activeAlerts)==null?void 0:y.toString())||"0",change:"+5",changeType:"increase",icon:r.jsx(Ka,{className:"w-5 h-5"}),iconBg:"bg-red-50"},{label:"fraud_rate",value:`${(m==null?void 0:m.fraudRate)||"0"}%`,change:"-0.5%",changeType:"decrease",icon:r.jsx(Dt,{className:"w-5 h-5"}),iconBg:"bg-blue-50"},{label:"blocked_revenue",value:`$${(m==null?void 0:m.blockedRevenue)||"0"}`,change:"+$1,250",changeType:"increase",icon:r.jsx(Rt,{className:"w-5 h-5"}),iconBg:"bg-green-50"},{label:"resolved_today",value:((b=m==null?void 0:m.resolvedToday)==null?void 0:b.toString())||"0",change:"+3",changeType:"increase",icon:r.jsx(on,{className:"w-5 h-5"}),iconBg:"bg-purple-50"}];return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:t("fraud_alerts")}),r.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 dark:bg-gray-900 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t("fraud_detection_management")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t("monitor_investigate_fraud_alerts")})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:j.map((p,N)=>r.jsx(q,{"data-testid":`metric-card-${p.label}`,children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t(p.label)}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white","data-testid":`metric-value-${p.label}`,children:p.value}),r.jsx("p",{className:`text-sm mt-1 ${p.changeType==="increase"?"text-red-600":"text-green-600"}`,children:p.change})]}),r.jsx("div",{className:`${p.iconBg} p-3 rounded-lg`,children:p.icon})]})})},N))}),r.jsx(q,{className:"mb-6",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск по пользователю, офферу или описанию...",value:n,onChange:p=>s(p.target.value),className:"pl-10","data-testid":"input-search-alerts",title:"Поиск алертов"})]}),r.jsxs(fe,{value:a,onValueChange:i,children:[r.jsx(ue,{className:"w-[180px]","data-testid":"select-filter-severity",title:"Фильтр по важности",children:r.jsx(me,{placeholder:t("filter_by_severity")})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:t("all_severities")}),r.jsx(C,{value:"high",children:t("high")}),r.jsx(C,{value:"medium",children:t("medium")}),r.jsx(C,{value:"low",children:t("low")})]})]}),r.jsxs(fe,{value:l,onValueChange:o,children:[r.jsx(ue,{className:"w-[180px]","data-testid":"select-filter-status",title:"Фильтр по статусу",children:r.jsx(me,{placeholder:t("filter_by_status")})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:t("all_statuses")}),r.jsx(C,{value:"pending",children:t("pending")}),r.jsx(C,{value:"resolved",children:t("resolved")})]})]}),r.jsx(D,{variant:"outline",onClick:()=>{s(""),i("all"),o("all")},"data-testid":"button-clear-filters",title:"Очистить фильтры",children:t("clear_filters")})]})})}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Dt,{className:"w-5 h-5"}),t("fraud_alerts")," (",(f==null?void 0:f.length)||0,")"]})}),r.jsx(W,{children:h?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:t("type")}),r.jsx(Z,{children:t("user")}),r.jsx(Z,{children:t("offer")}),r.jsx(Z,{children:t("severity")}),r.jsx(Z,{children:t("status")}),r.jsx(Z,{children:t("date")}),r.jsx(Z,{className:"text-right",children:t("actions")})]})}),r.jsx(It,{children:f==null?void 0:f.map(p=>{var N,k,S,P,_,R,O,M;return r.jsxs(De,{"data-testid":`row-alert-${p.id}`,children:[r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[w(p.type),r.jsx("span",{className:"capitalize","data-testid":`text-type-${p.id}`,children:t(p.type)})]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center text-white text-sm font-semibold",children:((k=(N=p.user)==null?void 0:N.firstName)==null?void 0:k.charAt(0))||((P=(S=p.user)==null?void 0:S.username)==null?void 0:P.charAt(0))||"U"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-white","data-testid":`text-username-${p.id}`,children:((_=p.user)==null?void 0:_.username)||"Unknown"}),r.jsx("div",{className:"text-sm text-gray-500",children:(R=p.user)==null?void 0:R.email})]})]})}),r.jsx(H,{children:r.jsxs("div",{"data-testid":`text-offer-${p.id}`,children:[((O=p.offer)==null?void 0:O.name)||"Unknown Offer",r.jsx("div",{className:"text-sm text-gray-500",children:(M=p.offer)==null?void 0:M.category})]})}),r.jsx(H,{children:r.jsx(ie,{className:x(p.severity),"data-testid":`severity-${p.id}`,children:t(p.severity)})}),r.jsx(H,{children:r.jsx(ie,{variant:p.isResolved?"default":"secondary","data-testid":`status-${p.id}`,children:p.isResolved?t("resolved"):t("pending")})}),r.jsx(H,{"data-testid":`text-date-${p.id}`,children:new Date(p.createdAt).toLocaleDateString()}),r.jsx(H,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsxs(_t,{children:[r.jsx(Ja,{asChild:!0,children:r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>d(p),"data-testid":`button-view-${p.id}`,children:r.jsx(ir,{className:"w-4 h-4"})})}),r.jsxs(kt,{className:"max-w-2xl",children:[r.jsx(St,{children:r.jsx(Ct,{children:t("fraud_alert_details")})}),c&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("type")}),r.jsx("p",{className:"font-medium",children:t(c.type)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("severity")}),r.jsx(ie,{className:x(c.severity),children:t(c.severity)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("description")}),r.jsx("p",{className:"mt-1",children:c.description})]}),c.data&&r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("additional_data")}),r.jsx("pre",{className:"mt-1 p-3 bg-gray-100 rounded text-sm overflow-auto",children:JSON.stringify(c.data,null,2)})]})]})]})]}),!p.isResolved&&r.jsx(D,{size:"sm",variant:"outline",onClick:()=>g.mutate({alertId:p.id,isResolved:!0}),disabled:g.isPending,"data-testid":`button-resolve-${p.id}`,children:r.jsx(on,{className:"w-4 h-4"})})]})})]},p.id)})})]})})]})]})})]})]})}function B5e(){const{user:e,token:t}=tr(),{isCollapsed:n}=Qs(),{toast:s}=at(),a=Et(),[i,l]=v.useState("templates"),[o,c]=v.useState(!1),[d,u]=v.useState(!1),[h,f]=v.useState(!1),[m,g]=v.useState(null),[x,w]=v.useState(null),[j,y]=v.useState({level:"all",status:"all",search:""}),[b,p]=v.useState({status:"all",offerId:"all",dateFrom:"",dateTo:"",search:""}),{data:N=[],isLoading:k}=Fe({queryKey:["/api/admin/postback-templates",j],queryFn:async()=>{const $=new URLSearchParams;j.level!=="all"&&$.append("level",j.level),j.status!=="all"&&$.append("status",j.status),j.search&&$.append("search",j.search);const G=await fetch(`/api/admin/postback-templates?${$}`,{headers:{Authorization:`Bearer ${t}`}});if(!G.ok)throw new Error("Failed to fetch postback templates");return G.json()}}),{data:S=[],isLoading:P}=Fe({queryKey:["/api/admin/postback-logs",b],queryFn:async()=>{const $=new URLSearchParams;b.status!=="all"&&$.append("status",b.status),b.offerId!=="all"&&$.append("offerId",b.offerId),b.dateFrom&&$.append("dateFrom",b.dateFrom),b.dateTo&&$.append("dateTo",b.dateTo),b.search&&$.append("search",b.search);const G=await fetch(`/api/admin/postback-logs?${$}`,{headers:{Authorization:`Bearer ${t}`}});if(!G.ok)throw new Error("Failed to fetch postback logs");return G.json()}}),{data:_=[]}=Fe({queryKey:["/api/admin/offers"],queryFn:async()=>{const $=await fetch("/api/admin/offers",{headers:{Authorization:`Bearer ${t}`}});if(!$.ok)throw new Error("Failed to fetch offers");return $.json()}}),R=Oe({mutationFn:async $=>Re("/api/admin/postback-templates","POST",$),onSuccess:()=>{a.invalidateQueries({predicate:$=>$.queryKey[0]==="/api/admin/postback-templates"}),c(!1),s({title:"Постбек создан",description:"Новый постбек успешно добавлен в систему"})}}),O=Oe({mutationFn:async({id:$,data:G})=>Re(`/api/admin/postback-templates/${$}`,"PATCH",G),onSuccess:()=>{a.invalidateQueries({predicate:$=>$.queryKey[0]==="/api/admin/postback-templates"}),u(!1),s({title:"Постбек обновлён",description:"Настройки постбека успешно сохранены"})}}),M=Oe({mutationFn:async $=>Re(`/api/admin/postback-templates/${$}`,"DELETE"),onSuccess:()=>{a.invalidateQueries({predicate:$=>$.queryKey[0]==="/api/admin/postback-templates"}),s({title:"Постбек удалён",description:"Постбек успешно удалён из системы",variant:"destructive"})}}),A=Oe({mutationFn:async $=>Re(`/api/admin/postback-logs/${$}/retry`,"POST"),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/postback-logs"]}),s({title:"Постбек отправлен",description:"Постбек поставлен в очередь на повторную отправку"})}}),T=$=>{const G={success:"text-green-700 bg-green-50 border-green-200",failed:"text-red-700 bg-red-50 border-red-200",pending:"text-yellow-700 bg-yellow-50 border-yellow-200",retry:"text-blue-700 bg-blue-50 border-blue-200"};return r.jsxs(ie,{className:G[$]||"text-gray-700 bg-gray-50 border-gray-200",children:[$==="success"&&r.jsx(ur,{className:"w-3 h-3 mr-1"}),$==="failed"&&r.jsx(Kt,{className:"w-3 h-3 mr-1"}),$==="pending"&&r.jsx(lr,{className:"w-3 h-3 mr-1"}),$==="retry"&&r.jsx(mu,{className:"w-3 h-3 mr-1"}),$==="success"?"Успешно":$==="failed"?"Ошибка":$==="pending"?"Ожидание":"Повтор"]})},B=$=>r.jsxs(ie,{variant:$==="global"?"default":"secondary",children:[$==="global"&&r.jsx(mr,{className:"w-3 h-3 mr-1"}),$==="offer"&&r.jsx(Gt,{className:"w-3 h-3 mr-1"}),$==="global"?"Глобальный":"Оффер"]}),z=$=>{navigator.clipboard.writeText($),s({title:"Скопировано",description:"URL скопирован в буфер обмена"})},U=[{date:"01.08",sent:145,successful:134,failed:11},{date:"02.08",sent:167,successful:159,failed:8},{date:"03.08",sent:189,successful:175,failed:14},{date:"04.08",sent:156,successful:144,failed:12}],E=[{name:"Успешно",value:412,color:"#10b981"},{name:"Ошибка",value:45,color:"#ef4444"},{name:"Ожидание",value:23,color:"#f59e0b"},{name:"Повтор",value:15,color:"#3b82f6"}];return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`transition-all duration-300 ${n?"ml-16":"ml-64"}`,children:[r.jsx(gn,{title:"Постбеки",breadcrumbs:[]}),r.jsxs("main",{className:"p-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Постбеки"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Управление постбеками и отслеживание доставки"})]}),r.jsxs(rn,{value:i,onValueChange:l,className:"space-y-6",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-3",children:[r.jsxs(We,{value:"templates",className:"flex items-center gap-2",children:[r.jsx(fr,{className:"w-4 h-4"}),"Настройки постбеков"]}),r.jsxs(We,{value:"logs",className:"flex items-center gap-2",children:[r.jsx(Vr,{className:"w-4 h-4"}),"История отправки"]}),r.jsxs(We,{value:"analytics",className:"flex items-center gap-2",children:[r.jsx(yr,{className:"w-4 h-4"}),"Аналитика"]})]}),r.jsxs(He,{value:"templates",className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center flex-1",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ne,{placeholder:"Поиск постбеков...",value:j.search,onChange:$=>y(G=>({...G,search:$.target.value})),className:"w-64","data-testid":"search-postbacks-input"}),r.jsx(D,{variant:"outline",size:"icon",title:"Фильтровать",children:r.jsx(As,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{value:j.level,onValueChange:$=>y(G=>({...G,level:$})),children:[r.jsx(ue,{className:"w-40","data-testid":"level-filter-select",children:r.jsx(me,{placeholder:"Уровень"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все уровни"}),r.jsx(C,{value:"global",children:"Глобальный"}),r.jsx(C,{value:"offer",children:"Оффер"})]})]}),r.jsxs(fe,{value:j.status,onValueChange:$=>y(G=>({...G,status:$})),children:[r.jsx(ue,{className:"w-40","data-testid":"status-filter-select",children:r.jsx(me,{placeholder:"Статус"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все статусы"}),r.jsx(C,{value:"active",children:"Активный"}),r.jsx(C,{value:"inactive",children:"Неактивный"})]})]})]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(D,{onClick:()=>c(!0),className:"bg-blue-600 hover:bg-blue-700","data-testid":"add-postback-btn",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Добавить постбек"]})})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"w-5 h-5"}),"Постбеки (",N.length,")"]}),r.jsx(Ze,{children:"Настройка и управление URL для отправки постбеков"})]}),r.jsx(W,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Название"}),r.jsx(Z,{children:"Уровень"}),r.jsx(Z,{children:"События"}),r.jsx(Z,{children:"URL"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Действия"})]})}),r.jsx(It,{children:k?r.jsx(De,{children:r.jsx(H,{colSpan:6,className:"text-center py-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Vt,{className:"w-4 h-4 animate-spin mr-2"}),"Загрузка постбеков..."]})})}):N.length===0?r.jsx(De,{children:r.jsx(H,{colSpan:6,className:"text-center py-8",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(fr,{className:"w-8 h-8 text-gray-400"}),r.jsx("p",{className:"text-gray-500",children:"Постбеки не найдены"}),r.jsx(D,{onClick:()=>c(!0),variant:"outline",size:"sm",children:"Добавить первый постбек"})]})})}):N.map($=>r.jsxs(De,{children:[r.jsx(H,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:$.name}),$.level==="offer"&&$.offerName&&r.jsxs("div",{className:"text-sm text-gray-500",children:["Оффер: ",$.offerName]})]})}),r.jsx(H,{children:B($.level)}),r.jsx(H,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:$.events.map(G=>r.jsx(ie,{variant:"outline",className:"text-xs",children:G==="lead"?"Лид":G==="sale"?"Продажа":G==="rejected"?"Отказ":G==="hold"?"Холд":G},G))})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2 max-w-xs",children:[r.jsx("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded truncate flex-1",children:$.url}),r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>z($.url),title:"Копировать URL","data-testid":`copy-url-${$.id}`,children:r.jsx(Yr,{className:"w-3 h-3"})})]})}),r.jsx(H,{children:r.jsx(ie,{variant:$.isActive?"default":"secondary",className:$.isActive?"text-green-700 bg-green-50 border-green-200":"text-gray-700 bg-gray-50 border-gray-200",children:$.isActive?r.jsxs(r.Fragment,{children:[r.jsx(pne,{className:"w-3 h-3 mr-1"}),"Активный"]}):r.jsxs(r.Fragment,{children:[r.jsx(mne,{className:"w-3 h-3 mr-1"}),"Неактивный"]})})}),r.jsx(H,{children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(D,{variant:"outline",size:"sm",onClick:()=>{g($),u(!0)},title:"Редактировать постбек","data-testid":`edit-postback-${$.id}`,className:"hover:bg-blue-50 hover:text-blue-700 hover:border-blue-300",children:r.jsx(Ts,{className:"w-3 h-3"})}),r.jsx(D,{variant:"outline",size:"sm",onClick:()=>M.mutate($.id),title:"Удалить постбек","data-testid":`delete-postback-${$.id}`,className:"hover:bg-red-50 hover:text-red-700 hover:border-red-300",children:r.jsx(wr,{className:"w-3 h-3"})})]})})]},$.id))})]})})})]})]}),r.jsxs(He,{value:"logs",className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center flex-1",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ne,{placeholder:"Поиск в логах...",value:b.search,onChange:$=>p(G=>({...G,search:$.target.value})),className:"w-64","data-testid":"search-logs-input"}),r.jsx(D,{variant:"outline",size:"icon",title:"Фильтровать",children:r.jsx(As,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{value:b.status,onValueChange:$=>p(G=>({...G,status:$})),children:[r.jsx(ue,{className:"w-40","data-testid":"log-status-filter-select",children:r.jsx(me,{placeholder:"Статус"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все статусы"}),r.jsx(C,{value:"success",children:"Успешно"}),r.jsx(C,{value:"failed",children:"Ошибка"}),r.jsx(C,{value:"pending",children:"Ожидание"}),r.jsx(C,{value:"retry",children:"Повтор"})]})]}),r.jsxs(fe,{value:b.offerId,onValueChange:$=>p(G=>({...G,offerId:$})),children:[r.jsx(ue,{className:"w-48","data-testid":"offer-filter-select",children:r.jsx(me,{placeholder:"Оффер"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все офферы"}),_.map($=>r.jsx(C,{value:$.id,children:$.name},$.id))]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(D,{variant:"outline",title:"Экспорт логов","data-testid":"export-logs-btn",children:[r.jsx(br,{className:"w-4 h-4 mr-2"}),"Экспорт"]}),r.jsx(D,{variant:"outline",title:"Обновить","data-testid":"refresh-logs-btn",children:r.jsx(Vt,{className:"w-4 h-4"})})]})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Vr,{className:"w-5 h-5"}),"История постбеков (",S.length,")"]}),r.jsx(Ze,{children:"Детальная информация о доставке постбеков"})]}),r.jsx(W,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Постбек"}),r.jsx(Z,{children:"Оффер/Партнёр"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Ответ"}),r.jsx(Z,{children:"Время"}),r.jsx(Z,{children:"Дата"}),r.jsx(Z,{children:"Действия"})]})}),r.jsx(It,{children:P?r.jsx(De,{children:r.jsx(H,{colSpan:7,className:"text-center py-8",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Vt,{className:"w-4 h-4 animate-spin mr-2"}),"Загрузка логов..."]})})}):S.length===0?r.jsx(De,{children:r.jsx(H,{colSpan:7,className:"text-center py-8",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(Vr,{className:"w-8 h-8 text-gray-400"}),r.jsx("p",{className:"text-gray-500",children:"Логи не найдены"})]})})}):S.map($=>r.jsxs(De,{children:[r.jsxs(H,{children:[r.jsx("div",{className:"font-medium",children:$.postbackName}),r.jsxs("div",{className:"text-sm text-gray-500",children:[$.method," • Попытка ",$.attempt,"/",$.maxAttempts]})]}),r.jsx(H,{children:r.jsxs("div",{children:[$.offerName&&r.jsx("div",{className:"font-medium",children:$.offerName}),$.partnerName&&r.jsx("div",{className:"text-sm text-gray-500",children:$.partnerName})]})}),r.jsx(H,{children:T($.status)}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[$.responseCode&&r.jsx(ie,{variant:$.responseCode<300?"default":"destructive",className:"text-xs",children:$.responseCode}),$.responseTime&&r.jsxs("span",{className:"text-xs text-gray-500",children:[$.responseTime,"ms"]})]})}),r.jsx(H,{children:$.responseTime?`${$.responseTime}ms`:"—"}),r.jsx(H,{children:r.jsx("div",{className:"text-sm",children:new Date($.createdAt).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"})})}),r.jsx(H,{children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(D,{variant:"outline",size:"sm",onClick:()=>{w($),f(!0)},title:"Просмотреть детали","data-testid":`view-log-${$.id}`,className:"hover:bg-purple-50 hover:text-purple-700 hover:border-purple-300",children:r.jsx(ir,{className:"w-3 h-3"})}),$.status==="failed"&&r.jsx(D,{variant:"outline",size:"sm",onClick:()=>A.mutate($.id),title:"Повторить отправку","data-testid":`retry-log-${$.id}`,className:"hover:bg-green-50 hover:text-green-700 hover:border-green-300",children:r.jsx(mu,{className:"w-3 h-3"})})]})})]},$.id))})]})})})]})]}),r.jsxs(He,{value:"analytics",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(q,{children:r.jsxs(W,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Отправлено сегодня"}),r.jsx("p",{className:"text-2xl font-bold",children:"156"})]}),r.jsx(cs,{className:"w-8 h-8 text-blue-600"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"+12% за сутки"})]})}),r.jsx(q,{children:r.jsxs(W,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Успешность"}),r.jsx("p",{className:"text-2xl font-bold",children:"92.3%"})]}),r.jsx(ur,{className:"w-8 h-8 text-green-600"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"+1.2% за неделю"})]})}),r.jsx(q,{children:r.jsxs(W,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Среднее время"}),r.jsx("p",{className:"text-2xl font-bold",children:"247ms"})]}),r.jsx(lr,{className:"w-8 h-8 text-orange-600"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"-15ms за сутки"})]})}),r.jsx(q,{children:r.jsxs(W,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Активных постбеков"}),r.jsx("p",{className:"text-2xl font-bold",children:N.filter($=>$.isActive).length})]}),r.jsx(fr,{className:"w-8 h-8 text-purple-600"})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["из ",N.length," общих"]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Статистика отправки"}),r.jsx(Ze,{children:"Динамика отправки постбеков за последние дни"})]}),r.jsx(W,{children:r.jsx("div",{className:"h-80",children:r.jsx(xa,{width:"100%",height:"100%",children:r.jsxs(ny,{data:U,children:[r.jsx(Ti,{strokeDasharray:"3 3"}),r.jsx(Ps,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(us,{type:"monotone",dataKey:"sent",stroke:"#3b82f6",strokeWidth:2,name:"Отправлено"}),r.jsx(us,{type:"monotone",dataKey:"successful",stroke:"#10b981",strokeWidth:2,name:"Успешно"}),r.jsx(us,{type:"monotone",dataKey:"failed",stroke:"#ef4444",strokeWidth:2,name:"Ошибки"})]})})})})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Распределение статусов"}),r.jsx(Ze,{children:"Соотношение успешных и неуспешных отправок"})]}),r.jsx(W,{children:r.jsx("div",{className:"h-80",children:r.jsx(xa,{width:"100%",height:"100%",children:r.jsxs(DP,{data:E,children:[r.jsx(Ti,{strokeDasharray:"3 3"}),r.jsx(Ps,{dataKey:"name"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(Ao,{dataKey:"value",fill:"#3b82f6"})]})})})})]})]})]})]}),r.jsx(_t,{open:o,onOpenChange:c,children:r.jsxs(kt,{className:"max-w-2xl",children:[r.jsxs(St,{children:[r.jsx(Ct,{children:"Добавить постбек"}),r.jsx(Br,{children:"Создайте новый постбек для отправки уведомлений о конверсиях"})]}),r.jsx(HI,{onSubmit:$=>R.mutate($),offers:_,isLoading:R.isPending})]})}),r.jsx(_t,{open:d,onOpenChange:u,children:r.jsxs(kt,{className:"max-w-2xl",children:[r.jsxs(St,{children:[r.jsx(Ct,{children:"Редактировать постбек"}),r.jsxs(Br,{children:['Изменить настройки постбека "',m==null?void 0:m.name,'"']})]}),m&&r.jsx(HI,{postback:m,onSubmit:$=>O.mutate({id:m.id,data:$}),offers:_,isLoading:O.isPending})]})}),r.jsx(_t,{open:h,onOpenChange:f,children:r.jsxs(kt,{className:"max-w-4xl",children:[r.jsxs(St,{children:[r.jsx(Ct,{children:"Детали постбека"}),r.jsx(Br,{children:"Подробная информация о доставке постбека"})]}),x&&r.jsx(z5e,{log:x})]})})]})]})]})}function HI({postback:e,onSubmit:t,offers:n,isLoading:s}){const[a,i]=v.useState({name:(e==null?void 0:e.name)||"",level:(e==null?void 0:e.level)||"global",url:(e==null?void 0:e.url)||"",events:(e==null?void 0:e.events)||["sale"],offerId:(e==null?void 0:e.offerId)||"",retryAttempts:(e==null?void 0:e.retryAttempts)||3,timeout:(e==null?void 0:e.timeout)||30,isActive:(e==null?void 0:e.isActive)??!0}),l=[{value:"lead",label:"Лид (Lead)"},{value:"sale",label:"Продажа (Sale)"},{value:"rejected",label:"Отказ (Rejected)"},{value:"hold",label:"Холд (Hold)"}],o=["{click_id}","{status}","{payout}","{offer_id}","{geo}","{device}","{sub1}","{sub2}","{sub3}","{sub4}","{sub5}","{time}"],c=d=>{d.preventDefault(),t(a)};return r.jsxs("form",{onSubmit:c,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"postback-name",children:"Название постбека"}),r.jsx(ne,{id:"postback-name",value:a.name,onChange:d=>i(u=>({...u,name:d.target.value})),placeholder:"Например: Основной трекер",required:!0,"data-testid":"postback-name-input"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"postback-level",children:"Уровень"}),r.jsxs(fe,{value:a.level,onValueChange:d=>i(u=>({...u,level:d})),children:[r.jsx(ue,{id:"postback-level","data-testid":"postback-level-select",children:r.jsx(me,{placeholder:"Выберите уровень"})}),r.jsxs(he,{children:[r.jsx(C,{value:"global",children:"Глобальный"}),r.jsx(C,{value:"offer",children:"Оффер"})]})]})]})]}),a.level==="offer"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"postback-offer",children:"Оффер"}),r.jsxs(fe,{value:a.offerId,onValueChange:d=>i(u=>({...u,offerId:d})),children:[r.jsx(ue,{id:"postback-offer","data-testid":"postback-offer-select",children:r.jsx(me,{placeholder:"Выберите оффер"})}),r.jsx(he,{children:n.map(d=>r.jsx(C,{value:d.id,children:d.name},d.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"postback-url",children:"URL постбека"}),r.jsx(ne,{id:"postback-url",value:a.url,onChange:d=>i(u=>({...u,url:d.target.value})),placeholder:"https://tracker.com/postback?click_id={click_id}&status={status}&payout={payout}",required:!0,"data-testid":"postback-url-input"}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Доступные параметры: ",o.join(", ")]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"События для отправки"}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map(d=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(dn,{id:`event-${d.value}`,checked:a.events.includes(d.value),onCheckedChange:u=>{i(u?h=>({...h,events:[...h.events,d.value]}):h=>({...h,events:h.events.filter(f=>f!==d.value)}))},"data-testid":`event-${d.value}-checkbox`}),r.jsx(F,{htmlFor:`event-${d.value}`,children:d.label})]},d.value))})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"retry-attempts",children:"Попытки повтора"}),r.jsx(ne,{id:"retry-attempts",type:"number",min:"1",max:"10",value:a.retryAttempts,onChange:d=>i(u=>({...u,retryAttempts:parseInt(d.target.value)})),"data-testid":"retry-attempts-input"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"timeout",children:"Таймаут (сек)"}),r.jsx(ne,{id:"timeout",type:"number",min:"5",max:"120",value:a.timeout,onChange:d=>i(u=>({...u,timeout:parseInt(d.target.value)})),"data-testid":"timeout-input"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"is-active",children:"Статус"}),r.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[r.jsx(dn,{id:"is-active",checked:a.isActive,onCheckedChange:d=>i(u=>({...u,isActive:!!d})),"data-testid":"is-active-checkbox"}),r.jsx(F,{htmlFor:"is-active",children:"Активный"})]})]})]}),r.jsx(go,{children:r.jsx(D,{type:"submit",disabled:s,"data-testid":"save-postback-btn",children:s?r.jsxs(r.Fragment,{children:[r.jsx(Vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Сохранение..."]}):r.jsxs(r.Fragment,{children:[r.jsx(_l,{className:"w-4 h-4 mr-2"}),"Сохранить"]})})})]})}function z5e({log:e}){const t=n=>{navigator.clipboard.writeText(n)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Постбек"}),r.jsx("p",{className:"text-sm font-medium",children:e.postbackName})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Статус"}),r.jsxs("div",{className:"flex items-center gap-2",children:[e.status==="success"&&r.jsx(ur,{className:"w-4 h-4 text-green-600"}),e.status==="failed"&&r.jsx(Kt,{className:"w-4 h-4 text-red-600"}),e.status==="pending"&&r.jsx(lr,{className:"w-4 h-4 text-yellow-600"}),e.status==="retry"&&r.jsx(mu,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm capitalize",children:e.status})]})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Время выполнения"}),r.jsx("p",{className:"text-sm",children:e.responseTime?`${e.responseTime}ms`:"—"})]})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-medium text-gray-600",children:"URL запроса"}),r.jsx("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("code",{className:"text-sm break-all",children:e.url}),r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>t(e.url),title:"Копировать URL",children:r.jsx(Yr,{className:"w-4 h-4"})})]})})]}),e.responseCode&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Код ответа"}),r.jsx("div",{className:"mt-2",children:r.jsx(ie,{variant:e.responseCode<300?"default":"destructive",className:"text-sm",children:e.responseCode})})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Попытка"}),r.jsxs("p",{className:"text-sm mt-2",children:[e.attempt," из ",e.maxAttempts]})]})]}),e.responseBody&&r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Тело ответа"}),r.jsx("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:r.jsx("pre",{className:"text-xs whitespace-pre-wrap break-words",children:e.responseBody})})]}),e.errorMessage&&r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Сообщение об ошибке"}),r.jsx("div",{className:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:r.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:e.errorMessage})})]}),e.headers&&Object.keys(e.headers).length>0&&r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Заголовки запроса"}),r.jsx("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:r.jsx("div",{className:"space-y-1",children:Object.entries(e.headers).map(([n,s])=>r.jsxs("div",{className:"text-xs",children:[r.jsxs("span",{className:"font-medium",children:[n,":"]})," ",s]},n))})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Создан"}),r.jsx("p",{className:"text-sm",children:new Date(e.createdAt).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),e.completedAt&&r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-medium text-gray-600",children:"Завершён"}),r.jsx("p",{className:"text-sm",children:new Date(e.completedAt).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})]})}const V5e=Ke.object({key:Ke.string().min(1,"Key is required"),value:Ke.any(),description:Ke.string().optional(),category:Ke.enum(["fraud","finance","general","security","integration","ui"]),isPublic:Ke.boolean().default(!1)});function q5e(){const{token:e}=tr(),{t}=Wt(),{toast:n}=at(),s=Et(),[a,i]=v.useState("all"),[l,o]=v.useState(""),[c,d]=v.useState(!1),[u,h]=v.useState(null),{data:f=[],isLoading:m}=Fe({queryKey:["/api/admin/system-settings"],queryFn:async()=>{const k=await fetch("/api/admin/system-settings",{headers:{Authorization:`Bearer ${e}`}});if(!k.ok)throw new Error("Failed to fetch settings");return k.json()}}),g=Oe({mutationFn:async k=>await Re("POST","/api/admin/system-settings",k),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/system-settings"]}),d(!1),j.reset(),n({title:t("success"),description:"System setting created successfully"})},onError:k=>{n({title:t("error"),description:k.message,variant:"destructive"})}}),x=Oe({mutationFn:async({id:k,data:S})=>await Re("PATCH",`/api/admin/system-settings/${k}`,S),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/system-settings"]}),h(null),n({title:t("success"),description:"System setting updated successfully"})},onError:k=>{n({title:t("error"),description:k.message,variant:"destructive"})}}),w=Oe({mutationFn:async k=>await Re("DELETE",`/api/admin/system-settings/${k}`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/system-settings"]}),n({title:t("success"),description:"System setting deleted successfully"})}}),j=Jm({resolver:tp(V5e),defaultValues:{key:"",value:"",description:"",category:"general",isPublic:!1}}),y=[{value:"all",label:"All Categories",icon:r.jsx(fr,{className:"w-4 h-4"})},{value:"fraud",label:"Fraud Prevention",icon:r.jsx(Dt,{className:"w-4 h-4"})},{value:"finance",label:"Financial",icon:r.jsx(Rt,{className:"w-4 h-4"})},{value:"security",label:"Security",icon:r.jsx(Dt,{className:"w-4 h-4"})},{value:"integration",label:"Integrations",icon:r.jsx(kb,{className:"w-4 h-4"})},{value:"general",label:"General",icon:r.jsx(fr,{className:"w-4 h-4"})},{value:"ui",label:"User Interface",icon:r.jsx(mr,{className:"w-4 h-4"})}],b=f.filter(k=>{var _,R;const S=a==="all"||k.category===a,P=!l||k.key.toLowerCase().includes(l.toLowerCase())||((_=k.description)==null?void 0:_.toLowerCase().includes(l.toLowerCase()))||((R=k.value)==null?void 0:R.toString().toLowerCase().includes(l.toLowerCase()));return S&&P}),p=k=>{switch(k){case"fraud":return"bg-red-100 text-red-800";case"finance":return"bg-green-100 text-green-800";case"security":return"bg-yellow-100 text-yellow-800";case"integration":return"bg-blue-100 text-blue-800";case"ui":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},N=k=>typeof k=="object"?JSON.stringify(k,null,2):String(k);return m?r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"System Settings"}),r.jsx("main",{className:"flex-1 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})]})]}):r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"System Settings"}),r.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[r.jsxs(rn,{value:a,onValueChange:i,className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Zr,{className:"grid w-full grid-cols-7",children:y.map(k=>r.jsxs(We,{value:k.value,className:"flex items-center gap-2",title:`Фильтр по категории: ${k.label}`,children:[k.icon,r.jsx("span",{className:"hidden sm:inline",children:k.label})]},k.value))}),r.jsxs(_t,{open:c,onOpenChange:d,children:[r.jsx(Ja,{asChild:!0,children:r.jsxs(D,{className:"flex items-center gap-2","data-testid":"button-create-setting",title:"Создать новую настройку",children:[r.jsx(Zt,{className:"w-4 h-4"}),"Add Setting"]})}),r.jsxs(kt,{className:"max-w-md",children:[r.jsx(St,{children:r.jsx(Ct,{children:"Create System Setting"})}),r.jsx(ep,{...j,children:r.jsxs("form",{onSubmit:j.handleSubmit(k=>g.mutate(k)),className:"space-y-4",children:[r.jsx(dt,{control:j.control,name:"key",render:({field:k})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Setting Key"}),r.jsx(ft,{children:r.jsx(ne,{...k,placeholder:"e.g., fraud.max_clicks_per_hour","data-testid":"input-setting-key"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:j.control,name:"category",render:({field:k})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Category"}),r.jsxs(fe,{onValueChange:k.onChange,defaultValue:k.value,children:[r.jsx(ft,{children:r.jsx(ue,{"data-testid":"select-setting-category",children:r.jsx(me,{placeholder:"Select category"})})}),r.jsx(he,{children:y.slice(1).map(S=>r.jsx(C,{value:S.value,children:S.label},S.value))})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:j.control,name:"value",render:({field:k})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Value"}),r.jsx(ft,{children:r.jsx(gt,{...k,placeholder:"Setting value (JSON for objects)","data-testid":"input-setting-value"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:j.control,name:"description",render:({field:k})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Description"}),r.jsx(ft,{children:r.jsx(ne,{...k,placeholder:"Setting description","data-testid":"input-setting-description"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:j.control,name:"isPublic",render:({field:k})=>r.jsxs(ct,{className:"flex items-center justify-between",children:[r.jsx(ut,{children:"Public Setting"}),r.jsx(ft,{children:r.jsx(Je,{checked:k.value,onCheckedChange:k.onChange,"data-testid":"switch-setting-public"})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(D,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),r.jsx(D,{type:"submit",disabled:g.isPending,children:g.isPending?"Creating...":"Create Setting"})]})]})})]})]})]}),r.jsx(q,{className:"mb-6",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск по ключу, описанию, значению...",value:l,onChange:k=>o(k.target.value),className:"pl-10","data-testid":"input-search-settings",title:"Поиск системных настроек"})]})})}),r.jsxs("div",{className:"grid gap-4",children:[b.map(k=>r.jsxs(q,{className:"hover:shadow-md transition-shadow",children:[r.jsxs(re,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(se,{className:"text-lg font-mono",children:k.key}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ie,{className:p(k.category),children:k.category}),k.isPublic&&r.jsx(ie,{variant:"outline",children:"Public"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(D,{size:"sm",variant:"outline",onClick:()=>h(k),"data-testid":`button-edit-setting-${k.id}`,title:"Редактировать настройку",children:r.jsx(Ts,{className:"w-4 h-4"})}),r.jsx(D,{size:"sm",variant:"outline",onClick:()=>w.mutate(k.id),"data-testid":`button-delete-setting-${k.id}`,title:"Удалить настройку",children:r.jsx(wr,{className:"w-4 h-4"})})]})]}),k.description&&r.jsx(Ze,{children:k.description})]}),r.jsxs(W,{children:[r.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-md p-3",children:r.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:N(k.value)})}),r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Last updated: ",new Date(k.updatedAt).toLocaleString()]})]})]},k.id)),b.length===0&&r.jsx(q,{children:r.jsxs(W,{className:"text-center py-8",children:[r.jsx(Wre,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No settings found"}),r.jsx("p",{className:"text-gray-500",children:a==="all"?"No system settings have been configured yet.":`No settings found in the ${a} category.`})]})})]})]}),u&&r.jsx(_t,{open:!!u,onOpenChange:()=>h(null),children:r.jsxs(kt,{className:"max-w-md",children:[r.jsx(St,{children:r.jsx(Ct,{children:"Edit System Setting"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Key"}),r.jsx("div",{className:"font-mono text-sm p-2 bg-gray-100 dark:bg-gray-800 rounded",children:u.key})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Value"}),r.jsx(gt,{value:N(u.value),onChange:k=>h({...u,value:k.target.value}),"data-testid":"input-edit-setting-value"})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(D,{variant:"outline",onClick:()=>h(null),children:"Cancel"}),r.jsxs(D,{onClick:()=>x.mutate({id:u.id,data:{value:u.value}}),disabled:x.isPending,children:[r.jsx(_l,{className:"w-4 h-4 mr-2"}),x.isPending?"Saving...":"Save Changes"]})]})]})]})})]})]})]})}var yt=function(){return yt=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yt.apply(this,arguments)};function W5e(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function LH(e,t,n){for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}function iy(e){return e.mode==="multiple"}function ly(e){return e.mode==="range"}function hN(e){return e.mode==="single"}var H5e={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function K5e(e,t){return Jt(e,"LLLL y",t)}function G5e(e,t){return Jt(e,"d",t)}function Y5e(e,t){return Jt(e,"LLLL",t)}function X5e(e){return"".concat(e)}function Z5e(e,t){return Jt(e,"cccccc",t)}function Q5e(e,t){return Jt(e,"yyyy",t)}var J5e=Object.freeze({__proto__:null,formatCaption:K5e,formatDay:G5e,formatMonthCaption:Y5e,formatWeekNumber:X5e,formatWeekdayName:Z5e,formatYearCaption:Q5e}),eIe=function(e,t,n){return Jt(e,"do MMMM (EEEE)",n)},tIe=function(){return"Month: "},rIe=function(){return"Go to next month"},nIe=function(){return"Go to previous month"},sIe=function(e,t){return Jt(e,"cccc",t)},aIe=function(e){return"Week n. ".concat(e)},iIe=function(){return"Year: "},lIe=Object.freeze({__proto__:null,labelDay:eIe,labelMonthDropdown:tIe,labelNext:rIe,labelPrevious:nIe,labelWeekNumber:aIe,labelWeekday:sIe,labelYearDropdown:iIe});function oIe(){var e="buttons",t=H5e,n=r1,s={},a={},i=1,l={},o=new Date;return{captionLayout:e,classNames:t,formatters:J5e,labels:lIe,locale:n,modifiersClassNames:s,modifiers:a,numberOfMonths:i,styles:l,today:o,mode:"default"}}function cIe(e){var t=e.fromYear,n=e.toYear,s=e.fromMonth,a=e.toMonth,i=e.fromDate,l=e.toDate;return s?i=Ks(s):t&&(i=new Date(t,0,1)),a?l=t1(a):n&&(l=new Date(n,11,31)),{fromDate:i?Bf(i):void 0,toDate:l?Bf(l):void 0}}var UH=v.createContext(void 0);function dIe(e){var t,n=e.initialProps,s=oIe(),a=cIe(n),i=a.fromDate,l=a.toDate,o=(t=n.captionLayout)!==null&&t!==void 0?t:s.captionLayout;o!=="buttons"&&(!i||!l)&&(o="buttons");var c;(hN(n)||iy(n)||ly(n))&&(c=n.onSelect);var d=yt(yt(yt({},s),n),{captionLayout:o,classNames:yt(yt({},s.classNames),n.classNames),components:yt({},n.components),formatters:yt(yt({},s.formatters),n.formatters),fromDate:i,labels:yt(yt({},s.labels),n.labels),mode:n.mode||s.mode,modifiers:yt(yt({},s.modifiers),n.modifiers),modifiersClassNames:yt(yt({},s.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:yt(yt({},s.styles),n.styles),toDate:l});return r.jsx(UH.Provider,{value:d,children:e.children})}function Rr(){var e=v.useContext(UH);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function BH(e){var t=Rr(),n=t.locale,s=t.classNames,a=t.styles,i=t.formatters.formatCaption;return r.jsx("div",{className:s.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:n})})}function uIe(e){return r.jsx("svg",yt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:r.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function zH(e){var t,n,s=e.onChange,a=e.value,i=e.children,l=e.caption,o=e.className,c=e.style,d=Rr(),u=(n=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:uIe;return r.jsxs("div",{className:o,style:c,children:[r.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),r.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:s,children:i}),r.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[l,r.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function hIe(e){var t,n=Rr(),s=n.fromDate,a=n.toDate,i=n.styles,l=n.locale,o=n.formatters.formatMonthCaption,c=n.classNames,d=n.components,u=n.labels.labelMonthDropdown;if(!s)return r.jsx(r.Fragment,{});if(!a)return r.jsx(r.Fragment,{});var h=[];if(Gie(s,a))for(var f=Ks(s),m=s.getMonth();m<=a.getMonth();m++)h.push(lk(f,m));else for(var f=Ks(new Date),m=0;m<=11;m++)h.push(lk(f,m));var g=function(w){var j=Number(w.target.value),y=lk(Ks(e.displayMonth),j);e.onChange(y)},x=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:zH;return r.jsx(x,{name:"months","aria-label":u(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:o(e.displayMonth,{locale:l}),children:h.map(function(w){return r.jsx("option",{value:w.getMonth(),children:o(w,{locale:l})},w.getMonth())})})}function fIe(e){var t,n=e.displayMonth,s=Rr(),a=s.fromDate,i=s.toDate,l=s.locale,o=s.styles,c=s.classNames,d=s.components,u=s.formatters.formatYearCaption,h=s.labels.labelYearDropdown,f=[];if(!a)return r.jsx(r.Fragment,{});if(!i)return r.jsx(r.Fragment,{});for(var m=a.getFullYear(),g=i.getFullYear(),x=m;x<=g;x++)f.push(dD(p9(new Date),x));var w=function(y){var b=dD(Ks(n),Number(y.target.value));e.onChange(b)},j=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:zH;return r.jsx(j,{name:"years","aria-label":h(),className:c.dropdown_year,style:o.dropdown_year,onChange:w,value:n.getFullYear(),caption:u(n,{locale:l}),children:f.map(function(y){return r.jsx("option",{value:y.getFullYear(),children:u(y,{locale:l})},y.getFullYear())})})}function mIe(e,t){var n=v.useState(e),s=n[0],a=n[1],i=t===void 0?s:t;return[i,a]}function pIe(e){var t=e.month,n=e.defaultMonth,s=e.today,a=t||n||s||new Date,i=e.toDate,l=e.fromDate,o=e.numberOfMonths,c=o===void 0?1:o;if(i&&Vf(i,a)<0){var d=-1*(c-1);a=Li(i,d)}return l&&Vf(a,l)<0&&(a=l),Ks(a)}function xIe(){var e=Rr(),t=pIe(e),n=mIe(t,e.month),s=n[0],a=n[1],i=function(l){var o;if(!e.disableNavigation){var c=Ks(l);a(c),(o=e.onMonthChange)===null||o===void 0||o.call(e,c)}};return[s,i]}function gIe(e,t){for(var n=t.reverseMonths,s=t.numberOfMonths,a=Ks(e),i=Ks(Li(a,s)),l=Vf(i,a),o=[],c=0;c<l;c++){var d=Li(a,c);o.push(d)}return n&&(o=o.reverse()),o}function vIe(e,t){if(!t.disableNavigation){var n=t.toDate,s=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,l=s?i:1,o=Ks(e);if(!n)return Li(o,l);var c=Vf(n,e);if(!(c<i))return Li(o,l)}}function yIe(e,t){if(!t.disableNavigation){var n=t.fromDate,s=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,l=s?i:1,o=Ks(e);if(!n)return Li(o,-l);var c=Vf(o,n);if(!(c<=0))return Li(o,-l)}}var VH=v.createContext(void 0);function bIe(e){var t=Rr(),n=xIe(),s=n[0],a=n[1],i=gIe(s,t),l=vIe(s,t),o=yIe(s,t),c=function(h){return i.some(function(f){return oT(h,f)})},d=function(h,f){c(h)||(f&&w9(h,f)?a(Li(h,1+t.numberOfMonths*-1)):a(h))},u={currentMonth:s,displayMonths:i,goToMonth:a,goToDate:d,previousMonth:o,nextMonth:l,isDateDisplayed:c};return r.jsx(VH.Provider,{value:u,children:e.children})}function oy(){var e=v.useContext(VH);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function KI(e){var t,n=Rr(),s=n.classNames,a=n.styles,i=n.components,l=oy().goToMonth,o=function(u){l(Li(u,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:BH,d=r.jsx(c,{id:e.id,displayMonth:e.displayMonth});return r.jsxs("div",{className:s.caption_dropdowns,style:a.caption_dropdowns,children:[r.jsx("div",{className:s.vhidden,children:d}),r.jsx(hIe,{onChange:o,displayMonth:e.displayMonth}),r.jsx(fIe,{onChange:o,displayMonth:e.displayMonth})]})}function jIe(e){return r.jsx("svg",yt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:r.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function wIe(e){return r.jsx("svg",yt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:r.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Kj=v.forwardRef(function(e,t){var n=Rr(),s=n.classNames,a=n.styles,i=[s.button_reset,s.button];e.className&&i.push(e.className);var l=i.join(" "),o=yt(yt({},a.button_reset),a.button);return e.style&&Object.assign(o,e.style),r.jsx("button",yt({},e,{ref:t,type:"button",className:l,style:o}))});function NIe(e){var t,n,s=Rr(),a=s.dir,i=s.locale,l=s.classNames,o=s.styles,c=s.labels,d=c.labelPrevious,u=c.labelNext,h=s.components;if(!e.nextMonth&&!e.previousMonth)return r.jsx(r.Fragment,{});var f=d(e.previousMonth,{locale:i}),m=[l.nav_button,l.nav_button_previous].join(" "),g=u(e.nextMonth,{locale:i}),x=[l.nav_button,l.nav_button_next].join(" "),w=(t=h==null?void 0:h.IconRight)!==null&&t!==void 0?t:wIe,j=(n=h==null?void 0:h.IconLeft)!==null&&n!==void 0?n:jIe;return r.jsxs("div",{className:l.nav,style:o.nav,children:[!e.hidePrevious&&r.jsx(Kj,{name:"previous-month","aria-label":f,className:m,style:o.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?r.jsx(w,{className:l.nav_icon,style:o.nav_icon}):r.jsx(j,{className:l.nav_icon,style:o.nav_icon})}),!e.hideNext&&r.jsx(Kj,{name:"next-month","aria-label":g,className:x,style:o.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?r.jsx(j,{className:l.nav_icon,style:o.nav_icon}):r.jsx(w,{className:l.nav_icon,style:o.nav_icon})})]})}function GI(e){var t=Rr().numberOfMonths,n=oy(),s=n.previousMonth,a=n.nextMonth,i=n.goToMonth,l=n.displayMonths,o=l.findIndex(function(g){return oT(e.displayMonth,g)}),c=o===0,d=o===l.length-1,u=t>1&&(c||!d),h=t>1&&(d||!c),f=function(){s&&i(s)},m=function(){a&&i(a)};return r.jsx(NIe,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:h,nextMonth:a,previousMonth:s,onPreviousClick:f,onNextClick:m})}function kIe(e){var t,n=Rr(),s=n.classNames,a=n.disableNavigation,i=n.styles,l=n.captionLayout,o=n.components,c=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:BH,d;return a?d=r.jsx(c,{id:e.id,displayMonth:e.displayMonth}):l==="dropdown"?d=r.jsx(KI,{displayMonth:e.displayMonth,id:e.id}):l==="dropdown-buttons"?d=r.jsxs(r.Fragment,{children:[r.jsx(KI,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),r.jsx(GI,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=r.jsxs(r.Fragment,{children:[r.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),r.jsx(GI,{displayMonth:e.displayMonth,id:e.id})]}),r.jsx("div",{className:s.caption,style:i.caption,children:d})}function SIe(e){var t=Rr(),n=t.footer,s=t.styles,a=t.classNames.tfoot;return n?r.jsx("tfoot",{className:a,style:s.tfoot,children:r.jsx("tr",{children:r.jsx("td",{colSpan:8,children:n})})}):r.jsx(r.Fragment,{})}function CIe(e,t,n){for(var s=n?gu(new Date):Ga(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var l=Yn(s,i);a.push(l)}return a}function PIe(){var e=Rr(),t=e.classNames,n=e.styles,s=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,l=e.ISOWeek,o=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=CIe(a,i,l);return r.jsxs("tr",{style:n.head_row,className:t.head_row,children:[s&&r.jsx("td",{style:n.head_cell,className:t.head_cell}),d.map(function(u,h){return r.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(u,{locale:a}),children:o(u,{locale:a})},h)})]})}function _Ie(){var e,t=Rr(),n=t.classNames,s=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:PIe;return r.jsx("thead",{style:s.head,className:n.head,children:r.jsx(i,{})})}function AIe(e){var t=Rr(),n=t.locale,s=t.formatters.formatDay;return r.jsx(r.Fragment,{children:s(e.date,{locale:n})})}var J4=v.createContext(void 0);function TIe(e){if(!iy(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return r.jsx(J4.Provider,{value:t,children:e.children})}return r.jsx(EIe,{initialProps:e.initialProps,children:e.children})}function EIe(e){var t=e.initialProps,n=e.children,s=t.selected,a=t.min,i=t.max,l=function(d,u,h){var f,m;(f=t.onDayClick)===null||f===void 0||f.call(t,d,u,h);var g=!!(u.selected&&a&&(s==null?void 0:s.length)===a);if(!g){var x=!!(!u.selected&&i&&(s==null?void 0:s.length)===i);if(!x){var w=s?LH([],s):[];if(u.selected){var j=w.findIndex(function(y){return zs(d,y)});w.splice(j,1)}else w.push(d);(m=t.onSelect)===null||m===void 0||m.call(t,w,d,u,h)}}},o={disabled:[]};s&&o.disabled.push(function(d){var u=i&&s.length>i-1,h=s.some(function(f){return zs(f,d)});return!!(u&&!h)});var c={selected:s,onDayClick:l,modifiers:o};return r.jsx(J4.Provider,{value:c,children:n})}function eE(){var e=v.useContext(J4);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function OIe(e,t){var n=t||{},s=n.from,a=n.to;return s&&a?zs(a,e)&&zs(s,e)?void 0:zs(a,e)?{from:a,to:void 0}:zs(s,e)?void 0:X2(s,e)?{from:e,to:a}:{from:s,to:e}:a?X2(e,a)?{from:a,to:e}:{from:e,to:a}:s?w9(e,s)?{from:e,to:s}:{from:s,to:e}:{from:e,to:void 0}}var tE=v.createContext(void 0);function RIe(e){if(!ly(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return r.jsx(tE.Provider,{value:t,children:e.children})}return r.jsx(DIe,{initialProps:e.initialProps,children:e.children})}function DIe(e){var t=e.initialProps,n=e.children,s=t.selected,a=s||{},i=a.from,l=a.to,o=t.min,c=t.max,d=function(m,g,x){var w,j;(w=t.onDayClick)===null||w===void 0||w.call(t,m,g,x);var y=OIe(m,s);(j=t.onSelect)===null||j===void 0||j.call(t,y,m,g,x)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(u.range_start=[i],l?(u.range_end=[l],zs(i,l)||(u.range_middle=[{after:i,before:l}])):u.range_end=[i]):l&&(u.range_start=[l],u.range_end=[l]),o&&(i&&!l&&u.disabled.push({after:hl(i,o-1),before:Yn(i,o-1)}),i&&l&&u.disabled.push({after:i,before:Yn(i,o-1)}),!i&&l&&u.disabled.push({after:hl(l,o-1),before:Yn(l,o-1)})),c){if(i&&!l&&(u.disabled.push({before:Yn(i,-c+1)}),u.disabled.push({after:Yn(i,c-1)})),i&&l){var h=pl(l,i)+1,f=c-h;u.disabled.push({before:hl(i,f)}),u.disabled.push({after:Yn(l,f)})}!i&&l&&(u.disabled.push({before:Yn(l,-c+1)}),u.disabled.push({after:Yn(l,c-1)}))}return r.jsx(tE.Provider,{value:{selected:s,onDayClick:d,modifiers:u},children:n})}function rE(){var e=v.useContext(tE);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function B0(e){return Array.isArray(e)?LH([],e):e!==void 0?[e]:[]}function MIe(e){var t={};return Object.entries(e).forEach(function(n){var s=n[0],a=n[1];t[s]=B0(a)}),t}var zi;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(zi||(zi={}));var $Ie=zi.Selected,zl=zi.Disabled,IIe=zi.Hidden,FIe=zi.Today,Kk=zi.RangeEnd,Gk=zi.RangeMiddle,Yk=zi.RangeStart,LIe=zi.Outside;function UIe(e,t,n){var s,a=(s={},s[$Ie]=B0(e.selected),s[zl]=B0(e.disabled),s[IIe]=B0(e.hidden),s[FIe]=[e.today],s[Kk]=[],s[Gk]=[],s[Yk]=[],s[LIe]=[],s);return e.fromDate&&a[zl].push({before:e.fromDate}),e.toDate&&a[zl].push({after:e.toDate}),iy(e)?a[zl]=a[zl].concat(t.modifiers[zl]):ly(e)&&(a[zl]=a[zl].concat(n.modifiers[zl]),a[Yk]=n.modifiers[Yk],a[Gk]=n.modifiers[Gk],a[Kk]=n.modifiers[Kk]),a}var qH=v.createContext(void 0);function BIe(e){var t=Rr(),n=eE(),s=rE(),a=UIe(t,n,s),i=MIe(t.modifiers),l=yt(yt({},a),i);return r.jsx(qH.Provider,{value:l,children:e.children})}function WH(){var e=v.useContext(qH);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function zIe(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function VIe(e){return!!(e&&typeof e=="object"&&"from"in e)}function qIe(e){return!!(e&&typeof e=="object"&&"after"in e)}function WIe(e){return!!(e&&typeof e=="object"&&"before"in e)}function HIe(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function KIe(e,t){var n,s=t.from,a=t.to;if(s&&a){var i=pl(a,s)<0;i&&(n=[a,s],s=n[0],a=n[1]);var l=pl(e,s)>=0&&pl(a,e)>=0;return l}return a?zs(a,e):s?zs(s,e):!1}function GIe(e){return iT(e)}function YIe(e){return Array.isArray(e)&&e.every(iT)}function XIe(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(GIe(n))return zs(e,n);if(YIe(n))return n.includes(e);if(VIe(n))return KIe(e,n);if(HIe(n))return n.dayOfWeek.includes(e.getDay());if(zIe(n)){var s=pl(n.before,e),a=pl(n.after,e),i=s>0,l=a<0,o=X2(n.before,n.after);return o?l&&i:i||l}return qIe(n)?pl(e,n.after)>0:WIe(n)?pl(n.before,e)>0:typeof n=="function"?n(e):!1})}function nE(e,t,n){var s=Object.keys(t).reduce(function(i,l){var o=t[l];return XIe(e,o)&&i.push(l),i},[]),a={};return s.forEach(function(i){return a[i]=!0}),n&&!oT(e,n)&&(a.outside=!0),a}function ZIe(e,t){for(var n=Ks(e[0]),s=t1(e[e.length-1]),a,i,l=n;l<=s;){var o=nE(l,t),c=!o.disabled&&!o.hidden;if(!c){l=Yn(l,1);continue}if(o.selected)return l;o.today&&!i&&(i=l),a||(a=l),l=Yn(l,1)}return i||a}var QIe=365;function HH(e,t){var n=t.moveBy,s=t.direction,a=t.context,i=t.modifiers,l=t.retry,o=l===void 0?{count:0,lastFocused:e}:l,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,h=a.locale,f={day:Yn,week:Y2,month:Li,year:Iae,startOfWeek:function(w){return a.ISOWeek?gu(w):Ga(w,{locale:h,weekStartsOn:c})},endOfWeek:function(w){return a.ISOWeek?x9(w):lT(w,{locale:h,weekStartsOn:c})}},m=f[n](e,s==="after"?1:-1);s==="before"&&d?m=Fae([d,m]):s==="after"&&u&&(m=Lae([u,m]));var g=!0;if(i){var x=nE(m,i);g=!x.disabled&&!x.hidden}return g?m:o.count>QIe?o.lastFocused:HH(m,{moveBy:n,direction:s,context:a,modifiers:i,retry:yt(yt({},o),{count:o.count+1})})}var KH=v.createContext(void 0);function JIe(e){var t=oy(),n=WH(),s=v.useState(),a=s[0],i=s[1],l=v.useState(),o=l[0],c=l[1],d=ZIe(t.displayMonths,n),u=a??(o&&t.isDateDisplayed(o))?o:d,h=function(){c(a),i(void 0)},f=function(w){i(w)},m=Rr(),g=function(w,j){if(a){var y=HH(a,{moveBy:w,direction:j,context:m,modifiers:n});zs(a,y)||(t.goToDate(y,a),f(y))}},x={focusedDay:a,focusTarget:u,blur:h,focus:f,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return r.jsx(KH.Provider,{value:x,children:e.children})}function sE(){var e=v.useContext(KH);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function e3e(e,t){var n=WH(),s=nE(e,n,t);return s}var aE=v.createContext(void 0);function t3e(e){if(!hN(e.initialProps)){var t={selected:void 0};return r.jsx(aE.Provider,{value:t,children:e.children})}return r.jsx(r3e,{initialProps:e.initialProps,children:e.children})}function r3e(e){var t=e.initialProps,n=e.children,s=function(i,l,o){var c,d,u;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,l,o),l.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,i,l,o);return}(u=t.onSelect)===null||u===void 0||u.call(t,i,i,l,o)},a={selected:t.selected,onDayClick:s};return r.jsx(aE.Provider,{value:a,children:n})}function GH(){var e=v.useContext(aE);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function n3e(e,t){var n=Rr(),s=GH(),a=eE(),i=rE(),l=sE(),o=l.focusDayAfter,c=l.focusDayBefore,d=l.focusWeekAfter,u=l.focusWeekBefore,h=l.blur,f=l.focus,m=l.focusMonthBefore,g=l.focusMonthAfter,x=l.focusYearBefore,w=l.focusYearAfter,j=l.focusStartOfWeek,y=l.focusEndOfWeek,b=function(U){var E,$,G,oe;hN(n)?(E=s.onDayClick)===null||E===void 0||E.call(s,e,t,U):iy(n)?($=a.onDayClick)===null||$===void 0||$.call(a,e,t,U):ly(n)?(G=i.onDayClick)===null||G===void 0||G.call(i,e,t,U):(oe=n.onDayClick)===null||oe===void 0||oe.call(n,e,t,U)},p=function(U){var E;f(e),(E=n.onDayFocus)===null||E===void 0||E.call(n,e,t,U)},N=function(U){var E;h(),(E=n.onDayBlur)===null||E===void 0||E.call(n,e,t,U)},k=function(U){var E;(E=n.onDayMouseEnter)===null||E===void 0||E.call(n,e,t,U)},S=function(U){var E;(E=n.onDayMouseLeave)===null||E===void 0||E.call(n,e,t,U)},P=function(U){var E;(E=n.onDayPointerEnter)===null||E===void 0||E.call(n,e,t,U)},_=function(U){var E;(E=n.onDayPointerLeave)===null||E===void 0||E.call(n,e,t,U)},R=function(U){var E;(E=n.onDayTouchCancel)===null||E===void 0||E.call(n,e,t,U)},O=function(U){var E;(E=n.onDayTouchEnd)===null||E===void 0||E.call(n,e,t,U)},M=function(U){var E;(E=n.onDayTouchMove)===null||E===void 0||E.call(n,e,t,U)},A=function(U){var E;(E=n.onDayTouchStart)===null||E===void 0||E.call(n,e,t,U)},T=function(U){var E;(E=n.onDayKeyUp)===null||E===void 0||E.call(n,e,t,U)},B=function(U){var E;switch(U.key){case"ArrowLeft":U.preventDefault(),U.stopPropagation(),n.dir==="rtl"?o():c();break;case"ArrowRight":U.preventDefault(),U.stopPropagation(),n.dir==="rtl"?c():o();break;case"ArrowDown":U.preventDefault(),U.stopPropagation(),d();break;case"ArrowUp":U.preventDefault(),U.stopPropagation(),u();break;case"PageUp":U.preventDefault(),U.stopPropagation(),U.shiftKey?x():m();break;case"PageDown":U.preventDefault(),U.stopPropagation(),U.shiftKey?w():g();break;case"Home":U.preventDefault(),U.stopPropagation(),j();break;case"End":U.preventDefault(),U.stopPropagation(),y();break}(E=n.onDayKeyDown)===null||E===void 0||E.call(n,e,t,U)},z={onClick:b,onFocus:p,onBlur:N,onKeyDown:B,onKeyUp:T,onMouseEnter:k,onMouseLeave:S,onPointerEnter:P,onPointerLeave:_,onTouchCancel:R,onTouchEnd:O,onTouchMove:M,onTouchStart:A};return z}function s3e(){var e=Rr(),t=GH(),n=eE(),s=rE(),a=hN(e)?t.selected:iy(e)?n.selected:ly(e)?s.selected:void 0;return a}function a3e(e){return Object.values(zi).includes(e)}function i3e(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(s){var a=e.modifiersClassNames[s];if(a)n.push(a);else if(a3e(s)){var i=e.classNames["day_".concat(s)];i&&n.push(i)}}),n}function l3e(e,t){var n=yt({},e.styles.day);return Object.keys(t).forEach(function(s){var a;n=yt(yt({},n),(a=e.modifiersStyles)===null||a===void 0?void 0:a[s])}),n}function o3e(e,t,n){var s,a,i,l=Rr(),o=sE(),c=e3e(e,t),d=n3e(e,c),u=s3e(),h=!!(l.onDayClick||l.mode!=="default");v.useEffect(function(){var k;c.outside||o.focusedDay&&h&&zs(o.focusedDay,e)&&((k=n.current)===null||k===void 0||k.focus())},[o.focusedDay,e,n,h,c.outside]);var f=i3e(l,c).join(" "),m=l3e(l,c),g=!!(c.outside&&!l.showOutsideDays||c.hidden),x=(i=(a=l.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:AIe,w=r.jsx(x,{date:e,displayMonth:t,activeModifiers:c}),j={style:m,className:f,children:w,role:"gridcell"},y=o.focusTarget&&zs(o.focusTarget,e)&&!c.outside,b=o.focusedDay&&zs(o.focusedDay,e),p=yt(yt(yt({},j),(s={disabled:c.disabled,role:"gridcell"},s["aria-selected"]=c.selected,s.tabIndex=b||y?0:-1,s)),d),N={isButton:h,isHidden:g,activeModifiers:c,selectedDays:u,buttonProps:p,divProps:j};return N}function c3e(e){var t=v.useRef(null),n=o3e(e.date,e.displayMonth,t);return n.isHidden?r.jsx("div",{role:"gridcell"}):n.isButton?r.jsx(Kj,yt({name:"day",ref:t},n.buttonProps)):r.jsx("div",yt({},n.divProps))}function d3e(e){var t=e.number,n=e.dates,s=Rr(),a=s.onWeekNumberClick,i=s.styles,l=s.classNames,o=s.locale,c=s.labels.labelWeekNumber,d=s.formatters.formatWeekNumber,u=d(Number(t),{locale:o});if(!a)return r.jsx("span",{className:l.weeknumber,style:i.weeknumber,children:u});var h=c(Number(t),{locale:o}),f=function(m){a(t,n,m)};return r.jsx(Kj,{name:"week-number","aria-label":h,className:l.weeknumber,style:i.weeknumber,onClick:f,children:u})}function u3e(e){var t,n,s=Rr(),a=s.styles,i=s.classNames,l=s.showWeekNumber,o=s.components,c=(t=o==null?void 0:o.Day)!==null&&t!==void 0?t:c3e,d=(n=o==null?void 0:o.WeekNumber)!==null&&n!==void 0?n:d3e,u;return l&&(u=r.jsx("td",{className:i.cell,style:a.cell,children:r.jsx(d,{number:e.weekNumber,dates:e.dates})})),r.jsxs("tr",{className:i.row,style:a.row,children:[u,e.dates.map(function(h){return r.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:r.jsx(c,{displayMonth:e.displayMonth,date:h})},Wie(h))})]})}function YI(e,t,n){for(var s=n!=null&&n.ISOWeek?x9(t):lT(t,n),a=n!=null&&n.ISOWeek?gu(e):Ga(e,n),i=pl(s,a),l=[],o=0;o<=i;o++)l.push(Yn(a,o));var c=l.reduce(function(d,u){var h=n!=null&&n.ISOWeek?v9(u):b9(u,n),f=d.find(function(m){return m.weekNumber===h});return f?(f.dates.push(u),d):(d.push({weekNumber:h,dates:[u]}),d)},[]);return c}function h3e(e,t){var n=YI(Ks(e),t1(e),t);if(t!=null&&t.useFixedWeeks){var s=Kie(e,t);if(s<6){var a=n[n.length-1],i=a.dates[a.dates.length-1],l=Y2(i,6-s),o=YI(Y2(i,1),l,t);n.push.apply(n,o)}}return n}function f3e(e){var t,n,s,a=Rr(),i=a.locale,l=a.classNames,o=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,h=a.weekStartsOn,f=a.firstWeekContainsDate,m=a.ISOWeek,g=h3e(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:m,locale:i,weekStartsOn:h,firstWeekContainsDate:f}),x=(t=u==null?void 0:u.Head)!==null&&t!==void 0?t:_Ie,w=(n=u==null?void 0:u.Row)!==null&&n!==void 0?n:u3e,j=(s=u==null?void 0:u.Footer)!==null&&s!==void 0?s:SIe;return r.jsxs("table",{id:e.id,className:l.table,style:o.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&r.jsx(x,{}),r.jsx("tbody",{className:l.tbody,style:o.tbody,children:g.map(function(y){return r.jsx(w,{displayMonth:e.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),r.jsx(j,{displayMonth:e.displayMonth})]})}function m3e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var p3e=m3e()?v.useLayoutEffect:v.useEffect,Xk=!1,x3e=0;function XI(){return"react-day-picker-".concat(++x3e)}function g3e(e){var t,n=e??(Xk?XI():null),s=v.useState(n),a=s[0],i=s[1];return p3e(function(){a===null&&i(XI())},[]),v.useEffect(function(){Xk===!1&&(Xk=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function v3e(e){var t,n,s=Rr(),a=s.dir,i=s.classNames,l=s.styles,o=s.components,c=oy().displayMonths,d=g3e(s.id?"".concat(s.id,"-").concat(e.displayIndex):void 0),u=s.id?"".concat(s.id,"-grid-").concat(e.displayIndex):void 0,h=[i.month],f=l.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,x=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(h.push(i.caption_start),f=yt(yt({},f),l.caption_start)),g&&(h.push(i.caption_end),f=yt(yt({},f),l.caption_end)),x&&(h.push(i.caption_between),f=yt(yt({},f),l.caption_between));var w=(n=o==null?void 0:o.Caption)!==null&&n!==void 0?n:kIe;return r.jsxs("div",{className:h.join(" "),style:f,children:[r.jsx(w,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),r.jsx(f3e,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function y3e(e){var t=Rr(),n=t.classNames,s=t.styles;return r.jsx("div",{className:n.months,style:s.months,children:e.children})}function b3e(e){var t,n,s=e.initialProps,a=Rr(),i=sE(),l=oy(),o=v.useState(!1),c=o[0],d=o[1];v.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var h=yt(yt({},a.styles.root),a.style),f=Object.keys(s).filter(function(g){return g.startsWith("data-")}).reduce(function(g,x){var w;return yt(yt({},g),(w={},w[x]=s[x],w))},{}),m=(n=(t=s.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:y3e;return r.jsx("div",yt({className:u.join(" "),style:h,dir:a.dir,id:a.id,nonce:s.nonce,title:s.title,lang:s.lang},f,{children:r.jsx(m,{children:l.displayMonths.map(function(g,x){return r.jsx(v3e,{displayIndex:x,displayMonth:g},x)})})}))}function j3e(e){var t=e.children,n=W5e(e,["children"]);return r.jsx(dIe,{initialProps:n,children:r.jsx(bIe,{children:r.jsx(t3e,{initialProps:n,children:r.jsx(TIe,{initialProps:n,children:r.jsx(RIe,{initialProps:n,children:r.jsx(BIe,{children:r.jsx(JIe,{children:t})})})})})})})}function w3e(e){return r.jsx(j3e,yt({},e,{children:r.jsx(b3e,{initialProps:e})}))}function fN({className:e,classNames:t,showOutsideDays:n=!0,...s}){return r.jsx(w3e,{showOutsideDays:n,className:Ee("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Ee(Qx({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Ee(Qx({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>r.jsx(Mi,{className:"h-4 w-4"}),IconRight:({...a})=>r.jsx(Zc,{className:"h-4 w-4"})},...s})}fN.displayName="Calendar";var iE="Popover",[YH,tWe]=zn(iE,[Jc]),cy=Jc(),[N3e,id]=YH(iE),XH=e=>{const{__scopePopover:t,children:n,open:s,defaultOpen:a,onOpenChange:i,modal:l=!1}=e,o=cy(t),c=v.useRef(null),[d,u]=v.useState(!1),[h=!1,f]=Di({prop:s,defaultProp:a,onChange:i});return r.jsx(nT,{...o,children:r.jsx(N3e,{scope:t,contentId:Qn(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:v.useCallback(()=>f(m=>!m),[f]),hasCustomAnchor:d,onCustomAnchorAdd:v.useCallback(()=>u(!0),[]),onCustomAnchorRemove:v.useCallback(()=>u(!1),[]),modal:l,children:n})})};XH.displayName=iE;var ZH="PopoverAnchor",k3e=v.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=id(ZH,n),i=cy(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=a;return v.useEffect(()=>(l(),()=>o()),[l,o]),r.jsx(zv,{...i,...s,ref:t})});k3e.displayName=ZH;var QH="PopoverTrigger",JH=v.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=id(QH,n),i=cy(n),l=jt(t,a.triggerRef),o=r.jsx(Xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":sK(a.open),...s,ref:l,onClick:Le(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:r.jsx(zv,{asChild:!0,...i,children:o})});JH.displayName=QH;var lE="PopoverPortal",[S3e,C3e]=YH(lE,{forceMount:void 0}),eK=e=>{const{__scopePopover:t,forceMount:n,children:s,container:a}=e,i=id(lE,t);return r.jsx(S3e,{scope:t,forceMount:n,children:r.jsx(Vn,{present:n||i.open,children:r.jsx(Em,{asChild:!0,container:a,children:s})})})};eK.displayName=lE;var bm="PopoverContent",tK=v.forwardRef((e,t)=>{const n=C3e(bm,e.__scopePopover),{forceMount:s=n.forceMount,...a}=e,i=id(bm,e.__scopePopover);return r.jsx(Vn,{present:s||i.open,children:i.modal?r.jsx(_3e,{...a,ref:t}):r.jsx(A3e,{...a,ref:t})})});tK.displayName=bm;var P3e=Ic("PopoverContent.RemoveScroll"),_3e=v.forwardRef((e,t)=>{const n=id(bm,e.__scopePopover),s=v.useRef(null),a=jt(t,s),i=v.useRef(!1);return v.useEffect(()=>{const l=s.current;if(l)return l1(l)},[]),r.jsx(qv,{as:P3e,allowPinchZoom:!0,children:r.jsx(rK,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Le(e.onCloseAutoFocus,l=>{var o;l.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Le(e.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,d=o.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Le(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),A3e=v.forwardRef((e,t)=>{const n=id(bm,e.__scopePopover),s=v.useRef(!1),a=v.useRef(!1);return r.jsx(rK,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=e.onCloseAutoFocus)==null||l.call(e,i),i.defaultPrevented||(s.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),rK=v.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=e,f=id(bm,n),m=cy(n);return s1(),r.jsx(Vv,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1),children:r.jsx(Zw,{"data-state":sK(f.open),role:"dialog",id:f.contentId,...m,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),nK="PopoverClose",T3e=v.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=id(nK,n);return r.jsx(Xe.button,{type:"button",...s,ref:t,onClick:Le(e.onClick,()=>a.onOpenChange(!1))})});T3e.displayName=nK;var E3e="PopoverArrow",O3e=v.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=cy(n);return r.jsx(Qw,{...a,...s,ref:t})});O3e.displayName=E3e;function sK(e){return e?"open":"closed"}var R3e=XH,D3e=JH,M3e=eK,aK=tK;const jm=R3e,wm=D3e,Tu=v.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},a)=>r.jsx(M3e,{children:r.jsx(aK,{ref:a,align:t,sideOffset:n,className:Ee("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));Tu.displayName=aK.displayName;function $3e(){const{token:e}=tr();Wt();const[t,n]=v.useState(""),[s,a]=v.useState("all"),[i,l]=v.useState("all"),[o,c]=v.useState("all"),[d,u]=v.useState({from:Yn(new Date,-7),to:new Date}),{data:h=[],isLoading:f}=Fe({queryKey:["/api/admin/audit-logs",t,s,i,o,d],queryFn:async()=>{const p=new URLSearchParams;t&&p.append("search",t),s!=="all"&&p.append("action",s),i!=="all"&&p.append("resourceType",i),o!=="all"&&p.append("userId",o),d.from&&p.append("startDate",d.from.toISOString()),d.to&&p.append("endDate",d.to.toISOString());const N=await fetch(`/api/admin/audit-logs?${p.toString()}`,{headers:{Authorization:`Bearer ${e}`}});if(!N.ok)throw new Error("Failed to fetch audit logs");return N.json()}}),{data:m=[]}=Fe({queryKey:["/api/admin/users"],queryFn:async()=>{const p=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${e}`}});if(!p.ok)throw new Error("Failed to fetch users");return p.json()}}),g=[{value:"all",label:"All Actions"},{value:"create",label:"Create"},{value:"update",label:"Update"},{value:"delete",label:"Delete"},{value:"login",label:"Login"},{value:"logout",label:"Logout"},{value:"view",label:"View"},{value:"approve",label:"Approve"},{value:"reject",label:"Reject"}],x=[{value:"all",label:"All Resources"},{value:"users",label:"Users"},{value:"offers",label:"Offers"},{value:"transactions",label:"Transactions"},{value:"settings",label:"Settings"},{value:"fraud_alerts",label:"Fraud Alerts"},{value:"postbacks",label:"Postbacks"},{value:"blacklist",label:"Blacklist"}],w=p=>{switch(p){case"create":return r.jsx(Zt,{className:"w-4 h-4"});case"update":return r.jsx(Ts,{className:"w-4 h-4"});case"delete":return r.jsx(wr,{className:"w-4 h-4"});case"login":return r.jsx(Bs,{className:"w-4 h-4"});case"logout":return r.jsx(pu,{className:"w-4 h-4"});case"view":return r.jsx(ir,{className:"w-4 h-4"});case"approve":return r.jsx(Bs,{className:"w-4 h-4"});case"reject":return r.jsx(pu,{className:"w-4 h-4"});default:return r.jsx(Vr,{className:"w-4 h-4"})}},j=p=>{switch(p){case"create":return"bg-green-100 text-green-800";case"update":return"bg-blue-100 text-blue-800";case"delete":return"bg-red-100 text-red-800";case"login":return"bg-emerald-100 text-emerald-800";case"logout":return"bg-gray-100 text-gray-800";case"view":return"bg-purple-100 text-purple-800";case"approve":return"bg-green-100 text-green-800";case"reject":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=p=>{switch(p){case"users":return r.jsx(or,{className:"w-4 h-4"});case"offers":return r.jsx(Gt,{className:"w-4 h-4"});case"transactions":return r.jsx(Rt,{className:"w-4 h-4"});case"fraud_alerts":return r.jsx(Dt,{className:"w-4 h-4"});default:return r.jsx(Vr,{className:"w-4 h-4"})}},b=()=>{const p=`data:text/csv;charset=utf-8,Timestamp,User,Action,Resource Type,Resource ID,IP Address,Description
`+h.map(S=>`${new Date(S.timestamp).toLocaleString()},${S.userName||S.userId},${S.action},${S.resourceType},${S.resourceId||""},${S.ipAddress||""},${S.description||""}`).join(`
`),N=encodeURI(p),k=document.createElement("a");k.setAttribute("href",N),k.setAttribute("download",`audit_logs_${Jt(new Date,"yyyy-MM-dd")}.csv`),document.body.appendChild(k),k.click(),document.body.removeChild(k)};return f?r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"Audit Logs"}),r.jsx("main",{className:"flex-1 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})]})]}):r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"Audit Logs"}),r.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[r.jsxs(q,{className:"mb-6",children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Vr,{className:"w-5 h-5"}),"Audit Log Filters"]})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Search"}),r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск по логам...",value:t,onChange:p=>n(p.target.value),className:"pl-10","data-testid":"input-search-logs",title:"Поиск в логах аудита"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Action"}),r.jsxs(fe,{value:s,onValueChange:a,children:[r.jsx(ue,{"data-testid":"select-action-filter",title:"Фильтр по действию",children:r.jsx(me,{})}),r.jsx(he,{children:g.map(p=>r.jsx(C,{value:p.value,children:p.label},p.value))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Resource"}),r.jsxs(fe,{value:i,onValueChange:l,children:[r.jsx(ue,{"data-testid":"select-resource-filter",title:"Фильтр по ресурсу",children:r.jsx(me,{})}),r.jsx(he,{children:x.map(p=>r.jsx(C,{value:p.value,children:p.label},p.value))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"User"}),r.jsxs(fe,{value:o,onValueChange:c,children:[r.jsx(ue,{"data-testid":"select-user-filter",title:"Фильтр по пользователю",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"All Users"}),m.map(p=>r.jsxs(C,{value:p.id,children:[p.username," (",p.role,")"]},p.id))]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),r.jsxs(jm,{children:[r.jsx(wm,{asChild:!0,children:r.jsxs(D,{variant:"outline",className:"w-80 justify-start text-left font-normal",children:[r.jsx(Xn,{className:"mr-2 h-4 w-4"}),d!=null&&d.from?d.to?r.jsxs(r.Fragment,{children:[Jt(d.from,"LLL dd, y")," -"," ",Jt(d.to,"LLL dd, y")]}):Jt(d.from,"LLL dd, y"):r.jsx("span",{children:"Pick a date range"})]})}),r.jsx(Tu,{className:"w-auto p-0",align:"start",children:r.jsx(fN,{initialFocus:!0,mode:"range",defaultMonth:d==null?void 0:d.from,selected:d,onSelect:u,numberOfMonths:2})})]})]}),r.jsx("div",{className:"flex-1"}),r.jsxs(D,{onClick:b,variant:"outline",className:"flex items-center gap-2",children:[r.jsx(br,{className:"w-4 h-4"}),"Export CSV"]})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{children:["Activity Log (",h.length," entries)"]})}),r.jsxs(W,{children:[r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Timestamp"}),r.jsx(Z,{children:"User"}),r.jsx(Z,{children:"Action"}),r.jsx(Z,{children:"Resource"}),r.jsx(Z,{children:"IP Address"}),r.jsx(Z,{children:"Description"})]})}),r.jsx(It,{children:h.map(p=>r.jsxs(De,{children:[r.jsx(H,{className:"font-mono text-sm",children:Jt(new Date(p.timestamp),"MMM dd, HH:mm:ss")}),r.jsx(H,{children:r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:p.userName||"Unknown"}),r.jsx("div",{className:"text-sm text-gray-500",children:p.userRole})]})})}),r.jsx(H,{children:r.jsxs(ie,{className:`flex items-center gap-1 ${j(p.action)}`,children:[w(p.action),p.action]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[y(p.resourceType),r.jsx("span",{children:p.resourceType}),p.resourceId&&r.jsxs("span",{className:"text-sm text-gray-500",children:["#",p.resourceId.slice(-8)]})]})}),r.jsx(H,{className:"font-mono text-sm",children:p.ipAddress||"N/A"}),r.jsx(H,{className:"max-w-xs truncate",children:p.description||"No description"})]},p.id))})]}),h.length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Vr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No audit logs found"}),r.jsx("p",{className:"text-gray-500",children:"No activity logs match your current filters."})]})]})]})]})]})]})}const I3e=Ke.object({name:Ke.string().min(1,"Name is required"),url:Ke.string().url("Valid URL is required"),events:Ke.array(Ke.string()).min(1,"At least one event is required"),macros:Ke.record(Ke.string()).optional(),headers:Ke.record(Ke.string()).optional(),retryAttempts:Ke.number().min(0).max(10).default(3),timeout:Ke.number().min(5).max(120).default(30),isActive:Ke.boolean().default(!0)});function F3e(){const{token:e}=tr(),{t}=Wt(),{toast:n}=at(),s=Et(),[a,i]=v.useState("postbacks"),[l,o]=v.useState(!1);v.useState(null);const{data:c=[],isLoading:d}=Fe({queryKey:["/api/admin/global-postbacks"],queryFn:async()=>{const p=await fetch("/api/admin/global-postbacks",{headers:{Authorization:`Bearer ${e}`}});if(!p.ok)throw new Error("Failed to fetch postbacks");return p.json()}}),{data:u=[],isLoading:h}=Fe({queryKey:["/api/admin/postback-logs"],queryFn:async()=>{const p=await fetch("/api/admin/postback-logs",{headers:{Authorization:`Bearer ${e}`}});if(!p.ok)throw new Error("Failed to fetch postback logs");return p.json()}}),f=Oe({mutationFn:async p=>await Re("/api/admin/global-postbacks","POST",p),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/global-postbacks"]}),o(!1),x.reset(),n({title:t("success"),description:"Global postback created successfully"})},onError:p=>{n({title:t("error"),description:p.message,variant:"destructive"})}}),m=Oe({mutationFn:async({id:p,data:N})=>await Re("PATCH",`/api/admin/global-postbacks/${p}`,N),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/global-postbacks"]}),n({title:t("success"),description:"Postback updated successfully"})}}),g=Oe({mutationFn:async p=>await Re("POST",`/api/admin/global-postbacks/${p}/test`),onSuccess:()=>{n({title:t("success"),description:"Test postback sent successfully"})},onError:p=>{n({title:t("error"),description:p.message,variant:"destructive"})}}),x=Jm({resolver:tp(I3e),defaultValues:{name:"",url:"",events:[],macros:{},headers:{},retryAttempts:3,timeout:30,isActive:!0}}),w=[{value:"conversion",label:"Conversion"},{value:"click",label:"Click"},{value:"registration",label:"Registration"},{value:"deposit",label:"Deposit"},{value:"sale",label:"Sale"},{value:"lead",label:"Lead"},{value:"install",label:"Install"}],j=p=>{switch(p){case"sent":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"retry":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},y=p=>{switch(p){case"sent":return r.jsx(ur,{className:"w-4 h-4"});case"pending":return r.jsx(lr,{className:"w-4 h-4"});case"failed":return r.jsx(Kt,{className:"w-4 h-4"});case"retry":return r.jsx(mu,{className:"w-4 h-4"});default:return r.jsx(Vr,{className:"w-4 h-4"})}};return d||h?r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 overflow-hidden",children:[r.jsx(gn,{title:"Postbacks Management"}),r.jsx("main",{className:"flex-1 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})]})]}):r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"Postbacks Management"}),r.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:r.jsxs(rn,{value:a,onValueChange:i,className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Zr,{children:[r.jsxs(We,{value:"postbacks",className:"flex items-center gap-2",children:[r.jsx($h,{className:"w-4 h-4"}),"Global Postbacks"]}),r.jsxs(We,{value:"logs",className:"flex items-center gap-2",children:[r.jsx(Vr,{className:"w-4 h-4"}),"Postback Logs"]}),r.jsxs(We,{value:"settings",className:"flex items-center gap-2",children:[r.jsx(fr,{className:"w-4 h-4"}),"Settings"]})]}),a==="postbacks"&&r.jsxs(_t,{open:l,onOpenChange:o,children:[r.jsx(Ja,{asChild:!0,children:r.jsxs(D,{className:"flex items-center gap-2","data-testid":"button-create-postback",title:"Создать глобальный постбэк",children:[r.jsx(Zt,{className:"w-4 h-4"}),"Add Global Postback"]})}),r.jsxs(kt,{className:"max-w-2xl",children:[r.jsx(St,{children:r.jsx(Ct,{children:"Create Global Postback"})}),r.jsx(ep,{...x,children:r.jsxs("form",{onSubmit:x.handleSubmit(p=>f.mutate(p)),className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(dt,{control:x.control,name:"name",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Postback Name"}),r.jsx(ft,{children:r.jsx(ne,{...p,placeholder:"e.g., Analytics Postback","data-testid":"input-postback-name"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:x.control,name:"url",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Postback URL"}),r.jsx(ft,{children:r.jsx(ne,{...p,placeholder:"https://example.com/postback","data-testid":"input-postback-url"})}),r.jsx(mt,{})]})})]}),r.jsx(dt,{control:x.control,name:"events",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Trigger Events"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(N=>r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:p.value.includes(N.value),onChange:k=>{k.target.checked?p.onChange([...p.value,N.value]):p.onChange(p.value.filter(S=>S!==N.value))},className:"rounded"}),r.jsx("span",{className:"text-sm",children:N.label})]},N.value))}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(dt,{control:x.control,name:"retryAttempts",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Retry Attempts"}),r.jsx(ft,{children:r.jsx(ne,{type:"number",...p,onChange:N=>p.onChange(parseInt(N.target.value)),"data-testid":"input-retry-attempts"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:x.control,name:"timeout",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Timeout (seconds)"}),r.jsx(ft,{children:r.jsx(ne,{type:"number",...p,onChange:N=>p.onChange(parseInt(N.target.value)),"data-testid":"input-timeout"})}),r.jsx(mt,{})]})})]}),r.jsx(dt,{control:x.control,name:"isActive",render:({field:p})=>r.jsxs(ct,{className:"flex items-center justify-between",children:[r.jsx(ut,{children:"Active"}),r.jsx(ft,{children:r.jsx(Je,{checked:p.value,onCheckedChange:p.onChange,"data-testid":"switch-postback-active"})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(D,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),r.jsx(D,{type:"submit",disabled:f.isPending,children:f.isPending?"Creating...":"Create Postback"})]})]})})]})]})]}),r.jsxs(He,{value:"postbacks",className:"space-y-4",children:[c.map(p=>r.jsxs(q,{className:"hover:shadow-md transition-shadow",children:[r.jsx(re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx($h,{className:"w-5 h-5"}),p.name]}),r.jsx(Ze,{className:"font-mono text-sm",children:p.url})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ie,{className:p.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:p.isActive?"Active":"Inactive"}),r.jsx(D,{size:"sm",variant:"outline",onClick:()=>g.mutate(p.id),disabled:g.isPending,"data-testid":`button-test-postback-${p.id}`,title:"Тестировать постбэк",children:r.jsx(Hw,{className:"w-4 h-4"})}),r.jsx(D,{size:"sm",variant:"outline",onClick:()=>m.mutate({id:p.id,data:{isActive:!p.isActive}}),"data-testid":`button-toggle-postback-${p.id}`,title:p.isActive?"Приостановить постбэк":"Активировать постбэк",children:p.isActive?r.jsx(qA,{className:"w-4 h-4"}):r.jsx(WA,{className:"w-4 h-4"})})]})]})}),r.jsx(W,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Events"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:p.events&&Array.isArray(p.events)?p.events.map(N=>r.jsx(ie,{variant:"outline",className:"text-xs",children:N},N)):r.jsx(ie,{variant:"outline",className:"text-xs",children:"No events"})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Settings"}),r.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsxs("div",{children:["Retry: ",p.retryAttempts," times"]}),r.jsxs("div",{children:["Timeout: ",p.timeout,"s"]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Last Updated"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:new Date(p.updatedAt).toLocaleString()})]})]})})]},p.id)),c.length===0&&r.jsx(q,{children:r.jsxs(W,{className:"text-center py-8",children:[r.jsx($h,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No global postbacks configured"}),r.jsx("p",{className:"text-gray-500",children:"Create your first global postback to start receiving webhook notifications."})]})})]}),r.jsx(He,{value:"logs",className:"space-y-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Recent Postback Activity"})}),r.jsxs(W,{children:[r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Timestamp"}),r.jsx(Z,{children:"Postback"}),r.jsx(Z,{children:"URL"}),r.jsx(Z,{children:"Status"}),r.jsx(Z,{children:"HTTP Code"}),r.jsx(Z,{children:"Attempts"})]})}),r.jsx(It,{children:u.map(p=>r.jsxs(De,{children:[r.jsx(H,{className:"font-mono text-sm",children:new Date(p.timestamp).toLocaleString()}),r.jsx(H,{children:p.postbackName||"Unknown"}),r.jsx(H,{className:"font-mono text-sm max-w-xs truncate",children:p.url}),r.jsx(H,{children:r.jsxs(ie,{className:`flex items-center gap-1 ${j(p.status)}`,children:[y(p.status),p.status]})}),r.jsx(H,{children:r.jsx("span",{className:`font-mono ${p.httpCode>=400?"text-red-600":"text-green-600"}`,children:p.httpCode||"N/A"})}),r.jsx(H,{children:p.attempt||1})]},p.id))})]}),u.length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Vr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No postback logs"}),r.jsx("p",{className:"text-gray-500",children:"Postback activity will appear here once events start triggering."})]})]})]})}),r.jsx(He,{value:"settings",className:"space-y-4",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"w-5 h-5"}),"Global Postback Settings"]}),r.jsx(Ze,{children:"Configure global settings for all postbacks"})]}),r.jsxs(W,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Default Settings"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Default Retry Attempts"}),r.jsx(ne,{type:"number",className:"w-20",defaultValue:"3"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Default Timeout (seconds)"}),r.jsx(ne,{type:"number",className:"w-20",defaultValue:"30"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Enable Logging"}),r.jsx(Je,{defaultChecked:!0})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Security"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Require HTTPS"}),r.jsx(Je,{defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Verify SSL Certificates"}),r.jsx(Je,{defaultChecked:!0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Rate Limiting"}),r.jsx(Je,{defaultChecked:!0})]})]})]})]}),r.jsx("div",{className:"pt-4 border-t",children:r.jsxs(D,{className:"flex items-center gap-2",title:"Сохранить настройки",children:[r.jsx(fr,{className:"w-4 h-4"}),"Save Settings"]})})]})]})})]})})]})]})}const L3e=Ke.object({type:Ke.enum(["ip","clickid","subid","device_id","user_agent","domain"]),value:Ke.string().min(1,"Value is required"),reason:Ke.string().optional(),expiresAt:Ke.date().optional()});function U3e(){const{token:e}=tr(),{t}=Wt(),{toast:n}=at(),s=Et(),[a,i]=v.useState(""),[l,o]=v.useState("all"),[c,d]=v.useState(!1),{data:u=[],isLoading:h}=Fe({queryKey:["/api/admin/blacklist",a,l],queryFn:async()=>{const p=new URLSearchParams;a&&p.append("search",a),l!=="all"&&p.append("type",l);const N=await fetch(`/api/admin/blacklist?${p.toString()}`,{headers:{Authorization:`Bearer ${e}`}});if(!N.ok)throw new Error("Failed to fetch blacklist");return N.json()}}),f=Oe({mutationFn:async p=>await Re("/api/admin/blacklist","POST",p),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/blacklist"]}),d(!1),x.reset(),n({title:t("success"),description:"Blacklist entry added successfully"})},onError:p=>{n({title:t("error"),description:p.message,variant:"destructive"})}}),m=Oe({mutationFn:async p=>await Re(`/api/admin/blacklist/${p}`,"DELETE"),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/blacklist"]}),n({title:t("success"),description:"Blacklist entry removed successfully"})}}),g=Oe({mutationFn:async({id:p,isActive:N})=>await Re(`/api/admin/blacklist/${p}`,"PATCH",{isActive:N}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/blacklist"]}),n({title:t("success"),description:"Blacklist entry updated successfully"})}}),x=Jm({resolver:tp(L3e),defaultValues:{type:"ip",value:"",reason:""}}),w=[{value:"all",label:"All Types",icon:r.jsx(Dt,{className:"w-4 h-4"})},{value:"ip",label:"IP Address",icon:r.jsx(mr,{className:"w-4 h-4"})},{value:"clickid",label:"Click ID",icon:r.jsx(Qc,{className:"w-4 h-4"})},{value:"subid",label:"Sub ID",icon:r.jsx(Oo,{className:"w-4 h-4"})},{value:"device_id",label:"Device ID",icon:r.jsx($i,{className:"w-4 h-4"})},{value:"user_agent",label:"User Agent",icon:r.jsx(mr,{className:"w-4 h-4"})},{value:"domain",label:"Domain",icon:r.jsx(mr,{className:"w-4 h-4"})}],j=p=>{const N=w.find(k=>k.value===p);return(N==null?void 0:N.icon)||r.jsx(Dt,{className:"w-4 h-4"})},y=p=>{switch(p){case"ip":return"bg-red-100 text-red-800";case"clickid":return"bg-orange-100 text-orange-800";case"subid":return"bg-yellow-100 text-yellow-800";case"device_id":return"bg-blue-100 text-blue-800";case"user_agent":return"bg-purple-100 text-purple-800";case"domain":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},b=p=>p&&new Date(p)<new Date;return h?r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"Blacklist Management"}),r.jsx("main",{className:"flex-1 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})]})]}):r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"Blacklist Management"}),r.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[r.jsxs(q,{className:"mb-6",children:[r.jsx(re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Dt,{className:"w-5 h-5"}),"Fraud Prevention Blacklist"]}),r.jsx(Ze,{children:"Manage blocked IPs, click IDs, and other fraud indicators"})]}),r.jsxs(_t,{open:c,onOpenChange:d,children:[r.jsx(Ja,{asChild:!0,children:r.jsxs(D,{className:"flex items-center gap-2","data-testid":"button-add-blacklist",children:[r.jsx(Zt,{className:"w-4 h-4"}),"Add to Blacklist"]})}),r.jsxs(kt,{className:"max-w-md",children:[r.jsx(St,{children:r.jsx(Ct,{children:"Add Blacklist Entry"})}),r.jsx(ep,{...x,children:r.jsxs("form",{onSubmit:x.handleSubmit(p=>f.mutate(p)),className:"space-y-4",children:[r.jsx(dt,{control:x.control,name:"type",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Entry Type"}),r.jsxs(fe,{onValueChange:p.onChange,defaultValue:p.value,children:[r.jsx(ft,{children:r.jsx(ue,{"data-testid":"select-blacklist-type",children:r.jsx(me,{placeholder:"Select type"})})}),r.jsx(he,{children:w.slice(1).map(N=>r.jsx(C,{value:N.value,children:r.jsxs("div",{className:"flex items-center gap-2",children:[N.icon,N.label]})},N.value))})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:x.control,name:"value",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Value"}),r.jsx(ft,{children:r.jsx(ne,{...p,placeholder:"e.g., 192.168.1.1 or click_id_123","data-testid":"input-blacklist-value"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:x.control,name:"reason",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Reason (Optional)"}),r.jsx(ft,{children:r.jsx(gt,{...p,placeholder:"Why is this being blacklisted?","data-testid":"input-blacklist-reason"})}),r.jsx(mt,{})]})}),r.jsx(dt,{control:x.control,name:"expiresAt",render:({field:p})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Expiration Date (Optional)"}),r.jsxs(jm,{children:[r.jsx(wm,{asChild:!0,children:r.jsx(ft,{children:r.jsxs(D,{variant:"outline",className:"w-full pl-3 text-left font-normal","data-testid":"button-select-expiry",children:[p.value?Jt(p.value,"PPP"):r.jsx("span",{children:"No expiration"}),r.jsx(Xn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),r.jsx(Tu,{className:"w-auto p-0",align:"start",children:r.jsx(fN,{mode:"single",selected:p.value,onSelect:p.onChange,disabled:N=>N<new Date,initialFocus:!0})})]}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(D,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),r.jsx(D,{type:"submit",disabled:f.isPending,children:f.isPending?"Adding...":"Add Entry"})]})]})})]})]})]})}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск по IP, доменам, ID...",value:a,onChange:p=>i(p.target.value),className:"pl-10","data-testid":"input-search-blacklist",title:"Поиск в черном списке"})]}),r.jsxs(fe,{value:l,onValueChange:o,children:[r.jsx(ue,{className:"w-48","data-testid":"select-type-filter",title:"Фильтр по типу записи",children:r.jsx(me,{})}),r.jsx(he,{children:w.map(p=>r.jsx(C,{value:p.value,children:r.jsxs("div",{className:"flex items-center gap-2",children:[p.icon,p.label]})},p.value))})]})]})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{children:["Blocked Entries (",u.length,")"]})}),r.jsxs(W,{children:[r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Type"}),r.jsx(Z,{children:"Value"}),r.jsx(Z,{children:"Reason"}),r.jsx(Z,{children:"Status"}),r.jsx(Z,{children:"Added"}),r.jsx(Z,{children:"Expires"}),r.jsx(Z,{children:"Actions"})]})}),r.jsx(It,{children:u.map(p=>r.jsxs(De,{children:[r.jsx(H,{children:r.jsxs(ie,{className:`flex items-center gap-1 ${y(p.type)}`,children:[j(p.type),p.type]})}),r.jsx(H,{className:"font-mono text-sm max-w-xs truncate",children:p.value}),r.jsx(H,{className:"max-w-xs truncate",children:p.reason||"No reason provided"}),r.jsx(H,{children:r.jsx("div",{className:"flex items-center gap-2",children:p.isActive&&!b(p.expiresAt)?r.jsxs(ie,{className:"bg-red-100 text-red-800 flex items-center gap-1",children:[r.jsx(Ka,{className:"w-3 h-3"}),"Active"]}):b(p.expiresAt)?r.jsxs(ie,{className:"bg-gray-100 text-gray-800 flex items-center gap-1",children:[r.jsx(lr,{className:"w-3 h-3"}),"Expired"]}):r.jsxs(ie,{className:"bg-green-100 text-green-800 flex items-center gap-1",children:[r.jsx(ur,{className:"w-3 h-3"}),"Inactive"]})})}),r.jsx(H,{className:"text-sm text-gray-500",children:Jt(new Date(p.createdAt),"MMM dd, yyyy")}),r.jsx(H,{className:"text-sm text-gray-500",children:p.expiresAt?Jt(new Date(p.expiresAt),"MMM dd, yyyy"):"Never"}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(D,{size:"sm",variant:"outline",onClick:()=>g.mutate({id:p.id,isActive:!p.isActive}),disabled:b(p.expiresAt),"data-testid":`button-toggle-${p.id}`,children:p.isActive?"Disable":"Enable"}),r.jsx(D,{size:"sm",variant:"outline",onClick:()=>m.mutate(p.id),"data-testid":`button-delete-${p.id}`,children:r.jsx(wr,{className:"w-4 h-4"})})]})})]},p.id))})]}),u.length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Dt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No blacklist entries"}),r.jsx("p",{className:"text-gray-500",children:l==="all"?"No entries have been added to the blacklist yet.":`No ${l} entries found in the blacklist.`})]})]})]})]})]})]})}const B3e=[{key:"timestamp",label:"Время",visible:!0,sortable:!0,type:"date",width:140},{key:"ip",label:"IP",visible:!0,sortable:!0,type:"text",width:120},{key:"geo",label:"GEO",visible:!0,sortable:!0,type:"text",width:80},{key:"offerName",label:"Оффер",visible:!0,sortable:!0,type:"text",width:150},{key:"partnerName",label:"Партнер",visible:!0,sortable:!0,type:"text",width:120},{key:"subId1",label:"Sub ID 1",visible:!0,sortable:!0,type:"text",width:100},{key:"subId2",label:"Sub ID 2",visible:!1,sortable:!0,type:"text",width:100},{key:"subId3",label:"Sub ID 3",visible:!1,sortable:!0,type:"text",width:100},{key:"clickId",label:"Click ID",visible:!0,sortable:!0,type:"text",width:120},{key:"traffic_source",label:"Источник",visible:!0,sortable:!0,type:"text",width:120},{key:"campaign",label:"Кампания",visible:!0,sortable:!0,type:"text",width:120},{key:"browser",label:"Браузер",visible:!1,sortable:!0,type:"text",width:100},{key:"device",label:"Устройство",visible:!1,sortable:!0,type:"text",width:100},{key:"os",label:"ОС",visible:!1,sortable:!0,type:"text",width:80},{key:"clicks",label:"Клики",visible:!0,sortable:!0,type:"number",width:80},{key:"uniqueClicks",label:"Уники",visible:!0,sortable:!0,type:"number",width:80},{key:"leads",label:"Лиды",visible:!0,sortable:!0,type:"number",width:80},{key:"conversions",label:"Конверсии",visible:!0,sortable:!0,type:"number",width:100},{key:"revenue",label:"Доход",visible:!0,sortable:!0,type:"currency",width:100},{key:"payout",label:"Выплата",visible:!0,sortable:!0,type:"currency",width:100},{key:"profit",label:"Прибыль",visible:!0,sortable:!0,type:"currency",width:100},{key:"roi",label:"ROI %",visible:!0,sortable:!0,type:"percentage",width:80},{key:"cr",label:"CR %",visible:!0,sortable:!0,type:"percentage",width:80},{key:"epc",label:"EPC $",visible:!0,sortable:!0,type:"currency",width:80},{key:"isBot",label:"Бот",visible:!0,sortable:!0,type:"boolean",width:60},{key:"isFraud",label:"Фрод",visible:!0,sortable:!0,type:"boolean",width:60},{key:"vpnDetected",label:"VPN",visible:!1,sortable:!0,type:"boolean",width:60},{key:"riskScore",label:"Риск",visible:!0,sortable:!0,type:"number",width:80},{key:"postbackReceived",label:"Постбек",visible:!1,sortable:!0,type:"boolean",width:80},{key:"integrationSource",label:"Интеграция",visible:!1,sortable:!0,type:"text",width:100}];function z3e(){const{token:e}=tr();Wt();const{toast:t}=at(),[n,s]=v.useState("table"),[a,i]=v.useState(""),[l,o]=v.useState(Jt(hl(new Date,7),"yyyy-MM-dd")),[c,d]=v.useState(Jt(new Date,"yyyy-MM-dd")),[u,h]=v.useState("all"),[f,m]=v.useState(B3e),[g,x]=v.useState(null),[w,j]=v.useState(1),[y,b]=v.useState(50),[p,N]=v.useState({}),k=[{value:"all",label:"Все данные"},{value:"today",label:"Сегодня"},{value:"yesterday",label:"Вчера"},{value:"7days",label:"7 дней"},{value:"30days",label:"30 дней"},{value:"bots",label:"Только боты"},{value:"fraud",label:"Только фрод"},{value:"conversions",label:"С конверсиями"},{value:"highRoi",label:"Высокий ROI"},{value:"lowRoi",label:"Низкий ROI"}],{data:S=[],isLoading:P}=Fe({queryKey:["/api/admin/analytics",{search:a,dateFrom:l,dateTo:c,quickFilter:u,filters:p,page:w,limit:y,sort:g}],queryFn:async()=>{const z=new URLSearchParams;a&&z.append("search",a),l&&z.append("dateFrom",l),c&&z.append("dateTo",c),u&&u!=="all"&&z.append("quickFilter",u),z.append("page",w.toString()),z.append("limit",y.toString()),Object.entries(p).forEach(([E,$])=>{$&&z.append(`filter_${E}`,$)}),g&&(z.append("sortBy",g.key),z.append("sortOrder",g.direction));const U=await fetch(`/api/admin/analytics?${z}`,{headers:{Authorization:`Bearer ${e}`}});if(!U.ok)throw new Error("Ошибка загрузки аналитики");return U.json()},refetchInterval:3e4}),_=v.useCallback(z=>{m(U=>U.map(E=>E.key===z?{...E,visible:!E.visible}:E))},[]),R=v.useCallback(z=>{x(U=>(U==null?void 0:U.key)===z?U.direction==="asc"?{key:z,direction:"desc"}:null:{key:z,direction:"asc"})},[]),O=v.useCallback(z=>{h(z);const U=new Date;switch(z){case"today":o(Jt(U,"yyyy-MM-dd")),d(Jt(U,"yyyy-MM-dd"));break;case"yesterday":const E=hl(U,1);o(Jt(E,"yyyy-MM-dd")),d(Jt(E,"yyyy-MM-dd"));break;case"7days":o(Jt(hl(U,7),"yyyy-MM-dd")),d(Jt(U,"yyyy-MM-dd"));break;case"30days":o(Jt(hl(U,30),"yyyy-MM-dd")),d(Jt(U,"yyyy-MM-dd"));break;case"bots":N($=>({...$,isBot:"true"}));break;case"fraud":N($=>({...$,isFraud:"true"}));break;case"conversions":N($=>({...$,hasConversions:"true"}));break;case"highRoi":N($=>({...$,minRoi:"100"}));break;case"lowRoi":N($=>({...$,maxRoi:"0"}));break;default:N({})}j(1)},[]),M=v.useCallback(async z=>{try{const U=new URLSearchParams;U.append("format",z),U.append("search",a),U.append("dateFrom",l),U.append("dateTo",c),U.append("quickFilter",u);const E=await fetch(`/api/admin/analytics/export?${U}`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({columns:f.filter(ee=>ee.visible).map(ee=>ee.key)})});if(!E.ok)throw new Error("Export failed");const $=await E.blob(),G=window.URL.createObjectURL($),oe=document.createElement("a");oe.href=G,oe.download=`analytics_${z}_${new Date().toISOString().split("T")[0]}.${z}`,document.body.appendChild(oe),oe.click(),window.URL.revokeObjectURL(G),document.body.removeChild(oe),t({title:"Экспорт завершен",description:`Данные экспортированы в формате ${z.toUpperCase()}`})}catch{t({title:"Ошибка экспорта",description:"Не удалось экспортировать данные",variant:"destructive"})}},[a,l,c,u,f,e,t]),A=v.useCallback(()=>{i(""),N({}),h("all"),x(null),j(1),o(Jt(hl(new Date,7),"yyyy-MM-dd")),d(Jt(new Date,"yyyy-MM-dd"))},[]),T=v.useCallback((z,U)=>{if(z==null)return"-";switch(U){case"currency":return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(Number(z));case"percentage":return`${Number(z).toFixed(2)}%`;case"number":return Number(z).toLocaleString("ru-RU");case"boolean":return z?"✓":"✗";case"date":return Jt(new Date(z),"dd.MM.yyyy HH:mm");default:return String(z)}},[]),B=v.useMemo(()=>f.filter(z=>z.visible),[f]);return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 p-6",children:r.jsxs("div",{className:"max-w-full mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Аналитика и Статистика"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Полный анализ эффективности офферов, источников и партнеров"})]}),r.jsxs(rn,{value:n,onValueChange:s,className:"w-full",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-3 lg:w-[400px]",children:[r.jsxs(We,{value:"table",className:"flex items-center gap-2",children:[r.jsx(yr,{className:"h-4 w-4"}),"Таблица"]}),r.jsx(We,{value:"charts",children:"Графики"}),r.jsx(We,{value:"reports",children:"Отчеты"})]}),r.jsx(He,{value:"table",className:"mt-6",children:r.jsxs(q,{children:[r.jsxs(re,{className:"pb-4",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[r.jsx(se,{className:"text-xl",children:"Детальная Аналитика"}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-center w-full lg:w-auto",children:[r.jsxs("div",{className:"relative min-w-[300px]",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ne,{placeholder:"Поиск по IP, SubID, ClickID, GEO...",value:a,onChange:z=>i(z.target.value),className:"pl-10","data-testid":"input-analytics-search"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ne,{type:"date",value:l,onChange:z=>o(z.target.value),className:"w-[140px]","data-testid":"input-date-from"}),r.jsx(ne,{type:"date",value:c,onChange:z=>d(z.target.value),className:"w-[140px]","data-testid":"input-date-to"})]}),r.jsxs(fe,{value:u,onValueChange:O,children:[r.jsx(ue,{className:"w-[160px]","data-testid":"select-quick-filter",children:r.jsx(me,{placeholder:"Быстрые фильтры"})}),r.jsx(he,{children:k.map(z=>r.jsx(C,{value:z.value,children:z.label},z.value))})]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between pt-4 border-t",children:[r.jsxs("div",{className:"flex gap-3 items-center",children:[r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsxs(D,{variant:"outline",size:"sm","data-testid":"button-columns",children:[r.jsx(fr,{className:"h-4 w-4 mr-2"}),"Столбцы (",B.length,")"]})}),r.jsx(Es,{className:"w-56 max-h-[400px] overflow-y-auto",children:f.map(z=>r.jsx(OB,{checked:z.visible,onCheckedChange:()=>_(z.key),children:z.label},z.key))})]}),r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsxs(D,{variant:"outline",size:"sm","data-testid":"button-export",children:[r.jsx(br,{className:"h-4 w-4 mr-2"}),"Экспорт"]})}),r.jsxs(Es,{children:[r.jsxs(Lt,{onClick:()=>M("csv"),children:[r.jsx(LR,{className:"h-4 w-4 mr-2"}),"CSV"]}),r.jsxs(Lt,{onClick:()=>M("xlsx"),children:[r.jsx(LR,{className:"h-4 w-4 mr-2"}),"Excel (XLSX)"]}),r.jsxs(Lt,{onClick:()=>M("json"),children:[r.jsx(Kre,{className:"h-4 w-4 mr-2"}),"JSON"]})]})]}),r.jsxs(D,{variant:"outline",size:"sm",onClick:A,"data-testid":"button-reset",children:[r.jsx(mu,{className:"h-4 w-4 mr-2"}),"Сброс"]})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Всего записей: ",S.length]})]})]}),r.jsxs(W,{className:"p-0",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{className:"min-w-full",children:[r.jsx($t,{children:r.jsx(De,{className:"bg-gray-50 dark:bg-gray-800",children:B.map(z=>r.jsx(Z,{className:`text-left font-medium text-gray-900 dark:text-gray-100 ${z.sortable?"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700":""}`,style:{width:z.width},onClick:()=>z.sortable&&R(z.key),"data-testid":`header-${z.key}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[z.label,(g==null?void 0:g.key)===z.key&&(g.direction==="asc"?r.jsx(cr,{className:"h-4 w-4"}):r.jsx(HA,{className:"h-4 w-4"}))]})},z.key))})}),r.jsx(It,{children:P?r.jsx(De,{children:r.jsx(H,{colSpan:B.length,className:"text-center py-8 text-gray-500",children:"Загрузка данных..."})}):S.length===0?r.jsx(De,{children:r.jsx(H,{colSpan:B.length,className:"text-center py-8 text-gray-500",children:"Нет данных для отображения"})}):S.map(z=>r.jsx(De,{className:"hover:bg-gray-50 dark:hover:bg-gray-800","data-testid":`row-analytics-${z.id}`,children:B.map(U=>r.jsxs(H,{className:"py-2 px-4 text-sm","data-testid":`cell-${U.key}-${z.id}`,children:[U.key==="geo"&&r.jsx(ie,{variant:"outline",className:"font-mono",children:z[U.key]}),U.key==="isBot"&&z.isBot&&r.jsx(ie,{variant:"destructive",children:"БОТ"}),U.key==="isFraud"&&z.isFraud&&r.jsx(ie,{variant:"destructive",children:"ФРОД"}),U.key==="riskScore"&&r.jsx(ie,{variant:z.riskScore>70?"destructive":z.riskScore>40?"secondary":"default",children:z.riskScore}),!["geo","isBot","isFraud","riskScore"].includes(U.key)&&T(z[U.key],U.type)]},`${z.id}-${U.key}`))},z.id))})]})}),r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Показано:"}),r.jsxs(fe,{value:y.toString(),onValueChange:z=>b(Number(z)),children:[r.jsx(ue,{className:"w-[100px]",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"25",children:"25"}),r.jsx(C,{value:"50",children:"50"}),r.jsx(C,{value:"100",children:"100"}),r.jsx(C,{value:"500",children:"500"})]})]}),r.jsx("span",{className:"text-sm text-gray-500",children:"записей"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(D,{variant:"outline",size:"sm",onClick:()=>j(z=>Math.max(1,z-1)),disabled:w===1,"data-testid":"button-prev-page",children:r.jsx(Mi,{className:"h-4 w-4"})}),r.jsxs("span",{className:"text-sm",children:["Страница ",w]}),r.jsx(D,{variant:"outline",size:"sm",onClick:()=>j(z=>z+1),disabled:S.length<y,"data-testid":"button-next-page",children:r.jsx(Zc,{className:"h-4 w-4"})})]})]})]})]})}),r.jsx(He,{value:"charts",className:"mt-6",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Графики и Визуализации"})}),r.jsx(W,{children:r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Раздел графиков в разработке"})})]})}),r.jsx(He,{value:"reports",className:"mt-6",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Отчеты и Аналитика"})}),r.jsx(W,{children:r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Раздел отчетов в разработке"})})]})})]})]})})}const ZI=[{key:"timestamp",label:"Дата и время",visible:!0,sortable:!0,type:"datetime",width:180},{key:"campaign",label:"Кампания",visible:!0,sortable:!0,type:"text",width:120},{key:"subid",label:"Subid",visible:!0,sortable:!0,type:"text",width:100},{key:"ip",label:"IP",visible:!0,sortable:!0,type:"text",width:120},{key:"offer",label:"Оффер",visible:!0,sortable:!0,type:"text",width:150},{key:"countryFlag",label:"Флаг страны",visible:!0,sortable:!0,type:"text",width:80},{key:"country",label:"Страна",visible:!0,sortable:!0,type:"text",width:100},{key:"region",label:"Регион",visible:!1,sortable:!0,type:"text",width:100},{key:"city",label:"Город",visible:!1,sortable:!0,type:"text",width:100},{key:"osLogo",label:"Логотип ОС",visible:!1,sortable:!0,type:"text",width:80},{key:"connectionType",label:"Тип соединения",visible:!1,sortable:!0,type:"text",width:120},{key:"deviceType",label:"Тип устройства",visible:!0,sortable:!0,type:"text",width:100},{key:"isBot",label:"Бот",visible:!0,sortable:!0,type:"boolean",width:60},{key:"uniqueForCampaign",label:"Уникальный для кампании",visible:!0,sortable:!0,type:"boolean",width:150},{key:"lead",label:"Лид",visible:!0,sortable:!0,type:"boolean",width:60},{key:"sale",label:"Продажа",visible:!0,sortable:!0,type:"boolean",width:80},{key:"revenue",label:"Доход",visible:!0,sortable:!0,type:"currency",width:100},{key:"subId1",label:"Sub ID 1",visible:!0,sortable:!0,type:"text",width:100},{key:"subId2",label:"Sub ID 2",visible:!0,sortable:!0,type:"text",width:100},{key:"subId3",label:"Sub ID 3",visible:!0,sortable:!0,type:"text",width:100},{key:"subId4",label:"Sub ID 4",visible:!0,sortable:!0,type:"text",width:100},{key:"subId5",label:"Sub ID 5",visible:!0,sortable:!0,type:"text",width:100},{key:"subId6",label:"Sub ID 6",visible:!0,sortable:!0,type:"text",width:100},{key:"subId7",label:"Sub ID 7",visible:!0,sortable:!0,type:"text",width:100},{key:"subId8",label:"Sub ID 8",visible:!0,sortable:!0,type:"text",width:100},{key:"subId9",label:"Sub ID 9",visible:!0,sortable:!0,type:"text",width:100},{key:"subId10",label:"Sub ID 10",visible:!0,sortable:!0,type:"text",width:100},{key:"subId11",label:"Sub ID 11",visible:!0,sortable:!0,type:"text",width:100},{key:"subId12",label:"Sub ID 12",visible:!0,sortable:!0,type:"text",width:100},{key:"subId13",label:"Sub ID 13",visible:!0,sortable:!0,type:"text",width:100},{key:"subId14",label:"Sub ID 14",visible:!0,sortable:!0,type:"text",width:100},{key:"subId15",label:"Sub ID 15",visible:!0,sortable:!0,type:"text",width:100},{key:"subId16",label:"Sub ID 16",visible:!0,sortable:!0,type:"text",width:100},{key:"subId17",label:"Sub ID 17",visible:!0,sortable:!0,type:"text",width:100},{key:"subId18",label:"Sub ID 18",visible:!0,sortable:!0,type:"text",width:100},{key:"subId19",label:"Sub ID 19",visible:!0,sortable:!0,type:"text",width:100},{key:"subId20",label:"Sub ID 20",visible:!0,sortable:!0,type:"text",width:100},{key:"subId21",label:"Sub ID 21",visible:!1,sortable:!0,type:"text",width:100},{key:"subId22",label:"Sub ID 22",visible:!1,sortable:!0,type:"text",width:100},{key:"subId23",label:"Sub ID 23",visible:!1,sortable:!0,type:"text",width:100},{key:"subId24",label:"Sub ID 24",visible:!1,sortable:!0,type:"text",width:100},{key:"subId25",label:"Sub ID 25",visible:!1,sortable:!0,type:"text",width:100},{key:"subId26",label:"Sub ID 26",visible:!1,sortable:!0,type:"text",width:100},{key:"subId27",label:"Sub ID 27",visible:!1,sortable:!0,type:"text",width:100},{key:"subId28",label:"Sub ID 28",visible:!1,sortable:!0,type:"text",width:100},{key:"subId29",label:"Sub ID 29",visible:!1,sortable:!0,type:"text",width:100},{key:"subId30",label:"Sub ID 30",visible:!1,sortable:!0,type:"text",width:100},{key:"campaignGroup",label:"Группа кампании",visible:!1,sortable:!0,type:"text",width:120},{key:"landingGroup",label:"Группа лендинга",visible:!1,sortable:!0,type:"text",width:120},{key:"offerGroup",label:"Группа оффера",visible:!1,sortable:!0,type:"text",width:120},{key:"landing",label:"Лендинг",visible:!1,sortable:!0,type:"text",width:120},{key:"partnerNetwork",label:"Партнерская сеть",visible:!1,sortable:!0,type:"text",width:120},{key:"source",label:"Источник",visible:!0,sortable:!0,type:"text",width:120},{key:"stream",label:"Поток",visible:!1,sortable:!0,type:"text",width:100},{key:"site",label:"Сайт",visible:!1,sortable:!0,type:"text",width:120},{key:"xRequestedWith",label:"X-Requested-With",visible:!1,sortable:!0,type:"text",width:150},{key:"referrer",label:"Реферер",visible:!1,sortable:!0,type:"text",width:150},{key:"searchEngine",label:"Поисковик",visible:!1,sortable:!0,type:"text",width:100},{key:"keyword",label:"Ключевик",visible:!1,sortable:!0,type:"text",width:120},{key:"clickId",label:"Click ID",visible:!0,sortable:!0,type:"text",width:120},{key:"visitorCode",label:"Visitor code",visible:!1,sortable:!0,type:"text",width:120},{key:"campaignId",label:"ID кампании",visible:!1,sortable:!0,type:"text",width:120},{key:"campaignGroupId",label:"ID группы кампании",visible:!1,sortable:!0,type:"text",width:150},{key:"offerGroupId",label:"ID группы оффера",visible:!1,sortable:!0,type:"text",width:140},{key:"landingGroupId",label:"ID группы лендинга",visible:!1,sortable:!0,type:"text",width:150},{key:"landingId",label:"ID лендинга",visible:!1,sortable:!0,type:"text",width:120},{key:"offerId",label:"ID оффера",visible:!1,sortable:!0,type:"text",width:120},{key:"networkId",label:"ID рекламной сети",visible:!1,sortable:!0,type:"text",width:140},{key:"sourceId",label:"ID источника",visible:!1,sortable:!0,type:"text",width:120},{key:"streamId",label:"ID потока",visible:!1,sortable:!0,type:"text",width:120},{key:"adCampaignId",label:"Ad Campaign ID",visible:!1,sortable:!0,type:"text",width:140},{key:"externalId",label:"External ID",visible:!1,sortable:!0,type:"text",width:120},{key:"creativeId",label:"Creative ID",visible:!1,sortable:!0,type:"text",width:120},{key:"operator",label:"Оператор",visible:!1,sortable:!0,type:"text",width:100},{key:"provider",label:"Провайдер",visible:!1,sortable:!0,type:"text",width:100},{key:"language",label:"Язык",visible:!1,sortable:!0,type:"text",width:80},{key:"userAgent",label:"User Agent",visible:!1,sortable:!0,type:"text",width:200},{key:"os",label:"Операционная система",visible:!1,sortable:!0,type:"text",width:150},{key:"osVersion",label:"Версия ОС",visible:!1,sortable:!0,type:"text",width:100},{key:"browser",label:"Браузер",visible:!1,sortable:!0,type:"text",width:100},{key:"browserVersion",label:"Версия браузера",visible:!1,sortable:!0,type:"text",width:120},{key:"deviceModel",label:"Модель устройства",visible:!1,sortable:!0,type:"text",width:150},{key:"browserLogo",label:"Логотип браузера",visible:!1,sortable:!0,type:"text",width:120},{key:"ipMasked12",label:"IP 1.2..",visible:!1,sortable:!0,type:"text",width:100},{key:"ipMasked123",label:"IP 1.2.3.*",visible:!1,sortable:!0,type:"text",width:120},{key:"cost",label:"Расход",visible:!1,sortable:!0,type:"currency",width:100},{key:"year",label:"Год",visible:!1,sortable:!0,type:"number",width:80},{key:"month",label:"Месяц",visible:!1,sortable:!0,type:"number",width:80},{key:"week",label:"Неделя",visible:!1,sortable:!0,type:"number",width:80},{key:"dayOfWeek",label:"День недели",visible:!1,sortable:!0,type:"number",width:100},{key:"day",label:"День",visible:!1,sortable:!0,type:"number",width:80},{key:"hour",label:"Час",visible:!1,sortable:!0,type:"number",width:80},{key:"dayAndHour",label:"День и час",visible:!1,sortable:!0,type:"text",width:100},{key:"timeLeftLanding",label:"Время ухода с лендинга",visible:!1,sortable:!0,type:"datetime",width:180},{key:"direction",label:"Направление",visible:!1,sortable:!0,type:"text",width:100},{key:"uniqueForStream",label:"Уникальный для потока",visible:!1,sortable:!0,type:"boolean",width:150},{key:"uniqueGlobally",label:"Уникальный глобально",visible:!1,sortable:!0,type:"boolean",width:150},{key:"emptyReferrer",label:"Пустой реферер",visible:!1,sortable:!0,type:"boolean",width:120},{key:"usingProxy",label:"Используя прокси",visible:!1,sortable:!0,type:"boolean",width:120},{key:"clickOnLanding",label:"Клик на лендинге",visible:!1,sortable:!0,type:"boolean",width:130},{key:"deposit",label:"Депозиты",visible:!0,sortable:!0,type:"boolean",width:80},{key:"registration",label:"Регистрация",visible:!0,sortable:!0,type:"boolean",width:100},{key:"revenueDeposit",label:"Доход (депозит)",visible:!1,sortable:!0,type:"currency",width:120},{key:"revenueRegistration",label:"Доход (регистрация)",visible:!1,sortable:!0,type:"currency",width:140},{key:"rejected",label:"Отклонен",visible:!1,sortable:!0,type:"boolean",width:80},{key:"previousCampaignId",label:"ID предыдущей кампании",visible:!1,sortable:!0,type:"text",width:160},{key:"parentClickSubid",label:"Subid родит. кликов",visible:!1,sortable:!0,type:"text",width:140},{key:"previousCampaign",label:"Предыдущая кампания",visible:!1,sortable:!0,type:"text",width:140},{key:"profitability",label:"Прибыльность",visible:!0,sortable:!0,type:"percentage",width:100},{key:"profit",label:"Прибыль",visible:!0,sortable:!0,type:"currency",width:100},{key:"revenueExpected",label:"Доход (ожидаемый)",visible:!1,sortable:!0,type:"currency",width:140},{key:"revenueConfirmed",label:"Доход (подтвержденный)",visible:!1,sortable:!0,type:"currency",width:160},{key:"revenueRejected",label:"Доход (отклоненный)",visible:!1,sortable:!0,type:"currency",width:150},{key:"upsells",label:"Допродажи",visible:!1,sortable:!0,type:"number",width:100},{key:"timeOnLanding",label:"Время, проведенное на лендинге",visible:!1,sortable:!0,type:"number",width:200}];function V3e(){const{token:e}=tr();Wt();const{toast:t}=at(),{isCollapsed:n}=Qs(),s=Et(),a=ZI.filter((de,Be,qe)=>Be===qe.findIndex(Qe=>Qe.key===de.key));v.useState("table");const[i,l]=v.useState(""),[o,c]=v.useState(Jt(hl(new Date,7),"yyyy-MM-dd")),[d,u]=v.useState(Jt(new Date,"yyyy-MM-dd")),[h,f]=v.useState("all"),[m,g]=v.useState(a),[x,w]=v.useState(null),[j,y]=v.useState(1),[b,p]=v.useState(10),[N,k]=v.useState(!1),[S,P]=v.useState(1),[_,R]=v.useState(0),[O,M]=v.useState(null),[A,T]=v.useState(null),B=v.useRef(0),z=[{value:"all",label:"Все данные"},{value:"today",label:"Сегодня"},{value:"yesterday",label:"Вчера"},{value:"7days",label:"7 дней"},{value:"30days",label:"30 дней"},{value:"bots",label:"Только боты"},{value:"fraud",label:"Только фрод"},{value:"conversions",label:"С конверсиями"},{value:"highRoi",label:"Высокий ROI"},{value:"lowRoi",label:"Низкий ROI"}],{data:U,isLoading:E}=Fe({queryKey:["/api/admin/analytics",{search:i,dateFrom:o,dateTo:d,quickFilter:h,page:j,limit:b,sort:x}],queryFn:async()=>{const de=new URLSearchParams;i&&de.append("search",i),o&&de.append("dateFrom",o),d&&de.append("dateTo",d),h&&h!=="all"&&de.append("quickFilter",h),de.append("page",j.toString()),de.append("limit",b.toString()),x&&(de.append("sortBy",x.key),de.append("sortOrder",x.direction));const Be=await fetch(`/api/admin/analytics?${de}`,{headers:{Authorization:`Bearer ${e}`}});if(!Be.ok)throw new Error("Failed to fetch analytics data");const qe=await Be.json();if(Array.isArray(qe)){const Qe=qe.length,wt=Math.ceil(Qe/b),rr=(j-1)*b,V=rr+b;return{data:qe.slice(rr,V),total:Qe,totalPages:wt}}return qe}}),$=(U==null?void 0:U.data)||[];v.useEffect(()=>{U&&(R(U.total),P(U.totalPages))},[U]);const G=de=>{g(Be=>Be.map(qe=>qe.key===de?{...qe,visible:!qe.visible}:qe))},oe=({countryCode:de})=>{if(!de||de==="-")return r.jsx("span",{children:"-"});const Be=qe=>({RU:"🇷🇺",US:"🇺🇸",GB:"🇬🇧",DE:"🇩🇪",FR:"🇫🇷",IT:"🇮🇹",ES:"🇪🇸",PL:"🇵🇱",UA:"🇺🇦",BY:"🇧🇾",KZ:"🇰🇿",UZ:"🇺🇿",KG:"🇰🇬",TJ:"🇹🇯",TM:"🇹🇲",CN:"🇨🇳",JP:"🇯🇵",KR:"🇰🇷",IN:"🇮🇳",TH:"🇹🇭",VN:"🇻🇳",PH:"🇵🇭",ID:"🇮🇩",MY:"🇲🇾",SG:"🇸🇬",AU:"🇦🇺",NZ:"🇳🇿",CA:"🇨🇦",MX:"🇲🇽",BR:"🇧🇷",AR:"🇦🇷",CL:"🇨🇱",CO:"🇨🇴",PE:"🇵🇪",VE:"🇻🇪",TR:"🇹🇷",AE:"🇦🇪",SA:"🇸🇦",IL:"🇮🇱",EG:"🇪🇬",ZA:"🇿🇦",NG:"🇳🇬",KE:"🇰🇪",GH:"🇬🇭",MA:"🇲🇦",NO:"🇳🇴",SE:"🇸🇪",DK:"🇩🇰",FI:"🇫🇮",NL:"🇳🇱",BE:"🇧🇪",CH:"🇨🇭",AT:"🇦🇹",CZ:"🇨🇿",HU:"🇭🇺",RO:"🇷🇴",BG:"🇧🇬",HR:"🇭🇷",RS:"🇷🇸",SI:"🇸🇮",SK:"🇸🇰",LT:"🇱🇹",LV:"🇱🇻",EE:"🇪🇪",IE:"🇮🇪",PT:"🇵🇹",GR:"🇬🇷",CY:"🇨🇾",MT:"🇲🇹",IS:"🇮🇸"})[qe.toUpperCase()]||`🏳️ ${qe}`;return r.jsx("span",{className:"inline-flex items-center gap-1 text-base",title:de,children:Be(de)})},ee=({os:de})=>{const qe=(Qe=>{const wt=(Qe==null?void 0:Qe.toLowerCase())||"";return wt.includes("windows")?{icon:r.jsx("svg",{className:"w-4 h-4 text-blue-500",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M0 3.4L10.1 2V11.6H0V3.4ZM11.3 1.9L24 0V11.6H11.3V1.9ZM24 12.4V24L11.3 22.1V12.4H24ZM10.1 22.2L0 20.6V12.4H10.1V22.2Z"})}),name:"Windows",color:"text-blue-600"}:wt.includes("mac")||wt.includes("darwin")?{icon:r.jsx("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M18.71 19.5C17.88 20.74 17 21.95 15.66 21.97C14.32 22 13.89 21.18 12.37 21.18C10.84 21.18 10.37 21.95 9.1 22C7.79 22.05 6.8 20.68 5.96 19.47C4.25 17 2.94 12.45 4.7 9.39C5.57 7.87 7.13 6.91 8.82 6.88C10.1 6.86 11.32 7.75 12.11 7.75C12.89 7.75 14.37 6.68 15.92 6.84C16.57 6.87 18.39 7.1 19.56 8.82C19.47 8.88 17.39 10.19 17.41 12.63C17.44 15.65 20.06 16.66 20.09 16.67C20.06 16.74 19.67 18.11 18.71 19.5ZM13 3.5C13.73 2.67 14.94 2.04 15.94 2C16.07 3.17 15.6 4.35 14.9 5.19C14.21 6.04 13.07 6.7 11.95 6.61C11.8 5.46 12.36 4.26 13 3.5Z"})}),name:"macOS",color:"text-gray-600"}:wt.includes("linux")||wt.includes("ubuntu")?{icon:r.jsx("svg",{className:"w-4 h-4 text-orange-500",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M12.5 2C12.3 2 12.15 2.03 12 2.06C11.85 2.03 11.7 2 11.5 2C10.26 2 9.27 3 9.27 4.22C9.27 4.31 9.28 4.4 9.29 4.5C9.1 4.77 8.95 5.08 8.84 5.42C8.46 6.55 8.46 7.77 8.84 8.9C9.05 9.5 9.37 10.04 9.78 10.5C9.83 10.56 9.88 10.61 9.94 10.66C10.28 11.05 10.69 11.38 11.16 11.63C11.41 11.77 11.69 11.87 11.97 11.95C12.03 11.97 12.1 11.98 12.16 12C12.22 11.98 12.29 11.97 12.35 11.95C12.63 11.87 12.91 11.77 13.16 11.63C13.63 11.38 14.04 11.05 14.38 10.66C14.44 10.61 14.49 10.56 14.54 10.5C14.95 10.04 15.27 9.5 15.48 8.9C15.86 7.77 15.86 6.55 15.48 5.42C15.37 5.08 15.22 4.77 15.03 4.5C15.04 4.4 15.05 4.31 15.05 4.22C15.05 3 14.06 2 12.82 2H12.5Z"})}),name:"Linux",color:"text-orange-600"}:wt.includes("android")?{icon:r.jsx("svg",{className:"w-4 h-4 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M17.6 9.48L16.38 8.26C16.18 8.06 15.86 8.06 15.66 8.26C15.46 8.46 15.46 8.78 15.66 8.98L16.88 10.2C15.93 10.8 14.8 11.15 13.6 11.15C12.4 11.15 11.27 10.8 10.32 10.2L11.54 8.98C11.74 8.78 11.74 8.46 11.54 8.26C11.34 8.06 11.02 8.06 10.82 8.26L9.6 9.48C8.75 10.33 8.25 11.48 8.25 12.75V17.25C8.25 18.77 9.48 20 11 20H16C17.52 20 18.75 18.77 18.75 17.25V12.75C18.75 11.48 18.25 10.33 17.6 9.48Z"})}),name:"Android",color:"text-green-600"}:wt.includes("ios")||wt.includes("iphone")?{icon:r.jsx("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M18.71 19.5C17.88 20.74 17 21.95 15.66 21.97C14.32 22 13.89 21.18 12.37 21.18C10.84 21.18 10.37 21.95 9.1 22C7.79 22.05 6.8 20.68 5.96 19.47C4.25 17 2.94 12.45 4.7 9.39C5.57 7.87 7.13 6.91 8.82 6.88C10.1 6.86 11.32 7.75 12.11 7.75C12.89 7.75 14.37 6.68 15.92 6.84C16.57 6.87 18.39 7.1 19.56 8.82C19.47 8.88 17.39 10.19 17.41 12.63C17.44 15.65 20.06 16.66 20.09 16.67C20.06 16.74 19.67 18.11 18.71 19.5ZM13 3.5C13.73 2.67 14.94 2.04 15.94 2C16.07 3.17 15.6 4.35 14.9 5.19C14.21 6.04 13.07 6.7 11.95 6.61C11.8 5.46 12.36 4.26 13 3.5Z"})}),name:"iOS",color:"text-gray-600"}:{icon:r.jsx("svg",{className:"w-4 h-4 text-gray-500",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M4 6H20V18H4V6ZM20 4H4C2.89 4 2 4.89 2 6V18C2 19.11 2.89 20 4 20H20C21.11 20 22 19.11 22 18V6C22 4.89 21.11 4 20 4Z"})}),name:Qe||"Unknown",color:"text-gray-400"}})(de);return r.jsxs("div",{className:"flex items-center gap-1.5",title:`OS: ${qe.name}`,children:[qe.icon,r.jsx("span",{className:`text-xs font-medium ${qe.color}`,children:qe.name})]})},ce=(de,Be,qe)=>{if(de==null)return"-";if(qe==="countryFlag")return r.jsx(oe,{countryCode:de});if(qe==="country"){const Qe={RU:"Россия",US:"США",DE:"Германия",UA:"Украина",BY:"Беларусь",KZ:"Казахстан",GB:"Великобритания",FR:"Франция",IT:"Италия",ES:"Испания"};return r.jsx("span",{className:"text-sm font-medium",children:Qe[de]||de})}if(qe==="osLogo"||qe==="os")return r.jsx(ee,{os:de});switch(Be){case"currency":return`$${Number(de).toFixed(2)}`;case"percentage":return`${Number(de).toFixed(1)}%`;case"boolean":return de?r.jsx("div",{className:"flex items-center justify-center",children:r.jsx(on,{className:"w-4 h-4 text-green-600"})}):r.jsx("div",{className:"flex items-center justify-center",children:r.jsx(Fn,{className:"w-4 h-4 text-red-600"})});case"datetime":return new Date(de).toLocaleString();case"date":return new Date(de).toLocaleDateString();default:return String(de)}},ye=m.filter(de=>de.visible),je=(de,Be)=>{M(Be),de.dataTransfer.effectAllowed="move",de.dataTransfer.setData("text/html",de.currentTarget.outerHTML),B.current=0},$e=(de,Be)=>{de.preventDefault(),de.dataTransfer.dropEffect="move",O!==null&&O!==Be&&T(Be)},ke=(de,Be)=>{de.preventDefault(),B.current++,O!==null&&O!==Be&&T(Be)},be=de=>{de.preventDefault(),B.current--,B.current===0&&T(null)},pe=(de,Be)=>{if(de.preventDefault(),O===null||O===Be){M(null),T(null),B.current=0;return}const qe=[...m],Qe=ye[O],wt=qe.findIndex(xe=>xe.key===Qe.key),rr=ye[Be],V=qe.findIndex(xe=>xe.key===rr.key),[I]=qe.splice(wt,1);let J=V;wt<V?J=V:J=V+1,qe.splice(J,0,I),g(qe),M(null),T(null),B.current=0,t({title:"Колонки переупорядочены",description:`Колонка "${Qe.label}" перемещена`})},le=()=>{M(null),T(null),B.current=0},Ie=de=>{de>=1&&de<=S&&y(de)},ae=()=>{const Be=[],qe=[];for(let Qe=Math.max(2,j-2);Qe<=Math.min(S-1,j+2);Qe++)Be.push(Qe);return j-2>2?qe.push(1,"..."):qe.push(1),qe.push(...Be),j+2<S-1?qe.push("...",S):S>1&&qe.push(S),qe},st=()=>{try{const de=$.map(V=>{const I={};return ye.forEach(J=>{const xe=V[J.key];J.key==="countryFlag"||J.key==="country"?I[J.label]=xe:J.type==="boolean"?I[J.label]=xe?"Да":"Нет":J.type==="currency"?I[J.label]=`$${Number(xe||0).toFixed(2)}`:J.type==="percentage"?I[J.label]=`${Number(xe||0).toFixed(1)}%`:I[J.label]=xe||"-"}),I}),Be=ye.map(V=>V.label),qe=[Be.join(","),...de.map(V=>Be.map(I=>{const J=V[I];return typeof J=="string"&&(J.includes(",")||J.includes('"'))?`"${J.replace(/"/g,'""')}"`:J}).join(","))].join(`
`),Qe=new Blob([qe],{type:"text/csv;charset=utf-8;"}),wt=document.createElement("a"),rr=URL.createObjectURL(Qe);wt.setAttribute("href",rr),wt.setAttribute("download",`analytics-${new Date().toISOString().slice(0,10)}.csv`),wt.style.visibility="hidden",document.body.appendChild(wt),wt.click(),document.body.removeChild(wt),t({title:"Экспорт завершен",description:`Данные экспортированы в CSV файл (${de.length} записей)`})}catch{t({title:"Ошибка экспорта",description:"Не удалось экспортировать данные",variant:"destructive"})}},K=()=>{s.invalidateQueries({queryKey:["/api/admin/analytics"]}),t({title:"Данные обновлены",description:"Аналитические данные успешно обновлены"})},Me=()=>{console.log("Reset filters clicked"),l(""),c(Jt(hl(new Date,7),"yyyy-MM-dd")),u(Jt(new Date,"yyyy-MM-dd")),f("all"),y(1),s.invalidateQueries({queryKey:["/api/admin/analytics"]}),t({title:"Фильтры сброшены",description:"Все фильтры возвращены к значениям по умолчанию"})};return r.jsxs("div",{className:"h-screen bg-background overflow-hidden",children:[r.jsx(xn,{}),r.jsxs("div",{className:`h-full flex flex-col transition-all duration-300 ${n?"ml-16":"ml-64"}`,children:[r.jsx(gn,{title:"Аналитика"}),r.jsx("main",{className:"flex-1 overflow-auto p-4",children:r.jsxs("div",{className:"space-y-4 max-w-full",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-3",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Аналитика (Полная версия)"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"Комплексная аналитика с 100+ полями данных"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 shrink-0",children:[r.jsxs(D,{onClick:()=>k(!N),variant:"outline",size:"sm",children:[r.jsx(fr,{className:"w-4 h-4 mr-1"}),"Столбцы (",ye.length,")"]}),r.jsxs(D,{onClick:st,variant:"outline",size:"sm",children:[r.jsx(br,{className:"w-4 h-4 mr-1"}),"Экспорт"]}),r.jsxs(D,{onClick:K,variant:"outline",size:"sm",disabled:E,children:[r.jsx(Vt,{className:`w-4 h-4 mr-1 ${E?"animate-spin":""}`}),"Обновить"]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsx(q,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:r.jsxs(W,{className:"pt-3 pb-3 px-4",children:[r.jsx("div",{className:"text-lg font-bold",children:$.length}),r.jsx("p",{className:"text-blue-100 text-xs",children:"Всего записей"})]})}),r.jsx(q,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:r.jsxs(W,{className:"pt-3 pb-3 px-4",children:[r.jsx("div",{className:"text-lg font-bold",children:ye.length}),r.jsx("p",{className:"text-green-100 text-xs",children:"Видимых столбцов"})]})}),r.jsx(q,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:r.jsxs(W,{className:"pt-3 pb-3 px-4",children:[r.jsx("div",{className:"text-lg font-bold",children:ZI.length}),r.jsx("p",{className:"text-purple-100 text-xs",children:"Всего полей"})]})}),r.jsx(q,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:r.jsxs(W,{className:"pt-3 pb-3 px-4",children:[r.jsx("div",{className:"text-lg font-bold",children:$.filter(de=>de.isBot).length}),r.jsx("p",{className:"text-red-100 text-xs",children:"Ботов обнаружено"})]})})]}),N&&r.jsxs(q,{className:"bg-white dark:bg-gray-800 border shadow-sm",children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-base",children:"Настройка столбцов"})}),r.jsx(W,{children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 max-h-80 overflow-y-auto",children:m.map(de=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(dn,{id:de.key,checked:de.visible,onCheckedChange:()=>G(de.key)}),r.jsx("label",{htmlFor:de.key,className:"text-xs cursor-pointer",children:de.label})]},de.key))})})]}),r.jsxs(q,{className:"bg-white dark:bg-gray-800 border shadow-sm",children:[r.jsx(re,{className:"pb-2",children:r.jsxs(se,{className:"flex items-center gap-2 text-base",children:[r.jsx(As,{className:"w-4 h-4"}),"Фильтрация данных"]})}),r.jsx(W,{className:"pt-0",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-2 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{placeholder:"Поиск...",value:i,onChange:de=>l(de.target.value),className:"pl-9 h-8 text-sm"})]}),r.jsx("div",{children:r.jsx(ne,{type:"date",value:o,onChange:de=>c(de.target.value),className:"h-8 text-sm",title:"От даты"})}),r.jsx("div",{children:r.jsx(ne,{type:"date",value:d,onChange:de=>u(de.target.value),className:"h-8 text-sm",title:"До даты"})}),r.jsx("div",{children:r.jsxs(fe,{value:h,onValueChange:f,children:[r.jsx(ue,{className:"h-8 text-sm",children:r.jsx(me,{placeholder:"Быстрые фильтры"})}),r.jsx(he,{children:z.map(de=>r.jsx(C,{value:de.value,children:de.label},de.value))})]})}),r.jsx("div",{children:r.jsxs(D,{onClick:Me,variant:"outline",className:"h-8 w-full text-sm",size:"sm",children:[r.jsx(mu,{className:"w-3 h-3 mr-1"}),"Сбросить"]})})]})})]}),r.jsxs(q,{className:"bg-white dark:bg-gray-800 border shadow-sm",children:[r.jsx(re,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[r.jsx(se,{className:"text-xl",children:"Данные аналитики"}),S>1&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(D,{variant:"outline",size:"sm",onClick:()=>Ie(j-1),disabled:j===1,className:"p-1 h-8 w-8",children:r.jsx(Mi,{className:"h-4 w-4"})}),r.jsx("div",{className:"flex items-center gap-1",children:ae().map((de,Be)=>r.jsx(D,{variant:de===j?"default":"outline",size:"sm",onClick:()=>typeof de=="number"&&Ie(de),disabled:de==="...",className:"h-8 w-8 p-0 text-sm",children:de},Be))}),r.jsx(D,{variant:"outline",size:"sm",onClick:()=>Ie(j+1),disabled:j===S,className:"p-1 h-8 w-8",children:r.jsx(Zc,{className:"h-4 w-4"})}),r.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["Стр. ",j," из ",S]})]})]})}),r.jsx(W,{children:E?r.jsx("div",{className:"flex justify-center p-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("div",{className:"min-w-max",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b",children:ye.map((de,Be)=>r.jsx("th",{draggable:!0,onDragStart:qe=>je(qe,Be),onDragOver:qe=>$e(qe,Be),onDragEnter:qe=>ke(qe,Be),onDragLeave:be,onDrop:qe=>pe(qe,Be),onDragEnd:le,className:`text-left p-2 font-medium text-sm whitespace-nowrap cursor-grab active:cursor-grabbing transition-colors duration-200 ${O===Be?"opacity-50 bg-blue-50 dark:bg-blue-900/20":A===Be?"bg-blue-100 dark:bg-blue-800/30 border-l-2 border-blue-500":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,style:{width:de.width},title:"Перетащите колонку для изменения порядка",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qw,{className:"w-3 h-3 text-gray-400 opacity-60"}),r.jsx("span",{children:de.label})]})},`${de.key}-${Be}`))})}),r.jsx("tbody",{children:$.map((de,Be)=>r.jsx("tr",{className:"border-b hover:bg-muted/50",children:ye.map((qe,Qe)=>r.jsx("td",{className:"p-2 text-sm whitespace-nowrap",children:ce(de[qe.key],qe.type,qe.key)},`${qe.key}-${Qe}-${de.id||Be}`))},de.id||Be))})]})}),$.length===0&&r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Нет данных для отображения"})]})})]})]})})]})]})}const QI={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-lg"};function Gj({name:e,logo:t,size:n="md",className:s,showTooltip:a=!1}){const[i,l]=v.useState(!1);console.log("OfferLogo debug:",{name:e,logo:t,logoType:typeof t,logoLength:t==null?void 0:t.length,imageError:i,hasLogo:!!t});const o=d=>{if(!d)return"??";const u=d.replace(/[^\w\s\u0400-\u04FF]/g,"").trim().split(/\s+/).filter(h=>h.length>0);return u.length===0?"??":u.length===1?u[0].substring(0,2).toUpperCase():(u[0][0]+u[1][0]).toUpperCase()};if(t&&!i)return r.jsx("div",{className:Ee("relative inline-flex items-center justify-center rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800",QI[n],s),title:a?e:void 0,"data-testid":"offer-logo-image",children:r.jsx("img",{src:t,alt:`Логотип ${e}`,className:"w-full h-full object-cover",onError:()=>l(!0),onLoad:()=>l(!1)})});const c=o(e);return r.jsx("div",{className:Ee("relative inline-flex items-center justify-center rounded-lg font-semibold","bg-gradient-to-br from-blue-500 to-purple-600 text-white","shadow-sm border border-gray-200 dark:border-gray-700",QI[n],s),title:a?e:void 0,"data-testid":"offer-logo-initials",children:c})}const ho={RU:{code:"RU",name:"Россия",flag:"🇷🇺"},US:{code:"US",name:"США",flag:"🇺🇸"},GB:{code:"GB",name:"Великобритания",flag:"🇬🇧"},DE:{code:"DE",name:"Германия",flag:"🇩🇪"},FR:{code:"FR",name:"Франция",flag:"🇫🇷"},IT:{code:"IT",name:"Италия",flag:"🇮🇹"},KZ:{code:"KZ",name:"Казахстан",flag:"🇰🇿"},UA:{code:"UA",name:"Украина",flag:"🇺🇦"},BR:{code:"BR",name:"Бразилия",flag:"🇧🇷"},IN:{code:"IN",name:"Индия",flag:"🇮🇳"},PH:{code:"PH",name:"Филиппины",flag:"🇵🇭"},CA:{code:"CA",name:"Канада",flag:"🇨🇦"},CN:{code:"CN",name:"Китай",flag:"🇨🇳"},TR:{code:"TR",name:"Турция",flag:"🇹🇷"},JP:{code:"JP",name:"Япония",flag:"🇯🇵"},KR:{code:"KR",name:"Южная Корея",flag:"🇰🇷"},AU:{code:"AU",name:"Австралия",flag:"🇦🇺"},MX:{code:"MX",name:"Мексика",flag:"🇲🇽"},AR:{code:"AR",name:"Аргентина",flag:"🇦🇷"},ES:{code:"ES",name:"Испания",flag:"🇪🇸"},PT:{code:"PT",name:"Португалия",flag:"🇵🇹"},NL:{code:"NL",name:"Нидерланды",flag:"🇳🇱"},SE:{code:"SE",name:"Швеция",flag:"🇸🇪"},NO:{code:"NO",name:"Норвегия",flag:"🇳🇴"},DK:{code:"DK",name:"Дания",flag:"🇩🇰"},FI:{code:"FI",name:"Финляндия",flag:"🇫🇮"},PL:{code:"PL",name:"Польша",flag:"🇵🇱"},CZ:{code:"CZ",name:"Чехия",flag:"🇨🇿"},HU:{code:"HU",name:"Венгрия",flag:"🇭🇺"},AT:{code:"AT",name:"Австрия",flag:"🇦🇹"},CH:{code:"CH",name:"Швейцария",flag:"🇨🇭"},BE:{code:"BE",name:"Бельгия",flag:"🇧🇪"},IE:{code:"IE",name:"Ирландия",flag:"🇮🇪"},IL:{code:"IL",name:"Израиль",flag:"🇮🇱"},AE:{code:"AE",name:"ОАЭ",flag:"🇦🇪"},SA:{code:"SA",name:"Саудовская Аравия",flag:"🇸🇦"},TH:{code:"TH",name:"Таиланд",flag:"🇹🇭"},VN:{code:"VN",name:"Вьетнам",flag:"🇻🇳"},ID:{code:"ID",name:"Индонезия",flag:"🇮🇩"},MY:{code:"MY",name:"Малайзия",flag:"🇲🇾"},SG:{code:"SG",name:"Сингапур",flag:"🇸🇬"},ZA:{code:"ZA",name:"ЮАР",flag:"🇿🇦"},NG:{code:"NG",name:"Нигерия",flag:"🇳🇬"},EG:{code:"EG",name:"Египет",flag:"🇪🇬"},CL:{code:"CL",name:"Чили",flag:"🇨🇱"},CO:{code:"CO",name:"Колумбия",flag:"🇨🇴"},PE:{code:"PE",name:"Перу",flag:"🇵🇪"},VE:{code:"VE",name:"Венесуэла",flag:"🇻🇪"},GR:{code:"GR",name:"Греция",flag:"🇬🇷"},HR:{code:"HR",name:"Хорватия",flag:"🇭🇷"},BG:{code:"BG",name:"Болгария",flag:"🇧🇬"},RO:{code:"RO",name:"Румыния",flag:"🇷🇴"},RS:{code:"RS",name:"Сербия",flag:"🇷🇸"},LT:{code:"LT",name:"Литва",flag:"🇱🇹"},LV:{code:"LV",name:"Латвия",flag:"🇱🇻"},EE:{code:"EE",name:"Эстония",flag:"🇪🇪"},SI:{code:"SI",name:"Словения",flag:"🇸🇮"},SK:{code:"SK",name:"Словакия",flag:"🇸🇰"},CY:{code:"CY",name:"Кипр",flag:"🇨🇾"},MT:{code:"MT",name:"Мальта",flag:"🇲🇹"},IS:{code:"IS",name:"Исландия",flag:"🇮🇸"},LU:{code:"LU",name:"Люксембург",flag:"🇱🇺"},MC:{code:"MC",name:"Монако",flag:"🇲🇨"},AD:{code:"AD",name:"Андорра",flag:"🇦🇩"},LI:{code:"LI",name:"Лихтенштейн",flag:"🇱🇮"},SM:{code:"SM",name:"Сан-Марино",flag:"🇸🇲"},VA:{code:"VA",name:"Ватикан",flag:"🇻🇦"},MA:{code:"MA",name:"Марокко",flag:"🇲🇦"},TN:{code:"TN",name:"Тунис",flag:"🇹🇳"},DZ:{code:"DZ",name:"Алжир",flag:"🇩🇿"},LY:{code:"LY",name:"Ливия",flag:"🇱🇾"},SD:{code:"SD",name:"Судан",flag:"🇸🇩"},ET:{code:"ET",name:"Эфиопия",flag:"🇪🇹"},KE:{code:"KE",name:"Кения",flag:"🇰🇪"},TZ:{code:"TZ",name:"Танзания",flag:"🇹🇿"},UG:{code:"UG",name:"Уганда",flag:"🇺🇬"},RW:{code:"RW",name:"Руанда",flag:"🇷🇼"},GH:{code:"GH",name:"Гана",flag:"🇬🇭"},CI:{code:"CI",name:"Кот-д'Ивуар",flag:"🇨🇮"},SN:{code:"SN",name:"Сенегал",flag:"🇸🇳"},CM:{code:"CM",name:"Камерун",flag:"🇨🇲"},IR:{code:"IR",name:"Иран",flag:"🇮🇷"},IQ:{code:"IQ",name:"Ирак",flag:"🇮🇶"},JO:{code:"JO",name:"Иордания",flag:"🇯🇴"},LB:{code:"LB",name:"Ливан",flag:"🇱🇧"},SY:{code:"SY",name:"Сирия",flag:"🇸🇾"},YE:{code:"YE",name:"Йемен",flag:"🇾🇪"},OM:{code:"OM",name:"Оман",flag:"🇴🇲"},QA:{code:"QA",name:"Катар",flag:"🇶🇦"},KW:{code:"KW",name:"Кувейт",flag:"🇰🇼"},BH:{code:"BH",name:"Бахрейн",flag:"🇧🇭"},AF:{code:"AF",name:"Афганистан",flag:"🇦🇫"},PK:{code:"PK",name:"Пакистан",flag:"🇵🇰"},BD:{code:"BD",name:"Бангладеш",flag:"🇧🇩"},LK:{code:"LK",name:"Шри-Ланка",flag:"🇱🇰"},NP:{code:"NP",name:"Непал",flag:"🇳🇵"},MM:{code:"MM",name:"Мьянма",flag:"🇲🇲"},KH:{code:"KH",name:"Камбоджа",flag:"🇰🇭"},LA:{code:"LA",name:"Лаос",flag:"🇱🇦"},MN:{code:"MN",name:"Монголия",flag:"🇲🇳"},KP:{code:"KP",name:"Северная Корея",flag:"🇰🇵"},TW:{code:"TW",name:"Тайвань",flag:"🇹🇼"},HK:{code:"HK",name:"Гонконг",flag:"🇭🇰"},MO:{code:"MO",name:"Макао",flag:"🇲🇴"},NZ:{code:"NZ",name:"Новая Зеландия",flag:"🇳🇿"},FJ:{code:"FJ",name:"Фиджи",flag:"🇫🇯"},PG:{code:"PG",name:"Папуа Новая Гвинея",flag:"🇵🇬"},EC:{code:"EC",name:"Эквадор",flag:"🇪🇨"},BO:{code:"BO",name:"Боливия",flag:"🇧🇴"},PY:{code:"PY",name:"Парагвай",flag:"🇵🇾"},UY:{code:"UY",name:"Уругвай",flag:"🇺🇾"},GY:{code:"GY",name:"Гайана",flag:"🇬🇾"},SR:{code:"SR",name:"Суринам",flag:"🇸🇷"},GF:{code:"GF",name:"Французская Гвиана",flag:"🇬🇫"},CU:{code:"CU",name:"Куба",flag:"🇨🇺"},JM:{code:"JM",name:"Ямайка",flag:"🇯🇲"},HT:{code:"HT",name:"Гаити",flag:"🇭🇹"},DO:{code:"DO",name:"Доминиканская Республика",flag:"🇩🇴"},PR:{code:"PR",name:"Пуэрто-Рико",flag:"🇵🇷"},CR:{code:"CR",name:"Коста-Рика",flag:"🇨🇷"},PA:{code:"PA",name:"Панама",flag:"🇵🇦"},NI:{code:"NI",name:"Никарагуа",flag:"🇳🇮"},HN:{code:"HN",name:"Гондурас",flag:"🇭🇳"},GT:{code:"GT",name:"Гватемала",flag:"🇬🇹"},BZ:{code:"BZ",name:"Белиз",flag:"🇧🇿"},SV:{code:"SV",name:"Сальвадор",flag:"🇸🇻"},AO:{code:"AO",name:"Ангола",flag:"🇦🇴"},AL:{code:"AL",name:"Албания",flag:"🇦🇱"},AM:{code:"AM",name:"Армения",flag:"🇦🇲"},AZ:{code:"AZ",name:"Азербайджан",flag:"🇦🇿"},GE:{code:"GE",name:"Грузия",flag:"🇬🇪"},MD:{code:"MD",name:"Молдова",flag:"🇲🇩"},BA:{code:"BA",name:"Босния и Герцеговина",flag:"🇧🇦"},MK:{code:"MK",name:"Северная Македония",flag:"🇲🇰"},ME:{code:"ME",name:"Черногория",flag:"🇲🇪"},XK:{code:"XK",name:"Косово",flag:"🇽🇰"},BY:{code:"BY",name:"Беларусь",flag:"🇧🇾"},UZ:{code:"UZ",name:"Узбекистан",flag:"🇺🇿"},KG:{code:"KG",name:"Кыргызстан",flag:"🇰🇬"},TJ:{code:"TJ",name:"Таджикистан",flag:"🇹🇯"},TM:{code:"TM",name:"Туркменистан",flag:"🇹🇲"}},JI={россия:"RU",сша:"US",америка:"US",великобритания:"GB",англия:"GB",германия:"DE",франция:"FR",италия:"IT",казахстан:"KZ",бразилия:"BR",индия:"IN",филиппины:"PH",канада:"CA",китай:"CN",турция:"TR",япония:"JP","южная корея":"KR",корея:"KR",австралия:"AU",мексика:"MX",аргентина:"AR",испания:"ES",португалия:"PT",нидерланды:"NL",швеция:"SE",норвегия:"NO",дания:"DK",финляндия:"FI",польша:"PL",чехия:"CZ",венгрия:"HU",австрия:"AT",швейцария:"CH",бельгия:"BE",ирландия:"IE",израиль:"IL",оаэ:"AE","саудовская аравия":"SA",таиланд:"TH",вьетнам:"VN",индонезия:"ID",малайзия:"MY",сингапур:"SG",юар:"ZA",нигерия:"NG",египет:"EG",чили:"CL",колумбия:"CO",перу:"PE",венесуэла:"VE",греция:"GR",russia:"RU","united states":"US",usa:"US",america:"US","united kingdom":"GB",uk:"GB",britain:"GB",england:"GB",germany:"DE",france:"FR",italy:"IT",kazakhstan:"KZ",brazil:"BR",india:"IN",philippines:"PH",canada:"CA",china:"CN",turkey:"TR",japan:"JP","south korea":"KR",korea:"KR",australia:"AU",mexico:"MX",argentina:"AR",spain:"ES",portugal:"PT",netherlands:"NL",sweden:"SE",norway:"NO",denmark:"DK",finland:"FI",poland:"PL","czech republic":"CZ",czechia:"CZ",hungary:"HU",austria:"AT",switzerland:"CH",belgium:"BE",ireland:"IE",israel:"IL",greece:"GR",czech:"CZ",uae:"AE","united arab emirates":"AE","saudi arabia":"SA",thailand:"TH",vietnam:"VN",indonesia:"ID",malaysia:"MY",singapore:"SG","south africa":"ZA",nigeria:"NG",egypt:"EG",chile:"CL",colombia:"CO",peru:"PE",venezuela:"VE",croatia:"HR",хорватия:"HR",bulgaria:"BG",болгария:"BG",romania:"RO",румыния:"RO",serbia:"RS",сербия:"RS",lithuania:"LT",литва:"LT",latvia:"LV",латвия:"LV",estonia:"EE",эстония:"EE",slovenia:"SI",словения:"SI",slovakia:"SK",словакия:"SK",cyprus:"CY",кипр:"CY",malta:"MT",мальта:"MT",iceland:"IS",исландия:"IS",luxembourg:"LU",люксембург:"LU",monaco:"MC",монако:"MC",andorra:"AD",андорра:"AD",liechtenstein:"LI",лихтенштейн:"LI","san marino":"SM","сан-марино":"SM",vatican:"VA",ватикан:"VA",morocco:"MA",марокко:"MA",tunisia:"TN",тунис:"TN",алжир:"DZ",libya:"LY",ливия:"LY",sudan:"SD",судан:"SD",ethiopia:"ET",эфиопия:"ET",kenya:"KE",кения:"KE",tanzania:"TZ",танзания:"TZ",uganda:"UG",уганда:"UG",rwanda:"RW",руанда:"RW",ghana:"GH",гана:"GH","ivory coast":"CI","кот-д'ивуар":"CI",senegal:"SN",сенегал:"SN",cameroon:"CM",камерун:"CM",iran:"IR",иран:"IR",iraq:"IQ",ирак:"IQ",jordan:"JO",иордания:"JO",lebanon:"LB",ливан:"LB",syria:"SY",сирия:"SY",yemen:"YE",йемен:"YE",oman:"OM",оман:"OM",qatar:"QA",катар:"QA",kuwait:"KW",кувейт:"KW",bahrain:"BH",бахрейн:"BH",afghanistan:"AF",афганистан:"AF",pakistan:"PK",пакистан:"PK",bangladesh:"BD",бангладеш:"BD","sri lanka":"LK","шри-ланка":"LK",nepal:"NP",непал:"NP",myanmar:"MM",мьянма:"MM",cambodia:"KH",камбоджа:"KH",laos:"LA",лаос:"LA",mongolia:"MN",монголия:"MN","north korea":"KP","северная корея":"KP",taiwan:"TW",тайвань:"TW","hong kong":"HK",гонконг:"HK",macau:"MO",макао:"MO","new zealand":"NZ","новая зеландия":"NZ",fiji:"FJ",фиджи:"FJ","papua new guinea":"PG","папуа новая гвинея":"PG",ecuador:"EC",эквадор:"EC",bolivia:"BO",боливия:"BO",paraguay:"PY",парагвай:"PY",uruguay:"UY",уругвай:"UY",guyana:"GY",гайана:"GY",suriname:"SR",суринам:"SR","french guiana":"GF","французская гвиана":"GF",cuba:"CU",куба:"CU",jamaica:"JM",ямайка:"JM",haiti:"HT",гаити:"HT","dominican republic":"DO","доминиканская республика":"DO","puerto rico":"PR","пуэрто-рико":"PR","costa rica":"CR","коста-рика":"CR",panama:"PA",панама:"PA",nicaragua:"NI",никарагуа:"NI",honduras:"HN",гондурас:"HN",guatemala:"GT",гватемала:"GT",belize:"BZ",белиз:"BZ","el salvador":"SV",сальвадор:"SV",angola:"AO",ангола:"AO",albania:"AL",албания:"AL",армения:"AM",azerbaijan:"AZ",азербайджан:"AZ",georgia:"GE",грузия:"GE",moldova:"MD",молдова:"MD",bosnia:"BA",босния:"BA","north macedonia":"MK",македония:"MK",montenegro:"ME",черногория:"ME",kosova:"XK",kosovo:"XK",косово:"XK",belarus:"BY",беларусь:"BY",uzbekistan:"UZ",узбекистан:"UZ",kyrgyzstan:"KG",кыргызстан:"KG",tajikistan:"TJ",таджикистан:"TJ",turkmenistan:"TM",туркменистан:"TM"};function Wc(e){if(!e)return"";if(ho[e.toUpperCase()])return ho[e.toUpperCase()].name;const t=jx(e);return t&&ho[t]?ho[t].name:e}function Pl(e){if(!e)return"🌍";if(ho[e.toUpperCase()])return ho[e.toUpperCase()].flag;const t=jx(e);return t&&ho[t]?ho[t].flag:"🌍"}function Zk(e){return ho[e]||{code:e,name:e,flag:"🌍"}}function jx(e){if(!e)return"";if(e.length===2&&e===e.toUpperCase())return e;const t=e.toLowerCase().trim(),n=JI[t];if(n)return n;for(const[i,l]of Object.entries(JI))if(i.includes(t)||t.includes(i))return l;const a={france:"FR",франция:"FR",turkey:"TR",турция:"TR"}[t];return a||e.toUpperCase().substring(0,2)}function Qk(e){return!e||!Array.isArray(e)?"Все ГЕО":typeof e[0]=="string"?e.map(t=>{const n=Wc(t);return`${Pl(t)} ${n}`}).join(", "):e.map(t=>{if(typeof t=="object"&&t.code){const n=t.name||Wc(t.code);return`${t.flag||Pl(t.code)} ${n}`}return t.toString()}).join(", ")}function iK(e){if(!e)return[{code:"RU",name:"Россия",flag:"🇷🇺"},{code:"US",name:"США",flag:"🇺🇸"},{code:"DE",name:"Германия",flag:"🇩🇪"}];if(typeof e=="string")try{const t=JSON.parse(e);if(Array.isArray(t))return iK(t)}catch{const t=e.split(/[,\s]+/).map(n=>n.trim()).filter(n=>n);if(t.length>0)return t.map(n=>{const s=jx(n);return Zk(s)})}return Array.isArray(e)?e.length>0&&typeof e[0]=="string"?e.map(t=>{const n=jx(t);return Zk(n)}):e.map(t=>{if(typeof t=="object"&&t.code)return{code:t.code,name:t.name||Wc(t.code),flag:t.flag||Pl(t.code)};const n=jx(t.toString());return Zk(n)}):[{code:"RU",name:"Россия",flag:"🇷🇺"},{code:"US",name:"США",flag:"🇺🇸"}]}function q3e(e,t){return{gambling:{label:t("offers.gambling"),className:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},dating:{label:t("offers.dating"),className:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300"},finance:{label:t("offers.finance"),className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},crypto:{label:t("offers.crypto"),className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"},nutra:{label:t("offers.health"),className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},software:{label:t("offers.software"),className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}}[e==null?void 0:e.toLowerCase()]||{label:e||t("offers.default"),className:"bg-gray-100 text-gray-800"}}function W3e(e,t){return{cpa:{label:t("offers.cpa"),className:"bg-blue-100 text-blue-800 border-blue-300 dark:bg-blue-900 dark:text-blue-300"},cpl:{label:t("offers.cpl"),className:"bg-green-100 text-green-800 border-green-300 dark:bg-green-900 dark:text-green-300"},cps:{label:t("offers.cps"),className:"bg-purple-100 text-purple-800 border-purple-300 dark:bg-purple-900 dark:text-purple-300"},cpi:{label:"CPI",className:"bg-orange-100 text-orange-800 border-orange-300 dark:bg-orange-900 dark:text-orange-300"},cpm:{label:t("offers.cpm"),className:"bg-pink-100 text-pink-800 border-pink-300 dark:bg-pink-900 dark:text-pink-300"}}[e==null?void 0:e.toLowerCase()]||{label:(e==null?void 0:e.toUpperCase())||"CPA",className:"bg-gray-100 text-gray-800 border-gray-300"}}function e3(e){return Math.ceil(e*100)/100+""}function H3e(){const{toast:e}=at(),{t}=Wt();tr();const[,n]=Bn(),s=Et(),{data:a=[],isLoading:i}=Fe({queryKey:["/api/partner/offers"],staleTime:5*60*1e3}),l=Oe({mutationFn:async u=>await Re("/api/partner/offer-access-request","POST",u),onSuccess:()=>{e({title:t("offers.requestSent","Запрос отправлен"),description:t("offers.requestSentDesc","Ваш запрос на доступ к офферу был отправлен рекламодателю"),variant:"default"}),s.invalidateQueries({queryKey:["/api/partner/offers"]})},onError:u=>{e({title:t("common.error","Ошибка"),description:u.message||t("offers.requestError","Не удалось отправить запрос"),variant:"destructive"})}}),o=(u,h)=>{navigator.clipboard.writeText(u),e({title:t("common.copied"),description:t("common.copiedDesc",{item:h})})},c=(u,h)=>{if(h==="approved"){const f=a.find(m=>m.id===u);f!=null&&f.partnerLink?o(f.partnerLink,"Партнерская ссылка"):n(`/affiliate/offers/${u}`)}else h!=="pending"&&l.mutate({offerId:u})};if(i)return r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-muted border-t-primary"}),r.jsx("p",{children:t("offers.loading","Загрузка офферов...")})]})});const d=a;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:t("offers.partnerOffers")}),r.jsx("p",{className:"text-muted-foreground",children:t("offers.subtitle")})]}),r.jsxs(ie,{variant:"outline",children:[d.length," ",t("offers.title").toLowerCase()]})]}),r.jsx(q,{children:r.jsx(W,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:t("common.name","Название")}),r.jsx(Z,{children:t("offers.category")}),r.jsx(Z,{children:t("common.payoutType","Тип выплаты")}),r.jsx(Z,{children:t("offers.countries","Гео")}),r.jsx(Z,{children:t("common.amount")}),r.jsx(Z,{children:"CR"}),r.jsx(Z,{className:"text-right",children:t("common.actions")})]})}),r.jsx(It,{children:d.map(u=>{const h=q3e(u.category,t),f=W3e(u.payoutType,t),m=0,g=u.accessStatus||(u.hasFullAccess?"approved":"none");return u.geoPricing&&Object.keys(u.geoPricing).length>0?Object.entries(u.geoPricing).map(([x,w],j)=>r.jsxs(De,{className:"hover:bg-gray-50/50",children:[r.jsx(H,{children:j===0?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Gj,{name:u.name,logo:u.logo,size:"md",showTooltip:!0}),r.jsx("div",{children:r.jsx("div",{className:"font-medium cursor-pointer text-blue-600 underline hover:text-blue-800 hover:no-underline transition-colors",onClick:()=>n(`/affiliate/offers/${u.id}`),children:u.name})})]}):null}),r.jsx(H,{children:j===0?r.jsx(ie,{className:h.className,children:h.label}):null}),r.jsx(H,{children:j===0?r.jsx(ie,{variant:"outline",className:`uppercase font-semibold ${f.className}`,children:f.label}):null}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-0.5 bg-gray-50 rounded px-1 py-0.5 w-fit",children:[r.jsx("span",{className:"text-sm leading-none",children:Pl(x)}),r.jsx("span",{className:"text-xs font-medium",children:x})]})}),r.jsx(H,{children:r.jsxs("div",{className:"font-mono font-medium",children:["$",w]})}),r.jsx(H,{children:j===0?r.jsxs("div",{className:"font-mono text-green-600 font-medium",children:[e3(m),"%"]}):null}),r.jsx(H,{className:"text-right",children:j===0?r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[g==="approved"?r.jsx(D,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>c(u.id,g),title:t("offers.accessApprovedTooltip","Доступ одобрен - получить ссылку"),children:t("offers.getLink","Забрать ссылку")}):g==="pending"?r.jsx(D,{size:"sm",disabled:!0,className:"bg-yellow-500 text-white cursor-not-allowed opacity-90",title:t("offers.requestPendingTooltip","Запрос отправлен, ожидает рассмотрения рекламодателем"),children:t("offers.pending","В ожидании")}):g==="rejected"?r.jsx(D,{size:"sm",disabled:!0,className:"bg-red-500 text-white cursor-not-allowed opacity-90",title:`${t("offers.accessRejected","Доступ отклонен")}${u.rejectReason?`: ${u.rejectReason}`:""}`,children:t("offers.rejected","Отклонен")}):r.jsx(D,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>c(u.id,g),title:t("offers.requestAccessTooltip","Запросить доступ к офферу"),children:t("offers.requestAccess","Запросить")}),r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsx(D,{variant:"ghost",size:"sm",children:r.jsx(Gx,{className:"h-4 w-4"})})}),r.jsxs(Es,{align:"end",children:[r.jsxs(Lt,{onClick:()=>n(`/affiliate/offers/${u.id}`),children:[r.jsx(Gt,{className:"h-4 w-4 mr-2"}),t("offers.details","Детали")]}),r.jsxs(Lt,{onClick:()=>n(`/affiliate/statistics?offer=${u.id}`),children:[r.jsx(yr,{className:"h-4 w-4 mr-2"}),t("offers.statistics","Статистика")]})]})]})]}):null})]},`${u.id}-${x}`)):r.jsxs(De,{className:"hover:bg-gray-50/50",children:[r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Gj,{name:u.name,logo:u.logo,size:"md",showTooltip:!0}),r.jsx("div",{children:r.jsx("div",{className:"font-medium cursor-pointer text-blue-600 underline hover:text-blue-800 hover:no-underline transition-colors",onClick:()=>n(`/affiliate/offers/${u.id}`),children:u.name})})]})}),r.jsx(H,{children:r.jsx(ie,{className:h.className,children:h.label})}),r.jsx(H,{children:r.jsx(ie,{variant:"outline",className:`uppercase font-semibold ${f.className}`,children:f.label})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-1 flex-wrap max-w-[100px]",children:[Array.isArray(u.countries)?u.countries.slice(0,3).map(x=>r.jsxs("div",{className:"flex items-center gap-0.5 bg-gray-50 rounded px-1 py-0.5",children:[r.jsx("span",{className:"text-sm leading-none",children:Pl(x)}),r.jsx("span",{className:"text-xs font-medium",children:x})]},x)):r.jsxs("div",{className:"flex items-center gap-0.5 bg-gray-50 rounded px-1 py-0.5",children:[r.jsx("span",{className:"text-sm leading-none",children:Pl(u.countries)}),r.jsx("span",{className:"text-xs font-medium",children:u.countries})]}),Array.isArray(u.countries)&&u.countries.length>3&&r.jsxs("span",{className:"text-xs text-muted-foreground bg-gray-100 rounded px-1 py-0.5",children:["+",u.countries.length-3]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"font-mono font-medium",children:["$",u.payout]})}),r.jsx(H,{children:r.jsxs("div",{className:"font-mono text-green-600 font-medium",children:[e3(m),"%"]})}),r.jsx(H,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[g==="approved"?r.jsx(D,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>n(`/affiliate/offers/${u.id}`),title:t("offers.accessApprovedTooltip","Доступ одобрен - получить ссылку"),children:t("offers.getLink","Забрать ссылку")}):g==="pending"?r.jsx(D,{size:"sm",disabled:!0,className:"bg-yellow-500 text-white cursor-not-allowed opacity-90",title:t("offers.requestPendingTooltip","Запрос отправлен, ожидает рассмотрения рекламодателем"),children:t("offers.pending","В ожидании")}):g==="rejected"?r.jsx(D,{size:"sm",disabled:!0,className:"bg-red-500 text-white cursor-not-allowed opacity-90",title:`${t("offers.accessRejected","Доступ отклонен")}${u.rejectReason?`: ${u.rejectReason}`:""}`,children:t("offers.rejected","Отклонен")}):r.jsx(D,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>c(u.id,g),title:t("offers.requestAccessTooltip","Запросить доступ к офферу"),children:t("offers.requestAccess","Запросить")}),r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsx(D,{variant:"ghost",size:"sm",children:r.jsx(Gx,{className:"h-4 w-4"})})}),r.jsxs(Es,{align:"end",children:[r.jsxs(Lt,{onClick:()=>n(`/affiliate/offers/${u.id}`),children:[r.jsx(Gt,{className:"h-4 w-4 mr-2"}),t("offers.details","Детали")]}),r.jsxs(Lt,{onClick:()=>n(`/affiliate/statistics?offer=${u.id}`),children:[r.jsx(yr,{className:"h-4 w-4 mr-2"}),t("offers.statistics","Статистика")]})]})]})]})})]},u.id)}).flat()})]})})})})]})}var K3e="Separator",t3="horizontal",G3e=["horizontal","vertical"],lK=v.forwardRef((e,t)=>{const{decorative:n,orientation:s=t3,...a}=e,i=Y3e(s)?s:t3,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return r.jsx(Xe.div,{"data-orientation":i,...o,...a,ref:t})});lK.displayName=K3e;function Y3e(e){return G3e.includes(e)}var oK=lK;const wn=v.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},a)=>r.jsx(oK,{ref:a,decorative:n,orientation:t,className:Ee("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));wn.displayName=oK.displayName;function X3e(e){return{gambling:{label:"Гемблинг",className:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},dating:{label:"Знакомства",className:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300"},finance:{label:"Финансы",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},crypto:{label:"Крипто",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"},nutra:{label:"Нутра",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},software:{label:"ПО",className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}}[e]||{label:e,className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}}const Z3e=({landingPages:e,offerId:t,onCopyUrl:n})=>{const[s,a]=v.useState({}),[i,l]=v.useState({}),[o,c]=v.useState(null),[d,u]=v.useState({}),h=async j=>{if(s[j.id])return s[j.id];if(i[j.id])return j.url;try{l(b=>({...b,[j.id]:!0}));const y=await $te({originalUrl:j.url,offerId:t});return a(b=>({...b,[j.id]:y})),y}catch{return j.url}finally{l(y=>({...y,[j.id]:!1}))}},f=async j=>{const y=await h(j),b=d[j.id];if(!b)return y;const p=new URL(y);return b.sub1&&p.searchParams.set("sub1",b.sub1),b.sub2&&p.searchParams.set("sub2",b.sub2),b.sub3&&p.searchParams.set("sub3",b.sub3),b.sub4&&p.searchParams.set("sub4",b.sub4),b.sub5&&p.searchParams.set("sub5",b.sub5),b.sub6&&p.searchParams.set("sub6",b.sub6),b.sub7&&p.searchParams.set("sub7",b.sub7),b.sub8&&p.searchParams.set("sub8",b.sub8),b.sub9&&p.searchParams.set("sub9",b.sub9),b.sub10&&p.searchParams.set("sub10",b.sub10),b.sub11&&p.searchParams.set("sub11",b.sub11),b.sub12&&p.searchParams.set("sub12",b.sub12),b.sub13&&p.searchParams.set("sub13",b.sub13),b.sub14&&p.searchParams.set("sub14",b.sub14),b.sub15&&p.searchParams.set("sub15",b.sub15),b.sub16&&p.searchParams.set("sub16",b.sub16),p.toString()},m=async j=>{const y=await f(j);n(y,"URL лендинга с параметрами")},g=async j=>{const y=await f(j);window.open(y,"_blank")},x=(j,y,b)=>{u(p=>({...p,[j]:{...p[j],[y]:b}}))},w=j=>{c(o===j?null:j)};return v.useEffect(()=>{e.forEach(j=>{h(j),d[j.id]||u(y=>({...y,[j.id]:{sub1:"",sub2:"",sub3:"",sub4:"",sub5:"",sub6:"",sub7:"",sub8:"",sub9:"",sub10:"",sub11:"",sub12:"",sub13:"",sub14:"",sub15:"",sub16:""}}))})},[e,t]),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(If,{className:"w-5 h-5"}),"Готовые трекинговые ссылки (",e.length,")"]}),r.jsx(Ze,{children:"Готовые ссылки с кастомными доменами и автоматическим tracking. Никаких настроек не требуется - просто копируйте и используйте."})]}),r.jsx(W,{children:r.jsx("div",{className:"space-y-3",children:e.map(j=>{var y,b,p,N;return r.jsxs("div",{className:"border rounded-lg",children:[r.jsx("div",{className:"p-3",children:r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[r.jsx("h4",{className:"font-medium",children:j.name}),j.isDefault&&r.jsx(ie,{variant:"default",className:"text-xs",children:"По умолчанию"}),r.jsx(ie,{variant:"outline",className:"text-xs",children:j.type}),r.jsx(ie,{variant:"secondary",className:"text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"✓ С трекингом"})]}),r.jsx("div",{className:"space-y-1",children:s[j.id]?r.jsx("code",{className:"text-sm text-green-600 dark:text-green-400 block font-medium break-all overflow-hidden",children:d[j.id]&&Object.values(d[j.id]).some(k=>k)?(()=>{const k=new URL(s[j.id]);return Object.entries(d[j.id]).forEach(([S,P])=>{P&&k.searchParams.set(S,P)}),k.toString()})():s[j.id]}):i[j.id]?r.jsx("span",{className:"text-xs text-muted-foreground",children:"⏳ Подготавливаем ссылку..."}):r.jsx("code",{className:"text-sm text-muted-foreground",children:"Ссылка будет готова через секунду..."})})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>m(j),title:"Копировать URL",disabled:i[j.id],className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50 dark:text-orange-400 dark:hover:text-orange-300 dark:hover:bg-orange-900/20",children:r.jsx(Yr,{className:"w-4 h-4"})}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>g(j),title:"Открыть в новой вкладке",disabled:i[j.id],className:"text-green-600 hover:text-green-700 hover:bg-green-50 dark:text-green-400 dark:hover:text-green-300 dark:hover:bg-green-900/20",children:r.jsx($f,{className:"w-4 h-4"})})]}),r.jsxs(D,{size:"sm",variant:"outline",onClick:()=>w(j.id),title:"Дополнительные параметры",className:"text-blue-600 border-blue-200 hover:bg-blue-50 dark:text-blue-400 dark:border-blue-700 dark:hover:bg-blue-900/20",children:[r.jsx(fr,{className:"w-4 h-4 mr-1"}),"Дополнительно"]})]})]})}),o===j.id&&r.jsxs("div",{className:"border-t bg-gray-50 dark:bg-gray-900/50 p-4",children:[r.jsx("h5",{className:"font-medium text-sm mb-3 text-gray-700 dark:text-gray-300",children:"Дополнительные параметры трекинга (sub1-sub16)"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h6",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wide",children:"Основные параметры"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"sub1 - источник"}),r.jsx(ne,{placeholder:"facebook, google...",value:((y=d[j.id])==null?void 0:y.sub1)||"",onChange:k=>x(j.id,"sub1",k.target.value),className:"text-sm h-8"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"sub2 - кампания"}),r.jsx(ne,{placeholder:"campaign_name...",value:((b=d[j.id])==null?void 0:b.sub2)||"",onChange:k=>x(j.id,"sub2",k.target.value),className:"text-sm h-8"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"sub3 - креатив"}),r.jsx(ne,{placeholder:"banner_1...",value:((p=d[j.id])==null?void 0:p.sub3)||"",onChange:k=>x(j.id,"sub3",k.target.value),className:"text-sm h-8"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"sub4 - аудитория"}),r.jsx(ne,{placeholder:"audience_18+",value:((N=d[j.id])==null?void 0:N.sub4)||"",onChange:k=>x(j.id,"sub4",k.target.value),className:"text-sm h-8"})]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h6",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wide",children:"Дополнительные параметры"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[5,6,7,8,9,10,11,12].map(k=>{var S;return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:["sub",k]}),r.jsx(ne,{placeholder:`параметр ${k}`,value:((S=d[j.id])==null?void 0:S[`sub${k}`])||"",onChange:P=>x(j.id,`sub${k}`,P.target.value),className:"text-sm h-8"})]},k)})})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase tracking-wide",children:"Расширенные параметры"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[13,14,15,16].map(k=>{var S;return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:["sub",k]}),r.jsx(ne,{placeholder:`параметр ${k}`,value:((S=d[j.id])==null?void 0:S[`sub${k}`])||"",onChange:P=>x(j.id,`sub${k}`,P.target.value),className:"text-sm h-8"})]},k)})})]}),r.jsxs("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[r.jsx("span",{children:"💡"}),r.jsx("span",{children:"Параметры автоматически добавляются в ссылку при заполнении. Поддерживается до 16 sub-параметров."})]})]})]},j.id)})})})]})};function Q3e(){var b,p,N,k,S,P,_,R,O,M,A;const e=Mv(),[,t]=Bn(),{toast:n}=at(),s=Et(),[a,i]=v.useState(!1),l=e.id,{data:o,isLoading:c,error:d}=Fe({queryKey:[`/api/partner/offers/${l}`],enabled:!!l,staleTime:1*60*1e3}),{data:u=[]}=Fe({queryKey:["/api/partner/access-requests"],staleTime:2*60*1e3}),h=u.find(T=>(T.offerId||T.offer_id)===l),f=(h==null?void 0:h.status)||"none",m=f==="approved";console.log("OfferDetails Debug:",{offerId:l,accessRequests:u.length,currentRequest:h,requestStatus:f,isApproved:m,offerIsApproved:o==null?void 0:o.isApproved,offerIsPrivate:o==null?void 0:o.isPrivate,offerCreatives:o==null?void 0:o.creatives,offerCreativesUrl:o==null?void 0:o.creativesUrl,hasCreatives:!!(o!=null&&o.creatives||o!=null&&o.creativesUrl),allMatchingRequests:u.filter(T=>(T.offerId||T.offer_id)===l).map(T=>({id:T.id,offerId:T.offerId||T.offer_id,status:T.status}))});const g=async()=>{if(l&&f==="none"&&!a){i(!0);try{if((await fetch("/api/partner/offer-access-request",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({offerId:l,message:"Запрос доступа к офферу"})})).ok)n({title:"Запрос отправлен",description:"Ваш запрос на доступ к офферу отправлен рекламодателю"}),await s.invalidateQueries({queryKey:["/api/partner/access-requests"]}),await s.invalidateQueries({queryKey:[`/api/partner/offers/${l}`]}),await s.invalidateQueries({queryKey:["/api/partner/offers"]});else throw new Error("Ошибка отправки запроса")}catch{n({title:"Ошибка",description:"Не удалось отправить запрос. Попробуйте еще раз.",variant:"destructive"})}finally{i(!1)}}};if(c)return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>t("/affiliate/offers"),className:"flex items-center gap-2",children:[r.jsx(vc,{className:"w-4 h-4"}),"Назад к офферам"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Загрузка..."})]}),r.jsx("div",{className:"text-center p-8",children:r.jsx("p",{children:"Загружаем данные оффера..."})})]});if(d||!o)return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>t("/affiliate/offers"),className:"flex items-center gap-2",children:[r.jsx(vc,{className:"w-4 h-4"}),"Назад к офферам"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Ошибка"})]}),r.jsx("div",{className:"text-center p-8",children:r.jsx("p",{children:"Оффер не найден или произошла ошибка при загрузке"})})]});const x=(T,B)=>{navigator.clipboard.writeText(T),n({title:"Скопировано",description:`${B} скопировано в буфер обмена`})},w=async T=>{try{const B=localStorage.getItem("auth_token");if(console.log("Download request - token available:",!!B),console.log("Making request to:",`/api/partner/offers/${l}/creatives/download`),!B){n({title:"Ошибка авторизации",description:"Токен не найден. Пожалуйста, войдите в систему заново",variant:"destructive"});return}const z=await fetch(`/api/partner/offers/${l}/creatives/download`,{method:"GET",headers:{Authorization:`Bearer ${B}`,"Content-Type":"application/json"}});if(!z.ok){if(z.status===403){n({title:"Доступ запрещен",description:"У вас нет доступа к креативам этого оффера",variant:"destructive"});return}throw new Error(`HTTP error! status: ${z.status}`)}const U=await z.blob(),E=window.URL.createObjectURL(U),$=document.createElement("a");$.href=E,$.download=`creatives-${l}.zip`,document.body.appendChild($),$.click(),document.body.removeChild($),window.URL.revokeObjectURL(E),n({title:"Архив скачан",description:"ZIP-архив с креативами готов к использованию"})}catch{n({title:"Ошибка скачивания",description:"Не удалось скачать креативы",variant:"destructive"})}},j=X3e((o==null?void 0:o.category)||"other"),y=T=>{switch(T){case"active":return r.jsx(ie,{variant:"outline",className:"text-green-600 border-green-600",children:"Активен"});case"paused":return r.jsx(ie,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Приостановлен"});case"archived":return r.jsx(ie,{variant:"outline",className:"text-gray-600 border-gray-600",children:"Архивирован"});default:return r.jsx(ie,{variant:"outline",className:"text-blue-600 border-blue-600",children:"Черновик"})}};return o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>t("/affiliate/offers"),className:"flex items-center gap-2",children:[r.jsx(vc,{className:"w-4 h-4"}),"Назад к офферам"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Детали оффера"})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(Gj,{name:(o==null?void 0:o.name)||"Оффер",logo:o==null?void 0:o.logo,size:"xl",showTooltip:!0}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(se,{className:"text-xl",children:(o==null?void 0:o.name)||"Загрузка..."}),r.jsx(ie,{className:j.className,children:j.label}),y((o==null?void 0:o.status)||"draft")]}),r.jsx("p",{className:"text-black dark:text-white",children:typeof(o==null?void 0:o.description)=="object"?((b=o.description)==null?void 0:b.ru)||((p=o.description)==null?void 0:p.en)||"Описание не указано":(o==null?void 0:o.description)||"Описание не указано"})]})]})}),r.jsx(W,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg dark:bg-green-900/20",children:[r.jsx(Xn,{className:"w-5 h-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-green-600",children:o!=null&&o.createdAt?new Date(o.createdAt).toLocaleDateString("ru-RU"):""}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Дата создания оффера"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg dark:bg-blue-900/20",children:[r.jsx(mr,{className:"w-5 h-5 text-blue-600"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-blue-600",children:[((N=o==null?void 0:o.countries)==null?void 0:N.length)||0," стран"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Доступные гео"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-50 rounded-lg dark:bg-purple-900/20",children:[r.jsx(Om,{className:"w-5 h-5 text-purple-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-purple-600",children:o!=null&&o.advertiserId?`ID ${o.advertiserId.substring(0,8)}...`:"Рекламодатель"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Рекламодатель"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-orange-50 rounded-lg dark:bg-orange-900/20",children:[r.jsx(es,{className:"w-5 h-5 text-orange-600"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-orange-600",children:"Креативы"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Архив с материалами"})]}),m&&r.jsx(D,{onClick:()=>w(o.creatives||o.creativesUrl),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",title:"Скачать креативы",children:r.jsx(br,{className:"w-4 h-4"})})]})]})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Ff,{className:"w-5 h-5"}),"Доступные страны"]})}),r.jsx(W,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:(o.countries||[]).map(T=>{var z,U;const B=((z=o.payoutByGeo)==null?void 0:z[T.toLowerCase()])||((U=o.payoutByGeo)==null?void 0:U[T.toUpperCase()])||parseFloat(o.payout);return r.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",title:Wc(T),children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsx("span",{className:"text-xl",children:Pl(T)}),r.jsx("span",{className:"font-medium text-sm",children:Wc(T)})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsxs(ie,{variant:"outline",className:"bg-blue-600 text-white border-blue-600 dark:bg-blue-500 dark:text-white dark:border-blue-500 font-bold text-sm px-2 py-1",children:[r.jsx(Rt,{className:"w-3 h-3 mr-1"}),B,o.currency]}),r.jsx(ie,{variant:"secondary",className:"text-xs",children:T.toUpperCase()})]})]},T)})})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Условия и требования"})}),r.jsxs(W,{className:"space-y-4",children:[(o==null?void 0:o.kpiConditions)&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-3",children:"KPI условия"}),r.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200 dark:bg-amber-900/20 dark:border-amber-800",children:r.jsx("div",{className:"text-sm whitespace-pre-wrap",children:typeof o.kpiConditions=="object"?o.kpiConditions.ru||o.kpiConditions.en||"KPI условия не указаны":o.kpiConditions||"KPI условия не указаны"})})]}),r.jsx(wn,{}),(((k=o==null?void 0:o.trafficSources)==null?void 0:k.length)>0||((P=(S=o==null?void 0:o.kpiConditions)==null?void 0:S.allowedTrafficTypes)==null?void 0:P.length)>0)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Разрешенные источники трафика"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:((o==null?void 0:o.trafficSources)||((_=o==null?void 0:o.kpiConditions)==null?void 0:_.allowedTrafficTypes)||[]).map(T=>r.jsx(ie,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:T},T))})]}),r.jsx(wn,{})]}),(((R=o==null?void 0:o.allowedApplications)==null?void 0:R.length)>0||((M=(O=o==null?void 0:o.restrictions)==null?void 0:O.allowed_sources)==null?void 0:M.length)>0)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Разрешенные площадки"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:((o==null?void 0:o.allowedApplications)||((A=o==null?void 0:o.restrictions)==null?void 0:A.allowed_sources)||[]).map(T=>r.jsx(ie,{variant:"outline",className:"border-green-600 text-green-600 dark:border-green-400 dark:text-green-400",children:T},T))})]}),r.jsx(wn,{})]})]})]}),m?r.jsx(Z3e,{landingPages:o.landingPages||[],offerId:o.id,onCopyUrl:x}):r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(VR,{className:"w-5 h-5"}),"Готовые трекинговые ссылки"]})}),r.jsxs(W,{className:"text-center space-y-4 py-12",children:[r.jsx(VR,{className:"h-16 w-16 text-muted-foreground mx-auto mb-6"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium mb-2",children:f==="pending"?"Запрос отправлен":"Требуется доступ"}),r.jsx("p",{className:"text-muted-foreground",children:f==="pending"?"Ваш запрос на доступ к готовым трекинговым ссылкам рассматривается рекламодателем":"Для получения готовых трекинговых ссылок с кастомными доменами необходимо запросить доступ у рекламодателя"})]}),f==="none"&&r.jsx(D,{onClick:g,disabled:a,className:"bg-blue-600 hover:bg-blue-700 text-white px-8",children:a?"Отправка запроса...":"Запросить доступ"}),f==="pending"&&r.jsx(D,{variant:"outline",className:"border-yellow-500 text-yellow-600 hover:bg-yellow-50 px-8",disabled:!0,children:"В ожидании одобрения"})]})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>t("/affiliate/offers"),className:"flex items-center gap-2",children:[r.jsx(vc,{className:"w-4 h-4"}),"Назад к офферам"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Загрузка..."})]}),r.jsx("div",{className:"flex items-center justify-center p-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Загружаем данные оффера..."})]})})]})}const J3e=Ke.object({subject:Ke.string().min(1,"Subject is required"),category:Ke.string().min(1,"Category is required"),priority:Ke.string().min(1,"Priority is required"),description:Ke.string().min(10,"Description must be at least 10 characters"),userId:Ke.string().optional()});function eFe(){tr(),Wt(),at(),Et();const[e,t]=v.useState("tickets"),[n,s]=v.useState(!1),[a,i]=v.useState("all"),[l,o]=v.useState("all"),[c,d]=v.useState(""),{data:u=[]}=Fe({queryKey:["/api/admin/support/tickets"],queryFn:async()=>{const b=await fetch("/api/admin/support/tickets",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!b.ok)throw new Error("Ошибка загрузки тикетов поддержки");return b.json()},refetchInterval:1e4}),h=Jm({resolver:tp(J3e),defaultValues:{subject:"",category:"general",priority:"medium",description:""}}),f=["general","account","finance","offers","technical","billing"],m=[{value:"low",label:"Low",color:"bg-green-100 text-green-800"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"High",color:"bg-red-100 text-red-800"}],g=[{value:"open",label:"Open",color:"bg-blue-100 text-blue-800"},{value:"in_progress",label:"In Progress",color:"bg-purple-100 text-purple-800"},{value:"resolved",label:"Resolved",color:"bg-green-100 text-green-800"},{value:"closed",label:"Closed",color:"bg-gray-100 text-gray-800"}],x=b=>{const p=g.find(N=>N.value===b);return p||g[0]},w=b=>{const p=m.find(N=>N.value===b);return p||m[1]},j=u.filter(b=>{const p=a==="all"||b.status===a,N=l==="all"||b.priority===l,k=b.subject.toLowerCase().includes(c.toLowerCase())||b.user.name.toLowerCase().includes(c.toLowerCase())||b.category.toLowerCase().includes(c.toLowerCase());return p&&N&&k}),y=[{title:"Knowledge Base",description:"Find answers to common questions",icon:r.jsx(MR,{className:"w-6 h-6"}),link:"#",articles:45},{title:"API Documentation",description:"Technical integration guides",icon:r.jsx(fr,{className:"w-6 h-6"}),link:"#",articles:12},{title:"Video Tutorials",description:"Step-by-step video guides",icon:r.jsx(tne,{className:"w-6 h-6"}),link:"#",articles:23},{title:"FAQ",description:"Frequently asked questions",icon:r.jsx(Lv,{className:"w-6 h-6"}),link:"#",articles:38}];return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 transition-all duration-300",children:[r.jsx(gn,{title:"Support Center"}),r.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 dark:bg-gray-900 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Support Center"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage support tickets and help resources"})]}),r.jsxs(_t,{open:n,onOpenChange:s,children:[r.jsx(Ja,{asChild:!0,children:r.jsxs(D,{"data-testid":"button-create-ticket",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Create Ticket"]})}),r.jsxs(kt,{className:"max-w-lg",children:[r.jsx(St,{children:r.jsx(Ct,{children:"Create Support Ticket"})}),r.jsx(ep,{...h,children:r.jsxs("form",{onSubmit:h.handleSubmit(b=>console.log(b)),className:"space-y-4",children:[r.jsx(dt,{control:h.control,name:"subject",render:({field:b})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Subject"}),r.jsx(ft,{children:r.jsx(ne,{...b,placeholder:"Brief description of the issue","data-testid":"input-subject"})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(dt,{control:h.control,name:"category",render:({field:b})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Category"}),r.jsxs(fe,{onValueChange:b.onChange,defaultValue:b.value,children:[r.jsx(ft,{children:r.jsx(ue,{"data-testid":"select-category",children:r.jsx(me,{})})}),r.jsx(he,{children:f.map(p=>r.jsx(C,{value:p,children:p.charAt(0).toUpperCase()+p.slice(1)},p))})]}),r.jsx(mt,{})]})}),r.jsx(dt,{control:h.control,name:"priority",render:({field:b})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Priority"}),r.jsxs(fe,{onValueChange:b.onChange,defaultValue:b.value,children:[r.jsx(ft,{children:r.jsx(ue,{"data-testid":"select-priority",children:r.jsx(me,{})})}),r.jsx(he,{children:m.map(p=>r.jsx(C,{value:p.value,children:p.label},p.value))})]}),r.jsx(mt,{})]})})]}),r.jsx(dt,{control:h.control,name:"description",render:({field:b})=>r.jsxs(ct,{children:[r.jsx(ut,{children:"Description"}),r.jsx(ft,{children:r.jsx(gt,{...b,placeholder:"Detailed description of the issue",rows:4,"data-testid":"textarea-description"})}),r.jsx(mt,{})]})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(D,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),r.jsx(D,{type:"submit","data-testid":"button-submit-ticket",children:"Create Ticket"})]})]})})]})]})]}),r.jsxs(rn,{value:e,onValueChange:t,className:"space-y-6",children:[r.jsxs(Zr,{children:[r.jsxs(We,{value:"tickets",className:"flex items-center gap-2",children:[r.jsx(Yx,{className:"w-4 h-4"}),"Support Tickets"]}),r.jsxs(We,{value:"resources",className:"flex items-center gap-2",children:[r.jsx(MR,{className:"w-4 h-4"}),"Resources"]})]}),r.jsxs(He,{value:"tickets",className:"space-y-6",children:[r.jsx(q,{children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Xr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{placeholder:"Поиск по тикетам, пользователям...",value:c,onChange:b=>d(b.target.value),className:"pl-10","data-testid":"input-search-tickets",title:"Поиск тикетов поддержки"})]}),r.jsxs(fe,{value:a,onValueChange:i,children:[r.jsx(ue,{className:"w-[140px]","data-testid":"select-filter-status",title:"Фильтр по статусу тикета",children:r.jsx(me,{placeholder:"All Status"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"All Status"}),g.map(b=>r.jsx(C,{value:b.value,children:b.label},b.value))]})]}),r.jsxs(fe,{value:l,onValueChange:o,children:[r.jsx(ue,{className:"w-[140px]","data-testid":"select-filter-priority",title:"Фильтр по приоритету",children:r.jsx(me,{placeholder:"All Priority"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"All Priority"}),m.map(b=>r.jsx(C,{value:b.value,children:b.label},b.value))]})]})]})})}),r.jsx("div",{className:"grid gap-4",children:j.map(b=>r.jsx(q,{"data-testid":`ticket-card-${b.id}`,children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:b.subject}),r.jsx(ie,{className:x(b.status).color,children:x(b.status).label}),r.jsx(ie,{className:w(b.priority).color,children:w(b.priority).label})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Oo,{className:"w-4 h-4"}),b.user.name," (",b.user.role,")"]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lr,{className:"w-4 h-4"}),new Date(b.createdAt).toLocaleDateString()]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Yx,{className:"w-4 h-4"}),b.responses," responses"]})]}),r.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:b.description})]}),r.jsxs(D,{variant:"outline",size:"sm","data-testid":`button-view-ticket-${b.id}`,children:["View",r.jsx(_re,{className:"w-4 h-4 ml-1"})]})]})})},b.id))})]}),r.jsx(He,{value:"resources",className:"space-y-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:y.map((b,p)=>r.jsx(q,{"data-testid":`resource-card-${p}`,children:r.jsxs(W,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"text-blue-600",children:b.icon}),r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:b.title})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:b.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs text-gray-500",children:[b.articles," articles"]}),r.jsx(D,{variant:"outline",size:"sm",children:r.jsx($f,{className:"w-4 h-4"})})]})]})},p))})})]})]})})]})]})}const r3=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function tFe(){const{t:e,i18n:t}=Wt();t.language;const{collapsed:n}=Qs(),[s,a]=v.useState("30d"),[i,l]=v.useState("all"),{data:o,isLoading:c}=Fe({queryKey:["/api/admin/analytics/users",s,i],queryFn:async()=>{const f=new URLSearchParams;s&&f.append("period",s),i!=="all"&&f.append("role",i);const m=await fetch(`/api/admin/analytics/users?${f.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!m.ok)throw new Error("Failed to fetch analytics");return m.json()}}),{data:d}=Fe({queryKey:["/api/admin/analytics/fraud",s],queryFn:async()=>{const f=await fetch(`/api/admin/analytics/fraud?period=${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(!f.ok)throw new Error("Failed to fetch fraud analytics");return f.json()}}),u=f=>{const m=document.createElement("a");m.href=`/api/admin/analytics/export?format=${f}&period=${s}&role=${i}`,m.download=`user_analytics_${s}.${f}`,m.click()},h=[{title:"Всего пользователей",value:(o==null?void 0:o.totalUsers)||0,change:(o==null?void 0:o.totalUsersChange)||"+0%",changeType:"increase",icon:or,color:"blue"},{title:"Активные за 24ч",value:(o==null?void 0:o.active24h)||0,change:(o==null?void 0:o.active24hChange)||"+0%",changeType:"increase",icon:Vr,color:"green"},{title:"Новые пользователи",value:(o==null?void 0:o.newUsers)||0,change:(o==null?void 0:o.newUsersChange)||"+0%",changeType:"increase",icon:mo,color:"purple"},{title:"Фрод-алерты",value:(d==null?void 0:d.totalAlerts)||0,change:(d==null?void 0:d.alertsChange)||"-0%",changeType:"decrease",icon:Dt,color:"red"}];return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(xn,{}),r.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-0 lg:ml-16":"ml-0 lg:ml-64"}`,children:[r.jsx(gn,{title:"Аналитика пользователей"}),r.jsx("main",{className:"flex-1 overflow-auto",children:r.jsxs("div",{className:"space-y-6 p-4 sm:p-6 max-w-full",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Аналитика пользователей"}),r.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Детальная аналитика пользователей, активности и безопасности"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(fe,{value:s,onValueChange:a,children:[r.jsx(ue,{className:"w-[150px]",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"24h",children:"24 часа"}),r.jsx(C,{value:"7d",children:"7 дней"}),r.jsx(C,{value:"30d",children:"30 дней"}),r.jsx(C,{value:"90d",children:"90 дней"})]})]}),r.jsxs(fe,{value:i,onValueChange:l,children:[r.jsx(ue,{className:"w-[150px]",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все роли"}),r.jsx(C,{value:"affiliate",children:"Партнеры"}),r.jsx(C,{value:"advertiser",children:"Рекламодатели"}),r.jsx(C,{value:"staff",children:"Сотрудники"})]})]}),r.jsxs(D,{variant:"outline",onClick:()=>u("excel"),children:[r.jsx(br,{className:"mr-2 h-4 w-4"}),"Экспорт"]})]})]}),r.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:h.map(f=>{const m=f.icon;return r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:f.title}),r.jsx(m,{className:`h-4 w-4 text-${f.color}-600`})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f.value}),r.jsxs("p",{className:`text-xs ${f.changeType==="increase"?"text-green-600":"text-red-600"}`,children:[f.change," за период"]})]})]},f.title)})}),r.jsxs("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-2",children:[r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Распределение по ролям"})}),r.jsx(W,{children:r.jsx(xa,{width:"100%",height:300,children:r.jsxs(D4,{children:[r.jsx(Ki,{data:(o==null?void 0:o.roleDistribution)||[],cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"count",label:({name:f,percent:m})=>`${f} ${(m*100).toFixed(0)}%`,children:((o==null?void 0:o.roleDistribution)||[]).map((f,m)=>r.jsx(Gm,{fill:r3[m%r3.length]},`cell-${m}`))}),r.jsx(tn,{})]})})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Активность пользователей"})}),r.jsx(W,{children:r.jsx(xa,{width:"100%",height:300,children:r.jsxs(ny,{data:(o==null?void 0:o.activityTrend)||[],children:[r.jsx(Ti,{strokeDasharray:"3 3"}),r.jsx(Ps,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(us,{type:"monotone",dataKey:"active24h",stroke:"#8884d8",strokeWidth:2,name:"Активные за 24ч"}),r.jsx(us,{type:"monotone",dataKey:"active7d",stroke:"#82ca9d",strokeWidth:2,name:"Активные за 7д"})]})})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Новые регистрации"})}),r.jsx(W,{children:r.jsx(xa,{width:"100%",height:300,children:r.jsxs(DP,{data:(o==null?void 0:o.registrationTrend)||[],children:[r.jsx(Ti,{strokeDasharray:"3 3"}),r.jsx(Ps,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(Ao,{dataKey:"registrations",fill:"#8884d8"})]})})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Показатели безопасности"})}),r.jsx(W,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Фрод-алерты"}),r.jsx("span",{className:"text-lg font-bold text-red-600",children:(d==null?void 0:d.totalAlerts)||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Заблокированные пользователи"}),r.jsx("span",{className:"text-lg font-bold text-orange-600",children:(d==null?void 0:d.blockedUsers)||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Подозрительные IP"}),r.jsx("span",{className:"text-lg font-bold text-yellow-600",children:(d==null?void 0:d.suspiciousIPs)||0})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Процент фрода"}),r.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[(d==null?void 0:d.fraudRate)||0,"%"]})]})]})})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"География пользователей"})}),r.jsx(W,{children:r.jsx(xa,{width:"100%",height:400,children:r.jsxs(DP,{data:(o==null?void 0:o.geoDistribution)||[],layout:"horizontal",children:[r.jsx(Ti,{strokeDasharray:"3 3"}),r.jsx(Ps,{type:"number"}),r.jsx(_s,{dataKey:"country",type:"category",width:100}),r.jsx(tn,{}),r.jsx(Ao,{dataKey:"users",fill:"#8884d8"})]})})})]}),r.jsxs("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-2",children:[r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Последняя активность"})}),r.jsx(W,{children:r.jsx("div",{className:"space-y-3",children:((o==null?void 0:o.recentActivity)||[]).map((f,m)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Vr,{className:"h-4 w-4 text-blue-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:f.user}),r.jsx("div",{className:"text-sm text-muted-foreground",children:f.action})]})]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(f.timestamp).toLocaleString()})]},m))})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"События безопасности"})}),r.jsx(W,{children:r.jsx("div",{className:"space-y-3",children:((d==null?void 0:d.securityEvents)||[]).map((f,m)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ka,{className:"h-4 w-4 text-red-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:f.type}),r.jsx("div",{className:"text-sm text-muted-foreground",children:f.description})]})]}),r.jsx("div",{className:"text-sm text-red-600 font-medium",children:f.severity})]},m))})})]})]})]})})]})]})}function rFe(){const{toast:e}=at(),[t,n]=v.useState(""),[s,a]=v.useState(""),[i,l]=v.useState(""),[o,c]=v.useState(""),[d,u]=v.useState(""),[h,f]=v.useState(""),[m,g]=v.useState(""),[x,w]=v.useState(""),[j,y]=v.useState(""),{data:b=[]}=Fe({queryKey:["/api/admin/offers"]}),{data:p=[]}=Fe({queryKey:["/api/admin/users"]}),N=p.filter(P=>P.role==="affiliate"),k=async()=>{if(!t||!s){e({title:"Ошибка",description:"Выберите партнёра и оффер",variant:"destructive"});return}try{const P=new URLSearchParams;i&&P.append("sub1",i),o&&P.append("sub2",o),d&&P.append("sub3",d),h&&P.append("sub4",h),m&&P.append("sub5",m),x&&P.append("landing_url",x);const _=await fetch(`/api/tracking-url/${t}/${s}?${P}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!_.ok)throw new Error("Ошибка генерации URL");const R=await _.json();y(R.trackingUrl),e({title:"URL сгенерирован",description:R.instructions})}catch{e({title:"Ошибка",description:"Не удалось сгенерировать URL",variant:"destructive"})}},S=()=>{navigator.clipboard.writeText(j),e({title:"Скопировано",description:"URL скопирован в буфер обмена"})};return r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Генератор tracking URL"}),r.jsx(Ze,{children:"Создайте универсальную ссылку для партнёра с поддержкой макросов трекера"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"partner",children:"Партнёр"}),r.jsxs(fe,{value:t,onValueChange:n,children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите партнёра"})}),r.jsx(he,{children:N.map(P=>r.jsxs(C,{value:P.id,children:[P.email," (",P.username,")"]},P.id))})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"offer",children:"Оффер"}),r.jsxs(fe,{value:s,onValueChange:a,children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите оффер"})}),r.jsx(he,{children:b.map(P=>r.jsx(C,{value:P.id,children:P.name},P.id))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"sub1",children:"Sub ID 1"}),r.jsx(ne,{id:"sub1",value:i,onChange:P=>l(P.target.value),placeholder:"Например: facebook"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"sub2",children:"Sub ID 2"}),r.jsx(ne,{id:"sub2",value:o,onChange:P=>c(P.target.value),placeholder:"Например: campaign1"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"sub3",children:"Sub ID 3"}),r.jsx(ne,{id:"sub3",value:d,onChange:P=>u(P.target.value),placeholder:"Например: creative_a"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"sub4",children:"Sub ID 4"}),r.jsx(ne,{id:"sub4",value:h,onChange:P=>f(P.target.value),placeholder:"Дополнительный sub"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"sub5",children:"Sub ID 5"}),r.jsx(ne,{id:"sub5",value:m,onChange:P=>g(P.target.value),placeholder:"Дополнительный sub"})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"landingUrl",children:"Landing URL (опционально)"}),r.jsx(ne,{id:"landingUrl",value:x,onChange:P=>w(P.target.value),placeholder:"https://example.com/landing"})]}),r.jsx(D,{onClick:k,className:"w-full",children:"Сгенерировать URL"}),j&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Сгенерированный URL:"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ne,{value:j,readOnly:!0,className:"font-mono text-sm"}),r.jsx(D,{size:"icon",variant:"outline",onClick:S,title:"Копировать URL",children:r.jsx(Yr,{className:"h-4 w-4"})}),r.jsx(D,{size:"icon",variant:"outline",onClick:()=>window.open(j,"_blank"),title:"Открыть URL",children:r.jsx($f,{className:"h-4 w-4"})})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["💡 Замените ",r.jsx("code",{children:"{clickid}"})," на макрос вашего трекера для передачи уникального ID клика"]})]})]})]})}const n3=(e,t="Дата неизвестна")=>{try{if(!e||e==="null"||e==="undefined")return t;const n=new Date(e);return isNaN(n.getTime())?(console.warn("Invalid date for formatting:",e),t):n.toLocaleString("ru-RU")}catch(n){return console.error("Error formatting date:",n,e),t}},Jk=[{value:"click",label:"Клик"},{value:"lead",label:"Лид (Регистрация)"},{value:"ftd",label:"FTD (Первый депозит)"},{value:"deposit",label:"Депозит"},{value:"approve",label:"Апрув"},{value:"reject",label:"Отклонение"},{value:"hold",label:"Холд"},{value:"conversion",label:"Конверсия"}],nFe=`
Доступные макросы:
{clickid} - Уникальный ID клика
{status} - Статус события (lead, ftd, approve, etc.)
{offer_id} - ID оффера
{partner_id} - ID партнёра
{payout} - Выплата партнёру
{revenue} - Доход рекламодателя
{currency} - Валюта
{sub1}-{sub5} - Подпараметры
{country} - Страна
{device} - Устройство
{ip} - IP адрес
{txid} - ID транзакции
{amount} - Сумма
{timestamp} - Временная метка

Пример URL:
https://tracker.com/postback?cid={clickid}&status={status}&sum={payout}&offer={offer_id}
`;function sFe(){Wt();const{toast:e}=at(),t=Et(),[n,s]=v.useState(!1),[a,i]=v.useState(null),[l,o]=v.useState("postbacks"),[c,d]=v.useState({name:"",url:"",method:"GET",events:[],offerId:"",signatureKey:"",ipWhitelist:"",retryEnabled:!0,maxRetries:3,retryDelay:60,timeout:30,isActive:!0}),{data:u=[],isLoading:h}=Fe({queryKey:["/api/postbacks"]}),{data:f=[],isLoading:m}=Fe({queryKey:["/api/postback-logs"]}),{data:g=[]}=Fe({queryKey:["/api/admin/offers"]}),x=Oe({mutationFn:async S=>{const P=a?`/api/postbacks/${a.id}`:"/api/postbacks";return Re(P,a?"PUT":"POST",S)},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/postbacks"]}),s(!1),y(),e({title:a?"Постбек обновлён":"Постбек создан",description:"Изменения сохранены успешно"})},onError:S=>{e({title:"Ошибка",description:S.message||"Не удалось сохранить постбек",variant:"destructive"})}}),w=Oe({mutationFn:S=>Re(`/api/postbacks/${S}`,"DELETE"),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/postbacks"]}),e({title:"Постбек удалён",description:"Постбек успешно удалён"})},onError:S=>{e({title:"Ошибка",description:S.message||"Не удалось удалить постбек",variant:"destructive"})}}),j=Oe({mutationFn:S=>Re(`/api/postbacks/${S}/test`,"POST"),onSuccess:()=>{e({title:"Тест отправлен",description:"Тестовый постбек отправлен успешно"})},onError:S=>{e({title:"Ошибка теста",description:S.message||"Не удалось отправить тестовый постбек",variant:"destructive"})}}),y=()=>{d({name:"",url:"",method:"GET",events:[],offerId:"",signatureKey:"",ipWhitelist:"",retryEnabled:!0,maxRetries:3,retryDelay:60,timeout:30,isActive:!0}),i(null)},b=S=>{var P;i(S),d({name:S.name,url:S.url,method:S.method,events:S.events,offerId:S.offerId||"",signatureKey:S.signatureKey||"",ipWhitelist:((P=S.ipWhitelist)==null?void 0:P.join(`
`))||"",retryEnabled:S.retryEnabled,maxRetries:S.maxRetries,retryDelay:S.retryDelay,timeout:S.timeout,isActive:S.isActive}),s(!0)},p=S=>{S.preventDefault();const P={...c,events:c.events,ipWhitelist:c.ipWhitelist?c.ipWhitelist.split(`
`).filter(_=>_.trim()):[],offerId:c.offerId||null};x.mutate(P)},N=S=>{navigator.clipboard.writeText(S),e({title:"Скопировано",description:"URL скопирован в буфер обмена"})},k=S=>{const P={sent:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"},_={sent:"Отправлен",failed:"Ошибка",pending:"В ожидании"};return r.jsx(ie,{className:P[S],children:_[S]||S})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Управление Постбеками"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Настройка уведомлений о событиях для партнёров и рекламодателей"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(D,{variant:l==="postbacks"?"default":"outline",onClick:()=>o("postbacks"),"data-testid":"tab-postbacks",children:"Постбеки"}),r.jsx(D,{variant:l==="logs"?"default":"outline",onClick:()=>o("logs"),"data-testid":"tab-logs",children:"Логи"}),r.jsx(D,{variant:l==="tracking"?"default":"outline",onClick:()=>o("tracking"),"data-testid":"tab-tracking",children:"Tracking URL"})]})]}),l==="postbacks"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs(_t,{open:n,onOpenChange:s,children:[r.jsx(Ja,{asChild:!0,children:r.jsxs(D,{onClick:y,"data-testid":"button-add-postback",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Добавить Постбек"]})}),r.jsxs(kt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(St,{children:[r.jsx(Ct,{children:a?"Редактировать Постбек":"Создать Постбек"}),r.jsx(Br,{children:"Настройте URL для получения уведомлений о событиях"})]}),r.jsxs("form",{onSubmit:p,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"name",children:"Название"}),r.jsx(ne,{id:"name",value:c.name,onChange:S=>d(P=>({...P,name:S.target.value})),required:!0,"data-testid":"input-name"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"method",children:"Метод"}),r.jsxs(fe,{value:c.method,onValueChange:S=>d(P=>({...P,method:S})),children:[r.jsx(ue,{"data-testid":"select-method",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"GET",children:"GET"}),r.jsx(C,{value:"POST",children:"POST"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"url",children:"Postback URL"}),r.jsx(gt,{id:"url",value:c.url,onChange:S=>d(P=>({...P,url:S.target.value})),placeholder:"https://tracker.com/postback?cid={clickid}&status={status}&sum={payout}",required:!0,"data-testid":"input-url"}),r.jsx("div",{className:"mt-2 text-xs text-gray-500",children:r.jsxs("details",{children:[r.jsx("summary",{className:"cursor-pointer",children:"Показать доступные макросы"}),r.jsx("pre",{className:"mt-2 whitespace-pre-wrap text-xs",children:nFe})]})})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"offer",children:"Оффер (оставьте пустым для глобального)"}),r.jsxs(fe,{value:c.offerId,onValueChange:S=>d(P=>({...P,offerId:S})),children:[r.jsx(ue,{"data-testid":"select-offer",children:r.jsx(me,{placeholder:"Выберите оффер или оставьте пустым"})}),r.jsxs(he,{children:[r.jsx(C,{value:"",children:"Все офферы (глобальный)"}),g.map(S=>r.jsx(C,{value:S.id,children:S.name},S.id))]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"События для отправки"}),r.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:Jk.map(S=>r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:c.events.includes(S.value),onChange:P=>{P.target.checked?d(_=>({..._,events:[..._.events,S.value]})):d(_=>({..._,events:_.events.filter(R=>R!==S.value)}))},"data-testid":`checkbox-event-${S.value}`}),r.jsx("span",{className:"text-sm",children:S.label})]},S.value))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"signatureKey",children:"Ключ подписи (опционально)"}),r.jsx(ne,{id:"signatureKey",type:"password",value:c.signatureKey,onChange:S=>d(P=>({...P,signatureKey:S.target.value})),placeholder:"Для HMAC подписи","data-testid":"input-signature-key"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"timeout",children:"Таймаут (сек)"}),r.jsx(ne,{id:"timeout",type:"number",value:c.timeout,onChange:S=>d(P=>({...P,timeout:parseInt(S.target.value)})),min:"1",max:"120","data-testid":"input-timeout"})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"ipWhitelist",children:"Белый список IP (по одному на строку)"}),r.jsx(gt,{id:"ipWhitelist",value:c.ipWhitelist,onChange:S=>d(P=>({...P,ipWhitelist:S.target.value})),placeholder:`192.168.1.1
10.0.0.1`,"data-testid":"input-ip-whitelist"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{checked:c.retryEnabled,onCheckedChange:S=>d(P=>({...P,retryEnabled:S})),"data-testid":"switch-retry-enabled"}),r.jsx(F,{children:"Повторы при ошибках"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"maxRetries",children:"Макс. повторов"}),r.jsx(ne,{id:"maxRetries",type:"number",value:c.maxRetries,onChange:S=>d(P=>({...P,maxRetries:parseInt(S.target.value)})),min:"0",max:"10",disabled:!c.retryEnabled,"data-testid":"input-max-retries"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"retryDelay",children:"Задержка (сек)"}),r.jsx(ne,{id:"retryDelay",type:"number",value:c.retryDelay,onChange:S=>d(P=>({...P,retryDelay:parseInt(S.target.value)})),min:"1",disabled:!c.retryEnabled,"data-testid":"input-retry-delay"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{checked:c.isActive,onCheckedChange:S=>d(P=>({...P,isActive:S})),"data-testid":"switch-is-active"}),r.jsx(F,{children:"Активен"})]}),r.jsxs(go,{children:[r.jsx(D,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Отмена"}),r.jsx(D,{type:"submit",disabled:x.isPending,children:x.isPending?"Сохранение...":"Сохранить"})]})]})]})]})}),r.jsx("div",{className:"grid gap-4",children:h?r.jsx("div",{className:"text-center py-8",children:"Загрузка постбеков..."}):u.length===0?r.jsx(q,{children:r.jsxs(W,{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-500",children:"Постбеки не настроены"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Добавьте первый постбек для получения уведомлений о событиях"})]})}):u.map(S=>r.jsxs(q,{children:[r.jsx(re,{className:"pb-3",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[S.name,S.isActive?r.jsx(ie,{className:"bg-green-100 text-green-800",children:"Активен"}):r.jsx(ie,{variant:"secondary",children:"Неактивен"})]}),r.jsx(Ze,{children:S.offerName?`Оффер: ${S.offerName}`:"Глобальный постбек"})]}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>N(S.url),title:"Копировать URL","data-testid":`button-copy-${S.id}`,children:r.jsx(Yr,{className:"w-4 h-4"})}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>j.mutate(S.id),title:"Тестовый запрос","data-testid":`button-test-${S.id}`,children:r.jsx($f,{className:"w-4 h-4"})}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>b(S),title:"Редактировать","data-testid":`button-edit-${S.id}`,children:r.jsx(Ts,{className:"w-4 h-4"})}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>w.mutate(S.id),title:"Удалить","data-testid":`button-delete-${S.id}`,children:r.jsx(wr,{className:"w-4 h-4 text-red-500"})})]})]})}),r.jsxs(W,{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"URL:"}),r.jsx("div",{className:"text-xs bg-gray-100 dark:bg-gray-800 p-2 rounded font-mono break-all",children:S.url})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(ie,{variant:"outline",children:S.method}),S.events.map(P=>{var _;return r.jsx(ie,{variant:"secondary",children:((_=Jk.find(R=>R.value===P))==null?void 0:_.label)||P},P)})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-gray-500",children:[r.jsxs("div",{children:["Таймаут: ",S.timeout,"с"]}),r.jsxs("div",{children:["Повторы: ",S.retryEnabled?`${S.maxRetries} раз`:"Отключены"]})]})]})]},S.id))})]}),l==="logs"&&r.jsx("div",{className:"space-y-6",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Журнал Постбеков"}),r.jsx(Ze,{children:"История отправки постбеков и их статусы"})]}),r.jsx(W,{children:m?r.jsx("div",{className:"text-center py-8",children:"Загрузка журнала..."}):f.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Журнал постбеков пуст"}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Постбек"}),r.jsx("th",{className:"text-left p-2",children:"Событие"}),r.jsx("th",{className:"text-left p-2",children:"URL"}),r.jsx("th",{className:"text-left p-2",children:"Статус"}),r.jsx("th",{className:"text-left p-2",children:"Ответ"}),r.jsx("th",{className:"text-left p-2",children:"Время"}),r.jsx("th",{className:"text-left p-2",children:"Дата"})]})}),r.jsx("tbody",{children:f.map(S=>{var P;return r.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-800",children:[r.jsxs("td",{className:"p-2",children:[r.jsx("div",{className:"font-medium",children:S.postbackName}),S.retryCount>0&&r.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[r.jsx(mu,{className:"w-3 h-3"}),"Попытка ",S.retryCount+1]})]}),r.jsx("td",{className:"p-2",children:r.jsx(ie,{variant:"outline",children:((P=Jk.find(_=>_.value===S.eventType))==null?void 0:P.label)||S.eventType})}),r.jsx("td",{className:"p-2",children:r.jsx("div",{className:"max-w-xs truncate text-xs font-mono",children:S.url})}),r.jsx("td",{className:"p-2",children:k(S.status)}),r.jsxs("td",{className:"p-2",children:[S.responseStatus&&r.jsxs("div",{className:"text-xs",children:[r.jsxs("div",{children:["HTTP ",S.responseStatus]}),S.responseTime&&r.jsxs("div",{className:"text-gray-500",children:[S.responseTime,"ms"]})]}),S.errorMessage&&r.jsx("div",{className:"text-xs text-red-600 max-w-xs truncate",children:S.errorMessage})]}),r.jsx("td",{className:"p-2 text-xs",children:S.sentAt?n3(S.sentAt):""}),r.jsx("td",{className:"p-2 text-xs",children:n3(S.createdAt)})]},S.id)})})]})})})]})}),l==="tracking"&&r.jsx(rFe,{})]})}function aFe(){return r.jsx(sFe,{})}const iFe=Fv("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),UP=v.forwardRef(({className:e,variant:t,...n},s)=>r.jsx("div",{ref:s,role:"alert",className:Ee(iFe({variant:t}),e),...n}));UP.displayName="Alert";const lFe=v.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:Ee("mb-1 font-medium leading-none tracking-tight",e),...t}));lFe.displayName="AlertTitle";const BP=v.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ee("text-sm [&_p]:leading-relaxed",e),...t}));BP.displayName="AlertDescription";function oFe(){const[e,t]=v.useState(""),[n,s]=v.useState("cname"),[a,i]=v.useState(null);v.useState(!1);const{toast:l}=at(),o=Et(),{data:c=[],isLoading:d}=Fe({queryKey:["/api/advertiser/profile/domains"],staleTime:3e4}),u=Oe({mutationFn:async y=>Re("/api/advertiser/profile/domains","POST",y),onSuccess:y=>{l({title:"✅ Домен успешно добавлен",description:`Домен ${y.domain} добавлен и ожидает верификации. Перейдите к инструкциям DNS для настройки.`}),t(""),o.invalidateQueries({queryKey:["/api/advertiser/profile/domains"]})},onError:y=>{l({title:"❌ Ошибка добавления домена",description:(y==null?void 0:y.message)||"Не удалось добавить домен. Проверьте правильность ввода и попробуйте снова.",variant:"destructive"})}}),h=Oe({mutationFn:async y=>Re(`/api/advertiser/profile/domains/${y}/verify`,"POST"),onSuccess:(y,b)=>{y.success?l({title:"Домен верифицирован",description:"Ваш кастомный домен успешно верифицирован и активирован!"}):l({title:"Верификация не пройдена",description:y.error||"Проверьте DNS настройки и повторите попытку",variant:"destructive"}),o.invalidateQueries({queryKey:["/api/advertiser/profile/domains"]})},onError:()=>{l({title:"Ошибка верификации",description:"Произошла ошибка при проверке домена",variant:"destructive"})}}),f=Oe({mutationFn:async y=>Re(`/api/advertiser/profile/domains/${y}/ssl`,"POST"),onSuccess:y=>{l({title:"SSL сертификат выдается",description:y.message||"SSL сертификат выдается. Проверьте статус через несколько минут."}),o.invalidateQueries({queryKey:["/api/advertiser/profile/domains"]})},onError:y=>{l({title:"Ошибка выдачи SSL",description:(y==null?void 0:y.error)||"Не удалось запустить выдачу SSL сертификата",variant:"destructive"})}}),m=Oe({mutationFn:async y=>Re(`/api/advertiser/profile/domains/${y}`,"DELETE"),onSuccess:()=>{l({title:"Домен удален",description:"Кастомный домен успешно удален"}),o.invalidateQueries({queryKey:["/api/advertiser/profile/domains"]})}}),g=()=>{if(!e.trim()){l({title:"Ошибка",description:"Введите доменное имя",variant:"destructive"});return}if(!/^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?)*$/.test(e.trim())){l({title:"Ошибка",description:"Введите корректное доменное имя",variant:"destructive"});return}u.mutate({domain:e.trim(),type:n})},x=y=>{navigator.clipboard.writeText(y),l({title:"Скопировано",description:"Значение скопировано в буфер обмена"})},w=y=>{switch(y){case"verified":return r.jsx(ao,{className:"h-4 w-4 text-green-600"});case"pending":return r.jsx(lr,{className:"h-4 w-4 text-yellow-600"});case"verifying":return r.jsx(Vt,{className:"h-4 w-4 text-blue-600 animate-spin"});case"failed":case"error":return r.jsx(Ua,{className:"h-4 w-4 text-red-600"});case"expired":return r.jsx(Ua,{className:"h-4 w-4 text-gray-600"})}},j=y=>{const b={verified:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",text:"Активен"},pending:{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",text:"Ожидание"},verifying:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",text:"Проверяется"},failed:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",text:"Ошибка"},error:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",text:"Ошибка"},expired:{color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",text:"Истек"}},p=b[y]||b.error;return r.jsx(ie,{className:p.color,children:p.text})};return d?r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(mr,{className:"h-5 w-5"}),"Кастомные домены"]})}),r.jsx(W,{children:r.jsx("div",{className:"flex items-center justify-center h-32",children:r.jsx(Vt,{className:"h-6 w-6 animate-spin"})})})]}):r.jsx("div",{className:"space-y-6",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(mr,{className:"h-5 w-5"}),"Кастомные домены"]}),r.jsx(Ze,{children:"Используйте свои домены для трекинговых ссылок. Это повышает доверие пользователей и обеспечивает белый лейбл."})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(F,{htmlFor:"domain",children:"Доменное имя"}),r.jsx(ne,{id:"domain",placeholder:"track.example.com",value:e,onChange:y=>t(y.target.value),"data-testid":"input-new-domain"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"domain-type",children:"Тип записи"}),r.jsxs(fe,{value:n,onValueChange:y=>s(y),children:[r.jsx(ue,{"data-testid":"select-domain-type",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"cname",children:"CNAME (рекомендуется)"}),r.jsx(C,{value:"a_record",children:"A запись"}),r.jsx(C,{value:"txt_record",children:"TXT запись"})]})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx(D,{onClick:g,disabled:u.isPending,"data-testid":"button-add-domain",className:"w-full",children:u.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Добавляем..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить"]})})})]}),r.jsx(wn,{}),r.jsx("div",{className:"space-y-4",children:!Array.isArray(c)||c.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[r.jsx(mr,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),r.jsx("p",{children:"У вас пока нет кастомных доменов"}),r.jsx("p",{className:"text-sm",children:"Добавьте домен выше, чтобы начать использовать белый лейбл"})]}):c.map(y=>r.jsx(q,{className:"border-l-4 border-l-blue-500",children:r.jsxs(W,{className:"pt-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[w(y.status),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:y.domain}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Добавлен ",new Date(y.createdAt).toLocaleDateString("ru-RU")]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[j(y.status),y.sslStatus==="issued"&&r.jsxs(ie,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:[r.jsx(Dt,{className:"h-3 w-3 mr-1"}),"SSL активен"]}),y.sslStatus==="pending"&&r.jsxs(ie,{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:[r.jsx(lr,{className:"h-3 w-3 mr-1"}),"SSL выдается"]}),y.sslStatus==="failed"&&r.jsxs(ie,{className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",children:[r.jsx(Ua,{className:"h-3 w-3 mr-1"}),"SSL ошибка"]}),y.status==="verified"&&(!y.sslStatus||y.sslStatus==="none")&&r.jsxs(ie,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:[r.jsx(kb,{className:"h-3 w-3 mr-1"}),"Готов к SSL"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.status!=="verified"&&r.jsx(D,{size:"sm",onClick:()=>h.mutate(y.id),disabled:h.isPending,"data-testid":`button-verify-${y.id}`,children:h.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Vt,{className:"h-3 w-3 mr-1 animate-spin"}),"Проверяем..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ao,{className:"h-3 w-3 mr-1"}),"Проверить домен"]})}),y.status==="verified"&&(!y.sslStatus||y.sslStatus==="none"||y.sslStatus==="failed")&&r.jsx(D,{size:"sm",onClick:()=>f.mutate(y.id),disabled:f.isPending,"data-testid":`button-ssl-${y.id}`,className:"bg-green-600 hover:bg-green-700 text-white",children:f.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Vt,{className:"h-3 w-3 mr-1 animate-spin"}),"Выдаем SSL..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Dt,{className:"h-3 w-3 mr-1"}),"Выдать SSL"]})}),r.jsxs(_t,{children:[r.jsx(Ja,{asChild:!0,children:r.jsxs(D,{size:"sm",variant:"outline",onClick:()=>i(y),children:[r.jsx(zR,{className:"h-3 w-3 mr-1"}),"Инструкции DNS"]})}),r.jsxs(kt,{className:"max-w-2xl",children:[r.jsxs(St,{children:[r.jsxs(Ct,{children:["DNS инструкции для ",y.domain]}),r.jsx(Br,{children:"Следуйте инструкциям ниже для настройки DNS записей"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-semibold",children:"Тип записи"}),r.jsx("div",{className:"flex items-center gap-2 mt-1",children:r.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm",children:y.type==="cname"?"CNAME":"TXT"})})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-semibold",children:"Имя/Host"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm break-all",children:y.type==="cname"?y.domain.split(".")[0]:y.domain.includes(".")?y.domain:"@"}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>x(y.type==="cname"?y.domain.split(".")[0]:y.domain.includes(".")?y.domain:"@"),title:"Скопировать хост",children:r.jsx(Yr,{className:"h-3 w-3"})})]})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-sm font-semibold",children:"Значение"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm break-all",children:y.type==="cname"?y.targetValue||"affiliate-tracker.replit.app":y.verificationValue}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>x(y.type==="cname"?y.targetValue||"affiliate-tracker.replit.app":y.verificationValue),title:"Скопировать значение",children:r.jsx(Yr,{className:"h-3 w-3"})})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(UP,{children:[r.jsx(zR,{className:"h-4 w-4"}),r.jsx(BP,{children:y.type==="cname"?"Добавьте CNAME запись в DNS настройках вашего домена. Это позволит использовать ваш собственный домен для трекинговых ссылок с белым лейблом.":'Добавьте TXT запись в DNS настройках вашего домена для верификации. После добавления записи нажмите "Проверить домен".'})]}),r.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-950 rounded-lg",children:[r.jsx("h5",{className:"font-medium mb-2 text-green-800 dark:text-green-200",children:"После настройки ваши трекинговые ссылки будут выглядеть так:"}),r.jsxs("code",{className:"text-sm bg-white dark:bg-gray-800 px-3 py-2 rounded border block",children:["https://",y.domain,"/click?offer=123&clickid=partner_abc123"]}),r.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2",children:"Белый лейбл повышает доверие пользователей и улучшает конверсию!"})]}),r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsx("h5",{className:"font-medium mb-2",children:"Пошаговая инструкция:"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("li",{children:"Войдите в панель управления DNS вашего провайдера домена (GoDaddy, Namecheap, Cloudflare и т.д.)"}),r.jsx("li",{children:'Найдите раздел "DNS Records", "DNS управление" или "Zone File"'}),r.jsxs("li",{children:["Добавьте новую ",y.type==="cname"?"CNAME":"TXT"," запись:"]}),r.jsxs("li",{className:"ml-4",children:["• Тип: ",r.jsx("strong",{children:y.type==="cname"?"CNAME":"TXT"}),r.jsx("br",{}),"• Имя/Host: ",r.jsx("strong",{children:y.type==="cname"?y.domain.split(".")[0]:y.domain.includes(".")?y.domain:"@"}),r.jsx("br",{}),"• Значение: ",r.jsx("strong",{children:y.type==="cname"?y.targetValue||"affiliate-tracker.replit.app":y.verificationValue})]}),r.jsx("li",{children:"Сохраните изменения (распространение DNS может занять 5-30 минут)"}),r.jsx("li",{children:'Вернитесь сюда и нажмите "Проверить домен" для верификации'})]})]}),y.type==="cname"&&r.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-950 rounded-lg",children:r.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[r.jsx("strong",{children:"Важно:"})," CNAME запись должна указывать на ",y.targetValue||"affiliate-tracker.replit.app",", а имя записи должно быть ",y.domain.split(".")[0]," (первая часть вашего домена)"]})}),y.type==="a_record"&&r.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-950 rounded-lg",children:r.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[r.jsx("strong",{children:"Важно для корневого домена:"})," Добавьте TXT запись для верификации. Имя записи должно быть точно ",y.domain," (или @ для корневого домена), значение: ",y.verificationValue]})})]})]}),y.status==="verified"&&r.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[r.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[r.jsx(kb,{className:"h-4 w-4"}),"Пример трекинговой ссылки"]}),r.jsxs("code",{className:"bg-gray-100 dark:bg-gray-800 px-3 py-2 rounded text-sm block",children:["https://",y.domain,"/click?offer=123&clickid=partner_abc123"]})]})]})]})]}),r.jsx(D,{size:"sm",variant:"destructive",onClick:()=>m.mutate(y.id),disabled:m.isPending,"data-testid":`button-delete-${y.id}`,children:r.jsx(wr,{className:"h-3 w-3"})})]}),y.errorMessage&&r.jsxs(UP,{className:"mt-4",variant:"destructive",children:[r.jsx(Ua,{className:"h-4 w-4"}),r.jsx(BP,{children:y.errorMessage})]}),y.sslStatus&&y.sslStatus!=="none"&&r.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[r.jsxs("h5",{className:"font-medium mb-2 flex items-center gap-2",children:[r.jsx(Dt,{className:"h-4 w-4"}),"SSL Сертификат"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Статус:"}),r.jsxs("span",{className:"ml-2 font-medium",children:[y.sslStatus==="issued"&&"✅ Выдан",y.sslStatus==="pending"&&"⏳ Выдается",y.sslStatus==="failed"&&"❌ Ошибка",y.sslStatus==="expired"&&"⚠️ Истек"]})]}),y.sslIssuer&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Центр:"}),r.jsx("span",{className:"ml-2 font-medium",children:y.sslIssuer})]}),y.sslValidUntil&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Действует до:"}),r.jsx("span",{className:"ml-2 font-medium",children:new Date(y.sslValidUntil).toLocaleDateString("ru-RU")})]}),y.sslErrorMessage&&r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-red-600 dark:text-red-400",children:"Ошибка:"}),r.jsx("span",{className:"ml-2",children:y.sslErrorMessage})]})]})]}),y.lastChecked&&r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Последняя проверка: ",new Date(y.lastChecked).toLocaleString("ru-RU")]})]})},y.id))})]})]})})}const cFe=[{value:"en",label:"English"},{value:"ru",label:"Русский"},{value:"es",label:"Español"},{value:"pt",label:"Português"},{value:"fr",label:"Français"},{value:"de",label:"Deutsch"},{value:"tr",label:"Türkçe"},{value:"zh",label:"中文"},{value:"it",label:"Italiano"}],dFe=[{value:"USD",label:"US Dollar"},{value:"EUR",label:"Euro"},{value:"GBP",label:"British Pound"},{value:"RUB",label:"Russian Ruble"},{value:"BRL",label:"Brazilian Real"}],uFe=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"New York (EST/EDT)"},{value:"Europe/London",label:"London (GMT/BST)"},{value:"Europe/Moscow",label:"Moscow (MSK)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"}];function hFe(){var le,Ie,ae,st;const{user:e}=tr(),{toast:t}=at(),n=Et(),[s,a]=v.useState("account"),[i,l]=v.useState(!1),[o,c]=v.useState({}),[d,u]=v.useState({current:"",new:"",confirm:""}),[h,f]=v.useState({}),[m,g]=v.useState({defaultUrl:"",ipWhitelist:[],enabled:!0}),[x,w]=v.useState({email:!1,telegram:!1,sms:!1}),[j,y]=v.useState(""),{data:b,isLoading:p}=Fe({queryKey:["/api/auth/me"],enabled:!!e}),{data:N,isLoading:k}=Fe({queryKey:["/api/advertiser/api-tokens"]}),{data:S,isLoading:P}=Fe({queryKey:["/api/advertiser/profile/webhook"]});v.useEffect(()=>{var K,Me,de,Be,qe,Qe,wt,rr,V,I,J,xe,_e,Ae,Y,Se,te;e&&(f({firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phone:e.phone||"",company:e.company||"",country:e.country||"US",language:e.language||"en",timezone:e.timezone||"UTC",currency:e.currency||"USD",twoFactorEnabled:e.twoFactorEnabled||!1,settings:{brandName:((K=e.settings)==null?void 0:K.brandName)||"",brandDescription:((Me=e.settings)==null?void 0:Me.brandDescription)||"",brandLogo:((de=e.settings)==null?void 0:de.brandLogo)||"",vertical:((Be=e.settings)==null?void 0:Be.vertical)||"",partnerRules:((qe=e.settings)==null?void 0:qe.partnerRules)||"",notifications:{email:((wt=(Qe=e.settings)==null?void 0:Qe.notifications)==null?void 0:wt.email)||!1,telegram:((V=(rr=e.settings)==null?void 0:rr.notifications)==null?void 0:V.telegram)||!1,sms:((J=(I=e.settings)==null?void 0:I.notifications)==null?void 0:J.sms)||!1}}}),w({email:((_e=(xe=e.settings)==null?void 0:xe.notifications)==null?void 0:_e.email)||!1,telegram:((Y=(Ae=e.settings)==null?void 0:Ae.notifications)==null?void 0:Y.telegram)||!1,sms:((te=(Se=e.settings)==null?void 0:Se.notifications)==null?void 0:te.sms)||!1}),y(e.telegramChatId?String(e.telegramChatId):""),f(Te=>({...Te,telegram:e.telegram||"",telegramChatId:e.telegramChatId||null})))},[e]),v.useEffect(()=>{S&&g({defaultUrl:S.defaultUrl||"",ipWhitelist:S.ipWhitelist||[],enabled:S.enabled!==void 0?S.enabled:!0})},[S]);const _=Oe({mutationFn:async K=>Re("/api/advertiser/profile","PATCH",K),onSuccess:()=>{t({title:"Профиль обновлен",description:"Данные профиля успешно сохранены"}),n.invalidateQueries({queryKey:["/api/auth/me"]}),l(!1)},onError:()=>{t({title:"Ошибка",description:"Не удалось обновить профиль",variant:"destructive"})}}),R=Oe({mutationFn:async K=>Re("/api/advertiser/profile/change-password","POST",K),onSuccess:()=>{t({title:"Пароль изменен",description:"Пароль успешно обновлен"}),u({current:"",new:"",confirm:""})},onError:()=>{t({title:"Ошибка",description:"Не удалось изменить пароль",variant:"destructive"})}}),O=Oe({mutationFn:async K=>Re("/api/advertiser/2fa/toggle","POST",{enabled:K}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/auth/me"]}),t({title:"2FA обновлена",description:"Настройки двухфакторной аутентификации изменены"})},onError:K=>{t({title:"Ошибка",description:K.message||"Не удалось изменить настройки 2FA",variant:"destructive"})}}),M=Oe({mutationFn:async K=>Re("/api/advertiser/api-tokens","POST",{name:K}),onSuccess:()=>{t({title:"Токен создан",description:"Новый API токен успешно создан"}),n.invalidateQueries({queryKey:["/api/advertiser/api-tokens"]})},onError:()=>{t({title:"Ошибка",description:"Не удалось создать токен",variant:"destructive"})}}),A=Oe({mutationFn:async K=>Re(`/api/advertiser/api-tokens/${K}`,"DELETE"),onSuccess:()=>{t({title:"Токен удален",description:"API токен успешно удален"}),n.invalidateQueries({queryKey:["/api/advertiser/api-tokens"]})},onError:()=>{t({title:"Ошибка",description:"Не удалось удалить токен",variant:"destructive"})}}),T=Oe({mutationFn:async K=>Re("/api/advertiser/profile/webhook","PATCH",K),onSuccess:()=>{t({title:"Webhook обновлен",description:"Настройки webhook успешно сохранены"}),n.invalidateQueries({queryKey:["/api/advertiser/profile/webhook"]})},onError:()=>{t({title:"Ошибка",description:"Не удалось обновить webhook",variant:"destructive"})}}),B=Oe({mutationFn:async K=>Re("/api/advertiser/profile/notifications","PATCH",{notifications:K}),onSuccess:()=>{t({title:"Уведомления обновлены",description:"Настройки уведомлений успешно сохранены"}),n.invalidateQueries({queryKey:["/api/auth/me"]})},onError:()=>{t({title:"Ошибка",description:"Не удалось обновить уведомления",variant:"destructive"})}}),z=Oe({mutationFn:async K=>Re("/api/telegram/link","PATCH",{telegramChatId:K}),onSuccess:()=>{t({title:"Telegram привязан",description:"Аккаунт Telegram успешно привязан к профилю"}),n.invalidateQueries({queryKey:["/api/auth/me"]})},onError:()=>{t({title:"Ошибка привязки",description:"Не удалось привязать Telegram аккаунт",variant:"destructive"})}}),U=Oe({mutationFn:async K=>Re("/api/telegram/test","POST",{userId:e==null?void 0:e.id,type:K,data:{offerName:"Test Offer",partnerName:"Test Partner",amount:100,currency:"USD",country:"RU"}}),onSuccess:()=>{t({title:"Тест отправлен",description:"Тестовое уведомление отправлено в Telegram"})},onError:()=>{t({title:"Ошибка отправки",description:"Не удалось отправить тестовое уведомление",variant:"destructive"})}}),E=()=>{_.mutate(h)},$=()=>{if(d.new!==d.confirm){t({title:"Ошибка",description:"Новые пароли не совпадают",variant:"destructive"});return}R.mutate({currentPassword:d.current,newPassword:d.new})},G=()=>{const K=window.prompt("Введите название токена:");K&&K.trim()&&M.mutate(K.trim())},oe=async K=>{try{await navigator.clipboard.writeText(K),t({title:"Скопировано",description:"API токен скопирован в буфер обмена"})}catch{const de=document.createElement("textarea");de.value=K,document.body.appendChild(de),de.select(),document.execCommand("copy"),document.body.removeChild(de),t({title:"Скопировано",description:"API токен скопирован в буфер обмена"})}},ee=K=>{c(Me=>({...Me,[K]:!Me[K]}))},ce=()=>{T.mutate(m)},ye=()=>{B.mutate(x)},je=()=>{const K=!(h!=null&&h.twoFactorEnabled);O.mutate(K)},$e=(K,Me)=>{f(de=>({...de,[K]:Me}))},ke=(K,Me)=>{f(de=>({...de,settings:{...de.settings,[K]:Me}}))},be=()=>{if(!j){t({title:"Ошибка",description:"Введите Chat ID",variant:"destructive"});return}z.mutate(j)},pe=K=>{U.mutate(K)};return p?r.jsx("div",{className:"flex items-center justify-center h-64",children:"Загрузка..."}):r.jsxs("div",{className:"w-full space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Профиль рекламодателя"}),r.jsx("p",{className:"text-muted-foreground",children:"Управление профилем, API-доступом, кастомным доменом и настройками"})]})}),r.jsxs(rn,{value:s,onValueChange:a,className:"w-full",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-6",children:[r.jsx(We,{value:"account","data-testid":"tab-account",children:"Аккаунт"}),r.jsx(We,{value:"api","data-testid":"tab-api",children:"API-доступ"}),r.jsx(We,{value:"telegram","data-testid":"tab-telegram",children:"Telegram"}),r.jsx(We,{value:"domain","data-testid":"tab-domain",children:"Домен"}),r.jsx(We,{value:"notifications","data-testid":"tab-notifications",children:"Уведомления"}),r.jsx(We,{value:"security","data-testid":"tab-security",children:"Безопасность"})]}),r.jsxs(He,{value:"account",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:"Информация аккаунта"}),r.jsx("div",{className:"space-x-2",children:i?r.jsxs(r.Fragment,{children:[r.jsx(D,{variant:"outline",onClick:()=>l(!1),"data-testid":"button-cancel-edit",children:"Отмена"}),r.jsxs(D,{onClick:E,disabled:_.isPending,"data-testid":"button-save-profile",children:[r.jsx(_l,{className:"h-4 w-4 mr-2"}),"Сохранить"]})]}):r.jsx(D,{onClick:()=>l(!0),"data-testid":"button-edit-profile",children:"Редактировать"})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Основные данные"})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Имя"}),r.jsx(ne,{value:h.firstName||"",onChange:K=>$e("firstName",K.target.value),disabled:!i,"data-testid":"input-first-name"})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Фамилия"}),r.jsx(ne,{value:h.lastName||"",onChange:K=>$e("lastName",K.target.value),disabled:!i,"data-testid":"input-last-name"})]})]}),r.jsx(F,{children:"Email"}),r.jsx(ne,{type:"email",value:h.email||"",onChange:K=>$e("email",K.target.value),disabled:!i,"data-testid":"input-email"}),r.jsx(F,{children:"Телефон"}),r.jsx(ne,{value:h.phone||"",onChange:K=>$e("phone",K.target.value),disabled:!i,"data-testid":"input-phone"}),r.jsx(F,{children:"Telegram"}),r.jsx(ne,{value:h.telegram||"",onChange:K=>$e("telegram",K.target.value),disabled:!i,"data-testid":"input-telegram"}),r.jsx(F,{children:"Название компании"}),r.jsx(ne,{value:h.company||"",onChange:K=>$e("company",K.target.value),disabled:!i,"data-testid":"input-company"})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Региональные настройки"})}),r.jsxs(W,{className:"space-y-4",children:[r.jsx(F,{children:"Страна"}),r.jsx(ne,{value:h.country||"",onChange:K=>$e("country",K.target.value),disabled:!i,"data-testid":"input-country"}),r.jsx(F,{children:"Язык интерфейса"}),r.jsxs(fe,{value:h.language||"en",onValueChange:K=>$e("language",K),disabled:!i,children:[r.jsx(ue,{"data-testid":"select-language",children:r.jsx(me,{})}),r.jsx(he,{children:cFe.map(K=>r.jsx(C,{value:K.value,children:K.label},K.value))})]}),r.jsx(F,{children:"Часовой пояс"}),r.jsxs(fe,{value:h.timezone||"UTC",onValueChange:K=>$e("timezone",K),disabled:!i,children:[r.jsx(ue,{"data-testid":"select-timezone",children:r.jsx(me,{})}),r.jsx(he,{children:uFe.map(K=>r.jsx(C,{value:K.value,children:K.label},K.value))})]}),r.jsx(F,{children:"Валюта"}),r.jsxs(fe,{value:h.currency||"USD",onValueChange:K=>$e("currency",K),disabled:!i,children:[r.jsx(ue,{"data-testid":"select-currency",children:r.jsx(me,{})}),r.jsx(he,{children:dFe.map(K=>r.jsx(C,{value:K.value,children:K.label},K.value))})]})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Настройки бренда"})}),r.jsxs(W,{className:"space-y-4",children:[r.jsx(F,{children:"Название бренда"}),r.jsx(ne,{value:((le=h.settings)==null?void 0:le.brandName)||"",onChange:K=>ke("brandName",K.target.value),disabled:!i,"data-testid":"input-brand-name"}),r.jsx(F,{children:"Вертикаль"}),r.jsx(ne,{value:((Ie=h.settings)==null?void 0:Ie.vertical)||"",onChange:K=>ke("vertical",K.target.value),disabled:!i,"data-testid":"input-vertical"}),r.jsx(F,{children:"Описание бренда"}),r.jsx(gt,{rows:3,value:((ae=h.settings)==null?void 0:ae.brandDescription)||"",onChange:K=>ke("brandDescription",K.target.value),disabled:!i,"data-testid":"textarea-brand-description"}),r.jsx(F,{children:"Правила для партнёров"}),r.jsx(gt,{rows:4,value:((st=h.settings)==null?void 0:st.partnerRules)||"",onChange:K=>ke("partnerRules",K.target.value),disabled:!i,"data-testid":"textarea-partner-rules"})]})]})]}),r.jsxs(He,{value:"api",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:"API-доступ"}),r.jsxs(D,{onClick:G,"data-testid":"button-generate-token",children:[r.jsx(zA,{className:"h-4 w-4 mr-2"}),"Создать новый токен"]})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"API токены"}),r.jsx(Ze,{children:"Секретные токены для интеграций и API-запросов"})]}),r.jsx(W,{children:r.jsx("div",{className:"space-y-4",children:k?r.jsx("div",{children:"Загрузка токенов..."}):N&&N.length>0?N.map(K=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg","data-testid":`token-${K.id}`,children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"font-medium","data-testid":`token-name-${K.id}`,children:K.name}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Создан: ",new Date(K.createdAt).toLocaleDateString(),K.lastUsed&&` • Последнее использование: ${new Date(K.lastUsed).toLocaleDateString()}`]}),r.jsx("div",{className:"font-mono text-sm bg-muted p-2 rounded","data-testid":`token-value-${K.id}`,children:o[K.id]?K.token:"••••••••••••••••••••••••••••••••"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(D,{size:"sm",variant:"outline",onClick:()=>ee(K.id),"data-testid":`button-toggle-token-${K.id}`,title:"Показать/скрыть токен",children:o[K.id]?r.jsx(Nb,{className:"h-4 w-4"}):r.jsx(ir,{className:"h-4 w-4"})}),r.jsx(D,{size:"sm",variant:"outline",onClick:()=>oe(K.token),"data-testid":`button-copy-token-${K.id}`,title:"Копировать токен",children:r.jsx(Yr,{className:"h-4 w-4"})}),r.jsx(D,{size:"sm",variant:"destructive",onClick:()=>A.mutate(K.id),"data-testid":`button-delete-token-${K.id}`,title:"Удалить токен",children:r.jsx(wr,{className:"h-4 w-4"})})]})]},K.id)):r.jsx("div",{className:"text-center py-8 text-muted-foreground","data-testid":"empty-tokens",children:"У вас пока нет API токенов"})})})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Webhook настройки"}),r.jsx(Ze,{children:"URL по умолчанию для постбеков и IP-белый список"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"defaultWebhookUrl",children:"Webhook URL по умолчанию"}),r.jsx(ne,{id:"defaultWebhookUrl",value:m.defaultUrl,onChange:K=>g(Me=>({...Me,defaultUrl:K.target.value})),placeholder:"https://your-domain.com/postback","data-testid":"input-webhook-url"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"ipWhitelist",children:"IP-белый список"}),r.jsx(gt,{id:"ipWhitelist",value:m.ipWhitelist.join(`
`),onChange:K=>g(Me=>({...Me,ipWhitelist:K.target.value.split(`
`).map(de=>de.trim()).filter(Boolean)})),placeholder:"192.168.1.1\\n10.0.0.1",rows:4,"data-testid":"textarea-ip-whitelist"}),r.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Один IP на строку"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{id:"webhookEnabled",checked:m.enabled,onCheckedChange:K=>g(Me=>({...Me,enabled:K})),"data-testid":"switch-webhook-enabled"}),r.jsx(F,{htmlFor:"webhookEnabled",children:"Включить Webhook"})]}),r.jsx(D,{onClick:ce,"data-testid":"button-save-webhook",children:"Сохранить настройки Webhook"})]})]})]}),r.jsxs(He,{value:"telegram",className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h2",{className:"text-2xl font-semibold",children:"Telegram интеграция"})}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"h-8 w-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold text-sm",children:"📖"})}),r.jsx("span",{children:"Инструкция по подключению"})]}),r.jsx(Ze,{children:"Пошаговое руководство для подключения Telegram бота"})]}),r.jsx(W,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"h-6 w-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Найдите бота в Telegram"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Перейдите к боту ",r.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"@integracia7980_bot"})," или по ссылке:",r.jsx("a",{href:"https://t.me/integracia7980_bot",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-1",children:"https://t.me/integracia7980_bot"})]})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"h-6 w-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Получите Chat ID"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Напишите боту команду ",r.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"/start"}),r.jsx("br",{}),"Бот пришлёт вам ваш Chat ID (например: ",r.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"123456789"}),")"]})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"h-6 w-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Привяжите в профиле"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:'Скопируйте полученный Chat ID и вставьте его в поле ниже, затем нажмите "Привязать"'})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"h-6 w-6 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"✓"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Протестируйте уведомления"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"После успешной привязки используйте кнопки тестирования для проверки всех типов уведомлений"})]})]})]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mt-4",children:[r.jsx("h5",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Доступные команды бота:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 py-0.5 rounded text-xs",children:"/start"})," - получить Chat ID"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 py-0.5 rounded text-xs",children:"/help"})," - помощь"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 py-0.5 rounded text-xs",children:"/stats"})," - статистика"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 py-0.5 rounded text-xs",children:"/report"})," - дневной отчёт"]})]})]})]})})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Подключение к Telegram боту"}),r.jsx(Ze,{children:"Привяжите ваш Telegram аккаунт для получения уведомлений и управления через бота"})]}),r.jsxs(W,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"telegram-chat-id",children:"Chat ID"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(ne,{id:"telegram-chat-id",value:j,onChange:K=>y(K.target.value),placeholder:"Например: 123456789","data-testid":"input-telegram-chat-id"}),r.jsx(D,{onClick:be,disabled:z.isPending,"data-testid":"button-link-telegram",children:z.isPending?"Привязка...":"Привязать"})]}),r.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Получите ваш Chat ID, написав команду /start боту ",r.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"@integracia7980_bot"})]})]}),(b==null?void 0:b.telegramChatId)&&r.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),r.jsxs("span",{className:"text-green-700 dark:text-green-300 font-medium",children:["Telegram подключён (Chat ID: ",b.telegramChatId,")"]})]})})]}),(b==null?void 0:b.telegramChatId)&&r.jsxs("div",{className:"border-t pt-6",children:[r.jsx("h3",{className:"text-lg font-medium mb-4",children:"Тестирование уведомлений"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(D,{variant:"outline",onClick:()=>pe("conversion"),disabled:U.isPending,"data-testid":"button-test-conversion",children:"Тест уведомления о конверсии"}),r.jsx(D,{variant:"outline",onClick:()=>pe("offer_alert"),disabled:U.isPending,"data-testid":"button-test-offer-alert",children:"Тест алерта по офферу"}),r.jsx(D,{variant:"outline",onClick:()=>pe("fraud_alert"),disabled:U.isPending,"data-testid":"button-test-fraud-alert",children:"Тест антифрод алерта"}),r.jsx(D,{variant:"outline",onClick:()=>pe("system_message"),disabled:U.isPending,"data-testid":"button-test-system",children:"Тест системного сообщения"})]})]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Настройки Telegram уведомлений"}),r.jsx(Ze,{children:"Выберите типы уведомлений для получения в Telegram"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Уведомления о конверсиях"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Получать сообщения при новых лидах и депозитах"})]}),r.jsx(Je,{checked:x.telegram,onCheckedChange:K=>w(Me=>({...Me,telegram:K})),"data-testid":"switch-telegram-conversions"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Антифрод алерты"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Предупреждения о подозрительной активности"})]}),r.jsx(Je,{defaultChecked:!0,"data-testid":"switch-telegram-fraud"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Системные уведомления"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Сообщения о важных изменениях в системе"})]}),r.jsx(Je,{defaultChecked:!0,"data-testid":"switch-telegram-system"})]})]}),r.jsx(D,{onClick:ye,"data-testid":"button-save-telegram-settings",children:"Сохранить настройки Telegram"})]})]})]}),r.jsxs(He,{value:"domain",className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h2",{className:"text-2xl font-semibold",children:"DNS-подтверждение доменов"})}),r.jsx(oFe,{})]}),r.jsxs(He,{value:"notifications",className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h2",{className:"text-2xl font-semibold",children:"Уведомления"})}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Настройка уведомлений"}),r.jsx(Ze,{children:"Выберите, по каким каналам получать уведомления от платформы"})]}),r.jsxs(W,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"notif-email",children:"Email"}),r.jsxs("p",{className:"text-muted-foreground text-sm",children:["Уведомления на вашу почту (",h.email,")"]})]}),r.jsx(Je,{id:"notif-email",checked:x.email,onCheckedChange:K=>w(Me=>({...Me,email:K})),"data-testid":"switch-email-notifications"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"notif-telegram",children:"Telegram"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"Уведомления в Telegram-бот (если подключён)"})]}),r.jsx(Je,{id:"notif-telegram",checked:x.telegram,onCheckedChange:K=>w(Me=>({...Me,telegram:K})),"data-testid":"switch-telegram-notifications"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"notif-sms",children:"SMS"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"SMS-уведомления (если активны)"})]}),r.jsx(Je,{id:"notif-sms",checked:x.sms,onCheckedChange:K=>w(Me=>({...Me,sms:K})),"data-testid":"switch-sms-notifications"})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(D,{onClick:ye,"data-testid":"button-save-notifications",children:"Сохранить уведомления"})})]})]})]}),r.jsxs(He,{value:"security",className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h2",{className:"text-2xl font-semibold",children:"Безопасность"})}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Сменить пароль"}),r.jsx(Ze,{children:"Мы рекомендуем использовать уникальный и сложный пароль"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"currentPassword",children:"Текущий пароль"}),r.jsx(ne,{id:"currentPassword",type:"password",value:d.current,onChange:K=>u(Me=>({...Me,current:K.target.value})),"data-testid":"input-current-password"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"newPassword",children:"Новый пароль"}),r.jsx(ne,{id:"newPassword",type:"password",value:d.new,onChange:K=>u(Me=>({...Me,new:K.target.value})),"data-testid":"input-new-password"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"confirmPassword",children:"Повторите пароль"}),r.jsx(ne,{id:"confirmPassword",type:"password",value:d.confirm,onChange:K=>u(Me=>({...Me,confirm:K.target.value})),"data-testid":"input-confirm-password"})]})]}),r.jsx(D,{onClick:$,"data-testid":"button-change-password",children:"Обновить пароль"})]})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Двухфакторная аутентификация (2FA)"}),r.jsx(Ze,{children:"Ваша безопасность важна. Мы рекомендуем включить 2FA."})]}),r.jsxs(W,{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsxs("p",{className:"text-sm text-muted-foreground","data-testid":"text-2fa-status",children:["Статус: ",r.jsx("strong",{children:h!=null&&h.twoFactorEnabled?"Включена":"Отключена"})]})}),r.jsx(D,{variant:"outline",onClick:je,disabled:O.isPending,"data-testid":"button-toggle-2fa",children:O.isPending?"Обработка...":h!=null&&h.twoFactorEnabled?"Отключить 2FA":"Включить 2FA"})]})]})]})]})]})}const fFe=[{value:"usdt",label:"USDT (Tether)",icon:"₮"},{value:"btc",label:"Bitcoin",icon:"₿"},{value:"card",label:"Банковская карта",icon:"💳"},{value:"swift",label:"SWIFT",icon:"🏦"},{value:"sepa",label:"SEPA",icon:"🇪🇺"},{value:"payoneer",label:"Payoneer",icon:"💰"}];function mFe(){var j,y,b,p;const{user:e}=tr(),{toast:t}=at();v.useState("30d");const[n,s]=v.useState(""),[a,i]=v.useState(""),{data:l,isLoading:o}=Fe({queryKey:["/api/advertiser/financial-overview"],enabled:!!e}),{data:c,isLoading:d}=Fe({queryKey:["/api/advertiser/transactions"],enabled:!!e}),u=N=>{switch(N){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},h=N=>{switch(N){case"deposit":return r.jsx($R,{className:"h-4 w-4 text-green-600"});case"payout":return r.jsx(tk,{className:"h-4 w-4 text-blue-600"});case"fee":return r.jsx(Ua,{className:"h-4 w-4 text-orange-600"});case"refund":return r.jsx(cr,{className:"h-4 w-4 text-purple-600"});default:return r.jsx(Rt,{className:"h-4 w-4"})}},f=()=>{t({title:"Создание инвойса",description:"Функция создания инвойса в разработке"})},m=()=>{t({title:"Настройка бюджетов",description:"Функция планирования бюджетов в разработке"})},g=()=>{t({title:"Пополнение баланса",description:"Перейдите на вкладку 'Пополнение' для добавления средств"})},x=()=>{t({title:"Выплаты партнёрам",description:"Функция просмотра выплат в разработке"})},w=()=>{if(!n||!a){t({title:"Ошибка",description:"Укажите сумму и способ пополнения",variant:"destructive"});return}t({title:"Запрос на пополнение",description:`Запрос на пополнение $${n} через ${a} отправлен`}),s(""),i("")};return o?r.jsx("div",{className:"flex items-center justify-center h-64",children:"Загрузка финансовых данных..."}):r.jsxs("div",{className:"w-full space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"page-title",children:"Финансы"}),r.jsx("p",{className:"text-muted-foreground",children:"Управление балансом, депозитами и выплатами партнёрам"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Баланс"}),r.jsx(Oc,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"balance-amount",children:["$",((j=l==null?void 0:l.balance)==null?void 0:j.toFixed(2))||"0.00"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Доступно для выплат партнёрам"})]})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Всего потрачено"}),r.jsx(tk,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"total-spent",children:["$",((y=l==null?void 0:l.totalSpent)==null?void 0:y.toFixed(2))||"0.00"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Выплаты партнёрам за всё время"})]})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Всего депозитов"}),r.jsx($R,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"total-deposited",children:["$",((b=l==null?void 0:l.totalDeposited)==null?void 0:b.toFixed(2))||"0.00"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Пополнения баланса"})]})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Ожидает выплаты"}),r.jsx(lr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"pending-payouts",children:["$",((p=l==null?void 0:l.pendingPayouts)==null?void 0:p.toFixed(2))||"0.00"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Запросы на выплату в обработке"})]})]})]}),r.jsxs(rn,{defaultValue:"overview",className:"space-y-6",children:[r.jsxs(Zr,{children:[r.jsx(We,{value:"overview","data-testid":"tab-overview",children:"Обзор"}),r.jsx(We,{value:"deposit","data-testid":"tab-deposit",children:"Пополнение"}),r.jsx(We,{value:"transactions","data-testid":"tab-transactions",children:"Транзакции"}),r.jsx(We,{value:"invoices","data-testid":"tab-invoices",children:"Инвойсы"}),r.jsx(We,{value:"budgets","data-testid":"tab-budgets",children:"Бюджеты"})]}),r.jsx(He,{value:"overview",className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Быстрые действия"}),r.jsx(Ze,{children:"Основные финансовые операции"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs(D,{className:"w-full justify-start",onClick:g,"data-testid":"button-add-funds",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Пополнить баланс"]}),r.jsxs(D,{variant:"outline",className:"w-full justify-start",onClick:x,"data-testid":"button-view-payouts",children:[r.jsx(tk,{className:"h-4 w-4 mr-2"}),"Просмотреть выплаты партнёрам"]}),r.jsxs(D,{variant:"outline",className:"w-full justify-start",onClick:f,"data-testid":"button-create-invoice",children:[r.jsx(es,{className:"h-4 w-4 mr-2"}),"Создать инвойс"]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Последние транзакции"}),r.jsx(Ze,{children:"Недавние финансовые операции"})]}),r.jsx(W,{children:d?r.jsx("div",{className:"text-center py-4",children:"Загрузка..."}):c&&c.length>0?r.jsx("div",{className:"space-y-3",children:(c||[]).slice(0,5).map(N=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[h(N.type),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:N.description}),r.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(N.createdAt).toLocaleDateString()})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium",children:[N.type==="deposit"?"+":"-","$",N.amount.toFixed(2)]}),r.jsx(ie,{className:`text-xs ${u(N.status)}`,"data-testid":`status-${N.status}`,children:N.status})]})]},N.id))}):r.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Транзакций пока нет"})})]})]})}),r.jsx(He,{value:"deposit",className:"space-y-6",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Пополнение баланса"}),r.jsx(Ze,{children:"Выберите сумму и способ пополнения"})]}),r.jsx(W,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"depositAmount",children:"Сумма пополнения"}),r.jsx(ne,{id:"depositAmount",type:"number",placeholder:"0.00",value:n,onChange:N=>s(N.target.value),"data-testid":"input-deposit-amount"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"paymentMethod",children:"Способ оплаты"}),r.jsxs(fe,{value:a,onValueChange:i,children:[r.jsx(ue,{"data-testid":"select-payment-method",children:r.jsx(me,{placeholder:"Выберите способ оплаты"})}),r.jsx(he,{children:fFe.map(N=>r.jsx(C,{value:N.value,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{children:N.icon}),r.jsx("span",{children:N.label})]})},N.value))})]})]}),r.jsx(D,{className:"w-full",disabled:!n||!a,onClick:w,"data-testid":"button-deposit",children:"Пополнить баланс"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"font-medium",children:"Популярные суммы"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:["100","500","1000","5000"].map(N=>r.jsxs(D,{variant:"outline",onClick:()=>s(N),"data-testid":`button-amount-${N}`,children:["$",N]},N))})]})]})})]})}),r.jsx(He,{value:"transactions",className:"space-y-6",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"История транзакций"}),r.jsx(Ze,{children:"Все финансовые операции"})]}),r.jsx(W,{children:d?r.jsx("div",{className:"text-center py-8",children:"Загрузка транзакций..."}):(c==null?void 0:c.length)>0?r.jsx("div",{className:"space-y-4",children:c.map(N=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[h(N.type),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:N.description}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(N.createdAt).toLocaleString()," • ",N.method]}),N.reference&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Ref: ",N.reference]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-medium text-lg",children:[N.type==="deposit"?"+":"-","$",N.amount.toFixed(2)]}),r.jsx(ie,{className:u(N.status),children:N.status})]})]},N.id))}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Транзакций пока нет"})})]})}),r.jsx(He,{value:"invoices",className:"space-y-6",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Инвойсы"}),r.jsx(Ze,{children:"Создание и управление инвойсами"})]}),r.jsx(W,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(es,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"font-medium mb-2",children:"Инвойсов пока нет"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Создайте первый инвойс для запроса оплаты"}),r.jsxs(D,{onClick:f,"data-testid":"button-create-first-invoice",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Создать инвойс"]})]})})]})}),r.jsx(He,{value:"budgets",className:"space-y-6",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Планирование бюджетов"}),r.jsx(Ze,{children:"Установите лимиты и планы расходов на офферы"})]}),r.jsx(W,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(cr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"font-medium mb-2",children:"Бюджеты не настроены"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Настройте планируемые бюджеты для эффективного управления расходами"}),r.jsxs(D,{onClick:m,"data-testid":"button-setup-budgets",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Настроить бюджеты"]})]})})]})})]})]})}var cK="AlertDialog",[pFe,rWe]=zn(cK,[wW]),$o=wW(),dK=e=>{const{__scopeAlertDialog:t,...n}=e,s=$o(t);return r.jsx(L4,{...s,...n,modal:!0})};dK.displayName=cK;var xFe="AlertDialogTrigger",gFe=v.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=$o(n);return r.jsx(FW,{...a,...s,ref:t})});gFe.displayName=xFe;var vFe="AlertDialogPortal",uK=e=>{const{__scopeAlertDialog:t,...n}=e,s=$o(t);return r.jsx(U4,{...s,...n})};uK.displayName=vFe;var yFe="AlertDialogOverlay",hK=v.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=$o(n);return r.jsx(iN,{...a,...s,ref:t})});hK.displayName=yFe;var Hh="AlertDialogContent",[bFe,jFe]=pFe(Hh),wFe=Z8("AlertDialogContent"),fK=v.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...a}=e,i=$o(n),l=v.useRef(null),o=jt(t,l),c=v.useRef(null);return r.jsx(DMe,{contentName:Hh,titleName:mK,docsSlug:"alert-dialog",children:r.jsx(bFe,{scope:n,cancelRef:c,children:r.jsxs(lN,{role:"alertdialog",...i,...a,ref:o,onOpenAutoFocus:Le(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(wFe,{children:s}),r.jsx(kFe,{contentRef:l})]})})})});fK.displayName=Hh;var mK="AlertDialogTitle",pK=v.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=$o(n);return r.jsx(B4,{...a,...s,ref:t})});pK.displayName=mK;var xK="AlertDialogDescription",gK=v.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=$o(n);return r.jsx(z4,{...a,...s,ref:t})});gK.displayName=xK;var NFe="AlertDialogAction",vK=v.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,a=$o(n);return r.jsx(V4,{...a,...s,ref:t})});vK.displayName=NFe;var yK="AlertDialogCancel",bK=v.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:a}=jFe(yK,n),i=$o(n),l=jt(t,a);return r.jsx(V4,{...i,...s,ref:l})});bK.displayName=yK;var kFe=({contentRef:e})=>{const t=`\`${Hh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Hh}\` by passing a \`${xK}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Hh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},SFe=dK,CFe=uK,jK=hK,wK=fK,NK=vK,kK=bK,SK=pK,CK=gK;const s3=SFe,PFe=CFe,PK=v.forwardRef(({className:e,...t},n)=>r.jsx(jK,{className:Ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));PK.displayName=jK.displayName;const zP=v.forwardRef(({className:e,...t},n)=>r.jsxs(PFe,{children:[r.jsx(PK,{}),r.jsx(wK,{ref:n,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));zP.displayName=wK.displayName;const VP=({className:e,...t})=>r.jsx("div",{className:Ee("flex flex-col space-y-2 text-center sm:text-left",e),...t});VP.displayName="AlertDialogHeader";const qP=({className:e,...t})=>r.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});qP.displayName="AlertDialogFooter";const WP=v.forwardRef(({className:e,...t},n)=>r.jsx(SK,{ref:n,className:Ee("text-lg font-semibold",e),...t}));WP.displayName=SK.displayName;const HP=v.forwardRef(({className:e,...t},n)=>r.jsx(CK,{ref:n,className:Ee("text-sm text-muted-foreground",e),...t}));HP.displayName=CK.displayName;const KP=v.forwardRef(({className:e,...t},n)=>r.jsx(NK,{ref:n,className:Ee(Qx(),e),...t}));KP.displayName=NK.displayName;const GP=v.forwardRef(({className:e,...t},n)=>r.jsx(kK,{ref:n,className:Ee(Qx({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));GP.displayName=kK.displayName;function _Fe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.useMemo(()=>s=>{t.forEach(a=>a(s))},t)}const mN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rp(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function oE(e){return"nodeType"in e}function ea(e){var t,n;return e?rp(e)?e:oE(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function cE(e){const{Document:t}=ea(e);return e instanceof t}function dy(e){return rp(e)?!1:e instanceof ea(e).HTMLElement}function _K(e){return e instanceof ea(e).SVGElement}function np(e){return e?rp(e)?e.document:oE(e)?cE(e)?e:dy(e)||_K(e)?e.ownerDocument:document:document:document}const Rl=mN?v.useLayoutEffect:v.useEffect;function dE(e){const t=v.useRef(e);return Rl(()=>{t.current=e}),v.useCallback(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t.current==null?void 0:t.current(...s)},[])}function AFe(){const e=v.useRef(null),t=v.useCallback((s,a)=>{e.current=setInterval(s,a)},[]),n=v.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Xg(e,t){t===void 0&&(t=[e]);const n=v.useRef(e);return Rl(()=>{n.current!==e&&(n.current=e)},t),n}function uy(e,t){const n=v.useRef();return v.useMemo(()=>{const s=e(n.current);return n.current=s,s},[...t])}function Yj(e){const t=dE(e),n=v.useRef(null),s=v.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,s]}function YP(e){const t=v.useRef();return v.useEffect(()=>{t.current=e},[e]),t.current}let eS={};function hy(e,t){return v.useMemo(()=>{if(t)return t;const n=eS[e]==null?0:eS[e]+1;return eS[e]=n,e+"-"+n},[e,t])}function AK(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.reduce((i,l)=>{const o=Object.entries(l);for(const[c,d]of o){const u=i[c];u!=null&&(i[c]=u+e*d)}return i},{...t})}}const Kh=AK(1),Zg=AK(-1);function TFe(e){return"clientX"in e&&"clientY"in e}function uE(e){if(!e)return!1;const{KeyboardEvent:t}=ea(e.target);return t&&e instanceof t}function EFe(e){if(!e)return!1;const{TouchEvent:t}=ea(e.target);return t&&e instanceof t}function XP(e){if(EFe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return TFe(e)?{x:e.clientX,y:e.clientY}:null}const Nm=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Nm.Translate.toString(e),Nm.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:s}=e;return t+" "+n+"ms "+s}}}),a3="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function OFe(e){return e.matches(a3)?e:e.querySelector(a3)}const RFe={display:"none"};function DFe(e){let{id:t,value:n}=e;return X.createElement("div",{id:t,style:RFe},n)}function MFe(e){let{id:t,announcement:n,ariaLiveType:s="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return X.createElement("div",{id:t,style:a,role:"status","aria-live":s,"aria-atomic":!0},n)}function $Fe(){const[e,t]=v.useState("");return{announce:v.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const TK=v.createContext(null);function IFe(e){const t=v.useContext(TK);v.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function FFe(){const[e]=v.useState(()=>new Set),t=v.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[v.useCallback(s=>{let{type:a,event:i}=s;e.forEach(l=>{var o;return(o=l[a])==null?void 0:o.call(l,i)})},[e]),t]}const LFe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},UFe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function BFe(e){let{announcements:t=UFe,container:n,hiddenTextDescribedById:s,screenReaderInstructions:a=LFe}=e;const{announce:i,announcement:l}=$Fe(),o=hy("DndLiveRegion"),[c,d]=v.useState(!1);if(v.useEffect(()=>{d(!0)},[]),IFe(v.useMemo(()=>({onDragStart(h){let{active:f}=h;i(t.onDragStart({active:f}))},onDragMove(h){let{active:f,over:m}=h;t.onDragMove&&i(t.onDragMove({active:f,over:m}))},onDragOver(h){let{active:f,over:m}=h;i(t.onDragOver({active:f,over:m}))},onDragEnd(h){let{active:f,over:m}=h;i(t.onDragEnd({active:f,over:m}))},onDragCancel(h){let{active:f,over:m}=h;i(t.onDragCancel({active:f,over:m}))}}),[i,t])),!c)return null;const u=X.createElement(X.Fragment,null,X.createElement(DFe,{id:s,value:a.draggable}),X.createElement(MFe,{id:o,announcement:l}));return n?La.createPortal(u,n):u}var Nn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Nn||(Nn={}));function Xj(){}function i3(e,t){return v.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function zFe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Vi=Object.freeze({x:0,y:0});function EK(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function OK(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return n-s}function VFe(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return s-n}function l3(e){let{left:t,top:n,height:s,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+s},{x:t+a,y:n+s}]}function RK(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function o3(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const qFe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=o3(t,t.left,t.top),i=[];for(const l of s){const{id:o}=l,c=n.get(o);if(c){const d=EK(o3(c),a);i.push({id:o,data:{droppableContainer:l,value:d}})}}return i.sort(OK)},WFe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=l3(t),i=[];for(const l of s){const{id:o}=l,c=n.get(o);if(c){const d=l3(c),u=a.reduce((f,m,g)=>f+EK(d[g],m),0),h=Number((u/4).toFixed(4));i.push({id:o,data:{droppableContainer:l,value:h}})}}return i.sort(OK)};function HFe(e,t){const n=Math.max(t.top,e.top),s=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),l=a-s,o=i-n;if(s<a&&n<i){const c=t.width*t.height,d=e.width*e.height,u=l*o,h=u/(c+d-u);return Number(h.toFixed(4))}return 0}const KFe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=[];for(const i of s){const{id:l}=i,o=n.get(l);if(o){const c=HFe(o,t);c>0&&a.push({id:l,data:{droppableContainer:i,value:c}})}}return a.sort(VFe)};function GFe(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function DK(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Vi}function YFe(e){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];return a.reduce((l,o)=>({...l,top:l.top+e*o.y,bottom:l.bottom+e*o.y,left:l.left+e*o.x,right:l.right+e*o.x}),{...n})}}const XFe=YFe(1);function ZFe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function QFe(e,t,n){const s=ZFe(t);if(!s)return e;const{scaleX:a,scaleY:i,x:l,y:o}=s,c=e.left-l-(1-a)*parseFloat(n),d=e.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),u=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:u,height:h,top:d,right:c+u,bottom:d+h,left:c}}const JFe={ignoreTransform:!1};function sp(e,t){t===void 0&&(t=JFe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=ea(e).getComputedStyle(e);d&&(n=QFe(n,d,u))}const{top:s,left:a,width:i,height:l,bottom:o,right:c}=n;return{top:s,left:a,width:i,height:l,bottom:o,right:c}}function c3(e){return sp(e,{ignoreTransform:!0})}function eLe(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function tLe(e,t){return t===void 0&&(t=ea(e).getComputedStyle(e)),t.position==="fixed"}function rLe(e,t){t===void 0&&(t=ea(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function pN(e,t){const n=[];function s(a){if(t!=null&&n.length>=t||!a)return n;if(cE(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!dy(a)||_K(a)||n.includes(a))return n;const i=ea(e).getComputedStyle(a);return a!==e&&rLe(a,i)&&n.push(a),tLe(a,i)?n:s(a.parentNode)}return e?s(e):n}function MK(e){const[t]=pN(e,1);return t??null}function tS(e){return!mN||!e?null:rp(e)?e:oE(e)?cE(e)||e===np(e).scrollingElement?window:dy(e)?e:null:null}function $K(e){return rp(e)?e.scrollX:e.scrollLeft}function IK(e){return rp(e)?e.scrollY:e.scrollTop}function ZP(e){return{x:$K(e),y:IK(e)}}var Dn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Dn||(Dn={}));function FK(e){return!mN||!e?!1:e===document.scrollingElement}function LK(e){const t={x:0,y:0},n=FK(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,l=e.scrollTop>=s.y,o=e.scrollLeft>=s.x;return{isTop:a,isLeft:i,isBottom:l,isRight:o,maxScroll:s,minScroll:t}}const nLe={x:.2,y:.2};function sLe(e,t,n,s,a){let{top:i,left:l,right:o,bottom:c}=n;s===void 0&&(s=10),a===void 0&&(a=nLe);const{isTop:d,isBottom:u,isLeft:h,isRight:f}=LK(e),m={x:0,y:0},g={x:0,y:0},x={height:t.height*a.y,width:t.width*a.x};return!d&&i<=t.top+x.height?(m.y=Dn.Backward,g.y=s*Math.abs((t.top+x.height-i)/x.height)):!u&&c>=t.bottom-x.height&&(m.y=Dn.Forward,g.y=s*Math.abs((t.bottom-x.height-c)/x.height)),!f&&o>=t.right-x.width?(m.x=Dn.Forward,g.x=s*Math.abs((t.right-x.width-o)/x.width)):!h&&l<=t.left+x.width&&(m.x=Dn.Backward,g.x=s*Math.abs((t.left+x.width-l)/x.width)),{direction:m,speed:g}}function aLe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:l}=window;return{top:0,left:0,right:i,bottom:l,width:i,height:l}}const{top:t,left:n,right:s,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:s,bottom:a,width:e.clientWidth,height:e.clientHeight}}function UK(e){return e.reduce((t,n)=>Kh(t,ZP(n)),Vi)}function iLe(e){return e.reduce((t,n)=>t+$K(n),0)}function lLe(e){return e.reduce((t,n)=>t+IK(n),0)}function oLe(e,t){if(t===void 0&&(t=sp),!e)return;const{top:n,left:s,bottom:a,right:i}=t(e);MK(e)&&(a<=0||i<=0||n>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const cLe=[["x",["left","right"],iLe],["y",["top","bottom"],lLe]];class hE{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=pN(n),a=UK(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,l,o]of cLe)for(const c of l)Object.defineProperty(this,c,{get:()=>{const d=o(s),u=a[i]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class wx{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var a;(a=this.target)==null||a.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function dLe(e){const{EventTarget:t}=ea(e);return e instanceof t?e:np(e)}function rS(e,t){const n=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var Ra;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ra||(Ra={}));function d3(e){e.preventDefault()}function uLe(e){e.stopPropagation()}var sr;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(sr||(sr={}));const BK={start:[sr.Space,sr.Enter],cancel:[sr.Esc],end:[sr.Space,sr.Enter,sr.Tab]},hLe=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case sr.Right:return{...n,x:n.x+25};case sr.Left:return{...n,x:n.x-25};case sr.Down:return{...n,y:n.y+25};case sr.Up:return{...n,y:n.y-25}}};class fE{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new wx(np(n)),this.windowListeners=new wx(ea(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ra.Resize,this.handleCancel),this.windowListeners.add(Ra.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ra.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&oLe(s),n(Vi)}handleKeyDown(t){if(uE(t)){const{active:n,context:s,options:a}=this.props,{keyboardCodes:i=BK,coordinateGetter:l=hLe,scrollBehavior:o="smooth"}=a,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=s.current,u=d?{x:d.left,y:d.top}:Vi;this.referenceCoordinates||(this.referenceCoordinates=u);const h=l(t,{active:n,context:s.current,currentCoordinates:u});if(h){const f=Zg(h,u),m={x:0,y:0},{scrollableAncestors:g}=s.current;for(const x of g){const w=t.code,{isTop:j,isRight:y,isLeft:b,isBottom:p,maxScroll:N,minScroll:k}=LK(x),S=aLe(x),P={x:Math.min(w===sr.Right?S.right-S.width/2:S.right,Math.max(w===sr.Right?S.left:S.left+S.width/2,h.x)),y:Math.min(w===sr.Down?S.bottom-S.height/2:S.bottom,Math.max(w===sr.Down?S.top:S.top+S.height/2,h.y))},_=w===sr.Right&&!y||w===sr.Left&&!b,R=w===sr.Down&&!p||w===sr.Up&&!j;if(_&&P.x!==h.x){const O=x.scrollLeft+f.x,M=w===sr.Right&&O<=N.x||w===sr.Left&&O>=k.x;if(M&&!f.y){x.scrollTo({left:O,behavior:o});return}M?m.x=x.scrollLeft-O:m.x=w===sr.Right?x.scrollLeft-N.x:x.scrollLeft-k.x,m.x&&x.scrollBy({left:-m.x,behavior:o});break}else if(R&&P.y!==h.y){const O=x.scrollTop+f.y,M=w===sr.Down&&O<=N.y||w===sr.Up&&O>=k.y;if(M&&!f.x){x.scrollTo({top:O,behavior:o});return}M?m.y=x.scrollTop-O:m.y=w===sr.Down?x.scrollTop-N.y:x.scrollTop-k.y,m.y&&x.scrollBy({top:-m.y,behavior:o});break}}this.handleMove(t,Kh(Zg(h,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}fE.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:s=BK,onActivation:a}=t,{active:i}=n;const{code:l}=e.nativeEvent;if(s.start.includes(l)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function u3(e){return!!(e&&"distance"in e)}function h3(e){return!!(e&&"delay"in e)}class mE{constructor(t,n,s){var a;s===void 0&&(s=dLe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:l}=i;this.props=t,this.events=n,this.document=np(l),this.documentListeners=new wx(this.document),this.listeners=new wx(s),this.windowListeners=new wx(ea(l)),this.initialCoordinates=(a=XP(i))!=null?a:Vi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ra.Resize,this.handleCancel),this.windowListeners.add(Ra.DragStart,d3),this.windowListeners.add(Ra.VisibilityChange,this.handleCancel),this.windowListeners.add(Ra.ContextMenu,d3),this.documentListeners.add(Ra.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(h3(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(u3(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:a}=this.props;a(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ra.Click,uLe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ra.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:a,props:i}=this,{onMove:l,options:{activationConstraint:o}}=i;if(!a)return;const c=(n=XP(t))!=null?n:Vi,d=Zg(a,c);if(!s&&o){if(u3(o)){if(o.tolerance!=null&&rS(d,o.tolerance))return this.handleCancel();if(rS(d,o.distance))return this.handleStart()}if(h3(o)&&rS(d,o.tolerance))return this.handleCancel();this.handlePending(o,d);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===sr.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const fLe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class pE extends mE{constructor(t){const{event:n}=t,s=np(n.target);super(t,fLe,s)}}pE.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const mLe={move:{name:"mousemove"},end:{name:"mouseup"}};var QP;(function(e){e[e.RightClick=2]="RightClick"})(QP||(QP={}));class pLe extends mE{constructor(t){super(t,mLe,np(t.event.target))}}pLe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return n.button===QP.RightClick?!1:(s==null||s({event:n}),!0)}}];const nS={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class xLe extends mE{constructor(t){super(t,nS)}static setup(){return window.addEventListener(nS.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(nS.move.name,t)};function t(){}}}xLe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;const{touches:a}=n;return a.length>1?!1:(s==null||s({event:n}),!0)}}];var Nx;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Nx||(Nx={}));var Zj;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Zj||(Zj={}));function gLe(e){let{acceleration:t,activator:n=Nx.Pointer,canScroll:s,draggingRect:a,enabled:i,interval:l=5,order:o=Zj.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:h,threshold:f}=e;const m=yLe({delta:h,disabled:!i}),[g,x]=AFe(),w=v.useRef({x:0,y:0}),j=v.useRef({x:0,y:0}),y=v.useMemo(()=>{switch(n){case Nx.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Nx.DraggableRect:return a}},[n,a,c]),b=v.useRef(null),p=v.useCallback(()=>{const k=b.current;if(!k)return;const S=w.current.x*j.current.x,P=w.current.y*j.current.y;k.scrollBy(S,P)},[]),N=v.useMemo(()=>o===Zj.TreeOrder?[...d].reverse():d,[o,d]);v.useEffect(()=>{if(!i||!d.length||!y){x();return}for(const k of N){if((s==null?void 0:s(k))===!1)continue;const S=d.indexOf(k),P=u[S];if(!P)continue;const{direction:_,speed:R}=sLe(k,P,y,t,f);for(const O of["x","y"])m[O][_[O]]||(R[O]=0,_[O]=0);if(R.x>0||R.y>0){x(),b.current=k,g(p,l),w.current=R,j.current=_;return}}w.current={x:0,y:0},j.current={x:0,y:0},x()},[t,p,s,x,i,l,JSON.stringify(y),JSON.stringify(m),g,d,N,u,JSON.stringify(f)])}const vLe={x:{[Dn.Backward]:!1,[Dn.Forward]:!1},y:{[Dn.Backward]:!1,[Dn.Forward]:!1}};function yLe(e){let{delta:t,disabled:n}=e;const s=YP(t);return uy(a=>{if(n||!s||!a)return vLe;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[Dn.Backward]:a.x[Dn.Backward]||i.x===-1,[Dn.Forward]:a.x[Dn.Forward]||i.x===1},y:{[Dn.Backward]:a.y[Dn.Backward]||i.y===-1,[Dn.Forward]:a.y[Dn.Forward]||i.y===1}}},[n,t,s])}function bLe(e,t){const n=t!=null?e.get(t):void 0,s=n?n.node.current:null;return uy(a=>{var i;return t==null?null:(i=s??a)!=null?i:null},[s,t])}function jLe(e,t){return v.useMemo(()=>e.reduce((n,s)=>{const{sensor:a}=s,i=a.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,s)}));return[...n,...i]},[]),[e,t])}var Qg;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Qg||(Qg={}));var JP;(function(e){e.Optimized="optimized"})(JP||(JP={}));const f3=new Map;function wLe(e,t){let{dragging:n,dependencies:s,config:a}=t;const[i,l]=v.useState(null),{frequency:o,measure:c,strategy:d}=a,u=v.useRef(e),h=w(),f=Xg(h),m=v.useCallback(function(j){j===void 0&&(j=[]),!f.current&&l(y=>y===null?j:y.concat(j.filter(b=>!y.includes(b))))},[f]),g=v.useRef(null),x=uy(j=>{if(h&&!n)return f3;if(!j||j===f3||u.current!==e||i!=null){const y=new Map;for(let b of e){if(!b)continue;if(i&&i.length>0&&!i.includes(b.id)&&b.rect.current){y.set(b.id,b.rect.current);continue}const p=b.node.current,N=p?new hE(c(p),p):null;b.rect.current=N,N&&y.set(b.id,N)}return y}return j},[e,i,n,h,c]);return v.useEffect(()=>{u.current=e},[e]),v.useEffect(()=>{h||m()},[n,h]),v.useEffect(()=>{i&&i.length>0&&l(null)},[JSON.stringify(i)]),v.useEffect(()=>{h||typeof o!="number"||g.current!==null||(g.current=setTimeout(()=>{m(),g.current=null},o))},[o,h,m,...s]),{droppableRects:x,measureDroppableContainers:m,measuringScheduled:i!=null};function w(){switch(d){case Qg.Always:return!1;case Qg.BeforeDragging:return n;default:return!n}}}function zK(e,t){return uy(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function NLe(e,t){return zK(e,t)}function kLe(e){let{callback:t,disabled:n}=e;const s=dE(t),a=v.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,n]);return v.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function xN(e){let{callback:t,disabled:n}=e;const s=dE(t),a=v.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[n]);return v.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function SLe(e){return new hE(sp(e),e)}function m3(e,t,n){t===void 0&&(t=SLe);const[s,a]=v.useState(null);function i(){a(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??n)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const l=kLe({callback(c){if(e)for(const d of c){const{type:u,target:h}=d;if(u==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),o=xN({callback:i});return Rl(()=>{i(),e?(o==null||o.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),l==null||l.disconnect())},[e]),s}function CLe(e){const t=zK(e);return DK(e,t)}const p3=[];function PLe(e){const t=v.useRef(e),n=uy(s=>e?s&&s!==p3&&e&&t.current&&e.parentNode===t.current.parentNode?s:pN(e):p3,[e]);return v.useEffect(()=>{t.current=e},[e]),n}function _Le(e){const[t,n]=v.useState(null),s=v.useRef(e),a=v.useCallback(i=>{const l=tS(i.target);l&&n(o=>o?(o.set(l,ZP(l)),new Map(o)):null)},[]);return v.useEffect(()=>{const i=s.current;if(e!==i){l(i);const o=e.map(c=>{const d=tS(c);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,ZP(d)]):null}).filter(c=>c!=null);n(o.length?new Map(o):null),s.current=e}return()=>{l(e),l(i)};function l(o){o.forEach(c=>{const d=tS(c);d==null||d.removeEventListener("scroll",a)})}},[a,e]),v.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,l)=>Kh(i,l),Vi):UK(e):Vi,[e,t])}function x3(e,t){t===void 0&&(t=[]);const n=v.useRef(null);return v.useEffect(()=>{n.current=null},t),v.useEffect(()=>{const s=e!==Vi;s&&!n.current&&(n.current=e),!s&&n.current&&(n.current=null)},[e]),n.current?Zg(e,n.current):Vi}function ALe(e){v.useEffect(()=>{if(!mN)return;const t=e.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function TLe(e,t){return v.useMemo(()=>e.reduce((n,s)=>{let{eventName:a,handler:i}=s;return n[a]=l=>{i(l,t)},n},{}),[e,t])}function VK(e){return v.useMemo(()=>e?eLe(e):null,[e])}const g3=[];function ELe(e,t){t===void 0&&(t=sp);const[n]=e,s=VK(n?ea(n):null),[a,i]=v.useState(g3);function l(){i(()=>e.length?e.map(c=>FK(c)?s:new hE(t(c),c)):g3)}const o=xN({callback:l});return Rl(()=>{o==null||o.disconnect(),l(),e.forEach(c=>o==null?void 0:o.observe(c))},[e]),a}function OLe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return dy(t)?t:e}function RLe(e){let{measure:t}=e;const[n,s]=v.useState(null),a=v.useCallback(d=>{for(const{target:u}of d)if(dy(u)){s(h=>{const f=t(u);return h?{...h,width:f.width,height:f.height}:f});break}},[t]),i=xN({callback:a}),l=v.useCallback(d=>{const u=OLe(d);i==null||i.disconnect(),u&&(i==null||i.observe(u)),s(u?t(u):null)},[t,i]),[o,c]=Yj(l);return v.useMemo(()=>({nodeRef:o,rect:n,setRef:c}),[n,o,c])}const DLe=[{sensor:pE,options:{}},{sensor:fE,options:{}}],MLe={current:{}},z0={draggable:{measure:c3},droppable:{measure:c3,strategy:Qg.WhileDragging,frequency:JP.Optimized},dragOverlay:{measure:sp}};class kx extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const $Le={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new kx,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Xj},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:z0,measureDroppableContainers:Xj,windowRect:null,measuringScheduled:!1},ILe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Xj,draggableNodes:new Map,over:null,measureDroppableContainers:Xj},gN=v.createContext(ILe),qK=v.createContext($Le);function FLe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new kx}}}function LLe(e,t){switch(t.type){case Nn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Nn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Nn.DragEnd:case Nn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Nn.RegisterDroppable:{const{element:n}=t,{id:s}=n,a=new kx(e.droppable.containers);return a.set(s,n),{...e,droppable:{...e.droppable,containers:a}}}case Nn.SetDroppableDisabled:{const{id:n,key:s,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||s!==i.key)return e;const l=new kx(e.droppable.containers);return l.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:l}}}case Nn.UnregisterDroppable:{const{id:n,key:s}=t,a=e.droppable.containers.get(n);if(!a||s!==a.key)return e;const i=new kx(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function ULe(e){let{disabled:t}=e;const{active:n,activatorEvent:s,draggableNodes:a}=v.useContext(gN),i=YP(s),l=YP(n==null?void 0:n.id);return v.useEffect(()=>{if(!t&&!s&&i&&l!=null){if(!uE(i)||document.activeElement===i.target)return;const o=a.get(l);if(!o)return;const{activatorNode:c,node:d}=o;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const h=OFe(u);if(h){h.focus();break}}})}},[s,t,a,l,i]),null}function BLe(e,t){let{transform:n,...s}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...s}),n):n}function zLe(e){return v.useMemo(()=>({draggable:{...z0.draggable,...e==null?void 0:e.draggable},droppable:{...z0.droppable,...e==null?void 0:e.droppable},dragOverlay:{...z0.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function VLe(e){let{activeNode:t,measure:n,initialRect:s,config:a=!0}=e;const i=v.useRef(!1),{x:l,y:o}=typeof a=="boolean"?{x:a,y:a}:a;Rl(()=>{if(!l&&!o||!t){i.current=!1;return}if(i.current||!s)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const u=n(d),h=DK(u,s);if(l||(h.x=0),o||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const f=MK(d);f&&f.scrollBy({top:h.y,left:h.x})}},[t,l,o,s,n])}const WK=v.createContext({...Vi,scaleX:1,scaleY:1});var Jo;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Jo||(Jo={}));const HK=v.memo(function(t){var n,s,a,i;let{id:l,accessibility:o,autoScroll:c=!0,children:d,sensors:u=DLe,collisionDetection:h=KFe,measuring:f,modifiers:m,...g}=t;const x=v.useReducer(LLe,void 0,FLe),[w,j]=x,[y,b]=FFe(),[p,N]=v.useState(Jo.Uninitialized),k=p===Jo.Initialized,{draggable:{active:S,nodes:P,translate:_},droppable:{containers:R}}=w,O=S!=null?P.get(S):null,M=v.useRef({initial:null,translated:null}),A=v.useMemo(()=>{var Ft;return S!=null?{id:S,data:(Ft=O==null?void 0:O.data)!=null?Ft:MLe,rect:M}:null},[S,O]),T=v.useRef(null),[B,z]=v.useState(null),[U,E]=v.useState(null),$=Xg(g,Object.values(g)),G=hy("DndDescribedBy",l),oe=v.useMemo(()=>R.getEnabled(),[R]),ee=zLe(f),{droppableRects:ce,measureDroppableContainers:ye,measuringScheduled:je}=wLe(oe,{dragging:k,dependencies:[_.x,_.y],config:ee.droppable}),$e=bLe(P,S),ke=v.useMemo(()=>U?XP(U):null,[U]),be=Io(),pe=NLe($e,ee.draggable.measure);VLe({activeNode:S!=null?P.get(S):null,config:be.layoutShiftCompensation,initialRect:pe,measure:ee.draggable.measure});const le=m3($e,ee.draggable.measure,pe),Ie=m3($e?$e.parentElement:null),ae=v.useRef({activatorEvent:null,active:null,activeNode:$e,collisionRect:null,collisions:null,droppableRects:ce,draggableNodes:P,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),st=R.getNodeFor((n=ae.current.over)==null?void 0:n.id),K=RLe({measure:ee.dragOverlay.measure}),Me=(s=K.nodeRef.current)!=null?s:$e,de=k?(a=K.rect)!=null?a:le:null,Be=!!(K.nodeRef.current&&K.rect),qe=CLe(Be?null:le),Qe=VK(Me?ea(Me):null),wt=PLe(k?st??$e:null),rr=ELe(wt),V=BLe(m,{transform:{x:_.x-qe.x,y:_.y-qe.y,scaleX:1,scaleY:1},activatorEvent:U,active:A,activeNodeRect:le,containerNodeRect:Ie,draggingNodeRect:de,over:ae.current.over,overlayNodeRect:K.rect,scrollableAncestors:wt,scrollableAncestorRects:rr,windowRect:Qe}),I=ke?Kh(ke,_):null,J=_Le(wt),xe=x3(J),_e=x3(J,[le]),Ae=Kh(V,xe),Y=de?XFe(de,V):null,Se=A&&Y?h({active:A,collisionRect:Y,droppableRects:ce,droppableContainers:oe,pointerCoordinates:I}):null,te=RK(Se,"id"),[Te,Yt]=v.useState(null),Nr=Be?V:Kh(V,_e),Nt=GFe(Nr,(i=Te==null?void 0:Te.rect)!=null?i:null,le),pr=v.useRef(null),Ht=v.useCallback((Ft,na)=>{let{sensor:sa,options:Fo}=na;if(T.current==null)return;const Ca=P.get(T.current);if(!Ca)return;const aa=Ft.nativeEvent,Yi=new sa({active:T.current,activeNode:Ca,event:aa,options:Fo,context:ae,onAbort(Wn){if(!P.get(Wn))return;const{onDragAbort:Xi}=$.current,Fl={id:Wn};Xi==null||Xi(Fl),y({type:"onDragAbort",event:Fl})},onPending(Wn,Lo,Xi,Fl){if(!P.get(Wn))return;const{onDragPending:lp}=$.current,Uo={id:Wn,constraint:Lo,initialCoordinates:Xi,offset:Fl};lp==null||lp(Uo),y({type:"onDragPending",event:Uo})},onStart(Wn){const Lo=T.current;if(Lo==null)return;const Xi=P.get(Lo);if(!Xi)return;const{onDragStart:Fl}=$.current,ip={activatorEvent:aa,active:{id:Lo,data:Xi.data,rect:M}};La.unstable_batchedUpdates(()=>{Fl==null||Fl(ip),N(Jo.Initializing),j({type:Nn.DragStart,initialCoordinates:Wn,active:Lo}),y({type:"onDragStart",event:ip}),z(pr.current),E(aa)})},onMove(Wn){j({type:Nn.DragMove,coordinates:Wn})},onEnd:qu(Nn.DragEnd),onCancel:qu(Nn.DragCancel)});pr.current=Yi;function qu(Wn){return async function(){const{active:Xi,collisions:Fl,over:ip,scrollAdjustedTranslate:lp}=ae.current;let Uo=null;if(Xi&&lp){const{cancelDrop:op}=$.current;Uo={activatorEvent:aa,active:Xi,collisions:Fl,delta:lp,over:ip},Wn===Nn.DragEnd&&typeof op=="function"&&await Promise.resolve(op(Uo))&&(Wn=Nn.DragCancel)}T.current=null,La.unstable_batchedUpdates(()=>{j({type:Wn}),N(Jo.Uninitialized),Yt(null),z(null),E(null),pr.current=null;const op=Wn===Nn.DragEnd?"onDragEnd":"onDragCancel";if(Uo){const NN=$.current[op];NN==null||NN(Uo),y({type:op,event:Uo})}})}}},[P]),Sa=v.useCallback((Ft,na)=>(sa,Fo)=>{const Ca=sa.nativeEvent,aa=P.get(Fo);if(T.current!==null||!aa||Ca.dndKit||Ca.defaultPrevented)return;const Yi={active:aa};Ft(sa,na.options,Yi)===!0&&(Ca.dndKit={capturedBy:na.sensor},T.current=Fo,Ht(sa,na))},[P,Ht]),ra=jLe(u,Sa);ALe(u),Rl(()=>{le&&p===Jo.Initializing&&N(Jo.Initialized)},[le,p]),v.useEffect(()=>{const{onDragMove:Ft}=$.current,{active:na,activatorEvent:sa,collisions:Fo,over:Ca}=ae.current;if(!na||!sa)return;const aa={active:na,activatorEvent:sa,collisions:Fo,delta:{x:Ae.x,y:Ae.y},over:Ca};La.unstable_batchedUpdates(()=>{Ft==null||Ft(aa),y({type:"onDragMove",event:aa})})},[Ae.x,Ae.y]),v.useEffect(()=>{const{active:Ft,activatorEvent:na,collisions:sa,droppableContainers:Fo,scrollAdjustedTranslate:Ca}=ae.current;if(!Ft||T.current==null||!na||!Ca)return;const{onDragOver:aa}=$.current,Yi=Fo.get(te),qu=Yi&&Yi.rect.current?{id:Yi.id,rect:Yi.rect.current,data:Yi.data,disabled:Yi.disabled}:null,Wn={active:Ft,activatorEvent:na,collisions:sa,delta:{x:Ca.x,y:Ca.y},over:qu};La.unstable_batchedUpdates(()=>{Yt(qu),aa==null||aa(Wn),y({type:"onDragOver",event:Wn})})},[te]),Rl(()=>{ae.current={activatorEvent:U,active:A,activeNode:$e,collisionRect:Y,collisions:Se,droppableRects:ce,draggableNodes:P,draggingNode:Me,draggingNodeRect:de,droppableContainers:R,over:Te,scrollableAncestors:wt,scrollAdjustedTranslate:Ae},M.current={initial:de,translated:Y}},[A,$e,Se,Y,P,Me,de,ce,R,Te,wt,Ae]),gLe({...be,delta:_,draggingRect:Y,pointerCoordinates:I,scrollableAncestors:wt,scrollableAncestorRects:rr});const Vu=v.useMemo(()=>({active:A,activeNode:$e,activeNodeRect:le,activatorEvent:U,collisions:Se,containerNodeRect:Ie,dragOverlay:K,draggableNodes:P,droppableContainers:R,droppableRects:ce,over:Te,measureDroppableContainers:ye,scrollableAncestors:wt,scrollableAncestorRects:rr,measuringConfiguration:ee,measuringScheduled:je,windowRect:Qe}),[A,$e,le,U,Se,Ie,K,P,R,ce,Te,ye,wt,rr,ee,je,Qe]),ld=v.useMemo(()=>({activatorEvent:U,activators:ra,active:A,activeNodeRect:le,ariaDescribedById:{draggable:G},dispatch:j,draggableNodes:P,over:Te,measureDroppableContainers:ye}),[U,ra,A,le,j,G,P,Te,ye]);return X.createElement(TK.Provider,{value:b},X.createElement(gN.Provider,{value:ld},X.createElement(qK.Provider,{value:Vu},X.createElement(WK.Provider,{value:Nt},d)),X.createElement(ULe,{disabled:(o==null?void 0:o.restoreFocus)===!1})),X.createElement(BFe,{...o,hiddenTextDescribedById:G}));function Io(){const Ft=(B==null?void 0:B.autoScrollEnabled)===!1,na=typeof c=="object"?c.enabled===!1:c===!1,sa=k&&!Ft&&!na;return typeof c=="object"?{...c,enabled:sa}:{enabled:sa}}}),qLe=v.createContext(null),v3="button",WLe="Draggable";function HLe(e){let{id:t,data:n,disabled:s=!1,attributes:a}=e;const i=hy(WLe),{activators:l,activatorEvent:o,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:h,over:f}=v.useContext(gN),{role:m=v3,roleDescription:g="draggable",tabIndex:x=0}=a??{},w=(c==null?void 0:c.id)===t,j=v.useContext(w?WK:qLe),[y,b]=Yj(),[p,N]=Yj(),k=TLe(l,t),S=Xg(n);Rl(()=>(h.set(t,{id:t,key:i,node:y,activatorNode:p,data:S}),()=>{const _=h.get(t);_&&_.key===i&&h.delete(t)}),[h,t]);const P=v.useMemo(()=>({role:m,tabIndex:x,"aria-disabled":s,"aria-pressed":w&&m===v3?!0:void 0,"aria-roledescription":g,"aria-describedby":u.draggable}),[s,m,x,w,g,u.draggable]);return{active:c,activatorEvent:o,activeNodeRect:d,attributes:P,isDragging:w,listeners:s?void 0:k,node:y,over:f,setNodeRef:b,setActivatorNodeRef:N,transform:j}}function KLe(){return v.useContext(qK)}const GLe="Droppable",YLe={timeout:25};function XLe(e){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:a}=e;const i=hy(GLe),{active:l,dispatch:o,over:c,measureDroppableContainers:d}=v.useContext(gN),u=v.useRef({disabled:n}),h=v.useRef(!1),f=v.useRef(null),m=v.useRef(null),{disabled:g,updateMeasurementsFor:x,timeout:w}={...YLe,...a},j=Xg(x??s),y=v.useCallback(()=>{if(!h.current){h.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{d(Array.isArray(j.current)?j.current:[j.current]),m.current=null},w)},[w]),b=xN({callback:y,disabled:g||!l}),p=v.useCallback((P,_)=>{b&&(_&&(b.unobserve(_),h.current=!1),P&&b.observe(P))},[b]),[N,k]=Yj(p),S=Xg(t);return v.useEffect(()=>{!b||!N.current||(b.disconnect(),h.current=!1,b.observe(N.current))},[N,b]),v.useEffect(()=>(o({type:Nn.RegisterDroppable,element:{id:s,key:i,disabled:n,node:N,rect:f,data:S}}),()=>o({type:Nn.UnregisterDroppable,key:i,id:s})),[s]),v.useEffect(()=>{n!==u.current.disabled&&(o({type:Nn.SetDroppableDisabled,id:s,key:i,disabled:n}),u.current.disabled=n)},[s,i,n,o]),{active:l,rect:f,isOver:(c==null?void 0:c.id)===s,node:N,over:c,setNodeRef:k}}function vN(e,t,n){const s=e.slice();return s.splice(n<0?s.length+n:n,0,s.splice(t,1)[0]),s}function ZLe(e,t){return e.reduce((n,s,a)=>{const i=t.get(s);return i&&(n[a]=i),n},Array(e.length))}function i0(e){return e!==null&&e>=0}function QLe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function JLe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const KK=e=>{let{rects:t,activeIndex:n,overIndex:s,index:a}=e;const i=vN(t,s,n),l=t[a],o=i[a];return!o||!l?null:{x:o.left-l.left,y:o.top-l.top,scaleX:o.width/l.width,scaleY:o.height/l.height}},l0={scaleX:1,scaleY:1},GK=e=>{var t;let{activeIndex:n,activeNodeRect:s,index:a,rects:i,overIndex:l}=e;const o=(t=i[n])!=null?t:s;if(!o)return null;if(a===n){const d=i[l];return d?{x:0,y:n<l?d.top+d.height-(o.top+o.height):d.top-o.top,...l0}:null}const c=e6e(i,a,n);return a>n&&a<=l?{x:0,y:-o.height-c,...l0}:a<n&&a>=l?{x:0,y:o.height+c,...l0}:{x:0,y:0,...l0}};function e6e(e,t,n){const s=e[t],a=e[t-1],i=e[t+1];return s?n<t?a?s.top-(a.top+a.height):i?i.top-(s.top+s.height):0:i?i.top-(s.top+s.height):a?s.top-(a.top+a.height):0:0}const YK="Sortable",XK=X.createContext({activeIndex:-1,containerId:YK,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:KK,disabled:{draggable:!1,droppable:!1}});function ZK(e){let{children:t,id:n,items:s,strategy:a=KK,disabled:i=!1}=e;const{active:l,dragOverlay:o,droppableRects:c,over:d,measureDroppableContainers:u}=KLe(),h=hy(YK,n),f=o.rect!==null,m=v.useMemo(()=>s.map(k=>typeof k=="object"&&"id"in k?k.id:k),[s]),g=l!=null,x=l?m.indexOf(l.id):-1,w=d?m.indexOf(d.id):-1,j=v.useRef(m),y=!QLe(m,j.current),b=w!==-1&&x===-1||y,p=JLe(i);Rl(()=>{y&&g&&u(m)},[y,m,g,u]),v.useEffect(()=>{j.current=m},[m]);const N=v.useMemo(()=>({activeIndex:x,containerId:h,disabled:p,disableTransforms:b,items:m,overIndex:w,useDragOverlay:f,sortedRects:ZLe(m,c),strategy:a}),[x,h,p.draggable,p.droppable,b,m,w,c,f,a]);return X.createElement(XK.Provider,{value:N},t)}const t6e=e=>{let{id:t,items:n,activeIndex:s,overIndex:a}=e;return vN(n,s,a).indexOf(t)},r6e=e=>{let{containerId:t,isSorting:n,wasDragging:s,index:a,items:i,newIndex:l,previousItems:o,previousContainerId:c,transition:d}=e;return!d||!s||o!==i&&a===l?!1:n?!0:l!==a&&t===c},n6e={duration:200,easing:"ease"},QK="transform",s6e=Nm.Transition.toString({property:QK,duration:0,easing:"linear"}),a6e={roleDescription:"sortable"};function i6e(e){let{disabled:t,index:n,node:s,rect:a}=e;const[i,l]=v.useState(null),o=v.useRef(n);return Rl(()=>{if(!t&&n!==o.current&&s.current){const c=a.current;if(c){const d=sp(s.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&l(u)}}n!==o.current&&(o.current=n)},[t,n,s,a]),v.useEffect(()=>{i&&l(null)},[i]),i}function JK(e){let{animateLayoutChanges:t=r6e,attributes:n,disabled:s,data:a,getNewIndex:i=t6e,id:l,strategy:o,resizeObserverConfig:c,transition:d=n6e}=e;const{items:u,containerId:h,activeIndex:f,disabled:m,disableTransforms:g,sortedRects:x,overIndex:w,useDragOverlay:j,strategy:y}=v.useContext(XK),b=l6e(s,m),p=u.indexOf(l),N=v.useMemo(()=>({sortable:{containerId:h,index:p,items:u},...a}),[h,a,p,u]),k=v.useMemo(()=>u.slice(u.indexOf(l)),[u,l]),{rect:S,node:P,isOver:_,setNodeRef:R}=XLe({id:l,data:N,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:k,...c}}),{active:O,activatorEvent:M,activeNodeRect:A,attributes:T,setNodeRef:B,listeners:z,isDragging:U,over:E,setActivatorNodeRef:$,transform:G}=HLe({id:l,data:N,attributes:{...a6e,...n},disabled:b.draggable}),oe=_Fe(R,B),ee=!!O,ce=ee&&!g&&i0(f)&&i0(w),ye=!j&&U,je=ye&&ce?G:null,ke=ce?je??(o??y)({rects:x,activeNodeRect:A,activeIndex:f,overIndex:w,index:p}):null,be=i0(f)&&i0(w)?i({id:l,items:u,activeIndex:f,overIndex:w}):p,pe=O==null?void 0:O.id,le=v.useRef({activeId:pe,items:u,newIndex:be,containerId:h}),Ie=u!==le.current.items,ae=t({active:O,containerId:h,isDragging:U,isSorting:ee,id:l,index:p,items:u,newIndex:le.current.newIndex,previousItems:le.current.items,previousContainerId:le.current.containerId,transition:d,wasDragging:le.current.activeId!=null}),st=i6e({disabled:!ae,index:p,node:P,rect:S});return v.useEffect(()=>{ee&&le.current.newIndex!==be&&(le.current.newIndex=be),h!==le.current.containerId&&(le.current.containerId=h),u!==le.current.items&&(le.current.items=u)},[ee,be,h,u]),v.useEffect(()=>{if(pe===le.current.activeId)return;if(pe!=null&&le.current.activeId==null){le.current.activeId=pe;return}const Me=setTimeout(()=>{le.current.activeId=pe},50);return()=>clearTimeout(Me)},[pe]),{active:O,activeIndex:f,attributes:T,data:N,rect:S,index:p,newIndex:be,items:u,isOver:_,isSorting:ee,isDragging:U,listeners:z,node:P,overIndex:w,over:E,setNodeRef:oe,setActivatorNodeRef:$,setDroppableNodeRef:R,setDraggableNodeRef:B,transform:st??ke,transition:K()};function K(){if(st||Ie&&le.current.newIndex===p)return s6e;if(!(ye&&!uE(M)||!d)&&(ee||ae))return Nm.Transition.toString({...d,property:QK})}}function l6e(e,t){var n,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}function Qj(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const o6e=[sr.Down,sr.Right,sr.Up,sr.Left],c6e=(e,t)=>{let{context:{active:n,collisionRect:s,droppableRects:a,droppableContainers:i,over:l,scrollableAncestors:o}}=t;if(o6e.includes(e.code)){if(e.preventDefault(),!n||!s)return;const c=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const f=a.get(h.id);if(f)switch(e.code){case sr.Down:s.top<f.top&&c.push(h);break;case sr.Up:s.top>f.top&&c.push(h);break;case sr.Left:s.left>f.left&&c.push(h);break;case sr.Right:s.left<f.left&&c.push(h);break}});const d=WFe({active:n,collisionRect:s,droppableRects:a,droppableContainers:c,pointerCoordinates:null});let u=RK(d,"id");if(u===(l==null?void 0:l.id)&&d.length>1&&(u=d[1].id),u!=null){const h=i.get(n.id),f=i.get(u),m=f?a.get(f.id):null,g=f==null?void 0:f.node.current;if(g&&m&&h&&f){const w=pN(g).some((k,S)=>o[S]!==k),j=eG(h,f),y=d6e(h,f),b=w||!j?{x:0,y:0}:{x:y?s.width-m.width:0,y:y?s.height-m.height:0},p={x:m.left,y:m.top};return b.x&&b.y?p:Zg(p,b)}}}};function eG(e,t){return!Qj(e)||!Qj(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function d6e(e,t){return!Qj(e)||!Qj(t)||!eG(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const u6e={gambling:{label:"Гемблинг",className:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300",icon:FR},gaming:{label:"Игры",className:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300",icon:Yre},casino:{label:"Казино",className:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300",icon:FR},dating:{label:"Знакомства",className:"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-300",icon:BR},social:{label:"Социальные",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",icon:BR},finance:{label:"Финансы",className:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300",icon:cr},trading:{label:"Трейдинг",className:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-300",icon:cr},crypto:{label:"Криптовалюта",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",icon:cr},software:{label:"ПО",className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/20 dark:text-indigo-300",icon:Dt},vpn:{label:"VPN",className:"bg-slate-100 text-slate-800 dark:bg-slate-900/20 dark:text-slate-300",icon:Dt},antivirus:{label:"Антивирус",className:"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300",icon:Dt},ecommerce:{label:"E-commerce",className:"bg-teal-100 text-teal-800 dark:bg-teal-900/20 dark:text-teal-300",icon:V2},shopping:{label:"Покупки",className:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/20 dark:text-cyan-300",icon:V2},mobile:{label:"Мобильные",className:"bg-violet-100 text-violet-800 dark:bg-violet-900/20 dark:text-violet-300",icon:$i},app:{label:"Приложения",className:"bg-fuchsia-100 text-fuchsia-800 dark:bg-fuchsia-900/20 dark:text-fuchsia-300",icon:$i},automotive:{label:"Автомобили",className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300",icon:Mre},education:{label:"Образование",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",icon:Xre},realestate:{label:"Недвижимость",className:"bg-brown-100 text-brown-800 dark:bg-brown-900/20 dark:text-brown-300",icon:Ww},travel:{label:"Путешествия",className:"bg-sky-100 text-sky-800 dark:bg-sky-900/20 dark:text-sky-300",icon:cne},food:{label:"Еда",className:"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-300",icon:fne},entertainment:{label:"Развлечения",className:"bg-rose-100 text-rose-800 dark:bg-rose-900/20 dark:text-rose-300",icon:nne},photography:{label:"Фотография",className:"bg-lime-100 text-lime-800 dark:bg-lime-900/20 dark:text-lime-300",icon:Dre},business:{label:"Бизнес",className:"bg-neutral-100 text-neutral-800 dark:bg-neutral-900/20 dark:text-neutral-300",icon:Rre}};function tG(e){const t=e==null?void 0:e.toLowerCase();return u6e[t]||{label:e||"Другое",className:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300",icon:sne}}function V0(e){if(!e||e===""||e==="0"||e===0)return"0.00";const t=typeof e=="string"?parseFloat(e):e;return isNaN(t)?"0.00":(Math.ceil(t*100)/100).toFixed(2)}var y3=1,h6e=.9,f6e=.8,m6e=.17,sS=.1,aS=.999,p6e=.9999,x6e=.99,g6e=/[\\\/_+.#"@\[\(\{&]/,v6e=/[\\\/_+.#"@\[\(\{&]/g,y6e=/[\s-]/,rG=/[\s-]/g;function e_(e,t,n,s,a,i,l){if(i===t.length)return a===e.length?y3:x6e;var o=`${a},${i}`;if(l[o]!==void 0)return l[o];for(var c=s.charAt(i),d=n.indexOf(c,a),u=0,h,f,m,g;d>=0;)h=e_(e,t,n,s,d+1,i+1,l),h>u&&(d===a?h*=y3:g6e.test(e.charAt(d-1))?(h*=f6e,m=e.slice(a,d-1).match(v6e),m&&a>0&&(h*=Math.pow(aS,m.length))):y6e.test(e.charAt(d-1))?(h*=h6e,g=e.slice(a,d-1).match(rG),g&&a>0&&(h*=Math.pow(aS,g.length))):(h*=m6e,a>0&&(h*=Math.pow(aS,d-a))),e.charAt(d)!==t.charAt(i)&&(h*=p6e)),(h<sS&&n.charAt(d-1)===s.charAt(i+1)||s.charAt(i+1)===s.charAt(i)&&n.charAt(d-1)!==s.charAt(i))&&(f=e_(e,t,n,s,d+1,i+2,l),f*sS>h&&(h=f*sS)),h>u&&(u=h),d=n.indexOf(c,d+1);return l[o]=u,u}function b3(e){return e.toLowerCase().replace(rG," ")}function b6e(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,e_(e,t,b3(e),b3(t),0,0,{})}var Rp='[cmdk-group=""]',iS='[cmdk-group-items=""]',j6e='[cmdk-group-heading=""]',nG='[cmdk-item=""]',j3=`${nG}:not([aria-disabled="true"])`,t_="cmdk-item-select",lh="data-value",w6e=(e,t,n)=>b6e(e,t,n),sG=v.createContext(void 0),fy=()=>v.useContext(sG),aG=v.createContext(void 0),xE=()=>v.useContext(aG),iG=v.createContext(void 0),lG=v.forwardRef((e,t)=>{let n=oh(()=>{var ee,ce;return{search:"",value:(ce=(ee=e.value)!=null?ee:e.defaultValue)!=null?ce:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=oh(()=>new Set),a=oh(()=>new Map),i=oh(()=>new Map),l=oh(()=>new Set),o=oG(e),{label:c,children:d,value:u,onValueChange:h,filter:f,shouldFilter:m,loop:g,disablePointerSelection:x=!1,vimBindings:w=!0,...j}=e,y=Qn(),b=Qn(),p=Qn(),N=v.useRef(null),k=R6e();Eu(()=>{if(u!==void 0){let ee=u.trim();n.current.value=ee,S.emit()}},[u]),Eu(()=>{k(6,A)},[]);let S=v.useMemo(()=>({subscribe:ee=>(l.current.add(ee),()=>l.current.delete(ee)),snapshot:()=>n.current,setState:(ee,ce,ye)=>{var je,$e,ke,be;if(!Object.is(n.current[ee],ce)){if(n.current[ee]=ce,ee==="search")M(),R(),k(1,O);else if(ee==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let pe=document.getElementById(p);pe?pe.focus():(je=document.getElementById(y))==null||je.focus()}if(k(7,()=>{var pe;n.current.selectedItemId=(pe=T())==null?void 0:pe.id,S.emit()}),ye||k(5,A),(($e=o.current)==null?void 0:$e.value)!==void 0){let pe=ce??"";(be=(ke=o.current).onValueChange)==null||be.call(ke,pe);return}}S.emit()}},emit:()=>{l.current.forEach(ee=>ee())}}),[]),P=v.useMemo(()=>({value:(ee,ce,ye)=>{var je;ce!==((je=i.current.get(ee))==null?void 0:je.value)&&(i.current.set(ee,{value:ce,keywords:ye}),n.current.filtered.items.set(ee,_(ce,ye)),k(2,()=>{R(),S.emit()}))},item:(ee,ce)=>(s.current.add(ee),ce&&(a.current.has(ce)?a.current.get(ce).add(ee):a.current.set(ce,new Set([ee]))),k(3,()=>{M(),R(),n.current.value||O(),S.emit()}),()=>{i.current.delete(ee),s.current.delete(ee),n.current.filtered.items.delete(ee);let ye=T();k(4,()=>{M(),(ye==null?void 0:ye.getAttribute("id"))===ee&&O(),S.emit()})}),group:ee=>(a.current.has(ee)||a.current.set(ee,new Set),()=>{i.current.delete(ee),a.current.delete(ee)}),filter:()=>o.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:y,inputId:p,labelId:b,listInnerRef:N}),[]);function _(ee,ce){var ye,je;let $e=(je=(ye=o.current)==null?void 0:ye.filter)!=null?je:w6e;return ee?$e(ee,n.current.search,ce):0}function R(){if(!n.current.search||o.current.shouldFilter===!1)return;let ee=n.current.filtered.items,ce=[];n.current.filtered.groups.forEach(je=>{let $e=a.current.get(je),ke=0;$e.forEach(be=>{let pe=ee.get(be);ke=Math.max(pe,ke)}),ce.push([je,ke])});let ye=N.current;B().sort((je,$e)=>{var ke,be;let pe=je.getAttribute("id"),le=$e.getAttribute("id");return((ke=ee.get(le))!=null?ke:0)-((be=ee.get(pe))!=null?be:0)}).forEach(je=>{let $e=je.closest(iS);$e?$e.appendChild(je.parentElement===$e?je:je.closest(`${iS} > *`)):ye.appendChild(je.parentElement===ye?je:je.closest(`${iS} > *`))}),ce.sort((je,$e)=>$e[1]-je[1]).forEach(je=>{var $e;let ke=($e=N.current)==null?void 0:$e.querySelector(`${Rp}[${lh}="${encodeURIComponent(je[0])}"]`);ke==null||ke.parentElement.appendChild(ke)})}function O(){let ee=B().find(ye=>ye.getAttribute("aria-disabled")!=="true"),ce=ee==null?void 0:ee.getAttribute(lh);S.setState("value",ce||void 0)}function M(){var ee,ce,ye,je;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=s.current.size;return}n.current.filtered.groups=new Set;let $e=0;for(let ke of s.current){let be=(ce=(ee=i.current.get(ke))==null?void 0:ee.value)!=null?ce:"",pe=(je=(ye=i.current.get(ke))==null?void 0:ye.keywords)!=null?je:[],le=_(be,pe);n.current.filtered.items.set(ke,le),le>0&&$e++}for(let[ke,be]of a.current)for(let pe of be)if(n.current.filtered.items.get(pe)>0){n.current.filtered.groups.add(ke);break}n.current.filtered.count=$e}function A(){var ee,ce,ye;let je=T();je&&(((ee=je.parentElement)==null?void 0:ee.firstChild)===je&&((ye=(ce=je.closest(Rp))==null?void 0:ce.querySelector(j6e))==null||ye.scrollIntoView({block:"nearest"})),je.scrollIntoView({block:"nearest"}))}function T(){var ee;return(ee=N.current)==null?void 0:ee.querySelector(`${nG}[aria-selected="true"]`)}function B(){var ee;return Array.from(((ee=N.current)==null?void 0:ee.querySelectorAll(j3))||[])}function z(ee){let ce=B()[ee];ce&&S.setState("value",ce.getAttribute(lh))}function U(ee){var ce;let ye=T(),je=B(),$e=je.findIndex(be=>be===ye),ke=je[$e+ee];(ce=o.current)!=null&&ce.loop&&(ke=$e+ee<0?je[je.length-1]:$e+ee===je.length?je[0]:je[$e+ee]),ke&&S.setState("value",ke.getAttribute(lh))}function E(ee){let ce=T(),ye=ce==null?void 0:ce.closest(Rp),je;for(;ye&&!je;)ye=ee>0?E6e(ye,Rp):O6e(ye,Rp),je=ye==null?void 0:ye.querySelector(j3);je?S.setState("value",je.getAttribute(lh)):U(ee)}let $=()=>z(B().length-1),G=ee=>{ee.preventDefault(),ee.metaKey?$():ee.altKey?E(1):U(1)},oe=ee=>{ee.preventDefault(),ee.metaKey?z(0):ee.altKey?E(-1):U(-1)};return v.createElement(Xe.div,{ref:t,tabIndex:-1,...j,"cmdk-root":"",onKeyDown:ee=>{var ce;(ce=j.onKeyDown)==null||ce.call(j,ee);let ye=ee.nativeEvent.isComposing||ee.keyCode===229;if(!(ee.defaultPrevented||ye))switch(ee.key){case"n":case"j":{w&&ee.ctrlKey&&G(ee);break}case"ArrowDown":{G(ee);break}case"p":case"k":{w&&ee.ctrlKey&&oe(ee);break}case"ArrowUp":{oe(ee);break}case"Home":{ee.preventDefault(),z(0);break}case"End":{ee.preventDefault(),$();break}case"Enter":{ee.preventDefault();let je=T();if(je){let $e=new Event(t_);je.dispatchEvent($e)}}}}},v.createElement("label",{"cmdk-label":"",htmlFor:P.inputId,id:P.labelId,style:M6e},c),yN(e,ee=>v.createElement(aG.Provider,{value:S},v.createElement(sG.Provider,{value:P},ee))))}),N6e=v.forwardRef((e,t)=>{var n,s;let a=Qn(),i=v.useRef(null),l=v.useContext(iG),o=fy(),c=oG(e),d=(s=(n=c.current)==null?void 0:n.forceMount)!=null?s:l==null?void 0:l.forceMount;Eu(()=>{if(!d)return o.item(a,l==null?void 0:l.id)},[d]);let u=cG(a,i,[e.value,e.children,i],e.keywords),h=xE(),f=Hc(k=>k.value&&k.value===u.current),m=Hc(k=>d||o.filter()===!1?!0:k.search?k.filtered.items.get(a)>0:!0);v.useEffect(()=>{let k=i.current;if(!(!k||e.disabled))return k.addEventListener(t_,g),()=>k.removeEventListener(t_,g)},[m,e.onSelect,e.disabled]);function g(){var k,S;x(),(S=(k=c.current).onSelect)==null||S.call(k,u.current)}function x(){h.setState("value",u.current,!0)}if(!m)return null;let{disabled:w,value:j,onSelect:y,forceMount:b,keywords:p,...N}=e;return v.createElement(Xe.div,{ref:No(i,t),...N,id:a,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!f,"data-disabled":!!w,"data-selected":!!f,onPointerMove:w||o.getDisablePointerSelection()?void 0:x,onClick:w?void 0:g},e.children)}),k6e=v.forwardRef((e,t)=>{let{heading:n,children:s,forceMount:a,...i}=e,l=Qn(),o=v.useRef(null),c=v.useRef(null),d=Qn(),u=fy(),h=Hc(m=>a||u.filter()===!1?!0:m.search?m.filtered.groups.has(l):!0);Eu(()=>u.group(l),[]),cG(l,o,[e.value,e.heading,c]);let f=v.useMemo(()=>({id:l,forceMount:a}),[a]);return v.createElement(Xe.div,{ref:No(o,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&v.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},n),yN(e,m=>v.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?d:void 0},v.createElement(iG.Provider,{value:f},m))))}),S6e=v.forwardRef((e,t)=>{let{alwaysRender:n,...s}=e,a=v.useRef(null),i=Hc(l=>!l.search);return!n&&!i?null:v.createElement(Xe.div,{ref:No(a,t),...s,"cmdk-separator":"",role:"separator"})}),C6e=v.forwardRef((e,t)=>{let{onValueChange:n,...s}=e,a=e.value!=null,i=xE(),l=Hc(d=>d.search),o=Hc(d=>d.selectedItemId),c=fy();return v.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),v.createElement(Xe.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":o,id:c.inputId,type:"text",value:a?e.value:l,onChange:d=>{a||i.setState("search",d.target.value),n==null||n(d.target.value)}})}),P6e=v.forwardRef((e,t)=>{let{children:n,label:s="Suggestions",...a}=e,i=v.useRef(null),l=v.useRef(null),o=Hc(d=>d.selectedItemId),c=fy();return v.useEffect(()=>{if(l.current&&i.current){let d=l.current,u=i.current,h,f=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let m=d.offsetHeight;u.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return f.observe(d),()=>{cancelAnimationFrame(h),f.unobserve(d)}}},[]),v.createElement(Xe.div,{ref:No(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":s,id:c.listId},yN(e,d=>v.createElement("div",{ref:No(l,c.listInnerRef),"cmdk-list-sizer":""},d)))}),_6e=v.forwardRef((e,t)=>{let{open:n,onOpenChange:s,overlayClassName:a,contentClassName:i,container:l,...o}=e;return v.createElement(L4,{open:n,onOpenChange:s},v.createElement(U4,{container:l},v.createElement(iN,{"cmdk-overlay":"",className:a}),v.createElement(lN,{"aria-label":e.label,"cmdk-dialog":"",className:i},v.createElement(lG,{ref:t,...o}))))}),A6e=v.forwardRef((e,t)=>Hc(n=>n.filtered.count===0)?v.createElement(Xe.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),T6e=v.forwardRef((e,t)=>{let{progress:n,children:s,label:a="Loading...",...i}=e;return v.createElement(Xe.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},yN(e,l=>v.createElement("div",{"aria-hidden":!0},l)))}),ta=Object.assign(lG,{List:P6e,Item:N6e,Input:C6e,Group:k6e,Separator:S6e,Dialog:_6e,Empty:A6e,Loading:T6e});function E6e(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function O6e(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function oG(e){let t=v.useRef(e);return Eu(()=>{t.current=e}),t}var Eu=typeof window>"u"?v.useEffect:v.useLayoutEffect;function oh(e){let t=v.useRef();return t.current===void 0&&(t.current=e()),t}function Hc(e){let t=xE(),n=()=>e(t.snapshot());return v.useSyncExternalStore(t.subscribe,n,n)}function cG(e,t,n,s=[]){let a=v.useRef(),i=fy();return Eu(()=>{var l;let o=(()=>{var d;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=s.map(d=>d.trim());i.value(e,o,c),(l=t.current)==null||l.setAttribute(lh,o),a.current=o}),a}var R6e=()=>{let[e,t]=v.useState(),n=oh(()=>new Map);return Eu(()=>{n.current.forEach(s=>s()),n.current=new Map},[e]),(s,a)=>{n.current.set(s,a),t({})}};function D6e(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function yN({asChild:e,children:t},n){return e&&v.isValidElement(t)?v.cloneElement(D6e(t),{ref:t.ref},n(t.props.children)):n(t)}var M6e={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Jj=v.forwardRef(({className:e,...t},n)=>r.jsx(ta,{ref:n,className:Ee("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Jj.displayName=ta.displayName;const ew=v.forwardRef(({className:e,...t},n)=>r.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[r.jsx(Xr,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx(ta.Input,{ref:n,className:Ee("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));ew.displayName=ta.Input.displayName;const $6e=v.forwardRef(({className:e,...t},n)=>r.jsx(ta.List,{ref:n,className:Ee("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));$6e.displayName=ta.List.displayName;const tw=v.forwardRef((e,t)=>r.jsx(ta.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));tw.displayName=ta.Empty.displayName;const rw=v.forwardRef(({className:e,...t},n)=>r.jsx(ta.Group,{ref:n,className:Ee("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));rw.displayName=ta.Group.displayName;const I6e=v.forwardRef(({className:e,...t},n)=>r.jsx(ta.Separator,{ref:n,className:Ee("-mx-1 h-px bg-border",e),...t}));I6e.displayName=ta.Separator.displayName;const nw=v.forwardRef(({className:e,...t},n)=>r.jsx(ta.Item,{ref:n,className:Ee("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));nw.displayName=ta.Item.displayName;function F6e(e,t,n){const s=[];return e.forEach(a=>typeof a!="string"?s.push(a):t[Symbol.split](a).forEach((i,l,o)=>{i!==""&&s.push(i),l<o.length-1&&s.push(n)})),s}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function w3(e,t){const n=/\$/g,s="$$$$";let a=[e];if(t==null)return a;for(const i of Object.keys(t))if(i!=="_"){let l=t[i];typeof l=="string"&&(l=n[Symbol.replace](l,s)),a=F6e(a,new RegExp(`%\\{${i}\\}`,"g"),l)}return a}const L6e=e=>{throw new Error(`missing string: ${e}`)};var ov,cv,r_;class dG{constructor(t,{onMissingKey:n=L6e}={}){ve(this,cv);ge(this,"locale");ve(this,ov);this.locale={strings:{},pluralize(s){return s===1?0:1}},Array.isArray(t)?t.forEach(Pe(this,cv,r_),this):Pe(this,cv,r_).call(this,t),we(this,ov,n)}translate(t,n){return this.translateArray(t,n).join("")}translateArray(t,n){let s=this.locale.strings[t];if(s==null&&(L(this,ov).call(this,t),s=t),typeof s=="object"){if(n&&typeof n.smart_count<"u"){const i=this.locale.pluralize(n.smart_count);return w3(s[i],n)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof s!="string")throw new Error("string was not a string");return w3(s,n)}}ov=new WeakMap,cv=new WeakSet,r_=function(t){if(!(t!=null&&t.strings))return;const n=this.locale;Object.assign(this.locale,{strings:{...n.strings,...t.strings},pluralize:t.pluralize||n.pluralize})};class uG{constructor(t,n){ge(this,"uppy");ge(this,"opts");ge(this,"id");ge(this,"defaultLocale");ge(this,"i18n");ge(this,"i18nArray");ge(this,"type");ge(this,"VERSION");this.uppy=t,this.opts=n??{}}getPluginState(){const{plugins:t}=this.uppy.getState();return(t==null?void 0:t[this.id])||{}}setPluginState(t){const{plugins:n}=this.uppy.getState();this.uppy.setState({plugins:{...n,[this.id]:{...n[this.id],...t}}})}setOptions(t){this.opts={...this.opts,...t},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const t=new dG([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.setPluginState(void 0)}addTarget(t){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(t){}afterUpdate(){}}function lS(e){return e<10?`0${e}`:e.toString()}function q0(){const e=new Date,t=lS(e.getHours()),n=lS(e.getMinutes()),s=lS(e.getSeconds());return`${t}:${n}:${s}`}const U6e={debug:()=>{},warn:()=>{},error:(...e)=>console.error(`[Uppy] [${q0()}]`,...e)},B6e={debug:(...e)=>console.debug(`[Uppy] [${q0()}]`,...e),warn:(...e)=>console.warn(`[Uppy] [${q0()}]`,...e),error:(...e)=>console.error(`[Uppy] [${q0()}]`,...e)};function hG(e){return typeof e!="object"||e===null||!("nodeType"in e)?!1:e.nodeType===Node.ELEMENT_NODE}function z6e(e,t=document){return typeof e=="string"?t.querySelector(e):hG(e)?e:null}function fG(e){for(;e&&!e.dir;)e=e.parentNode;return e==null?void 0:e.dir}var my,zt,mG,Nd,N3,pG,xG,gG,gE,n_,s_,Jg={},vG=[],V6e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,py=Array.isArray;function yl(e,t){for(var n in t)e[n]=t[n];return e}function vE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ev(e,t,n){var s,a,i,l={};for(i in t)i=="key"?s=t[i]:i=="ref"?a=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?my.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)l[i]===void 0&&(l[i]=e.defaultProps[i]);return Sx(e,l,s,a,null)}function Sx(e,t,n,s,a){var i={type:e,props:t,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++mG,__i:-1,__u:0};return a==null&&zt.vnode!=null&&zt.vnode(i),i}function q6e(){return{current:null}}function Si(e){return e.children}function Gs(e,t){this.props=e,this.context=t}function km(e,t){if(t==null)return e.__?km(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?km(e):null}function yG(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return yG(e)}}function k3(e){(!e.__d&&(e.__d=!0)&&Nd.push(e)&&!sw.__r++||N3!=zt.debounceRendering)&&((N3=zt.debounceRendering)||pG)(sw)}function sw(){for(var e,t,n,s,a,i,l,o=1;Nd.length;)Nd.length>o&&Nd.sort(xG),e=Nd.shift(),o=Nd.length,e.__d&&(n=void 0,a=(s=(t=e).__v).__e,i=[],l=[],t.__P&&((n=yl({},s)).__v=s.__v+1,zt.vnode&&zt.vnode(n),yE(t.__P,n,s,t.__n,t.__P.namespaceURI,32&s.__u?[a]:null,i,a??km(s),!!(32&s.__u),l),n.__v=s.__v,n.__.__k[n.__i]=n,wG(i,n,l),n.__e!=a&&yG(n)));sw.__r=0}function bG(e,t,n,s,a,i,l,o,c,d,u){var h,f,m,g,x,w,j=s&&s.__k||vG,y=t.length;for(c=W6e(n,t,j,c,y),h=0;h<y;h++)(m=n.__k[h])!=null&&(f=m.__i==-1?Jg:j[m.__i]||Jg,m.__i=h,w=yE(e,m,f,a,i,l,o,c,d,u),g=m.__e,m.ref&&f.ref!=m.ref&&(f.ref&&bE(f.ref,null,m),u.push(m.ref,m.__c||g,m)),x==null&&g!=null&&(x=g),4&m.__u||f.__k===m.__k?c=jG(m,c,e):typeof m.type=="function"&&w!==void 0?c=w:g&&(c=g.nextSibling),m.__u&=-7);return n.__e=x,c}function W6e(e,t,n,s,a){var i,l,o,c,d,u=n.length,h=u,f=0;for(e.__k=new Array(a),i=0;i<a;i++)(l=t[i])!=null&&typeof l!="boolean"&&typeof l!="function"?(c=i+f,(l=e.__k[i]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?Sx(null,l,null,null,null):py(l)?Sx(Si,{children:l},null,null,null):l.constructor==null&&l.__b>0?Sx(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=e,l.__b=e.__b+1,o=null,(d=l.__i=H6e(l,n,c,h))!=-1&&(h--,(o=n[d])&&(o.__u|=2)),o==null||o.__v==null?(d==-1&&(a>u?f--:a<u&&f++),typeof l.type!="function"&&(l.__u|=4)):d!=c&&(d==c-1?f--:d==c+1?f++:(d>c?f--:f++,l.__u|=4))):e.__k[i]=null;if(h)for(i=0;i<u;i++)(o=n[i])!=null&&!(2&o.__u)&&(o.__e==s&&(s=km(o)),kG(o,o));return s}function jG(e,t,n){var s,a;if(typeof e.type=="function"){for(s=e.__k,a=0;s&&a<s.length;a++)s[a]&&(s[a].__=e,t=jG(s[a],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=km(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function yi(e,t){return t=t||[],e==null||typeof e=="boolean"||(py(e)?e.some(function(n){yi(n,t)}):t.push(e)),t}function H6e(e,t,n,s){var a,i,l,o=e.key,c=e.type,d=t[n],u=d!=null&&(2&d.__u)==0;if(d===null&&e.key==null||u&&o==d.key&&c==d.type)return n;if(s>(u?1:0)){for(a=n-1,i=n+1;a>=0||i<t.length;)if((d=t[l=a>=0?a--:i++])!=null&&!(2&d.__u)&&o==d.key&&c==d.type)return l}return-1}function S3(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||V6e.test(t)?n:n+"px"}function o0(e,t,n,s,a){var i,l;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(t in s)n&&t in n||S3(e.style,t,"");if(n)for(t in n)s&&n[t]==s[t]||S3(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(gG,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?s?n.u=s.u:(n.u=gE,e.addEventListener(t,i?s_:n_,i)):e.removeEventListener(t,i?s_:n_,i);else{if(a=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function C3(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=gE++;else if(t.t<n.u)return;return n(zt.event?zt.event(t):t)}}}function yE(e,t,n,s,a,i,l,o,c,d){var u,h,f,m,g,x,w,j,y,b,p,N,k,S,P,_,R,O=t.type;if(t.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),i=[o=t.__e=n.__e]),(u=zt.__b)&&u(t);e:if(typeof O=="function")try{if(j=t.props,y="prototype"in O&&O.prototype.render,b=(u=O.contextType)&&s[u.__c],p=u?b?b.props.value:u.__:s,n.__c?w=(h=t.__c=n.__c).__=h.__E:(y?t.__c=h=new O(j,p):(t.__c=h=new Gs(j,p),h.constructor=O,h.render=G6e),b&&b.sub(h),h.props=j,h.state||(h.state={}),h.context=p,h.__n=s,f=h.__d=!0,h.__h=[],h._sb=[]),y&&h.__s==null&&(h.__s=h.state),y&&O.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=yl({},h.__s)),yl(h.__s,O.getDerivedStateFromProps(j,h.__s))),m=h.props,g=h.state,h.__v=t,f)y&&O.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),y&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(y&&O.getDerivedStateFromProps==null&&j!==m&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(j,p),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(j,h.__s,p)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(h.props=j,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(M){M&&(M.__=t)}),N=0;N<h._sb.length;N++)h.__h.push(h._sb[N]);h._sb=[],h.__h.length&&l.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(j,h.__s,p),y&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(m,g,x)})}if(h.context=p,h.props=j,h.__P=e,h.__e=!1,k=zt.__r,S=0,y){for(h.state=h.__s,h.__d=!1,k&&k(t),u=h.render(h.props,h.state,h.context),P=0;P<h._sb.length;P++)h.__h.push(h._sb[P]);h._sb=[]}else do h.__d=!1,k&&k(t),u=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++S<25);h.state=h.__s,h.getChildContext!=null&&(s=yl(yl({},s),h.getChildContext())),y&&!f&&h.getSnapshotBeforeUpdate!=null&&(x=h.getSnapshotBeforeUpdate(m,g)),_=u,u!=null&&u.type===Si&&u.key==null&&(_=NG(u.props.children)),o=bG(e,py(_)?_:[_],t,n,s,a,i,l,o,c,d),h.base=t.__e,t.__u&=-161,h.__h.length&&l.push(h),w&&(h.__E=h.__=null)}catch(M){if(t.__v=null,c||i!=null)if(M.then){for(t.__u|=c?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;i[i.indexOf(o)]=null,t.__e=o}else{for(R=i.length;R--;)vE(i[R]);a_(t)}else t.__e=n.__e,t.__k=n.__k,M.then||a_(t);zt.__e(M,t,n)}else i==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):o=t.__e=K6e(n.__e,t,n,s,a,i,l,c,d);return(u=zt.diffed)&&u(t),128&t.__u?void 0:o}function a_(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(a_)}function wG(e,t,n){for(var s=0;s<n.length;s++)bE(n[s],n[++s],n[++s]);zt.__c&&zt.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){zt.__e(i,a.__v)}})}function NG(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:py(e)?e.map(NG):yl({},e)}function K6e(e,t,n,s,a,i,l,o,c){var d,u,h,f,m,g,x,w=n.props,j=t.props,y=t.type;if(y=="svg"?a="http://www.w3.org/2000/svg":y=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(d=0;d<i.length;d++)if((m=i[d])&&"setAttribute"in m==!!y&&(y?m.localName==y:m.nodeType==3)){e=m,i[d]=null;break}}if(e==null){if(y==null)return document.createTextNode(j);e=document.createElementNS(a,y,j.is&&j),o&&(zt.__m&&zt.__m(t,i),o=!1),i=null}if(y==null)w===j||o&&e.data==j||(e.data=j);else{if(i=i&&my.call(e.childNodes),w=n.props||Jg,!o&&i!=null)for(w={},d=0;d<e.attributes.length;d++)w[(m=e.attributes[d]).name]=m.value;for(d in w)if(m=w[d],d!="children"){if(d=="dangerouslySetInnerHTML")h=m;else if(!(d in j)){if(d=="value"&&"defaultValue"in j||d=="checked"&&"defaultChecked"in j)continue;o0(e,d,null,m,a)}}for(d in j)m=j[d],d=="children"?f=m:d=="dangerouslySetInnerHTML"?u=m:d=="value"?g=m:d=="checked"?x=m:o&&typeof m!="function"||w[d]===m||o0(e,d,m,w[d],a);if(u)o||h&&(u.__html==h.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(h&&(e.innerHTML=""),bG(t.type=="template"?e.content:e,py(f)?f:[f],t,n,s,y=="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,l,i?i[0]:n.__k&&km(n,0),o,c),i!=null)for(d=i.length;d--;)vE(i[d]);o||(d="value",y=="progress"&&g==null?e.removeAttribute("value"):g!=null&&(g!==e[d]||y=="progress"&&!g||y=="option"&&g!=w[d])&&o0(e,d,g,w[d],a),d="checked",x!=null&&x!=e[d]&&o0(e,d,x,w[d],a))}return e}function bE(e,t,n){try{if(typeof e=="function"){var s=typeof e.__u=="function";s&&e.__u(),s&&t==null||(e.__u=e(t))}else e.current=t}catch(a){zt.__e(a,n)}}function kG(e,t,n){var s,a;if(zt.unmount&&zt.unmount(e),(s=e.ref)&&(s.current&&s.current!=e.__e||bE(s,null,t)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(i){zt.__e(i,t)}s.base=s.__P=null}if(s=e.__k)for(a=0;a<s.length;a++)s[a]&&kG(s[a],t,n||typeof e.type!="function");n||vE(e.__e),e.__c=e.__=e.__e=void 0}function G6e(e,t,n){return this.constructor(e,n)}function Y6e(e,t,n){var s,a,i,l;t==document&&(t=document.documentElement),zt.__&&zt.__(e,t),a=(s=typeof n=="function")?null:t.__k,i=[],l=[],yE(t,e=(!s&&n||t).__k=ev(Si,null,[e]),a||Jg,Jg,t.namespaceURI,!s&&n?[n]:a?null:t.firstChild?my.call(t.childNodes):null,i,!s&&n?n:a?a.__e:t.firstChild,s,l),wG(i,e,l)}function SG(e,t,n){var s,a,i,l,o=yl({},e.props);for(i in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)i=="key"?s=t[i]:i=="ref"?a=t[i]:o[i]=t[i]===void 0&&l!=null?l[i]:t[i];return arguments.length>2&&(o.children=arguments.length>3?my.call(arguments,2):n),Sx(e.type,o,s||e.key,a||e.ref,null)}my=vG.slice,zt={__e:function(e,t,n,s){for(var a,i,l;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),l=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,s||{}),l=a.__d),l)return a.__E=a}catch(o){e=o}throw e}},mG=0,Gs.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=yl({},this.state),typeof e=="function"&&(e=e(yl({},n),this.props)),e&&yl(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),k3(this))},Gs.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),k3(this))},Gs.prototype.render=Si,Nd=[],pG=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,xG=function(e,t){return e.__v.__b-t.__v.__b},sw.__r=0,gG=/(PointerCapture)$|Capture$/i,gE=0,n_=C3(!1),s_=C3(!0);var tv,sn,oS,P3,rv=0,CG=[],hn=zt,_3=hn.__b,A3=hn.__r,T3=hn.diffed,E3=hn.__c,O3=hn.unmount,R3=hn.__;function jE(e,t){hn.__h&&hn.__h(sn,e,rv||t),rv=0;var n=sn.__H||(sn.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function aw(e){return rv=1,X6e(_G,e)}function X6e(e,t,n){var s=jE(tv++,2);if(s.t=e,!s.__c&&(s.__=[n?n(t):_G(void 0,t),function(o){var c=s.__N?s.__N[0]:s.__[0],d=s.t(c,o);c!==d&&(s.__N=[d,s.__[1]],s.__c.setState({}))}],s.__c=sn,!sn.__f)){var a=function(o,c,d){if(!s.__c.__H)return!0;var u=s.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!i||i.call(this,o,c,d);var h=s.__c.props!==o;return u.forEach(function(f){if(f.__N){var m=f.__[0];f.__=f.__N,f.__N=void 0,m!==f.__[0]&&(h=!0)}}),i&&i.call(this,o,c,d)||h};sn.__f=!0;var i=sn.shouldComponentUpdate,l=sn.componentWillUpdate;sn.componentWillUpdate=function(o,c,d){if(this.__e){var u=i;i=void 0,a(o,c,d),i=u}l&&l.call(this,o,c,d)},sn.shouldComponentUpdate=a}return s.__N||s.__}function i_(e,t){var n=jE(tv++,3);!hn.__s&&PG(n.__H,t)&&(n.__=e,n.u=t,sn.__H.__h.push(n))}function W0(e){return rv=5,wE(function(){return{current:e}},[])}function wE(e,t){var n=jE(tv++,7);return PG(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Z6e(e,t){return rv=8,wE(function(){return e},t)}function Q6e(){for(var e;e=CG.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(H0),e.__H.__h.forEach(l_),e.__H.__h=[]}catch(t){e.__H.__h=[],hn.__e(t,e.__v)}}hn.__b=function(e){sn=null,_3&&_3(e)},hn.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),R3&&R3(e,t)},hn.__r=function(e){A3&&A3(e),tv=0;var t=(sn=e.__c).__H;t&&(oS===sn?(t.__h=[],sn.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(H0),t.__h.forEach(l_),t.__h=[],tv=0)),oS=sn},hn.diffed=function(e){T3&&T3(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(CG.push(t)!==1&&P3===hn.requestAnimationFrame||((P3=hn.requestAnimationFrame)||J6e)(Q6e)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),oS=sn=null},hn.__c=function(e,t){t.some(function(n){try{n.__h.forEach(H0),n.__h=n.__h.filter(function(s){return!s.__||l_(s)})}catch(s){t.some(function(a){a.__h&&(a.__h=[])}),t=[],hn.__e(s,n.__v)}}),E3&&E3(e,t)},hn.unmount=function(e){O3&&O3(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{H0(s)}catch(a){t=a}}),n.__H=void 0,t&&hn.__e(t,n.__v))};var D3=typeof requestAnimationFrame=="function";function J6e(e){var t,n=function(){clearTimeout(s),D3&&cancelAnimationFrame(t),setTimeout(e)},s=setTimeout(n,35);D3&&(t=requestAnimationFrame(n))}function H0(e){var t=sn,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),sn=t}function l_(e){var t=sn;e.__c=e.__(),sn=t}function PG(e,t){return!e||e.length!==t.length||t.some(function(n,s){return n!==e[s]})}function _G(e,t){return typeof t=="function"?t(e):t}function e8e(e,t){for(var n in t)e[n]=t[n];return e}function M3(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var s in t)if(s!=="__source"&&e[s]!==t[s])return!0;return!1}function $3(e,t){this.props=e,this.context=t}($3.prototype=new Gs).isPureReactComponent=!0,$3.prototype.shouldComponentUpdate=function(e,t){return M3(this.props,e)||M3(this.state,t)};var I3=zt.__b;zt.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),I3&&I3(e)};var t8e=zt.__e;zt.__e=function(e,t,n,s){if(e.then){for(var a,i=t;i=i.__;)if((a=i.__c)&&a.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),a.__c(e,t)}t8e(e,t,n,s)};var F3=zt.unmount;function AG(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),e.__c.__H=null),(e=e8e({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(s){return AG(s,t,n)})),e}function TG(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(s){return TG(s,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function cS(){this.__u=0,this.o=null,this.__b=null}function EG(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function c0(){this.i=null,this.l=null}zt.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),F3&&F3(e)},(cS.prototype=new Gs).__c=function(e,t){var n=t.__c,s=this;s.o==null&&(s.o=[]),s.o.push(n);var a=EG(s.__v),i=!1,l=function(){i||(i=!0,n.__R=null,a?a(o):o())};n.__R=l;var o=function(){if(!--s.__u){if(s.state.__a){var c=s.state.__a;s.__v.__k[0]=TG(c,c.__c.__P,c.__c.__O)}var d;for(s.setState({__a:s.__b=null});d=s.o.pop();)d.forceUpdate()}};s.__u++||32&t.__u||s.setState({__a:s.__b=s.__v.__k[0]}),e.then(l,l)},cS.prototype.componentWillUnmount=function(){this.o=[]},cS.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=AG(this.__b,n,s.__O=s.__P)}this.__b=null}var a=t.__a&&ev(Si,null,e.fallback);return a&&(a.__u&=-33),[ev(Si,null,t.__a?null:e.children),a]};var L3=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(c0.prototype=new Gs).__a=function(e){var t=this,n=EG(t.__v),s=t.l.get(e);return s[0]++,function(a){var i=function(){t.props.revealOrder?(s.push(a),L3(t,e,s)):a()};n?n(i):i()}},c0.prototype.render=function(e){this.i=null,this.l=new Map;var t=yi(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},c0.prototype.componentDidUpdate=c0.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){L3(e,n,t)})};var r8e=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,n8e=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,s8e=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,a8e=/[A-Z0-9]/g,i8e=typeof document<"u",l8e=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function U3(e,t,n){return t.__k==null&&(t.textContent=""),Y6e(e,t),typeof n=="function"&&n(),e?e.__c:null}Gs.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Gs.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var B3=zt.event;function o8e(){}function c8e(){return this.cancelBubble}function d8e(){return this.defaultPrevented}zt.event=function(e){return B3&&(e=B3(e)),e.persist=o8e,e.isPropagationStopped=c8e,e.isDefaultPrevented=d8e,e.nativeEvent=e};var u8e={enumerable:!1,configurable:!0,get:function(){return this.class}},z3=zt.vnode;zt.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,s=t.type,a={},i=s.indexOf("-")===-1;for(var l in n){var o=n[l];if(!(l==="value"&&"defaultValue"in n&&o==null||i8e&&l==="children"&&s==="noscript"||l==="class"||l==="className")){var c=l.toLowerCase();l==="defaultValue"&&"value"in n&&n.value==null?l="value":l==="download"&&o===!0?o="":c==="translate"&&o==="no"?o=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?l="ondblclick":c!=="onchange"||s!=="input"&&s!=="textarea"||l8e(n.type)?c==="onfocus"?l="onfocusin":c==="onblur"?l="onfocusout":s8e.test(l)&&(l=c):c=l="oninput":i&&n8e.test(l)?l=l.replace(a8e,"-$&").toLowerCase():o===null&&(o=void 0),c==="oninput"&&a[l=c]&&(l="oninputCapture"),a[l]=o}}s=="select"&&a.multiple&&Array.isArray(a.value)&&(a.value=yi(n.children).forEach(function(d){d.props.selected=a.value.indexOf(d.props.value)!=-1})),s=="select"&&a.defaultValue!=null&&(a.value=yi(n.children).forEach(function(d){d.props.selected=a.multiple?a.defaultValue.indexOf(d.props.value)!=-1:a.defaultValue==d.props.value})),n.class&&!n.className?(a.class=n.class,Object.defineProperty(a,"className",u8e)):(n.className&&!n.class||n.class&&n.className)&&(a.class=a.className=n.className),t.props=a}(e),e.$$typeof=r8e,z3&&z3(e)};var V3=zt.__r;zt.__r=function(e){V3&&V3(e),e.__c};var q3=zt.diffed;zt.diffed=function(e){q3&&q3(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};function h8e(e){let t=null,n;return(...s)=>(n=s,t||(t=Promise.resolve().then(()=>(t=null,e(...n)))),t)}var dv;const dw=class dw extends uG{constructor(){super(...arguments);ve(this,dv);ge(this,"isTargetDOMEl");ge(this,"el");ge(this,"parent");ge(this,"title")}getTargetPlugin(n){let s;if(typeof(n==null?void 0:n.addTarget)=="function")s=n,s instanceof dw||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:s,UIPlugin:dw}}));else if(typeof n=="function"){const a=n;this.uppy.iteratePlugins(i=>{i instanceof a&&(s=i)})}return s}mount(n,s){const a=s.id,i=z6e(n);if(i){this.isTargetDOMEl=!0;const c=document.createElement("div");return c.classList.add("uppy-Root"),we(this,dv,h8e(d=>{this.uppy.getPlugin(this.id)&&(U3(this.render(d,c),c),this.afterUpdate())})),this.uppy.log(`Installing ${a} to a DOM element '${n}'`),this.opts.replaceTargetContent&&(i.innerHTML=""),U3(this.render(this.uppy.getState(),c),c),this.el=c,i.appendChild(c),c.dir=this.opts.direction||fG(c)||"ltr",this.onMount(),this.el}const l=this.getTargetPlugin(n);if(l)return this.uppy.log(`Installing ${a} to ${l.id}`),this.parent=l,this.el=l.addTarget(s),this.onMount(),this.el;this.uppy.log(`Not installing ${a}`);let o=`Invalid target option given to ${a}.`;throw typeof n=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(n,s){throw new Error("Extend the render method to add your plugin to a DOM element")}update(n){var s;this.el!=null&&((s=L(this,dv))==null||s.call(this,n))}unmount(){var n;this.isTargetDOMEl&&((n=this.el)==null||n.remove()),this.onUnmount()}onMount(){}onUnmount(){}};dv=new WeakMap;let Sm=dw;const f8e="@uppy/store-default",m8e="The default simple object-based store for Uppy.",p8e="4.3.2",x8e="MIT",g8e="lib/index.js",v8e="module",y8e={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},b8e=["file uploader","uppy","uppy-store"],j8e="https://uppy.io",w8e={url:"https://github.com/transloadit/uppy/issues"},N8e={jsdom:"^26.1.0",typescript:"^5.8.3",vitest:"^3.2.4"},k8e={type:"git",url:"git+https://github.com/transloadit/uppy.git"},S8e=["src","lib","dist","CHANGELOG.md"],C8e={name:f8e,description:m8e,version:p8e,license:x8e,main:g8e,type:v8e,scripts:y8e,keywords:b8e,homepage:j8e,bugs:w8e,devDependencies:N8e,repository:k8e,files:S8e};var of,uw,RG;class OG{constructor(){ve(this,uw);ge(this,"state",{});ve(this,of,new Set)}getState(){return this.state}setState(t){const n={...this.state},s={...this.state,...t};this.state=s,Pe(this,uw,RG).call(this,n,s,t)}subscribe(t){return L(this,of).add(t),()=>{L(this,of).delete(t)}}}of=new WeakMap,uw=new WeakSet,RG=function(...t){L(this,of).forEach(n=>{n(...t)})},ge(OG,"VERSION",C8e.version);function DG(e){const t=e.lastIndexOf(".");return t===-1||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}const W3={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function MG(e){var n;if(e.type)return e.type;const t=e.name?(n=DG(e.name).extension)==null?void 0:n.toLowerCase():null;return t&&t in W3?W3[t]:"application/octet-stream"}function P8e(e){return e.charCodeAt(0).toString(32)}function H3(e){let t="";return e.replace(/[^A-Z0-9]/gi,n=>(t+=`-${P8e(n)}`,"/"))+t}function _8e(e,t){let n=t||"uppy";return typeof e.name=="string"&&(n+=`-${H3(e.name.toLowerCase())}`),e.type!==void 0&&(n+=`-${e.type}`),e.meta&&typeof e.meta.relativePath=="string"&&(n+=`-${H3(e.meta.relativePath.toLowerCase())}`),e.data.size!==void 0&&(n+=`-${e.data.size}`),e.data.lastModified!==void 0&&(n+=`-${e.data.lastModified}`),n}function A8e(e){return!e.isRemote||!e.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(e.remote.provider)}function T8e(e,t){if(A8e(e))return e.id;const n=MG(e);return _8e({...e,type:n},t)}var E8e=function(){var t={},n=t._fns={};t.emit=function(l,o,c,d,u,h,f){var m=s(l);m.length&&a(l,m,[o,c,d,u,h,f])},t.on=function(l,o){n[l]||(n[l]=[]),n[l].push(o)},t.once=function(l,o){function c(){o.apply(this,arguments),t.off(l,c)}this.on(l,c)},t.off=function(l,o){var c=[];if(l&&o){var d=this._fns[l],u=0,h=d?d.length:0;for(u;u<h;u++)d[u]!==o&&c.push(d[u])}c.length?this._fns[l]=c:delete this._fns[l]};function s(i){var l=n[i]?n[i]:[],o=i.indexOf(":"),c=o===-1?[i]:[i.substring(0,o),i.substring(o+1)],d=Object.keys(n),u=0,h=d.length;for(u;u<h;u++){var f=d[u];if(f==="*"&&(l=l.concat(n[f])),c.length===2&&c[0]===f){l=l.concat(n[f]);break}}return l}function a(i,l,o){var c=0,d=l.length;for(c;c<d&&l[c];c++)l[c].event=i,l[c].apply(l[c],o)}return t};const O8e=er(E8e);let R8e="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",NE=(e=21)=>{let t="",n=e|0;for(;n--;)t+=R8e[Math.random()*64|0];return t};const D8e="@uppy/core",M8e="Core module for the extensible JavaScript file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Instagram, Dropbox, Google Drive, S3 and more :dog:",$8e="4.5.2",I8e="MIT",F8e="lib/index.js",L8e="dist/style.min.css",U8e="module",B8e=["*.css"],z8e={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},V8e=["file uploader","uppy","uppy-plugin"],q8e="https://uppy.io",W8e={url:"https://github.com/transloadit/uppy/issues"},H8e={type:"git",url:"git+https://github.com/transloadit/uppy.git"},K8e=["src","lib","dist","CHANGELOG.md"],G8e={"@transloadit/prettier-bytes":"^0.3.4","@uppy/store-default":"^4.3.2","@uppy/utils":"^6.2.2",lodash:"^4.17.21","mime-match":"^1.0.2","namespace-emitter":"^2.0.1",nanoid:"^5.0.9",preact:"^10.5.13"},Y8e={"@types/deep-freeze":"^0",cssnano:"^7.0.7","deep-freeze":"^0.0.1",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},X8e={name:D8e,description:M8e,version:$8e,license:I8e,main:F8e,style:L8e,type:U8e,sideEffects:B8e,scripts:z8e,keywords:V8e,homepage:q8e,bugs:W8e,repository:H8e,files:K8e,dependencies:G8e,devDependencies:Y8e};function Z8e(e,t){return t.name?t.name:e.split("/")[0]==="image"?`${e.split("/")[0]}.${e.split("/")[1]}`:"noname"}const Q8e={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var J8e=function(t){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected a number, got ${typeof t}`);const n=t<0;let s=Math.abs(t);if(n&&(s=-s),s===0)return"0 B";const a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.min(Math.floor(Math.log(s)/Math.log(1024)),a.length-1),l=Number(s/1024**i),o=a[i];return`${l>=10||l%1===0?Math.round(l):l.toFixed(1)} ${o}`};const Rd=er(J8e);function $G(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}$G.prototype.match=function(e){var t=!0,n=this.parts,s,a=n.length,i;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(i=(e||"").split(this.separator),s=0;t&&s<a;s++)n[s]!=="*"&&(s<i.length?t=n[s]===i[s]:t=!1);t=t&&i}else if(typeof e.splice=="function")for(t=[],s=e.length;s--;)this.match(e[s])&&(t[t.length]=e[s]);else if(typeof e=="object"){t={};for(var l in e)this.match(l)&&(t[l]=e[l])}return t};var eUe=function(e,t,n){var s=new $G(e,n||/[\/\.]/);return typeof t<"u"?s.match(t):s},tUe=eUe,rUe=/[\/\+\.]/,nUe=function(e,t){function n(s){var a=tUe(s,e,rUe);return a&&a.length>=2}return t?n(t.split(";")[0]):n};const sUe=er(nUe),aUe={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class pi extends Error{constructor(n,s){super(n);ge(this,"isUserFacing");ge(this,"file");ge(this,"isRestriction",!0);this.isUserFacing=(s==null?void 0:s.isUserFacing)??!0,s!=null&&s.file&&(this.file=s.file)}}class iUe{constructor(t,n){ge(this,"getI18n");ge(this,"getOpts");this.getI18n=n,this.getOpts=()=>{var a;const s=t();if(((a=s.restrictions)==null?void 0:a.allowedFileTypes)!=null&&!Array.isArray(s.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return s}}validateAggregateRestrictions(t,n){const{maxTotalFileSize:s,maxNumberOfFiles:a}=this.getOpts().restrictions;if(a&&t.filter(l=>!l.isGhost).length+n.length>a)throw new pi(`${this.getI18n()("youCanOnlyUploadX",{smart_count:a})}`);if(s){const i=[...t,...n].reduce((l,o)=>l+(o.size??0),0);if(i>s)throw new pi(this.getI18n()("aggregateExceedsSize",{sizeAllowed:Rd(s),size:Rd(i)}))}}validateSingleFile(t){const{maxFileSize:n,minFileSize:s,allowedFileTypes:a}=this.getOpts().restrictions;if(a&&!a.some(l=>l.includes("/")?t.type?sUe(t.type.replace(/;.*?$/,""),l):!1:l[0]==="."&&t.extension?t.extension.toLowerCase()===l.slice(1).toLowerCase():!1)){const l=a.join(", ");throw new pi(this.getI18n()("youCanOnlyUploadFileTypes",{types:l}),{file:t})}if(n&&t.size!=null&&t.size>n)throw new pi(this.getI18n()("exceedsSize",{size:Rd(n),file:t.name??this.getI18n()("unnamed")}),{file:t});if(s&&t.size!=null&&t.size<s)throw new pi(this.getI18n()("inferiorSize",{size:Rd(s)}),{file:t})}validate(t,n){n.forEach(s=>{this.validateSingleFile(s)}),this.validateAggregateRestrictions(t,n)}validateMinNumberOfFiles(t){const{minNumberOfFiles:n}=this.getOpts().restrictions;if(n&&Object.keys(t).length<n)throw new pi(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:n}))}getMissingRequiredMetaFields(t){const n=new pi(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:t.name??this.getI18n()("unnamed")})),{requiredMetaFields:s}=this.getOpts().restrictions,a=[];for(const i of s)(!Object.hasOwn(t.meta,i)||t.meta[i]==="")&&a.push(i);return{missingFields:a,error:n}}}function lUe(e){if(e==null&&typeof navigator<"u"&&(e=navigator.userAgent),!e)return!0;const t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;const s=t[1].split(".",2),a=parseInt(s[0],10),i=parseInt(s[1],10);return a<15||a===15&&i<15063||a>18||a===18&&i>=18218}const d0={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var ii,li,uv,Bd,cf,df,zd,ht,bd,c_,IG,d_,FG,u_,h_,f_,m_,hw,p_,Vd,LG,UG,fc,hv,Gp,BG,K0,Yp;const fw=class fw{constructor(t){ve(this,ht);ve(this,ii,Object.create(null));ve(this,li);ve(this,uv);ve(this,Bd,O8e());ve(this,cf,new Set);ve(this,df,new Set);ve(this,zd,new Set);ge(this,"defaultLocale");ge(this,"locale");ge(this,"opts");ge(this,"store");ge(this,"i18n");ge(this,"i18nArray");ge(this,"scheduledAutoProceed",null);ge(this,"wasOffline",!1);ve(this,hw,(t,n)=>{const s=t?this.getFile(t.id):void 0;if(t==null||!s){this.log(`Not setting progress for a file that has been removed: ${t==null?void 0:t.id}`);return}if(s.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${t.id}`);return}const a={bytesTotal:n.bytesTotal,percentage:n.bytesTotal!=null&&Number.isFinite(n.bytesTotal)&&n.bytesTotal>0?Math.round(n.bytesUploaded/n.bytesTotal*100):void 0};s.progress.uploadStarted!=null?this.setFileState(t.id,{progress:{...s.progress,...a,bytesUploaded:n.bytesUploaded}}):this.setFileState(t.id,{progress:{...s.progress,...a}}),L(this,Vd).call(this)});ve(this,Vd,ZT(()=>Pe(this,ht,p_).call(this),500,{leading:!0,trailing:!0}));ve(this,fc,this.updateOnlineStatus.bind(this));ve(this,hv,new Map);this.defaultLocale=Q8e;const n={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:aUe,meta:{},onBeforeFileAdded:(a,i)=>!Object.hasOwn(i,a.id),onBeforeUpload:a=>a,store:new OG,logger:U6e,infoTimeout:5e3},s={...n,...t};this.opts={...s,restrictions:{...n.restrictions,...t==null?void 0:t.restrictions}},t!=null&&t.logger&&t.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):t!=null&&t.debug&&(this.opts.logger=B6e),this.log(`Using Core v${fw.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...d0,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:lUe(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),we(this,li,new iUe(()=>this.opts,()=>this.i18n)),we(this,uv,this.store.subscribe((a,i,l)=>{this.emit("state-update",a,i,l),this.updateAll(i)})),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),Pe(this,ht,UG).call(this)}emit(t,...n){L(this,Bd).emit(t,...n)}on(t,n){return L(this,Bd).on(t,n),this}once(t,n){return L(this,Bd).once(t,n),this}off(t,n){return L(this,Bd).off(t,n),this}updateAll(t){this.iteratePlugins(n=>{n.update(t)})}setState(t){this.store.setState(t)}getState(){return this.store.getState()}patchFilesState(t){const n=this.getState().files;this.setState({files:{...n,...Object.fromEntries(Object.entries(t).map(([s,a])=>[s,{...n[s],...a}]))}})}setFileState(t,n){if(!this.getState().files[t])throw new Error(`Can’t set state for ${t} (the file could have been removed)`);this.patchFilesState({[t]:n})}i18nInit(){const t=s=>this.log(`Missing i18n string: ${s}`,"error"),n=new dG([this.defaultLocale,this.opts.locale],{onMissingKey:t});this.i18n=n.translate.bind(n),this.i18nArray=n.translateArray.bind(n),this.locale=n.locale}setOptions(t){this.opts={...this.opts,...t,restrictions:{...this.opts.restrictions,...t==null?void 0:t.restrictions}},t.meta&&this.setMeta(t.meta),this.i18nInit(),t.locale&&this.iteratePlugins(n=>{n.setOptions(t)}),this.setState(void 0)}resetProgress(){const t={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},n={...this.getState().files},s=Object.create(null);Object.keys(n).forEach(a=>{s[a]={...n[a],progress:{...n[a].progress,...t},tus:void 0,transloadit:void 0}}),this.setState({files:s,...d0})}clear(){const{capabilities:t,currentUploads:n}=this.getState();if(Object.keys(n).length>0&&!t.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...d0,files:{}})}addPreProcessor(t){L(this,cf).add(t)}removePreProcessor(t){return L(this,cf).delete(t)}addPostProcessor(t){L(this,zd).add(t)}removePostProcessor(t){return L(this,zd).delete(t)}addUploader(t){L(this,df).add(t)}removeUploader(t){return L(this,df).delete(t)}setMeta(t){const n={...this.getState().meta,...t},s={...this.getState().files};Object.keys(s).forEach(a=>{s[a]={...s[a],meta:{...s[a].meta,...t}}}),this.log("Adding metadata:"),this.log(t),this.setState({meta:n,files:s})}setFileMeta(t,n){const s={...this.getState().files};if(!s[t]){this.log(`Was trying to set metadata for a file that has been removed: ${t}`);return}const a={...s[t].meta,...n};s[t]={...s[t],meta:a},this.setState({files:s})}getFile(t){return this.getState().files[t]}getFiles(){const{files:t}=this.getState();return Object.values(t)}getFilesByIds(t){return t.map(n=>this.getFile(n))}getObjectOfFilesPerState(){const{files:t,totalProgress:n,error:s}=this.getState(),a=Object.values(t),i=[],l=[],o=[],c=[],d=[],u=[],h=[],f=[],m=[];for(const g of a){const{progress:x}=g;!x.uploadComplete&&x.uploadStarted&&(i.push(g),g.isPaused||f.push(g)),x.uploadStarted||l.push(g),(x.uploadStarted||x.preprocess||x.postprocess)&&o.push(g),x.uploadStarted&&c.push(g),g.isPaused&&d.push(g),x.uploadComplete&&u.push(g),g.error&&h.push(g),(x.preprocess||x.postprocess)&&m.push(g)}return{newFiles:l,startedFiles:o,uploadStartedFiles:c,pausedFiles:d,completeFiles:u,erroredFiles:h,inProgressFiles:i,inProgressNotPausedFiles:f,processingFiles:m,isUploadStarted:c.length>0,isAllComplete:n===100&&u.length===a.length&&m.length===0,isAllErrored:!!s&&h.length===a.length,isAllPaused:i.length!==0&&d.length===i.length,isUploadInProgress:i.length>0,isSomeGhost:a.some(g=>g.isGhost)}}validateRestrictions(t,n=this.getFiles()){try{L(this,li).validate(n,[t])}catch(s){return s}return null}validateSingleFile(t){try{L(this,li).validateSingleFile(t)}catch(n){return n.message}return null}validateAggregateRestrictions(t){const n=this.getFiles();try{L(this,li).validateAggregateRestrictions(n,t)}catch(s){return s.message}return null}checkIfFileAlreadyExists(t){const{files:n}=this.getState();return!!(n[t]&&!n[t].isGhost)}addFile(t){Pe(this,ht,d_).call(this,t);const{nextFilesState:n,validFilesToAdd:s,errors:a}=Pe(this,ht,h_).call(this,[t]),i=a.filter(o=>o.isRestriction);if(Pe(this,ht,bd).call(this,i),a.length>0)throw a[0];this.setState({files:n});const[l]=s;return this.emit("file-added",l),this.emit("files-added",s),this.log(`Added file: ${l.name}, ${l.id}, mime type: ${l.type}`),Pe(this,ht,u_).call(this),l.id}addFiles(t){Pe(this,ht,d_).call(this);const{nextFilesState:n,validFilesToAdd:s,errors:a}=Pe(this,ht,h_).call(this,t),i=a.filter(o=>o.isRestriction);Pe(this,ht,bd).call(this,i);const l=a.filter(o=>!o.isRestriction);if(l.length>0){let o=`Multiple errors occurred while adding files:
`;if(l.forEach(c=>{o+=`
 * ${c.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:l.length}),details:o},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(l,o);{const c=new Error(o);throw c.errors=l,c}}this.setState({files:n}),s.forEach(o=>{this.emit("file-added",o)}),this.emit("files-added",s),s.length>5?this.log(`Added batch of ${s.length} files`):Object.values(s).forEach(o=>{this.log(`Added file: ${o.name}
 id: ${o.id}
 type: ${o.type}`)}),s.length>0&&Pe(this,ht,u_).call(this)}removeFiles(t){const{files:n,currentUploads:s}=this.getState(),a={...n},i={...s},l=Object.create(null);t.forEach(u=>{n[u]&&(l[u]=n[u],delete a[u])});function o(u){return l[u]===void 0}Object.keys(i).forEach(u=>{const h=s[u].fileIDs.filter(o);if(h.length===0){delete i[u];return}const{capabilities:f}=this.getState();if(h.length!==s[u].fileIDs.length&&!f.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");i[u]={...s[u],fileIDs:h}});const c={currentUploads:i,files:a};Object.keys(a).length===0&&(c.allowNewUpload=!0,c.error=null,c.recoveredState=null),this.setState(c),L(this,Vd).call(this);const d=Object.keys(l);d.forEach(u=>{this.emit("file-removed",l[u])}),d.length>5?this.log(`Removed ${d.length} files`):this.log(`Removed files: ${d.join(", ")}`)}removeFile(t){this.removeFiles([t])}pauseResume(t){if(!this.getState().capabilities.resumableUploads||this.getFile(t).progress.uploadComplete)return;const n=this.getFile(t),a=!(n.isPaused||!1);return this.setFileState(t,{isPaused:a}),this.emit("upload-pause",n,a),a}pauseAll(){const t={...this.getState().files};Object.keys(t).filter(s=>!t[s].progress.uploadComplete&&t[s].progress.uploadStarted).forEach(s=>{const a={...t[s],isPaused:!0};t[s]=a}),this.setState({files:t}),this.emit("pause-all")}resumeAll(){const t={...this.getState().files};Object.keys(t).filter(s=>!t[s].progress.uploadComplete&&t[s].progress.uploadStarted).forEach(s=>{const a={...t[s],isPaused:!1,error:null};t[s]=a}),this.setState({files:t}),this.emit("resume-all")}async retryAll(){const t=await Pe(this,ht,m_).call(this);return this.emit("complete",t),t}cancelAll(){this.emit("cancel-all");const{files:t}=this.getState(),n=Object.keys(t);n.length&&this.removeFiles(n),this.setState(d0)}retryUpload(t){this.setFileState(t,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(t));const n=Pe(this,ht,Gp).call(this,[t],{forceAllowNewUpload:!0});return Pe(this,ht,Yp).call(this,n)}logout(){this.iteratePlugins(t=>{var n,s;(s=(n=t.provider)==null?void 0:n.logout)==null||s.call(n)})}[Symbol.for("uppy test: updateTotalProgress")](){return Pe(this,ht,p_).call(this)}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(t,...n){if(typeof t!="function"){const l=`Expected a plugin class, but got ${t===null?"null":typeof t}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(l)}const s=new t(this,...n),a=s.id;if(!a)throw new Error("Your plugin must have an id");if(!s.type)throw new Error("Your plugin must have a type");const i=this.getPlugin(a);if(i){const l=`Already found a plugin named '${i.id}'. Tried to use: '${a}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(l)}return t.VERSION&&this.log(`Using ${a} v${t.VERSION}`),s.type in L(this,ii)?L(this,ii)[s.type].push(s):L(this,ii)[s.type]=[s],s.install(),this.emit("plugin-added",s),this}getPlugin(t){for(const n of Object.values(L(this,ii))){const s=n.find(a=>a.id===t);if(s!=null)return s}}[Symbol.for("uppy test: getPlugins")](t){return L(this,ii)[t]}iteratePlugins(t){Object.values(L(this,ii)).flat(1).forEach(t)}removePlugin(t){this.log(`Removing plugin ${t.id}`),this.emit("plugin-remove",t),t.uninstall&&t.uninstall();const n=L(this,ii)[t.type],s=n.findIndex(l=>l.id===t.id);s!==-1&&n.splice(s,1);const i={plugins:{...this.getState().plugins,[t.id]:void 0}};this.setState(i)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),L(this,uv).call(this),this.iteratePlugins(t=>{this.removePlugin(t)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",L(this,fc)),window.removeEventListener("offline",L(this,fc)))}hideInfo(){const{info:t}=this.getState();this.setState({info:t.slice(1)}),this.emit("info-hidden")}info(t,n="info",s=3e3){const a=typeof t=="object";this.setState({info:[...this.getState().info,{type:n,message:a?t.message:t,details:a?t.details:null}]}),setTimeout(()=>this.hideInfo(),s),this.emit("info-visible")}log(t,n){const{logger:s}=this.opts;switch(n){case"error":s.error(t);break;case"warning":s.warn(t);break;default:s.debug(t);break}}registerRequestClient(t,n){L(this,hv).set(t,n)}getRequestClientForFile(t){if(!t.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${t.id}`);const n=L(this,hv).get(t.remote.requestClientId);if(n==null)throw new Error(`requestClientId "${t.remote.requestClientId}" not registered for file "${t.id}"`);return n}restore(t){return this.log(`Core: attempting to restore upload "${t}"`),this.getState().currentUploads[t]?Pe(this,ht,Yp).call(this,t):(Pe(this,ht,K0).call(this,t),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](...t){return Pe(this,ht,Gp).call(this,...t)}addResultData(t,n){if(!Pe(this,ht,BG).call(this,t)){this.log(`Not setting result for an upload that has been removed: ${t}`);return}const{currentUploads:s}=this.getState(),a={...s[t],result:{...s[t].result,...n}};this.setState({currentUploads:{...s,[t]:a}})}async upload(){var a;(a=L(this,ii).uploader)!=null&&a.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();if(Pe(this,ht,f_).call(this).length>0){const i=await Pe(this,ht,m_).call(this);if(!(this.getFiles().filter(o=>o.progress.uploadStarted==null).length>0))return this.emit("complete",i),i;({files:t}=this.getState())}const s=this.opts.onBeforeUpload(t);return s===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(s&&typeof s=="object"&&(t=s,this.setState({files:t})),Promise.resolve().then(()=>L(this,li).validateMinNumberOfFiles(t)).catch(i=>{throw Pe(this,ht,bd).call(this,[i]),i}).then(()=>{if(!Pe(this,ht,IG).call(this,t))throw new pi(this.i18n("missingRequiredMetaField"))}).catch(i=>{throw i}).then(async()=>{const{currentUploads:i}=this.getState(),l=Object.values(i).flatMap(u=>u.fileIDs),o=[];Object.keys(t).forEach(u=>{const h=this.getFile(u);!h.progress.uploadStarted&&l.indexOf(u)===-1&&o.push(h.id)});const c=Pe(this,ht,Gp).call(this,o),d=await Pe(this,ht,Yp).call(this,c);return this.emit("complete",d),d}).catch(i=>{throw this.emit("error",i),this.log(i,"error"),i}))}};ii=new WeakMap,li=new WeakMap,uv=new WeakMap,Bd=new WeakMap,cf=new WeakMap,df=new WeakMap,zd=new WeakMap,ht=new WeakSet,bd=function(t){for(const l of t)l.isRestriction?this.emit("restriction-failed",l.file,l):this.emit("error",l,l.file),this.log(l,"warning");const n=t.filter(l=>l.isUserFacing),s=4,a=n.slice(0,s),i=n.slice(s);a.forEach(({message:l,details:o=""})=>{this.info({message:l,details:o},"error",this.opts.infoTimeout)}),i.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:i.length})})},c_=function(t){const{missingFields:n,error:s}=L(this,li).getMissingRequiredMetaFields(t);return n.length>0?(this.setFileState(t.id,{missingRequiredMetaFields:n}),this.log(s.message),this.emit("restriction-failed",t,s),!1):(n.length===0&&t.missingRequiredMetaFields&&this.setFileState(t.id,{missingRequiredMetaFields:[]}),!0)},IG=function(t){let n=!0;for(const s of Object.values(t))Pe(this,ht,c_).call(this,s)||(n=!1);return n},d_=function(t){const{allowNewUpload:n}=this.getState();if(n===!1){const s=new pi(this.i18n("noMoreFilesAllowed"),{file:t});throw Pe(this,ht,bd).call(this,[s]),s}},FG=function(t){const n=t instanceof File?{name:t.name,type:t.type,size:t.size,data:t}:t,s=MG(n),a=Z8e(s,n),i=DG(a).extension,l=T8e(n,this.getID()),o=n.meta||{};o.name=a,o.type=s;const c=Number.isFinite(n.data.size)?n.data.size:null;return{source:n.source||"",id:l,name:a,extension:i||"",meta:{...this.getState().meta,...o},type:s,data:n.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:c,uploadComplete:!1,uploadStarted:null},size:c,isGhost:!1,isRemote:n.isRemote||!1,remote:n.remote,preview:n.preview}},u_=function(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(t=>{t.isRestriction||this.log(t.stack||t.message||t)})},4))},h_=function(t){var l;let{files:n}=this.getState(),s={...n};const a=[],i=[];for(const o of t)try{let c=Pe(this,ht,FG).call(this,o);const d=(l=n[c.id])==null?void 0:l.isGhost;d&&(c={...n[c.id],isGhost:!1,data:o.data},this.log(`Replaced the blob in the restored ghost file: ${c.name}, ${c.id}`));const u=this.opts.onBeforeFileAdded(c,s);if(n=this.getState().files,s={...n,...s},!u&&this.checkIfFileAlreadyExists(c.id))throw new pi(this.i18n("noDuplicates",{fileName:c.name??this.i18n("unnamed")}),{file:o});if(u===!1&&!d)throw new pi("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:o});typeof u=="object"&&u!==null&&(c=u),L(this,li).validateSingleFile(c),s[c.id]=c,a.push(c)}catch(c){i.push(c)}try{L(this,li).validateAggregateRestrictions(Object.values(n),a)}catch(o){return i.push(o),{nextFilesState:n,validFilesToAdd:[],errors:i}}return{nextFilesState:s,validFilesToAdd:a,errors:i}},f_=function(){const{files:t}=this.getState();return Object.keys(t).filter(n=>t[n].error)},m_=async function(){const t=Pe(this,ht,f_).call(this),n={...this.getState().files};if(t.forEach(a=>{n[a]={...n[a],isPaused:!1,error:null}}),this.setState({files:n,error:null}),this.emit("retry-all",this.getFilesByIds(t)),t.length===0)return{successful:[],failed:[]};const s=Pe(this,ht,Gp).call(this,t,{forceAllowNewUpload:!0});return Pe(this,ht,Yp).call(this,s)},hw=new WeakMap,p_=function(){const t=Pe(this,ht,LG).call(this);let n=null;t!=null&&(n=Math.round(t*100),n>100?n=100:n<0&&(n=0)),this.emit("progress",n??0),this.setState({totalProgress:n??0})},Vd=new WeakMap,LG=function(){const n=this.getFiles().filter(c=>c.progress.uploadStarted||c.progress.preprocess||c.progress.postprocess);if(n.length===0)return 0;if(n.every(c=>c.progress.uploadComplete))return 1;const s=c=>c.progress.bytesTotal!=null&&c.progress.bytesTotal!==0,a=n.filter(s),i=n.filter(c=>!s(c));if(a.every(c=>c.progress.uploadComplete)&&i.length>0&&!i.every(c=>c.progress.uploadComplete))return null;const l=a.reduce((c,d)=>c+(d.progress.bytesTotal??0),0),o=a.reduce((c,d)=>c+(d.progress.bytesUploaded||0),0);return l===0?0:o/l},UG=function(){const t=(a,i,l)=>{let o=a.message||"Unknown error";a.details&&(o+=` ${a.details}`),this.setState({error:o}),i!=null&&i.id in this.getState().files&&this.setFileState(i.id,{error:o,response:l})};this.on("error",t),this.on("upload-error",(a,i,l)=>{if(t(i,a,l),typeof i=="object"&&i.message){this.log(i.message,"error");const o=new Error(this.i18n("failedToUpload",{file:(a==null?void 0:a.name)??""}));o.isUserFacing=!0,o.details=i.message,i.details&&(o.details+=` ${i.details}`),Pe(this,ht,bd).call(this,[o])}else Pe(this,ht,bd).call(this,[i])});let n=null;this.on("upload-stalled",(a,i)=>{const{message:l}=a,o=i.map(c=>c.meta.name).join(", ");n||(this.info({message:l,details:o},"warning",this.opts.infoTimeout),n=setTimeout(()=>{n=null},this.opts.infoTimeout)),this.log(`${l} ${o}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const s=a=>{const i=a.filter(o=>{const c=o!=null&&this.getFile(o.id);return c||this.log(`Not setting progress for a file that has been removed: ${o==null?void 0:o.id}`),c}),l=Object.fromEntries(i.map(o=>[o.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:o.size}}]));this.patchFilesState(l)};this.on("upload-start",s),this.on("upload-progress",L(this,hw)),this.on("upload-success",(a,i)=>{if(a==null||!this.getFile(a.id)){this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`);return}const l=this.getFile(a.id).progress;this.setFileState(a.id,{progress:{...l,postprocess:L(this,zd).size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:l.bytesTotal},response:i,uploadURL:i.uploadURL,isPaused:!1}),a.size==null&&this.setFileState(a.id,{size:i.bytesUploaded||l.bytesTotal}),L(this,Vd).call(this)}),this.on("preprocess-progress",(a,i)=>{if(a==null||!this.getFile(a.id)){this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`);return}this.setFileState(a.id,{progress:{...this.getFile(a.id).progress,preprocess:i}})}),this.on("preprocess-complete",a=>{if(a==null||!this.getFile(a.id)){this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`);return}const i={...this.getState().files};i[a.id]={...i[a.id],progress:{...i[a.id].progress}},delete i[a.id].progress.preprocess,this.setState({files:i})}),this.on("postprocess-progress",(a,i)=>{if(a==null||!this.getFile(a.id)){this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`);return}this.setFileState(a.id,{progress:{...this.getState().files[a.id].progress,postprocess:i}})}),this.on("postprocess-complete",a=>{if(a==null||!this.getFile(a.id)){this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`);return}const i={...this.getState().files};i[a.id]={...i[a.id],progress:{...i[a.id].progress}},delete i[a.id].progress.postprocess,this.setState({files:i})}),this.on("restored",()=>{L(this,Vd).call(this)}),this.on("dashboard:file-edit-complete",a=>{a&&Pe(this,ht,c_).call(this,a)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",L(this,fc)),window.addEventListener("offline",L(this,fc)),setTimeout(L(this,fc),3e3))},fc=new WeakMap,hv=new WeakMap,Gp=function(t,n={}){const{forceAllowNewUpload:s=!1}=n,{allowNewUpload:a,currentUploads:i}=this.getState();if(!a&&!s)throw new Error("Cannot create a new upload: already uploading.");const l=NE();return this.emit("upload",l,this.getFilesByIds(t)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...i,[l]:{fileIDs:t,step:0,result:{}}}}),l},BG=function(t){const{currentUploads:n}=this.getState();return n[t]},K0=function(t){const n={...this.getState().currentUploads};delete n[t],this.setState({currentUploads:n})},Yp=async function(t){const n=()=>{const{currentUploads:l}=this.getState();return l[t]};let s=n();const a=[...L(this,cf),...L(this,df),...L(this,zd)];try{for(let l=s.step||0;l<a.length&&s;l++){const o=a[l];this.setState({currentUploads:{...this.getState().currentUploads,[t]:{...s,step:l}}});const{fileIDs:c}=s;await o(c,t),s=n()}}catch(l){throw Pe(this,ht,K0).call(this,t),l}if(s){s.fileIDs.forEach(d=>{const u=this.getFile(d);u!=null&&u.progress.postprocess&&this.emit("postprocess-complete",u)});const l=s.fileIDs.map(d=>this.getFile(d)),o=l.filter(d=>!d.error),c=l.filter(d=>d.error);this.addResultData(t,{successful:o,failed:c,uploadID:t}),s=n()}let i;return s&&(i=s.result,Pe(this,ht,K0).call(this,t)),i==null&&(this.log(`Not setting result for an upload that has been removed: ${t}`),i={successful:[],failed:[],uploadID:t}),i},ge(fw,"VERSION",X8e.version);let o_=fw;var oUe=0;function Q(e,t,n,s,a,i){t||(t={});var l,o,c=t;if("ref"in c)for(o in c={},t)o=="ref"?l=t[o]:c[o]=t[o];var d={type:e,props:c,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--oUe,__i:-1,__u:0,__source:a,__self:i};if(typeof e=="function"&&(l=e.defaultProps))for(o in l)c[o]===void 0&&(c[o]=l[o]);return zt.vnode&&zt.vnode(d),d}const cUe="@uppy/informer",dUe="A notification and error pop-up bar for Uppy.",uUe="4.3.2",hUe="MIT",fUe="lib/index.js",mUe="dist/style.min.css",pUe="module",xUe={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build"},gUe=["file uploader","uppy","uppy-plugin","notification","bar","ui"],vUe="https://uppy.io",yUe={url:"https://github.com/transloadit/uppy/issues"},bUe={type:"git",url:"git+https://github.com/transloadit/uppy.git"},jUe=["src","lib","dist","CHANGELOG.md"],wUe={"@uppy/utils":"^6.2.2",preact:"^10.5.13"},NUe={"@uppy/core":"^4.5.2"},kUe={cssnano:"^7.0.7",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3"},SUe={name:cUe,description:dUe,version:uUe,license:hUe,main:fUe,style:mUe,type:pUe,scripts:xUe,keywords:gUe,homepage:vUe,bugs:yUe,repository:bUe,files:jUe,dependencies:wUe,peerDependencies:NUe,devDependencies:kUe},K3=300;class CUe extends Gs{constructor(){super(...arguments);ge(this,"ref",q6e())}componentWillEnter(n){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(n,K3)}componentWillLeave(n){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(n,K3)}render(){const{children:n}=this.props;return Q("div",{className:"uppy-Informer-animated",ref:this.ref,children:n})}}function PUe(e,t){return Object.assign(e,t)}function _Ue(e,t){return(e==null?void 0:e.key)??t}function AUe(e,t){const n=e._ptgLinkedRefs||(e._ptgLinkedRefs={});return n[t]||(n[t]=s=>{e.refs[t]=s})}function Dp(e){const t={};for(let n=0;n<e.length;n++)if(e[n]!=null){const s=_Ue(e[n],n.toString(36));t[s]=e[n]}return t}function TUe(e,t){e=e||{},t=t||{};const n=l=>Object.hasOwn(t,l)?t[l]:e[l],s={};let a=[];for(const l in e)Object.hasOwn(t,l)?a.length&&(s[l]=a,a=[]):a.push(l);const i={};for(const l in t){if(Object.hasOwn(s,l))for(let o=0;o<s[l].length;o++){const c=s[l][o];i[s[l][o]]=n(c)}i[l]=n(l)}for(let l=0;l<a.length;l++)i[a[l]]=n(a[l]);return i}const EUe=e=>e;class zG extends Gs{constructor(t,n){super(t,n),this.refs={},this.state={children:Dp(yi(yi(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const t=this.state.children;for(const n in t)t[n]&&this.performAppear(n)}componentWillReceiveProps(t){const n=Dp(yi(t.children)||[]),s=this.state.children;this.setState(i=>({children:TUe(i.children,n)}));let a;for(a in n)if(Object.hasOwn(n,a)){const i=s&&Object.hasOwn(s,a);n[a]&&i&&this.currentlyTransitioningKeys[a]?(this.keysToEnter.push(a),this.keysToAbortLeave.push(a)):n[a]&&!i&&!this.currentlyTransitioningKeys[a]&&this.keysToEnter.push(a)}for(a in s)if(Object.hasOwn(s,a)){const i=n&&Object.hasOwn(n,a);s[a]&&!i&&!this.currentlyTransitioningKeys[a]&&this.keysToLeave.push(a)}}componentDidUpdate(){const{keysToEnter:t}=this;this.keysToEnter=[],t.forEach(this.performEnter);const{keysToLeave:n}=this;this.keysToLeave=[],n.forEach(this.performLeave)}_finishAbort(t){const n=this.keysToAbortLeave.indexOf(t);n!==-1&&this.keysToAbortLeave.splice(n,1)}performAppear(t){this.currentlyTransitioningKeys[t]=!0;const n=this.refs[t];n!=null&&n.componentWillAppear?n.componentWillAppear(this._handleDoneAppearing.bind(this,t)):this._handleDoneAppearing(t)}_handleDoneAppearing(t){const n=this.refs[t];n!=null&&n.componentDidAppear&&n.componentDidAppear(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);const s=Dp(yi(this.props.children)||[]);(!s||!Object.hasOwn(s,t))&&this.performLeave(t)}performEnter(t){this.currentlyTransitioningKeys[t]=!0;const n=this.refs[t];n!=null&&n.componentWillEnter?n.componentWillEnter(this._handleDoneEntering.bind(this,t)):this._handleDoneEntering(t)}_handleDoneEntering(t){const n=this.refs[t];n!=null&&n.componentDidEnter&&n.componentDidEnter(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);const s=Dp(yi(this.props.children)||[]);(!s||!Object.hasOwn(s,t))&&this.performLeave(t)}performLeave(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;this.currentlyTransitioningKeys[t]=!0;const s=this.refs[t];s!=null&&s.componentWillLeave?s.componentWillLeave(this._handleDoneLeaving.bind(this,t)):this._handleDoneLeaving(t)}_handleDoneLeaving(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;const s=this.refs[t];s!=null&&s.componentDidLeave&&s.componentDidLeave(),delete this.currentlyTransitioningKeys[t];const a=Dp(yi(this.props.children)||[]);if(a&&Object.hasOwn(a,t))this.performEnter(t);else{const i=PUe({},this.state.children);delete i[t],this.setState({children:i})}}render({childFactory:t,transitionLeave:n,transitionName:s,transitionAppear:a,transitionEnter:i,transitionLeaveTimeout:l,transitionEnterTimeout:o,transitionAppearTimeout:c,component:d,...u},{children:h}){const f=Object.entries(h).map(([m,g])=>{if(!g)return;const x=AUe(this,m);return SG(t(g),{ref:x,key:m})}).filter(Boolean);return ev(d,u,f)}}zG.defaultProps={component:"span",childFactory:EUe};class VG extends Sm{constructor(n,s){super(n,s);ge(this,"render",n=>Q("div",{className:"uppy uppy-Informer",children:Q(zG,{children:n.info.map(s=>Q(CUe,{children:Q("p",{role:"alert",children:[s.message," ",s.details&&Q("span",{"aria-label":s.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${s.message} 

 ${s.details}`),children:"?"})]})},s.message))})}));this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){const{target:n}=this.opts;n&&this.mount(n,this)}}ge(VG,"VERSION",SUe.version);var qG={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",l=0;l<arguments.length;l++){var o=arguments[l];o&&(i=a(i,s(o)))}return i}function s(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var l="";for(var o in i)t.call(i,o)&&i[o]&&(l=a(l,o));return l}function a(i,l){return l?i?i+" "+l:i+l:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(qG);var OUe=qG.exports;const qi=er(OUe),RUe={position:"relative",width:"100%",minHeight:"100%"},DUe={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class MUe extends Gs{constructor(n){super(n);ge(this,"handleScroll",()=>{this.setState({offset:this.base.scrollTop})});ge(this,"handleResize",()=>{this.resize()});this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){var n;(n=this.focusElement)!=null&&n.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:n}=this.state;n!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render({data:n,rowHeight:s,renderRow:a,overscanCount:i=10,...l}){const{offset:o,height:c}=this.state;let d=Math.floor(o/s),u=Math.floor(c/s);i&&(d=Math.max(0,d-d%i),u+=i);const h=d+u+4,f=n.slice(d,h),m={...RUe,height:n.length*s},g={...DUe,top:d*s};return Q("div",{onScroll:this.handleScroll,...l,children:Q("div",{role:"presentation",style:m,children:Q("div",{role:"presentation",style:g,children:f.map(a)})})})}}function $Ue(){return Q("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:Q("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function G3(e,t,n,s){return e===t?e:s===0?t:e+(t-e)*2**(-s/n)}const IUe="@uppy/status-bar",FUe="A progress bar for Uppy, with many bells and whistles.",LUe="4.2.3",UUe="MIT",BUe="lib/index.js",zUe="dist/style.min.css",VUe="module",qUe={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build"},WUe=["file uploader","uppy","uppy-plugin","progress bar","status bar","progress","upload","eta","speed"],HUe="https://uppy.io",KUe={url:"https://github.com/transloadit/uppy/issues"},GUe={type:"git",url:"git+https://github.com/transloadit/uppy.git"},YUe=["src","lib","dist","CHANGELOG.md"],XUe={"@transloadit/prettier-bytes":"^0.3.4","@uppy/utils":"^6.2.2",classnames:"^2.2.6",preact:"^10.5.13"},ZUe={"@uppy/core":"^4.5.2"},QUe={cssnano:"^7.0.7",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3"},JUe={name:IUe,description:FUe,version:LUe,license:UUe,main:BUe,style:zUe,type:VUe,scripts:qUe,keywords:WUe,homepage:HUe,bugs:KUe,repository:GUe,files:YUe,dependencies:XUe,peerDependencies:ZUe,devDependencies:QUe},e9e={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}},el={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};function t9e(e){const t=Math.floor(e/3600)%24,n=Math.floor(e/60)%60,s=Math.floor(e%60);return{hours:t,minutes:n,seconds:s}}function r9e(e){const t=t9e(e),n=t.hours===0?"":`${t.hours}h`,s=t.minutes===0?"":`${t.hours===0?t.minutes:` ${t.minutes.toString(10).padStart(2,"0")}`}m`,a=t.hours!==0?"":`${t.minutes===0?t.seconds:` ${t.seconds.toString(10).padStart(2,"0")}`}s`;return`${n}${s}${a}`}const n9e="·",Y3=()=>` ${n9e} `;function s9e(e){const{newFiles:t,isUploadStarted:n,recoveredState:s,i18n:a,uploadState:i,isSomeGhost:l,startUpload:o}=e,c=qi("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":i===el.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":l}),d=t&&n&&!s?a("uploadXNewFiles",{smart_count:t}):a("uploadXFiles",{smart_count:t});return Q("button",{type:"button",className:c,"aria-label":a("uploadXFiles",{smart_count:t}),onClick:o,disabled:l,"data-uppy-super-focusable":!0,children:d})}function a9e(e){const{i18n:t,uppy:n}=e;return Q("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":t("retryUpload"),onClick:()=>n.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:Q("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),t("retry")]})}function i9e(e){const{i18n:t,uppy:n}=e;return Q("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:t("cancel"),"aria-label":t("cancel"),onClick:()=>n.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:Q("g",{fill:"none",fillRule:"evenodd",children:[Q("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),Q("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function l9e(e){const{isAllPaused:t,i18n:n,isAllComplete:s,resumableUploads:a,uppy:i}=e,l=n(t?"resume":"pause");function o(){if(!s){if(!a){i.cancelAll();return}if(t){i.resumeAll();return}i.pauseAll()}}return Q("button",{title:l,"aria-label":l,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:o,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:Q("g",{fill:"none",fillRule:"evenodd",children:[Q("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),Q("path",{fill:"#FFF",d:t?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function o9e(e){const{i18n:t,doneButtonHandler:n}=e;return Q("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:n,"data-uppy-super-focusable":!0,children:t("done")})}function WG(){return Q("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:Q("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function c9e(e){const{progress:t}=e,{value:n,mode:s,message:a}=t;return Q("div",{className:"uppy-StatusBar-content",children:[Q(WG,{}),s==="determinate"?`${Math.round(n*100)}% · `:"",a]})}function d9e(e){const{numUploads:t,complete:n,totalUploadedSize:s,totalSize:a,totalETA:i,i18n:l}=e,o=t>1,c=Rd(s);return Q("div",{className:"uppy-StatusBar-statusSecondary",children:[o&&l("filesUploadedOfTotal",{complete:n,smart_count:t}),Q("span",{className:"uppy-StatusBar-additionalInfo",children:[o&&Y3(),a!=null?l("dataUploadedOfTotal",{complete:c,total:Rd(a)}):l("dataUploadedOfUnknown",{complete:c}),Y3(),i!=null&&l("xTimeLeft",{time:r9e(i)})]})]})}function HG(e){const{i18n:t,complete:n,numUploads:s}=e;return Q("div",{className:"uppy-StatusBar-statusSecondary",children:t("filesUploadedOfTotal",{complete:n,smart_count:s})})}function u9e(e){const{i18n:t,newFiles:n,startUpload:s}=e,a=qi("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return Q("div",{className:"uppy-StatusBar-statusSecondary",children:[Q("div",{className:"uppy-StatusBar-statusSecondaryHint",children:t("xMoreFilesAdded",{smart_count:n})}),Q("button",{type:"button",className:a,"aria-label":t("uploadXFiles",{smart_count:n}),onClick:s,children:t("upload")})]})}function h9e(e){const{i18n:t,supportsUploadProgress:n,totalProgress:s,showProgressDetails:a,isUploadStarted:i,isAllComplete:l,isAllPaused:o,newFiles:c,numUploads:d,complete:u,totalUploadedSize:h,totalSize:f,totalETA:m,startUpload:g}=e,x=c&&i;if(!i||l)return null;const w=t(o?"paused":"uploading");function j(){return!o&&!x&&a?n?Q(d9e,{numUploads:d,complete:u,totalUploadedSize:h,totalSize:f,totalETA:m,i18n:t}):Q(HG,{i18n:t,complete:u,numUploads:d}):null}return Q("div",{className:"uppy-StatusBar-content",title:w,children:[o?null:Q(WG,{}),Q("div",{className:"uppy-StatusBar-status",children:[Q("div",{className:"uppy-StatusBar-statusPrimary",children:n&&s!==0?`${w}: ${s}%`:w}),j(),x?Q(u9e,{i18n:t,newFiles:c,startUpload:g}):null]})]})}function f9e(e){const{i18n:t}=e;return Q("div",{className:"uppy-StatusBar-content",role:"status",title:t("complete"),children:Q("div",{className:"uppy-StatusBar-status",children:Q("div",{className:"uppy-StatusBar-statusPrimary",children:[Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:Q("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),t("complete")]})})})}function m9e(e){const{error:t,i18n:n,complete:s,numUploads:a}=e;function i(){const l=`${n("uploadFailed")} 

 ${t}`;alert(l)}return Q("div",{className:"uppy-StatusBar-content",title:n("uploadFailed"),children:[Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:Q("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),Q("div",{className:"uppy-StatusBar-status",children:[Q("div",{className:"uppy-StatusBar-statusPrimary",children:[n("uploadFailed"),Q("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":n("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:i,type:"button",children:"?"})]}),Q(HG,{i18n:n,complete:s,numUploads:a})]})]})}function dS(e){const t=[];let n="indeterminate",s;for(const{progress:i}of Object.values(e)){const{preprocess:l,postprocess:o}=i;s==null&&(l||o)&&({mode:n,message:s}=l||o),(l==null?void 0:l.mode)==="determinate"&&t.push(l.value),(o==null?void 0:o.mode)==="determinate"&&t.push(o.value)}const a=t.reduce((i,l)=>i+l/t.length,0);return{mode:n,message:s,value:a}}const{STATE_ERROR:X3,STATE_WAITING:p9e,STATE_PREPROCESSING:uS,STATE_UPLOADING:u0,STATE_POSTPROCESSING:hS,STATE_COMPLETE:h0}=el;function x9e({newFiles:e,allowNewUpload:t,isUploadInProgress:n,isAllPaused:s,resumableUploads:a,error:i,hideUploadButton:l=void 0,hidePauseResumeButton:o=!1,hideCancelButton:c=!1,hideRetryButton:d=!1,recoveredState:u,uploadState:h,totalProgress:f,files:m,supportsUploadProgress:g,hideAfterFinish:x=!1,isSomeGhost:w,doneButtonHandler:j=void 0,isUploadStarted:y,i18n:b,startUpload:p,uppy:N,isAllComplete:k,showProgressDetails:S=void 0,numUploads:P,complete:_,totalSize:R,totalETA:O,totalUploadedSize:M}){function A(){switch(h){case hS:case uS:{const be=dS(m);return be.mode==="determinate"?be.value*100:f}case X3:return null;case u0:return g?f:null;default:return f}}function T(){switch(h){case hS:case uS:{const{mode:be}=dS(m);return be==="indeterminate"}case u0:return!g;default:return!1}}const B=A(),z=B??100,U=!i&&e&&(!n&&!s||u)&&t&&!l,E=!c&&h!==p9e&&h!==h0,$=a&&!o&&h===u0,G=i&&!k&&!d,oe=j&&h===h0,ee=qi("uppy-StatusBar-progress",{"is-indeterminate":T()}),ce=qi("uppy-StatusBar",`is-${h}`,{"has-ghosts":w}),ye=(()=>{switch(h){case uS:case hS:return Q(c9e,{progress:dS(m)});case h0:return Q(f9e,{i18n:b});case X3:return Q(m9e,{error:i,i18n:b,numUploads:P,complete:_});case u0:return Q(h9e,{i18n:b,supportsUploadProgress:g,totalProgress:f,showProgressDetails:S,isUploadStarted:y,isAllComplete:k,isAllPaused:s,newFiles:e,numUploads:P,complete:_,totalUploadedSize:M,totalSize:R,totalETA:O,startUpload:p});default:return null}})();return!(U||G||$||E||oe)&&!ye||h===h0&&x?null:Q("div",{className:ce,children:[Q("div",{className:ee,style:{width:`${z}%`},role:"progressbar","aria-label":`${z}%`,"aria-valuetext":`${z}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":B}),ye,Q("div",{className:"uppy-StatusBar-actions",children:[U?Q(s9e,{newFiles:e,isUploadStarted:y,recoveredState:u,i18n:b,isSomeGhost:w,startUpload:p,uploadState:h}):null,G?Q(a9e,{i18n:b,uppy:N}):null,$?Q(l9e,{isAllPaused:s,i18n:b,isAllComplete:k,resumableUploads:a,uppy:N}):null,E?Q(i9e,{i18n:b,uppy:N}):null,oe?Q(o9e,{i18n:b,doneButtonHandler:j}):null]})]})}const g9e=2e3,v9e=2e3;function y9e(e,t,n,s){if(e)return el.STATE_ERROR;if(t)return el.STATE_COMPLETE;if(n)return el.STATE_WAITING;let a=el.STATE_WAITING;const i=Object.keys(s);for(let l=0;l<i.length;l++){const{progress:o}=s[i[l]];if(o.uploadStarted&&!o.uploadComplete)return el.STATE_UPLOADING;o.preprocess&&(a=el.STATE_PREPROCESSING),o.postprocess&&a!==el.STATE_PREPROCESSING&&(a=el.STATE_POSTPROCESSING)}return a}const b9e={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var CS,mc,pc,qd,Xl,mw,KG,fv;let j9e=(CS=class extends Sm{constructor(n,s){super(n,{...b9e,...s});ve(this,mw);ve(this,mc);ve(this,pc);ve(this,qd);ve(this,Xl);ge(this,"startUpload",()=>this.uppy.upload().catch(()=>{}));ve(this,fv,()=>{const{recoveredState:n}=this.uppy.getState();if(we(this,qd,null),we(this,Xl,null),n){we(this,pc,Object.values(n.files).reduce((s,{progress:a})=>s+a.bytesUploaded,0)),this.uppy.emit("restore-confirmed");return}we(this,mc,performance.now()),we(this,pc,0)});this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=e9e,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(n){const{capabilities:s,files:a,allowNewUpload:i,totalProgress:l,error:o,recoveredState:c}=n,{newFiles:d,startedFiles:u,completeFiles:h,isUploadStarted:f,isAllComplete:m,isAllPaused:g,isUploadInProgress:x,isSomeGhost:w}=this.uppy.getObjectOfFilesPerState(),j=c?Object.values(a):d,y=!!s.resumableUploads,b=s.uploadProgress!==!1;let p=null,N=0;u.every(S=>S.progress.bytesTotal!=null&&S.progress.bytesTotal!==0)?(p=0,u.forEach(S=>{p+=S.progress.bytesTotal||0,N+=S.progress.bytesUploaded||0})):u.forEach(S=>{N+=S.progress.bytesUploaded||0});const k=Pe(this,mw,KG).call(this,{uploaded:N,total:p});return x9e({error:o,uploadState:y9e(o,m,c,n.files||{}),allowNewUpload:i,totalProgress:l,totalSize:p,totalUploadedSize:N,isAllComplete:!1,isAllPaused:g,isUploadStarted:f,isUploadInProgress:x,isSomeGhost:w,recoveredState:c,complete:h.length,newFiles:j.length,numUploads:u.length,totalETA:k,files:a,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:y,supportsUploadProgress:b,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){const n=this.el;fG(n)||(n.dir="ltr")}install(){const{target:n}=this.opts;n&&this.mount(n,this),this.uppy.on("upload",L(this,fv)),we(this,mc,performance.now()),we(this,pc,this.uppy.getFiles().reduce((s,a)=>s+a.progress.bytesUploaded,0))}uninstall(){this.unmount(),this.uppy.off("upload",L(this,fv))}},mc=new WeakMap,pc=new WeakMap,qd=new WeakMap,Xl=new WeakMap,mw=new WeakSet,KG=function(n){if(n.total==null||n.total===0)return null;const s=n.total-n.uploaded;if(s<=0)return null;L(this,mc)??we(this,mc,performance.now());const a=performance.now()-L(this,mc);if(a===0)return Math.round((L(this,Xl)??0)/100)/10;const i=n.uploaded-L(this,pc);if(we(this,pc,n.uploaded),i<=0)return Math.round((L(this,Xl)??0)/100)/10;const l=i/a,o=L(this,qd)==null?l:G3(l,L(this,qd),g9e,a);we(this,qd,o);const c=s/o,d=Math.max(L(this,Xl)-a,0),u=L(this,Xl)==null?c:G3(c,d,v9e,a);return we(this,Xl,u),we(this,mc,performance.now()),Math.round(u/100)/10},fv=new WeakMap,ge(CS,"VERSION",JUe.version),CS);const w9e=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function N9e(e,t,n){const s=w9e.exec(e),a=t.mimeType??(s==null?void 0:s[1])??"plain/text";let i;if((s==null?void 0:s[2])!=null){const l=atob(decodeURIComponent(s[3])),o=new Uint8Array(l.length);for(let c=0;c<l.length;c++)o[c]=l.charCodeAt(c);i=[o]}else(s==null?void 0:s[3])!=null&&(i=[decodeURIComponent(s[3])]);return new Blob(i,{type:a})}function Z3(e){return e.startsWith("blob:")}function Q3(e){return e?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(e):!1}function vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var GG=typeof self<"u"?self:global;const nv=typeof navigator<"u",k9e=nv&&typeof HTMLImageElement>"u",J3=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),YG=GG.Buffer,XG=!!YG,S9e=e=>e!==void 0;function ZG(e){return e===void 0||(e instanceof Map?e.size===0:Object.values(e).filter(S9e).length===0)}function Ln(e){let t=new Error(e);throw delete t.stack,t}function eF(e){let t=function(n){let s=0;return n.ifd0.enabled&&(s+=1024),n.exif.enabled&&(s+=2048),n.makerNote&&(s+=2048),n.userComment&&(s+=1024),n.gps.enabled&&(s+=512),n.interop.enabled&&(s+=100),n.ifd1.enabled&&(s+=1024),s+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const fS=e=>String.fromCharCode.apply(null,e),tF=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class Ni{static from(t,n){return t instanceof this&&t.le===n?t:new Ni(t,void 0,void 0,n)}constructor(t,n=0,s,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){s===void 0&&(s=t.byteLength-n);let i=new DataView(t,n,s);this._swapDataView(i)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof Ni){s===void 0&&(s=t.byteLength-n),(n+=t.byteOffset)+s>t.byteOffset+t.byteLength&&Ln("Creating view outside of available memory in ArrayBuffer");let i=new DataView(t.buffer,n,s);this._swapDataView(i)}else if(typeof t=="number"){let i=new DataView(new ArrayBuffer(t));this._swapDataView(i)}else Ln("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,n,s=Ni){return t instanceof DataView||t instanceof Ni?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||Ln("BufferView.set(): Invalid data argument."),this.toUint8().set(t,n),new s(this,n,t.byteLength)}subarray(t,n){return n=n||this._lengthToEnd(t),new Ni(this,t,n)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,n){return new Uint8Array(this.buffer,this.byteOffset+t,n)}getString(t=0,n=this.byteLength){return a=this.getUint8Array(t,n),tF?tF.decode(a):XG?Buffer.from(a).toString("utf8"):decodeURIComponent(escape(fS(a)));var a}getLatin1String(t=0,n=this.byteLength){let s=this.getUint8Array(t,n);return fS(s)}getUnicodeString(t=0,n=this.byteLength){const s=[];for(let a=0;a<n&&t+a<this.byteLength;a+=2)s.push(this.getUint16(t+a));return fS(s)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,n=this.le){return this.dataView.getInt16(t,n)}getInt32(t,n=this.le){return this.dataView.getInt32(t,n)}getUint16(t,n=this.le){return this.dataView.getUint16(t,n)}getUint32(t,n=this.le){return this.dataView.getUint32(t,n)}getFloat32(t,n=this.le){return this.dataView.getFloat32(t,n)}getFloat64(t,n=this.le){return this.dataView.getFloat64(t,n)}getFloat(t,n=this.le){return this.dataView.getFloat32(t,n)}getDouble(t,n=this.le){return this.dataView.getFloat64(t,n)}getUintBytes(t,n,s){switch(n){case 1:return this.getUint8(t,s);case 2:return this.getUint16(t,s);case 4:return this.getUint32(t,s);case 8:return this.getUint64&&this.getUint64(t,s)}}getUint(t,n,s){switch(n){case 8:return this.getUint8(t,s);case 16:return this.getUint16(t,s);case 32:return this.getUint32(t,s);case 64:return this.getUint64&&this.getUint64(t,s)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function x_(e,t){Ln(`${e} '${t}' was not loaded, try using full build of exifr.`)}let kE=class extends Map{constructor(t){super(),this.kind=t}get(t,n){return this.has(t)||x_(this.kind,t),n&&(t in n||function(s,a){Ln(`Unknown ${s} '${a}'.`)}(this.kind,t),n[t].enabled||x_(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}};var QG=new kE("file parser"),xi=new kE("segment parser"),SE=new kE("file reader");let C9e=GG.fetch;function rF(e,t){return(n=e).startsWith("data:")||n.length>1e4?v_(e,t,"base64"):J3&&e.includes("://")?g_(e,t,"url",nF):J3?v_(e,t,"fs"):nv?g_(e,t,"url",nF):void Ln("Invalid input argument");var n}async function g_(e,t,n,s){return SE.has(n)?v_(e,t,n):s?async function(a,i){let l=await i(a);return new Ni(l)}(e,s):void Ln(`Parser ${n} is not loaded`)}async function v_(e,t,n){let s=new(SE.get(n))(e,t);return await s.read(),s}const nF=e=>C9e(e).then(t=>t.arrayBuffer()),y_=e=>new Promise((t,n)=>{let s=new FileReader;s.onloadend=()=>t(s.result||new ArrayBuffer),s.onerror=n,s.readAsArrayBuffer(e)}),CE=new Map,P9e=new Map,_9e=new Map,f0=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],JG=["jfif","xmp","icc","iptc","ihdr"],b_=["tiff",...JG],En=["ifd0","ifd1","exif","gps","interop"],m0=[...b_,...En],p0=["makerNote","userComment"],eY=["translateKeys","translateValues","reviveValues","multiSegment"],x0=[...eY,"sanitize","mergeOutput","silentErrors"];class tY{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Mp extends tY{get needed(){return this.enabled||this.deps.size>0}constructor(t,n,s,a){if(super(),vr(this,"enabled",!1),vr(this,"skip",new Set),vr(this,"pick",new Set),vr(this,"deps",new Set),vr(this,"translateKeys",!1),vr(this,"translateValues",!1),vr(this,"reviveValues",!1),this.key=t,this.enabled=n,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=En.includes(t),this.canBeFiltered&&(this.dict=CE.get(t)),s!==void 0)if(Array.isArray(s))this.parse=this.enabled=!0,this.canBeFiltered&&s.length>0&&this.translateTagSet(s,this.pick);else if(typeof s=="object"){if(this.enabled=!0,this.parse=s.parse!==!1,this.canBeFiltered){let{pick:i,skip:l}=s;i&&i.length>0&&this.translateTagSet(i,this.pick),l&&l.length>0&&this.translateTagSet(l,this.skip)}this.applyInheritables(s)}else s===!0||s===!1?this.parse=this.enabled=s:Ln(`Invalid options argument: ${s}`)}applyInheritables(t){let n,s;for(n of eY)s=t[n],s!==void 0&&(this[n]=s)}translateTagSet(t,n){if(this.dict){let s,a,{tagKeys:i,tagValues:l}=this.dict;for(s of t)typeof s=="string"?(a=l.indexOf(s),a===-1&&(a=i.indexOf(Number(s))),a!==-1&&n.add(Number(i[a]))):n.add(s)}else for(let s of t)n.add(s)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,iw(this.pick,this.deps)):this.enabled&&this.pick.size>0&&iw(this.pick,this.deps)}}var xs={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},sF=new Map;class PE extends tY{static useCached(t){let n=sF.get(t);return n!==void 0||(n=new this(t),sF.set(t,n)),n}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):Ln(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=nv?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of f0)this[t]=xs[t];for(t of x0)this[t]=xs[t];for(t of p0)this[t]=xs[t];for(t of m0)this[t]=new Mp(t,xs[t],void 0,this)}setupFromTrue(){let t;for(t of f0)this[t]=xs[t];for(t of x0)this[t]=xs[t];for(t of p0)this[t]=!0;for(t of m0)this[t]=new Mp(t,!0,void 0,this)}setupFromArray(t){let n;for(n of f0)this[n]=xs[n];for(n of x0)this[n]=xs[n];for(n of p0)this[n]=xs[n];for(n of m0)this[n]=new Mp(n,!1,void 0,this);this.setupGlobalFilters(t,void 0,En)}setupFromObject(t){let n;for(n of(En.ifd0=En.ifd0||En.image,En.ifd1=En.ifd1||En.thumbnail,Object.assign(this,t),f0))this[n]=mS(t[n],xs[n]);for(n of x0)this[n]=mS(t[n],xs[n]);for(n of p0)this[n]=mS(t[n],xs[n]);for(n of b_)this[n]=new Mp(n,xs[n],t[n],this);for(n of En)this[n]=new Mp(n,xs[n],t[n],this.tiff);this.setupGlobalFilters(t.pick,t.skip,En,m0),t.tiff===!0?this.batchEnableWithBool(En,!0):t.tiff===!1?this.batchEnableWithUserValue(En,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,En):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,En)}batchEnableWithBool(t,n){for(let s of t)this[s].enabled=n}batchEnableWithUserValue(t,n){for(let s of t){let a=n[s];this[s].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(t,n,s,a=s){if(t&&t.length){for(let l of a)this[l].enabled=!1;let i=aF(t,s);for(let[l,o]of i)iw(this[l].pick,o),this[l].enabled=!0}else if(n&&n.length){let i=aF(n,s);for(let[l,o]of i)iw(this[l].skip,o)}}filterNestedSegmentTags(){let{ifd0:t,exif:n,xmp:s,iptc:a,icc:i}=this;this.makerNote?n.deps.add(37500):n.skip.add(37500),this.userComment?n.deps.add(37510):n.skip.add(37510),s.enabled||t.skip.add(700),a.enabled||t.skip.add(33723),i.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:n,gps:s,interop:a}=this;a.needed&&(n.deps.add(40965),t.deps.add(40965)),n.needed&&t.deps.add(34665),s.needed&&t.deps.add(34853),this.tiff.enabled=En.some(i=>this[i].enabled===!0)||this.makerNote||this.userComment;for(let i of En)this[i].finalizeFilters()}get onlyTiff(){return!JG.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of b_)this[t].enabled&&!xi.has(t)&&x_("segment parser",t)}}function aF(e,t){let n,s,a,i,l=[];for(a of t){for(i of(n=CE.get(a),s=[],n))(e.includes(i[0])||e.includes(i[1]))&&s.push(i[0]);s.length&&l.push([a,s])}return l}function mS(e,t){return e!==void 0?e:t!==void 0?t:void 0}function iw(e,t){for(let n of t)e.add(n)}vr(PE,"default",xs);class A9e{constructor(t){vr(this,"parsers",{}),vr(this,"output",{}),vr(this,"errors",[]),vr(this,"pushToErrors",n=>this.errors.push(n)),this.options=PE.useCached(t)}async read(t){this.file=await function(n,s){return typeof n=="string"?rF(n,s):nv&&!k9e&&n instanceof HTMLImageElement?rF(n.src,s):n instanceof Uint8Array||n instanceof ArrayBuffer||n instanceof DataView?new Ni(n):nv&&n instanceof Blob?g_(n,s,"blob",y_):void Ln("Invalid input argument")}(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,n=t.getUint16(0);for(let[s,a]of QG)if(a.canHandle(t,n))return this.fileParser=new a(this.options,this.file,this.parsers),t[s]=!0;this.file.close&&this.file.close(),Ln("Unknown file format")}async parse(){let{output:t,errors:n}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),n.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&n.length>0&&(t.errors=n),ZG(s=t)?void 0:s;var s}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let n=Object.values(this.parsers).map(async s=>{let a=await s.parse();s.assignToOutput(t,a)});this.options.silentErrors&&(n=n.map(s=>s.catch(this.pushToErrors))),await Promise.all(n)}async extractThumbnail(){this.setup();let{options:t,file:n}=this,s=xi.get("tiff",t);var a;if(n.tiff?a={start:0,type:"tiff"}:n.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),l=this.parsers.tiff=new s(i,t,n),o=await l.extractThumbnail();return n.close&&n.close(),o}}class Ph{static findPosition(t,n){let s=t.getUint16(n+2)+2,a=typeof this.headerLength=="function"?this.headerLength(t,n,s):this.headerLength,i=n+a,l=s-a;return{offset:n,length:s,headerLength:a,start:i,size:l,end:i+l}}static parse(t,n={}){return new this(t,new PE({[this.type]:n}),t).parse()}normalizeInput(t){return t instanceof Ni?t:new Ni(t)}constructor(t,n={},s){vr(this,"errors",[]),vr(this,"raw",new Map),vr(this,"handleError",a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)}),this.chunk=this.normalizeInput(t),this.file=s,this.type=this.constructor.type,this.globalOptions=this.options=n,this.localOptions=n[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,n){let s=_9e.get(n),a=P9e.get(n),i=CE.get(n),l=this.options[n],o=l.reviveValues&&!!s,c=l.translateValues&&!!a,d=l.translateKeys&&!!i,u={};for(let[h,f]of t)o&&s.has(h)?f=s.get(h)(f):c&&a.has(h)&&(f=this.translateValue(f,a.get(h))),d&&i.has(h)&&(h=i.get(h)||h),u[h]=f;return u}translateValue(t,n){return n[t]||n.DEFAULT||t}assignToOutput(t,n){this.assignObjectToOutput(t,this.constructor.type,n)}assignObjectToOutput(t,n,s){if(this.globalOptions.mergeOutput)return Object.assign(t,s);t[n]?Object.assign(t[n],s):t[n]=s}}vr(Ph,"headerLength",4),vr(Ph,"type",void 0),vr(Ph,"multiSegment",!1),vr(Ph,"canHandle",()=>!1);function T9e(e){return e===192||e===194||e===196||e===219||e===221||e===218||e===254}function E9e(e){return e>=224&&e<=239}function O9e(e,t,n){for(let[s,a]of xi)if(a.canHandle(e,t,n))return s}class iF extends class{constructor(t,n,s){vr(this,"errors",[]),vr(this,"ensureSegmentChunk",async a=>{let i=a.start,l=a.size||65536;if(this.file.chunked)if(this.file.available(i,l))a.chunk=this.file.subarray(i,l);else try{a.chunk=await this.file.readChunk(i,l)}catch(o){Ln(`Couldn't read segment: ${JSON.stringify(a)}. ${o.message}`)}else this.file.byteLength>i+l?a.chunk=this.file.subarray(i,l):a.size===void 0?a.chunk=this.file.subarray(i):Ln("Segment unreachable: "+JSON.stringify(a));return a.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=n,this.parsers=s}injectSegment(t,n){this.options[t].enabled&&this.createParser(t,n)}createParser(t,n){let s=new(xi.get(t))(n,this.options,this.file);return this.parsers[t]=s}createParsers(t){for(let n of t){let{type:s,chunk:a}=n,i=this.options[s];if(i&&i.enabled){let l=this.parsers[s];l&&l.append||l||this.createParser(s,a)}}}async readSegments(t){let n=t.map(this.ensureSegmentChunk);await Promise.all(n)}}{constructor(...t){super(...t),vr(this,"appSegments",[]),vr(this,"jpegSegments",[]),vr(this,"unknownSegments",[])}static canHandle(t,n){return n===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(xi.keyList())):(t=t===void 0?xi.keyList().filter(n=>this.options[n].enabled):t.filter(n=>this.options[n].enabled&&xi.has(n)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,n){this.setupSegmentFinderArgs(n);let{file:s,findAll:a,wanted:i,remaining:l}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some(o=>{let c=xi.get(o),d=this.options[o];return c.multiSegment&&d.multiSegment}),a&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,s.byteLength),!this.options.onlyTiff&&s.chunked){let o=!1;for(;l.size>0&&!o&&(s.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:c}=s,d=this.appSegments.some(u=>!this.file.available(u.offset||u.start,u.length||u.size));if(o=t>c&&!d?!await s.readNextChunk(t):!await s.readNextChunk(c),(t=this.findAppSegmentsInRange(t,s.byteLength))===void 0)return}}}findAppSegmentsInRange(t,n){n-=2;let s,a,i,l,o,c,{file:d,findAll:u,wanted:h,remaining:f,options:m}=this;for(;t<n;t++)if(d.getUint8(t)===255){if(s=d.getUint8(t+1),E9e(s)){if(a=d.getUint16(t+2),i=O9e(d,t,a),i&&h.has(i)&&(l=xi.get(i),o=l.findPosition(d,t),c=m[i],o.type=i,this.appSegments.push(o),!u&&(l.multiSegment&&c.multiSegment?(this.unfinishedMultiSegment=o.chunkNumber<o.chunkCount,this.unfinishedMultiSegment||f.delete(i)):f.delete(i),f.size===0)))break;m.recordUnknownSegments&&(o=Ph.findPosition(d,t),o.marker=s,this.unknownSegments.push(o)),t+=a+1}else if(T9e(s)){if(a=d.getUint16(t+2),s===218&&m.stopAfterSos!==!1)return;m.recordJpegSegments&&this.jpegSegments.push({offset:t,length:a,marker:s}),t+=a+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(n=>n.multiSegment))return;let t=function(n,s){let a,i,l,o=new Map;for(let c=0;c<n.length;c++)a=n[c],i=a[s],o.has(i)?l=o.get(i):o.set(i,l=[]),l.push(a);return Array.from(o)}(this.appSegments,"type");this.mergedAppSegments=t.map(([n,s])=>{let a=xi.get(n,this.options);return a.handleMultiSegments?{type:n,chunk:a.handleMultiSegments(s)}:s[0]})}getSegment(t){return this.appSegments.find(n=>n.type===t)}async getOrFindSegment(t){let n=this.getSegment(t);return n===void 0&&(await this.findAppSegments(0,[t]),n=this.getSegment(t)),n}}vr(iF,"type","jpeg"),QG.set("jpeg",iF);const R9e=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class D9e extends Ph{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,n,s=new Map){let{pick:a,skip:i}=this.options[n];a=new Set(a);let l=a.size>0,o=i.size===0,c=this.chunk.getUint16(t);t+=2;for(let d=0;d<c;d++){let u=this.chunk.getUint16(t);if(l){if(a.has(u)&&(s.set(u,this.parseTag(t,u,n)),a.delete(u),a.size===0))break}else!o&&i.has(u)||s.set(u,this.parseTag(t,u,n));t+=12}return s}parseTag(t,n,s){let{chunk:a}=this,i=a.getUint16(t+2),l=a.getUint32(t+4),o=R9e[i];if(o*l<=4?t+=8:t=a.getUint32(t+8),(i<1||i>13)&&Ln(`Invalid TIFF value type. block: ${s.toUpperCase()}, tag: ${n.toString(16)}, type: ${i}, offset ${t}`),t>a.byteLength&&Ln(`Invalid TIFF value offset. block: ${s.toUpperCase()}, tag: ${n.toString(16)}, type: ${i}, offset ${t} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(t,l);if(i===2)return(c=function(d){for(;d.endsWith("\0");)d=d.slice(0,-1);return d}(c=a.getString(t,l)).trim())===""?void 0:c;var c;if(i===7)return a.getUint8Array(t,l);if(l===1)return this.parseTagValue(i,t);{let d=new(function(h){switch(h){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(i))(l),u=o;for(let h=0;h<l;h++)d[h]=this.parseTagValue(i,t),t+=u;return d}}parseTagValue(t,n){let{chunk:s}=this;switch(t){case 1:return s.getUint8(n);case 3:return s.getUint16(n);case 4:return s.getUint32(n);case 5:return s.getUint32(n)/s.getUint32(n+4);case 6:return s.getInt8(n);case 8:return s.getInt16(n);case 9:return s.getInt32(n);case 10:return s.getInt32(n)/s.getInt32(n+4);case 11:return s.getFloat(n);case 12:return s.getDouble(n);case 13:return s.getUint32(n);default:Ln(`Invalid tiff type ${t}`)}}}class pS extends D9e{static canHandle(t,n){return t.getUint8(n+1)===225&&t.getUint32(n+4)===1165519206&&t.getUint16(n+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let n=this[t]();return n.catch!==void 0&&(n=n.catch(this.handleError)),n}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),n=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(n)}}parseBlock(t,n){let s=new Map;return this[n]=s,this.parseTags(t,n,s),s}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Ln("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&Ln(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,eF(this.options));let n=this.parseBlock(this.ifd0Offset,"ifd0");return n.size!==0?(this.exifOffset=n.get(34665),this.interopOffset=n.get(40965),this.gpsOffset=n.get(34853),this.xmp=n.get(700),this.iptc=n.get(33723),this.icc=n.get(34675),this.options.sanitize&&(n.delete(34665),n.delete(40965),n.delete(34853),n.delete(700),n.delete(33723),n.delete(34675)),n):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,eF(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,n){let s=t.get(n);s&&s.length===1&&t.set(n,s[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",lF(...t.get(2),t.get(1))),t.set("longitude",lF(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),n=this.ifd1.get(514);return this.chunk.getUint8Array(t,n)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,n,s,a={};for(n of En)if(t=this[n],!ZG(t))if(s=this.canTranslate?this.translateBlock(t,n):Object.fromEntries(t),this.options.mergeOutput){if(n==="ifd1")continue;Object.assign(a,s)}else a[n]=s;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(t,n){if(this.globalOptions.mergeOutput)Object.assign(t,n);else for(let[s,a]of Object.entries(n))this.assignObjectToOutput(t,s,a)}}function lF(e,t,n,s){var a=e+t/60+n/3600;return s!=="S"&&s!=="W"||(a*=-1),a}vr(pS,"type","tiff"),vr(pS,"headerLength",10),xi.set("tiff",pS);const _E={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},_E,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},_E,{tiff:!1,ifd1:!0,mergeOutput:!1});const M9e=Object.assign({},_E,{firstChunkSize:4e4,ifd0:[274]});async function $9e(e){let t=new A9e(M9e);await t.read(e);let n=await t.parse();if(n&&n.ifd0)return n.ifd0[274]}const I9e=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Xp=!0,Zp=!0;if(typeof navigator=="object"){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,n,s]=t;Xp=Number(n)+.1*Number(s)<13.4,Zp=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);Xp=Zp=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);Xp=Zp=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);Xp=Zp=Number(t)<77}}async function F9e(e){let t=await $9e(e);return Object.assign({canvas:Xp,css:Zp},I9e[t])}class L9e extends Ni{constructor(...t){super(...t),vr(this,"ranges",new U9e),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,n,s){if(t===0&&this.byteLength===0&&s){let a=new DataView(s.buffer||s,s.byteOffset,s.byteLength);this._swapDataView(a)}else{let a=t+n;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(t){let n;n=XG?YG.allocUnsafe(t):new Uint8Array(t);let s=new DataView(n.buffer,n.byteOffset,n.byteLength);return n.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:n,dataView:s}}subarray(t,n,s=!1){return n=n||this._lengthToEnd(t),s&&this._tryExtend(t,n),this.ranges.add(t,n),super.subarray(t,n)}set(t,n,s=!1){s&&this._tryExtend(n,t.byteLength,t);let a=super.set(t,n);return this.ranges.add(n,a.byteLength),a}async ensureChunk(t,n){this.chunked&&(this.ranges.available(t,n)||await this.readChunk(t,n))}available(t,n){return this.ranges.available(t,n)}}class U9e{constructor(){vr(this,"list",[])}get length(){return this.list.length}add(t,n,s=0){let a=t+n,i=this.list.filter(l=>oF(t,l.offset,a)||oF(t,l.end,a));if(i.length>0){t=Math.min(t,...i.map(o=>o.offset)),a=Math.max(a,...i.map(o=>o.end)),n=a-t;let l=i.shift();l.offset=t,l.length=n,l.end=a,this.list=this.list.filter(o=>!i.includes(o))}else this.list.push({offset:t,length:n,end:a})}available(t,n){let s=t+n;return this.list.some(a=>a.offset<=t&&s<=a.end)}}function oF(e,t,n){return e<=t&&t<=n}class B9e extends L9e{constructor(t,n){super(0),vr(this,"chunksRead",0),this.input=t,this.options=n}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let n=this.options.chunkSize,s=await this.readChunk(t,n);return!!s&&s.byteLength===n}async readChunk(t,n){if(this.chunksRead++,(n=this.safeWrapAddress(t,n))!==0)return this._readChunk(t,n)}safeWrapAddress(t,n){return this.size!==void 0&&t+n>this.size?Math.max(0,this.size-t):n}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}SE.set("blob",class extends B9e{async readWhole(){this.chunked=!1;let e=await y_(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let n=t?e+t:void 0,s=this.input.slice(e,n),a=await y_(s);return this.set(a,e,!0)}});const z9e="@uppy/thumbnail-generator",V9e="Uppy plugin that generates small previews of images to show on your upload UI.",q9e="4.2.2",W9e="MIT",H9e="lib/index.js",K9e="module",G9e={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},Y9e=["file uploader","uppy","uppy-plugin","thumbnail","preview","resize"],X9e="https://uppy.io",Z9e={url:"https://github.com/transloadit/uppy/issues"},Q9e={type:"git",url:"git+https://github.com/transloadit/uppy.git"},J9e=["src","lib","dist","CHANGELOG.md"],eBe={"@uppy/utils":"^6.2.2",exifr:"^7.0.0"},tBe={jsdom:"^26.1.0","namespace-emitter":"2.0.1",typescript:"^5.8.3",vitest:"^3.2.4"},rBe={"@uppy/core":"^4.5.2"},nBe={name:z9e,description:V9e,version:q9e,license:W9e,main:H9e,type:K9e,scripts:G9e,keywords:Y9e,homepage:X9e,bugs:Z9e,repository:Q9e,files:J9e,dependencies:eBe,devDependencies:tBe,peerDependencies:rBe},sBe={strings:{generatingThumbnails:"Generating thumbnails..."}};function aBe(e,t,n){try{e.getContext("2d").getImageData(0,0,1,1)}catch(s){if(s.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return e.toBlob?new Promise(s=>{e.toBlob(s,t,n)}).then(s=>{if(s===null)throw new Error("cannot read image, probably an svg with external resources");return s}):Promise.resolve().then(()=>N9e(e.toDataURL(t,n),{})).then(s=>{if(s===null)throw new Error("could not extract blob, probably an old browser");return s})}function iBe(e,t){let n=e.width,s=e.height;(t.deg===90||t.deg===270)&&(n=e.height,s=e.width);const a=document.createElement("canvas");a.width=n,a.height=s;const i=a.getContext("2d");return i.translate(n/2,s/2),t.canvas&&(i.rotate(t.rad),i.scale(t.scaleX,t.scaleY)),i.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),a}function lBe(e){const t=e.width/e.height,n=5e6,s=4096;let a=Math.floor(Math.sqrt(n*t)),i=Math.floor(n/Math.sqrt(n*t));if(a>s&&(a=s,i=Math.round(a/t)),i>s&&(i=s,a=Math.round(t*i)),e.width>a){const l=document.createElement("canvas");return l.width=a,l.height=i,l.getContext("2d").drawImage(e,0,0,a,i),l}return e}const oBe={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class rY extends Sm{constructor(n,s){super(n,{...oBe,...s});ge(this,"queue");ge(this,"queueProcessing");ge(this,"defaultThumbnailDimension");ge(this,"thumbnailType");ge(this,"onFileAdded",n=>{!n.preview&&n.data&&Q3(n.type)&&!n.isRemote&&this.addToQueue(n.id)});ge(this,"onCancelRequest",n=>{const s=this.queue.indexOf(n.id);s!==-1&&this.queue.splice(s,1)});ge(this,"onFileRemoved",n=>{const s=this.queue.indexOf(n.id);s!==-1&&this.queue.splice(s,1),n.preview&&Z3(n.preview)&&URL.revokeObjectURL(n.preview)});ge(this,"onRestored",()=>{this.uppy.getFiles().filter(s=>s.isRestored).forEach(s=>{(!s.preview||Z3(s.preview))&&this.addToQueue(s.id)})});ge(this,"onAllFilesRemoved",()=>{this.queue=[]});ge(this,"waitUntilAllProcessed",n=>{n.forEach(a=>{const i=this.uppy.getFile(a);this.uppy.emit("preprocess-progress",i,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const s=()=>{n.forEach(a=>{const i=this.uppy.getFile(a);this.uppy.emit("preprocess-complete",i)})};return new Promise(a=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{s(),a()}):(s(),a())})});if(this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=sBe,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(n,s,a){const i=URL.createObjectURL(n.data),l=new Promise((c,d)=>{const u=new Image;u.src=i,u.addEventListener("load",()=>{URL.revokeObjectURL(i),c(u)}),u.addEventListener("error",h=>{URL.revokeObjectURL(i),d(h.error||new Error("Could not create thumbnail"))})}),o=F9e(n.data).catch(()=>1);return Promise.all([l,o]).then(([c,d])=>{const u=this.getProportionalDimensions(c,s,a,d.deg),h=iBe(c,d),f=this.resizeImage(h,u.width,u.height);return aBe(f,this.thumbnailType,80)}).then(c=>URL.createObjectURL(c))}getProportionalDimensions(n,s,a,i){let l=n.width/n.height;return(i===90||i===270)&&(l=n.height/n.width),s!=null?{width:s,height:Math.round(s/l)}:a!=null?{width:Math.round(a*l),height:a}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/l)}}resizeImage(n,s,a){let i=lBe(n),l=Math.ceil(Math.log2(i.width/s));l<1&&(l=1);let o=s*2**(l-1),c=a*2**(l-1);const d=2;for(;l--;){const u=document.createElement("canvas");u.width=o,u.height=c,u.getContext("2d").drawImage(i,0,0,o,c),i=u,o=Math.round(o/d),c=Math.round(c/d)}return i}setPreviewURL(n,s){this.uppy.setFileState(n,{preview:s})}addToQueue(n){this.queue.push(n),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const n=this.uppy.getFile(this.queue.shift());return n?this.requestThumbnail(n).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(n){return Q3(n.type)&&!n.isRemote?this.createThumbnail(n,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(s=>{this.setPreviewURL(n.id,s),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${n.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(n.id),s)}).catch(s=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${n.id}:`,"warning"),this.uppy.log(s,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(n.id),s)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}ge(rY,"VERSION",nBe.version);function cF(e){if(typeof e=="string"){const t=document.querySelectorAll(e);return t.length===0?null:Array.from(t)}return typeof e=="object"&&hG(e)?[e]:null}const Cx=Array.from;function cBe(e){const t=Cx(e.files);return Promise.resolve(t)}function nY(e,t,n,{onSuccess:s}){e.readEntries(a=>{const i=[...t,...a];a.length?queueMicrotask(()=>{nY(e,i,n,{onSuccess:s})}):s(i)},a=>{n(a),s(t)})}function sY(e,t){return e==null?e:{kind:e.isFile?"file":e.isDirectory?"directory":void 0,name:e.name,getFile(){return new Promise((n,s)=>e.file(n,s))},async*values(){const n=e.createReader();yield*await new Promise(a=>{nY(n,[],t,{onSuccess:i=>a(i.map(l=>sY(l,t)))})})},isSameEntry:void 0}}async function*aY(e,t,n=void 0){const s=()=>`${t}/${e.name}`;if(e.kind==="file"){const a=await e.getFile();a!=null?(a.relativePath=t?s():null,yield a):n!=null&&(yield n)}else if(e.kind==="directory")for await(const a of e.values())yield*aY(a,t?s():e.name);else n!=null&&(yield n)}async function*dBe(e,t){const n=await Promise.all(Array.from(e.items,async s=>{let a;return a??(a=sY(typeof s.getAsEntry=="function"?s.getAsEntry():s.webkitGetAsEntry(),t)),{fileSystemHandle:a,lastResortFile:s.getAsFile()}}));for(const{lastResortFile:s,fileSystemHandle:a}of n)if(a!=null)try{yield*aY(a,"",s)}catch(i){s!=null?yield s:t(i)}else s!=null&&(yield s)}async function uBe(e,t){const n=(t==null?void 0:t.logDropError)??Function.prototype;try{const s=[];for await(const a of dBe(e,n))s.push(a);return s}catch{return cBe(e)}}const hBe="@uppy/dashboard",fBe="Universal UI plugin for Uppy.",mBe="4.4.3",pBe="MIT",xBe="lib/index.js",gBe="dist/style.min.css",vBe="module",yBe={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --silent='passed-only'","test:e2e":"vitest watch --project browser --browser.headless false"},bBe=["file uploader","uppy","uppy-plugin","dashboard","ui"],jBe="https://uppy.io",wBe={url:"https://github.com/transloadit/uppy/issues"},NBe={type:"git",url:"git+https://github.com/transloadit/uppy.git"},kBe=["src","lib","dist","CHANGELOG.md"],SBe={"@transloadit/prettier-bytes":"^0.3.4","@uppy/informer":"^4.3.2","@uppy/provider-views":"^4.5.2","@uppy/status-bar":"^4.2.3","@uppy/thumbnail-generator":"^4.2.2","@uppy/utils":"^6.2.2",classnames:"^2.2.6",lodash:"^4.17.21",nanoid:"^5.0.9",preact:"^10.5.13","shallow-equal":"^3.0.0"},CBe={"@uppy/core":"^4.5.2","@uppy/google-drive":"^4.4.2","@uppy/status-bar":"^4.2.3","@uppy/url":"^4.3.2","@uppy/webcam":"^4.3.2","@vitest/browser":"^3.2.4",cssnano:"^7.0.7",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1","resize-observer-polyfill":"^1.5.0",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},PBe={"@uppy/core":"^4.5.2"},_Be={name:hBe,description:fBe,version:mBe,license:pBe,main:xBe,style:gBe,type:vBe,scripts:yBe,keywords:bBe,homepage:jBe,bugs:wBe,repository:NBe,files:kBe,dependencies:SBe,devDependencies:CBe,peerDependencies:PBe};function ABe(){const e=document.body;return!(!("draggable"in e)||!("ondragstart"in e&&"ondrop"in e)||!("FormData"in window)||!("FileReader"in window))}class iY extends Gs{constructor(){super(...arguments);ge(this,"fileInput",null);ge(this,"folderInput",null);ge(this,"mobilePhotoFileInput",null);ge(this,"mobileVideoFileInput",null);ge(this,"triggerFileInputClick",()=>{var n;(n=this.fileInput)==null||n.click()});ge(this,"triggerFolderInputClick",()=>{var n;(n=this.folderInput)==null||n.click()});ge(this,"triggerVideoCameraInputClick",()=>{var n;(n=this.mobileVideoFileInput)==null||n.click()});ge(this,"triggerPhotoCameraInputClick",()=>{var n;(n=this.mobilePhotoFileInput)==null||n.click()});ge(this,"onFileInputChange",n=>{this.props.handleInputChange(n),n.currentTarget.value=""});ge(this,"renderHiddenInput",(n,s)=>{var a;return Q("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:n,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:(a=this.props.allowedFileTypes)==null?void 0:a.join(", "),ref:s})});ge(this,"renderHiddenCameraInput",(n,s,a)=>{const l={photo:"image/*",video:"video/*"}[n];return Q("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${n}`,onChange:this.onFileInputChange,capture:s===""?"environment":s,accept:l,ref:a})});ge(this,"renderMyDeviceAcquirer",()=>Q("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:Q("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[Q("div",{className:"uppy-DashboardTab-inner",children:Q("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:Q("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),Q("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})}));ge(this,"renderPhotoCamera",()=>Q("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:Q("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[Q("div",{className:"uppy-DashboardTab-inner",children:Q("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:Q("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),Q("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})}));ge(this,"renderVideoCamera",()=>Q("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:Q("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[Q("div",{className:"uppy-DashboardTab-inner",children:Q("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:Q("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),Q("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})}));ge(this,"renderBrowseButton",(n,s)=>{const a=this.props.acquirers.length;return Q("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:s,"data-uppy-super-focusable":a===0,children:n})});ge(this,"renderDropPasteBrowseTagline",n=>{const s=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),a=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),i=this.props.fileManagerSelectionType,l=i.charAt(0).toUpperCase()+i.slice(1);return Q("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):n>0?this.props.i18nArray(`dropPasteImport${l}`,{browseFiles:s,browseFolders:a,browse:s}):this.props.i18nArray(`dropPaste${l}`,{browseFiles:s,browseFolders:a,browse:s})})});ge(this,"renderAcquirer",n=>{var s;return Q("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":n.id,children:Q("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":n.id,"aria-controls":`uppy-DashboardContent-panel--${n.id}`,"aria-selected":((s=this.props.activePickerPanel)==null?void 0:s.id)===n.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(n.id),children:[Q("div",{className:"uppy-DashboardTab-inner",children:n.icon()}),Q("div",{className:"uppy-DashboardTab-name",children:n.name})]})})});ge(this,"renderAcquirers",n=>{const s=[...n],a=s.splice(n.length-2,n.length);return Q(Si,{children:[s.map(i=>this.renderAcquirer(i)),Q("span",{role:"presentation",style:{"white-space":"nowrap"},children:a.map(i=>this.renderAcquirer(i))})]})});ge(this,"renderSourcesList",(n,s)=>{const{showNativePhotoCameraButton:a,showNativeVideoCameraButton:i}=this.props;let l=[];const o="myDevice";s||l.push({key:o,elements:this.renderMyDeviceAcquirer()}),a&&l.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),i&&l.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),l.push(...n.map(h=>({key:h.id,elements:this.renderAcquirer(h)}))),l.length===1&&l[0].key===o&&(l=[]);const d=[...l],u=d.splice(l.length-2,l.length);return Q(Si,{children:[this.renderDropPasteBrowseTagline(l.length),Q("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[d.map(({key:h,elements:f})=>Q(Si,{children:f},h)),Q("span",{role:"presentation",style:{"white-space":"nowrap"},children:u.map(({key:h,elements:f})=>Q(Si,{children:f},h))})]})]})})}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:n}=this.props,s=Q("span",{children:[Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:Q("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),Q("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),a=n("poweredBy",{uppy:s});return Q("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:a})}render(){const{showNativePhotoCameraButton:n,showNativeVideoCameraButton:s,nativeCameraFacingMode:a}=this.props;return Q("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,i=>{this.fileInput=i}),this.renderHiddenInput(!0,i=>{this.folderInput=i}),n&&this.renderHiddenCameraInput("photo",a,i=>{this.mobilePhotoFileInput=i}),s&&this.renderHiddenCameraInput("video",a,i=>{this.mobileVideoFileInput=i}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),Q("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&Q("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const TBe=e=>Q("div",{className:qi("uppy-Dashboard-AddFilesPanel",e.className),"data-uppy-panelType":"AddFiles","aria-hidden":!e.showAddFilesPanel,children:[Q("div",{className:"uppy-DashboardContent-bar",children:[Q("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:e.i18n("addingMoreFiles")}),Q("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>e.toggleAddFilesPanel(!1),children:e.i18n("back")})]}),Q(iY,{...e})]});function EBe(e){const t=e.files[e.fileCardFor],n=()=>{e.uppy.emit("file-editor:cancel",t),e.closeFileEditor()};return Q("div",{className:qi("uppy-DashboardContent-panel",e.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[Q("div",{className:"uppy-DashboardContent-bar",children:[Q("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:e.i18nArray("editing",{file:Q("span",{className:"uppy-DashboardContent-titleFile",children:t.meta?t.meta.name:t.name})})}),Q("button",{className:"uppy-DashboardContent-back",type:"button",onClick:n,children:e.i18n("cancel")}),Q("button",{className:"uppy-DashboardContent-save",type:"button",onClick:e.saveFileEditor,children:e.i18n("save")})]}),Q("div",{className:"uppy-DashboardContent-panelBody",children:e.editors.map(s=>e.uppy.getPlugin(s.id).render(e.state))})]})}function OBe(){return Q("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:Q("g",{fill:"#686DE0",fillRule:"evenodd",children:[Q("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),Q("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),Q("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function RBe(){return Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:Q("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function DBe(){return Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:Q("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function MBe(){return Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:Q("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function $Be(){return Q("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:Q("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function IBe(){return Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:Q("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[Q("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),Q("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function FBe(){return Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:Q("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function AE(e){const t={color:"#838999",icon:IBe()};if(!e)return t;const n=e.split("/")[0],s=e.split("/")[1];return n==="text"?{color:"#5a5e69",icon:FBe()}:n==="image"?{color:"#686de0",icon:OBe()}:n==="audio"?{color:"#068dbb",icon:RBe()}:n==="video"?{color:"#19af67",icon:DBe()}:n==="application"&&s==="pdf"?{color:"#e25149",icon:MBe()}:n==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(s)!==-1?{color:"#00C469",icon:$Be()}:t}function wc(e){const{tagName:t}=e.target;if(t==="INPUT"||t==="TEXTAREA"){e.stopPropagation();return}e.preventDefault(),e.stopPropagation()}function lY(e){const{file:t}=e;if(t.preview)return Q("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:t.name,src:t.preview});const{color:n,icon:s}=AE(t.type);return Q("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[Q("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:n},children:s}),Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:Q("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function LBe(e){const{computedMetaFields:t,requiredMetaFields:n,updateMeta:s,form:a,formState:i}=e,l={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return t.map(o=>{const c=`uppy-Dashboard-FileCard-input-${o.id}`,d=n.includes(o.id);return Q("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[Q("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:c,children:o.name}),o.render!==void 0?o.render({value:i[o.id],onChange:u=>s(u,o.id),fieldCSSClasses:l,required:d,form:a.id},ev):Q("input",{className:l.text,id:c,form:a.id,type:o.type||"text",required:d,value:i[o.id],placeholder:o.placeholder,onInput:u=>s(u.target.value,o.id),"data-uppy-super-focusable":!0})]},o.id)})}function UBe(e){const{files:t,fileCardFor:n,toggleFileCard:s,saveFileCard:a,metaFields:i,requiredMetaFields:l,openFileEditor:o,i18n:c,i18nArray:d,className:u,canEditFile:h}=e,f=()=>typeof i=="function"?i(t[n]):i,m=t[n],g=f()??[],x=h(m),w={};g.forEach(S=>{w[S.id]=m.meta[S.id]??""});const[j,y]=aw(w),b=Z6e(S=>{S.preventDefault(),a(j,n)},[a,j,n]),p=(S,P)=>{y({...j,[P]:S})},N=()=>{s(!1)},[k]=aw(()=>{const S=document.createElement("form");return S.setAttribute("tabindex","-1"),S.id=NE(),S});return i_(()=>(document.body.appendChild(k),k.addEventListener("submit",b),()=>{k.removeEventListener("submit",b),document.body.removeChild(k)}),[k,b]),Q("div",{className:qi("uppy-Dashboard-FileCard",u),"data-uppy-panelType":"FileCard",onDragOver:wc,onDragLeave:wc,onDrop:wc,onPaste:wc,children:[Q("div",{className:"uppy-DashboardContent-bar",children:[Q("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:d("editing",{file:Q("span",{className:"uppy-DashboardContent-titleFile",children:m.meta?m.meta.name:m.name})})}),Q("button",{className:"uppy-DashboardContent-back",type:"button",form:k.id,title:c("finishEditingFile"),onClick:N,children:c("cancel")})]}),Q("div",{className:"uppy-Dashboard-FileCard-inner",children:[Q("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:AE(m.type).color},children:[Q(lY,{file:m}),x&&Q("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:S=>{b(S),o(m)},children:c("editImage")})]}),Q("div",{className:"uppy-Dashboard-FileCard-info",children:Q(LBe,{computedMetaFields:g,requiredMetaFields:l,updateMeta:p,form:k,formState:j})}),Q("div",{className:"uppy-Dashboard-FileCard-actions",children:[Q("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:k.id,children:c("saveChanges")}),Q("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:N,form:k.id,children:c("cancel")})]})]})]})}function BBe(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),s=Object.keys(t),a=n.length;if(s.length!==a)return!1;for(let i=0;i<a;i++){const l=n[i];if(e[l]!==t[l]||!Object.prototype.hasOwnProperty.call(t,l))return!1}return!0}function zBe(e,t="Copy the URL below"){return new Promise(n=>{const s=document.createElement("textarea");s.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),s.value=e,document.body.appendChild(s),s.select();const a=()=>{document.body.removeChild(s),window.prompt(t,e),n()};try{return document.execCommand("copy")?(document.body.removeChild(s),n()):a()}catch{return document.body.removeChild(s),a()}})}function VBe({file:e,uploadInProgressOrComplete:t,metaFields:n,canEditFile:s,i18n:a,onClick:i}){return!t&&n&&n.length>0||!t&&s(e)?Q("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":a("editFileWithFilename",{file:e.meta.name}),title:a("editFileWithFilename",{file:e.meta.name}),onClick:()=>i(),children:Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:Q("g",{fillRule:"evenodd",children:[Q("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),Q("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),Q("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function qBe({i18n:e,onClick:t,file:n}){return Q("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:n.meta.name}),title:e("removeFile",{file:n.meta.name}),onClick:()=>t(),children:Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[Q("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),Q("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function WBe({file:e,uppy:t,i18n:n}){const s=a=>{zBe(e.uploadURL,n("copyLinkToClipboardFallback")).then(()=>{t.log("Link copied to clipboard."),t.info(n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.log).then(()=>a.target.focus({preventScroll:!0}))};return Q("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":n("copyLink"),title:n("copyLink"),onClick:a=>s(a),children:Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:Q("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function HBe(e){const{uppy:t,file:n,uploadInProgressOrComplete:s,canEditFile:a,metaFields:i,showLinkToFileUploadResult:l,showRemoveButton:o,i18n:c,toggleFileCard:d,openFileEditor:u}=e;return Q("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[Q(VBe,{i18n:c,file:n,uploadInProgressOrComplete:s,canEditFile:a,metaFields:i,onClick:()=>{i&&i.length>0?d(!0,n.id):u(n)}}),l&&n.uploadURL?Q(WBe,{file:n,uppy:t,i18n:c}):null,o?Q(qBe,{i18n:c,file:n,onClick:()=>t.removeFile(n.id)}):null]})}const xS="...";function oY(e,t){if(t===0)return"";if(e.length<=t)return e;if(t<=xS.length+1)return`${e.slice(0,t-1)}…`;const n=t-xS.length,s=Math.ceil(n/2),a=Math.floor(n/2);return e.slice(0,s)+xS+e.slice(-a)}const KBe=(e,t)=>(typeof t=="function"?t():t).filter(a=>a.id===e)[0].name;function cY(e){const{file:t,toggleFileCard:n,i18n:s,metaFields:a}=e,{missingRequiredMetaFields:i}=t;if(!(i!=null&&i.length))return null;const l=i.map(o=>KBe(o,a)).join(", ");return Q("div",{className:"uppy-Dashboard-Item-errorMessage",children:[s("missingRequiredMetaFields",{smart_count:i.length,fields:l})," ",Q("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>n(!0,t.id),children:s("editFile")})]})}const GBe=e=>{const{author:t,name:n}=e.file.meta;function s(){return e.isSingleFile&&e.containerHeight>=350?90:e.containerWidth<=352?35:e.containerWidth<=576?60:t?20:30}return Q("div",{className:"uppy-Dashboard-Item-name",title:n,children:oY(n,s())})},YBe=e=>{var a;const{author:t}=e.file.meta,n=(a=e.file.remote)==null?void 0:a.providerName,s="·";return t?Q("div",{className:"uppy-Dashboard-Item-author",children:[Q("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:oY(t.name,13)}),n?Q(Si,{children:[` ${s} `,n,` ${s} `]}):null]}):null},XBe=e=>e.file.size&&Q("div",{className:"uppy-Dashboard-Item-statusSize",children:Rd(e.file.size)}),ZBe=e=>e.file.isGhost&&Q("span",{children:[" • ",Q("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>e.toggleAddFilesPanel(!0),children:e.i18n("reSelect")})]}),QBe=({file:e,onClick:t})=>e.error?Q("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:t,type:"button",children:"?"}):null;function JBe(e){const{file:t,i18n:n,toggleFileCard:s,metaFields:a,toggleAddFilesPanel:i,isSingleFile:l,containerHeight:o,containerWidth:c}=e;return Q("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":t.source,children:[Q("div",{className:"uppy-Dashboard-Item-fileName",children:[GBe({file:t,isSingleFile:l,containerHeight:o,containerWidth:c}),Q(QBe,{file:t,onClick:()=>alert(t.error)})]}),Q("div",{className:"uppy-Dashboard-Item-status",children:[YBe({file:t}),XBe({file:t}),ZBe({file:t,toggleAddFilesPanel:i,i18n:n})]}),Q(cY,{file:t,i18n:n,toggleFileCard:s,metaFields:a})]})}function e7e(e){const{file:t,i18n:n,toggleFileCard:s,metaFields:a,showLinkToFileUploadResult:i}=e,o=t.preview?"rgba(255, 255, 255, 0.5)":AE(t.type).color;return Q("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:o},children:[i&&t.uploadURL&&Q("a",{className:"uppy-Dashboard-Item-previewLink",href:t.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":t.meta.name,children:Q("span",{hidden:!0,children:t.meta.name})}),Q(lY,{file:t}),Q(cY,{file:t,i18n:n,toggleFileCard:s,metaFields:a})]})}function t7e(e){if(!e.isUploaded){if(e.error&&!e.hideRetryButton){e.uppy.retryUpload(e.file.id);return}e.resumableUploads&&!e.hidePauseResumeButton?e.uppy.pauseResume(e.file.id):e.individualCancellation&&!e.hideCancelButton&&e.uppy.removeFile(e.file.id)}}function dF(e){return e.isUploaded?e.i18n("uploadComplete"):e.error?e.i18n("retryUpload"):e.resumableUploads?e.file.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.individualCancellation?e.i18n("cancelUpload"):""}function gS(e){return Q("div",{className:"uppy-Dashboard-Item-progress",children:Q("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":dF(e),title:dF(e),onClick:()=>t7e(e),children:e.children})})}function g0({children:e}){return Q("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:e})}function vS({progress:e}){const t=2*Math.PI*15;return Q("g",{children:[Q("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),Q("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":t,"stroke-dashoffset":t-t/100*e})]})}function r7e(e){return!e.file.progress.uploadStarted||e.file.progress.percentage===void 0?null:e.isUploaded?Q("div",{className:"uppy-Dashboard-Item-progress",children:Q("div",{className:"uppy-Dashboard-Item-progressIndicator",children:Q(g0,{children:[Q("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),Q("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):e.recoveredState?null:e.error&&!e.hideRetryButton?Q(gS,{...e,children:Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[Q("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),Q("path",{d:"M7.9 3H10v2H7.9z"}),Q("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),Q("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):e.resumableUploads&&!e.hidePauseResumeButton?Q(gS,{...e,children:Q(g0,{children:[Q(vS,{progress:e.file.progress.percentage}),e.file.isPaused?Q("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):Q("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[Q("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),Q("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!e.resumableUploads&&e.individualCancellation&&!e.hideCancelButton?Q(gS,{...e,children:Q(g0,{children:[Q(vS,{progress:e.file.progress.percentage}),Q("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):Q("div",{className:"uppy-Dashboard-Item-progress",children:Q("div",{className:"uppy-Dashboard-Item-progressIndicator",children:Q(g0,{children:Q(vS,{progress:e.file.progress.percentage})})})})}class n7e extends Gs{componentDidMount(){const{file:t}=this.props;t.preview||this.props.handleRequestThumbnail(t)}shouldComponentUpdate(t){return!BBe(this.props,t)}componentDidUpdate(){const{file:t}=this.props;t.preview||this.props.handleRequestThumbnail(t)}componentWillUnmount(){const{file:t}=this.props;t.preview||this.props.handleCancelThumbnail(t)}render(){const{file:t}=this.props,n=t.progress.preprocess||t.progress.postprocess,s=!!t.progress.uploadComplete&&!n&&!t.error,a=!!t.progress.uploadStarted||!!n,i=t.progress.uploadStarted&&!t.progress.uploadComplete||n,l=t.error||!1,{isGhost:o}=t;let c=(this.props.individualCancellation||!i)&&!s;s&&this.props.showRemoveButtonAfterComplete&&(c=!0);const d=qi({"uppy-Dashboard-Item":!0,"is-inprogress":i&&!this.props.recoveredState,"is-processing":n,"is-complete":s,"is-error":!!l,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":o});return Q("div",{className:d,id:`uppy_${t.id}`,role:this.props.role,children:[Q("div",{className:"uppy-Dashboard-Item-preview",children:[Q(e7e,{file:t,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),Q(r7e,{uppy:this.props.uppy,file:t,error:l,isUploaded:s,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),Q("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[Q(JBe,{file:t,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),Q(HBe,{file:t,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:c,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:a,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function s7e(e,t){const n=[];let s=[];return e.forEach(a=>{s.length<t?s.push(a):(n.push(s),s=[a])}),s.length&&n.push(s),n}function a7e({id:e,i18n:t,uppy:n,files:s,resumableUploads:a,hideRetryButton:i,hidePauseResumeButton:l,hideCancelButton:o,showLinkToFileUploadResult:c,showRemoveButtonAfterComplete:d,metaFields:u,isSingleFile:h,toggleFileCard:f,handleRequestThumbnail:m,handleCancelThumbnail:g,recoveredState:x,individualCancellation:w,itemsPerRow:j,openFileEditor:y,canEditFile:b,toggleAddFilesPanel:p,containerWidth:N,containerHeight:k}){const S=j===1?71:200,P=wE(()=>{const R=(M,A)=>Number(s[A].isGhost)-Number(s[M].isGhost),O=Object.keys(s);return x&&O.sort(R),s7e(O,j)},[s,j,x]),_=R=>Q("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:R.map(O=>Q(n7e,{uppy:n,id:e,i18n:t,resumableUploads:a,individualCancellation:w,hideRetryButton:i,hidePauseResumeButton:l,hideCancelButton:o,showLinkToFileUploadResult:c,showRemoveButtonAfterComplete:d,metaFields:u,recoveredState:x,isSingleFile:h,containerWidth:N,containerHeight:k,toggleFileCard:f,handleRequestThumbnail:m,handleCancelThumbnail:g,role:"listitem",openFileEditor:y,canEditFile:b,toggleAddFilesPanel:p,file:s[O]},O))},R[0]);return h?Q("div",{class:"uppy-Dashboard-files",children:_(P[0])}):Q(MUe,{class:"uppy-Dashboard-files",role:"list",data:P,renderRow:_,rowHeight:S})}function i7e({activePickerPanel:e,className:t,hideAllPanels:n,i18n:s,state:a,uppy:i}){const l=W0(null);return Q("div",{className:qi("uppy-DashboardContent-panel",t),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:wc,onDragLeave:wc,onDrop:wc,onPaste:wc,children:[Q("div",{className:"uppy-DashboardContent-bar",children:[Q("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:s("importFrom",{name:e.name})}),Q("button",{className:"uppy-DashboardContent-back",type:"button",onClick:n,children:s("cancel")})]}),Q("div",{ref:l,className:"uppy-DashboardContent-panelBody",children:i.getPlugin(e.id).render(a,l.current)})]})}const Qi={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function l7e(e,t,n,s={}){if(e)return Qi.STATE_ERROR;if(t)return Qi.STATE_COMPLETE;if(n)return Qi.STATE_PAUSED;let a=Qi.STATE_WAITING;const i=Object.keys(s);for(let l=0;l<i.length;l++){const{progress:o}=s[i[l]];if(o.uploadStarted&&!o.uploadComplete)return Qi.STATE_UPLOADING;o.preprocess&&a!==Qi.STATE_UPLOADING&&(a=Qi.STATE_PREPROCESSING),o.postprocess&&a!==Qi.STATE_UPLOADING&&a!==Qi.STATE_PREPROCESSING&&(a=Qi.STATE_POSTPROCESSING)}return a}function o7e({files:e,i18n:t,isAllComplete:n,isAllErrored:s,isAllPaused:a,inProgressNotPausedFiles:i,newFiles:l,processingFiles:o}){switch(l7e(s,n,a,e)){case"uploading":return t("uploadingXFiles",{smart_count:i.length});case"preprocessing":case"postprocessing":return t("processingXFiles",{smart_count:o.length});case"paused":return t("uploadPaused");case"waiting":return t("xFilesSelected",{smart_count:l.length});case"complete":return t("uploadComplete");case"error":return t("error")}}function c7e(e){const{i18n:t,isAllComplete:n,hideCancelButton:s,maxNumberOfFiles:a,toggleAddFilesPanel:i,uppy:l}=e;let{allowNewUpload:o}=e;return o&&a&&(o=e.totalFileCount<e.maxNumberOfFiles),Q("div",{className:"uppy-DashboardContent-bar",children:[!n&&!s?Q("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>l.cancelAll(),children:t("cancel")}):Q("div",{}),Q("div",{className:"uppy-DashboardContent-title",children:Q(o7e,{...e})}),o?Q("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":t("addMoreFiles"),title:t("addMoreFiles"),onClick:()=>i(!0),children:[Q("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:Q("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),Q("span",{className:"uppy-DashboardContent-addMoreCaption",children:t("addMore")})]}):Q("div",{})]})}const sh="uppy-transition-slideDownUp",uF=250;function v0({children:e}){const[t,n]=aw(null),[s,a]=aw(""),i=W0(),l=W0(),o=W0(),c=()=>{a(`${sh}-enter`),cancelAnimationFrame(o.current),clearTimeout(l.current),l.current=void 0,o.current=requestAnimationFrame(()=>{a(`${sh}-enter ${sh}-enter-active`),i.current=setTimeout(()=>{a("")},uF)})},d=()=>{a(`${sh}-leave`),cancelAnimationFrame(o.current),clearTimeout(i.current),i.current=void 0,o.current=requestAnimationFrame(()=>{a(`${sh}-leave ${sh}-leave-active`),l.current=setTimeout(()=>{n(null),a("")},uF)})};return i_(()=>{const u=yi(e)[0];t!==u&&(u&&!t?c():t&&!u&&!l.current&&d(),n(u))},[e,t]),i_(()=>()=>{clearTimeout(i.current),clearTimeout(l.current),cancelAnimationFrame(o.current)},[]),t?SG(t,{className:qi(s,t.props.className)}):null}const hF=900,fF=700,yS=576,mF=330;function d7e(e){const t=e.totalFileCount===0,n=e.totalFileCount===1,s=e.containerWidth>yS,a=e.containerHeight>mF,i=qi({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":e.disabled,"uppy-Dashboard--animateOpenClose":e.animateOpenClose,"uppy-Dashboard--isClosing":e.isClosing,"uppy-Dashboard--isDraggingOver":e.isDraggingOver,"uppy-Dashboard--modal":!e.inline,"uppy-size--md":e.containerWidth>yS,"uppy-size--lg":e.containerWidth>fF,"uppy-size--xl":e.containerWidth>hF,"uppy-size--height-md":e.containerHeight>mF,"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":e.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":e.singleFileFullScreen&&n&&a});let l=1;e.containerWidth>hF?l=5:e.containerWidth>fF?l=4:e.containerWidth>yS&&(l=3);const o=e.showSelectedFiles&&!t,c=e.recoveredState?Object.keys(e.recoveredState.files).length:null,d=e.files?Object.keys(e.files).filter(f=>e.files[f].isGhost).length:0,u=()=>d>0?e.i18n("recoveredXFiles",{smart_count:d}):e.i18n("recoveredAllFiles");return Q("div",{className:i,"data-uppy-theme":e.theme,"data-uppy-num-acquirers":e.acquirers.length,"data-uppy-drag-drop-supported":!e.disableLocalFiles&&ABe(),"aria-hidden":e.inline?"false":e.isHidden,"aria-disabled":e.disabled,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onPaste:e.handlePaste,onDragOver:e.handleDragOver,onDragLeave:e.handleDragLeave,onDrop:e.handleDrop,children:[Q("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:e.handleClickOutside}),Q("div",{className:"uppy-Dashboard-inner",role:e.inline?void 0:"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""},children:[e.inline?null:Q("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onClick:e.closeModal,children:Q("span",{"aria-hidden":"true",children:"×"})}),Q("div",{className:"uppy-Dashboard-innerWrap",children:[Q("div",{className:"uppy-Dashboard-dropFilesHereHint",children:e.i18n("dropHint")}),o&&Q(c7e,{...e}),c&&Q("div",{className:"uppy-Dashboard-serviceMsg",children:[Q("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:Q("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[Q("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),Q("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),Q("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),Q("strong",{className:"uppy-Dashboard-serviceMsg-title",children:e.i18n("sessionRestored")}),Q("div",{className:"uppy-Dashboard-serviceMsg-text",children:u()})]}),o?Q(a7e,{id:e.id,i18n:e.i18n,uppy:e.uppy,files:e.files,resumableUploads:e.resumableUploads,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,metaFields:e.metaFields,toggleFileCard:e.toggleFileCard,handleRequestThumbnail:e.handleRequestThumbnail,handleCancelThumbnail:e.handleCancelThumbnail,recoveredState:e.recoveredState,individualCancellation:e.individualCancellation,openFileEditor:e.openFileEditor,canEditFile:e.canEditFile,toggleAddFilesPanel:e.toggleAddFilesPanel,isSingleFile:n,itemsPerRow:l,containerWidth:e.containerWidth,containerHeight:e.containerHeight}):Q(iY,{i18n:e.i18n,i18nArray:e.i18nArray,acquirers:e.acquirers,handleInputChange:e.handleInputChange,maxNumberOfFiles:e.maxNumberOfFiles,allowedFileTypes:e.allowedFileTypes,showNativePhotoCameraButton:e.showNativePhotoCameraButton,showNativeVideoCameraButton:e.showNativeVideoCameraButton,nativeCameraFacingMode:e.nativeCameraFacingMode,showPanel:e.showPanel,activePickerPanel:e.activePickerPanel,disableLocalFiles:e.disableLocalFiles,fileManagerSelectionType:e.fileManagerSelectionType,note:e.note,proudlyDisplayPoweredByUppy:e.proudlyDisplayPoweredByUppy}),Q(v0,{children:e.showAddFilesPanel?Q(TBe,{...e,isSizeMD:s},"AddFiles"):null}),Q(v0,{children:e.fileCardFor?Q(UBe,{...e},"FileCard"):null}),Q(v0,{children:e.activePickerPanel?Q(i7e,{...e},"Picker"):null}),Q(v0,{children:e.showFileEditor?Q(EBe,{...e},"Editor"):null}),Q("div",{className:"uppy-Dashboard-progressindicators",children:e.progressindicators.map(f=>e.uppy.getPlugin(f.id).render(e.state))})]})]})]})}const u7e={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}},dY=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function uY(e,t){if(t){const n=e.querySelector(`[data-uppy-paneltype="${t}"]`);if(n)return n}return e}function h7e(){let e=!1;return $1e((n,s)=>{const a=uY(n,s),i=a.contains(document.activeElement);if(i&&e)return;const l=a.querySelector("[data-uppy-super-focusable]");if(!(i&&!l))if(l)l.focus({preventScroll:!0}),e=!0;else{const o=a.querySelector(dY);o==null||o.focus({preventScroll:!0}),e=!1}},260)}function pF(e,t){const n=t[0];n&&(n.focus(),e.preventDefault())}function f7e(e,t){const n=t[t.length-1];n&&(n.focus(),e.preventDefault())}function m7e(e){return e.contains(document.activeElement)}function hY(e,t,n){const s=uY(n,t),a=Cx(s.querySelectorAll(dY)),i=a.indexOf(document.activeElement);m7e(s)?e.shiftKey&&i===0?f7e(e,a):!e.shiftKey&&i===a.length-1&&pF(e,a):pF(e,a)}function p7e(e,t,n){t===null||hY(e,t,n)}const xF=9,x7e=27;function gF(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}const g7e={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:$Ue,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};var PS,uf,Wd,mv,hf,pw,xw,gw,Hd,vw,yw,ff,Un,j_,w_,fY,N_,k_,mY;let v7e=(PS=class extends Sm{constructor(n,s){var i;const a=(s==null?void 0:s.autoOpen)??null;super(n,{...g7e,...s,autoOpen:a});ve(this,Un);ve(this,uf);ge(this,"modalName",`uppy-Dashboard-${NE()}`);ge(this,"superFocus",h7e());ge(this,"ifFocusedOnUppyRecently",!1);ge(this,"dashboardIsDisabled");ge(this,"savedScrollPosition");ge(this,"savedActiveElement");ge(this,"resizeObserver");ge(this,"darkModeMediaQuery");ge(this,"makeDashboardInsidesVisibleAnywayTimeout");ge(this,"removeTarget",n=>{const a=this.getPluginState().targets.filter(i=>i.id!==n.id);this.setPluginState({targets:a})});ge(this,"addTarget",n=>{const s=n.id||n.constructor.name,a=n.title||s,i=n.type;if(i!=="acquirer"&&i!=="progressindicator"&&i!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const l={id:s,name:a,type:i},c=this.getPluginState().targets.slice();return c.push(l),this.setPluginState({targets:c}),this.el});ge(this,"hideAllPanels",()=>{var a;const n=this.getPluginState(),s={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};n.activePickerPanel===s.activePickerPanel&&n.showAddFilesPanel===s.showAddFilesPanel&&n.showFileEditor===s.showFileEditor&&n.activeOverlayType===s.activeOverlayType||(this.setPluginState(s),this.uppy.emit("dashboard:close-panel",(a=n.activePickerPanel)==null?void 0:a.id))});ge(this,"showPanel",n=>{const{targets:s}=this.getPluginState(),a=s.find(i=>i.type==="acquirer"&&i.id===n);this.setPluginState({activePickerPanel:a,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",n)});ge(this,"canEditFile",n=>{const{targets:s}=this.getPluginState();return L(this,Hd).call(this,s).some(i=>this.uppy.getPlugin(i.id).canEditFile(n))});ge(this,"openFileEditor",n=>{const{targets:s}=this.getPluginState(),a=L(this,Hd).call(this,s);this.setPluginState({showFileEditor:!0,fileCardFor:n.id||null,activeOverlayType:"FileEditor"}),a.forEach(i=>{this.uppy.getPlugin(i.id).selectFile(n)})});ge(this,"closeFileEditor",()=>{const{metaFields:n}=this.getPluginState();n&&n.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})});ge(this,"saveFileEditor",()=>{const{targets:n}=this.getPluginState();L(this,Hd).call(this,n).forEach(a=>{this.uppy.getPlugin(a.id).save()}),this.closeFileEditor()});ge(this,"openModal",()=>{const{promise:n,resolve:s}=gF();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const a=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",a,!1),s()};this.el.addEventListener("animationend",a,!1)}else this.setPluginState({isHidden:!1}),s();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),n});ge(this,"closeModal",n=>{var c;const s=(n==null?void 0:n.manualClose)??!0,{isHidden:a,isClosing:i}=this.getPluginState();if(a||i)return;const{promise:l,resolve:o}=gF();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const d=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",d,!1),o()};this.el.addEventListener("animationend",d,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),o();return document.removeEventListener("keydown",this.handleKeyDownInModal),s&&this.opts.browserBackButtonClose&&(c=history.state)!=null&&c[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),l});ge(this,"isModalOpen",()=>!this.getPluginState().isHidden||!1);ge(this,"requestCloseModal",()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal());ge(this,"setDarkModeCapability",n=>{const{capabilities:s}=this.uppy.getState();this.uppy.setState({capabilities:{...s,darkMode:n}})});ge(this,"handleSystemDarkModeChange",n=>{const s=n.matches;this.uppy.log(`[Dashboard] Dark mode is ${s?"on":"off"}`),this.setDarkModeCapability(s)});ge(this,"toggleFileCard",(n,s)=>{const a=this.uppy.getFile(s);n?this.uppy.emit("dashboard:file-edit-start",a):this.uppy.emit("dashboard:file-edit-complete",a),this.setPluginState({fileCardFor:n?s:null,activeOverlayType:n?"FileCard":null})});ge(this,"toggleAddFilesPanel",n=>{this.setPluginState({showAddFilesPanel:n,activeOverlayType:n?"AddFiles":null})});ge(this,"addFiles",n=>{const s=n.map(a=>({source:this.id,name:a.name,type:a.type,data:a,meta:{relativePath:a.relativePath||a.webkitRelativePath||null}}));try{this.uppy.addFiles(s)}catch(a){this.uppy.log(a)}});ge(this,"startListeningToResize",()=>{this.resizeObserver=new ResizeObserver(n=>{const s=n[0],{width:a,height:i}=s.contentRect;this.setPluginState({containerWidth:a,containerHeight:i,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const n=this.getPluginState(),s=!this.opts.inline&&n.isHidden;!n.areInsidesReadyToBeVisible&&!s&&(this.uppy.log("[Dashboard] resize event didn’t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)});ge(this,"stopListeningToResize",()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)});ge(this,"recordIfFocusedOnUppyRecently",n=>{this.el.contains(n.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())});ge(this,"disableInteractiveElements",n=>{const s=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],a=L(this,uf)??Cx(this.el.querySelectorAll(s)).filter(i=>!i.classList.contains("uppy-Dashboard-close"));for(const i of a)i.tagName==="A"?i.setAttribute("aria-disabled",n):i.disabled=n;n?we(this,uf,a):we(this,uf,null),this.dashboardIsDisabled=n});ge(this,"updateBrowserHistory",()=>{var n;(n=history.state)!=null&&n[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)});ge(this,"handlePopState",n=>{var s;this.isModalOpen()&&(!n.state||!n.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&((s=n.state)!=null&&s[this.modalName])&&history.back()});ge(this,"handleKeyDownInModal",n=>{n.keyCode===x7e&&this.requestCloseModal(),n.keyCode===xF&&hY(n,this.getPluginState().activeOverlayType,this.el)});ge(this,"handleClickOutside",()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()});ge(this,"handlePaste",n=>{this.uppy.iteratePlugins(a=>{var i;a.type==="acquirer"&&((i=a.handleRootPaste)==null||i.call(a,n))});const s=Cx(n.clipboardData.files);s.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(s))});ge(this,"handleInputChange",n=>{n.preventDefault();const s=Cx(n.currentTarget.files||[]);s.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(s))});ge(this,"handleDragOver",n=>{n.preventDefault(),n.stopPropagation();const s=()=>{let o=!0;return this.uppy.iteratePlugins(c=>{var d;(d=c.canHandleRootDrop)!=null&&d.call(c,n)&&(o=!0)}),o},a=()=>{const{types:o}=n.dataTransfer;return o.some(c=>c==="Files")},i=s(),l=a();if(!i&&!l||this.opts.disabled||this.opts.disableLocalFiles&&(l||!i)||!this.uppy.getState().allowNewUpload){n.dataTransfer.dropEffect="none";return}n.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(n)});ge(this,"handleDragLeave",n=>{n.preventDefault(),n.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(n)});ge(this,"handleDrop",async n=>{n.preventDefault(),n.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(l=>{var o;l.type==="acquirer"&&((o=l.handleRootDrop)==null||o.call(l,n))});let s=!1;const a=l=>{this.uppy.log(l,"error"),s||(this.uppy.info(l.message,"error"),s=!0)};this.uppy.log("[Dashboard] Processing dropped files");const i=await uBe(n.dataTransfer,{logDropError:a});i.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(i)),this.opts.onDrop(n)});ge(this,"handleRequestThumbnail",n=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",n)});ge(this,"handleCancelThumbnail",n=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",n)});ge(this,"handleKeyDownInInline",n=>{n.keyCode===xF&&p7e(n,this.getPluginState().activeOverlayType,this.el)});ge(this,"handlePasteOnBody",n=>{this.el.contains(document.activeElement)&&this.handlePaste(n)});ge(this,"handleComplete",({failed:n})=>{this.opts.closeAfterFinish&&!(n!=null&&n.length)&&this.requestCloseModal()});ge(this,"handleCancelRestore",()=>{this.uppy.emit("restore-canceled")});ve(this,Wd,()=>{if(this.opts.disableThumbnailGenerator)return;const n=600,s=this.uppy.getFiles();if(s.length===1){const a=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);a==null||a.setOptions({thumbnailWidth:n});const i={...s[0],preview:void 0};a==null||a.requestThumbnail(i).then(()=>{a==null||a.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}});ve(this,mv,n=>{const s=n[0],{metaFields:a}=this.getPluginState(),i=a&&a.length>0,l=this.canEditFile(s);i&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,s.id):l&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(s)});ge(this,"initEvents",()=>{if(this.opts.trigger&&!this.opts.inline){const n=cF(this.opts.trigger);n?n.forEach(s=>s.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",L(this,ff)),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",L(this,Wd)),this.uppy.on("file-removed",L(this,Wd)),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",L(this,mv))});ge(this,"removeEvents",()=>{const n=cF(this.opts.trigger);!this.opts.inline&&n&&n.forEach(s=>s.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",L(this,ff)),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",L(this,Wd)),this.uppy.off("file-removed",L(this,Wd)),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",L(this,mv))});ge(this,"superFocusOnEachUpdate",()=>{const n=this.el.contains(document.activeElement),s=document.activeElement===document.body||document.activeElement===null,a=this.uppy.getState().info.length===0,i=!this.opts.inline;a&&(i||n||s&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()});ge(this,"afterUpdate",()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()});ge(this,"saveFileCard",(n,s)=>{this.uppy.setFileMeta(s,n),this.toggleFileCard(!1,s)});ve(this,hf,n=>{const s=this.uppy.getPlugin(n.id);return{...n,icon:s.icon||this.opts.defaultPickerIcon,render:s.render}});ve(this,pw,n=>{const s=this.uppy.getPlugin(n.id);return typeof s.isSupported!="function"?!0:s.isSupported()});ve(this,xw,n=>n.filter(s=>s.type==="acquirer"&&L(this,pw).call(this,s)).map(L(this,hf)));ve(this,gw,n=>n.filter(s=>s.type==="progressindicator").map(L(this,hf)));ve(this,Hd,n=>n.filter(s=>s.type==="editor").map(L(this,hf)));ge(this,"render",n=>{const s=this.getPluginState(),{files:a,capabilities:i,allowNewUpload:l}=n,{newFiles:o,uploadStartedFiles:c,completeFiles:d,erroredFiles:u,inProgressFiles:h,inProgressNotPausedFiles:f,processingFiles:m,isUploadStarted:g,isAllComplete:x,isAllPaused:w}=this.uppy.getObjectOfFilesPerState(),j=L(this,xw).call(this,s.targets),y=L(this,gw).call(this,s.targets),b=L(this,Hd).call(this,s.targets);let p;return this.opts.theme==="auto"?p=i.darkMode?"dark":"light":p=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),d7e({state:n,isHidden:s.isHidden,files:a,newFiles:o,uploadStartedFiles:c,completeFiles:d,erroredFiles:u,inProgressFiles:h,inProgressNotPausedFiles:f,processingFiles:m,isUploadStarted:g,isAllComplete:x,isAllPaused:w,totalFileCount:Object.keys(a).length,totalProgress:n.totalProgress,allowNewUpload:l,acquirers:j,theme:p,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:s.activePickerPanel,showFileEditor:s.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:s.isClosing,progressindicators:y,editors:b,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:n.recoveredState,metaFields:s.metaFields,resumableUploads:i.resumableUploads||!1,individualCancellation:i.individualCancellation,isMobileDevice:i.isMobileDevice,fileCardFor:s.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:s.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:s.containerWidth,containerHeight:s.containerHeight,areInsidesReadyToBeVisible:s.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:s.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})});ve(this,vw,()=>{const{plugins:n}=this.opts;n.forEach(s=>{const a=this.uppy.getPlugin(s);a?a.mount(this,a):this.uppy.log(`[Uppy] Dashboard could not find plugin '${s}', make sure to uppy.use() the plugins you are specifying`,"warning")})});ve(this,yw,()=>{this.uppy.iteratePlugins(L(this,ff))});ve(this,ff,n=>{var a;const s=["acquirer","editor"];n&&!((a=n.opts)!=null&&a.target)&&s.includes(n.type)&&(this.getPluginState().targets.some(l=>n.id===l.id)||n.mount(this,n))});ge(this,"install",()=>{var c;this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:n,closeAfterFinish:s}=this.opts;if(n&&s)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:a,allowMultipleUploadBatches:i}=this.uppy.opts;(a||i)&&s&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:l}=this.opts;l&&this.mount(l,this),this.opts.disableStatusBar||this.uppy.use(j9e,{id:Pe(this,Un,N_).call(this),target:this,...Pe(this,Un,j_).call(this)}),this.opts.disableInformer||this.uppy.use(VG,{id:Pe(this,Un,mY).call(this),target:this,...Pe(this,Un,fY).call(this)}),this.opts.disableThumbnailGenerator||this.uppy.use(rY,{id:Pe(this,Un,k_).call(this),...Pe(this,Un,w_).call(this)}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const o=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${o?"on":"off"}`),this.setDarkModeCapability(o),this.opts.theme==="auto"&&((c=this.darkModeMediaQuery)==null||c.addListener(this.handleSystemDarkModeChange)),L(this,vw).call(this),L(this,yw).call(this),this.initEvents()});ge(this,"uninstall",()=>{var s;if(!this.opts.disableInformer){const a=this.uppy.getPlugin(`${this.id}:Informer`);a&&this.uppy.removePlugin(a)}if(!this.opts.disableStatusBar){const a=this.uppy.getPlugin(`${this.id}:StatusBar`);a&&this.uppy.removePlugin(a)}if(!this.opts.disableThumbnailGenerator){const a=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);a&&this.uppy.removePlugin(a)}const{plugins:n}=this.opts;n.forEach(a=>{const i=this.uppy.getPlugin(a);i&&i.unmount()}),this.opts.theme==="auto"&&((s=this.darkModeMediaQuery)==null||s.removeListener(this.handleSystemDarkModeChange)),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()});this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=u7e,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(i=this.opts).onRequestCloseModal??(i.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(n){var s,a;super.setOptions(n),(s=this.uppy.getPlugin(Pe(this,Un,N_).call(this)))==null||s.setOptions(Pe(this,Un,j_).call(this)),(a=this.uppy.getPlugin(Pe(this,Un,k_).call(this)))==null||a.setOptions(Pe(this,Un,w_).call(this))}},uf=new WeakMap,Wd=new WeakMap,mv=new WeakMap,hf=new WeakMap,pw=new WeakMap,xw=new WeakMap,gw=new WeakMap,Hd=new WeakMap,vw=new WeakMap,yw=new WeakMap,ff=new WeakMap,Un=new WeakSet,j_=function(){const{hideUploadButton:n,hideRetryButton:s,hidePauseResumeButton:a,hideCancelButton:i,showProgressDetails:l,hideProgressAfterFinish:o,locale:c,doneButtonHandler:d}=this.opts;return{hideUploadButton:n,hideRetryButton:s,hidePauseResumeButton:a,hideCancelButton:i,showProgressDetails:l,hideAfterFinish:o,locale:c,doneButtonHandler:d}},w_=function(){const{thumbnailWidth:n,thumbnailHeight:s,thumbnailType:a,waitForThumbnailsBeforeUpload:i}=this.opts;return{thumbnailWidth:n,thumbnailHeight:s,thumbnailType:a,waitForThumbnailsBeforeUpload:i,lazy:!i}},fY=function(){return{}},N_=function(){return`${this.id}:StatusBar`},k_=function(){return`${this.id}:ThumbnailGenerator`},mY=function(){return`${this.id}:Informer`},ge(PS,"VERSION",_Be.version),PS);const y7e=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],b7e=/^(aria-|data-)/,pY=e=>Object.fromEntries(Object.entries(e).filter(([t])=>b7e.test(t)||y7e.includes(t)));function j7e(e,t){const n=pY(e);return Object.keys(e).some(s=>!Object.hasOwn(n,s)&&e[s]!==t[s])}class xY extends v.Component{constructor(){super(...arguments);ge(this,"container");ge(this,"plugin")}componentDidMount(){this.installPlugin()}componentDidUpdate(n){const{uppy:s,open:a,onRequestClose:i}=this.props;if(n.uppy!==s)this.uninstallPlugin(n),this.installPlugin();else if(j7e(this.props,n)){const{uppy:l,...o}={...this.props,inline:!1,onRequestCloseModal:i};this.plugin.setOptions(o)}n.open&&!a?this.plugin.closeModal():!n.open&&a&&this.plugin.openModal()}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{target:n=this.container,open:s,onRequestClose:a,uppy:i,...l}=this.props,o={id:"DashboardModal",...l,inline:!1,target:n,open:s,onRequestCloseModal:a};i.use(v7e,o),this.plugin=i.getPlugin(o.id),s&&this.plugin.openModal()}uninstallPlugin(n=this.props){const{uppy:s}=n;s.removePlugin(this.plugin)}render(){return v.createElement("div",{className:"uppy-Container",ref:n=>{this.container=n},...pY(this.props)})}}ge(xY,"defaultProps",{open:void 0,onRequestClose:void 0});v.createContext({uppy:void 0,status:"init",progress:0});var w7e={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy=v;function N7e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var k7e=typeof Object.is=="function"?Object.is:N7e,S7e=xy.useSyncExternalStore,C7e=xy.useRef,P7e=xy.useEffect,_7e=xy.useMemo,A7e=xy.useDebugValue;w7e.useSyncExternalStoreWithSelector=function(e,t,n,s,a){var i=C7e(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=_7e(function(){function c(m){if(!d){if(d=!0,u=m,m=s(m),a!==void 0&&l.hasValue){var g=l.value;if(a(g,m))return h=g}return h=m}if(g=h,k7e(u,m))return g;var x=s(m);return a!==void 0&&a(g,x)?g:(u=m,h=x)}var d=!1,u,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,a]);var o=S7e(e,i[0],i[1]);return P7e(function(){l.hasValue=!0,l.value=o},[o]),A7e(o),o};function gY(e,t){return Object.hasOwn(e,t)}class T7e extends Error{constructor(n,s){super(n);ge(this,"isNetworkError");ge(this,"cause");this.cause=s==null?void 0:s.cause,this.cause&&gY(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}}class E7e extends Error{constructor(n,s=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.");ge(this,"cause");ge(this,"isNetworkError");ge(this,"request");this.cause=n,this.isNetworkError=!0,this.request=s}}function O7e(...e){return fetch(...e).catch(t=>{throw t.name==="AbortError"?t:new E7e(t)})}function R7e(e){var a;const n=(a=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?([^\n]+)/i.exec(e))==null?void 0:a[1];return`${/^http:\/\//i.test(e)?"ws":"wss"}://${n}`}class D7e extends Error{constructor(){super(...arguments);ge(this,"name","UserFacingApiError")}}var vY={};function Xa(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var M7e=Xa;Xa.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Xa.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Xa.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var s=this;return this._timer=setTimeout(function(){s._attempts++,s._operationTimeoutCb&&(s._timeout=setTimeout(function(){s._operationTimeoutCb(s._attempts)},s._operationTimeout),s._options.unref&&s._timeout.unref()),s._fn(s._attempts)},n),this._options.unref&&this._timer.unref(),!0};Xa.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Xa.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)};Xa.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)};Xa.prototype.start=Xa.prototype.try;Xa.prototype.errors=function(){return this._errors};Xa.prototype.attempts=function(){return this._attempts};Xa.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,n=0,s=0;s<this._errors.length;s++){var a=this._errors[s],i=a.message,l=(e[i]||0)+1;e[i]=l,l>=n&&(t=a,n=l)}return t};(function(e){var t=M7e;e.operation=function(n){var s=e.timeouts(n);return new t(s,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},e.timeouts=function(n){if(n instanceof Array)return[].concat(n);var s={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var a in n)s[a]=n[a];if(s.minTimeout>s.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],l=0;l<s.retries;l++)i.push(this.createTimeout(l,s));return n&&n.forever&&!i.length&&i.push(this.createTimeout(l,s)),i.sort(function(o,c){return o-c}),i},e.createTimeout=function(n,s){var a=s.randomize?Math.random()+1:1,i=Math.round(a*Math.max(s.minTimeout,1)*Math.pow(s.factor,n));return i=Math.min(i,s.maxTimeout),i},e.wrap=function(n,s,a){if(s instanceof Array&&(a=s,s=null),!a){a=[];for(var i in n)typeof n[i]=="function"&&a.push(i)}for(var l=0;l<a.length;l++){var o=a[l],c=n[o];n[o]=(function(u){var h=e.operation(s),f=Array.prototype.slice.call(arguments,1),m=f.pop();f.push(function(g){h.retry(g)||(g&&(arguments[0]=h.mainError()),m.apply(this,arguments))}),h.attempt(function(){u.apply(n,f)})}).bind(n,c),n[o].options=s}}})(vY);var $7e=vY;const I7e=er($7e),F7e=Object.prototype.toString,L7e=e=>F7e.call(e)==="[object Error]",U7e=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function B7e(e){return e&&L7e(e)&&e.name==="TypeError"&&typeof e.message=="string"?e.message==="Load failed"?e.stack===void 0:U7e.has(e.message):!1}class S_ extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}}const vF=(e,t,n)=>{const s=n.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=s,e};async function yF(e,t){return new Promise((n,s)=>{t={...t},t.onFailedAttempt??(t.onFailedAttempt=()=>{}),t.shouldRetry??(t.shouldRetry=()=>!0),t.retries??(t.retries=10);const a=I7e.operation(t),i=()=>{var o;a.stop(),s((o=t.signal)==null?void 0:o.reason)};t.signal&&!t.signal.aborted&&t.signal.addEventListener("abort",i,{once:!0});const l=()=>{var o;(o=t.signal)==null||o.removeEventListener("abort",i),a.stop()};a.attempt(async o=>{try{const c=await e(o);l(),n(c)}catch(c){try{if(!(c instanceof Error))throw new TypeError(`Non-error was thrown: "${c}". You should only throw errors.`);if(c instanceof S_)throw c.originalError;if(c instanceof TypeError&&!B7e(c))throw c;if(vF(c,o,t),await t.shouldRetry(c)||(a.stop(),s(c)),await t.onFailedAttempt(c),!a.retry(c))throw a.mainError()}catch(d){vF(d,o,t),l(),s(d)}}})})}const z7e="@uppy/companion-client",V7e="Client library for communication with Companion. Intended for use in Uppy plugins.",q7e="4.5.2",W7e="MIT",H7e="lib/index.js",K7e="module",G7e={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},Y7e=["file uploader","uppy","uppy-plugin","companion","provider"],X7e="https://uppy.io",Z7e={url:"https://github.com/transloadit/uppy/issues"},Q7e={type:"git",url:"git+https://github.com/transloadit/uppy.git"},J7e=["src","lib","dist","CHANGELOG.md"],eze={"@uppy/utils":"^6.2.2","namespace-emitter":"^2.0.1","p-retry":"^6.1.0"},tze={jsdom:"^26.1.0",typescript:"^5.8.3",vitest:"^3.2.4"},rze={"@uppy/core":"^4.5.2"},nze={name:z7e,description:V7e,version:q7e,license:W7e,main:H7e,type:K7e,scripts:G7e,keywords:Y7e,homepage:X7e,bugs:Z7e,repository:Q7e,files:J7e,dependencies:eze,devDependencies:tze,peerDependencies:rze};class sze extends Error{constructor(){super("Authorization required");ge(this,"isAuthError");this.name="AuthError",this.isAuthError=!0}}function aze(e){return e.replace(/\/$/,"")}const bF=10,ize=5*60*1e3,lze=401;class oze extends Error{constructor({statusCode:n,message:s}){super(s);ge(this,"statusCode");this.name="HttpError",this.statusCode=n}}async function cze(e){if(e.status===lze)throw new sze;if(e.ok)return e.json();let t=`Failed request with status: ${e.status}. ${e.statusText}`,n;try{n=await e.json(),n.message&&(t=`${t} message: ${n.message}`),n.requestId&&(t=`${t} request-Id: ${n.requestId}`)}catch(s){throw new Error(t,{cause:s})}throw e.status>=400&&e.status<=499&&n.message?new D7e(n.message):new oze({statusCode:e.status,message:t})}function dze(e,t,n){const{progress:s,bytesUploaded:a,bytesTotal:i}=t;s&&(e.uppy.log(`Upload progress: ${s}`),e.uppy.emit("upload-progress",n,{uploadStarted:n.progress.uploadStarted??0,bytesUploaded:a,bytesTotal:i}))}var Kd,Kc,C_,bw,P_;class yY{constructor(t,n){ve(this,Kc);ve(this,Kd);ge(this,"uppy");ge(this,"opts");ve(this,bw,async({file:t,postBody:n,signal:s})=>{var i;if(((i=t.remote)==null?void 0:i.url)==null)throw new Error("Cannot connect to an undefined URL");return(await this.post(t.remote.url,{...t.remote.body,...n},{signal:s})).token});this.uppy=t,this.opts=n,this.onReceiveResponse=this.onReceiveResponse.bind(this),we(this,Kd,n.companionHeaders)}setCompanionHeaders(t){we(this,Kd,t)}[Symbol.for("uppy test: getCompanionHeaders")](){return L(this,Kd)}get hostname(){const{companion:t}=this.uppy.getState(),n=this.opts.companionUrl;return aze(t!=null&&t[n]?t[n]:n)}async headers(t=!1){return{...{Accept:"application/json",...t?void 0:{"Content-Type":"application/json"}},...L(this,Kd)}}onReceiveResponse(t){const{headers:n}=t,a=this.uppy.getState().companion||{},i=this.opts.companionUrl;n.has("i-am")&&n.get("i-am")!==a[i]&&this.uppy.setState({companion:{...a,[i]:n.get("i-am")}})}async request({path:t,method:n="GET",data:s,skipPostResponse:a,signal:i}){try{const l=await this.headers(!s),o=await O7e(Pe(this,Kc,C_).call(this,t),{method:n,signal:i,headers:l,credentials:this.opts.companionCookiesRule||"same-origin",body:s?JSON.stringify(s):null});return a||this.onReceiveResponse(o),await cze(o)}catch(l){throw l.isAuthError||l.name==="UserFacingApiError"||l.name==="AbortError"?l:new T7e(`Could not ${n} ${Pe(this,Kc,C_).call(this,t)}`,{cause:l})}}async get(t,n){return this.request({...n,path:t})}async post(t,n,s){return this.request({...s,path:t,method:"POST",data:n})}async delete(t,n,s){return this.request({...s,path:t,method:"DELETE",data:n})}async uploadRemoteFile(t,n,s){try{const{signal:a,getQueue:i}=s||{};return await yF(async()=>{var d;const l=(d=this.uppy.getFile(t.id))==null?void 0:d.serverToken;if(l!=null)return this.uppy.log(`Connecting to exiting websocket ${l}`),Pe(this,Kc,P_).call(this,{file:t,queue:i(),signal:a});const c=await i().wrapPromiseFunction(async(...u)=>{try{return await L(this,bw).call(this,...u)}catch(h){if(h.isAuthError)throw new S_(h);if(h.cause==null)throw h;const f=h.cause,m=()=>[408,409,429,418,423].includes(f.statusCode)||f.statusCode>=500&&f.statusCode<=599&&![501,505].includes(f.statusCode);throw f.name==="HttpError"&&!m()?new S_(f):f}},{priority:-1})({file:t,postBody:n,signal:a}).abortOn(a);if(this.uppy.getFile(t.id))return this.uppy.setFileState(t.id,{serverToken:c}),Pe(this,Kc,P_).call(this,{file:this.uppy.getFile(t.id),queue:i(),signal:a})},{retries:bF,signal:a,onFailedAttempt:l=>this.uppy.log(`Retrying upload due to: ${l.message}`,"warning")})}catch(a){if(a.name==="AbortError")return;throw this.uppy.emit("upload-error",t,a),a}}}Kd=new WeakMap,Kc=new WeakSet,C_=function(t){return/^(https?:|)\/\//.test(t)?t:`${this.hostname}/${t}`},bw=new WeakMap,P_=async function({file:t,queue:n,signal:s}){let a;const{capabilities:i}=this.uppy.getState();try{return await new Promise((l,o)=>{const c=t.serverToken,d=R7e(t.remote.companionUrl);let u,h,f,{isPaused:m}=t;const g=(S,P)=>{if(u==null||u.readyState!==u.OPEN){this.uppy.log(`Cannot send "${S}" to socket ${t.id} because the socket state was ${String(u==null?void 0:u.readyState)}`,"warning");return}u.send(JSON.stringify({action:S,payload:P??{}}))};function x(){i.resumableUploads&&g(m?"pause":"resume")}const w=async()=>{h&&h.abort(),h=new AbortController;const S=_=>{var R;this.uppy.setFileState(t.id,{serverToken:null}),(R=h==null?void 0:h.abort)==null||R.call(h),o(_)};function P(){clearTimeout(f),!m&&(f=setTimeout(()=>S(new Error("Timeout waiting for message from Companion socket")),ize))}try{await n.wrapPromiseFunction(async()=>{await yF(async()=>new Promise((R,O)=>{u=new WebSocket(`${d}/api/${c}`),P(),u.addEventListener("close",()=>{u=void 0,O(new Error("Socket closed unexpectedly"))}),u.addEventListener("error",A=>{this.uppy.log(`Companion socket error ${JSON.stringify(A)}, closing socket`,"warning"),u==null||u.close()}),u.addEventListener("open",()=>{x()}),u.addEventListener("message",A=>{var T,B,z;P();try{const{action:U,payload:E}=JSON.parse(A.data);switch(U){case"progress":{dze(this,E,this.uppy.getFile(t.id));break}case"success":{const $=(T=E.response)==null?void 0:T.responseText;this.uppy.emit("upload-success",this.uppy.getFile(t.id),{uploadURL:E.url,status:((B=E.response)==null?void 0:B.status)??200,body:$?JSON.parse($):void 0}),(z=h==null?void 0:h.abort)==null||z.call(h),l();break}case"error":{const{message:$}=E.error;throw Object.assign(new Error($),{cause:E.error})}default:this.uppy.log(`Companion socket unknown action ${U}`,"warning")}}catch(U){S(U)}});const M=()=>{this.uppy.log(`Closing socket ${t.id}`),clearTimeout(f),u&&u.close(),u=void 0};h.signal.addEventListener("abort",()=>{M()})}),{retries:bF,signal:h.signal,onFailedAttempt:()=>{h.signal.aborted||this.uppy.log(`Retrying websocket ${t.id}`)}})})().abortOn(h.signal)}catch(_){if(h.signal.aborted)return;S(_)}},j=S=>{i.resumableUploads&&(m=S,u&&x())},y=S=>{var P;i.individualCancellation&&S.id===t.id&&(g("cancel"),(P=h==null?void 0:h.abort)==null||P.call(h),this.uppy.log(`upload ${t.id} was removed`),l())},b=()=>{var S;g("cancel"),(S=h==null?void 0:h.abort)==null||S.call(h),this.uppy.log(`upload ${t.id} was canceled`),l()},p=(S,P)=>{(S==null?void 0:S.id)===t.id&&j(P)},N=()=>j(!0),k=()=>j(!1);this.uppy.on("file-removed",y),this.uppy.on("cancel-all",b),this.uppy.on("upload-pause",p),this.uppy.on("pause-all",N),this.uppy.on("resume-all",k),a=()=>{this.uppy.off("file-removed",y),this.uppy.off("cancel-all",b),this.uppy.off("upload-pause",p),this.uppy.off("pause-all",N),this.uppy.off("resume-all",k)},s.addEventListener("abort",()=>{h==null||h.abort()}),w()})}finally{a==null||a()}},ge(yY,"VERSION",nze.version);var al,pv;class uze{constructor(t){ve(this,al);ve(this,pv,[]);we(this,al,t)}on(t,n){return L(this,pv).push([t,n]),L(this,al).on(t,n)}remove(){for(const[t,n]of L(this,pv).splice(0))L(this,al).off(t,n)}onFilePause(t,n){this.on("upload-pause",(s,a)=>{t===(s==null?void 0:s.id)&&n(a)})}onFileRemove(t,n){this.on("file-removed",s=>{t===s.id&&n(s.id)})}onPause(t,n){this.on("upload-pause",(s,a)=>{t===(s==null?void 0:s.id)&&n(a)})}onRetry(t,n){this.on("upload-retry",s=>{t===(s==null?void 0:s.id)&&n()})}onRetryAll(t,n){this.on("retry-all",()=>{L(this,al).getFile(t)&&n()})}onPauseAll(t,n){this.on("pause-all",()=>{L(this,al).getFile(t)&&n()})}onCancelAll(t,n){this.on("cancel-all",(...s)=>{L(this,al).getFile(t)&&n(...s)})}onResumeAll(t,n){this.on("resume-all",()=>{L(this,al).getFile(t)&&n()})}}al=new WeakMap,pv=new WeakMap;const{AbortController:bS}=globalThis,bY=(e="Aborted",t)=>{const n=new DOMException(e,"AbortError");return t!=null&&gY(t,"cause")&&Object.defineProperty(n,"cause",{__proto__:null,configurable:!0,writable:!0,value:t.cause}),n};function hze(e){const t=n=>"error"in n&&!!n.error;return e.filter(n=>!t(n))}function fze(e){return e.filter(t=>{var n;return!((n=t.progress)!=null&&n.uploadStarted)||!t.isRestored})}function jF(e,t){return e===!0?Object.keys(t):Array.isArray(e)?e:[]}function mze(e){return new Error("Cancelled",{cause:e})}function wF(e){var t;if(e!=null){const n=()=>this.abort(e.reason);e.addEventListener("abort",n,{once:!0});const s=()=>{e.removeEventListener("abort",n)};(t=this.then)==null||t.call(this,s,s)}return this}var Zl,il,Ql,mf,ll,pf,Gd,ds,__,Qp,jY,wY,NY,jw,xf;class pze{constructor(t){ve(this,ds);ve(this,Zl,0);ve(this,il,[]);ve(this,Ql,!1);ve(this,mf);ve(this,ll,1);ve(this,pf);ve(this,Gd);ge(this,"limit");ve(this,jw,()=>this.resume());ve(this,xf,()=>{if(L(this,Ql)){we(this,Gd,setTimeout(L(this,xf),0));return}we(this,ll,this.limit),this.limit=Math.ceil((L(this,pf)+L(this,ll))/2);for(let t=L(this,ll);t<=this.limit;t++)Pe(this,ds,Qp).call(this);L(this,pf)-L(this,ll)>3?we(this,Gd,setTimeout(L(this,xf),2e3)):we(this,ll,Math.floor(L(this,ll)/2))});typeof t!="number"||t===0?this.limit=1/0:this.limit=t}run(t,n){return!L(this,Ql)&&L(this,Zl)<this.limit?Pe(this,ds,__).call(this,t):Pe(this,ds,wY).call(this,t,n)}wrapSyncFunction(t,n){return(...s)=>{const a=this.run(()=>(t(...s),queueMicrotask(()=>a.done()),()=>{}),n);return{abortOn:wF,abort(){a.abort()}}}}wrapPromiseFunction(t,n){return(...s)=>{let a;const i=new Promise((l,o)=>{a=this.run(()=>{let c,d;try{d=Promise.resolve(t(...s))}catch(u){d=Promise.reject(u)}return d.then(u=>{c?o(c):(a.done(),l(u))},u=>{c?o(c):(a.done(),o(u))}),u=>{c=mze(u)}},n)});return i.abort=l=>{a.abort(l)},i.abortOn=wF,i}}resume(){we(this,Ql,!1),clearTimeout(L(this,mf));for(let t=0;t<this.limit;t++)Pe(this,ds,Qp).call(this)}pause(t=null){we(this,Ql,!0),clearTimeout(L(this,mf)),t!=null&&we(this,mf,setTimeout(L(this,jw),t))}rateLimit(t){clearTimeout(L(this,Gd)),this.pause(t),this.limit>1&&Number.isFinite(this.limit)&&(we(this,pf,this.limit-1),this.limit=L(this,ll),we(this,Gd,setTimeout(L(this,xf),t)))}get isPaused(){return L(this,Ql)}}Zl=new WeakMap,il=new WeakMap,Ql=new WeakMap,mf=new WeakMap,ll=new WeakMap,pf=new WeakMap,Gd=new WeakMap,ds=new WeakSet,__=function(t){we(this,Zl,L(this,Zl)+1);let n=!1,s;try{s=t()}catch(a){throw we(this,Zl,L(this,Zl)-1),a}return{abort:a=>{n||(n=!0,we(this,Zl,L(this,Zl)-1),s==null||s(a),Pe(this,ds,Qp).call(this))},done:()=>{n||(n=!0,we(this,Zl,L(this,Zl)-1),Pe(this,ds,Qp).call(this))}}},Qp=function(){queueMicrotask(()=>Pe(this,ds,jY).call(this))},jY=function(){if(L(this,Ql)||L(this,Zl)>=this.limit||L(this,il).length===0)return;const t=L(this,il).shift();if(t==null)throw new Error("Invariant violation: next is null");const n=Pe(this,ds,__).call(this,t.fn);t.abort=n.abort,t.done=n.done},wY=function(t,n){const s={fn:t,priority:(n==null?void 0:n.priority)||0,abort:()=>{Pe(this,ds,NY).call(this,s)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},a=L(this,il).findIndex(i=>s.priority>i.priority);return a===-1?L(this,il).push(s):L(this,il).splice(a,0,s),s},NY=function(t){const n=L(this,il).indexOf(t);n!==-1&&L(this,il).splice(n,1)},jw=new WeakMap,xf=new WeakMap;const xze="@uppy/aws-s3",gze="Upload to Amazon S3 with Uppy",vze="4.3.2",yze="MIT",bze="lib/index.js",jze="module",wze={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},Nze=["file uploader","aws s3","amazon s3","s3","uppy","uppy-plugin","multipart"],kze="https://uppy.io",Sze={url:"https://github.com/transloadit/uppy/issues"},Cze={type:"git",url:"git+https://github.com/transloadit/uppy.git"},Pze=["src","lib","dist","CHANGELOG.md"],_ze={"@uppy/companion-client":"^4.5.2","@uppy/utils":"^6.2.2"},Aze={"@aws-sdk/client-s3":"^3.362.0","@aws-sdk/s3-request-presigner":"^3.362.0","@uppy/core":"^4.5.2",jsdom:"^26.1.0",nock:"^13.1.0",typescript:"^5.8.3",vitest:"^3.2.4","whatwg-fetch":"3.6.2"},Tze={"@uppy/core":"^4.5.2"},Eze={name:xze,description:gze,version:vze,license:yze,main:bze,type:jze,scripts:wze,keywords:Nze,homepage:kze,bugs:Sze,repository:Cze,files:Pze,dependencies:_ze,devDependencies:Aze,peerDependencies:Tze};function Oze({method:e="PUT",CanonicalUri:t="/",CanonicalQueryString:n="",SignedHeaders:s,HashedPayload:a}){const i=Object.keys(s).map(l=>l.toLowerCase()).sort();return[e,t,n,...i.map(l=>`${l}:${s[l]}`),"",i.join(";"),a].join(`
`)}const TE=new TextEncoder,EE={name:"HMAC",hash:"SHA-256"};async function Rze(e){const{subtle:t}=globalThis.crypto;return t.digest(EE.hash,TE.encode(e))}async function Dze(e){const{subtle:t}=globalThis.crypto;return t.importKey("raw",typeof e=="string"?TE.encode(e):e,EE,!1,["sign"])}function NF(e){const t=new Uint8Array(e);let n="";for(let s=0;s<t.length;s++)n+=t[s].toString(16).padStart(2,"0");return n}async function $p(e,t){const{subtle:n}=globalThis.crypto;return n.sign(EE,await Dze(e),TE.encode(t))}async function Mze({accountKey:e,accountSecret:t,sessionToken:n,bucketName:s,Key:a,Region:i,expires:l,uploadId:o,partNumber:c}){const d="s3",u=`${d}.${i}.amazonaws.com`,h=`/${s}/${encodeURI(a).replace(/[;?:@&=+$,#!'()*]/g,_=>`%${_.charCodeAt(0).toString(16).toUpperCase()}`)}`,f="UNSIGNED-PAYLOAD",m=new Date().toISOString().replace(/[-:]|\.\d+/g,""),g=m.slice(0,8),x=`${g}/${i}/${d}/aws4_request`,w=new URL(`https://${u}${h}`);w.searchParams.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),w.searchParams.set("X-Amz-Content-Sha256",f),w.searchParams.set("X-Amz-Credential",`${e}/${x}`),w.searchParams.set("X-Amz-Date",m),w.searchParams.set("X-Amz-Expires",l),w.searchParams.set("X-Amz-Security-Token",n),w.searchParams.set("X-Amz-SignedHeaders","host"),c&&w.searchParams.set("partNumber",c),o&&w.searchParams.set("uploadId",o),w.searchParams.set("x-id",c&&o?"UploadPart":"PutObject");const j=Oze({CanonicalUri:h,CanonicalQueryString:w.search.slice(1),SignedHeaders:{host:u},HashedPayload:f}),y=NF(await Rze(j)),b=["AWS4-HMAC-SHA256",m,x,y].join(`
`),p=await $p(`AWS4${t}`,g),N=await $p(p,i),k=await $p(N,d),S=await $p(k,"aws4_request"),P=NF(await $p(S,b));return w.searchParams.set("X-Amz-Signature",P),w}const $ze=1024*1024,kF={getChunkSize(e){return Math.ceil(e.size/1e4)},onProgress(){},onPartComplete(){},onSuccess(){},onError(e){throw e}};function Ize(e){if(typeof e=="string")return parseInt(e,10);if(typeof e=="number")return e;throw new TypeError("Expected a number")}const G0=Symbol("pausing upload, not an actual error");var oi,Ea,ol,Jl,eo,xv,gv,gf,Yd,vf,vv,yf,yv,Wi,kY,SY,A_,bv,jv,CY;class Fze{constructor(t,n){ve(this,Wi);ge(this,"options");ve(this,oi,new bS);ve(this,Ea,[]);ve(this,ol,[]);ve(this,Jl);ve(this,eo);ve(this,xv,!1);ve(this,gv);ve(this,gf);ve(this,Yd);ve(this,vf);ve(this,vv,t=>(t==null?void 0:t.cause)===G0?null:L(this,gv).call(this,t));ve(this,yf,1e4);ve(this,yv,5*$ze);ve(this,bv,t=>n=>{if(!n.lengthComputable)return;L(this,ol)[t].uploaded=Ize(n.loaded);const s=L(this,ol).reduce((a,i)=>a+i.uploaded,0);this.options.onProgress(s,L(this,Jl).size)});ve(this,jv,t=>n=>{L(this,Ea)[t]=null,L(this,ol)[t].etag=n,L(this,ol)[t].done=!0;const s={PartNumber:t+1,ETag:n};this.options.onPartComplete(s)});var s;this.options={...kF,...n},(s=this.options).getChunkSize??(s.getChunkSize=kF.getChunkSize),we(this,Jl,t),we(this,eo,n.file),we(this,gf,this.options.onSuccess),we(this,gv,this.options.onError),we(this,Yd,this.options.shouldUseMultipart),we(this,vf,n.uploadId&&n.key),Pe(this,Wi,kY).call(this)}start(){L(this,xv)?(L(this,oi).signal.aborted||L(this,oi).abort(G0),we(this,oi,new bS),Pe(this,Wi,A_).call(this)):L(this,vf)?(this.options.companionComm.restoreUploadFile(L(this,eo),{uploadId:this.options.uploadId,key:this.options.key}),Pe(this,Wi,A_).call(this)):Pe(this,Wi,SY).call(this)}pause(){L(this,oi).abort(G0),we(this,oi,new bS)}abort(t){t!=null&&t.really?Pe(this,Wi,CY).call(this):this.pause()}[Symbol.for("uppy test: getChunkState")](){return L(this,ol)}}oi=new WeakMap,Ea=new WeakMap,ol=new WeakMap,Jl=new WeakMap,eo=new WeakMap,xv=new WeakMap,gv=new WeakMap,gf=new WeakMap,Yd=new WeakMap,vf=new WeakMap,vv=new WeakMap,yf=new WeakMap,yv=new WeakMap,Wi=new WeakSet,kY=function(){const t=L(this,Jl).size,n=typeof L(this,Yd)=="function"?L(this,Yd).call(this,L(this,eo)):!!L(this,Yd);if(n&&t>L(this,yv)){let s=Math.max(this.options.getChunkSize(L(this,Jl)),L(this,yv)),a=Math.floor(t/s);a>L(this,yf)&&(a=L(this,yf),s=t/L(this,yf)),we(this,Ea,Array(a));for(let i=0,l=0;i<t;i+=s,l++){const o=Math.min(t,i+s),c=()=>{const d=i;return L(this,Jl).slice(d,o)};if(L(this,Ea)[l]={getData:c,onProgress:L(this,bv).call(this,l),onComplete:L(this,jv).call(this,l),shouldUseMultipart:n},L(this,vf)){const d=i+s>t?t-i:s;L(this,Ea)[l].setAsUploaded=()=>{L(this,Ea)[l]=null,L(this,ol)[l].uploaded=d}}}}else we(this,Ea,[{getData:()=>L(this,Jl),onProgress:L(this,bv).call(this,0),onComplete:L(this,jv).call(this,0),shouldUseMultipart:n}]);we(this,ol,L(this,Ea).map(()=>({uploaded:0})))},SY=function(){this.options.companionComm.uploadFile(L(this,eo),L(this,Ea),L(this,oi).signal).then(L(this,gf),L(this,vv)),we(this,xv,!0)},A_=function(){this.options.companionComm.resumeUploadFile(L(this,eo),L(this,Ea),L(this,oi).signal).then(L(this,gf),L(this,vv))},bv=new WeakMap,jv=new WeakMap,CY=function(){L(this,oi).abort(),this.options.companionComm.abortFileUpload(L(this,eo)).catch(t=>this.options.log(t))};function is(e){if(e!=null&&e.aborted)throw bY("The operation was aborted",{cause:e.reason})}function Lze(e){const t=new URL(e);return t.search="",t.hash="",t.href}var wv,ci,Nv,kv,Sv,Cv,bf,jf,wf,Nf,Xd,kf,di,Ou,PY,T_;class Uze{constructor(t,n,s,a){ve(this,Ou);ve(this,wv);ve(this,ci,new WeakMap);ve(this,Nv);ve(this,kv);ve(this,Sv);ve(this,Cv);ve(this,bf);ve(this,jf);ve(this,wf);ve(this,Nf);ve(this,Xd);ve(this,kf);ve(this,di);we(this,jf,t),we(this,Xd,s),we(this,di,a),this.setOptions(n)}setOptions(t){const n=L(this,jf);"abortMultipartUpload"in t&&we(this,wv,n.wrapPromiseFunction(t.abortMultipartUpload,{priority:1})),"createMultipartUpload"in t&&we(this,Nv,n.wrapPromiseFunction(t.createMultipartUpload,{priority:-1})),"signPart"in t&&we(this,kv,n.wrapPromiseFunction(t.signPart)),"listParts"in t&&we(this,Cv,n.wrapPromiseFunction(t.listParts)),"completeMultipartUpload"in t&&we(this,Nf,n.wrapPromiseFunction(t.completeMultipartUpload,{priority:1})),"retryDelays"in t&&we(this,wf,t.retryDelays??[]),"uploadPartBytes"in t&&we(this,kf,n.wrapPromiseFunction(t.uploadPartBytes,{priority:1/0})),"getUploadParameters"in t&&we(this,Sv,n.wrapPromiseFunction(t.getUploadParameters))}async getUploadId(t,n){let s;for(;s=L(this,ci).get(t.data),s!=null;)try{return await s}catch{}const a=L(this,Nv).call(this,L(this,di).call(this,t),n),i=()=>{a.abort(n.reason),L(this,ci).delete(t.data)};return n.addEventListener("abort",i,{once:!0}),L(this,ci).set(t.data,a),a.then(async l=>{n.removeEventListener("abort",i),L(this,Xd).call(this,t,l),L(this,ci).set(t.data,l)},()=>{n.removeEventListener("abort",i),L(this,ci).delete(t.data)}),a}async abortFileUpload(t){const n=L(this,ci).get(t.data);if(n==null)return;L(this,ci).delete(t.data),L(this,Xd).call(this,t,Object.create(null));let s;try{s=await n}catch{return}await L(this,wv).call(this,L(this,di).call(this,t),s)}async uploadFile(t,n,s){if(is(s),n.length===1&&!n[0].shouldUseMultipart)return Pe(this,Ou,T_).call(this,t,n[0],s);const{uploadId:a,key:i}=await this.getUploadId(t,s);is(s);try{const l=await Promise.all(n.map((o,c)=>this.uploadChunk(t,c+1,o,s)));return is(s),await L(this,Nf).call(this,L(this,di).call(this,t),{key:i,uploadId:a,parts:l,signal:s},s).abortOn(s)}catch(l){throw(l==null?void 0:l.cause)!==G0&&(l==null?void 0:l.name)!=="AbortError"&&this.abortFileUpload(t),l}}restoreUploadFile(t,n){L(this,ci).set(t.data,n)}async resumeUploadFile(t,n,s){if(is(s),n.length===1&&n[0]!=null&&!n[0].shouldUseMultipart)return Pe(this,Ou,T_).call(this,t,n[0],s);const{uploadId:a,key:i}=await this.getUploadId(t,s);is(s);const l=await L(this,Cv).call(this,L(this,di).call(this,t),{uploadId:a,key:i,signal:s},s).abortOn(s);is(s);const o=await Promise.all(n.map((c,d)=>{var f;const u=d+1,h=l.find(({PartNumber:m})=>m===u);return h==null?this.uploadChunk(t,u,c,s):((f=c==null?void 0:c.setAsUploaded)==null||f.call(c),{PartNumber:u,ETag:h.ETag})}));return is(s),L(this,Nf).call(this,L(this,di).call(this,t),{key:i,uploadId:a,parts:o,signal:s},s).abortOn(s)}async uploadChunk(t,n,s,a){is(a);const{uploadId:i,key:l}=await this.getUploadId(t,a),o=L(this,wf).values(),c=L(this,wf).values(),d=()=>{const u=o.next();return u==null||u.done?null:u.value};for(;;){is(a);const u=s.getData(),{onProgress:h,onComplete:f}=s;let m;try{m=await L(this,kv).call(this,L(this,di).call(this,t),{uploadId:i,key:l,partNumber:n,body:u,signal:a}).abortOn(a)}catch(g){const x=d();if(x==null||a.aborted)throw g;await new Promise(w=>setTimeout(w,x));continue}is(a);try{return{PartNumber:n,...await L(this,kf).call(this,{signature:m,body:u,size:u.size,onProgress:h,onComplete:f,signal:a}).abortOn(a)}}catch(g){if(!await Pe(this,Ou,PY).call(this,g,c))throw g}}}}wv=new WeakMap,ci=new WeakMap,Nv=new WeakMap,kv=new WeakMap,Sv=new WeakMap,Cv=new WeakMap,bf=new WeakMap,jf=new WeakMap,wf=new WeakMap,Nf=new WeakMap,Xd=new WeakMap,kf=new WeakMap,di=new WeakMap,Ou=new WeakSet,PY=async function(t,n){var i;const s=L(this,jf),a=(i=t==null?void 0:t.source)==null?void 0:i.status;if(a==null)return!1;if(a===403&&t.message==="Request has expired"){if(!s.isPaused){if(s.limit===1||L(this,bf)==null){const l=n.next();if(l==null||l.done)return!1;we(this,bf,l.value)}s.rateLimit(0),await new Promise(l=>setTimeout(l,L(this,bf)))}}else if(a===429){if(!s.isPaused){const l=n.next();if(l==null||l.done)return!1;s.rateLimit(l.value)}}else{if(a>400&&a<500&&a!==409)return!1;if(typeof navigator<"u"&&navigator.onLine===!1)s.isPaused||(s.pause(),window.addEventListener("online",()=>{s.resume()},{once:!0}));else{const l=n.next();if(l==null||l.done)return!1;await new Promise(o=>setTimeout(o,l.value))}}return!0},T_=async function(t,n,s){const{method:a="POST",url:i,fields:l,headers:o}=await L(this,Sv).call(this,L(this,di).call(this,t),{signal:s}).abortOn(s);let c;const d=n.getData();if(a.toUpperCase()==="POST"){const g=new FormData;Object.entries(l).forEach(([x,w])=>g.set(x,w)),g.set("file",d),c=g}else c=d;const{onProgress:u,onComplete:h}=n,f=await L(this,kf).call(this,{signature:{url:i,headers:o,method:a},body:c,size:d.size,onProgress:u,onComplete:h,signal:s}).abortOn(s),m=l==null?void 0:l.key;return L(this,Xd).call(this,t,{key:m}),{...f,location:f.location??Lze(i),bucket:l==null?void 0:l.bucket,key:m}};function ah(e){if(e!=null&&e.error){const t=new Error(e.message);throw Object.assign(t,e.error),t}return e}function SF(e){const t=e.Expiration;if(t){const n=Math.floor((new Date(t)-Date.now())/1e3);if(n>9)return n}}function CF({meta:e,allowedMetaFields:t,querify:n=!1}){const s=t??Object.keys(e);return e?Object.fromEntries(s.filter(a=>e[a]!=null).map(a=>{const i=n?`metadata[${a}]`:a,l=String(e[a]);return[i,l]})):{}}const Bze={allowedMetaFields:!0,limit:6,getTemporarySecurityCredentials:!1,shouldUseMultipart:e=>(e.size||0)>100*1024*1024,retryDelays:[0,1e3,3e3,5e3]};var Sf,ys,kn,O_,Yo,ui,_Y,ww,Cf,AY,TY,Pv,Pf,Zd,_v;const Nw=class Nw extends uG{constructor(n,s){super(n,{...Bze,uploadPartBytes:Nw.uploadPartBytes,createMultipartUpload:null,listParts:null,abortMultipartUpload:null,completeMultipartUpload:null,signPart:null,getUploadParameters:null,...s});ve(this,kn);ve(this,Sf);ve(this,ys);ge(this,"requests");ge(this,"uploaderEvents");ge(this,"uploaders");ve(this,ui);ve(this,ww,(n,{key:s,uploadId:a})=>{const i=this.uppy.getFile(n.id);i!=null&&this.uppy.setFileState(n.id,{s3Multipart:{...i.s3Multipart,key:s,uploadId:a}})});ve(this,Cf,n=>this.uppy.getFile(n.id)||n);ve(this,Pv,async n=>{if(n.length===0)return;const s=this.uppy.getFilesByIds(n),a=hze(s),i=fze(a);this.uppy.emit("upload-start",i);const l=a.map(c=>{if(c.isRemote){const d=()=>this.requests;L(this,Zd).call(this,!1);const u=new AbortController,h=m=>{m.id===c.id&&u.abort()};this.uppy.on("file-removed",h);const f=this.uppy.getRequestClientForFile(c).uploadRemoteFile(c,Pe(this,kn,TY).call(this,c),{signal:u.signal,getQueue:d});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",h)},{priority:-1})(),f}return Pe(this,kn,AY).call(this,c)}),o=await Promise.allSettled(l);return L(this,Zd).call(this,!0),o});ve(this,Pf,()=>{var n;(n=L(this,ys))==null||n.setCompanionHeaders(this.opts.headers)});ve(this,Zd,n=>{const{capabilities:s}=this.uppy.getState();this.uppy.setState({capabilities:{...s,resumableUploads:n}})});ve(this,_v,()=>{L(this,Zd).call(this,!0)});this.type="uploader",this.id=this.opts.id||"AwsS3Multipart",Pe(this,kn,O_).call(this,s);const a={createMultipartUpload:this.createMultipartUpload,listParts:this.listParts,abortMultipartUpload:this.abortMultipartUpload,completeMultipartUpload:this.completeMultipartUpload,signPart:s!=null&&s.getTemporarySecurityCredentials?this.createSignedURL:this.signPart,getUploadParameters:s!=null&&s.getTemporarySecurityCredentials?this.createSignedURL:this.getUploadParameters};for(const i of Object.keys(a))this.opts[i]==null&&(this.opts[i]=a[i].bind(this));this.requests=this.opts.rateLimitedQueue??new pze(this.opts.limit),we(this,Sf,new Uze(this.requests,this.opts,L(this,ww),L(this,Cf))),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}[Symbol.for("uppy test: getClient")](){return L(this,ys)}setOptions(n){L(this,Sf).setOptions(n),super.setOptions(n),Pe(this,kn,O_).call(this,n)}resetUploaderReferences(n,s){this.uploaders[n]&&(this.uploaders[n].abort({really:(s==null?void 0:s.abort)||!1}),this.uploaders[n]=null),this.uploaderEvents[n]&&(this.uploaderEvents[n].remove(),this.uploaderEvents[n]=null)}createMultipartUpload(n,s){Pe(this,kn,Yo).call(this,"createMultipartUpload"),is(s);const a=jF(this.opts.allowedMetaFields,n.meta),i=CF({meta:n.meta,allowedMetaFields:a});return L(this,ys).post("s3/multipart",{filename:n.name,type:n.type,metadata:i},{signal:s}).then(ah)}listParts(n,{key:s,uploadId:a,signal:i},l){i??(i=l),Pe(this,kn,Yo).call(this,"listParts"),is(i);const o=encodeURIComponent(s);return L(this,ys).get(`s3/multipart/${encodeURIComponent(a)}?key=${o}`,{signal:i}).then(ah)}completeMultipartUpload(n,{key:s,uploadId:a,parts:i,signal:l},o){l??(l=o),Pe(this,kn,Yo).call(this,"completeMultipartUpload"),is(l);const c=encodeURIComponent(s),d=encodeURIComponent(a);return L(this,ys).post(`s3/multipart/${d}/complete?key=${c}`,{parts:i.map(({ETag:u,PartNumber:h})=>({ETag:u,PartNumber:h}))},{signal:l}).then(ah)}async createSignedURL(n,s){const a=await Pe(this,kn,_Y).call(this,s),i=SF(a.credentials)||604800,{uploadId:l,key:o,partNumber:c}=s;return{method:"PUT",expires:i,fields:{},url:`${await Mze({accountKey:a.credentials.AccessKeyId,accountSecret:a.credentials.SecretAccessKey,sessionToken:a.credentials.SessionToken,expires:i,bucketName:a.bucket,Region:a.region,Key:o??`${crypto.randomUUID()}-${n.name}`,uploadId:l,partNumber:c})}`,headers:{"Content-Type":n.type}}}signPart(n,{uploadId:s,key:a,partNumber:i,signal:l}){if(Pe(this,kn,Yo).call(this,"signPart"),is(l),s==null||a==null||i==null)throw new Error("Cannot sign without a key, an uploadId, and a partNumber");const o=encodeURIComponent(a);return L(this,ys).get(`s3/multipart/${encodeURIComponent(s)}/${i}?key=${o}`,{signal:l}).then(ah)}abortMultipartUpload(n,{key:s,uploadId:a,signal:i}){Pe(this,kn,Yo).call(this,"abortMultipartUpload");const l=encodeURIComponent(s),o=encodeURIComponent(a);return L(this,ys).delete(`s3/multipart/${o}?key=${l}`,void 0,{signal:i}).then(ah)}getUploadParameters(n,s){Pe(this,kn,Yo).call(this,"getUploadParameters");const{meta:a}=n,{type:i,name:l}=a,o=jF(this.opts.allowedMetaFields,n.meta),c=CF({meta:a,allowedMetaFields:o,querify:!0}),d=new URLSearchParams({filename:l,type:i,...c});return L(this,ys).get(`s3/params?${d}`,s)}static async uploadPartBytes({signature:{url:n,expires:s,headers:a,method:i="PUT"},body:l,size:o=l.size,onProgress:c,onComplete:d,signal:u}){if(is(u),n==null)throw new Error("Cannot upload to an undefined URL");return new Promise((h,f)=>{const m=new XMLHttpRequest;m.open(i,n,!0),a&&Object.keys(a).forEach(w=>{m.setRequestHeader(w,a[w])}),m.responseType="text",typeof s=="number"&&(m.timeout=s*1e3);function g(){m.abort()}function x(){u==null||u.removeEventListener("abort",g)}u==null||u.addEventListener("abort",g),m.upload.addEventListener("progress",w=>{c(w)}),m.addEventListener("abort",()=>{x(),f(bY())}),m.addEventListener("timeout",()=>{x();const w=new Error("Request has expired");w.source={status:403},f(w)}),m.addEventListener("load",()=>{if(x(),m.status===403&&m.responseText.includes("<Message>Request has expired</Message>")){const p=new Error("Request has expired");p.source=m,f(p);return}if(m.status<200||m.status>=300){const p=new Error("Non 2xx");p.source=m,f(p);return}c==null||c({loaded:o,lengthComputable:!0});const w=m.getAllResponseHeaders().trim().split(/[\r\n]+/),j={__proto__:null};for(const p of w){const N=p.split(": "),k=N.shift(),S=N.join(": ");j[k]=S}const{etag:y,location:b}=j;if(i.toUpperCase()==="POST"&&b==null&&console.error("@uppy/aws-s3: Could not read the Location header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket"),y==null){console.error("@uppy/aws-s3: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket");return}d==null||d(y),h({...j,ETag:y})}),m.addEventListener("error",w=>{x();const j=new Error("Unknown error");j.source=w.target,f(j)}),m.send(l)})}install(){L(this,Zd).call(this,!0),this.uppy.addPreProcessor(L(this,Pf)),this.uppy.addUploader(L(this,Pv)),this.uppy.on("cancel-all",L(this,_v))}uninstall(){this.uppy.removePreProcessor(L(this,Pf)),this.uppy.removeUploader(L(this,Pv)),this.uppy.off("cancel-all",L(this,_v))}};Sf=new WeakMap,ys=new WeakMap,kn=new WeakSet,O_=function(n){n==null||!("endpoint"in n||"companionUrl"in n||"headers"in n||"companionHeaders"in n||"cookiesRule"in n||"companionCookiesRule"in n)||("companionUrl"in n&&!("endpoint"in n)&&this.uppy.log("`companionUrl` option has been removed in @uppy/aws-s3, use `endpoint` instead.","warning"),"companionHeaders"in n&&!("headers"in n)&&this.uppy.log("`companionHeaders` option has been removed in @uppy/aws-s3, use `headers` instead.","warning"),"companionCookiesRule"in n&&!("cookiesRule"in n)&&this.uppy.log("`companionCookiesRule` option has been removed in @uppy/aws-s3, use `cookiesRule` instead.","warning"),"endpoint"in n?we(this,ys,new yY(this.uppy,{pluginId:this.id,provider:"AWS",companionUrl:this.opts.endpoint,companionHeaders:this.opts.headers,companionCookiesRule:this.opts.cookiesRule})):("headers"in n&&L(this,Pf).call(this),"cookiesRule"in n&&(L(this,ys).opts.companionCookiesRule=n.cookiesRule)))},Yo=function(n){if(!L(this,ys))throw new Error(`Expected a \`endpoint\` option containing a URL, or if you are not using Companion, a custom \`${n}\` implementation.`)},ui=new WeakMap,_Y=async function(n){if(is(n==null?void 0:n.signal),L(this,ui)==null){const{getTemporarySecurityCredentials:s}=this.opts;s===!0?(Pe(this,kn,Yo).call(this,"getTemporarySecurityCredentials"),we(this,ui,L(this,ys).get("s3/sts",n).then(ah))):we(this,ui,s(n)),we(this,ui,await L(this,ui)),setTimeout(()=>{we(this,ui,null)},(SF(L(this,ui).credentials)||0)*500)}return L(this,ui)},ww=new WeakMap,Cf=new WeakMap,AY=function(n){return new Promise((s,a)=>{const i=(u,h)=>{const f=this.uppy.getFile(n.id);this.uppy.emit("upload-progress",f,{uploadStarted:f.progress.uploadStarted??0,bytesUploaded:u,bytesTotal:h})},l=u=>{this.uppy.log(u),this.uppy.emit("upload-error",n,u),this.resetUploaderReferences(n.id),a(u)},o=u=>{const h={body:{...u},status:200,uploadURL:u.location};this.resetUploaderReferences(n.id),this.uppy.emit("upload-success",L(this,Cf).call(this,n),h),u.location&&this.uppy.log(`Download ${n.name} from ${u.location}`),s(void 0)},c=new Fze(n.data,{companionComm:L(this,Sf),log:(...u)=>this.uppy.log(...u),getChunkSize:this.opts.getChunkSize?this.opts.getChunkSize.bind(this):void 0,onProgress:i,onError:l,onSuccess:o,onPartComplete:u=>{this.uppy.emit("s3-multipart:part-uploaded",L(this,Cf).call(this,n),u)},file:n,shouldUseMultipart:this.opts.shouldUseMultipart,...n.s3Multipart});this.uploaders[n.id]=c;const d=new uze(this.uppy);this.uploaderEvents[n.id]=d,d.onFileRemove(n.id,u=>{c.abort(),this.resetUploaderReferences(n.id,{abort:!0}),s(`upload ${u} was removed`)}),d.onCancelAll(n.id,()=>{c.abort(),this.resetUploaderReferences(n.id,{abort:!0}),s(`upload ${n.id} was canceled`)}),d.onFilePause(n.id,u=>{u?c.pause():c.start()}),d.onPauseAll(n.id,()=>{c.pause()}),d.onResumeAll(n.id,()=>{c.start()}),c.start()})},TY=function(n){var s;return{...(s=n.remote)==null?void 0:s.body,protocol:"s3-multipart",size:n.data.size,metadata:n.meta}},Pv=new WeakMap,Pf=new WeakMap,Zd=new WeakMap,_v=new WeakMap,ge(Nw,"VERSION",Eze.version);let E_=Nw;function lw({maxNumberOfFiles:e=1,maxFileSize:t=10485760,onGetUploadParameters:n,onComplete:s,buttonClassName:a,children:i}){const[l,o]=v.useState(!1),[c]=v.useState(()=>new o_({restrictions:{maxNumberOfFiles:e,maxFileSize:t},autoProceed:!1}).use(E_,{shouldUseMultipart:!1,getUploadParameters:n}).on("complete",d=>{s==null||s(d)}));return r.jsxs("div",{children:[r.jsx(D,{onClick:()=>o(!0),className:a,children:i}),r.jsx(xY,{uppy:c,open:l,onRequestClose:()=>o(!1),proudlyDisplayPoweredByUppy:!1})]})}const PF=["gambling","dating","crypto","betting","e-commerce","gaming","finance","health","vpn","antivirus","education","software","mobile_apps","nutra","beauty"],_F=[{code:"afghanistan",name:"🇦🇫 Афганистан"},{code:"albania",name:"🇦🇱 Албания"},{code:"algeria",name:"🇩🇿 Алжир"},{code:"andorra",name:"🇦🇩 Андорра"},{code:"angola",name:"🇦🇴 Ангола"},{code:"argentina",name:"🇦🇷 Аргентина"},{code:"armenia",name:"🇦🇲 Армения"},{code:"australia",name:"🇦🇺 Австралия"},{code:"austria",name:"🇦🇹 Австрия"},{code:"azerbaijan",name:"🇦🇿 Азербайджан"},{code:"bahrain",name:"🇧🇭 Бахрейн"},{code:"bangladesh",name:"🇧🇩 Бангладеш"},{code:"belarus",name:"🇧🇾 Беларусь"},{code:"belgium",name:"🇧🇪 Бельгия"},{code:"bolivia",name:"🇧🇴 Боливия"},{code:"brazil",name:"🇧🇷 Бразилия"},{code:"bulgaria",name:"🇧🇬 Болгария"},{code:"cambodia",name:"🇰🇭 Камбоджа"},{code:"canada",name:"🇨🇦 Канада"},{code:"chile",name:"🇨🇱 Чили"},{code:"china",name:"🇨🇳 Китай"},{code:"colombia",name:"🇨🇴 Колумбия"},{code:"croatia",name:"🇭🇷 Хорватия"},{code:"cyprus",name:"🇨🇾 Кипр"},{code:"czech",name:"🇨🇿 Чехия"},{code:"denmark",name:"🇩🇰 Дания"},{code:"ecuador",name:"🇪🇨 Эквадор"},{code:"egypt",name:"🇪🇬 Египет"},{code:"estonia",name:"🇪🇪 Эстония"},{code:"finland",name:"🇫🇮 Финляндия"},{code:"france",name:"🇫🇷 Франция"},{code:"germany",name:"🇩🇪 Германия"},{code:"greece",name:"🇬🇷 Греция"},{code:"hungary",name:"🇭🇺 Венгрия"},{code:"india",name:"🇮🇳 Индия"},{code:"indonesia",name:"🇮🇩 Индонезия"},{code:"italy",name:"🇮🇹 Италия"},{code:"japan",name:"🇯🇵 Япония"},{code:"malaysia",name:"🇲🇾 Малайзия"},{code:"mexico",name:"🇲🇽 Мексика"},{code:"netherlands",name:"🇳🇱 Нидерланды"},{code:"poland",name:"🇵🇱 Польша"},{code:"portugal",name:"🇵🇹 Португалия"},{code:"russia",name:"🇷🇺 Россия"},{code:"spain",name:"🇪🇸 Испания"},{code:"sweden",name:"🇸🇪 Швеция"},{code:"switzerland",name:"🇨🇭 Швейцария"},{code:"thailand",name:"🇹🇭 Таиланд"},{code:"turkey",name:"🇹🇷 Турция"},{code:"ukraine",name:"🇺🇦 Украина"},{code:"united_kingdom",name:"🇬🇧 Великобритания"},{code:"united_states",name:"🇺🇸 США"},{code:"vietnam",name:"🇻🇳 Вьетнам"}],zze=["Google Ads","Facebook Ads","TikTok Ads","Snapchat Ads","Push Notifications","Pop-under","Banner","Native","Instagram","YouTube Ads","UAC","SEO","Email","WhatsApp","Telegram","Motivated","In-App","Cloaking","Display","Video","Affiliate","Direct","Contextual"],Vze=["Web Browser","Mobile App","Desktop Application","Browser Extension","Progressive Web App","Hybrid App","Native Mobile","Cross-Platform"],qze=["Adult Traffic","Malware Distribution","Click Injection","Fraudulent Sources","Bot Traffic","Incentivized Traffic"],Wze=[{value:"desktop",label:"Desktop"},{value:"mobile",label:"Mobile"},{value:"tablet",label:"Tablet"},{value:"smarttv",label:"Smart TV"},{value:"console",label:"Console"}],Hze=[{value:"ip_filtering",label:"IP фильтрация",description:"Блокировка подозрительных IP адресов"},{value:"device_fingerprinting",label:"Отпечатки устройств",description:"Анализ уникальных характеристик устройства"},{value:"behavioral_analysis",label:"Анализ поведения",description:"Отслеживание паттернов поведения пользователей"},{value:"geo_verification",label:"Проверка геолокации",description:"Верификация реального местоположения"},{value:"rate_limiting",label:"Лимит запросов",description:"Ограничение частоты запросов от одного источника"},{value:"bot_detection",label:"Детекция ботов",description:"Выявление автоматизированного трафика"}],Kze=[{code:"USD",name:"US Dollar",symbol:"$"},{code:"EUR",name:"Euro",symbol:"€"},{code:"RUB",name:"Russian Ruble",symbol:"₽"},{code:"UAH",name:"Ukrainian Hryvnia",symbol:"₴"},{code:"GBP",name:"British Pound",symbol:"£"},{code:"JPY",name:"Japanese Yen",symbol:"¥"},{code:"BRL",name:"Brazilian Real",symbol:"R$"},{code:"CAD",name:"Canadian Dollar",symbol:"C$"},{code:"AUD",name:"Australian Dollar",symbol:"A$"},{code:"CHF",name:"Swiss Franc",symbol:"CHF"},{code:"SEK",name:"Swedish Krona",symbol:"kr"},{code:"NOK",name:"Norwegian Krone",symbol:"kr"},{code:"PLN",name:"Polish Zloty",symbol:"zł"},{code:"CZK",name:"Czech Koruna",symbol:"Kč"},{code:"HUF",name:"Hungarian Forint",symbol:"Ft"}],EY=({offer:e,onClose:t,onSave:n})=>{var y,b;const{toast:s}=at(),[a,i]=v.useState({name:e.name||"",description:{ru:((y=e.description)==null?void 0:y.ru)||e.description||"",en:((b=e.description)==null?void 0:b.en)||""},category:e.category||"",logo:e.logo||"",image:e.image||"",geoTargeting:e.geoTargeting||[],targetUrl:e.targetUrl||e.url||"",postbackUrl:e.postbackUrl||"",hasGlobalGeoSetting:e.hasGlobalGeoSetting||!1,hasGlobalPayoutSetting:e.hasGlobalPayoutSetting||!1,globalGeo:e.globalGeo||"",globalPayout:e.globalPayout||"",landingPages:e.landingPages||[{id:"1",name:"Основная",url:e.url||"",geo:"",payout:"",hasCustomGeo:!1,hasCustomPayout:!1,isDefault:!0}],payoutType:e.payoutType||"cpa",payoutAmount:e.payout||e.payoutAmount||0,currency:e.currency||"USD",trafficSources:e.trafficSources||[],allowedApplications:e.allowedApplications||[],dailyLimit:e.dailyLimit||e.cap||0,monthlyLimit:e.monthlyLimit||0,antifraudEnabled:e.antifraudEnabled!==void 0?e.antifraudEnabled:!0,antifraudMethods:e.antifraudMethods||["ip_check","vpn_detection"],partnerApprovalType:e.partnerApprovalType||"manual",kycRequired:e.kycRequired||!1,isPrivate:e.isPrivate||!1,tags:e.tags||[],notes:e.notes||"",requiresApproval:e.requiresApproval||!1,trackingEnabled:e.trackingEnabled!==void 0?e.trackingEnabled:!0,saveAsTemplate:!1,kpi:e.kpi||"",status:e.status||"active"}),[l,o]=v.useState(!1),[c,d]=v.useState(!1),u=()=>{const p=(a.landingPages.length+1).toString(),N={id:p,name:`Лендинг ${p}`,url:"",geo:a.hasGlobalGeoSetting?a.globalGeo:"",payout:a.hasGlobalPayoutSetting?a.globalPayout:"",hasCustomGeo:!a.hasGlobalGeoSetting,hasCustomPayout:!a.hasGlobalPayoutSetting,isDefault:!1};i(k=>({...k,landingPages:[...k.landingPages,N]}))},h=p=>{a.landingPages.length>1&&i(N=>({...N,landingPages:N.landingPages.filter(k=>k.id!==p)}))},f=(p,N,k)=>{i(S=>({...S,landingPages:S.landingPages.map(P=>P.id===p?{...P,[N]:k}:P)}))},m=p=>{const N=a.trafficSources.includes(p);i(k=>({...k,trafficSources:N?k.trafficSources.filter(S=>S!==p):[...k.trafficSources,p]}))},g=p=>{const N=a.allowedApplications.includes(p);i(k=>({...k,allowedApplications:N?k.allowedApplications.filter(S=>S!==p):[...k.allowedApplications,p]}))},x=p=>{const N=a.antifraudMethods.includes(p);i(k=>({...k,antifraudMethods:N?k.antifraudMethods.filter(S=>S!==p):[...k.antifraudMethods,p]}))},w=p=>{const N=a.geoTargeting.includes(p);i(k=>({...k,geoTargeting:N?k.geoTargeting.filter(S=>S!==p):[...k.geoTargeting,p]}))},j=()=>{if(!a.name.trim()){s({title:"Ошибка",description:"Укажите название оффера",variant:"destructive"});return}if(!a.targetUrl.trim()){s({title:"Ошибка",description:"Укажите целевую URL",variant:"destructive"});return}if(a.geoTargeting.length===0){s({title:"Ошибка",description:"Выберите хотя бы одну страну для таргетинга",variant:"destructive"});return}const p={...e,...a,url:a.targetUrl,payout:a.payoutAmount,cap:a.dailyLimit};n(p),t()};return r.jsx(_t,{open:!0,onOpenChange:t,children:r.jsxs(kt,{className:"max-w-7xl max-h-[95vh] overflow-y-auto",children:[r.jsx(St,{children:r.jsxs(Ct,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"h-5 w-5"}),"Редактировать оффер: ",a.name||"Без названия"]})}),r.jsxs(rn,{defaultValue:"basic",className:"w-full",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-6",children:[r.jsxs(We,{value:"basic",className:"flex items-center gap-1",children:[r.jsx(mr,{className:"h-4 w-4"}),"Основная информация"]}),r.jsxs(We,{value:"geo",className:"flex items-center gap-1",children:[r.jsx(Gt,{className:"h-4 w-4"}),"Гео и лендинги"]}),r.jsxs(We,{value:"payouts",className:"flex items-center gap-1",children:[r.jsx(Rt,{className:"h-4 w-4"}),"Выплаты"]}),r.jsxs(We,{value:"traffic",className:"flex items-center gap-1",children:[r.jsx(Gt,{className:"h-4 w-4"}),"Трафик"]}),r.jsxs(We,{value:"antifraud",className:"flex items-center gap-1",children:[r.jsx(fr,{className:"h-4 w-4"}),"Антифрод"]}),r.jsxs(We,{value:"additional",className:"flex items-center gap-1",children:[r.jsx(Zt,{className:"h-4 w-4"}),"Дополнительно"]})]}),r.jsx(He,{value:"basic",className:"mt-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(mr,{className:"h-5 w-5"}),"Основная информация об оффере"]})}),r.jsxs(W,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"name",className:"text-sm font-medium",children:"Название оффера *"}),r.jsx(ne,{id:"name",value:a.name,onChange:p=>i(N=>({...N,name:p.target.value})),placeholder:"Введите название оффера","data-testid":"input-offer-name"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Статус оффера"}),r.jsxs(fe,{value:a.status,onValueChange:p=>i(N=>({...N,status:p})),children:[r.jsx(ue,{"data-testid":"select-status",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"draft",children:"Черновик"}),r.jsx(C,{value:"active",children:"Активный"}),r.jsx(C,{value:"paused",children:"Приостановлен"}),r.jsx(C,{value:"on_request",children:"На запрос"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Описание (RU)"}),r.jsx(gt,{value:a.description.ru,onChange:p=>i(N=>({...N,description:{...N.description,ru:p.target.value}})),placeholder:"Описание оффера на русском языке...",rows:4,"data-testid":"textarea-description-ru"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Описание (EN)"}),r.jsx(gt,{value:a.description.en,onChange:p=>i(N=>({...N,description:{...N.description,en:p.target.value}})),placeholder:"Offer description in English...",rows:4,"data-testid":"textarea-description-en"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Категория"}),r.jsxs(jm,{open:c,onOpenChange:d,children:[r.jsx(wm,{asChild:!0,children:r.jsxs(D,{variant:"outline",role:"combobox","aria-expanded":c,className:"w-full justify-between","data-testid":"button-select-category",children:[a.category?PF.find(p=>p===a.category):"Выберите категорию...",r.jsx(z2,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(Tu,{className:"w-[400px] p-0",children:r.jsxs(Jj,{children:[r.jsx(ew,{placeholder:"Поиск категории..."}),r.jsx(tw,{children:"Категория не найдена."}),r.jsx(rw,{className:"max-h-64 overflow-auto",children:PF.map(p=>r.jsxs(nw,{value:p,onSelect:()=>{i(N=>({...N,category:p})),d(!1)},"data-testid":`command-item-category-${p}`,children:[r.jsx(on,{className:`mr-2 h-4 w-4 ${a.category===p?"opacity-100":"opacity-0"}`}),p]},p))})]})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Логотип оффера"}),r.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:[r.jsxs(lw,{maxNumberOfFiles:1,maxFileSize:5242880,onGetUploadParameters:async()=>{const p=localStorage.getItem("auth_token"),N=await fetch("/api/objects/upload",{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(!N.ok)throw new Error(`Не удалось получить URL: ${N.status}`);return{method:"PUT",url:(await N.json()).uploadURL}},onComplete:p=>{if(console.log("Logo upload result:",p),p.successful&&p.successful[0]){const N=p.successful[0].uploadURL;if(console.log("Logo upload URL:",N),N)try{const S=new URL(N).pathname;console.log("Parsed path:",S);const P=S.split("/"),_=P.findIndex(R=>R==="uploads");if(_!==-1&&P[_+1]){const O=`/objects/uploads/${P[_+1]}`;console.log("Final logo URL:",O),i(M=>({...M,logo:O})),s({title:"Успех",description:"Логотип успешно загружен"})}else s({title:"Ошибка",description:"Не удалось извлечь ID логотипа из URL",variant:"destructive"})}catch{s({title:"Ошибка",description:"Не удалось обработать URL логотипа",variant:"destructive"})}}},buttonClassName:"w-full",children:[r.jsx(Ba,{className:"h-4 w-4 mr-2"}),"Загрузить логотип"]}),a.logo&&r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(io,{className:"h-4 w-4"}),"Предварительный просмотр:"]}),r.jsx("img",{src:a.logo,alt:"Логотип оффера",className:"w-20 h-20 object-cover rounded-lg border border-border"}),r.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>i(p=>({...p,logo:""})),"data-testid":"button-remove-logo",children:[r.jsx(wr,{className:"h-4 w-4 mr-1"}),"Удалить логотип"]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Основное изображение оффера"}),r.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:[r.jsxs(lw,{maxNumberOfFiles:1,maxFileSize:10485760,onGetUploadParameters:async()=>{const p=localStorage.getItem("auth_token"),N=await fetch("/api/objects/upload",{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(!N.ok)throw new Error(`Не удалось получить URL: ${N.status}`);return{method:"PUT",url:(await N.json()).uploadURL}},onComplete:p=>{if(console.log("Image upload result:",p),p.successful&&p.successful[0]){const N=p.successful[0].uploadURL;if(console.log("Image upload URL:",N),N)try{const S=new URL(N).pathname;console.log("Parsed path:",S);const P=S.split("/"),_=P.findIndex(R=>R==="uploads");if(_!==-1&&P[_+1]){const O=`/objects/uploads/${P[_+1]}`;console.log("Final image URL:",O),i(M=>({...M,image:O})),s({title:"Успех",description:"Изображение успешно загружено"})}else s({title:"Ошибка",description:"Не удалось извлечь ID изображения из URL",variant:"destructive"})}catch{s({title:"Ошибка",description:"Не удалось обработать URL изображения",variant:"destructive"})}}},buttonClassName:"w-full",children:[r.jsx(io,{className:"h-4 w-4 mr-2"}),"Загрузить изображение"]}),a.image&&r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(io,{className:"h-4 w-4"}),"Предварительный просмотр:"]}),r.jsx("img",{src:a.image,alt:"Изображение оффера",className:"w-32 h-20 object-cover rounded-lg border border-border"}),r.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>i(p=>({...p,image:""})),"data-testid":"button-remove-image",children:[r.jsx(wr,{className:"h-4 w-4 mr-1"}),"Удалить изображение"]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"KPI и цели"}),r.jsx(gt,{value:a.kpi,onChange:p=>i(N=>({...N,kpi:p.target.value})),placeholder:"Опишите ключевые показатели эффективности и цели оффера...",rows:3,"data-testid":"textarea-kpi"})]})]})]})}),r.jsx(He,{value:"geo",className:"mt-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Gt,{className:"h-5 w-5"}),"Гео-таргетинг и лендинги"]})}),r.jsxs(W,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx(F,{className:"text-sm font-medium",children:"Доступные страны *"}),r.jsxs(jm,{open:l,onOpenChange:o,children:[r.jsx(wm,{asChild:!0,children:r.jsxs(D,{variant:"outline",role:"combobox","aria-expanded":l,className:"w-full justify-between","data-testid":"button-select-geo",children:[a.geoTargeting.length>0?`Выбрано стран: ${a.geoTargeting.length}`:"Выберите страны...",r.jsx(z2,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(Tu,{className:"w-[400px] p-0",children:r.jsxs(Jj,{children:[r.jsx(ew,{placeholder:"Поиск страны..."}),r.jsx(tw,{children:"Страна не найдена."}),r.jsx(rw,{className:"max-h-64 overflow-auto",children:_F.map(p=>r.jsxs(nw,{value:p.code,onSelect:()=>w(p.code),"data-testid":`command-item-country-${p.code}`,children:[r.jsx(on,{className:`mr-2 h-4 w-4 ${a.geoTargeting.includes(p.code)?"opacity-100":"opacity-0"}`}),p.name]},p.code))})]})})]}),a.geoTargeting.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 p-2 border rounded-md bg-muted/50",children:a.geoTargeting.map(p=>{const N=_F.find(k=>k.code===p);return N?r.jsxs(ie,{variant:"secondary",className:"flex items-center gap-1",children:[N.name,r.jsx(Fn,{className:"h-3 w-3 cursor-pointer hover:text-destructive",onClick:()=>w(p)})]},p):null})})]}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{className:"text-sm font-medium",children:"Лендинг страницы"}),r.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:u,"data-testid":"button-add-landing",children:[r.jsx(Zt,{className:"h-4 w-4 mr-1"}),"Добавить лендинг"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 border rounded-lg bg-muted/50",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{checked:a.hasGlobalGeoSetting,onCheckedChange:p=>i(N=>({...N,hasGlobalGeoSetting:p})),"data-testid":"switch-global-geo"}),r.jsx(F,{className:"text-sm",children:"Глобальное гео"})]}),a.hasGlobalGeoSetting&&r.jsx(ne,{value:a.globalGeo,onChange:p=>i(N=>({...N,globalGeo:p.target.value})),placeholder:"Все страны","data-testid":"input-global-geo"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{checked:a.hasGlobalPayoutSetting,onCheckedChange:p=>i(N=>({...N,hasGlobalPayoutSetting:p})),"data-testid":"switch-global-payout"}),r.jsx(F,{className:"text-sm",children:"Глобальная выплата"})]}),a.hasGlobalPayoutSetting&&r.jsx(ne,{type:"number",step:"0.01",value:a.globalPayout,onChange:p=>i(N=>({...N,globalPayout:p.target.value})),placeholder:"0.00","data-testid":"input-global-payout"})]})]}),r.jsx("div",{className:"space-y-3",children:a.landingPages.map(p=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ne,{value:p.name,onChange:N=>f(p.id,"name",N.target.value),className:"w-40",placeholder:"Название лендинга","data-testid":`input-landing-name-${p.id}`}),p.isDefault&&r.jsx(ie,{variant:"default",children:"По умолчанию"})]}),!p.isDefault&&r.jsx(D,{type:"button",variant:"ghost",size:"sm",onClick:()=>h(p.id),"data-testid":`button-remove-landing-${p.id}`,children:r.jsx(wr,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm",children:"URL лендинга *"}),r.jsx(ne,{value:p.url,onChange:N=>f(p.id,"url",N.target.value),placeholder:"https://example.com/landing","data-testid":`input-landing-url-${p.id}`})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[(!a.hasGlobalGeoSetting||p.hasCustomGeo)&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{checked:p.hasCustomGeo,onCheckedChange:N=>f(p.id,"hasCustomGeo",N),"data-testid":`switch-custom-geo-${p.id}`}),r.jsx(F,{className:"text-sm",children:"Кастомное гео"})]}),p.hasCustomGeo&&r.jsx(ne,{value:p.geo||"",onChange:N=>f(p.id,"geo",N.target.value),placeholder:"US, CA, GB","data-testid":`input-landing-geo-${p.id}`})]}),(!a.hasGlobalPayoutSetting||p.hasCustomPayout)&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{checked:p.hasCustomPayout,onCheckedChange:N=>f(p.id,"hasCustomPayout",N),"data-testid":`switch-custom-payout-${p.id}`}),r.jsx(F,{className:"text-sm",children:"Кастомная выплата"})]}),p.hasCustomPayout&&r.jsx(ne,{type:"number",step:"0.01",value:p.payout||"",onChange:N=>f(p.id,"payout",N.target.value),placeholder:"0.00","data-testid":`input-landing-payout-${p.id}`})]})]})]},p.id))})]}),r.jsx(wn,{}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Целевая ссылка *"}),r.jsx(ne,{value:a.targetUrl,onChange:p=>i(N=>({...N,targetUrl:p.target.value})),placeholder:"https://example.com/offer","data-testid":"input-target-url"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Основная ссылка куда будет перенаправлен трафик"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Postback URL"}),r.jsx(ne,{value:a.postbackUrl,onChange:p=>i(N=>({...N,postbackUrl:p.target.value})),placeholder:"https://example.com/postback","data-testid":"input-postback-url"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"URL для получения уведомлений о конверсиях"})]})]})]})]})}),r.jsx(He,{value:"payouts",className:"mt-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Rt,{className:"h-5 w-5"}),"Настройки выплат"]})}),r.jsxs(W,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Модель выплат"}),r.jsxs(fe,{value:a.payoutType,onValueChange:p=>i(N=>({...N,payoutType:p})),children:[r.jsx(ue,{"data-testid":"select-payout-type",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"cpa",children:"CPA - За действие"}),r.jsx(C,{value:"cpl",children:"CPL - За лид"}),r.jsx(C,{value:"cps",children:"CPS - За продажу"}),r.jsx(C,{value:"revshare",children:"RevShare - Доля от дохода"}),r.jsx(C,{value:"hybrid",children:"Hybrid - Гибридная"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Размер выплаты"}),r.jsx(ne,{type:"number",step:"0.01",value:a.payoutAmount,onChange:p=>i(N=>({...N,payoutAmount:parseFloat(p.target.value)||0})),placeholder:"0.00","data-testid":"input-payout-amount"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Валюта"}),r.jsxs(fe,{value:a.currency,onValueChange:p=>i(N=>({...N,currency:p})),children:[r.jsx(ue,{"data-testid":"select-currency",children:r.jsx(me,{})}),r.jsx(he,{children:Kze.map(p=>r.jsxs(C,{value:p.code,children:[p.symbol," ",p.code," - ",p.name]},p.code))})]})]})]}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Лимиты и ограничения"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Дневной лимит конверсий"}),r.jsx(ne,{type:"number",value:a.dailyLimit,onChange:p=>i(N=>({...N,dailyLimit:parseInt(p.target.value)||0})),placeholder:"0 = без лимита","data-testid":"input-daily-limit"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Максимальное количество конверсий в день"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Месячный лимит конверсий"}),r.jsx(ne,{type:"number",value:a.monthlyLimit,onChange:p=>i(N=>({...N,monthlyLimit:parseInt(p.target.value)||0})),placeholder:"0 = без лимита","data-testid":"input-monthly-limit"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Максимальное количество конверсий в месяц"})]})]})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Информация о моделях выплат:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"CPA:"})," Фиксированная сумма за каждое целевое действие",r.jsx("br",{}),r.jsx("strong",{children:"CPL:"})," Оплата за каждый квалифицированный лид",r.jsx("br",{}),r.jsx("strong",{children:"CPS:"})," Процент или фиксированная сумма с каждой продажи"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"RevShare:"})," Процент от дохода рекламодателя",r.jsx("br",{}),r.jsx("strong",{children:"Hybrid:"})," Комбинация фиксированной суммы и процента"]})]})]})]})]})}),r.jsx(He,{value:"traffic",className:"mt-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Gt,{className:"h-5 w-5"}),"Источники трафика и приложения"]})}),r.jsxs(W,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{className:"text-sm font-medium",children:"Разрешенные источники трафика"}),r.jsx("div",{className:"grid grid-cols-4 gap-3 max-h-48 overflow-y-auto border rounded-lg p-3",children:zze.map(p=>r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-muted/50 p-2 rounded","data-testid":`checkbox-traffic-${p.replace(/\s+/g,"-").toLowerCase()}`,children:[r.jsx(Je,{checked:a.trafficSources.includes(p),onCheckedChange:()=>m(p)}),r.jsx("span",{className:"text-xs",children:p})]},p))}),a.trafficSources.length>0&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Выбрано источников: ",a.trafficSources.length]})]}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{className:"text-sm font-medium",children:"Разрешенные типы приложений"}),r.jsx("div",{className:"grid grid-cols-4 gap-3 max-h-48 overflow-y-auto border rounded-lg p-3",children:Vze.map(p=>r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-muted/50 p-2 rounded","data-testid":`checkbox-app-${p.replace(/\s+/g,"-").toLowerCase()}`,children:[r.jsx(Je,{checked:a.allowedApplications.includes(p),onCheckedChange:()=>g(p)}),r.jsx("span",{className:"text-xs",children:p})]},p))}),a.allowedApplications.length>0&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Выбрано приложений: ",a.allowedApplications.length]})]}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{className:"text-sm font-medium text-destructive",children:"Запрещенные источники трафика"}),r.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:[r.jsx("div",{className:"grid grid-cols-3 gap-2 text-sm text-destructive",children:qze.map(p=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fn,{className:"h-3 w-3"}),p]},p))}),r.jsx("p",{className:"text-xs text-destructive mt-3",children:"Трафик из этих источников будет автоматически отклонен системой антифрод"})]})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Поддерживаемые типы устройств:"}),r.jsx("div",{className:"grid grid-cols-5 gap-2 text-xs",children:Wze.map(p=>r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-background rounded border",children:[r.jsx(ir,{className:"h-3 w-3 text-muted-foreground"}),p.label]},p.value))})]})]})]})}),r.jsx(He,{value:"antifraud",className:"mt-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Dt,{className:"h-5 w-5"}),"Защита от мошенничества"]})}),r.jsxs(W,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{className:"text-sm font-medium",children:"Активные методы защиты"}),r.jsx("div",{className:"grid grid-cols-3 gap-4",children:Hze.map(p=>r.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg bg-muted/30",children:[r.jsx(Je,{checked:a.antifraudMethods.includes(p.value),onCheckedChange:()=>x(p.value),"data-testid":`switch-antifraud-${p.value}`}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(F,{className:"text-sm font-medium",children:p.label}),r.jsx("p",{className:"text-xs text-muted-foreground",children:p.description})]})]},p.value))}),a.antifraudMethods.length>0&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Активно методов защиты: ",a.antifraudMethods.length]})]}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(F,{className:"text-sm font-medium",children:"Тип модерации партнеров"}),r.jsxs(fe,{value:a.partnerApprovalType,onValueChange:p=>i(N=>({...N,partnerApprovalType:p})),children:[r.jsx(ue,{"data-testid":"select-partner-approval",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"auto",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ur,{className:"h-4 w-4 text-green-500"}),"Автоматическое подтверждение"]})}),r.jsx(C,{value:"manual",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lr,{className:"h-4 w-4 text-yellow-500"}),"Ручная модерация"]})}),r.jsx(C,{value:"none",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ua,{className:"h-4 w-4 text-red-500"}),"Без модерации"]})})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Определяет как будут проверяться заявки партнеров на доступ к офферу"})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-4",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Рекомендации по безопасности:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-muted-foreground",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dt,{className:"h-3 w-3 text-green-500"}),r.jsx("strong",{children:"Активная защита"})]}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[r.jsx("li",{children:"Включить IP фильтрацию для географических ограничений"}),r.jsx("li",{children:"Использовать анализ поведения для выявления ботов"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ir,{className:"h-3 w-3 text-blue-500"}),r.jsx("strong",{children:"Мониторинг"})]}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 pl-4",children:[r.jsx("li",{children:"Отслеживать аномальный трафик и подозрительные паттерны"}),r.jsx("li",{children:"Настроить алерты при превышении лимитов конверсий"})]})]})]})]})]})]})}),r.jsx(He,{value:"additional",className:"mt-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"h-5 w-5"}),"Дополнительные настройки"]})}),r.jsxs(W,{className:"space-y-6",children:[r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Je,{checked:a.isPrivate,onCheckedChange:p=>i(N=>({...N,isPrivate:p})),"data-testid":"switch-private"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(F,{className:"text-sm font-medium",children:"Приватный оффер"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Оффер будет доступен только выбранным партнерам по приглашению"})]})]})}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(F,{className:"text-sm font-medium",children:"Теги для категоризации"}),r.jsx(gt,{value:a.tags.join(", "),onChange:p=>{const N=p.target.value.split(",").map(k=>k.trim()).filter(k=>k);i(k=>({...k,tags:N}))},placeholder:"premium, exclusive, tier1, high-converting...",rows:2,"data-testid":"textarea-tags"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Добавьте теги для удобного поиска и фильтрации (разделяйте запятыми)"}),a.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.map((p,N)=>r.jsxs(ie,{variant:"secondary",className:"text-xs",children:[p,r.jsx(Fn,{className:"h-3 w-3 ml-1 cursor-pointer hover:text-destructive",onClick:()=>{const k=a.tags.filter((S,P)=>P!==N);i(S=>({...S,tags:k}))}})]},N))})]}),r.jsx(wn,{}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{className:"text-sm font-medium",children:"Внутренние заметки"}),r.jsx(gt,{value:a.notes,onChange:p=>i(N=>({...N,notes:p.target.value})),placeholder:"Дополнительные заметки для внутреннего использования...",rows:3,"data-testid":"textarea-notes"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Эти заметки видны только вам и вашей команде, партнеры их не увидят"})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-4",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Дополнительные настройки:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Je,{checked:a.requiresApproval,onCheckedChange:p=>i(N=>({...N,requiresApproval:p})),"data-testid":"switch-requires-approval"}),r.jsxs("div",{children:[r.jsx(F,{className:"text-sm",children:"Требует одобрение"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Партнеры должны ждать одобрения"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Je,{checked:a.trackingEnabled,onCheckedChange:p=>i(N=>({...N,trackingEnabled:p})),"data-testid":"switch-tracking"}),r.jsxs("div",{children:[r.jsx(F,{className:"text-sm",children:"Расширенное отслеживание"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Детальная аналитика конверсий"})]})]})]})]}),r.jsxs("div",{className:"border border-dashed rounded-lg p-4 space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Шаблоны:"}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(dn,{checked:a.saveAsTemplate,onCheckedChange:p=>i(N=>({...N,saveAsTemplate:p===!0})),"data-testid":"checkbox-save-template"}),r.jsx(F,{className:"text-sm",children:"Сохранить как шаблон для будущих офферов"})]})}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Создание шаблона поможет быстро создавать похожие офферы в будущем"})]})]})]})})]}),r.jsxs("div",{className:"flex justify-end pt-4 gap-2 mt-6 border-t",children:[r.jsx(D,{variant:"outline",onClick:t,"data-testid":"button-cancel",children:"Отмена"}),r.jsx(D,{onClick:j,"data-testid":"button-save",children:e.id?"Сохранить изменения":"Создать оффер"})]})]})})},Gze=({countries:e,geoTargeting:t,payout:n=0,currency:s="USD",offerId:a,payoutByGeo:i})=>{const[l,o]=v.useState(!1),c=iK(e||t||[]),d=c.slice(0,2),u=c[2],h=c.length-3,f=()=>c.map(m=>{const x={AF:"afghanistan",AL:"albania",DZ:"algeria",AD:"andorra",AO:"angola",AM:"armenia",AR:"argentina",AU:"australia",AT:"austria",AZ:"azerbaijan",BH:"bahrain",BD:"bangladesh",BY:"belarus",BE:"belgium",BR:"brazil",BG:"bulgaria",CA:"canada",CN:"china",CO:"colombia",HR:"croatia",CZ:"czech",DK:"denmark",EG:"egypt",EE:"estonia",FI:"finland",FR:"france",DE:"germany",GR:"greece",HU:"hungary",IS:"iceland",IN:"india",ID:"indonesia",IR:"iran",IQ:"iraq",IE:"ireland",IL:"israel",IT:"italy",JP:"japan",JO:"jordan",KZ:"kazakhstan",KE:"kenya",KW:"kuwait",LV:"latvia",LB:"lebanon",LT:"lithuania",LU:"luxembourg",MY:"malaysia",MX:"mexico",MD:"moldova",MC:"monaco",MA:"morocco",NL:"netherlands",NZ:"new_zealand",NO:"norway",PK:"pakistan",PE:"peru",PH:"philippines",PL:"poland",PT:"portugal",QA:"qatar",RO:"romania",RU:"russia",SA:"saudi_arabia",RS:"serbia",SG:"singapore",SK:"slovakia",SI:"slovenia",ZA:"south_africa",KR:"south_korea",ES:"spain",LK:"sri_lanka",SE:"sweden",CH:"switzerland",TH:"thailand",TR:"turkey",UA:"ukraine",AE:"united_arab_emirates",GB:"united_kingdom",US:"united_states",VN:"vietnam"}[m.code]||m.code.toLowerCase(),j=(i==null?void 0:i[x])||(i==null?void 0:i[m.code.toLowerCase()])||(i==null?void 0:i[m.code.toUpperCase()])||(i==null?void 0:i[m.name.toLowerCase()])||n;return{...m,payout:j,currency:s}});return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-1 flex-wrap max-w-32",children:[d.map((m,g)=>r.jsxs("div",{className:"flex items-center gap-1 bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded-md border border-blue-200 dark:border-blue-800",children:[r.jsx("span",{className:"text-sm",title:m.name,children:m.flag}),r.jsx("span",{className:"text-xs font-mono font-semibold text-blue-700 dark:text-blue-300",children:m.code})]},`country-${g}`)),u&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("div",{className:"flex items-center gap-1 bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded-md border border-blue-200 dark:border-blue-800",children:[r.jsx("span",{className:"text-sm",title:u.name,children:u.flag}),r.jsx("span",{className:"text-xs font-mono font-semibold text-blue-700 dark:text-blue-300",children:u.code})]}),h>0&&r.jsxs(D,{variant:"outline",size:"sm",className:"h-6 px-2 text-xs bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>o(!0),title:`Показать все ${c.length} стран`,children:["+",h]})]}),c.length===3&&!h&&r.jsx(D,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-foreground",onClick:()=>o(!0),title:"Показать детали по странам",children:"⚡"})]}),r.jsx(_t,{open:l,onOpenChange:o,children:r.jsxs(kt,{className:"max-w-md",children:[r.jsxs(St,{children:[r.jsxs(Ct,{className:"flex items-center justify-between",children:[r.jsxs("span",{children:["Гео-таргетинг (",c.length," стран)"]}),r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>o(!1),className:"h-6 w-6 p-0",children:r.jsx(Fn,{className:"h-4 w-4"})})]}),r.jsx(Br,{children:"Подробная информация по странам и выплатам для данного оффера"})]}),r.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:f().map((m,g)=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-lg",children:m.flag}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:m.name}),r.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:m.code})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-semibold text-green-600 dark:text-green-400",children:["$",m.payout]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:m.currency})]})]},`modal-country-${g}`))}),r.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex justify-between items-center text-sm font-medium",children:[r.jsx("span",{children:"Общая сумма:"}),r.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["$",Number(f().reduce((m,g)=>m+(Number(g.payout)||0),0)).toFixed(2)," ",s]})]})})]})})]})},Yze=({offer:e})=>{var i;const[t,n]=v.useState(!1),[s,a]=v.useState(!1);return e.image&&!t?r.jsx("img",{src:e.image,alt:e.name,className:"w-10 h-10 rounded-lg object-cover border border-gray-200 dark:border-gray-700",onLoad:()=>console.log("Offer image loaded successfully:",e.image),onError:()=>{console.log("Offer image failed to load, trying logo:",e.image),n(!0)}}):e.logo&&!s?r.jsx("img",{src:e.logo,alt:e.name,className:"w-10 h-10 rounded-lg object-cover border border-gray-200 dark:border-gray-700",onLoad:()=>console.log("Logo loaded successfully:",e.logo),onError:()=>{console.log("Logo failed to load:",e.logo),a(!0)}}):r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white text-xs font-bold",children:((i=e.name)==null?void 0:i.substring(0,2).toUpperCase())||"OF"})};function Xze({offer:e,index:t,children:n}){const{attributes:s,listeners:a,setNodeRef:i,transform:l,transition:o,isDragging:c}=JK({id:e.id}),d={transform:Nm.Transform.toString(l),transition:o,opacity:c?.5:1};return r.jsxs(De,{ref:i,style:d,...s,className:c?"bg-muted/50":"",children:[r.jsx(H,{...a,className:"cursor-grab active:cursor-grabbing hover:bg-muted/50 p-2",title:"Перетащите для изменения порядка",children:r.jsx(qw,{className:"w-4 h-4 text-muted-foreground hover:text-foreground"})}),n]})}const Zze=()=>{const{toast:e}=at(),t=Et(),[,n]=Bn(),[s,a]=v.useState(null),[i,l]=v.useState(null),[o,c]=v.useState(!1);v.useState(null);const[d,u]=v.useState(""),[h,f]=v.useState("all"),[m,g]=v.useState([]),[x,w]=v.useState([]),{data:j=[],isLoading:y}=Fe({queryKey:["/api/advertiser/offers"],queryFn:()=>Re("/api/advertiser/offers")});X.useEffect(()=>{if(j&&j.length>0){console.log("AdvertiserOffers: Loaded offers from API:",j.length,j);const A=[...j].sort((T,B)=>new Date(B.createdAt||0).getTime()-new Date(T.createdAt||0).getTime());w(A),console.log("AdvertiserOffers: Local offers set:",A.length)}else console.log("AdvertiserOffers: No offers received or empty array:",j)},[j]);const b=Oe({mutationFn:A=>(A.status||(A.status="active"),A.id?Re(`/api/advertiser/offers/${A.id}`,"PATCH",A):Re("/api/advertiser/offers","POST",A)),onSuccess:()=>{e({title:"Успех",description:"Оффер сохранён"}),t.invalidateQueries({queryKey:["/api/advertiser/offers"]})},onError:()=>{e({title:"Ошибка",description:"Ошибка при сохранении",variant:"destructive"})}}),p=Oe({mutationFn:A=>Re(`/api/advertiser/offers/${A}`,"DELETE"),onSuccess:()=>{e({title:"Успех",description:"Оффер удалён"}),t.invalidateQueries({queryKey:["/api/advertiser/offers"]}),l(null),g([])},onError:()=>{e({title:"Ошибка",description:"Ошибка при удалении",variant:"destructive"})}}),N=Oe({mutationFn:async A=>{const T=A.map(B=>Re(`/api/advertiser/offers/${B}`,"DELETE"));return Promise.all(T)},onSuccess:()=>{e({title:"Успех",description:`Удалено ${m.length} офферов`}),t.invalidateQueries({queryKey:["/api/advertiser/offers"]}),g([]),c(!1)},onError:()=>{e({title:"Ошибка",description:"Ошибка при массовом удалении",variant:"destructive"})}}),k=Oe({mutationFn:({ids:A,status:T})=>Re("/api/advertiser/offers/bulk-update","POST",{ids:A,status:T}),onSuccess:()=>{e({title:"Успех",description:"Статус обновлён"}),t.invalidateQueries({queryKey:["/api/advertiser/offers"]}),g([])}}),S=x.filter(A=>A.name.toLowerCase().includes(d.toLowerCase())).filter(A=>h==="archived"?A.status==="archived":h==="all"?!0:A.status===h),P=A=>{const{active:T,over:B}=A;if(!B||T.id===B.id)return;const z=x.findIndex(E=>E.id===T.id),U=x.findIndex(E=>E.id===B.id);if(z!==-1&&U!==-1){const E=vN(x,z,U);w(E),console.log("Reordered offers:",E.map($=>({id:$.id,name:$.name}))),e({title:"Порядок изменён",description:"Оффер перемещён"})}},_=A=>{k.mutate({ids:m,status:A})},R=(A,T)=>{var B,z;switch(T){case"activate":b.mutate({...A,status:"active"});break;case"archive":b.mutate({...A,status:"archived"});break;case"duplicate":const U={...A,id:void 0,createdAt:void 0,updatedAt:void 0,name:A.name+" (копия)"};b.mutate(U);break;case"delete":l(A);break;case"preview":(z=(B=A==null?void 0:A.landingPages)==null?void 0:B[0])!=null&&z.url?window.open(A.landingPages[0].url,"_blank"):e({title:"Предупреждение",description:"Нет доступной ссылки для предпросмотра",variant:"destructive"});break;case"assign":n(`/advertiser/offers/${A.id}/assign`);break;case"edit-landing":n(`/advertiser/offers/${A.id}/landing-editor`);break}};if(y)return r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]}),r.jsx("p",{className:"text-center text-gray-500 mt-4",children:"Загрузка офферов..."})]});const O=x.length,M=S.length;return console.log("AdvertiserOffers render:",{totalOffers:O,filteredCount:M,search:d,selectedStatus:h,isLoading:y,offersFromAPI:(j==null?void 0:j.length)||0}),r.jsxs("div",{className:"w-full space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:["Мои офферы (",O,")"]}),r.jsxs("p",{className:"text-muted-foreground",children:["Управление офферами и отслеживание статистики. Показано: ",M," из ",O]})]}),r.jsxs(D,{onClick:()=>n("/advertiser/offers/new"),className:"bg-blue-600 hover:bg-blue-700 text-white",title:"Создать новый оффер",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2 text-white"}),"Создать оффер"]})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx(ne,{placeholder:"Поиск по названию...",value:d,onChange:A=>u(A.target.value),className:"w-64"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(D,{onClick:()=>f("all"),variant:h==="all"?"default":"outline",children:"Все"}),r.jsx(D,{onClick:()=>f("active"),variant:h==="active"?"default":"outline",children:"Активные"}),r.jsx(D,{onClick:()=>f("paused"),variant:h==="paused"?"default":"outline",children:"Приостановленные"}),r.jsx(D,{onClick:()=>f("archived"),variant:h==="archived"?"default":"outline",children:"Архив"})]})]}),m.length>0&&r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(D,{onClick:()=>_("active"),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",title:"Активировать выбранные офферы",children:[r.jsx(WA,{className:"w-4 h-4 mr-1 text-white"})," Активировать"]}),r.jsxs(D,{onClick:()=>_("archived"),size:"sm",className:"bg-gray-600 hover:bg-gray-700 text-white",title:"Архивировать выбранные офферы",children:[r.jsx(BA,{className:"w-4 h-4 mr-1 text-white"})," Архивировать"]}),r.jsxs(D,{onClick:()=>_("paused"),size:"sm",className:"bg-yellow-600 hover:bg-yellow-700 text-white",title:"Приостановить выбранные офферы",children:[r.jsx(qA,{className:"w-4 h-4 mr-1 text-white"})," Приостановить"]}),r.jsxs(D,{onClick:()=>c(!0),size:"sm",variant:"destructive",className:"bg-red-600 hover:bg-red-700 text-white",title:`Удалить выбранные офферы (${m.length})`,children:[r.jsx(wr,{className:"w-4 h-4 mr-1 text-white"})," Удалить (",m.length,")"]})]}),r.jsx(HK,{onDragEnd:P,children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{className:"w-8",title:"Перетащите для изменения порядка",children:r.jsx(qw,{className:"w-4 h-4 text-muted-foreground"})}),r.jsx(Z,{children:r.jsx(dn,{checked:m.length===S.length&&S.length>0,onCheckedChange:A=>{g(A?S.map(T=>T.id):[])}})}),r.jsx(Z,{children:"Название"}),r.jsx(Z,{children:"GEO"}),r.jsx(Z,{children:"Категория"}),r.jsx(Z,{children:"CR"}),r.jsx(Z,{children:"Payout"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Действия"})]})}),r.jsx(It,{children:r.jsx(ZK,{items:S.map(A=>A.id),strategy:GK,children:S.map((A,T)=>{var B,z,U,E;return r.jsx(Xze,{offer:A,index:T,children:r.jsxs(r.Fragment,{children:[r.jsx(H,{children:r.jsx(dn,{checked:m.includes(A.id),onCheckedChange:$=>{g($?G=>[...G,A.id]:G=>G.filter(oe=>oe!==A.id))}})}),r.jsx(H,{className:"font-medium",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Yze,{offer:A}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:A.name}),A.description&&r.jsx("div",{className:"text-sm text-gray-500 truncate max-w-48",children:typeof A.description=="object"?((B=A.description)==null?void 0:B.en)||((z=A.description)==null?void 0:z.ru)||"Описание":A.description})]})]})}),r.jsx(H,{children:r.jsx(Gze,{countries:A.countries,geoTargeting:A.geoTargeting,payout:A.payout,currency:A.currency,offerId:A.id,payoutByGeo:A.payoutByGeo})}),r.jsx(H,{children:r.jsx(ie,{...tG(A.category),children:typeof A.category=="object"?((U=A.category)==null?void 0:U.en)||((E=A.category)==null?void 0:E.ru)||"Категория":A.category})}),r.jsxs(H,{children:[V0(A.cr),"%"]}),r.jsxs(H,{children:["$",A.payout," ",A.currency]}),r.jsx(H,{children:r.jsx(ie,{variant:A.status==="active"?"default":A.status==="paused"?"secondary":A.status==="archived"?"destructive":A.status==="draft"?"outline":"default",className:A.status==="active"?"bg-green-500 hover:bg-green-600 text-white":A.status==="paused"?"bg-yellow-500 hover:bg-yellow-600 text-white":A.status==="archived"?"bg-red-500 hover:bg-red-600 text-white":A.status==="draft"?"bg-gray-500 hover:bg-gray-600 text-white border-gray-600":"bg-blue-500 hover:bg-blue-600 text-white",children:A.status==="active"?"Активный":A.status==="paused"?"Приостановлен":A.status==="archived"?"Архив":A.status==="draft"?"Черновик":A.status})}),r.jsx(H,{children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>a(A),title:"Редактировать оффер",className:"hover:bg-blue-100 hover:text-blue-600 dark:hover:bg-blue-900/20 dark:hover:text-blue-400",children:r.jsx(Ts,{className:"w-4 h-4 text-blue-500"})}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>R(A,"preview"),title:"Предпросмотр оффера",className:"hover:bg-purple-100 hover:text-purple-600 dark:hover:bg-purple-900/20 dark:hover:text-purple-400",children:r.jsx(ir,{className:"w-4 h-4 text-purple-500"})}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>l(A),title:"Удалить оффер",className:"hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",children:r.jsx(wr,{className:"w-4 h-4 text-red-500"})})]})})]})},A.id)})})})]})}),s&&r.jsx(EY,{offer:s,onClose:()=>a(null),onSave:A=>{b.mutate(A),a(null)}}),r.jsx(s3,{open:!!i,onOpenChange:()=>l(null),children:r.jsxs(zP,{children:[r.jsxs(VP,{children:[r.jsx(WP,{children:"Подтвердите удаление"}),r.jsxs(HP,{children:['Вы уверены, что хотите удалить оффер "',i==null?void 0:i.name,'"?',r.jsx("br",{}),r.jsx("span",{className:"text-red-600 font-medium",children:"Это действие необратимо."})]})]}),r.jsxs(qP,{children:[r.jsx(GP,{children:"Отмена"}),r.jsx(KP,{onClick:()=>i&&p.mutate(i.id),className:"bg-red-600 hover:bg-red-700",disabled:p.isPending,children:p.isPending?"Удаление...":"Удалить"})]})]})}),r.jsx(s3,{open:o,onOpenChange:()=>c(!1),children:r.jsxs(zP,{children:[r.jsxs(VP,{children:[r.jsx(WP,{children:"Подтвердите массовое удаление"}),r.jsxs(HP,{children:["Вы уверены, что хотите удалить ",m.length," выбранных офферов?",r.jsx("br",{}),r.jsx("span",{className:"text-red-600 font-medium",children:"Это действие необратимо."})]})]}),r.jsxs(qP,{children:[r.jsx(GP,{children:"Отмена"}),r.jsx(KP,{onClick:()=>N.mutate(m),className:"bg-red-600 hover:bg-red-700",disabled:N.isPending,children:N.isPending?"Удаление...":`Удалить ${m.length} офферов`})]})]})})]})};function Qze({isOpen:e,onClose:t}){const[n,s]=v.useState(""),[a,i]=v.useState(""),[l,o]=v.useState(""),[c,d]=v.useState("30"),{toast:u}=at(),h=Et(),{data:f=[],isLoading:m}=Fe({queryKey:["/api/invite-links"],enabled:e}),g=Oe({mutationFn:async p=>Re("/api/invite-links","POST",p),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/invite-links"]}),s(""),i(""),o(""),d("30"),u({title:"Успех",description:"Ссылка приглашения создана успешно!"})},onError:()=>{u({title:"Ошибка",description:"Не удалось создать ссылку приглашения",variant:"destructive"})}}),x=Oe({mutationFn:async p=>Re(`/api/invite-links/${p}/toggle`,"PATCH"),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/invite-links"]}),u({title:"Успех",description:"Статус ссылки изменен"})}}),w=Oe({mutationFn:async p=>Re(`/api/invite-links/${p}`,"DELETE"),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/invite-links"]}),u({title:"Успех",description:"Ссылка удалена"})}}),j=()=>{if(!n.trim()){u({title:"Ошибка",description:"Введите название ссылки",variant:"destructive"});return}g.mutate({name:n.trim(),description:a.trim()||void 0,maxUsage:l?parseInt(l):void 0,expiryDays:c?parseInt(c):void 0})},y=p=>{navigator.clipboard.writeText(p).then(()=>{u({title:"Скопировано",description:"Ссылка скопирована в буфер обмена"})})},b=p=>new Date(p).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return r.jsx(_t,{open:e,onOpenChange:t,children:r.jsxs(kt,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[r.jsx(St,{children:r.jsxs(Ct,{className:"flex items-center gap-2",children:[r.jsx(cs,{className:"w-5 h-5"}),"Ссылки приглашения партнеров"]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"text-lg flex items-center gap-2",children:[r.jsx(Zt,{className:"w-4 h-4"}),"Создать ссылку"]})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"linkName",children:"Название ссылки *"}),r.jsx(ne,{id:"linkName",value:n,onChange:p=>s(p.target.value),placeholder:"Например: VIP партнеры","data-testid":"input-link-name"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"description",children:"Описание"}),r.jsx(ne,{id:"description",value:a,onChange:p=>i(p.target.value),placeholder:"Описание для внутреннего использования","data-testid":"input-description"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"maxUsage",children:"Лимит использований"}),r.jsx(ne,{id:"maxUsage",type:"number",value:l,onChange:p=>o(p.target.value),placeholder:"Оставьте пустым для неограниченного","data-testid":"input-max-usage"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"expiryDays",children:"Срок действия (дни)"}),r.jsx(ne,{id:"expiryDays",type:"number",value:c,onChange:p=>d(p.target.value),placeholder:"30","data-testid":"input-expiry-days"})]}),r.jsxs(D,{onClick:j,disabled:g.isPending,className:"w-full","data-testid":"button-create-link",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),g.isPending?"Создание...":"Создать ссылку"]})]})]})}),r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"text-lg flex items-center gap-2",children:[r.jsx(If,{className:"w-4 h-4"}),"Активные ссылки (",f.length,")"]})}),r.jsx(W,{children:m?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Vt,{className:"w-6 h-6 mx-auto animate-spin mb-2"}),r.jsx("p",{children:"Загрузка ссылок..."})]}):f.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(If,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Ссылки приглашения не созданы"}),r.jsx("p",{className:"text-sm",children:"Создайте первую ссылку для приглашения партнеров"})]}):r.jsx("div",{className:"space-y-3",children:f.map(p=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-2","data-testid":`link-card-${p.id}`,children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-semibold","data-testid":`link-name-${p.id}`,children:p.name}),r.jsx(ie,{variant:p.isActive?"default":"secondary","data-testid":`link-status-${p.id}`,children:p.isActive?"Активна":"Неактивна"})]}),p.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:p.description})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx(D,{size:"sm",variant:"outline",onClick:()=>x.mutate(p.id),disabled:x.isPending,"data-testid":`button-toggle-${p.id}`,children:p.isActive?r.jsx(Nb,{className:"w-3 h-3"}):r.jsx(ir,{className:"w-3 h-3"})}),r.jsx(D,{size:"sm",variant:"outline",onClick:()=>w.mutate(p.id),disabled:w.isPending,"data-testid":`button-delete-${p.id}`,children:r.jsx(wr,{className:"w-3 h-3"})})]})]}),r.jsx("div",{className:"bg-gray-50 rounded p-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 text-sm break-all","data-testid":`link-url-${p.id}`,children:p.url}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>y(p.url),"data-testid":`button-copy-${p.id}`,children:r.jsx(Yr,{className:"w-3 h-3"})})]})}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(or,{className:"w-3 h-3"}),"Использований: ",p.usageCount,p.maxUsage&&` / ${p.maxUsage}`]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Xn,{className:"w-3 h-3"}),"Создана: ",b(p.createdAt)]})]}),p.expiresAt&&r.jsxs("span",{className:"flex items-center gap-1",children:["Истекает: ",b(p.expiresAt)]})]})]},p.id))})})]})})]}),r.jsxs(q,{className:"mt-4",children:[r.jsx(re,{children:r.jsx(se,{className:"text-lg",children:"Как это работает"})}),r.jsx(W,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-blue-600 font-semibold",children:"1"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-1",children:"Создайте ссылку"}),r.jsx("p",{className:"text-gray-600",children:"Настройте название, описание и ограничения для ссылки приглашения"})]})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-blue-600 font-semibold",children:"2"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-1",children:"Поделитесь ссылкой"}),r.jsx("p",{className:"text-gray-600",children:"Отправьте ссылку потенциальным партнерам через любые каналы связи"})]})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-blue-600 font-semibold",children:"3"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-1",children:"Автоматическая привязка"}),r.jsx("p",{className:"text-gray-600",children:"Партнеры регистрируются и автоматически привязываются к вашему аккаунту"})]})]})]})})]})]})})}const AF=(e,t)=>{let n,s,a;e==="pending"?(n="Ожидает одобрения",s="bg-yellow-50 text-yellow-700 border-yellow-200",a=lr):e==="approved"?t?(n="Одобрен",s="bg-green-50 text-green-700 border-green-200",a=Bs):(n="Заблокирован",s="bg-orange-50 text-orange-700 border-orange-200",a=Dt):e==="rejected"?(n="Отклонен",s="bg-red-50 text-red-700 border-red-200",a=pu):e==="blocked"?(n="Заблокирован",s="bg-red-50 text-red-700 border-red-200",a=Dt):(n="Неизвестно",s="bg-gray-50 text-gray-700 border-gray-200",a=lr);const i=a;return r.jsx("div",{className:"flex items-center gap-1.5",children:r.jsxs(ie,{className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-full border ${s} shadow-sm`,children:[r.jsx(i,{className:"w-3.5 h-3.5"}),n]})})},jS=e=>{const t={low:{text:"Низкий риск",colorClass:"bg-emerald-50 text-emerald-700 border-emerald-200"},medium:{text:"Средний риск",colorClass:"bg-yellow-50 text-yellow-700 border-yellow-200"},high:{text:"Высокий риск",colorClass:"bg-red-50 text-red-700 border-red-200"}},n=t[e]||t.low;return r.jsx(ie,{className:`px-2.5 py-1 text-xs font-medium rounded-lg border ${n.colorClass}`,children:n.text})},TF=e=>{const t=new Date(e);return Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60*24))<=7},EF=()=>r.jsx(ie,{className:"bg-blue-50 text-blue-700 border-blue-200 px-2 py-0.5 text-xs font-medium rounded-full",children:"НОВЫЙ"});function Jze(){var _,R;const{toast:e}=at(),t=Et(),[n,s]=v.useState(""),[a,i]=v.useState("all"),[l,o]=v.useState("all"),[c,d]=v.useState(null),[u,h]=v.useState(null),[f,m]=v.useState(!1),{data:g,isLoading:x}=Fe({queryKey:["/api/advertiser/partners",{search:n,status:a==="all"?void 0:a,riskLevel:l==="all"?void 0:l}],queryFn:()=>Re("/api/advertiser/partners")}),w=Oe({mutationFn:O=>Re(`/api/advertiser/partners/${O}/approve`,"POST"),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/advertiser/partners"]}),e({title:"Успех!",description:"Партнер успешно одобрен"})},onError:()=>{e({title:"Ошибка",description:"Не удалось одобрить партнера",variant:"destructive"})}}),j=Oe({mutationFn:O=>Re(`/api/advertiser/partners/${O}/reject`,"POST"),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/advertiser/partners"]}),e({title:"Успех!",description:"Партнер отклонен"})},onError:()=>{e({title:"Ошибка",description:"Не удалось отклонить партнера",variant:"destructive"})}}),y=Oe({mutationFn:O=>Re(`/api/advertiser/partners/${O}/toggle-block`,"POST"),onSuccess:O=>{t.invalidateQueries({queryKey:["/api/advertiser/partners"]}),e({title:"Успех!",description:O.message})},onError:()=>{e({title:"Ошибка",description:"Не удалось изменить статус партнера",variant:"destructive"})}}),b=O=>{w.mutate(O)},p=O=>{j.mutate(O)},N=O=>{y.mutate(O)},k=(g||[]).map(O=>({...O,displayName:`${O.firstName||""} ${O.lastName||""}`.trim()||O.username,partnerNumber:O.partnerNumber||`P${O.username}`,company:O.company||"Individual",country:O.country||"Unknown",registeredAt:O.createdAt||new Date().toISOString(),balance:O.balance||"0.00",stats:{totalClicks:Math.floor(Math.random()*2e3)+500,uniqueClicks:Math.floor(Math.random()*1500)+300,totalLeads:Math.floor(Math.random()*100)+20,totalRevenue:(Math.random()*8e3+1e3).toFixed(2),totalPayout:(Math.random()*5e3+700).toFixed(2),totalProfit:(Math.random()*3e3+300).toFixed(2),conversionRate:(Math.random()*15+3).toFixed(2),epc:(Math.random()*8+2).toFixed(2),roi:(Math.random()*300+80).toFixed(2),offersCount:Math.floor(Math.random()*15)+5,activeOffersCount:Math.floor(Math.random()*12)+3,riskLevel:["low","medium","high"][Math.floor(Math.random()*3)],lastActivityDays:Math.floor(Math.random()*7),avgDailyClicks:Math.floor(Math.random()*150)+50,avgDailyRevenue:(Math.random()*300+100).toFixed(2)},payoutSettings:{hasCustomPayouts:!1,customOffers:0}})),S={totalPartners:k.length,activePartners:k.filter(O=>O.isActive).length,pendingPartners:k.filter(O=>O.approvalStatus==="pending").length,approvedPartners:k.filter(O=>O.approvalStatus==="approved").length,blockedPartners:k.filter(O=>O.approvalStatus==="blocked").length,totalRevenue:"0.00",totalPayout:"0.00",totalProfit:"0.00",totalClicks:0,totalLeads:0,avgConversionRate:"0.00",avgEpc:"0.00"},P=k.filter(O=>{if(n){const M=n.toLowerCase();if(!O.displayName.toLowerCase().includes(M)&&!O.email.toLowerCase().includes(M)&&!O.username.toLowerCase().includes(M))return!1}return!(a!=="all"&&O.approvalStatus!==a||l!=="all"&&O.stats.riskLevel!==l)});return x?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-lg",children:"Загрузка партнеров..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Управление партнерами"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Одобряйте новых партнеров и управляйте их доступом к офферам"})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(D,{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700 text-white","data-testid":"button-partner-invites",children:[r.jsx(cs,{className:"w-4 h-4 mr-2"}),"Ссылки приглашений"]})})]}),S&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(q,{children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Всего партнеров"}),r.jsx("p",{className:"text-2xl font-bold",children:S.totalPartners})]}),r.jsx(or,{className:"w-8 h-8 text-blue-500"})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Ожидают одобрения"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:S.pendingPartners})]}),r.jsx(lr,{className:"w-8 h-8 text-orange-500"})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Одобрено"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:S.approvedPartners})]}),r.jsx(Bs,{className:"w-8 h-8 text-green-500"})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Общий доход"}),r.jsxs("p",{className:"text-2xl font-bold",children:["$",S.totalRevenue]})]}),r.jsx(Rt,{className:"w-8 h-8 text-green-500"})]})})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(As,{className:"w-5 h-5"}),"Фильтры и поиск"]})}),r.jsx(W,{children:r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),r.jsx(ne,{placeholder:"Поиск по имени, email или ID партнера...",value:n,onChange:O=>s(O.target.value),className:"pl-10","data-testid":"input-search-partners"})]})}),r.jsxs(fe,{value:a,onValueChange:i,children:[r.jsx(ue,{className:"w-48","data-testid":"select-filter-status",children:r.jsx(me,{placeholder:"Статус одобрения"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все статусы"}),r.jsx(C,{value:"pending",children:"Ожидают одобрения"}),r.jsx(C,{value:"approved",children:"Одобрены"}),r.jsx(C,{value:"rejected",children:"Отклонены"}),r.jsx(C,{value:"blocked",children:"Заблокированы"})]})]}),r.jsxs(fe,{value:l,onValueChange:o,children:[r.jsx(ue,{className:"w-40","data-testid":"select-filter-risk",children:r.jsx(me,{placeholder:"Уровень риска"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все уровни"}),r.jsx(C,{value:"low",children:"Низкий"}),r.jsx(C,{value:"medium",children:"Средний"}),r.jsx(C,{value:"high",children:"Высокий"})]})]})]})})]}),r.jsx(q,{children:r.jsxs(W,{className:"p-0",children:[r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Партнер"}),r.jsx(Z,{children:"Статус одобрения"}),r.jsx(Z,{children:"Статистика"}),r.jsx(Z,{children:"Риск"}),r.jsx(Z,{children:"Регистрация"}),r.jsx(Z,{className:"w-40",children:"Действия"})]})}),r.jsx(It,{children:P.map(O=>{var M,A;return r.jsxs(De,{className:"hover:bg-gray-50",children:[r.jsx(H,{children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:[((M=O.firstName)==null?void 0:M.charAt(0))||"",((A=O.lastName)==null?void 0:A.charAt(0))||""]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-medium",children:O.displayName}),TF(O.registeredAt)&&r.jsx(EF,{})]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["#",O.partnerNumber]}),r.jsx("p",{className:"text-sm text-gray-500",children:O.email}),O.company&&r.jsx("p",{className:"text-xs text-gray-400",children:O.company})]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"space-y-2",children:[AF(O.approvalStatus,O.isActive),O.approvedAt&&r.jsxs("p",{className:"text-xs text-gray-500",children:["Одобрен: ",new Date(O.approvedAt).toLocaleDateString("ru-RU")]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(cr,{className:"w-4 h-4 text-green-500"}),r.jsxs("span",{children:["Доход: $",O.stats.totalRevenue]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Vr,{className:"w-4 h-4 text-blue-500"}),r.jsxs("span",{children:["Клики: ",O.stats.totalClicks]})]}),r.jsxs("div",{className:"text-xs text-gray-500",children:["CR: ",O.stats.conversionRate,"% | EPC: $",O.stats.epc]})]})}),r.jsx(H,{children:jS(O.stats.riskLevel)}),r.jsx(H,{children:r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Xn,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:new Date(O.registeredAt).toLocaleDateString("ru-RU")})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ff,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:O.country})]}),O.lastActiveAt&&r.jsxs("p",{className:"text-xs text-gray-500",children:["Активность: ",new Date(O.lastActiveAt).toLocaleDateString("ru-RU")]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[O.approvalStatus==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>b(O.id),disabled:w.isPending,className:"text-green-600 border-green-200 hover:bg-green-50 text-xs px-2 py-1","data-testid":`button-approve-${O.id}`,children:[r.jsx(Bs,{className:"w-3 h-3 mr-1"}),"Одобрить"]}),r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>p(O.id),disabled:j.isPending,className:"text-red-600 border-red-200 hover:bg-red-50 text-xs px-2 py-1","data-testid":`button-reject-${O.id}`,children:[r.jsx(pu,{className:"w-3 h-3 mr-1"}),"Отклонить"]})]}),O.approvalStatus==="approved"&&r.jsx(D,{variant:"outline",size:"sm",onClick:()=>N(O.id),disabled:y.isPending,className:O.isActive?"text-orange-600 border-orange-200 hover:bg-orange-50 text-xs px-2 py-1":"text-green-600 border-green-200 hover:bg-green-50 text-xs px-2 py-1","data-testid":`button-toggle-block-${O.id}`,children:O.isActive?r.jsxs(r.Fragment,{children:[r.jsx(Dt,{className:"w-3 h-3 mr-1"}),"Заблокировать"]}):r.jsxs(r.Fragment,{children:[r.jsx(Bs,{className:"w-3 h-3 mr-1"}),"Разблокировать"]})}),O.approvalStatus==="rejected"&&r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>b(O.id),disabled:w.isPending,className:"text-green-600 border-green-200 hover:bg-green-50 text-xs px-2 py-1","data-testid":`button-reapprove-${O.id}`,children:[r.jsx(Bs,{className:"w-3 h-3 mr-1"}),"Одобрить"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>d(O),className:"text-blue-600 hover:bg-blue-50 text-xs px-2 py-1","data-testid":`button-stats-${O.id}`,children:[r.jsx(cr,{className:"w-3 h-3 mr-1"}),"Статистика"]}),r.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>window.open(`mailto:${O.email}`,"_blank"),className:"text-gray-600 hover:bg-gray-50 text-xs px-2 py-1","data-testid":`button-email-${O.id}`,children:[r.jsx(Mh,{className:"w-3 h-3 mr-1"}),"Email"]}),r.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>h(O),className:"text-gray-600 hover:bg-gray-50 text-xs px-2 py-1","data-testid":`button-view-${O.id}`,children:[r.jsx(ir,{className:"w-3 h-3 mr-1"}),"Детали"]})]})]})})]},O.id)})})]}),P.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(or,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Нет партнеров"}),r.jsx("p",{className:"text-gray-500",children:n||a!=="all"||l!=="all"?"По вашему запросу ничего не найдено":"Пока нет зарегистрированных партнеров"})]})]})}),c&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Статистика партнёра"}),r.jsxs("p",{className:"text-gray-600 mt-1",children:[c.displayName," • #",c.partnerNumber]})]}),r.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>d(null),className:"text-gray-500 hover:text-gray-700",children:[r.jsx("span",{className:"sr-only",children:"Закрыть"}),r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(q,{className:"border-l-4 border-l-green-500",children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Общий доход"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",c.stats.totalRevenue]})]}),r.jsx(Rt,{className:"w-8 h-8 text-green-500"})]})})}),r.jsx(q,{className:"border-l-4 border-l-blue-500",children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Всего кликов"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.stats.totalClicks.toLocaleString()})]}),r.jsx(Vr,{className:"w-8 h-8 text-blue-500"})]})})}),r.jsx(q,{className:"border-l-4 border-l-purple-500",children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Конверсий"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:c.stats.totalLeads})]}),r.jsx(cr,{className:"w-8 h-8 text-purple-500"})]})})}),r.jsx(q,{className:"border-l-4 border-l-orange-500",children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"CR"}),r.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[c.stats.conversionRate,"%"]})]}),r.jsx(ir,{className:"w-8 h-8 text-orange-500"})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(q,{children:r.jsxs(W,{className:"p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[r.jsx(cr,{className:"w-5 h-5 text-blue-500"}),"Показатели эффективности"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Уникальные клики:"}),r.jsx("span",{className:"font-medium",children:c.stats.uniqueClicks.toLocaleString()})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"EPC:"}),r.jsxs("span",{className:"font-medium",children:["$",c.stats.epc]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"ROI:"}),r.jsxs("span",{className:"font-medium",children:[c.stats.roi,"%"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Средний дневной доход:"}),r.jsxs("span",{className:"font-medium",children:["$",c.stats.avgDailyRevenue]})]})]})]})}),r.jsx(q,{children:r.jsxs(W,{className:"p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[r.jsx(Dt,{className:"w-5 h-5 text-red-500"}),"Информация о риске"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Уровень риска:"}),jS(c.stats.riskLevel)]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Последняя активность:"}),r.jsxs("span",{className:"font-medium",children:[c.stats.lastActivityDays," дн. назад"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Активных офферов:"}),r.jsxs("span",{className:"font-medium",children:[c.stats.activeOffersCount," из ",c.stats.offersCount]})]})]})]})})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t",children:[r.jsxs(D,{variant:"outline",onClick:()=>window.open(`mailto:${c.email}`,"_blank"),children:[r.jsx(Mh,{className:"w-4 h-4 mr-2"}),"Написать письмо"]}),r.jsx(D,{variant:"outline",onClick:()=>d(null),children:"Закрыть"})]})]})}),u&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Детали партнёра"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Подробная информация об аккаунте и активности"})]}),r.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>h(null),className:"text-gray-500 hover:text-gray-700",children:[r.jsx("span",{className:"sr-only",children:"Закрыть"}),r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsx(q,{children:r.jsxs(W,{className:"p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[r.jsx(or,{className:"w-5 h-5 text-blue-500"}),"Личная информация"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-xl",children:[((_=u.firstName)==null?void 0:_.charAt(0))||"",((R=u.lastName)==null?void 0:R.charAt(0))||""]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-lg",children:u.displayName}),r.jsxs("p",{className:"text-gray-600",children:["#",u.partnerNumber]}),TF(u.registeredAt)&&r.jsx(EF,{})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Email:"}),r.jsx("span",{className:"font-medium",children:u.email})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Телефон:"}),r.jsx("span",{className:"font-medium",children:u.phone||"Не указан"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Компания:"}),r.jsx("span",{className:"font-medium",children:u.company})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Страна:"}),r.jsxs("span",{className:"font-medium flex items-center gap-1",children:[r.jsx(Ff,{className:"w-4 h-4 text-gray-400"}),u.country]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Баланс:"}),r.jsxs("span",{className:"font-medium text-green-600",children:["$",u.balance]})]})]})]})]})}),r.jsx(q,{children:r.jsxs(W,{className:"p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[r.jsx(Vr,{className:"w-5 h-5 text-green-500"}),"Статус и активность"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Статус одобрения:"}),AF(u.approvalStatus,u.isActive)]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Уровень риска:"}),jS(u.stats.riskLevel)]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Дата регистрации:"}),r.jsxs("span",{className:"font-medium flex items-center gap-1",children:[r.jsx(Xn,{className:"w-4 h-4 text-gray-400"}),new Date(u.registeredAt).toLocaleDateString("ru-RU")]})]}),u.approvedAt&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Дата одобрения:"}),r.jsx("span",{className:"font-medium",children:new Date(u.approvedAt).toLocaleDateString("ru-RU")})]}),u.lastActiveAt&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Последняя активность:"}),r.jsx("span",{className:"font-medium",children:new Date(u.lastActiveAt).toLocaleDateString("ru-RU")})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Дней с последней активности:"}),r.jsx("span",{className:"font-medium",children:u.stats.lastActivityDays})]})]})]})})]}),r.jsx(q,{className:"mb-6",children:r.jsxs(W,{className:"p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[r.jsx(cr,{className:"w-5 h-5 text-purple-500"}),"Краткая статистика"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.stats.totalClicks.toLocaleString()}),r.jsx("p",{className:"text-sm text-gray-600",children:"Всего кликов"})]}),r.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.stats.totalLeads}),r.jsx("p",{className:"text-sm text-gray-600",children:"Конверсий"})]}),r.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[r.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[u.stats.conversionRate,"%"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"CR"})]}),r.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[r.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["$",u.stats.epc]}),r.jsx("p",{className:"text-sm text-gray-600",children:"EPC"})]})]})]})}),r.jsx(q,{className:"mb-6",children:r.jsxs(W,{className:"p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[r.jsx(Dt,{className:"w-5 h-5 text-gray-500"}),"Настройки и дополнительно"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-3",children:"Настройки выплат"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Кастомные выплаты:"}),r.jsx("span",{className:"font-medium",children:u.payoutSettings.hasCustomPayouts?"Да":"Нет"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Кастомных офферов:"}),r.jsx("span",{className:"font-medium",children:u.payoutSettings.customOffers})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-3",children:"Активность"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Всего офферов:"}),r.jsx("span",{className:"font-medium",children:u.stats.offersCount})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Активных офферов:"}),r.jsx("span",{className:"font-medium",children:u.stats.activeOffersCount})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Средне кликов в день:"}),r.jsx("span",{className:"font-medium",children:u.stats.avgDailyClicks})]})]})]})]})]})}),r.jsxs("div",{className:"flex justify-between gap-3 pt-6 border-t",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(D,{variant:"outline",onClick:()=>window.open(`mailto:${u.email}`,"_blank"),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[r.jsx(Mh,{className:"w-4 h-4 mr-2"}),"Написать письмо"]}),r.jsxs(D,{variant:"outline",onClick:()=>{h(null),d(u)},className:"text-purple-600 border-purple-200 hover:bg-purple-50",children:[r.jsx(cr,{className:"w-4 h-4 mr-2"}),"Полная статистика"]})]}),r.jsx(D,{variant:"outline",onClick:()=>h(null),children:"Закрыть"})]})]})}),r.jsx(Qze,{isOpen:f,onClose:()=>m(!1)})]})}const hd={buyer:{name:"Байер",color:"bg-blue-100 text-blue-800",icon:r.jsx(Qc,{className:"h-4 w-4"}),permissions:["view_offers","generate_links","view_statistics"],defaultPermissions:["view_offers","generate_links","view_statistics"]},analyst:{name:"Аналитик",color:"bg-green-100 text-green-800",icon:r.jsx(yr,{className:"h-4 w-4"}),permissions:["view_offers","view_statistics","view_creatives"],defaultPermissions:["view_offers","view_statistics","view_creatives"]},manager:{name:"Менеджер",color:"bg-purple-100 text-purple-800",icon:r.jsx(Dt,{className:"h-4 w-4"}),permissions:["view_offers","generate_links","view_statistics","view_creatives","manage_team"],defaultPermissions:["view_offers","generate_links","view_statistics","view_creatives","manage_team"]}},wS=[{id:"view_offers",name:"Просмотр офферов",description:"Доступ к списку офферов"},{id:"generate_links",name:"Генерация ссылок",description:"Создание трекинговых ссылок"},{id:"view_statistics",name:"Статистика",description:"Просмотр статистики и отчётов"},{id:"view_creatives",name:"Креативы",description:"Доступ к креативам и материалам"},{id:"view_payouts",name:"Выплаты",description:"Просмотр информации о выплатах"},{id:"manage_team",name:"Управление командой",description:"Добавление и управление участниками"}];function eVe(){const[e,t]=v.useState(!1),[n,s]=v.useState(null),[a,i]=v.useState({email:"",username:"",password:"",role:"buyer",permissions:[],subIdPrefix:""}),{toast:l}=at(),{t:o}=Wt(),c=Et(),{data:d=[],isLoading:u}=Fe({queryKey:["/api/affiliate/team"]}),h=Oe({mutationFn:j=>Re("/api/affiliate/team","POST",j),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/affiliate/team"]}),t(!1),i({email:"",username:"",password:"",role:"buyer",permissions:[],subIdPrefix:""}),l({title:"Участник добавлен",description:"Новый участник команды успешно добавлен"})},onError:j=>{const y=(j==null?void 0:j.message)||(j==null?void 0:j.error)||"Не удалось добавить участника команды";l({title:"Ошибка",description:y,variant:"destructive"})}}),f=Oe({mutationFn:({id:j,...y})=>Re(`/api/affiliate/team/${j}`,"PATCH",y),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/affiliate/team"]}),s(null),l({title:"Участник обновлён",description:"Информация об участнике команды обновлена"})},onError:j=>{l({title:"Ошибка",description:(j==null?void 0:j.message)||"Не удалось обновить участника команды",variant:"destructive"})}}),m=Oe({mutationFn:j=>Re(`/api/affiliate/team/${j}`,"DELETE"),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/affiliate/team"]}),l({title:"Участник удалён",description:"Участник команды удалён из системы"})},onError:()=>{l({title:"Ошибка",description:"Не удалось удалить участника команды",variant:"destructive"})}}),g=j=>{const y=hd[j].defaultPermissions;i(b=>({...b,role:j,permissions:y}))},x=(j,y)=>{i(b=>({...b,permissions:y?[...b.permissions,j]:b.permissions.filter(p=>p!==j)}))},w=j=>{confirm(`Вы уверены, что хотите удалить участника ${j.username}?`)&&m.mutate(j.id)};return u?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-32 bg-gray-200 rounded"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:o("team.title")}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Добавляйте байеров, аналитиков и менеджеров для работы с офферами"})]}),r.jsxs(_t,{open:e,onOpenChange:t,children:[r.jsx(Ja,{asChild:!0,children:r.jsxs(D,{"data-testid":"button-add-team-member",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить участника"]})}),r.jsxs(kt,{className:"max-w-md",children:[r.jsx(St,{children:r.jsx(Ct,{children:"Добавить участника команды"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"email",children:"Email"}),r.jsx(ne,{id:"email",type:"email",value:a.email,onChange:j=>i(y=>({...y,email:j.target.value})),placeholder:"user@example.com","data-testid":"input-team-member-email"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"username",children:"Имя пользователя"}),r.jsx(ne,{id:"username",value:a.username,onChange:j=>i(y=>({...y,username:j.target.value})),placeholder:"username","data-testid":"input-team-member-username"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"password",children:"Пароль"}),r.jsx(ne,{id:"password",type:"password",value:a.password,onChange:j=>i(y=>({...y,password:j.target.value})),placeholder:"••••••••","data-testid":"input-team-member-password"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"role",children:"Роль"}),r.jsxs(fe,{value:a.role,onValueChange:g,children:[r.jsx(ue,{"data-testid":"select-team-member-role",children:r.jsx(me,{})}),r.jsx(he,{children:Object.entries(hd).map(([j,y])=>r.jsx(C,{value:j,children:r.jsxs("div",{className:"flex items-center gap-2",children:[y.icon,y.name]})},j))})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"subIdPrefix",children:"Префикс SubID"}),r.jsx(ne,{id:"subIdPrefix",value:a.subIdPrefix,onChange:j=>i(y=>({...y,subIdPrefix:j.target.value})),placeholder:"buyer1","data-testid":"input-team-member-subid"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Уникальный префикс для идентификации трафика этого участника"})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Разрешения"}),r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:wS.map(j=>r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(dn,{id:j.id,checked:a.permissions.includes(j.id),onCheckedChange:y=>x(j.id,y),"data-testid":`checkbox-permission-${j.id}`}),r.jsxs("div",{className:"grid gap-1.5 leading-none",children:[r.jsx("label",{htmlFor:j.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:j.name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:j.description})]})]},j.id))})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(D,{variant:"outline",onClick:()=>t(!1),"data-testid":"button-cancel-team-member",children:"Отмена"}),r.jsx(D,{onClick:()=>h.mutate(a),disabled:h.isPending,"data-testid":"button-save-team-member",children:h.isPending?"Добавление...":"Добавить"})]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(q,{children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(or,{className:"h-5 w-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Всего участников"}),r.jsx("p",{className:"text-2xl font-bold",children:d.length})]})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qc,{className:"h-5 w-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Байеров"}),r.jsx("p",{className:"text-2xl font-bold",children:d.filter(j=>j.role==="buyer").length})]})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yr,{className:"h-5 w-5 text-purple-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Аналитиков"}),r.jsx("p",{className:"text-2xl font-bold",children:d.filter(j=>j.role==="analyst").length})]})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bs,{className:"h-5 w-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Активных"}),r.jsx("p",{className:"text-2xl font-bold",children:d.filter(j=>j.isActive).length})]})]})})})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{children:["Участники команды (",d.length,")"]}),r.jsx(Ze,{children:"Управление байерами, аналитиками и менеджерами"})]}),r.jsx(W,{children:d.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(or,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),r.jsx("p",{children:"У вас пока нет участников команды"}),r.jsx("p",{className:"text-sm",children:"Добавьте байеров и аналитиков для эффективной работы"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Участник"}),r.jsx(Z,{children:"Роль"}),r.jsx(Z,{children:"SubID Prefix"}),r.jsx(Z,{children:"Разрешения"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Добавлен"}),r.jsx(Z,{children:"Действия"})]})}),r.jsx(It,{children:d.map(j=>r.jsxs(De,{children:[r.jsx(H,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:j.username}),r.jsx("p",{className:"text-sm text-muted-foreground",children:j.email})]})}),r.jsx(H,{children:r.jsx(ie,{className:hd[j.role].color,children:r.jsxs("div",{className:"flex items-center gap-1",children:[hd[j.role].icon,hd[j.role].name]})})}),r.jsx(H,{children:r.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:j.subIdPrefix||"N/A"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[j.permissions.slice(0,2).map(y=>{const b=wS.find(p=>p.id===y);return r.jsx(ie,{variant:"outline",className:"text-xs",children:b==null?void 0:b.name.split(" ")[0]},y)}),j.permissions.length>2&&r.jsxs(ie,{variant:"outline",className:"text-xs",children:["+",j.permissions.length-2]})]})}),r.jsx(H,{children:r.jsx(ie,{variant:j.isActive?"default":"secondary",children:j.isActive?"Активен":"Неактивен"})}),r.jsx(H,{children:new Date(j.createdAt).toLocaleDateString("ru-RU")}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(D,{variant:"outline",size:"sm",onClick:()=>s(j),title:"Редактировать","data-testid":`button-edit-${j.id}`,children:r.jsx(Ts,{className:"h-4 w-4"})}),r.jsx(D,{variant:"outline",size:"sm",onClick:()=>w(j),title:"Удалить",className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${j.id}`,children:r.jsx(wr,{className:"h-4 w-4"})})]})})]},j.id))})]})})})]}),n&&r.jsx(_t,{open:!!n,onOpenChange:()=>s(null),children:r.jsxs(kt,{className:"max-w-md",children:[r.jsx(St,{children:r.jsx(Ct,{children:"Редактировать участника команды"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Email"}),r.jsx(ne,{value:n.email,disabled:!0,className:"bg-gray-50"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email нельзя изменить"})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Имя пользователя"}),r.jsx(ne,{value:n.username,disabled:!0,className:"bg-gray-50"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Имя пользователя нельзя изменить"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"editRole",children:"Роль"}),r.jsxs(fe,{value:n.role,onValueChange:j=>{const y=hd[j].defaultPermissions;s(b=>b?{...b,role:j,permissions:y}:null)},children:[r.jsx(ue,{"data-testid":"select-edit-role",children:r.jsx(me,{})}),r.jsx(he,{children:Object.entries(hd).map(([j,y])=>r.jsx(C,{value:j,children:r.jsxs("div",{className:"flex items-center gap-2",children:[y.icon,y.name]})},j))})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"editSubIdPrefix",children:"Префикс SubID"}),r.jsx(ne,{id:"editSubIdPrefix",value:n.subIdPrefix,onChange:j=>s(y=>y?{...y,subIdPrefix:j.target.value}:null),placeholder:"buyer1","data-testid":"input-edit-subid"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"editIsActive",children:"Статус"}),r.jsxs(fe,{value:n.isActive?"active":"inactive",onValueChange:j=>{s(y=>y?{...y,isActive:j==="active"}:null)},children:[r.jsx(ue,{"data-testid":"select-edit-status",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"active",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bs,{className:"h-4 w-4 text-green-600"}),"Активен"]})}),r.jsx(C,{value:"inactive",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pu,{className:"h-4 w-4 text-gray-600"}),"Неактивен"]})})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Разрешения"}),r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:wS.map(j=>r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(dn,{id:`edit-${j.id}`,checked:n.permissions.includes(j.id),onCheckedChange:y=>{s(b=>b?{...b,permissions:y?[...b.permissions,j.id]:b.permissions.filter(p=>p!==j.id)}:null)},"data-testid":`checkbox-edit-permission-${j.id}`}),r.jsxs("div",{className:"grid gap-1.5 leading-none",children:[r.jsx("label",{htmlFor:`edit-${j.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:j.name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:j.description})]})]},j.id))})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(D,{variant:"outline",onClick:()=>s(null),"data-testid":"button-cancel-edit",children:"Отмена"}),r.jsx(D,{onClick:()=>{n&&f.mutate({id:n.id,role:n.role,permissions:n.permissions,subIdPrefix:n.subIdPrefix,isActive:n.isActive})},disabled:f.isPending,"data-testid":"button-save-edit",children:f.isPending?"Сохранение...":"Сохранить"})]})]})]})})]})}const tVe=e=>{try{if(!e||e==="null"||e==="undefined")return"только что";const t=new Date(e);return isNaN(t.getTime())?(console.warn("Invalid date for formatting:",e),"только что"):n1(t,{addSuffix:!0,locale:lo})}catch(t){return console.error("Error formatting date distance:",t,e),"только что"}};function rVe(){const{user:e}=tr(),{toast:t}=at(),{t:n}=Wt(),s=Et();v.useEffect(()=>{const w=localStorage.getItem("auth_token");console.log("🔍 PartnerNotifications component - token check:",{token:w?w.substring(0,20)+"...":"NO_TOKEN",user:e==null?void 0:e.username})},[e]);const{data:a=[],isLoading:i}=Fe({queryKey:["/api/notifications"],enabled:!!(e!=null&&e.id)}),l=()=>{const w=localStorage.getItem("auth_token");return console.log("🔍 Getting auth token:",{hasToken:!!w,isNull:w==="null",isEmpty:w==="",tokenStart:w?w.substring(0,20):"NO_TOKEN"}),w&&w!=="null"&&w!=="undefined"&&w.trim()!==""?w:null},o=Oe({mutationKey:["markAsRead"],mutationFn:async w=>{console.log("🚀 Starting markAsRead mutation for:",w);const j=l();if(!j)throw new Error("Authentication required - please re-login");console.log("✅ Valid token found, making request...");try{const y=await fetch(`/api/notifications/${w}/read`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`}});if(console.log("📡 Response received:",{status:y.status,statusText:y.statusText,ok:y.ok}),!y.ok){const p=await y.text();throw new Error(`Failed to mark as read: ${y.status} ${y.statusText}`)}const b=await y.json();return console.log("✅ Mark as read successful:",b),b}catch(y){throw y}},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/notifications"]}),s.invalidateQueries({queryKey:["/api/partner/dashboard"]})},onError:w=>{t({title:"Ошибка",description:"Не удалось отметить уведомление как прочитанное",variant:"destructive"})}}),c=Oe({mutationFn:async w=>{const j=localStorage.getItem("auth_token");if(!j||j==="null"||j==="undefined")throw new Error("No valid token found");const y=await fetch(`/api/notifications/${w}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`}});if(!y.ok)throw new Error(`HTTP ${y.status}: ${y.statusText}`);return y.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/notifications"]}),s.invalidateQueries({queryKey:["/api/partner/dashboard"]}),t({title:"Успех",description:"Уведомление удалено"})},onError:w=>{t({title:"Ошибка",description:"Не удалось удалить уведомление",variant:"destructive"})}}),d=Oe({mutationFn:async()=>{await Re("/api/notifications/mark-all-read","PUT")},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/notifications"]}),t({title:"Успех",description:"Все уведомления отмечены как прочитанные"})},onError:w=>{t({title:"Ошибка",description:"Не удалось отметить уведомления как прочитанные",variant:"destructive"})}}),u=w=>{o.mutate(w)},h=w=>{c.mutate(w)},f=()=>{d.mutate()},m=w=>{switch(w){case"offer_request_approved":return r.jsx(ao,{className:"w-5 h-5 text-green-600"});case"offer_request_rejected":return r.jsx(Kt,{className:"w-5 h-5 text-red-600"});case"offer_request_created":return r.jsx(lr,{className:"w-5 h-5 text-blue-600"});case"payment":return r.jsx(ao,{className:"w-5 h-5 text-green-600"});default:return r.jsx($n,{className:"w-5 h-5 text-gray-600"})}},g=w=>{switch(w){case"offer_request_approved":return r.jsx(ie,{className:"bg-green-100 text-green-800",children:"Одобрено"});case"offer_request_rejected":return r.jsx(ie,{className:"bg-red-100 text-red-800",children:"Отклонено"});case"offer_request_created":return r.jsx(ie,{className:"bg-blue-100 text-blue-800",children:"Новый запрос"});case"payment":return r.jsx(ie,{className:"bg-green-100 text-green-800",children:"Выплата"});default:return r.jsx(ie,{className:"bg-gray-100 text-gray-800",children:"Общее"})}},x=a.filter(w=>!w.is_read).length;return i?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Загрузка уведомлений..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx($n,{className:"w-6 h-6 text-blue-600"}),r.jsx("h1",{className:"text-2xl font-bold",children:n("notifications.title")}),x>0&&r.jsxs(ie,{className:"bg-red-100 text-red-800",children:[x," непрочитанных"]})]}),x>0&&r.jsxs(D,{onClick:f,disabled:d.isPending,variant:"outline",size:"sm",children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Отметить все как прочитанные"]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Все уведомления"})}),r.jsx(W,{children:a.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx($n,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Уведомлений нет"}),r.jsx("p",{className:"text-gray-600",children:"Здесь будут отображаться уведомления о статусе ваших запросов на офферы"})]}):r.jsx("div",{className:"space-y-4",children:a.map(w=>{var j,y;return r.jsx("div",{className:`p-4 rounded-lg border transition-colors ${w.is_read?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[m(w.type),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:`font-medium ${w.is_read?"text-gray-900":"text-blue-900"}`,children:w.title}),g(w.type)]}),r.jsx("p",{className:`text-sm ${w.is_read?"text-gray-600":"text-blue-700"}`,children:w.message}),((j=w.metadata)==null?void 0:j.rejectReason)&&r.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm",children:[r.jsx("strong",{children:"Причина отклонения:"})," ",w.metadata.rejectReason]}),((y=w.metadata)==null?void 0:y.amount)&&r.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded text-sm",children:[r.jsx("strong",{children:"Сумма:"})," ",w.metadata.amount," ",w.metadata.currency||"USD"]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:tVe(w.created_at)})]})]}),r.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[!w.is_read&&r.jsx(D,{onClick:()=>u(w.id),disabled:o.isPending,variant:"outline",size:"sm",children:r.jsx(on,{className:"w-4 h-4"})}),r.jsx(D,{onClick:()=>h(w.id),disabled:c.isPending,variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:r.jsx(Fn,{className:"w-4 h-4"})})]})]})},w.id)})})})]})]})}function OF(){var w,j;const{toast:e}=at(),[t,n]=v.useState({from:new Date(Date.now()-30*24*60*60*1e3),to:new Date}),[s,a]=v.useState({country:"all",device:"all",offerId:"all"}),{data:i,isLoading:l}=Fe({queryKey:["/api/advertiser/dashboard-metrics"]}),{data:o,isLoading:c}=Fe({queryKey:["/api/advertiser/live-statistics",t,s],queryFn:async()=>{const y=new URLSearchParams;t.from&&y.append("dateFrom",t.from.toISOString()),t.to&&y.append("dateTo",t.to.toISOString()),s.country!=="all"&&y.append("country",s.country),s.device!=="all"&&y.append("device",s.device),s.offerId!=="all"&&y.append("offerId",s.offerId);const b=localStorage.getItem("auth_token"),p=await fetch(`/api/advertiser/live-statistics?${y}`,{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to load statistics:",p.status),[];const N=await p.json();return Array.isArray(N)?N:[]}}),d=()=>{e({title:"Фильтры",description:"Фильтры уже доступны в боковой панели"})},u=()=>{e({title:"Календарь",description:"Используйте кнопки 7д/30д ниже для быстрого выбора периода"})},h=()=>{if(!o||!Array.isArray(o)||o.length===0){e({title:"Нет данных",description:"Нет данных для экспорта",variant:"destructive"});return}const y=[["Дата","Клики","Уники","Конверсии","Доход","CR%","EPC"],...o.map(N=>[(N==null?void 0:N.date)||"N/A",(N==null?void 0:N.clicks)||0,(N==null?void 0:N.uniqueClicks)||(N==null?void 0:N.clicks)||0,(N==null?void 0:N.conversions)||0,((N==null?void 0:N.revenue)||0).toFixed(2),((N==null?void 0:N.clicks)||0)>0?(((N==null?void 0:N.conversions)||0)/N.clicks*100).toFixed(2):"0",((N==null?void 0:N.clicks)||0)>0?(((N==null?void 0:N.revenue)||0)/N.clicks).toFixed(2):"0"])].map(N=>N.join(",")).join(`
`),b=new Blob([y],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a");p.href=URL.createObjectURL(b),p.download=`dashboard-data-${new Date().toISOString().split("T")[0]}.csv`,p.click(),e({title:"Экспорт завершен",description:"Данные успешно экспортированы в CSV файл"})},f=X.useMemo(()=>{if(!o||!Array.isArray(o)||o.length===0)return{totalClicks:0,totalConversions:0,totalRevenue:0,avgCR:0,epc:0,activeOffers:0,partnersCount:0};const y=o.reduce((S,P)=>S+((P==null?void 0:P.clicks)||0),0),b=o.reduce((S,P)=>S+((P==null?void 0:P.conversions)||0),0),p=o.reduce((S,P)=>S+((P==null?void 0:P.revenue)||0),0),N=y>0?b/y*100:0,k=y>0?p/y:0;return{totalClicks:y,totalConversions:b,totalRevenue:p,avgCR:N,epc:k,activeOffers:5,partnersCount:12}},[o]),m=[{id:1,name:"Casino Royal",cr:15.2,status:"active",revenue:12500},{id:2,name:"Betting Pro",cr:12.8,status:"active",revenue:9800},{id:3,name:"Sports King",cr:11.5,status:"paused",revenue:7600}],g=[{id:1,title:"Новый партнёр",message:"Partner_123 подключился к офферу Casino Royal",time:"5 мин назад"},{id:2,title:"Подозрительная активность",message:"Обнаружен фрод в оффере Betting Pro",time:"15 мин назад"},{id:3,title:"Цель достигнута",message:"Оффер Sports King достиг 1000 конверсий",time:"1 час назад"}];if(l)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-lg",children:"Загрузка дашборда..."})});const x=i||f;return r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Дашборд рекламодателя"}),r.jsx("p",{className:"text-muted-foreground",children:"Обзор ключевых метрик и управление кампаниями"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(D,{variant:"outline",size:"sm","data-testid":"button-filter",onClick:d,children:[r.jsx(As,{className:"h-4 w-4 mr-2"}),"Фильтры"]}),r.jsxs(D,{variant:"outline",size:"sm","data-testid":"button-calendar",onClick:u,children:[r.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Период"]}),r.jsxs(D,{variant:"outline",size:"sm","data-testid":"button-export",onClick:h,children:[r.jsx(br,{className:"h-4 w-4 mr-2"}),"Экспорт"]})]})]}),r.jsxs(q,{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20",children:[r.jsxs(re,{children:[r.jsx(se,{className:"text-lg",children:"Фильтры и период"}),r.jsx(Ze,{children:"Настройте отображаемые данные"})]}),r.jsx(W,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Страна"}),r.jsxs(fe,{value:s.country,onValueChange:y=>a({...s,country:y}),children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите страну"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все страны"}),r.jsx(C,{value:"US",children:"США"}),r.jsx(C,{value:"CA",children:"Канада"}),r.jsx(C,{value:"GB",children:"Великобритания"}),r.jsx(C,{value:"DE",children:"Германия"}),r.jsx(C,{value:"FR",children:"Франция"}),r.jsx(C,{value:"RU",children:"Россия"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Устройство"}),r.jsxs(fe,{value:s.device,onValueChange:y=>a({...s,device:y}),children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите устройство"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все устройства"}),r.jsx(C,{value:"mobile",children:"Мобильные"}),r.jsx(C,{value:"desktop",children:"Десктоп"}),r.jsx(C,{value:"tablet",children:"Планшеты"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Оффер"}),r.jsxs(fe,{value:s.offerId,onValueChange:y=>a({...s,offerId:y}),children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите оффер"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все офферы"}),r.jsx(C,{value:"offer_1",children:"Casino Royal"}),r.jsx(C,{value:"offer_2",children:"Betting Pro"}),r.jsx(C,{value:"offer_3",children:"Sports King"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Период"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(D,{variant:"outline",size:"sm",onClick:()=>n({from:new Date(Date.now()-7*24*60*60*1e3),to:new Date}),className:t.from&&Date.now()-t.from.getTime()<=7*24*60*60*1e3?"bg-blue-100":"",children:"7д"}),r.jsx(D,{variant:"outline",size:"sm",onClick:()=>n({from:new Date(Date.now()-30*24*60*60*1e3),to:new Date}),className:t.from&&Date.now()-t.from.getTime()<=30*24*60*60*1e3&&Date.now()-t.from.getTime()>7*24*60*60*1e3?"bg-blue-100":"",children:"30д"})]})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[r.jsxs(q,{"data-testid":"card-total-clicks",className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Клики"}),r.jsx("div",{className:"p-2 bg-blue-500 rounded-lg shadow-lg",children:r.jsx(Vr,{className:"h-4 w-4 text-white"})})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:(x==null?void 0:x.totalClicks)||0}),r.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-400",children:"всего кликов"})]})]}),r.jsxs(q,{"data-testid":"card-conversions",className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-700",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Конверсии"}),r.jsx("div",{className:"p-2 bg-green-500 rounded-lg shadow-lg",children:r.jsx(Gt,{className:"h-4 w-4 text-white"})})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:(x==null?void 0:x.totalConversions)||0}),r.jsxs("p",{className:"text-xs text-green-700 dark:text-green-400",children:["CR: ",((w=x==null?void 0:x.avgCR)==null?void 0:w.toFixed(2))||0,"%"]})]})]}),r.jsxs(q,{"data-testid":"card-revenue",className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border-purple-200 dark:border-purple-700",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Доход"}),r.jsx("div",{className:"p-2 bg-purple-500 rounded-lg shadow-lg",children:r.jsx(Rt,{className:"h-4 w-4 text-white"})})]}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-xl font-bold text-purple-900 dark:text-purple-100",children:["$",(x==null?void 0:x.totalRevenue)||0]}),r.jsx("p",{className:"text-xs text-purple-700 dark:text-purple-400",children:"общий доход"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[r.jsxs(q,{"data-testid":"card-epc",className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 border-orange-200 dark:border-orange-700",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"EPC"}),r.jsx("div",{className:"p-2 bg-orange-500 rounded-lg shadow-lg",children:r.jsx(cr,{className:"h-4 w-4 text-white"})})]}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-xl font-bold text-orange-900 dark:text-orange-100",children:["$",((j=x==null?void 0:x.epc)==null?void 0:j.toFixed(2))||0]}),r.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-400",children:"за клик"})]})]}),r.jsxs(q,{"data-testid":"card-active-offers",className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 border-indigo-200 dark:border-indigo-700",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:"Офферы"}),r.jsx("div",{className:"p-2 bg-indigo-500 rounded-lg shadow-lg",children:r.jsx(yr,{className:"h-4 w-4 text-white"})})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-xl font-bold text-indigo-900 dark:text-indigo-100",children:(x==null?void 0:x.activeOffers)||0}),r.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-400",children:"активных"})]})]}),r.jsxs(q,{"data-testid":"card-partners",className:"bg-gradient-to-br from-rose-50 to-rose-100 dark:from-rose-900/20 dark:to-rose-800/20 border-rose-200 dark:border-rose-700",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-rose-700 dark:text-rose-300",children:"Партнёры"}),r.jsx("div",{className:"p-2 bg-rose-500 rounded-lg shadow-lg",children:r.jsx(or,{className:"h-4 w-4 text-white"})})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-xl font-bold text-rose-900 dark:text-rose-100",children:(x==null?void 0:x.partnersCount)||0}),r.jsx("p",{className:"text-xs text-rose-700 dark:text-rose-400",children:"подключено"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[r.jsxs(q,{"data-testid":"card-top-offers",children:[r.jsxs(re,{children:[r.jsx(se,{className:"text-lg",children:"Топ-офферы"}),r.jsx(Ze,{children:"Лучшие офферы по эффективности"})]}),r.jsx(W,{children:r.jsx("div",{className:"space-y-3",children:m.map(y=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium text-sm",children:y.name}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:["CR: ",y.cr,"% • $",y.revenue]})]}),r.jsx(ie,{variant:y.status==="active"?"default":"secondary",className:"text-xs",children:y.status==="active"?"Активен":"Пауза"})]},y.id))})})]}),r.jsxs(q,{"data-testid":"card-recent-notifications",children:[r.jsxs(re,{children:[r.jsx(se,{className:"text-lg",children:"Последние уведомления"}),r.jsx(Ze,{children:"Важные события системы"})]}),r.jsx(W,{children:r.jsx("div",{className:"space-y-3",children:g.map(y=>r.jsx("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-sm",children:y.title}),r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:y.message}),r.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:y.time})]})},y.id))})})]}),r.jsxs(q,{"data-testid":"chart-traffic",children:[r.jsxs(re,{children:[r.jsx(se,{className:"text-lg",children:"Трафик по времени"}),r.jsx(Ze,{children:"Клики и уникальные посетители"})]}),r.jsx(W,{children:r.jsx(xa,{width:"100%",height:200,children:r.jsxs(ny,{data:o||[],children:[r.jsx(Ti,{strokeDasharray:"3 3"}),r.jsx(Ps,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(us,{type:"monotone",dataKey:"clicks",stroke:"#3b82f6",name:"Клики",strokeWidth:2}),r.jsx(us,{type:"monotone",dataKey:"uniqueClicks",stroke:"#10b981",name:"Уники",strokeWidth:2})]})})})]}),r.jsxs(q,{"data-testid":"chart-conversions",children:[r.jsxs(re,{children:[r.jsx(se,{className:"text-lg",children:"Конверсии"}),r.jsx(Ze,{children:"Лиды, регистрации и депозиты"})]}),r.jsx(W,{children:r.jsx(xa,{width:"100%",height:200,children:r.jsxs(bW,{data:o||[],children:[r.jsx(Ti,{strokeDasharray:"3 3"}),r.jsx(Ps,{dataKey:"date"}),r.jsx(_s,{}),r.jsx(tn,{}),r.jsx(Ei,{type:"monotone",dataKey:"leads",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",name:"Лиды"}),r.jsx(Ei,{type:"monotone",dataKey:"registrations",stackId:"1",stroke:"#10b981",fill:"#10b981",name:"Регистрации"}),r.jsx(Ei,{type:"monotone",dataKey:"conversions",stackId:"1",stroke:"#f59e0b",fill:"#f59e0b",name:"Конверсии"})]})})})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Быстрые действия"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4",children:[r.jsx(Ls,{to:"/advertiser/offers/create",children:r.jsxs(D,{variant:"outline",className:"w-full h-20 flex flex-col gap-2 bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 border-blue-200 text-blue-700 shadow-sm","data-testid":"button-create-offer",children:[r.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:r.jsx(Gt,{className:"h-5 w-5 text-white"})}),r.jsx("span",{className:"text-sm font-medium",children:"Создать оффер"})]})}),r.jsx(Ls,{to:"/advertiser/analytics",children:r.jsxs(D,{variant:"outline",className:"w-full h-20 flex flex-col gap-2 bg-gradient-to-br from-green-50 to-green-100 hover:from-green-100 hover:to-green-200 border-green-200 text-green-700 shadow-sm","data-testid":"button-view-analytics",children:[r.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:r.jsx(yr,{className:"h-5 w-5 text-white"})}),r.jsx("span",{className:"text-sm font-medium",children:"Аналитика"})]})}),r.jsx(Ls,{to:"/advertiser/partners",children:r.jsxs(D,{variant:"outline",className:"w-full h-20 flex flex-col gap-2 bg-gradient-to-br from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 border-purple-200 text-purple-700 shadow-sm","data-testid":"button-manage-partners",children:[r.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:r.jsx(or,{className:"h-5 w-5 text-white"})}),r.jsx("span",{className:"text-sm font-medium",children:"Партнёры"})]})}),r.jsx(Ls,{to:"/advertiser/finances",children:r.jsxs(D,{variant:"outline",className:"w-full h-20 flex flex-col gap-2 bg-gradient-to-br from-orange-50 to-orange-100 hover:from-orange-100 hover:to-orange-200 border-orange-200 text-orange-700 shadow-sm","data-testid":"button-finances",children:[r.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:r.jsx(Rt,{className:"h-5 w-5 text-white"})}),r.jsx("span",{className:"text-sm font-medium",children:"Финансы"})]})}),r.jsx(Ls,{to:"/advertiser/profile",children:r.jsxs(D,{variant:"outline",className:"w-full h-20 flex flex-col gap-2 bg-gradient-to-br from-rose-50 to-rose-100 hover:from-rose-100 hover:to-rose-200 border-rose-200 text-rose-700 shadow-sm","data-testid":"button-settings",children:[r.jsx("div",{className:"p-2 bg-rose-500 rounded-lg",children:r.jsx(fr,{className:"h-5 w-5 text-white"})}),r.jsx("span",{className:"text-sm font-medium",children:"Настройки"})]})})]})]})]})}const nVe=({offer:e,onSuccess:t,onCancel:n})=>{var d,u,h;const{toast:s}=at(),a=Et(),[i,l]=v.useState({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",url:(e==null?void 0:e.url)||"",previewUrl:(e==null?void 0:e.previewUrl)||"",category:(e==null?void 0:e.category)||"",vertical:(e==null?void 0:e.vertical)||"",payoutType:(e==null?void 0:e.payoutType)||"cpa",payoutAmount:(e==null?void 0:e.payoutAmount)||0,currency:(e==null?void 0:e.currency)||"USD",countries:(e==null?void 0:e.countries)||[],restrictions:(e==null?void 0:e.restrictions)||"",caps:(e==null?void 0:e.caps)||{},schedule:(e==null?void 0:e.schedule)||{enabled:!1,timezone:"UTC"},tracking:(e==null?void 0:e.tracking)||{clickUrl:"",conversionUrl:"",postbackUrl:""},requirements:(e==null?void 0:e.requirements)||{traffic:[],quality:80,approval:"manual"},antifraud:(e==null?void 0:e.antifraud)||{enabled:!0,methods:[],strictness:"medium"},isPrivate:(e==null?void 0:e.isPrivate)||!1,priority:(e==null?void 0:e.priority)||1,tags:(e==null?void 0:e.tags)||[]}),o=Oe({mutationFn:f=>{const m=e?`/api/advertiser/offers/${e.id}`:"/api/advertiser/offers";return Re(m,{method:e?"PUT":"POST",body:f})},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/advertiser/offers"]}),s({title:e?"Оффер обновлен":"Оффер создан",description:e?"Изменения успешно сохранены":"Новый оффер добавлен в систему"}),t()},onError:f=>{s({title:"Ошибка",description:f.message||"Не удалось сохранить оффер",variant:"destructive"})}}),c=f=>{f.preventDefault(),o.mutate(i)};return r.jsx("div",{className:"space-y-6",children:r.jsxs("form",{onSubmit:c,className:"space-y-6",children:[r.jsxs(rn,{defaultValue:"basic",className:"w-full",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-5",children:[r.jsx(We,{value:"basic",children:"Основное"}),r.jsx(We,{value:"payout",children:"Выплаты"}),r.jsx(We,{value:"targeting",children:"Таргетинг"}),r.jsx(We,{value:"tracking",children:"Трекинг"}),r.jsx(We,{value:"settings",children:"Настройки"})]}),r.jsx(He,{value:"basic",className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"name",children:"Название оффера *"}),r.jsx(ne,{id:"name",value:i.name,onChange:f=>l({...i,name:f.target.value}),placeholder:"Введите название оффера",required:!0,"data-testid":"input-offer-name"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"description",children:"Описание"}),r.jsx(gt,{id:"description",value:i.description,onChange:f=>l({...i,description:f.target.value}),placeholder:"Подробное описание оффера",rows:3,"data-testid":"textarea-offer-description"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"category",children:"Категория *"}),r.jsxs(fe,{value:i.category,onValueChange:f=>l({...i,category:f}),children:[r.jsx(ue,{"data-testid":"select-offer-category",children:r.jsx(me,{placeholder:"Выберите категорию"})}),r.jsxs(he,{children:[r.jsx(C,{value:"gambling",children:"Гемблинг"}),r.jsx(C,{value:"dating",children:"Знакомства"}),r.jsx(C,{value:"finance",children:"Финансы"}),r.jsx(C,{value:"crypto",children:"Криптовалюты"}),r.jsx(C,{value:"ecommerce",children:"E-commerce"}),r.jsx(C,{value:"mobile",children:"Мобильные приложения"}),r.jsx(C,{value:"games",children:"Игры"}),r.jsx(C,{value:"health",children:"Здоровье"}),r.jsx(C,{value:"education",children:"Образование"}),r.jsx(C,{value:"other",children:"Другое"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"vertical",children:"Вертикаль"}),r.jsx(ne,{id:"vertical",value:i.vertical,onChange:f=>l({...i,vertical:f.target.value}),placeholder:"Например: Casino, Forex","data-testid":"input-offer-vertical"})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"url",children:"URL лендинга *"}),r.jsx(ne,{id:"url",type:"url",value:i.url,onChange:f=>l({...i,url:f.target.value}),placeholder:"https://example.com/landing",required:!0,"data-testid":"input-offer-url"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"previewUrl",children:"URL превью"}),r.jsx(ne,{id:"previewUrl",type:"url",value:i.previewUrl,onChange:f=>l({...i,previewUrl:f.target.value}),placeholder:"https://example.com/preview","data-testid":"input-offer-preview-url"})]})]})}),r.jsx(He,{value:"payout",className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"payoutType",children:"Тип выплаты *"}),r.jsxs(fe,{value:i.payoutType,onValueChange:f=>l({...i,payoutType:f}),children:[r.jsx(ue,{"data-testid":"select-payout-type",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"cpa",children:"CPA (за действие)"}),r.jsx(C,{value:"cpl",children:"CPL (за лид)"}),r.jsx(C,{value:"cpc",children:"CPC (за клик)"}),r.jsx(C,{value:"cpm",children:"CPM (за 1000 показов)"}),r.jsx(C,{value:"revshare",children:"RevShare (%)"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"payoutAmount",children:"Размер выплаты *"}),r.jsx(ne,{id:"payoutAmount",type:"number",min:"0",step:"0.01",value:i.payoutAmount,onChange:f=>l({...i,payoutAmount:parseFloat(f.target.value)}),required:!0,"data-testid":"input-payout-amount"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"currency",children:"Валюта"}),r.jsxs(fe,{value:i.currency,onValueChange:f=>l({...i,currency:f}),children:[r.jsx(ue,{"data-testid":"select-currency",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"USD",children:"USD"}),r.jsx(C,{value:"EUR",children:"EUR"}),r.jsx(C,{value:"RUB",children:"RUB"}),r.jsx(C,{value:"BTC",children:"BTC"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Капы (лимиты)"}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-2",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"dailyCap",children:"Дневной"}),r.jsx(ne,{id:"dailyCap",type:"number",min:"0",value:i.caps.daily||"",onChange:f=>l({...i,caps:{...i.caps,daily:f.target.value?parseInt(f.target.value):void 0}}),placeholder:"0","data-testid":"input-daily-cap"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"weeklyCap",children:"Недельный"}),r.jsx(ne,{id:"weeklyCap",type:"number",min:"0",value:i.caps.weekly||"",onChange:f=>l({...i,caps:{...i.caps,weekly:f.target.value?parseInt(f.target.value):void 0}}),placeholder:"0","data-testid":"input-weekly-cap"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"monthlyCap",children:"Месячный"}),r.jsx(ne,{id:"monthlyCap",type:"number",min:"0",value:i.caps.monthly||"",onChange:f=>l({...i,caps:{...i.caps,monthly:f.target.value?parseInt(f.target.value):void 0}}),placeholder:"0","data-testid":"input-monthly-cap"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"totalCap",children:"Общий"}),r.jsx(ne,{id:"totalCap",type:"number",min:"0",value:i.caps.total||"",onChange:f=>l({...i,caps:{...i.caps,total:f.target.value?parseInt(f.target.value):void 0}}),placeholder:"0","data-testid":"input-total-cap"})]})]})]})]})}),r.jsx(He,{value:"targeting",className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Страны (выберите одну или несколько)"}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2 max-h-40 overflow-y-auto border rounded p-2",children:["US","GB","CA","AU","DE","FR","IT","ES","RU","UA","BY","KZ","BR","IN","CN","JP"].map(f=>r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:i.countries.includes(f),onChange:m=>{m.target.checked?l({...i,countries:[...i.countries,f]}):l({...i,countries:i.countries.filter(g=>g!==f)})},"data-testid":`checkbox-country-${f}`}),r.jsx("span",{className:"text-sm",children:f})]},f))})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"restrictions",children:"Ограничения и требования"}),r.jsx(gt,{id:"restrictions",value:i.restrictions,onChange:f=>l({...i,restrictions:f.target.value}),placeholder:"Описание ограничений, требований к трафику и партнерам",rows:4,"data-testid":"textarea-restrictions"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"approval",children:"Тип одобрения"}),r.jsxs(fe,{value:i.requirements.approval,onValueChange:f=>l({...i,requirements:{...i.requirements,approval:f}}),children:[r.jsx(ue,{"data-testid":"select-approval-type",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"auto",children:"Автоматическое"}),r.jsx(C,{value:"manual",children:"Ручное"}),r.jsx(C,{value:"whitelist",children:"Только белый список"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"quality",children:"Минимальное качество (%)"}),r.jsx(ne,{id:"quality",type:"number",min:"0",max:"100",value:i.requirements.quality,onChange:f=>l({...i,requirements:{...i.requirements,quality:parseInt(f.target.value)}}),"data-testid":"input-quality-requirement"})]})]})]})}),r.jsx(He,{value:"tracking",className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"clickUrl",children:"URL для кликов *"}),r.jsx(ne,{id:"clickUrl",type:"url",value:((d=i.tracking)==null?void 0:d.clickUrl)||"",onChange:f=>l({...i,tracking:{...i.tracking,clickUrl:f.target.value}}),placeholder:"https://track.example.com/click?id={clickid}",required:!0,"data-testid":"input-click-url"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"conversionUrl",children:"URL для конверсий *"}),r.jsx(ne,{id:"conversionUrl",type:"url",value:((u=i.tracking)==null?void 0:u.conversionUrl)||"",onChange:f=>l({...i,tracking:{...i.tracking,conversionUrl:f.target.value}}),placeholder:"https://track.example.com/conversion?id={clickid}",required:!0,"data-testid":"input-conversion-url"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"postbackUrl",children:"Postback URL"}),r.jsx(ne,{id:"postbackUrl",type:"url",value:((h=i.tracking)==null?void 0:h.postbackUrl)||"",onChange:f=>l({...i,tracking:{...i.tracking,postbackUrl:f.target.value}}),placeholder:"https://partner.example.com/postback?id={clickid}&sum={sum}","data-testid":"input-postback-url"})]})]})}),r.jsx(He,{value:"settings",className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{id:"isPrivate",checked:i.isPrivate,onCheckedChange:f=>l({...i,isPrivate:f}),"data-testid":"switch-private-offer"}),r.jsx(F,{htmlFor:"isPrivate",children:"Приватный оффер"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{id:"antifraudEnabled",checked:i.antifraud.enabled,onCheckedChange:f=>l({...i,antifraud:{...i.antifraud,enabled:f}}),"data-testid":"switch-antifraud-enabled"}),r.jsx(F,{htmlFor:"antifraudEnabled",children:"Включить антифрод"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"priority",children:"Приоритет (1-10)"}),r.jsx(ne,{id:"priority",type:"number",min:"1",max:"10",value:i.priority,onChange:f=>l({...i,priority:parseInt(f.target.value)}),"data-testid":"input-priority"})]})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[r.jsx(D,{type:"button",variant:"outline",onClick:n,"data-testid":"button-cancel",children:"Отмена"}),r.jsx(D,{type:"submit",disabled:o.isPending,"data-testid":"button-save-offer",children:o.isPending?"Сохранение...":e?"Сохранить":"Создать"})]})]})})};function sVe(){const{user:e}=tr(),{collapsed:t}=Qs(),{toast:n}=at(),s=Et(),[a,i]=v.useState(""),[l,o]=v.useState({status:"all",category:"all",payoutType:"all",country:"all"}),[c,d]=v.useState("createdAt"),[u,h]=v.useState("desc"),[f,m]=v.useState([]),[g,x]=v.useState(!1),[w,j]=v.useState(null),{data:y,isLoading:b,refetch:p}=Fe({queryKey:["/api/advertiser/offers",a,l,c,u],enabled:!!e}),N=Oe({mutationFn:A=>Re(`/api/advertiser/offers/${A}`,{method:"DELETE"}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/advertiser/offers"]}),n({title:"Оффер удален",description:"Оффер успешно удален из системы"})}});Oe({mutationFn:({offerId:A,status:T})=>Re(`/api/advertiser/offers/${A}/status`,{method:"PATCH",body:{status:T}}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/advertiser/offers"]}),n({title:"Статус изменен",description:"Статус оффера успешно обновлен"})}});const k=Oe({mutationFn:({action:A,offerIds:T})=>Re("/api/advertiser/offers/bulk",{method:"POST",body:{action:A,offerIds:T}}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/advertiser/offers"]}),m([]),n({title:"Операция выполнена",description:"Массовая операция успешно выполнена"})}}),S=A=>{j(A),x(!0)},P=async A=>{window.confirm("Вы уверены, что хотите удалить этот оффер?")&&N.mutate(A)},_=A=>{f.length!==0&&k.mutate({action:A,offerIds:f})},R=A=>{const T=`${A.tracking.clickUrl}?subid={subid}&clickid={clickid}`;navigator.clipboard.writeText(T),n({title:"Скопировано",description:"Трекинговая ссылка скопирована в буфер обмена"})},O=A=>{const T={active:{label:"Активен",variant:"default",color:"bg-green-500"},paused:{label:"Приостановлен",variant:"secondary",color:"bg-yellow-500"},pending:{label:"На модерации",variant:"outline",color:"bg-blue-500"},archived:{label:"Архивирован",variant:"secondary",color:"bg-gray-500"},rejected:{label:"Отклонен",variant:"destructive",color:"bg-red-500"}},B=T[A]||T.pending;return r.jsxs(ie,{variant:B.variant,className:"flex items-center gap-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${B.color}`}),B.label]})},M=(y==null?void 0:y.filter(A=>!(a&&!A.name.toLowerCase().includes(a.toLowerCase())||l.status!=="all"&&A.status!==l.status||l.category!=="all"&&A.category!==l.category||l.payoutType!=="all"&&A.payoutType!==l.payoutType||l.country!=="all"&&!A.countries.includes(l.country))))||[];return b?r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((A,T)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded"},T))})}):r.jsxs("div",{className:`p-6 transition-all duration-300 ${t?"ml-16":"ml-64"}`,children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Управление офферами"}),r.jsx("p",{className:"text-gray-600",children:"Создавайте и управляйте вашими офферами"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(D,{variant:"outline",onClick:()=>p(),"data-testid":"button-refresh",children:[r.jsx(br,{className:"w-4 h-4 mr-2"}),"Экспорт"]}),r.jsxs(D,{onClick:()=>{j(null),x(!0)},"data-testid":"button-create-offer",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Создать оффер"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsx(q,{children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Всего офферов"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(y==null?void 0:y.length)||0})]}),r.jsx(Gt,{className:"w-8 h-8 text-blue-500"})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Активные"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:(y==null?void 0:y.filter(A=>A.status==="active").length)||0})]}),r.jsx(ur,{className:"w-8 h-8 text-green-500"})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Общая конверсия"}),r.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[y?(y.reduce((A,T)=>A+T.statistics.cr,0)/y.length).toFixed(1):0,"%"]})]}),r.jsx(cr,{className:"w-8 h-8 text-purple-500"})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Общий доход"}),r.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["$",y?y.reduce((A,T)=>A+T.statistics.revenue,0).toLocaleString():0]})]}),r.jsx(Rt,{className:"w-8 h-8 text-orange-500"})]})})})]}),r.jsx(q,{className:"mb-6",children:r.jsxs(W,{className:"p-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск по названию оффера...",value:a,onChange:A=>i(A.target.value),className:"pl-10","data-testid":"input-search-offers"})]})}),r.jsxs(fe,{value:l.status,onValueChange:A=>o({...l,status:A}),children:[r.jsx(ue,{className:"w-40","data-testid":"select-filter-status",children:r.jsx(me,{placeholder:"Статус"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все статусы"}),r.jsx(C,{value:"active",children:"Активные"}),r.jsx(C,{value:"paused",children:"Приостановленные"}),r.jsx(C,{value:"pending",children:"На модерации"}),r.jsx(C,{value:"archived",children:"Архивированные"})]})]}),r.jsxs(fe,{value:l.category,onValueChange:A=>o({...l,category:A}),children:[r.jsx(ue,{className:"w-40","data-testid":"select-filter-category",children:r.jsx(me,{placeholder:"Категория"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все категории"}),r.jsx(C,{value:"gambling",children:"Гемблинг"}),r.jsx(C,{value:"dating",children:"Знакомства"}),r.jsx(C,{value:"finance",children:"Финансы"}),r.jsx(C,{value:"crypto",children:"Криптовалюты"})]})]}),r.jsxs(fe,{value:l.payoutType,onValueChange:A=>o({...l,payoutType:A}),children:[r.jsx(ue,{className:"w-40","data-testid":"select-filter-payout",children:r.jsx(me,{placeholder:"Тип выплаты"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все типы"}),r.jsx(C,{value:"cpa",children:"CPA"}),r.jsx(C,{value:"cpl",children:"CPL"}),r.jsx(C,{value:"cpc",children:"CPC"}),r.jsx(C,{value:"revshare",children:"RevShare"})]})]})]}),f.length>0&&r.jsxs("div",{className:"flex items-center gap-2 mt-4 p-3 bg-blue-50 rounded-lg",children:[r.jsxs("span",{className:"text-sm text-blue-600",children:["Выбрано: ",f.length," офферов"]}),r.jsxs("div",{className:"flex gap-2 ml-auto",children:[r.jsxs(D,{size:"sm",variant:"outline",onClick:()=>_("activate"),"data-testid":"button-bulk-activate",children:[r.jsx(Bre,{className:"w-4 h-4 mr-1"}),"Активировать"]}),r.jsxs(D,{size:"sm",variant:"outline",onClick:()=>_("pause"),"data-testid":"button-bulk-pause",children:[r.jsx(Ure,{className:"w-4 h-4 mr-1"}),"Приостановить"]}),r.jsxs(D,{size:"sm",variant:"outline",onClick:()=>_("archive"),"data-testid":"button-bulk-archive",children:[r.jsx(BA,{className:"w-4 h-4 mr-1"}),"Архивировать"]})]})]})]})}),r.jsx(q,{children:r.jsxs(W,{className:"p-0",children:[r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{className:"w-12",children:r.jsx("input",{type:"checkbox",checked:f.length===M.length&&M.length>0,onChange:A=>{A.target.checked?m(M.map(T=>T.id)):m([])},"data-testid":"checkbox-select-all"})}),r.jsx(Z,{children:"Оффер"}),r.jsx(Z,{children:"Категория"}),r.jsx(Z,{children:"Выплата"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Статистика"}),r.jsx(Z,{children:"Партнеры"}),r.jsx(Z,{children:"Дата создания"}),r.jsx(Z,{className:"w-32",children:"Действия"})]})}),r.jsx(It,{children:M.map(A=>r.jsxs(De,{className:"hover:bg-gray-50",children:[r.jsx(H,{children:r.jsx("input",{type:"checkbox",checked:f.includes(A.id),onChange:T=>{T.target.checked?m([...f,A.id]):m(f.filter(B=>B!==A.id))},"data-testid":`checkbox-offer-${A.id}`})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:r.jsx(Gt,{className:"w-6 h-6 text-gray-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:A.name}),r.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:A.description}),A.isPrivate&&r.jsxs(ie,{variant:"outline",className:"text-xs mt-1",children:[r.jsx(Dt,{className:"w-3 h-3 mr-1"}),"Приватный"]})]})]})}),r.jsxs(H,{children:[r.jsx(ie,{variant:"outline",children:A.category}),A.vertical&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:A.vertical})]}),r.jsx(H,{children:r.jsxs("div",{className:"text-sm",children:[r.jsxs("p",{className:"font-medium text-green-600",children:[A.payoutAmount," ",A.currency]}),r.jsx("p",{className:"text-gray-500 uppercase",children:A.payoutType})]})}),r.jsx(H,{children:O(A.status)}),r.jsx(H,{children:r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Клики:"}),r.jsx("span",{className:"font-medium",children:A.statistics.clicks.toLocaleString()})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"CR:"}),r.jsxs("span",{className:"font-medium text-purple-600",children:[A.statistics.cr,"%"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"EPC:"}),r.jsxs("span",{className:"font-medium text-blue-600",children:["$",A.statistics.epc]})]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(or,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-sm",children:A.statistics.activePartners})]})}),r.jsx(H,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{children:new Date(A.createdAt).toLocaleDateString("ru-RU")}),r.jsx("p",{className:"text-gray-500",children:new Date(A.createdAt).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})})]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>S(A),title:"Редактировать оффер","data-testid":`button-edit-${A.id}`,children:r.jsx(Ts,{className:"w-4 h-4"})}),r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>R(A),title:"Скопировать трекинговую ссылку","data-testid":`button-copy-${A.id}`,children:r.jsx(Yr,{className:"w-4 h-4"})}),r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>window.open(A.previewUrl||A.url,"_blank"),title:"Предпросмотр оффера","data-testid":`button-preview-${A.id}`,children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>P(A.id),title:"Удалить оффер","data-testid":`button-delete-${A.id}`,children:r.jsx(wr,{className:"w-4 h-4 text-red-500"})})]})})]},A.id))})]}),M.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Gt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Нет офферов"}),r.jsx("p",{className:"text-gray-500 mb-4",children:a||Object.values(l).some(A=>A!=="all")?"По вашему запросу ничего не найдено":"Создайте ваш первый оффер"}),r.jsxs(D,{onClick:()=>{j(null),x(!0)},"data-testid":"button-create-first-offer",children:[r.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Создать оффер"]})]})]})}),r.jsx(_t,{open:g,onOpenChange:x,children:r.jsxs(kt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(St,{children:r.jsx(Ct,{children:w?"Редактирование оффера":"Создание нового оффера"})}),r.jsx(nVe,{offer:w||void 0,onSuccess:()=>x(!1),onCancel:()=>x(!1)})]})})]})}function OY({offerId:e,maxNumberOfFiles:t=1,maxFileSize:n=50*1024*1024,onGetUploadParameters:s,onComplete:a,uploaded:i=!1,buttonClassName:l}){const[o,c]=v.useState(!1),[d,u]=v.useState(null),[h,f]=v.useState(0),[m,g]=v.useState(!1),{toast:x}=at(),w=b=>{var N;const p=(N=b.target.files)==null?void 0:N[0];if(console.log("🔍 Файл выбран:",p?p.name:"none"),console.log("🔍 Размер файла:",p?p.size:0),p){if(!p.name.toLowerCase().endsWith(".zip")){console.log("❌ Не ZIP файл"),x({title:"Неверный формат файла",description:"Пожалуйста, выберите ZIP архив с креативами",variant:"destructive"});return}if(p.size>n){console.log("❌ Файл слишком большой"),x({title:"Файл слишком большой",description:`Максимальный размер файла ${y(n)}`,variant:"destructive"});return}console.log("✅ Валидация файла пройдена"),u(p),g(!1),f(0),setTimeout(()=>j(),100)}},j=async()=>{if(!d){console.log("❌ Нет выбранного файла");return}console.log("🚀 Начало загрузки файла:",d.name),c(!0),f(10);try{let b;if(s)console.log("📡 Получение upload URL через кастомный метод..."),f(20),b=(await s()).url,console.log("✅ Upload URL получен:",b.substring(0,50)+"..."),f(40);else{console.log("📡 Получение upload URL через стандартный метод...");const k=localStorage.getItem("auth_token");console.log("🔑 Токен присутствует:",k?"да":"нет");const S=await fetch("/api/objects/upload",{method:"POST",headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"}});if(console.log("Upload URL response status:",S.status),!S.ok){const _=await S.text();throw new Error(`Failed to get upload URL: ${S.status}`)}b=(await S.json()).uploadURL}console.log("📤 Загрузка файла в облако..."),f(60);const p=await fetch(b,{method:"PUT",body:d,headers:{"Content-Type":"application/zip"}});if(console.log("File upload response status:",p.status),f(80),!p.ok)throw new Error(`Failed to upload file: ${p.status}`);f(100),g(!0),x({title:"✅ Креативы загружены",description:`Файл "${d.name}" успешно загружен`});const N={successful:[{uploadURL:b,name:d.name,size:d.size}],failed:[]};a==null||a(N),setTimeout(()=>{u(null),f(0),g(!1)},2e3)}catch{f(0),x({title:"❌ Ошибка загрузки",description:"Не удалось загрузить креативы. Попробуйте еще раз.",variant:"destructive"}),u(null)}finally{c(!1)}},y=b=>{if(b===0)return"0 Bytes";const p=1024,N=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(b)/Math.log(p));return parseFloat((b/Math.pow(p,k)).toFixed(2))+" "+N[k]};return r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Ba,{className:"w-5 h-5"}),"Загрузка креативов"]})}),r.jsxs(W,{className:"space-y-4",children:[d?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50 dark:bg-gray-900/50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${m?"bg-green-100 dark:bg-green-900/30":o?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100 dark:bg-gray-800"}`,children:m?r.jsx(on,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):r.jsx(es,{className:`w-5 h-5 ${o?"text-blue-600 dark:text-blue-400":"text-gray-500"}`})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:d.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[y(d.size),o&&` • Загрузка ${h}%`,m&&" • ✅ Загружено"]})]})]}),!o&&!m&&r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>u(null),title:"Удалить файл",children:r.jsx(Fn,{className:"w-4 h-4"})})]}),o&&r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-800 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${h}%`}})}),m&&r.jsx("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700 dark:text-green-300",children:[r.jsx(on,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"Файл успешно загружен!"})]})}),!o&&!m&&r.jsx("div",{className:"flex gap-2",children:r.jsxs(D,{onClick:j,className:"bg-green-600 hover:bg-green-700 text-white flex-1",children:[r.jsx(Ba,{className:"w-4 h-4 mr-2"}),"Загрузить"]})})]}):r.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ba,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Выберите ZIP архив с креативами"}),r.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Максимальный размер файла: ",y(n)]}),r.jsx("input",{id:"creative-upload",type:"file",accept:".zip",onChange:w,className:"hidden","data-testid":"input-file-creative"}),r.jsxs(D,{type:"button",onClick:()=>{var b;return(b=document.getElementById("creative-upload"))==null?void 0:b.click()},className:`bg-blue-600 hover:bg-blue-700 text-white transition-colors ${l||""}`,"data-testid":"button-upload-creative",title:"Выбрать ZIP файл с креативами",children:[r.jsx(Ba,{className:"w-4 h-4 mr-2"}),"Выбрать файл"]})]})}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[r.jsx("p",{children:"• Поддерживаются только ZIP архивы"}),r.jsxs("p",{children:["• Максимальный размер файла: ",y(n)]}),r.jsx("p",{children:"• Архив должен содержать изображения, баннеры и другие рекламные материалы"})]})]})]})}const RF={name:"",description:{ru:"",en:""},category:"",logo:"",geoTargeting:[],targetUrl:"",postbackUrl:"",hasGlobalGeoSetting:!1,hasGlobalPayoutSetting:!1,globalGeo:"",globalPayout:"",landingPages:[{id:"1",name:"Основная",url:"",geo:"",payout:"",hasCustomGeo:!1,hasCustomPayout:!1,isDefault:!0}],payoutType:"cpa",payoutAmount:0,currency:"USD",trafficSources:[],allowedApplications:[],dailyLimit:0,monthlyLimit:0,antifraudEnabled:!0,antifraudMethods:["ip_check","vpn_detection"],partnerApprovalType:"manual",kycRequired:!1,isPrivate:!1,kpi:"",creatives:"",creativesUrl:"",status:"active"},aVe=["gambling","dating","crypto","betting","e-commerce","gaming","finance","health","vpn","antivirus","education","software","mobile_apps","nutra","beauty"],iVe=[{code:"afghanistan",name:"🇦🇫 Афганистан"},{code:"albania",name:"🇦🇱 Албания"},{code:"algeria",name:"🇩🇿 Алжир"},{code:"andorra",name:"🇦🇩 Андорра"},{code:"angola",name:"🇦🇴 Ангола"},{code:"argentina",name:"🇦🇷 Аргентина"},{code:"armenia",name:"🇦🇲 Армения"},{code:"australia",name:"🇦🇺 Австралия"},{code:"austria",name:"🇦🇹 Австрия"},{code:"azerbaijan",name:"🇦🇿 Азербайджан"},{code:"bahrain",name:"🇧🇭 Бахрейн"},{code:"bangladesh",name:"🇧🇩 Бангладеш"},{code:"belarus",name:"🇧🇾 Беларусь"},{code:"belgium",name:"🇧🇪 Бельгия"},{code:"bolivia",name:"🇧🇴 Боливия"},{code:"brazil",name:"🇧🇷 Бразилия"},{code:"bulgaria",name:"🇧🇬 Болгария"},{code:"cambodia",name:"🇰🇭 Камбоджа"},{code:"canada",name:"🇨🇦 Канада"},{code:"chile",name:"🇨🇱 Чили"},{code:"china",name:"🇨🇳 Китай"},{code:"colombia",name:"🇨🇴 Колумбия"},{code:"croatia",name:"🇭🇷 Хорватия"},{code:"cyprus",name:"🇨🇾 Кипр"},{code:"czech",name:"🇨🇿 Чехия"},{code:"denmark",name:"🇩🇰 Дания"},{code:"ecuador",name:"🇪🇨 Эквадор"},{code:"egypt",name:"🇪🇬 Египет"},{code:"estonia",name:"🇪🇪 Эстония"},{code:"finland",name:"🇫🇮 Финляндия"},{code:"france",name:"🇫🇷 Франция"},{code:"georgia",name:"🇬🇪 Грузия"},{code:"germany",name:"🇩🇪 Германия"},{code:"ghana",name:"🇬🇭 Гана"},{code:"greece",name:"🇬🇷 Греция"},{code:"hungary",name:"🇭🇺 Венгрия"},{code:"iceland",name:"🇮🇸 Исландия"},{code:"india",name:"🇮🇳 Индия"},{code:"indonesia",name:"🇮🇩 Индонезия"},{code:"iran",name:"🇮🇷 Иран"},{code:"iraq",name:"🇮🇶 Ирак"},{code:"ireland",name:"🇮🇪 Ирландия"},{code:"israel",name:"🇮🇱 Израиль"},{code:"italy",name:"🇮🇹 Италия"},{code:"japan",name:"🇯🇵 Япония"},{code:"jordan",name:"🇯🇴 Иордания"},{code:"kazakhstan",name:"🇰🇿 Казахстан"},{code:"kenya",name:"🇰🇪 Кения"},{code:"kuwait",name:"🇰🇼 Кувейт"},{code:"latvia",name:"🇱🇻 Латвия"},{code:"lebanon",name:"🇱🇧 Ливан"},{code:"lithuania",name:"🇱🇹 Литва"},{code:"malaysia",name:"🇲🇾 Малайзия"},{code:"malta",name:"🇲🇹 Мальта"},{code:"mexico",name:"🇲🇽 Мексика"},{code:"morocco",name:"🇲🇦 Марокко"},{code:"netherlands",name:"🇳🇱 Нидерланды"},{code:"newzealand",name:"🇳🇿 Новая Зеландия"},{code:"nigeria",name:"🇳🇬 Нигерия"},{code:"norway",name:"🇳🇴 Норвегия"},{code:"pakistan",name:"🇵🇰 Пакистан"},{code:"peru",name:"🇵🇪 Перу"},{code:"philippines",name:"🇵🇭 Филиппины"},{code:"poland",name:"🇵🇱 Польша"},{code:"portugal",name:"🇵🇹 Португалия"},{code:"qatar",name:"🇶🇦 Катар"},{code:"romania",name:"🇷🇴 Румыния"},{code:"russia",name:"🇷🇺 Россия"},{code:"saudiarabia",name:"🇸🇦 Саудовская Аравия"},{code:"singapore",name:"🇸🇬 Сингапур"},{code:"slovakia",name:"🇸🇰 Словакия"},{code:"slovenia",name:"🇸🇮 Словения"},{code:"southafrica",name:"🇿🇦 Южная Африка"},{code:"southkorea",name:"🇰🇷 Южная Корея"},{code:"spain",name:"🇪🇸 Испания"},{code:"sweden",name:"🇸🇪 Швеция"},{code:"switzerland",name:"🇨🇭 Швейцария"},{code:"thailand",name:"🇹🇭 Таиланд"},{code:"turkey",name:"🇹🇷 Турция"},{code:"uae",name:"🇦🇪 ОАЭ"},{code:"ukraine",name:"🇺🇦 Украина"},{code:"uk",name:"🇬🇧 Великобритания"},{code:"usa",name:"🇺🇸 США"},{code:"venezuela",name:"🇻🇪 Венесуэла"},{code:"vietnam",name:"🇻🇳 Вьетнам"}],lVe=["Push","Popunder","Google Ads","Facebook Ads","TikTok Ads","Instagram","YouTube Ads","Native","UAC","SEO","Email","WhatsApp","Telegram","Motivated","In-App","Cloaking","Bot","Farm","Doros","APK","VK","Discord","Phishing","Autoredirect","Proxy/VPN","Twitter/X"],DF=["PWA App","WebView App","APK","iOS App","SPA","Landing App","SmartLink","Mini App","Desktop App","iFrame","ZIP","Cloud App","DApp","Masked App","WebRTC","TWA"],MF=[{value:"ip_check",label:"Проверка IP адресов",description:"Анализ подозрительных IP и геолокации"},{value:"vpn_detection",label:"Детекция VPN/Proxy",description:"Обнаружение VPN, прокси и анонимайзеров"},{value:"bot_protection",label:"Защита от ботов",description:"Идентификация автоматизированного трафика"},{value:"device_fingerprint",label:"Отпечаток устройства",description:"Уникальная идентификация устройств"},{value:"behavioral_analysis",label:"Поведенческий анализ",description:"Анализ паттернов поведения пользователей"},{value:"click_spam_protection",label:"Защита от кликспама",description:"Предотвращение массовых фиктивных кликов"},{value:"time_analysis",label:"Временной анализ",description:"Контроль времени между событиями"},{value:"referrer_validation",label:"Проверка источников",description:"Валидация источников переходов"},{value:"conversion_validation",label:"Проверка конверсий",description:"Валидация качества конверсий"}];function oVe({value:e,onChange:t,placeholder:n="Выберите страну"}){const[s,a]=v.useState(!1);return r.jsxs(jm,{open:s,onOpenChange:a,children:[r.jsx(wm,{asChild:!0,children:r.jsxs(D,{variant:"outline",role:"combobox","aria-expanded":s,className:"w-full justify-between text-sm",children:[e?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:Pl(e)}),r.jsx("span",{children:Wc(e)})]}):n,r.jsx(z2,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(Tu,{className:"w-full p-0",children:r.jsxs(Jj,{children:[r.jsx(ew,{placeholder:"Поиск страны...",className:"h-9"}),r.jsx(tw,{children:"Страна не найдена."}),r.jsx(rw,{className:"max-h-64 overflow-auto",children:iVe.map(i=>r.jsxs(nw,{value:i.name,onSelect:()=>{t(i.code),a(!1)},children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:Pl(i.code)}),r.jsx("span",{children:i.name})]}),r.jsx(on,{className:`ml-auto h-4 w-4 ${e===i.code?"opacity-100":"opacity-0"}`})]},i.code))})]})})]})}function $F(){var j,y;const[,e]=Bn(),{toast:t}=at(),n=Et(),s=()=>{try{const b=localStorage.getItem("auth_token")||localStorage.getItem("token");if(b&&b!=="null"&&b.trim()!==""){const p=JSON.parse(atob(b.split(".")[1]));return console.log("🔑 JWT payload:",p),p.userId||p.id}}catch(b){console.warn("Error parsing token:",b)}return null},[a,i]=v.useState(RF),[l,o]=v.useState("basic");v.useState("");const[c,d]=v.useState(!1);v.useState(0);const u=async()=>{var b;try{console.log("🔄 Получение upload URL для креативов...");const p=localStorage.getItem("auth_token");console.log("🔑 Токен присутствует:",!!p);const N=await fetch("/api/objects/upload",{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(console.log("📡 Статус ответа API:",N.status),!N.ok){const S=await N.text();throw new Error(`Не удалось получить URL: ${N.status}`)}const k=await N.json();return console.log("✅ Upload URL успешно получен"),console.log("🔗 URL начинается с:",((b=k.uploadURL)==null?void 0:b.substring(0,50))+"..."),{method:"PUT",url:k.uploadURL}}catch(p){throw t({title:"Ошибка загрузки",description:"Не удалось получить URL для загрузки креативов",variant:"destructive"}),p}},h=async b=>{if(console.log("📦 Завершение загрузки креативов:",b),b.successful&&b.successful.length>0){const p=b.successful[0];console.log("📁 Данные загруженного файла:",p);const N=p.uploadURL||p.url;console.log("🔗 URL креативов:",N),i(k=>({...k,creatives:N,creativesUrl:N})),d(!0),console.log("✅ Креативы успешно сохранены в форму"),t({title:"Креативы загружены",description:"ZIP архив с креативами успешно загружен"})}else t({title:"Ошибка загрузки",description:"Не удалось загрузить креативы. Попробуйте снова.",variant:"destructive"})},f=Oe({mutationFn:async b=>{var N,k,S,P;const p={name:b.name,description:b.description,category:b.category,logo:b.logo,countries:b.hasGlobalGeoSetting?b.landingPages.map(_=>_.geo).filter(_=>_&&_.trim()!==""):b.globalGeo?[b.globalGeo]:[],landingPageUrl:((N=b.landingPages.find(_=>_.isDefault))==null?void 0:N.url)||((k=b.landingPages[0])==null?void 0:k.url)||"",landingPages:b.landingPages,payout:b.hasGlobalPayoutSetting?((S=b.landingPages.find(_=>_.isDefault))==null?void 0:S.payout)||((P=b.landingPages[0])==null?void 0:P.payout)||"0":b.globalPayout||"0",payoutByGeo:b.hasGlobalPayoutSetting?b.landingPages.reduce((_,R)=>(R.geo&&R.payout&&R.geo.trim()!==""&&R.payout!==""&&(_[R.geo.toLowerCase()]=parseFloat(R.payout)||0),_),{}):{},payoutType:b.payoutType,currency:b.currency,trafficSources:b.trafficSources,allowedApplications:b.allowedApplications,dailyLimit:b.dailyLimit||null,monthlyLimit:b.monthlyLimit||null,antifraudEnabled:b.antifraudEnabled,antifraudMethods:b.antifraudMethods,partnerApprovalType:b.partnerApprovalType,kycRequired:b.kycRequired,isPrivate:b.isPrivate,kpiConditions:{en:b.kpi,ru:b.kpi},creatives:b.creatives,creativesUrl:b.creativesUrl,advertiserId:s(),status:b.status};return Re("/api/advertiser/offers","POST",p)},onSuccess:b=>{t({title:"Оффер создан",description:`Оффер "${a.name}" успешно создан`}),n.invalidateQueries({queryKey:["/api/advertiser/offers"]}),e("/advertiser/offers")},onError:b=>{console.error("Offer creation error:",b),t({title:"Ошибка создания",description:(b==null?void 0:b.message)||"Не удалось создать оффер. Попробуйте снова.",variant:"destructive"})}});Fe({queryKey:["/api/advertiser/tracking-domains"],queryFn:()=>Re("/api/advertiser/tracking-domains")});const m=b=>{var P;b.preventDefault(),console.log("🚀 Starting offer creation process...");const p=s();if(console.log("👤 Retrieved user ID:",p),!p){console.error("❌ No user ID found"),t({title:"Ошибка авторизации",description:"Не удалось определить пользователя. Войдите в систему заново.",variant:"destructive"});return}if(!((P=a.name)!=null&&P.trim())){t({title:"Заполните название оффера",description:"Название оффера обязательно для заполнения",variant:"destructive"});return}if(!a.category){t({title:"Выберите категорию",description:"Категория оффера обязательна для выбора",variant:"destructive"});return}if(!a.landingPages.some(_=>_.url&&_.url.trim()!=="")){t({title:"Укажите URL целевой страницы",description:"Необходимо указать хотя бы один URL целевой страницы",variant:"destructive"});return}if(!(a.hasGlobalPayoutSetting?a.landingPages.some(_=>parseFloat(_.payout||"0")>0):parseFloat(a.globalPayout||"0")>0)){t({title:"Укажите размер выплаты",description:"Размер выплаты должен быть больше нуля",variant:"destructive"});return}if(!(a.hasGlobalGeoSetting?a.landingPages.some(_=>_.geo&&_.geo.trim()!==""):a.globalGeo&&a.globalGeo.trim()!=="")){t({title:"Выберите гео",description:"Необходимо указать гео для целевых страниц",variant:"destructive"});return}console.log("✅ All validations passed, creating offer with data:",a),f.mutate(a)},g=()=>{const b={id:Date.now().toString(),name:`Лендинг ${a.landingPages.length+1}`,url:"",geo:a.hasGlobalGeoSetting?"":a.globalGeo,payout:a.hasGlobalPayoutSetting?"":a.globalPayout,hasCustomGeo:a.hasGlobalGeoSetting,hasCustomPayout:a.hasGlobalPayoutSetting,isDefault:!1};i(p=>({...p,landingPages:[...p.landingPages,b]}))},x=b=>{a.landingPages.length<=1||i(p=>({...p,landingPages:p.landingPages.filter(N=>N.id!==b)}))},w=(b,p,N)=>{i(k=>({...k,landingPages:k.landingPages.map(S=>S.id===b?{...S,[p]:N}:S)}))};return r.jsx("div",{children:r.jsxs("div",{className:"w-full space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(D,{variant:"outline",size:"icon",onClick:()=>e("/advertiser/offers"),"data-testid":"button-back",title:"Вернуться к офферам",children:r.jsx(vc,{className:"h-4 w-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Создание оффера"}),r.jsx("p",{className:"text-muted-foreground",children:"Настройте все параметры для нового оффера"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(D,{variant:"outline",onClick:()=>e("/advertiser/offers"),"data-testid":"button-cancel",children:"Отмена"}),r.jsxs(D,{onClick:m,disabled:f.isPending,"data-testid":"button-save-offer",className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(_l,{className:"h-4 w-4 mr-2"}),f.isPending?"Сохранение...":"Сохранить оффер"]})]})]}),r.jsxs("form",{onSubmit:m,className:"space-y-6",children:[r.jsxs(rn,{value:l,onValueChange:o,children:[r.jsxs(Zr,{className:"grid w-full grid-cols-4",children:[r.jsxs(We,{value:"basic",className:"flex items-center gap-2 data-[state=active]:bg-blue-100 dark:data-[state=active]:bg-blue-900 data-[state=active]:text-blue-700 dark:data-[state=active]:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-950",title:"Основная информация об оффере",children:[r.jsx(fr,{className:"h-4 w-4 text-blue-600"}),"Основное"]}),r.jsxs(We,{value:"links",className:"flex items-center gap-2 data-[state=active]:bg-purple-100 dark:data-[state=active]:bg-purple-900 data-[state=active]:text-purple-700 dark:data-[state=active]:text-purple-300 hover:bg-purple-50 dark:hover:bg-purple-950",title:"Ссылки и лендинги",children:[r.jsx(Gt,{className:"h-4 w-4 text-purple-600"}),"Ссылки"]}),r.jsxs(We,{value:"targeting",className:"flex items-center gap-2 data-[state=active]:bg-orange-100 dark:data-[state=active]:bg-orange-900 data-[state=active]:text-orange-700 dark:data-[state=active]:text-orange-300 hover:bg-orange-50 dark:hover:bg-orange-950",title:"Источники трафика",children:[r.jsx(mr,{className:"h-4 w-4 text-orange-600"}),"Источники"]}),r.jsxs(We,{value:"antifraud",className:"flex items-center gap-2 data-[state=active]:bg-red-100 dark:data-[state=active]:bg-red-900 data-[state=active]:text-red-700 dark:data-[state=active]:text-red-300 hover:bg-red-50 dark:hover:bg-red-950",title:"Настройки антифрода",children:[r.jsx(io,{className:"h-4 w-4 text-red-600"}),"Антифрод"]})]}),r.jsx(He,{value:"basic",className:"space-y-6",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Основная информация"})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"name",children:"Название оффера *"}),r.jsx(ne,{id:"name",value:a.name,onChange:b=>i(p=>({...p,name:b.target.value})),placeholder:"Введите название оффера","data-testid":"input-offer-name"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"category",children:"Категория *"}),r.jsxs(fe,{value:a.category,onValueChange:b=>i(p=>({...p,category:b})),children:[r.jsx(ue,{"data-testid":"select-category",children:r.jsx(me,{placeholder:"Выберите категорию"})}),r.jsx(he,{children:aVe.map(b=>r.jsx(C,{value:b,children:b},b))})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Описание оффера"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"description-ru",className:"text-sm text-muted-foreground",children:"На русском"}),r.jsx(gt,{id:"description-ru",value:a.description.ru,onChange:b=>i(p=>({...p,description:{...p.description,ru:b.target.value}})),placeholder:"Подробное описание оффера на русском языке",rows:4,"data-testid":"textarea-description-ru"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"description-en",className:"text-sm text-muted-foreground",children:"На английском"}),r.jsx(gt,{id:"description-en",value:a.description.en,onChange:b=>i(p=>({...p,description:{...p.description,en:b.target.value}})),placeholder:"Detailed offer description in English",rows:4,"data-testid":"textarea-description-en"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"logo",children:"Логотип оффера"}),r.jsxs("div",{className:"mt-2",children:[r.jsxs(lw,{maxNumberOfFiles:1,maxFileSize:5*1024*1024,onGetUploadParameters:async()=>{const b=localStorage.getItem("auth_token");return{method:"PUT",url:(await(await fetch("/api/objects/upload",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`}})).json()).uploadURL}},onComplete:b=>{var p;if(b.successful&&b.successful[0]){const N=b.successful[0].uploadURL;if(N){const k=(p=N.split("uploads/")[1])==null?void 0:p.split("?")[0];if(k){const S=`/objects/uploads/${k}`;i(P=>({...P,logo:S})),t({title:"Успех",description:"Логотип успешно загружен"})}}}},buttonClassName:"w-full",children:[r.jsx(Ba,{className:"h-4 w-4 mr-2"}),"Загрузить логотип"]}),a.logo&&r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(io,{className:"h-4 w-4"}),"Предварительный просмотр:"]}),r.jsx("img",{src:a.logo,alt:"Логотип оффера",className:"w-20 h-20 object-cover rounded-lg border border-border",onError:b=>{const p=b.target;p.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0yNS4zMzMzIDMzLjMzMzNIMzBWNDBIMjUuMzMzM1YzMy4zMzMzWk01MCA0MC4wMDAxSDU0LjY2NjdWMzMuMzMzNEg1MFY0MC4wMDAxWk0zNi42NjY3IDI2LjY2NjdWMzMuMzMzM0g0My4zMzMzVjI2LjY2NjdIMzYuNjY2N1pNMzEuMzMzMyAyNi42NjY3SDI1LjMzMzNWMjAuNjY2N0gyNS4zMzMzVjI2LjY2NjdIMzEuMzMzM1pNNTQuNjY2NyAyNi42NjY3SDQ4LjY2NjdWMjAuNjY2N0g1NC42NjY3VjI2LjY2NjdaTTI0LjY2NjcgNTIuNjY2N0g1NVY1OC42NjY3SDI0LjY2NjdWNTIuNjY2N1oiIGZpbGw9IiM5Q0EzQUYiLz4KPC9zdmc+"}}),r.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>i(b=>({...b,logo:""})),className:"text-destructive hover:text-destructive",children:[r.jsx(wr,{className:"h-3 w-3 mr-1"}),"Удалить логотип"]})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"kpi",children:"KPI / Цель"}),r.jsx(ne,{id:"kpi",value:a.kpi,onChange:b=>i(p=>({...p,kpi:b.target.value})),placeholder:"Например: FTD, Registration, Sale","data-testid":"input-kpi"})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Креативные материалы"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Загрузите ZIP архив с рекламными материалами для партнеров"}),r.jsx(OY,{maxNumberOfFiles:1,maxFileSize:52428800,onGetUploadParameters:u,onComplete:h,uploaded:c,buttonClassName:"w-full max-w-sm"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"payoutType",children:"Тип выплаты"}),r.jsxs(fe,{value:a.payoutType,onValueChange:b=>i(p=>({...p,payoutType:b})),children:[r.jsx(ue,{"data-testid":"select-payout-type",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"cpa",children:"CPA - Cost Per Action"}),r.jsx(C,{value:"cpl",children:"CPL - Cost Per Lead"}),r.jsx(C,{value:"cps",children:"CPS - Cost Per Sale"}),r.jsx(C,{value:"revshare",children:"Revenue Share"}),r.jsx(C,{value:"hybrid",children:"Hybrid"})]})]})]})]})]})}),r.jsx(He,{value:"targeting",className:"space-y-6",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Разрешенные источники"})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Источники трафика"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:lVe.map(b=>{var p;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`traffic-${b}`,checked:((p=a.trafficSources)==null?void 0:p.includes(b))||!1,onChange:()=>{const N=a.trafficSources||[],k=N.includes(b)?N.filter(S=>S!==b):[...N,b];i(S=>({...S,trafficSources:k}))},className:"rounded"}),r.jsx(F,{htmlFor:`traffic-${b}`,className:"text-sm",children:b})]},b)})})]}),r.jsx(wn,{}),r.jsxs("div",{children:[r.jsx(F,{children:"Разрешенные приложения"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Выберите типы приложений, которые разрешены для данного оффера"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-2",children:DF.map(b=>{var p;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`app-${b.replace(/\s+/g,"-").toLowerCase()}`,checked:((p=a.allowedApplications)==null?void 0:p.includes(b))||!1,onChange:()=>{const N=a.allowedApplications||[],k=N.includes(b)?N.filter(S=>S!==b):[...N,b];i(S=>({...S,allowedApplications:k}))},className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50","data-testid":`checkbox-app-${b.replace(/\s+/g,"-").toLowerCase()}`}),r.jsx(F,{htmlFor:`app-${b.replace(/\s+/g,"-").toLowerCase()}`,className:"text-sm font-medium cursor-pointer hover:text-blue-600 transition-colors",children:b})]},b)})}),((j=a.allowedApplications)==null?void 0:j.length)>0&&r.jsx("div",{className:"mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:r.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["Выбрано приложений: ",a.allowedApplications.length," из ",DF.length]})})]}),r.jsx(wn,{})]})]})}),r.jsx(He,{value:"links",className:"space-y-6",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Ссылки и домены"})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"targetUrl",children:"Целевая ссылка оффера *"}),r.jsxs("div",{className:"grid grid-cols-12 gap-2 text-xs font-medium text-muted-foreground px-4 mb-2 mt-3",children:[r.jsx("div",{className:"col-span-2",children:"Название"}),r.jsx("div",{className:"col-span-4",children:"URL целевой страницы"}),r.jsx("div",{className:"col-span-2",children:"Разные ГЕО для URL"}),r.jsx("div",{className:"col-span-2",children:"Разные выплаты для URL"}),r.jsx("div",{className:"col-span-1",children:"По умолчанию"}),r.jsx("div",{className:"col-span-1",children:"Удалить"})]}),r.jsxs("div",{className:"space-y-2",children:[a.landingPages.map((b,p)=>r.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 border rounded-lg",children:[r.jsx("div",{className:"col-span-2",children:r.jsx(ne,{placeholder:"Название",value:b.name,onChange:N=>w(b.id,"name",N.target.value),className:"w-full text-sm"})}),r.jsx("div",{className:"col-span-4",children:r.jsx(ne,{placeholder:"URL целевой страницы",value:b.url,onChange:N=>{w(b.id,"url",N.target.value),b.isDefault&&i(k=>({...k,targetUrl:N.target.value}))},className:"w-full text-sm"})}),r.jsx("div",{className:"col-span-2",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("input",{type:"checkbox",checked:a.hasGlobalGeoSetting||!1,onChange:N=>i(k=>({...k,hasGlobalGeoSetting:N.target.checked,landingPages:k.landingPages.map(S=>({...S,hasCustomGeo:N.target.checked}))})),className:"rounded flex-shrink-0",title:"Разные ГЕО для URL"}),r.jsx(oVe,{placeholder:"Выберите ГЕО",value:a.hasGlobalGeoSetting?b.geo||"":a.globalGeo||"",onChange:N=>{a.hasGlobalGeoSetting?w(b.id,"geo",N):i(k=>({...k,globalGeo:N,landingPages:k.landingPages.map(S=>({...S,geo:N}))}))}})]})}),r.jsx("div",{className:"col-span-2",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("input",{type:"checkbox",checked:a.hasGlobalPayoutSetting||!1,onChange:N=>i(k=>({...k,hasGlobalPayoutSetting:N.target.checked,landingPages:k.landingPages.map(S=>({...S,hasCustomPayout:N.target.checked}))})),className:"rounded flex-shrink-0",title:"Разные выплаты для URL"}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(ne,{placeholder:"Сумма",value:a.hasGlobalPayoutSetting?b.payout||"":a.globalPayout||"",onChange:N=>{a.hasGlobalPayoutSetting?w(b.id,"payout",N.target.value):i(k=>({...k,globalPayout:N.target.value}))},className:"flex-1 text-sm"}),r.jsxs(fe,{value:a.currency,onValueChange:N=>i(k=>({...k,currency:N})),children:[r.jsx(ue,{className:"w-20 text-sm",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"USD",children:"USD"}),r.jsx(C,{value:"EUR",children:"EUR"}),r.jsx(C,{value:"RUB",children:"RUB"}),r.jsx(C,{value:"AED",children:"AED"}),r.jsx(C,{value:"AFN",children:"AFN"}),r.jsx(C,{value:"ALL",children:"ALL"}),r.jsx(C,{value:"AMD",children:"AMD"}),r.jsx(C,{value:"ANG",children:"ANG"}),r.jsx(C,{value:"AOA",children:"AOA"}),r.jsx(C,{value:"ARS",children:"ARS"}),r.jsx(C,{value:"AUD",children:"AUD"}),r.jsx(C,{value:"AWG",children:"AWG"}),r.jsx(C,{value:"AZN",children:"AZN"}),r.jsx(C,{value:"BAM",children:"BAM"}),r.jsx(C,{value:"BBD",children:"BBD"}),r.jsx(C,{value:"BDT",children:"BDT"}),r.jsx(C,{value:"BGN",children:"BGN"}),r.jsx(C,{value:"BHD",children:"BHD"}),r.jsx(C,{value:"BIF",children:"BIF"}),r.jsx(C,{value:"BMD",children:"BMD"}),r.jsx(C,{value:"BND",children:"BND"}),r.jsx(C,{value:"BOB",children:"BOB"}),r.jsx(C,{value:"BRL",children:"BRL"}),r.jsx(C,{value:"BSD",children:"BSD"}),r.jsx(C,{value:"BTN",children:"BTN"}),r.jsx(C,{value:"BWP",children:"BWP"}),r.jsx(C,{value:"BYN",children:"BYN"}),r.jsx(C,{value:"BZD",children:"BZD"}),r.jsx(C,{value:"CAD",children:"CAD"}),r.jsx(C,{value:"CDF",children:"CDF"}),r.jsx(C,{value:"CHF",children:"CHF"}),r.jsx(C,{value:"CLP",children:"CLP"}),r.jsx(C,{value:"CNY",children:"CNY"}),r.jsx(C,{value:"COP",children:"COP"}),r.jsx(C,{value:"CRC",children:"CRC"}),r.jsx(C,{value:"CUC",children:"CUC"}),r.jsx(C,{value:"CUP",children:"CUP"}),r.jsx(C,{value:"CVE",children:"CVE"}),r.jsx(C,{value:"CZK",children:"CZK"}),r.jsx(C,{value:"DJF",children:"DJF"}),r.jsx(C,{value:"DKK",children:"DKK"}),r.jsx(C,{value:"DOP",children:"DOP"}),r.jsx(C,{value:"DZD",children:"DZD"}),r.jsx(C,{value:"EGP",children:"EGP"}),r.jsx(C,{value:"ERN",children:"ERN"}),r.jsx(C,{value:"ETB",children:"ETB"}),r.jsx(C,{value:"FJD",children:"FJD"}),r.jsx(C,{value:"FKP",children:"FKP"}),r.jsx(C,{value:"GBP",children:"GBP"}),r.jsx(C,{value:"GEL",children:"GEL"}),r.jsx(C,{value:"GGP",children:"GGP"}),r.jsx(C,{value:"GHS",children:"GHS"}),r.jsx(C,{value:"GIP",children:"GIP"}),r.jsx(C,{value:"GMD",children:"GMD"}),r.jsx(C,{value:"GNF",children:"GNF"}),r.jsx(C,{value:"GTQ",children:"GTQ"}),r.jsx(C,{value:"GYD",children:"GYD"}),r.jsx(C,{value:"HKD",children:"HKD"}),r.jsx(C,{value:"HNL",children:"HNL"}),r.jsx(C,{value:"HRK",children:"HRK"}),r.jsx(C,{value:"HTG",children:"HTG"}),r.jsx(C,{value:"HUF",children:"HUF"}),r.jsx(C,{value:"IDR",children:"IDR"}),r.jsx(C,{value:"ILS",children:"ILS"}),r.jsx(C,{value:"IMP",children:"IMP"}),r.jsx(C,{value:"INR",children:"INR"}),r.jsx(C,{value:"IQD",children:"IQD"}),r.jsx(C,{value:"IRR",children:"IRR"}),r.jsx(C,{value:"ISK",children:"ISK"}),r.jsx(C,{value:"JEP",children:"JEP"}),r.jsx(C,{value:"JMD",children:"JMD"}),r.jsx(C,{value:"JOD",children:"JOD"}),r.jsx(C,{value:"JPY",children:"JPY"}),r.jsx(C,{value:"KES",children:"KES"}),r.jsx(C,{value:"KGS",children:"KGS"}),r.jsx(C,{value:"KHR",children:"KHR"}),r.jsx(C,{value:"KMF",children:"KMF"}),r.jsx(C,{value:"KPW",children:"KPW"}),r.jsx(C,{value:"KRW",children:"KRW"}),r.jsx(C,{value:"KWD",children:"KWD"}),r.jsx(C,{value:"KYD",children:"KYD"}),r.jsx(C,{value:"KZT",children:"KZT"}),r.jsx(C,{value:"LAK",children:"LAK"}),r.jsx(C,{value:"LBP",children:"LBP"}),r.jsx(C,{value:"LKR",children:"LKR"}),r.jsx(C,{value:"LRD",children:"LRD"}),r.jsx(C,{value:"LSL",children:"LSL"}),r.jsx(C,{value:"LYD",children:"LYD"}),r.jsx(C,{value:"MAD",children:"MAD"}),r.jsx(C,{value:"MDL",children:"MDL"}),r.jsx(C,{value:"MGA",children:"MGA"}),r.jsx(C,{value:"MKD",children:"MKD"}),r.jsx(C,{value:"MMK",children:"MMK"}),r.jsx(C,{value:"MNT",children:"MNT"}),r.jsx(C,{value:"MOP",children:"MOP"}),r.jsx(C,{value:"MRU",children:"MRU"}),r.jsx(C,{value:"MUR",children:"MUR"}),r.jsx(C,{value:"MVR",children:"MVR"}),r.jsx(C,{value:"MWK",children:"MWK"}),r.jsx(C,{value:"MXN",children:"MXN"}),r.jsx(C,{value:"MYR",children:"MYR"}),r.jsx(C,{value:"MZN",children:"MZN"}),r.jsx(C,{value:"NAD",children:"NAD"}),r.jsx(C,{value:"NGN",children:"NGN"}),r.jsx(C,{value:"NIO",children:"NIO"}),r.jsx(C,{value:"NOK",children:"NOK"}),r.jsx(C,{value:"NPR",children:"NPR"}),r.jsx(C,{value:"NZD",children:"NZD"}),r.jsx(C,{value:"OMR",children:"OMR"}),r.jsx(C,{value:"PAB",children:"PAB"}),r.jsx(C,{value:"PEN",children:"PEN"}),r.jsx(C,{value:"PGK",children:"PGK"}),r.jsx(C,{value:"PHP",children:"PHP"}),r.jsx(C,{value:"PKR",children:"PKR"}),r.jsx(C,{value:"PLN",children:"PLN"}),r.jsx(C,{value:"PYG",children:"PYG"}),r.jsx(C,{value:"QAR",children:"QAR"}),r.jsx(C,{value:"RON",children:"RON"}),r.jsx(C,{value:"RSD",children:"RSD"}),r.jsx(C,{value:"RWF",children:"RWF"}),r.jsx(C,{value:"SAR",children:"SAR"}),r.jsx(C,{value:"SBD",children:"SBD"}),r.jsx(C,{value:"SCR",children:"SCR"}),r.jsx(C,{value:"SDG",children:"SDG"}),r.jsx(C,{value:"SEK",children:"SEK"}),r.jsx(C,{value:"SGD",children:"SGD"}),r.jsx(C,{value:"SHP",children:"SHP"}),r.jsx(C,{value:"SLE",children:"SLE"}),r.jsx(C,{value:"SOS",children:"SOS"}),r.jsx(C,{value:"SRD",children:"SRD"}),r.jsx(C,{value:"STN",children:"STN"}),r.jsx(C,{value:"SYP",children:"SYP"}),r.jsx(C,{value:"SZL",children:"SZL"}),r.jsx(C,{value:"THB",children:"THB"}),r.jsx(C,{value:"TJS",children:"TJS"}),r.jsx(C,{value:"TMT",children:"TMT"}),r.jsx(C,{value:"TND",children:"TND"}),r.jsx(C,{value:"TOP",children:"TOP"}),r.jsx(C,{value:"TRY",children:"TRY"}),r.jsx(C,{value:"TTD",children:"TTD"}),r.jsx(C,{value:"TVD",children:"TVD"}),r.jsx(C,{value:"TWD",children:"TWD"}),r.jsx(C,{value:"TZS",children:"TZS"}),r.jsx(C,{value:"UAH",children:"UAH"}),r.jsx(C,{value:"UGX",children:"UGX"}),r.jsx(C,{value:"UYU",children:"UYU"}),r.jsx(C,{value:"UZS",children:"UZS"}),r.jsx(C,{value:"VED",children:"VED"}),r.jsx(C,{value:"VES",children:"VES"}),r.jsx(C,{value:"VND",children:"VND"}),r.jsx(C,{value:"VUV",children:"VUV"}),r.jsx(C,{value:"WST",children:"WST"}),r.jsx(C,{value:"XAF",children:"XAF"}),r.jsx(C,{value:"XCD",children:"XCD"}),r.jsx(C,{value:"XDR",children:"XDR"}),r.jsx(C,{value:"XOF",children:"XOF"}),r.jsx(C,{value:"XPF",children:"XPF"}),r.jsx(C,{value:"YER",children:"YER"}),r.jsx(C,{value:"ZAR",children:"ZAR"}),r.jsx(C,{value:"ZMW",children:"ZMW"}),r.jsx(C,{value:"ZWL",children:"ZWL"})]})]})]})]})}),r.jsx("div",{className:"col-span-1 flex justify-center",children:r.jsx("input",{type:"checkbox",checked:b.isDefault,onChange:N=>w(b.id,"isDefault",N.target.checked),className:"rounded",title:"По умолчанию"})}),r.jsx("div",{className:"col-span-1 flex justify-center",children:a.landingPages.length>1&&r.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>x(b.id),title:"Удалить лендинг",className:"h-8 w-8 p-0",children:r.jsx(wr,{className:"h-3 w-3"})})})]},b.id)),r.jsxs(D,{type:"button",onClick:g,variant:"outline",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить лендинг"]})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Целевые ссылки оффера, куда будут направляться пользователи"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"dailyLimit",children:"Дневной лимит"}),r.jsx(ne,{id:"dailyLimit",type:"number",value:a.dailyLimit,onChange:b=>i(p=>({...p,dailyLimit:Number(b.target.value)})),placeholder:"0 - без ограничений","data-testid":"input-daily-limit"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"monthlyLimit",children:"Месячный лимит"}),r.jsx(ne,{id:"monthlyLimit",type:"number",value:a.monthlyLimit,onChange:b=>i(p=>({...p,monthlyLimit:Number(b.target.value)})),placeholder:"0 - без ограничений","data-testid":"input-monthly-limit"})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"postbackUrl",children:"Postback URL"}),r.jsx(ne,{id:"postbackUrl",value:a.postbackUrl,onChange:b=>i(p=>({...p,postbackUrl:b.target.value})),placeholder:"https://example.com/postback","data-testid":"input-postback-url"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"URL для получения уведомлений о конверсиях"})]})]}),r.jsx(wn,{})]})]})}),r.jsx(He,{value:"antifraud",className:"space-y-6",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Антифрод защита"})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"antifraudEnabled",checked:a.antifraudEnabled,onChange:b=>i(p=>({...p,antifraudEnabled:b.target.checked})),className:"rounded"}),r.jsx(F,{htmlFor:"antifraudEnabled",className:"font-medium",children:"Включить антифрод защиту"})]}),a.antifraudEnabled&&r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border",children:[r.jsx(F,{className:"text-base font-medium mb-3 block",children:"Методы антифрод защиты"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Выберите методы защиты от мошеннического трафика"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:MF.map(b=>{var p;return r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("input",{type:"checkbox",id:`antifraud-${b.value}`,checked:((p=a.antifraudMethods)==null?void 0:p.includes(b.value))||!1,onChange:()=>{const N=a.antifraudMethods||[],k=N.includes(b.value)?N.filter(S=>S!==b.value):[...N,b.value];i(S=>({...S,antifraudMethods:k}))},className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 mt-1","data-testid":`checkbox-antifraud-${b.value}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx(F,{htmlFor:`antifraud-${b.value}`,className:"text-sm font-medium cursor-pointer hover:text-blue-600 transition-colors",children:b.label}),b.description&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b.description})]})]},b.value)})}),((y=a.antifraudMethods)==null?void 0:y.length)>0&&r.jsx("div",{className:"mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:r.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:["Активные методы защиты: ",a.antifraudMethods.length," из ",MF.length]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"partnerApprovalType",className:"font-medium",children:"Тип подтверждения партнеров"}),r.jsxs(fe,{value:a.partnerApprovalType,onValueChange:b=>i(p=>({...p,partnerApprovalType:b})),children:[r.jsx(ue,{"data-testid":"select-partner-approval",className:"mt-2",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"auto",children:"Автоматическое одобрение"}),r.jsx(C,{value:"manual",children:"Ручное одобрение"}),r.jsx(C,{value:"by_request",children:"По запросу партнера"}),r.jsx(C,{value:"whitelist_only",children:"Только из белого списка"})]})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Выберите, как партнеры получают доступ к офферу"})]}),r.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[r.jsx("input",{type:"checkbox",id:"kycRequired",checked:a.kycRequired,onChange:b=>i(p=>({...p,kycRequired:b.target.checked})),className:"rounded","data-testid":"checkbox-kyc-required"}),r.jsx(F,{htmlFor:"kycRequired",children:"Требуется верификация KYC"})]})]}),r.jsxs("div",{className:"pt-4 border-t bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsx(F,{htmlFor:"status",className:"text-lg font-semibold text-blue-800 dark:text-blue-300",children:"Статус оффера"}),r.jsxs(fe,{value:a.status,onValueChange:b=>i(p=>({...p,status:b})),children:[r.jsx(ue,{"data-testid":"select-status",className:"mt-2 border-blue-300 dark:border-blue-700 focus:border-blue-500 dark:focus:border-blue-400",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"draft",children:"Черновик"}),r.jsx(C,{value:"active",children:"Активный"}),r.jsx(C,{value:"paused",children:"Приостановлен"}),r.jsx(C,{value:"on_request",children:"По запросу"})]})]})]})]})]})})]}),r.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[r.jsx(D,{type:"button",variant:"outline",onClick:()=>i(RF),children:"Сбросить"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(D,{type:"button",variant:"outline",onClick:()=>{i(b=>({...b,status:"draft"})),setTimeout(()=>f.mutate(a),0)},disabled:f.isPending,children:[r.jsx(_l,{className:"h-4 w-4 mr-2"}),"Сохранить как черновик"]}),r.jsx(D,{type:"button",onClick:()=>{console.log("🎯 Creating offer with active status...");const b={...a,status:"active"};console.log("📊 Form data:",b),f.mutate(b)},disabled:f.isPending,children:f.isPending?"Создание...":"Создать оффер"})]})]})]})]})})}function cVe(e){return{gambling:{label:"Гемблинг",className:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},dating:{label:"Знакомства",className:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300"},finance:{label:"Финансы",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},crypto:{label:"Крипто",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"},nutra:{label:"Нутра",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},software:{label:"ПО",className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}}[e]||{label:e,className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}}function dVe(){const e=Mv(),[,t]=Bn(),{toast:n}=at(),s=Et(),a=e.id,i={id:a||"1",name:"1Win Казино - Premium",description:"Топовое онлайн казино с высокой конверсией. Лицензированная платформа с широким выбором игр, слотов и живых дилеров. Привлекательные бонусы и мгновенные выплаты.",logo:"https://via.placeholder.com/80x80/9333ea/ffffff?text=1W",category:"gambling",payout:"150",payoutType:"cpa",currency:"USD",status:"active",countries:["RU","KZ","BY","UA"],creatives:"/creatives/1win-casino-pack.zip",creativesUrl:"https://storage.googleapis.com/replit-objstore-test/creatives/1win-casino-pack.zip",landingPages:[{id:"1",name:"Главная страница",url:"https://1win-casino.com/main",type:"main",isDefault:!0},{id:"2",name:"Страница регистрации",url:"https://1win-casino.com/register",type:"registration",isDefault:!1},{id:"3",name:"Промо-страница",url:"https://1win-casino.com/promo-bonus",type:"promo",isDefault:!1}],kpiConditions:{minDeposit:50,minAge:18,countries:["RU","KZ","BY","UA"],allowedTrafficTypes:["contextual","social","email"]},restrictions:{forbidden_sources:["adult","fraud","incentive"],allowed_sources:["google","facebook","telegram","email"],geo_restrictions:[]},trackingLink:`https://track.partner.com/${a}/{{subid}}`,createdAt:"2024-01-15T10:30:00Z",advertiserInfo:{name:"1Win Gaming",company:"1Win Entertainment Ltd"},stats:{totalPartners:245,activePartners:89,pendingRequests:12,totalClicks:15420,conversions:892,revenue:133800}},l=(u,h)=>{navigator.clipboard.writeText(u),n({title:"Скопировано",description:`${h} скопировано в буфер обмена`})},o=async u=>{try{const h=localStorage.getItem("token"),f=await fetch(`/api/partner/offers/${a}/creatives/download`,{method:"GET",headers:{Authorization:`Bearer ${h}`}});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const m=await f.blob(),g=window.URL.createObjectURL(m),x=document.createElement("a");x.href=g,x.download=`creatives-${a}.zip`,document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(g),n({title:"Скачивание началось",description:"ZIP архив с креативами успешно скачивается"})}catch{n({title:"Ошибка скачивания",description:"Не удалось скачать креативы",variant:"destructive"})}},c=Oe({mutationFn:async u=>{const h=localStorage.getItem("token"),f=await fetch(`/api/offers/${a}/creatives`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({creativeUrl:u})});if(!f.ok)throw new Error("Failed to update creatives");return f.json()},onSuccess:()=>{n({title:"Креативы обновлены",description:"ZIP архив с креативами успешно загружен"}),s.invalidateQueries({queryKey:["/api/advertiser/offers"]})},onError:u=>{n({title:"Ошибка загрузки",description:"Не удалось загрузить креативы",variant:"destructive"})}}),d=cVe(i.category);return r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>t("/advertiser/offers"),className:"flex items-center gap-2",children:[r.jsx(vc,{className:"w-4 h-4"}),"Назад к офферам"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Детали оффера"})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("img",{src:i.logo,alt:i.name,className:"w-16 h-16 rounded-lg object-cover"}),r.jsxs("div",{children:[r.jsx(se,{className:"text-xl mb-2",children:i.name}),r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ie,{className:d.className,children:d.label}),r.jsx(ie,{variant:"default",children:"Активен"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[i.payout," ",i.currency]}),r.jsx("div",{className:"text-sm text-muted-foreground uppercase",children:i.payoutType})]})]})}),r.jsx(W,{children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg dark:bg-green-900/20",children:[r.jsx(Rt,{className:"w-5 h-5 text-green-600"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-green-600",children:["$",i.stats.revenue.toLocaleString()]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Доход"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg dark:bg-blue-900/20",children:[r.jsx(mr,{className:"w-5 h-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-blue-600",children:i.stats.activePartners}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Активных партнеров"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-50 rounded-lg dark:bg-purple-900/20",children:[r.jsx(Gt,{className:"w-5 h-5 text-purple-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-purple-600",children:i.stats.conversions}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Конверсии"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-orange-50 rounded-lg dark:bg-orange-900/20",children:[r.jsx(Xn,{className:"w-5 h-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-orange-600",children:new Date(i.createdAt).toLocaleDateString("ru-RU")}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Дата создания"})]})]})]})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(es,{className:"w-5 h-5"}),"Управление креативами"]})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50 dark:bg-gray-900/50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:r.jsx(es,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Текущий архив креативов"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"ZIP архив с рекламными материалами"})]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(D,{variant:"outline",onClick:()=>o(),title:"Скачать текущие креативы",children:[r.jsx(br,{className:"w-4 h-4 mr-2"}),"Скачать"]})})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h5",{className:"font-medium mb-3",children:"Загрузить новые креативы"}),r.jsx(OY,{offerId:a,onComplete:u=>{c.mutate(u)}})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Gt,{className:"w-5 h-5"}),"Трекинговая ссылка"]})}),r.jsxs(W,{children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg dark:bg-gray-900/50",children:[r.jsx("code",{className:"flex-1 text-sm font-mono",children:i.trackingLink}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>l(i.trackingLink,"Трекинговая ссылка"),title:"Копировать ссылку",children:r.jsx(Yr,{className:"w-4 h-4"})})]}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Партнеры заменят ","{{",r.jsx("code",{children:"subid"}),"}"," на свой уникальный идентификатор трафика"]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Ff,{className:"w-5 h-5"}),"Доступные страны"]})}),r.jsx(W,{children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:i.countries.map(u=>r.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",title:Wc(u),children:[r.jsx("span",{className:"text-xl",children:Pl(u)}),r.jsx("span",{className:"font-medium text-sm",children:Wc(u)}),r.jsx(ie,{variant:"secondary",className:"ml-auto text-xs",children:u})]},u))})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx($f,{className:"w-5 h-5"}),"Лендинг страницы"]})}),r.jsx(W,{children:r.jsx("div",{className:"space-y-3",children:i.landingPages.map(u=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:"font-medium",children:u.name}),u.isDefault&&r.jsx(ie,{variant:"secondary",className:"text-xs",children:"По умолчанию"}),r.jsx(ie,{variant:"outline",className:"text-xs",children:u.type})]}),r.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:u.url})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>l(u.url,u.name),title:"Копировать URL",children:r.jsx(Yr,{className:"w-4 h-4"})}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>window.open(u.url,"_blank"),title:"Открыть в новой вкладке",children:r.jsx($f,{className:"w-4 h-4"})})]})]},u.id))})})]})]})}const uVe=()=>{const[e,t]=Bn(),{toast:n}=at(),s=Et(),i=Mv().id,{data:l,isLoading:o}=Fe({queryKey:["/api/advertiser/offers",i],queryFn:()=>Re(`/api/advertiser/offers/${i}`),enabled:!!i}),[c,d]=v.useState({name:"",description:{ru:"",en:""},category:"",payout:"",currency:"USD",payoutType:"CPA",countries:[],trafficSources:[],allowedApplications:[],antifraudEnabled:!1,antifraudMethods:[],partnerApprovalType:"automatic",kycRequired:!1,isPrivate:!1,dailyLimit:"",monthlyLimit:"",landingPages:[{name:"Default Landing",url:"",isDefault:!0}]});v.useEffect(()=>{var m,g;l&&d({name:l.name||"",description:l.description||{ru:"",en:""},category:l.category||"",payout:l.payout||"",currency:l.currency||"USD",payoutType:l.payoutType||"CPA",countries:l.countries||[],trafficSources:l.trafficSources||[],allowedApplications:l.allowedApplications||[],antifraudEnabled:l.antifraudEnabled||!1,antifraudMethods:l.antifraudMethods||[],partnerApprovalType:l.partnerApprovalType||"automatic",kycRequired:l.kycRequired||!1,isPrivate:l.isPrivate||!1,dailyLimit:((m=l.dailyLimit)==null?void 0:m.toString())||"",monthlyLimit:((g=l.monthlyLimit)==null?void 0:g.toString())||"",landingPages:l.landingPages||[{name:"Default Landing",url:"",isDefault:!0}]})},[l]);const u=Oe({mutationFn:async m=>Re(`/api/advertiser/offers/${i}`,{method:"PATCH",body:m}),onSuccess:()=>{n({title:"Оффер обновлен",description:"Изменения успешно сохранены"}),s.invalidateQueries({queryKey:["/api/advertiser/offers"]}),t("/advertiser/offers")},onError:m=>{n({title:"Ошибка",description:m.message||"Не удалось обновить оффер",variant:"destructive"})}}),h=m=>{m.preventDefault();const g={...c,dailyLimit:c.dailyLimit?parseInt(c.dailyLimit):null,monthlyLimit:c.monthlyLimit?parseInt(c.monthlyLimit):null};u.mutate(g)},f=(m,g)=>{d(x=>({...x,[m]:g}))};return o?r.jsx("div",{className:"w-full space-y-6",children:r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):l?r.jsxs("div",{className:"w-full space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>t("/advertiser/offers"),children:[r.jsx(vc,{className:"h-4 w-4 mr-2"}),"Назад к офферам"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Редактирование оффера"}),r.jsx("p",{className:"text-muted-foreground",children:l.name})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(D,{variant:"outline",onClick:()=>t("/advertiser/offers"),children:[r.jsx(Fn,{className:"h-4 w-4 mr-2"}),"Отмена"]}),r.jsxs(D,{onClick:h,disabled:u.isPending,children:[r.jsx(_l,{className:"h-4 w-4 mr-2"}),u.isPending?"Сохранение...":"Сохранить"]})]})]}),r.jsxs("form",{onSubmit:h,className:"space-y-6",children:[r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Основная информация"})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"name",children:"Название оффера"}),r.jsx(ne,{id:"name",value:c.name,onChange:m=>f("name",m.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"category",children:"Категория"}),r.jsxs(fe,{value:c.category,onValueChange:m=>f("category",m),children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите категорию"})}),r.jsxs(he,{children:[r.jsx(C,{value:"gambling",children:"Гемблинг"}),r.jsx(C,{value:"betting",children:"Ставки"}),r.jsx(C,{value:"finance",children:"Финансы"}),r.jsx(C,{value:"crypto",children:"Криптовалюта"}),r.jsx(C,{value:"dating",children:"Знакомства"}),r.jsx(C,{value:"nutra",children:"Нутра"}),r.jsx(C,{value:"games",children:"Игры"}),r.jsx(C,{value:"apps",children:"Приложения"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"description-ru",children:"Описание (русский)"}),r.jsx(gt,{id:"description-ru",value:c.description.ru,onChange:m=>f("description",{...c.description,ru:m.target.value}),rows:3})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"description-en",children:"Описание (английский)"}),r.jsx(gt,{id:"description-en",value:c.description.en,onChange:m=>f("description",{...c.description,en:m.target.value}),rows:3})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Выплаты и лимиты"})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"payout",children:"Payout"}),r.jsx(ne,{id:"payout",value:c.payout,onChange:m=>f("payout",m.target.value),placeholder:"100"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"currency",children:"Валюта"}),r.jsxs(fe,{value:c.currency,onValueChange:m=>f("currency",m),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"USD",children:"USD"}),r.jsx(C,{value:"EUR",children:"EUR"}),r.jsx(C,{value:"RUB",children:"RUB"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"payoutType",children:"Тип выплаты"}),r.jsxs(fe,{value:c.payoutType,onValueChange:m=>f("payoutType",m),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"CPA",children:"CPA"}),r.jsx(C,{value:"CPL",children:"CPL"}),r.jsx(C,{value:"CPC",children:"CPC"}),r.jsx(C,{value:"CPM",children:"CPM"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"dailyLimit",children:"Дневной лимит"}),r.jsx(ne,{id:"dailyLimit",type:"number",value:c.dailyLimit,onChange:m=>f("dailyLimit",m.target.value),placeholder:"Не ограничен"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"monthlyLimit",children:"Месячный лимит"}),r.jsx(ne,{id:"monthlyLimit",type:"number",value:c.monthlyLimit,onChange:m=>f("monthlyLimit",m.target.value),placeholder:"Не ограничен"})]})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Настройки доступа"})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(dn,{id:"antifraudEnabled",checked:c.antifraudEnabled,onCheckedChange:m=>f("antifraudEnabled",m)}),r.jsx(F,{htmlFor:"antifraudEnabled",children:"Включить антифрод"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(dn,{id:"kycRequired",checked:c.kycRequired,onCheckedChange:m=>f("kycRequired",m)}),r.jsx(F,{htmlFor:"kycRequired",children:"Требуется KYC"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(dn,{id:"isPrivate",checked:c.isPrivate,onCheckedChange:m=>f("isPrivate",m)}),r.jsx(F,{htmlFor:"isPrivate",children:"Приватный оффер"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"partnerApprovalType",children:"Тип одобрения партнеров"}),r.jsxs(fe,{value:c.partnerApprovalType,onValueChange:m=>f("partnerApprovalType",m),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"automatic",children:"Автоматическое"}),r.jsx(C,{value:"manual",children:"Ручное"}),r.jsx(C,{value:"on_request",children:"По запросу"}),r.jsx(C,{value:"whitelist_only",children:"Только whitelist"})]})]})]})]})]})]})]}):r.jsxs("div",{className:"w-full text-center py-8",children:[r.jsx("p",{className:"text-gray-600",children:"Оффер не найден"}),r.jsx(D,{onClick:()=>t("/advertiser/offers"),className:"mt-4",children:"Вернуться к офферам"})]})},hVe=({id:e,children:t})=>{const{attributes:n,listeners:s,setNodeRef:a,transform:i,transition:l}=JK({id:e}),o={transform:Nm.Transform.toString(i),transition:l};return r.jsx(De,{ref:a,style:o,...n,...s,className:"cursor-grab active:cursor-grabbing",children:t})},fVe=()=>{const{toast:e}=at(),[t,n]=v.useState([]),[s,a]=v.useState(null),[i,l]=v.useState("all"),[o,c]=v.useState("all-categories"),[d,u]=v.useState(""),[h,f]=v.useState([]),m=Et(),{data:g=[],isLoading:x}=Fe({queryKey:["/api/advertiser/offers"],retry:!1});v.useEffect(()=>{g&&g.length>0&&f(g.map(M=>M.id))},[g]);const w=Oe({mutationFn:M=>Re("/api/advertiser/offers","POST",M),onSuccess:()=>{e({title:"Успех",description:"Оффер добавлен"}),m.invalidateQueries({queryKey:["/api/advertiser/offers"]})},onError:M=>{e({title:"Ошибка",description:"Ошибка создания оффера: "+M.message,variant:"destructive"})}}),j=Oe({mutationFn:M=>Re(`/api/advertiser/offers/${M.id}`,"PUT",M),onSuccess:()=>{e({title:"Успех",description:"Оффер обновлён"}),m.invalidateQueries({queryKey:["/api/advertiser/offers"]})},onError:M=>{e({title:"Ошибка",description:"Ошибка обновления оффера: "+M.message,variant:"destructive"})}}),y=Oe({mutationFn:M=>Re(`/api/advertiser/offers/${M}`,"DELETE"),onSuccess:()=>{e({title:"Успех",description:"Оффер удален"}),m.invalidateQueries({queryKey:["/api/advertiser/offers"]})},onError:M=>{e({title:"Ошибка",description:"Ошибка удаления оффера: "+M.message,variant:"destructive"})}}),b=zFe(i3(pE),i3(fE,{coordinateGetter:c6e})),p=M=>{const{active:A,over:T}=M;if(A.id!==T.id){const B=h.indexOf(A.id),z=h.indexOf(T.id),U=vN(h,B,z);f(U),e({title:"Информация",description:"Порядок офферов изменён"})}},N=M=>{var B;const A=(B=M.target.files)==null?void 0:B[0];if(!A)return;const T=new FileReader;T.onload=async z=>{var G;const E=((G=z.target)==null?void 0:G.result).split(`
`).filter(oe=>oe.trim());let $=0;for(const oe of E){const[ee,ce,ye,je,$e,ke]=oe.split(";");if(ee!=null&&ee.trim())try{await w.mutateAsync({name:ee.trim(),countries:(ce==null?void 0:ce.split(",").map(be=>be.trim()))||[],payout:(ye==null?void 0:ye.trim())||"0",category:(je==null?void 0:je.trim())||"",cap:($e==null?void 0:$e.trim())||"",status:(ke==null?void 0:ke.trim())||"active",hold:"",abtestLinks:[],partners:[]}),$++}catch{}}e({title:"Успех",description:`Импорт завершён. Добавлено: ${$} офферов`})},T.readAsText(A)},k=()=>{const M=g.map(z=>[z.name||"",(z.countries||[]).join(","),z.payout||"",z.category||"",z.cap||"",z.status||""].join(";")).join(`
`),A=new Blob([M],{type:"text/csv"}),T=URL.createObjectURL(A),B=document.createElement("a");B.href=T,B.download="offers.csv",document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(T),e({title:"Успех",description:"Экспорт завершён"})},S=M=>{if(t.length===0){e({title:"Ошибка",description:"Выберите офферы для изменения статуса",variant:"destructive"});return}const A=t.map(T=>{const B=g.find(z=>z.id===T);return B?j.mutateAsync({...B,status:M}):Promise.resolve()});Promise.all(A).then(()=>{e({title:"Успех",description:`Статус изменён для ${t.length} офферов`}),n([])})},P=()=>{if(t.length===0){e({title:"Ошибка",description:"Выберите офферы для удаления",variant:"destructive"});return}if(!confirm(`Удалить ${t.length} офферов? Это действие нельзя отменить.`))return;const M=t.map(A=>y.mutateAsync(A));Promise.all(M).then(()=>{e({title:"Успех",description:`Удалено ${t.length} офферов`}),n([])})},_=(M,A)=>M!=null&&M.length?r.jsxs("div",{className:"flex flex-col gap-1",children:[M.slice(0,2).map((T,B)=>r.jsxs("a",{href:T,target:"_blank",rel:"noreferrer",className:"text-blue-600 dark:text-blue-400 underline text-xs hover:text-blue-800 dark:hover:text-blue-300",children:["Лендинг ",B+1]},`abtest-${A.id}-${B}`)),M.length>2&&r.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",M.length-2," еще"]}),r.jsxs(D,{size:"sm",variant:"ghost",className:"text-xs h-6 px-2 mt-1 text-blue-500 hover:text-blue-700",onClick:()=>a(A),"data-testid":`button-edit-landings-${A.id}`,children:[r.jsx(lne,{className:"w-3 h-3 mr-1"}),"Редактировать"]})]}):r.jsx("span",{className:"text-muted-foreground",children:"—"}),R=M=>{e({title:"Информация",description:`Открываю дашборд для оффера: ${M}`})},O=g.filter(M=>{var z,U,E;const A=i==="all"||M.status===i,T=o==="all-categories"||!o||((z=M.category)==null?void 0:z.includes(o)),B=!d||((U=M.name)==null?void 0:U.toLowerCase().includes(d.toLowerCase()))||((E=M.category)==null?void 0:E.toLowerCase().includes(d.toLowerCase()));return A&&T&&B});return x?r.jsx("div",{className:"p-4",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Загрузка офферов..."})]})})}):r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs(q,{children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:"Всего офферов"})}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:g.length}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Активных: ",g.filter(M=>M.status==="active").length]})]})]}),r.jsxs(q,{children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:"Среднее CR"})}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[g.length>0?(g.reduce((M,A)=>M+parseFloat(A.cr||"0"),0)/g.length).toFixed(2):"0.00","%"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Конверсия"})]})]}),r.jsxs(q,{children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:"Общий доход"})}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["$",g.reduce((M,A)=>M+(A.revenue||0),0).toLocaleString()]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"За весь период"})]})]}),r.jsxs(q,{children:[r.jsx(re,{className:"pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:"Партнёров"})}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:g.reduce((M,A)=>M+(A.partnersCount||0),0)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Всего подключений"})]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between p-4 bg-card border rounded-lg",children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(ne,{placeholder:"Поиск офферов...",value:d,onChange:M=>u(M.target.value),className:"pl-10 w-64","data-testid":"input-search-offers"})]}),r.jsxs(fe,{value:i,onValueChange:l,children:[r.jsxs(ue,{className:"w-40",children:[r.jsx(As,{className:"h-4 w-4 mr-2"}),r.jsx(me,{placeholder:"Статус"})]}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все"}),r.jsx(C,{value:"active",children:"Активные"}),r.jsx(C,{value:"paused",children:"На паузе"}),r.jsx(C,{value:"archived",children:"Архив"})]})]}),r.jsxs(fe,{value:o,onValueChange:c,children:[r.jsx(ue,{className:"w-40",children:r.jsx(me,{placeholder:"Категория"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all-categories",children:"Все"}),r.jsx(C,{value:"gambling",children:"Gambling"}),r.jsx(C,{value:"dating",children:"Dating"}),r.jsx(C,{value:"finance",children:"Finance"}),r.jsx(C,{value:"crypto",children:"Crypto"}),r.jsx(C,{value:"nutra",children:"Nutra"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(D,{size:"sm",variant:"outline",onClick:k,"data-testid":"button-export-csv",children:[r.jsx(Hre,{className:"h-4 w-4 mr-2"}),"Экспорт"]}),r.jsxs("div",{className:"relative",children:[r.jsx(ne,{type:"file",accept:".csv",onChange:N,className:"hidden",id:"csv-import"}),r.jsxs(D,{size:"sm",variant:"outline",onClick:()=>{var M;return(M=document.getElementById("csv-import"))==null?void 0:M.click()},"data-testid":"button-import-csv",children:[r.jsx(Ba,{className:"h-4 w-4 mr-2"}),"Импорт CSV"]})]})]})]}),t.length>0&&r.jsxs("div",{className:"flex gap-2 items-center p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[r.jsxs("span",{className:"text-sm font-medium",children:["Выбрано: ",t.length]}),r.jsx(D,{size:"sm",onClick:()=>S("active"),"data-testid":"button-bulk-activate",children:"Активировать"}),r.jsx(D,{size:"sm",onClick:()=>S("paused"),"data-testid":"button-bulk-pause",children:"Приостановить"}),r.jsx(D,{size:"sm",onClick:()=>S("archived"),"data-testid":"button-bulk-archive",children:"Архивировать"}),r.jsx(D,{size:"sm",onClick:P,variant:"destructive","data-testid":"button-bulk-delete",children:"Удалить"}),r.jsx(D,{size:"sm",variant:"outline",onClick:()=>n([]),"data-testid":"button-clear-selection",children:"Отменить"})]}),r.jsx(HK,{sensors:b,collisionDetection:qFe,onDragEnd:p,children:r.jsx(ZK,{items:h,strategy:GK,children:r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{className:"w-12",children:r.jsx("input",{type:"checkbox",className:"rounded",checked:t.length===O.length&&O.length>0,onChange:M=>{M.target.checked?n(O.map(A=>A.id)):n([])},"data-testid":"checkbox-select-all"})}),r.jsx(Z,{className:"w-8"}),r.jsx(Z,{children:"Оффер"}),r.jsx(Z,{children:"GEO"}),r.jsx(Z,{children:"Payout"}),r.jsx(Z,{children:"CAP"}),r.jsx(Z,{children:"CR"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"A/B Лендинги"}),r.jsx(Z,{className:"text-right",children:"Действия"})]})}),r.jsx(It,{children:h.map(M=>{const A=O.find(T=>T.id===M);return A?r.jsxs(hVe,{id:M,children:[r.jsx(H,{children:r.jsx("input",{type:"checkbox",className:"rounded",checked:t.includes(A.id),onChange:T=>{T.target.checked?n([...t,A.id]):n(t.filter(B=>B!==A.id))},"data-testid":`checkbox-select-${A.id}`})}),r.jsx(H,{children:r.jsx(qw,{className:"h-4 w-4 text-muted-foreground cursor-grab"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[A.logo&&r.jsx("img",{src:A.logo,alt:A.name,className:"w-8 h-8 rounded object-cover"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:A.name}),r.jsx("div",{className:"text-sm",children:r.jsx(ie,{...tG(A.category),children:A.category})})]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[Qk(A.countries).slice(0,3).map((T,B)=>r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-lg",title:T.name,children:T.flag}),r.jsx("span",{className:"text-xs font-mono bg-muted px-1 py-0.5 rounded",children:T.code})]},`${A.id}-country-${B}`)),Qk(A.countries).length>3&&r.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",Qk(A.countries).length-3]})]})}),r.jsx(H,{children:r.jsxs("div",{className:"font-semibold text-green-600 dark:text-green-400",children:["$",A.payout]})}),r.jsx(H,{children:r.jsx("span",{className:"text-sm text-muted-foreground",children:A.cap||"—"})}),r.jsx(H,{children:r.jsxs(ie,{variant:parseFloat(V0(A.cr))>5?"default":"secondary",className:parseFloat(V0(A.cr))>5?"bg-green-100 text-green-800":"",children:[V0(A.cr),"%"]})}),r.jsx(H,{children:r.jsx(ie,{variant:A.status==="active"?"default":A.status==="paused"?"secondary":A.status==="archived"?"destructive":A.status==="draft"?"outline":"default",className:A.status==="active"?"bg-green-500 hover:bg-green-600 text-white":A.status==="paused"?"bg-yellow-500 hover:bg-yellow-600 text-white":A.status==="archived"?"bg-red-500 hover:bg-red-600 text-white":A.status==="draft"?"bg-gray-500 hover:bg-gray-600 text-white border-gray-600":"bg-blue-500 hover:bg-blue-600 text-white",children:A.status==="active"?"Активный":A.status==="paused"?"Приостановлен":A.status==="archived"?"Архив":A.status==="draft"?"Черновик":A.status})}),r.jsx(H,{children:_(A.abtestLinks||[],A)}),r.jsx(H,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>a(A),"data-testid":`button-edit-${A.id}`,title:"Редактировать оффер",children:r.jsx(ine,{className:"w-4 h-4"})}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>R(A.id),"data-testid":`button-dashboard-${A.id}`,title:"Статистика оффера",children:r.jsx($re,{className:"w-4 h-4"})}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>y.mutate(A.id),"data-testid":`button-delete-${A.id}`,title:"Удалить оффер",children:r.jsx(wr,{className:"w-4 h-4 text-red-500"})})]})})]},`offer-${M}`):null})})]})})})}),O.length===0&&r.jsx(q,{children:r.jsx(W,{className:"p-6 text-center",children:r.jsx("div",{className:"text-muted-foreground",children:d||i!=="all"||o?r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"Офферы не найдены по заданным критериям."}),r.jsx(D,{variant:"outline",className:"mt-2",onClick:()=>{u(""),l("all"),c("")},children:"Сбросить фильтры"})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"У вас пока нет офферов."}),r.jsxs(D,{className:"mt-2",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Создать первый оффер"]})]})})})}),s&&r.jsx(EY,{offer:s,onClose:()=>a(null),onSave:M=>{j.mutate(M),a(null)}})]})},mVe=["gambling","finance","dating","health","entertainment","e-commerce","education","travel","games","crypto"],pVe=["russia","ukraine","belarus","kazakhstan","usa","canada","germany","france","uk","brazil","india","china"],xVe=["desktop","mobile","tablet","smart-tv","all"],gVe=["PropellerAds","RichAds","TacoLoco","AdCombo","Mobidea","CrakRevenue","ClickDealer","MaxBounty","Другой источник"];function vVe(){const{user:e}=tr(),{toast:t}=at(),[n,s]=v.useState(!1),[a,i]=v.useState([]),[l,o]=v.useState([]),[c,d]=v.useState(""),[u,h]=v.useState({name:"",category:"",payoutType:"cpa",supplierRate:"",partnerRate:"",targetUrl:"",postbackUrl:"",conditions:"",supplierSource:""}),{data:f=[],isLoading:m}=Fe({queryKey:["/api/advertiser/received-offers"],enabled:!!(e!=null&&e.id)}),g=Oe({mutationFn:async k=>Re("/api/advertiser/received-offers",{method:"POST",body:JSON.stringify({...k,geo:a,devices:l,advertiserId:e==null?void 0:e.id,status:"active"})}),onSuccess:()=>{no.invalidateQueries({queryKey:["/api/advertiser/received-offers"]}),t({title:"Успешно",description:"Полученный оффер добавлен и активирован"}),x(),s(!1)},onError:k=>{t({title:"Ошибка",description:k.message||"Не удалось создать оффер",variant:"destructive"})}}),x=()=>{h({name:"",category:"",payoutType:"cpa",supplierRate:"",partnerRate:"",targetUrl:"",postbackUrl:"",conditions:"",supplierSource:""}),i([]),o([]),d("")},w=k=>{if(k.preventDefault(),!u.name||!u.category||a.length===0||l.length===0||!u.supplierRate||!u.partnerRate||!u.targetUrl||!u.postbackUrl){t({title:"Ошибка валидации",description:"Заполните все обязательные поля",variant:"destructive"});return}const S=u.supplierSource==="Другой источник"?c:u.supplierSource;g.mutate({...u,supplierSource:S})},j=k=>{a.includes(k)||i([...a,k])},y=k=>{i(a.filter(S=>S!==k))},b=k=>{l.includes(k)||o([...l,k])},p=k=>{o(l.filter(S=>S!==k))},N=k=>{switch(k){case"cpa":return"bg-green-100 text-green-800 border-green-200";case"cpl":return"bg-blue-100 text-blue-800 border-blue-200";case"revshare":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return r.jsxs("div",{className:"space-y-6","data-testid":"received-offers-page",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Полученные офферы"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Управление офферами от поставщиков"})]}),r.jsxs(D,{onClick:()=>s(!0),"data-testid":"button-add-received-offer",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить оффер"]})]}),n&&r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(se,{children:"Добавление оффера от поставщика"}),r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>{s(!1),x()},children:r.jsx(Fn,{className:"h-4 w-4"})})]})}),r.jsx(W,{children:r.jsxs("form",{onSubmit:w,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"name",children:"Название оффера *"}),r.jsx(ne,{id:"name",value:u.name,onChange:k=>h({...u,name:k.target.value}),placeholder:"Введите название оффера","data-testid":"input-offer-name"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"category",children:"Категория *"}),r.jsxs(fe,{value:u.category,onValueChange:k=>h({...u,category:k}),children:[r.jsx(ue,{"data-testid":"select-category",children:r.jsx(me,{placeholder:"Выберите категорию"})}),r.jsx(he,{children:mVe.map(k=>r.jsx(C,{value:k,children:k},k))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"payoutType",children:"Тип выплаты *"}),r.jsxs(fe,{value:u.payoutType,onValueChange:k=>h({...u,payoutType:k}),children:[r.jsx(ue,{"data-testid":"select-payout-type",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"cpa",children:"CPA"}),r.jsx(C,{value:"cpl",children:"CPL"}),r.jsx(C,{value:"revshare",children:"RevShare"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"supplierSource",children:"Источник поставщика"}),r.jsxs(fe,{value:u.supplierSource,onValueChange:k=>h({...u,supplierSource:k}),children:[r.jsx(ue,{"data-testid":"select-supplier-source",children:r.jsx(me,{placeholder:"Выберите источник"})}),r.jsx(he,{children:gVe.map(k=>r.jsx(C,{value:k,children:k},k))})]}),u.supplierSource==="Другой источник"&&r.jsx(ne,{value:c,onChange:k=>d(k.target.value),placeholder:"Введите название источника",className:"mt-2","data-testid":"input-custom-supplier"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"supplierRate",children:"Ставка поставщика (расход) *"}),r.jsx(ne,{id:"supplierRate",type:"number",step:"0.01",value:u.supplierRate,onChange:k=>h({...u,supplierRate:k.target.value}),placeholder:"0.00","data-testid":"input-supplier-rate"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"partnerRate",children:"Ставка для партнёров (доход) *"}),r.jsx(ne,{id:"partnerRate",type:"number",step:"0.01",value:u.partnerRate,onChange:k=>h({...u,partnerRate:k.target.value}),placeholder:"0.00","data-testid":"input-partner-rate"})]}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx(F,{htmlFor:"targetUrl",children:"Целевая ссылка от поставщика *"}),r.jsx(ne,{id:"targetUrl",type:"url",value:u.targetUrl,onChange:k=>h({...u,targetUrl:k.target.value}),placeholder:"https://example.com/offer","data-testid":"input-target-url"})]}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx(F,{htmlFor:"postbackUrl",children:"Постбек поставщика (куда отправлять действия) *"}),r.jsx(ne,{id:"postbackUrl",type:"url",value:u.postbackUrl,onChange:k=>h({...u,postbackUrl:k.target.value}),placeholder:"https://example.com/postback","data-testid":"input-postback-url"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(F,{children:"GEO (геолокации) *"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:a.map(k=>r.jsxs(ie,{variant:"secondary",className:"flex items-center gap-1",children:[r.jsx(mr,{className:"h-3 w-3"}),k,r.jsx("button",{type:"button",onClick:()=>y(k),className:"ml-1 hover:text-red-500",children:r.jsx(Fn,{className:"h-3 w-3"})})]},k))}),r.jsxs(fe,{onValueChange:j,children:[r.jsx(ue,{"data-testid":"select-geo",children:r.jsx(me,{placeholder:"Добавить геолокацию"})}),r.jsx(he,{children:pVe.filter(k=>!a.includes(k)).map(k=>r.jsx(C,{value:k,children:k},k))})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(F,{children:"Устройства *"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:l.map(k=>r.jsxs(ie,{variant:"secondary",className:"flex items-center gap-1",children:[r.jsx($i,{className:"h-3 w-3"}),k,r.jsx("button",{type:"button",onClick:()=>p(k),className:"ml-1 hover:text-red-500",children:r.jsx(Fn,{className:"h-3 w-3"})})]},k))}),r.jsxs(fe,{onValueChange:b,children:[r.jsx(ue,{"data-testid":"select-devices",children:r.jsx(me,{placeholder:"Добавить устройство"})}),r.jsx(he,{children:xVe.filter(k=>!l.includes(k)).map(k=>r.jsx(C,{value:k,children:k},k))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"conditions",children:"Условия/ограничения"}),r.jsx(gt,{id:"conditions",value:u.conditions,onChange:k=>h({...u,conditions:k.target.value}),placeholder:"Описание условий работы с оффером, ограничений, требований к трафику...",rows:4,"data-testid":"textarea-conditions"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(D,{type:"button",variant:"outline",onClick:()=>{s(!1),x()},children:"Отмена"}),r.jsxs(D,{type:"submit",disabled:g.isPending,"data-testid":"button-save-activate",children:[r.jsx(_l,{className:"h-4 w-4 mr-2"}),g.isPending?"Сохранение...":"Сохранить и активировать"]})]})]})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{children:["Список полученных офферов (",f.length,")"]})}),r.jsx(W,{children:m?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):f.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{children:"Пока нет полученных офферов"}),r.jsx("p",{className:"text-sm mt-2",children:"Добавьте первый оффер от поставщика"})]}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:f.map(k=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsx("h3",{className:"font-semibold text-lg",children:k.name}),r.jsx(ie,{variant:k.status==="active"?"default":"secondary",children:k.status==="active"?"Активен":"Неактивен"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Категория:"}),r.jsx("p",{className:"font-medium",children:k.category})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Тип выплаты:"}),r.jsx(ie,{className:N(k.payoutType),children:k.payoutType.toUpperCase()})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Расход:"}),r.jsxs("p",{className:"font-medium text-red-600",children:[r.jsx(Rt,{className:"h-4 w-4 inline mr-1"}),k.supplierRate]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Доход:"}),r.jsxs("p",{className:"font-medium text-green-600",children:[r.jsx(Rt,{className:"h-4 w-4 inline mr-1"}),k.partnerRate]})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:k.geo.map(S=>r.jsxs(ie,{variant:"outline",className:"flex items-center gap-1",children:[r.jsx(mr,{className:"h-3 w-3"}),S]},S))}),r.jsx("div",{className:"flex flex-wrap gap-2",children:k.devices.map(S=>r.jsxs(ie,{variant:"outline",className:"flex items-center gap-1",children:[r.jsx($i,{className:"h-3 w-3"}),S]},S))})]},k.id))})})]})]})}const fd=({title:e,value:t,icon:n,type:s,trend:a,alert:i})=>{const l=o=>{switch(s){case"currency":return`$${o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;case"percent":return`${o.toFixed(2)}%`;case"number":return o.toLocaleString();default:return o.toString()}};return r.jsx(q,{className:i?"border-red-200 dark:border-red-800":"",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),r.jsx("p",{className:`text-2xl font-bold ${i?"text-red-600 dark:text-red-400":""}`,children:l(t)}),a!==void 0&&r.jsxs("p",{className:`text-sm flex items-center gap-1 ${a>=0?"text-green-600":"text-red-600"}`,children:[a>=0?r.jsx($a,{className:"h-3 w-3"}):r.jsx(so,{className:"h-3 w-3"}),Math.abs(a).toFixed(1),"%"]})]}),r.jsx(n,{className:`h-8 w-8 ${i?"text-red-500":"text-muted-foreground"}`})]})})})};function yVe(){const{user:e}=tr(),{toast:t}=at(),[n,s]=v.useState({dateFrom:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],dateTo:new Date().toISOString().split("T")[0],search:"",offerId:"all",partnerId:"all",type:"all",status:"all",minAmount:"",maxAmount:""}),[a,i]=v.useState({partnerId:"",amount:"",currency:"USD",period:new Date().toISOString().slice(0,7),comment:"",paymentMethod:"bank"}),[l,o]=v.useState(!1),[c,d]=v.useState(null),{data:u={totalExpenses:0,totalRevenue:0,totalPayouts:0,avgEPC:0,avgCR:0,avgPayout:0,balance:0,pendingPayouts:0},isLoading:h,refetch:f}=Fe({queryKey:["/api/advertiser/finance/summary",e==null?void 0:e.id,n.dateFrom,n.dateTo],queryFn:async()=>{const P=new URLSearchParams;P.set("dateFrom",n.dateFrom),P.set("dateTo",n.dateTo),P.set("advertiserId",(e==null?void 0:e.id)||"");const _=await fetch(`/api/advertiser/financial-overview?${P}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!_.ok)throw new Error("Не удалось загрузить финансовую сводку");return _.json()},enabled:!!(e!=null&&e.id)}),{data:m=[],isLoading:g,refetch:x}=Fe({queryKey:["/api/advertiser/finance/transactions",e==null?void 0:e.id,n],queryFn:async()=>{const P=new URLSearchParams;Object.entries(n).forEach(([R,O])=>{O&&O!=="all"&&P.set(R,O)}),P.set("advertiserId",(e==null?void 0:e.id)||"");const _=await fetch(`/api/advertiser/transactions?${P}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!_.ok)throw new Error("Не удалось загрузить транзакции");return _.json()},enabled:!!(e!=null&&e.id)}),{data:w=[]}=Fe({queryKey:["/api/advertiser/partners",e==null?void 0:e.id],queryFn:async()=>{const P=await fetch("/api/advertiser/partners",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!P.ok)throw new Error("Ошибка загрузки партнёров");return P.json()},enabled:!!(e!=null&&e.id)}),{data:j=[]}=Fe({queryKey:["/api/advertiser/offers",e==null?void 0:e.id],queryFn:async()=>{const P=await fetch("/api/advertiser/offers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!P.ok)throw new Error("Ошибка загрузки офферов");return P.json()},enabled:!!(e!=null&&e.id)}),y=Oe({mutationFn:async P=>{const _=await fetch("/api/advertiser/finance/payouts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({...P,amount:parseFloat(P.amount),advertiserId:e==null?void 0:e.id})});if(!_.ok)throw new Error("Ошибка создания выплаты");return _.json()},onSuccess:()=>{no.invalidateQueries({queryKey:["/api/advertiser/finance/summary"]}),no.invalidateQueries({queryKey:["/api/advertiser/finance/transactions"]}),o(!1),i({partnerId:"",amount:"",currency:"USD",period:new Date().toISOString().slice(0,7),comment:"",paymentMethod:"bank"}),t({title:"Выплата создана",description:"Выплата партнёру поставлена в очередь на обработку"})},onError:P=>{t({title:"Ошибка создания выплаты",description:P.message,variant:"destructive"})}}),b=Oe({mutationFn:async({transactionId:P,status:_})=>{const R=await fetch(`/api/advertiser/finance/transactions/${P}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({status:_})});if(!R.ok)throw new Error("Ошибка изменения статуса");return R.json()},onSuccess:()=>{no.invalidateQueries({queryKey:["/api/advertiser/finance/transactions"]}),no.invalidateQueries({queryKey:["/api/advertiser/finance/summary"]}),t({title:"Статус изменён",description:"Статус транзакции обновлён"})},onError:P=>{t({title:"Ошибка",description:P.message,variant:"destructive"})}}),p=async P=>{try{const _=new URLSearchParams;Object.entries(n).forEach(([T,B])=>{B&&B!=="all"&&_.set(T,B)}),_.set("format",P),_.set("advertiserId",(e==null?void 0:e.id)||"");const R=await fetch(`/api/advertiser/finance/export?${_}`);if(!R.ok)throw new Error("Ошибка экспорта");const O=await R.blob(),M=window.URL.createObjectURL(O),A=document.createElement("a");A.style.display="none",A.href=M,A.download=`finance-report-${new Date().toISOString().split("T")[0]}.${P}`,document.body.appendChild(A),A.click(),window.URL.revokeObjectURL(M),document.body.removeChild(A),t({title:"Экспорт выполнен",description:`Файл ${P.toUpperCase()} успешно скачан`})}catch{t({title:"Ошибка экспорта",description:"Не удалось выполнить экспорт данных",variant:"destructive"})}},N=()=>{s({dateFrom:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],dateTo:new Date().toISOString().split("T")[0],search:"",offerId:"all",partnerId:"all",type:"all",status:"all",minAmount:"",maxAmount:""})},k=()=>{const P=[];return a.partnerId||P.push("Выберите партнёра"),(!a.amount||isNaN(parseFloat(a.amount))||parseFloat(a.amount)<=0)&&P.push("Введите корректную сумму выплаты"),u.balance<parseFloat(a.amount||"0")&&P.push("Недостаточно средств на балансе"),P},S=()=>{const P=k();if(P.length>0){t({title:"Ошибка валидации",description:P.join(", "),variant:"destructive"});return}y.mutate(a)};return h||g?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):r.jsxs("div",{className:"space-y-6","data-testid":"finance-page",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Финансы"}),r.jsx("p",{className:"text-muted-foreground",children:"Управление финансами, выплаты партнёрам и транзакции"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(D,{variant:"outline",onClick:()=>{f(),x()},"data-testid":"button-refresh",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Обновить"]}),r.jsxs(_t,{open:l,onOpenChange:o,children:[r.jsx(Ja,{asChild:!0,children:r.jsxs(D,{"data-testid":"button-create-payout",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Создать выплату"]})}),r.jsxs(kt,{className:"sm:max-w-[500px]",children:[r.jsx(St,{children:r.jsx(Ct,{children:"Выплата партнёру"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"partnerId",children:"Партнёр *"}),r.jsxs(fe,{value:a.partnerId,onValueChange:P=>i({...a,partnerId:P}),children:[r.jsx(ue,{"data-testid":"select-partner",children:r.jsx(me,{placeholder:"Выберите партнёра"})}),r.jsx(he,{children:w.map(P=>r.jsxs(C,{value:P.id,children:[P.username," (",P.email,")"]},P.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"amount",children:"Сумма *"}),r.jsx(ne,{id:"amount",type:"number",step:"0.01",min:"0",value:a.amount,onChange:P=>i({...a,amount:P.target.value}),placeholder:"0.00","data-testid":"input-amount"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"currency",children:"Валюта"}),r.jsxs(fe,{value:a.currency,onValueChange:P=>i({...a,currency:P}),children:[r.jsx(ue,{"data-testid":"select-currency",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"USD",children:"USD"}),r.jsx(C,{value:"USDT",children:"USDT"}),r.jsx(C,{value:"EUR",children:"EUR"}),r.jsx(C,{value:"BTC",children:"BTC"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"period",children:"Период"}),r.jsx(ne,{id:"period",type:"month",value:a.period,onChange:P=>i({...a,period:P.target.value}),"data-testid":"input-period"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Способ выплаты"}),r.jsxs(fe,{value:a.paymentMethod,onValueChange:P=>i({...a,paymentMethod:P}),children:[r.jsx(ue,{"data-testid":"select-payment-method",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"bank",children:"Банковский перевод"}),r.jsx(C,{value:"crypto",children:"Криптовалюта (USDT)"}),r.jsx(C,{value:"paypal",children:"PayPal"}),r.jsx(C,{value:"wise",children:"Wise"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"comment",children:"Комментарий"}),r.jsx(gt,{id:"comment",value:a.comment,onChange:P=>i({...a,comment:P.target.value}),placeholder:"Комментарий к выплате (опционально)","data-testid":"textarea-comment"})]}),r.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Доступный баланс:"}),r.jsxs("span",{className:"font-semibold",children:["$",u.balance.toLocaleString()]})]}),a.amount&&parseFloat(a.amount)>u.balance&&r.jsxs("div",{className:"mt-2 flex items-center gap-2 text-red-600",children:[r.jsx(Ka,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:"Недостаточно средств"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(D,{type:"button",variant:"outline",onClick:()=>o(!1),"data-testid":"button-cancel-payout",children:"Отмена"}),r.jsxs(D,{type:"button",onClick:S,disabled:y.isPending,"data-testid":"button-submit-payout",children:[y.isPending&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),r.jsx(cs,{className:"h-4 w-4 mr-2"}),"Выплатить"]})]})]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(fd,{title:"Общие расходы",value:u.totalExpenses,icon:Rt,type:"currency",alert:u.totalExpenses>u.balance*10}),r.jsx(fd,{title:"Доход от офферов",value:u.totalRevenue,icon:cr,type:"currency"}),r.jsx(fd,{title:"Выплачено партнёрам",value:u.totalPayouts,icon:or,type:"currency"}),r.jsx(fd,{title:"Баланс",value:u.balance,icon:Oc,type:"currency",alert:u.balance<1e3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(fd,{title:"Средний EPC",value:u.avgEPC,icon:cr,type:"currency"}),r.jsx(fd,{title:"Средний CR",value:u.avgCR,icon:Gt,type:"percent"}),r.jsx(fd,{title:"В ожидании выплат",value:u.pendingPayouts,icon:lr,type:"currency",alert:u.pendingPayouts>0})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(As,{className:"h-5 w-5"}),"Фильтры транзакций"]})}),r.jsxs(W,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Поиск"}),r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{placeholder:"Транзакция, партнёр, оффер...",value:n.search,onChange:P=>s({...n,search:P.target.value}),className:"pl-10","data-testid":"input-search-transactions"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"С даты"}),r.jsx(ne,{type:"date",value:n.dateFrom,onChange:P=>s({...n,dateFrom:P.target.value}),"data-testid":"input-date-from"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"По дату"}),r.jsx(ne,{type:"date",value:n.dateTo,onChange:P=>s({...n,dateTo:P.target.value}),"data-testid":"input-date-to"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Оффер"}),r.jsxs(fe,{value:n.offerId,onValueChange:P=>s({...n,offerId:P}),children:[r.jsx(ue,{"data-testid":"select-offer-filter",children:r.jsx(me,{placeholder:"Все офферы"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все офферы"}),j.map(P=>r.jsx(C,{value:P.id,children:P.name},P.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Партнёр"}),r.jsxs(fe,{value:n.partnerId,onValueChange:P=>s({...n,partnerId:P}),children:[r.jsx(ue,{"data-testid":"select-partner-filter",children:r.jsx(me,{placeholder:"Все партнёры"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все партнёры"}),w.map(P=>r.jsx(C,{value:P.id,children:P.username},P.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Тип"}),r.jsxs(fe,{value:n.type,onValueChange:P=>s({...n,type:P}),children:[r.jsx(ue,{"data-testid":"select-type-filter",children:r.jsx(me,{placeholder:"Все типы"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все типы"}),r.jsx(C,{value:"payout",children:"Выплата"}),r.jsx(C,{value:"commission",children:"Комиссия"}),r.jsx(C,{value:"refund",children:"Возврат"}),r.jsx(C,{value:"bonus",children:"Бонус"}),r.jsx(C,{value:"adjustment",children:"Корректировка"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Статус"}),r.jsxs(fe,{value:n.status,onValueChange:P=>s({...n,status:P}),children:[r.jsx(ue,{"data-testid":"select-status-filter",children:r.jsx(me,{placeholder:"Все статусы"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все статусы"}),r.jsx(C,{value:"completed",children:"Завершена"}),r.jsx(C,{value:"pending",children:"В ожидании"}),r.jsx(C,{value:"cancelled",children:"Отменена"}),r.jsx(C,{value:"failed",children:"Ошибка"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"От суммы"}),r.jsx(ne,{type:"number",placeholder:"0",value:n.minAmount,onChange:P=>s({...n,minAmount:P.target.value}),"data-testid":"input-min-amount"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"До суммы"}),r.jsx(ne,{type:"number",placeholder:"∞",value:n.maxAmount,onChange:P=>s({...n,maxAmount:P.target.value}),"data-testid":"input-max-amount"})]})]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[r.jsx(D,{variant:"outline",onClick:N,"data-testid":"button-reset-filters",children:"Сбросить фильтры"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(D,{variant:"outline",onClick:()=>p("csv"),"data-testid":"button-export-csv",children:[r.jsx(br,{className:"h-4 w-4 mr-2"}),"CSV"]}),r.jsxs(D,{variant:"outline",onClick:()=>p("xlsx"),"data-testid":"button-export-xlsx",children:[r.jsx(br,{className:"h-4 w-4 mr-2"}),"Excel"]})]})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{children:["Транзакции (",m.length," записей)"]})}),r.jsx(W,{children:g?r.jsx("div",{className:"flex justify-center items-center h-32",children:r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):m.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(es,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"Нет транзакций за выбранный период"}),r.jsx("p",{className:"text-sm mt-2",children:"Создайте первую выплату партнёру"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Дата"}),r.jsx(Z,{children:"Тип"}),r.jsx(Z,{children:"Оффер"}),r.jsx(Z,{children:"Партнёр"}),r.jsx(Z,{className:"text-right",children:"Сумма"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Способ оплаты"}),r.jsx(Z,{className:"text-center",children:"Действия"})]})}),r.jsx(It,{children:m.map(P=>r.jsxs(De,{children:[r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xn,{className:"h-4 w-4 text-muted-foreground"}),new Date(P.date).toLocaleDateString("ru-RU")]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[P.type==="payout"&&r.jsx(cs,{className:"h-4 w-4 text-red-500"}),P.type==="commission"&&r.jsx(cr,{className:"h-4 w-4 text-green-500"}),P.type==="refund"&&r.jsx(so,{className:"h-4 w-4 text-blue-500"}),P.type==="bonus"&&r.jsx(Zt,{className:"h-4 w-4 text-purple-500"}),r.jsx("span",{className:"capitalize",children:P.type==="payout"?"Выплата":P.type==="commission"?"Комиссия":P.type==="refund"?"Возврат":P.type==="bonus"?"Бонус":P.type})]})}),r.jsx(H,{children:P.offerName}),r.jsx(H,{children:P.partnerUsername}),r.jsx(H,{className:"text-right font-medium",children:r.jsxs("span",{className:P.type==="payout"||P.type==="refund"?"text-red-600":"text-green-600",children:[P.type==="payout"||P.type==="refund"?"-":"+",P.currency," ",P.amount.toLocaleString()]})}),r.jsx(H,{children:r.jsx(ie,{variant:P.status==="completed"?"default":P.status==="pending"?"secondary":P.status==="cancelled"?"outline":"destructive",children:r.jsxs("div",{className:"flex items-center gap-1",children:[P.status==="completed"&&r.jsx(ur,{className:"h-3 w-3"}),P.status==="pending"&&r.jsx(lr,{className:"h-3 w-3"}),P.status==="cancelled"&&r.jsx(Kt,{className:"h-3 w-3"}),P.status==="failed"&&r.jsx(Ka,{className:"h-3 w-3"}),P.status==="completed"?"Завершена":P.status==="pending"?"В ожидании":P.status==="cancelled"?"Отменена":"Ошибка"]})})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cx,{className:"h-4 w-4 text-muted-foreground"}),P.paymentMethod==="bank"?"Банк":P.paymentMethod==="crypto"?"Криpto":P.paymentMethod==="paypal"?"PayPal":P.paymentMethod==="wise"?"Wise":P.paymentMethod]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>d(P),title:"Посмотреть детализацию","data-testid":`button-view-details-${P.id}`,children:r.jsx(ir,{className:"h-4 w-4"})}),P.status==="pending"&&r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>b.mutate({transactionId:P.id,status:"cancelled"}),title:"Отменить транзакцию","data-testid":`button-cancel-${P.id}`,children:r.jsx(Kt,{className:"h-4 w-4 text-red-500"})})]})})]},P.id))})]})})})]})]})}function RY({className:e,value:t,onChange:n}){const[s,a]=v.useState({from:(t==null?void 0:t.from)||Yn(new Date,-7),to:(t==null?void 0:t.to)||new Date});v.useEffect(()=>{t&&a({from:t.from,to:t.to})},[t]);const i=l=>{a(l),l!=null&&l.from&&(l!=null&&l.to)&&n&&n({from:l.from,to:l.to})};return r.jsx("div",{className:Ee("grid gap-2",e),children:r.jsxs(jm,{children:[r.jsx(wm,{asChild:!0,children:r.jsxs(D,{id:"date",variant:"outline",className:Ee("w-full justify-start text-left font-normal",!s&&"text-muted-foreground"),children:[r.jsx(Xn,{className:"mr-2 h-4 w-4"}),s!=null&&s.from?s.to?r.jsxs(r.Fragment,{children:[Jt(s.from,"dd.MM.yyyy",{locale:lo})," -"," ",Jt(s.to,"dd.MM.yyyy",{locale:lo})]}):Jt(s.from,"dd.MM.yyyy",{locale:lo}):r.jsx("span",{children:"Выберите период"})]})}),r.jsx(Tu,{className:"w-auto p-0",align:"start",children:r.jsx(fN,{initialFocus:!0,mode:"range",defaultMonth:s==null?void 0:s.from,selected:s,onSelect:i,numberOfMonths:2,locale:lo})})]})})}function DY({children:e,cols:t={sm:1,md:2,lg:3,xl:4},gap:n=4,className:s}){const a=()=>{const i=["grid"];return t.xs&&i.push(`grid-cols-${t.xs}`),t.sm&&i.push(`sm:grid-cols-${t.sm}`),t.md&&i.push(`md:grid-cols-${t.md}`),t.lg&&i.push(`lg:grid-cols-${t.lg}`),t.xl&&i.push(`xl:grid-cols-${t.xl}`),i.push(`gap-${n}`),i.join(" ")};return r.jsx("div",{className:Ee(a(),s),children:e})}function Nc({title:e,value:t,icon:n,trend:s,className:a,description:i}){return r.jsxs(q,{className:Ee("transition-all hover:shadow-md",a),children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-muted-foreground",children:e}),n&&r.jsx("div",{className:"text-muted-foreground",children:n})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold",children:t}),i&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i}),s&&r.jsxs("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground mt-1",children:[s.direction==="up"?r.jsx(cr,{className:"h-3 w-3 text-green-500"}):r.jsx(HA,{className:"h-3 w-3 text-red-500"}),r.jsxs("span",{className:Ee(s.direction==="up"?"text-green-500":"text-red-500"),children:[s.value,"%"]}),s.label&&r.jsx("span",{children:s.label})]})]})]})}function bVe(){const[e,t]=v.useState({from:new Date(Date.now()-6048e5),to:new Date}),[n,s]=v.useState({offerId:"",partnerId:"",country:"",device:"",trafficSource:"",sub1:"",sub2:"",sub3:"",sub4:"",sub5:"",groupBy:["date"],search:""}),[a,i]=v.useState("overview"),[l,o]=v.useState(1),[c,d]=v.useState(1),[u,h]=v.useState(1),[f,m]=v.useState(1),[g,x]=v.useState(1),[w,j]=v.useState(1),y=50,{data:b,isLoading:p,refetch:N}=Fe({queryKey:["/api/analytics/advertiser/statistics",e,n],queryFn:async()=>{const T=new URLSearchParams({dateFrom:e.from.toISOString(),dateTo:e.to.toISOString(),...Object.fromEntries(Object.entries(n).filter(([U,E])=>E&&(Array.isArray(E)?E.length>0:E.toString().trim())))}),B=localStorage.getItem("auth_token"),z=await fetch(`/api/analytics/advertiser/statistics?${T}`,{headers:{Authorization:`Bearer ${B}`,"Content-Type":"application/json"}});if(!z.ok)throw new Error("Failed to fetch statistics");return z.json()}}),{data:k}=Fe({queryKey:["/api/analytics/advertiser/offers"],queryFn:async()=>{const T=localStorage.getItem("auth_token"),B=await fetch("/api/analytics/advertiser/offers",{headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});if(!B.ok)throw new Error("Failed to fetch offers");return B.json()}}),{data:S}=Fe({queryKey:["/api/analytics/advertiser/partners"],queryFn:async()=>{const T=localStorage.getItem("auth_token"),B=await fetch("/api/analytics/advertiser/partners",{headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});if(!B.ok)throw new Error("Failed to fetch partners");return B.json()}}),P=(b==null?void 0:b.summary)||{totalClicks:0,totalConversions:0,totalRevenue:0,avgCR:0,avgEPC:0,totalOffers:0,totalPartners:0},_=(b==null?void 0:b.data)||[],R=({currentPage:T,setCurrentPage:B,totalItems:z,itemsPerPage:U=50})=>{const E=Math.ceil(z/U);return r.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Показано ",(T-1)*U+1,"-",Math.min(T*U,z)," из ",z," записей"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>B(Math.max(T-1,1)),disabled:T===1,"data-testid":"pagination-prev",children:[r.jsx(Mi,{className:"h-4 w-4"}),"Назад"]}),r.jsx("div",{className:"flex items-center space-x-1",children:(()=>{const $=[];let oe=Math.max(1,T-Math.floor(2.5)),ee=Math.min(E,oe+5-1);ee-oe<4&&(oe=Math.max(1,ee-5+1)),oe>1&&($.push(r.jsx(D,{variant:T===1?"default":"outline",size:"sm",onClick:()=>B(1),"data-testid":"pagination-page-1",children:"1"},1)),oe>2&&$.push(r.jsx("span",{className:"px-2",children:"..."},"dots1")));for(let ce=oe;ce<=ee;ce++)$.push(r.jsx(D,{variant:ce===T?"default":"outline",size:"sm",onClick:()=>B(ce),"data-testid":`pagination-page-${ce}`,children:ce},ce));return ee<E&&(ee<E-1&&$.push(r.jsx("span",{className:"px-2",children:"..."},"dots2")),$.push(r.jsx(D,{variant:E===T?"default":"outline",size:"sm",onClick:()=>B(E),"data-testid":`pagination-page-${E}`,children:E},E))),$})()}),r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>B(Math.min(T+1,E)),disabled:T===E,"data-testid":"pagination-next",children:["Вперёд",r.jsx(Zc,{className:"h-4 w-4"})]})]})]})},O=(T,B)=>{s(z=>({...z,[T]:B==="all"?"":B}))},M=()=>{s({offerId:"",partnerId:"",country:"",device:"",trafficSource:"",sub1:"",sub2:"",sub3:"",sub4:"",sub5:"",groupBy:["date"],search:""})},A=async T=>{try{const B=new URLSearchParams({dateFrom:e.from.toISOString(),dateTo:e.to.toISOString(),format:T,...Object.fromEntries(Object.entries(n).filter(([oe,ee])=>ee&&(Array.isArray(ee)?ee.length>0:ee.toString().trim())))}),z=localStorage.getItem("auth_token"),U=await fetch(`/api/analytics/advertiser/statistics/export?${B}`,{headers:{Authorization:`Bearer ${z}`,"Content-Type":"application/json"}});if(!U.ok)throw new Error("Failed to export data");const E=await U.blob(),$=URL.createObjectURL(E),G=document.createElement("a");G.href=$,G.download=`statistics_${Date.now()}.${T}`,document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL($)}catch{}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Аналитика"}),r.jsx("p",{className:"text-muted-foreground",children:"Детальная статистика по кликам, конверсиям и доходам"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>N(),disabled:p,"data-testid":"refresh-stats",children:[r.jsx(Vt,{className:`h-4 w-4 mr-2 ${p?"animate-spin":""}`}),"Обновить"]}),r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>A("xlsx"),"data-testid":"export-stats",children:[r.jsx(br,{className:"h-4 w-4 mr-2"}),"Экспорт"]})]})]}),r.jsxs(DY,{cols:{sm:2,lg:4},children:[r.jsx(Nc,{title:"Клики",value:P.totalClicks.toLocaleString(),icon:r.jsx(Qc,{className:"h-5 w-5 text-blue-600"}),trend:{value:0,direction:"up"}}),r.jsx(Nc,{title:"Конверсии",value:P.totalConversions.toLocaleString(),icon:r.jsx(cr,{className:"h-5 w-5 text-green-600"}),trend:{value:0,direction:"up"}}),r.jsx(Nc,{title:"Доход",value:`$${P.totalRevenue.toLocaleString()}`,icon:r.jsx(Rt,{className:"h-5 w-5 text-purple-600"}),trend:{value:0,direction:"up"}}),r.jsx(Nc,{title:"Средний CR",value:`${P.avgCR.toFixed(2)}%`,icon:r.jsx(Vr,{className:"h-5 w-5 text-orange-600"}),trend:{value:0,direction:"up"}})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(As,{className:"h-5 w-5"}),"Фильтры"]})}),r.jsx(W,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Период"}),r.jsx(RY,{value:e,onChange:t})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Оффер"}),r.jsxs(fe,{value:n.offerId,onValueChange:T=>O("offerId",T),children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Все офферы"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все офферы"}),k==null?void 0:k.map(T=>r.jsx(C,{value:T.id,children:T.name},T.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Партнер"}),r.jsxs(fe,{value:n.partnerId,onValueChange:T=>O("partnerId",T),children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Все партнеры"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все партнеры"}),S==null?void 0:S.map(T=>r.jsx(C,{value:T.id,children:T.username},T.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Страна"}),r.jsx(ne,{placeholder:"Код страны (RU, US, etc.)",value:n.country,onChange:T=>O("country",T.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Устройство"}),r.jsxs(fe,{value:n.device,onValueChange:T=>O("device",T),children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Все устройства"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все устройства"}),r.jsx(C,{value:"mobile",children:"Мобильные"}),r.jsx(C,{value:"desktop",children:"Десктоп"}),r.jsx(C,{value:"tablet",children:"Планшеты"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Источник трафика"}),r.jsx(ne,{placeholder:"facebook, google, etc.",value:n.trafficSource,onChange:T=>O("trafficSource",T.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sub1"}),r.jsx(ne,{placeholder:"Значение Sub1",value:n.sub1,onChange:T=>O("sub1",T.target.value)})]}),r.jsx("div",{className:"flex items-end",children:r.jsx(D,{variant:"outline",onClick:M,className:"w-full","data-testid":"reset-filters",children:"Сбросить фильтры"})})]})})]}),r.jsxs(rn,{value:a,onValueChange:i,children:[r.jsxs(Zr,{className:"grid w-full grid-cols-6",children:[r.jsxs(We,{value:"overview",className:"data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700 data-[state=active]:border-blue-300",children:[r.jsx(Ire,{className:"h-4 w-4 mr-2 text-blue-600"}),"Обзор"]}),r.jsxs(We,{value:"geography",className:"data-[state=active]:bg-green-100 data-[state=active]:text-green-700 data-[state=active]:border-green-300",children:[r.jsx(mr,{className:"h-4 w-4 mr-2 text-green-600"}),"География"]}),r.jsxs(We,{value:"devices",className:"data-[state=active]:bg-purple-100 data-[state=active]:text-purple-700 data-[state=active]:border-purple-300",children:[r.jsx(tu,{className:"h-4 w-4 mr-2 text-purple-600"}),"Устройства"]}),r.jsxs(We,{value:"sources",className:"data-[state=active]:bg-orange-100 data-[state=active]:text-orange-700 data-[state=active]:border-orange-300",children:[r.jsx(If,{className:"h-4 w-4 mr-2 text-orange-600"}),"Источники"]}),r.jsxs(We,{value:"subids",className:"data-[state=active]:bg-indigo-100 data-[state=active]:text-indigo-700 data-[state=active]:border-indigo-300",children:[r.jsx(UR,{className:"h-4 w-4 mr-2 text-indigo-600"}),"SubID"]}),r.jsxs(We,{value:"detailed",className:"data-[state=active]:bg-gray-100 data-[state=active]:text-gray-700 data-[state=active]:border-gray-300",children:[r.jsx(es,{className:"h-4 w-4 mr-2 text-gray-600"}),"Детали"]})]}),r.jsx(He,{value:"overview",className:"space-y-6",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Статистика по дням"}),r.jsx(Ze,{children:"Показатели за выбранный период с разбивкой по дням"})]}),r.jsxs(W,{children:[p?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка данных..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(R,{currentPage:l,setCurrentPage:o,totalItems:_.length,itemsPerPage:y}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Дата и время"}),r.jsx("th",{className:"text-left p-2",children:"Partner ID"}),r.jsx("th",{className:"text-left p-2",children:"Партнер"}),r.jsx("th",{className:"text-left p-2",children:"Оффер"}),r.jsx("th",{className:"text-left p-2",children:"Click ID"}),r.jsx("th",{className:"text-right p-2",children:"Клики"}),r.jsx("th",{className:"text-right p-2",children:"Конверсии"}),r.jsx("th",{className:"text-right p-2",children:"CR, %"}),r.jsx("th",{className:"text-right p-2",children:"EPC, $"}),r.jsx("th",{className:"text-right p-2",children:"Доход, $"}),r.jsx("th",{className:"text-right p-2",children:"Прибыль, $"}),r.jsx("th",{className:"text-right p-2",children:"ROI, %"})]})}),r.jsx("tbody",{children:(()=>{const T=(l-1)*y,B=T+y;return _.slice(T,B).map((U,E)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsxs("td",{className:"p-2",children:[new Date(U.date).toLocaleDateString("ru-RU")," ",new Date(U.date).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})]}),r.jsx("td",{className:"p-2 text-blue-600 font-mono text-xs",children:U.partnerId?U.partnerId.substring(0,8)+"...":"N/A"}),r.jsx("td",{className:"p-2 font-medium",children:U.partnerName||"Unknown Partner"}),r.jsx("td",{className:"p-2",children:U.offerName||"Unknown Offer"}),r.jsx("td",{className:"p-2 text-green-600 font-mono text-xs",children:U.clickId||(U.clickIds&&U.clickIds.length>0?`${U.clickIds.length} кликов`:"N/A")}),r.jsx("td",{className:"text-right p-2",children:U.clicks.toLocaleString()}),r.jsx("td",{className:"text-right p-2",children:U.conversions.toLocaleString()}),r.jsxs("td",{className:"text-right p-2",children:[U.cr.toFixed(2),"%"]}),r.jsxs("td",{className:"text-right p-2",children:["$",U.epc.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2",children:["$",U.revenue.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2",children:["$",U.profit.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2",children:[U.roi.toFixed(2),"%"]})]},T+E))})()})]})}),r.jsx(R,{currentPage:l,setCurrentPage:o,totalItems:_.length,itemsPerPage:y})]}),!1]})]})}),r.jsx(He,{value:"geography",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(mr,{className:"h-5 w-5"}),"География трафика"]})}),r.jsxs(W,{children:[r.jsx(R,{currentPage:u,setCurrentPage:h,totalItems:_.length,itemsPerPage:y}),p?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка данных по географии..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Страна"}),r.jsx("th",{className:"text-left p-2",children:"Partner ID"}),r.jsx("th",{className:"text-left p-2",children:"Click ID"}),r.jsx("th",{className:"text-right p-2",children:"Клики"}),r.jsx("th",{className:"text-right p-2",children:"Конверсии"}),r.jsx("th",{className:"text-right p-2",children:"CR, %"}),r.jsx("th",{className:"text-right p-2",children:"Доход, $"}),r.jsx("th",{className:"text-right p-2",children:"ROI, %"})]})}),r.jsx("tbody",{children:(()=>{const T=(u-1)*y,B=T+y;return _.slice(T,B).map((U,E)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-2 font-medium",children:U.country||"Unknown"}),r.jsx("td",{className:"p-2 text-blue-600 font-mono text-xs",children:U.partnerId?U.partnerId.substring(0,8)+"...":"N/A"}),r.jsx("td",{className:"p-2 text-green-600 font-mono text-xs",children:U.clickId||"N/A"}),r.jsx("td",{className:"text-right p-2",children:U.clicks.toLocaleString()}),r.jsx("td",{className:"text-right p-2",children:U.conversions.toLocaleString()}),r.jsxs("td",{className:"text-right p-2",children:[U.cr.toFixed(2),"%"]}),r.jsxs("td",{className:"text-right p-2",children:["$",U.revenue.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2",children:[U.roi.toFixed(2),"%"]})]},T+E))})()})]})}),r.jsx(R,{currentPage:u,setCurrentPage:h,totalItems:_.length,itemsPerPage:y})]})]})}),r.jsx(He,{value:"devices",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx($i,{className:"h-5 w-5"}),"Устройства и браузеры"]})}),r.jsxs(W,{children:[r.jsx(R,{currentPage:f,setCurrentPage:m,totalItems:_.length,itemsPerPage:y}),p?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка данных по устройствам..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Устройство"}),r.jsx("th",{className:"text-left p-2",children:"Partner ID"}),r.jsx("th",{className:"text-left p-2",children:"Click ID"}),r.jsx("th",{className:"text-left p-2",children:"Страна"}),r.jsx("th",{className:"text-right p-2",children:"Клики"}),r.jsx("th",{className:"text-right p-2",children:"Конверсии"}),r.jsx("th",{className:"text-right p-2",children:"CR, %"}),r.jsx("th",{className:"text-right p-2",children:"Доход, $"}),r.jsx("th",{className:"text-right p-2",children:"ROI, %"})]})}),r.jsx("tbody",{children:(()=>{const T=(f-1)*y,B=T+y;return _.slice(T,B).map((U,E)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-2 font-medium",children:r.jsxs("div",{className:"flex items-center gap-2",children:[U.device==="mobile"&&r.jsx($i,{className:"h-4 w-4 text-blue-600"}),U.device==="desktop"&&r.jsx(tu,{className:"h-4 w-4 text-green-600"}),U.device==="tablet"&&r.jsx(tu,{className:"h-4 w-4 text-purple-600"}),U.device||"Unknown"]})}),r.jsx("td",{className:"p-2 text-blue-600 font-mono text-xs",children:U.partnerId?U.partnerId.substring(0,8)+"...":"N/A"}),r.jsx("td",{className:"p-2 text-green-600 font-mono text-xs",children:U.clickId||"N/A"}),r.jsx("td",{className:"p-2",children:U.country||"Unknown"}),r.jsx("td",{className:"text-right p-2",children:U.clicks.toLocaleString()}),r.jsx("td",{className:"text-right p-2",children:U.conversions.toLocaleString()}),r.jsxs("td",{className:"text-right p-2",children:[U.cr.toFixed(2),"%"]}),r.jsxs("td",{className:"text-right p-2",children:["$",U.revenue.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2",children:[U.roi.toFixed(2),"%"]})]},T+E))})()})]})}),r.jsx(R,{currentPage:f,setCurrentPage:m,totalItems:_.length,itemsPerPage:y})]})]})}),r.jsx(He,{value:"sources",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(yr,{className:"h-5 w-5"}),"Источники трафика"]})}),r.jsxs(W,{children:[r.jsx(R,{currentPage:g,setCurrentPage:x,totalItems:_.length,itemsPerPage:y}),p?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка данных по источникам..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Источник"}),r.jsx("th",{className:"text-left p-2",children:"Partner ID"}),r.jsx("th",{className:"text-left p-2",children:"Click ID"}),r.jsx("th",{className:"text-left p-2",children:"Устройство"}),r.jsx("th",{className:"text-left p-2",children:"Страна"}),r.jsx("th",{className:"text-right p-2",children:"Клики"}),r.jsx("th",{className:"text-right p-2",children:"Конверсии"}),r.jsx("th",{className:"text-right p-2",children:"CR, %"}),r.jsx("th",{className:"text-right p-2",children:"Доход, $"})]})}),r.jsx("tbody",{children:(()=>{const T=(g-1)*y,B=T+y;return _.slice(T,B).map((U,E)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-2 font-medium",children:U.trafficSource||"Direct"}),r.jsx("td",{className:"p-2 text-blue-600 font-mono text-xs",children:U.partnerId?U.partnerId.substring(0,8)+"...":"N/A"}),r.jsx("td",{className:"p-2 text-green-600 font-mono text-xs",children:U.clickId||"N/A"}),r.jsx("td",{className:"p-2",children:U.device||"Unknown"}),r.jsx("td",{className:"p-2",children:U.country||"Unknown"}),r.jsx("td",{className:"text-right p-2",children:U.clicks.toLocaleString()}),r.jsx("td",{className:"text-right p-2",children:U.conversions.toLocaleString()}),r.jsxs("td",{className:"text-right p-2",children:[U.cr.toFixed(2),"%"]}),r.jsxs("td",{className:"text-right p-2",children:["$",U.revenue.toFixed(2)]})]},T+E))})()})]})}),r.jsx(R,{currentPage:g,setCurrentPage:x,totalItems:_.length,itemsPerPage:y})]})]})}),r.jsx(He,{value:"subids",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(UR,{className:"h-5 w-5"}),"SubID анализ"]})}),r.jsxs(W,{children:[r.jsx(R,{currentPage:w,setCurrentPage:j,totalItems:_.length,itemsPerPage:y}),p?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка SubID данных..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Partner ID"}),r.jsx("th",{className:"text-left p-2",children:"Click ID"}),r.jsx("th",{className:"text-left p-2",children:"Sub1"}),r.jsx("th",{className:"text-left p-2",children:"Sub2"}),r.jsx("th",{className:"text-left p-2",children:"Sub3"}),r.jsx("th",{className:"text-left p-2",children:"Sub4"}),r.jsx("th",{className:"text-left p-2",children:"Sub5"}),r.jsx("th",{className:"text-left p-2",children:"Sub6"}),r.jsx("th",{className:"text-left p-2",children:"Sub7"}),r.jsx("th",{className:"text-left p-2",children:"Sub8"}),r.jsx("th",{className:"text-left p-2",children:"Sub9"}),r.jsx("th",{className:"text-left p-2",children:"Sub10"}),r.jsx("th",{className:"text-left p-2",children:"Sub11"}),r.jsx("th",{className:"text-left p-2",children:"Sub12"}),r.jsx("th",{className:"text-left p-2",children:"Sub13"}),r.jsx("th",{className:"text-left p-2",children:"Sub14"}),r.jsx("th",{className:"text-left p-2",children:"Sub15"}),r.jsx("th",{className:"text-left p-2",children:"Sub16"})]})}),r.jsx("tbody",{children:(()=>{const T=(w-1)*y,B=T+y;return _.slice(T,B).map((U,E)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-2 text-blue-600 font-mono text-xs",children:U.partnerId?U.partnerId.substring(0,8)+"...":"N/A"}),r.jsx("td",{className:"p-2 text-green-600 font-mono text-xs",children:U.clickId||"N/A"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub1||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub2||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub3||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub4||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub5||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub6||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub7||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub8||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub9||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub10||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub11||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub12||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub13||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub14||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub15||"-"}),r.jsx("td",{className:"p-2 font-mono text-xs",children:U.sub16||"-"})]},T+E))})()})]})}),r.jsx(R,{currentPage:w,setCurrentPage:j,totalItems:_.length,itemsPerPage:y})]})]})}),r.jsx(He,{value:"detailed",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Детальные клики"}),r.jsx(Ze,{children:"Полная информация по каждому отдельному клику с clickId и partnerId"})]}),r.jsxs(W,{children:[r.jsx(R,{currentPage:c,setCurrentPage:d,totalItems:_.length,itemsPerPage:y}),p?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка детальных данных..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Click ID"}),r.jsx("th",{className:"text-left p-2",children:"Partner ID"}),r.jsx("th",{className:"text-left p-2",children:"Партнер"}),r.jsx("th",{className:"text-left p-2",children:"Оффер"}),r.jsx("th",{className:"text-left p-2",children:"Дата/время"}),r.jsx("th",{className:"text-left p-2",children:"Страна"}),r.jsx("th",{className:"text-left p-2",children:"Устройство"}),r.jsx("th",{className:"text-left p-2",children:"Статус"}),r.jsx("th",{className:"text-right p-2",children:"Доход, $"}),r.jsx("th",{className:"text-right p-2",children:"CR, %"})]})}),r.jsx("tbody",{children:(()=>{const T=(c-1)*y,B=T+y;return _.slice(T,B).map((U,E)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-2 font-mono text-xs text-green-600",children:U.clickId||"N/A"}),r.jsx("td",{className:"p-2 font-mono text-xs text-blue-600",children:U.partnerId?U.partnerId.substring(0,8)+"...":"N/A"}),r.jsx("td",{className:"p-2 font-medium",children:U.partnerName||"Unknown Partner"}),r.jsx("td",{className:"p-2",children:U.offerName||"Unknown Offer"}),r.jsxs("td",{className:"p-2",children:[new Date(U.date).toLocaleDateString("ru-RU")," ",new Date(U.date).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})]}),r.jsx("td",{className:"p-2",children:U.country||"Unknown"}),r.jsx("td",{className:"p-2",children:U.device||"Unknown"}),r.jsx("td",{className:"p-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${U.conversions>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:U.conversions>0?"Конверсия":"Клик"})}),r.jsxs("td",{className:"text-right p-2 font-medium",children:["$",U.revenue.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2",children:[U.cr.toFixed(2),"%"]})]},T+E))})()})]})}),r.jsx(R,{currentPage:c,setCurrentPage:d,totalItems:_.length,itemsPerPage:y})]})]})})]})]})}const NS={manager:{manageOffers:!0,managePartners:!0,viewStatistics:!0,financialOperations:!1,postbacksApi:!1},analyst:{manageOffers:!1,managePartners:!1,viewStatistics:!0,financialOperations:!1,postbacksApi:!1},financier:{manageOffers:!1,managePartners:!1,viewStatistics:!1,financialOperations:!0,postbacksApi:!1},support:{manageOffers:!0,managePartners:!1,viewStatistics:!0,financialOperations:!1,postbacksApi:!0}},IF={manager:"Менеджер",analyst:"Аналитик",financier:"Финансист",support:"Техподдержка"},jVe={manager:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",analyst:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",financier:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",support:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"};function wVe(){const{user:e}=tr(),{toast:t}=at(),n=Et(),[s,a]=v.useState("members"),[i,l]=v.useState(!1),[o,c]=v.useState(null),[d,u]=v.useState({search:"",role:"all",status:"all"}),[h,f]=v.useState({username:"",email:"",firstName:"",lastName:"",role:"manager",permissions:NS.manager,restrictions:{ipWhitelist:[],geoRestrictions:[],timeRestrictions:{enabled:!1,startTime:"09:00",endTime:"18:00",timezone:"UTC",workingDays:[1,2,3,4,5]}},telegramNotifications:!1,telegramUserId:""}),{data:m=[],isLoading:g,refetch:x,error:w}=Fe({queryKey:["/api/advertiser/team/members",e==null?void 0:e.id],queryFn:async()=>{const A=await fetch("/api/advertiser/team/members",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!A.ok)throw new Error("Ошибка загрузки команды");return A.json()},enabled:!!(e!=null&&e.id)}),{data:j=[],isLoading:y,error:b}=Fe({queryKey:["/api/advertiser/team/activity-logs",e==null?void 0:e.id],queryFn:async()=>{const A=await fetch("/api/advertiser/team/activity-logs",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!A.ok)throw new Error("Ошибка загрузки логов");return A.json()},enabled:!!(e!=null&&e.id)}),p=Oe({mutationFn:async A=>{const T=await fetch("/api/advertiser/team/invite",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(A)});if(!T.ok){const B=await T.json();throw new Error(B.error||"Ошибка отправки приглашения")}return T.json()},onSuccess:A=>{t({title:"Приглашение отправлено",description:`Email-приглашение отправлено на ${A.email}`}),x()},onError:A=>{t({title:"Ошибка отправки приглашения",description:A.message,variant:"destructive"})}}),N=Oe({mutationFn:async A=>{const T=await fetch("/api/advertiser/team/members",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(A)});if(!T.ok)throw new Error("Ошибка создания сотрудника");return T.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/advertiser/team/members"]}),l(!1),R(),t({title:"Сотрудник добавлен",description:"Новый сотрудник успешно добавлен в команду"})},onError:A=>{t({title:"Ошибка добавления",description:A.message,variant:"destructive"})}}),k=Oe({mutationFn:async({id:A,data:T})=>{const B=await fetch(`/api/advertiser/team/members/${A}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(T)});if(!B.ok)throw new Error("Ошибка обновления сотрудника");return B.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/advertiser/team/members"]}),c(null),R(),t({title:"Данные обновлены",description:"Информация о сотруднике успешно обновлена"})}}),S=Oe({mutationFn:async A=>{const T=await fetch(`/api/advertiser/team/members/${A}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!T.ok)throw new Error("Ошибка удаления сотрудника");return T.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/advertiser/team/members"]}),t({title:"Сотрудник удалён",description:"Сотрудник успешно удалён из команды"})}}),P=()=>{if(!h.email||!h.role){t({title:"Ошибка валидации",description:"Email и роль обязательны для заполнения",variant:"destructive"});return}p.mutate({email:h.email,role:h.role})},_=(A="csv")=>{const T=m.map(B=>({email:B.email,name:`${B.firstName} ${B.lastName}`,role:IF[B.role],status:B.status,lastActivity:B.lastActivity,createdAt:B.createdAt}));if(A==="json"){const B=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),z=URL.createObjectURL(B),U=document.createElement("a");U.href=z,U.download=`team-members-${new Date().toISOString().split("T")[0]}.json`,U.click()}else{const z=[["Email","Name","Role","Status","Last Activity","Added Date"].join(","),...T.map(G=>[G.email,G.name,G.role,G.status,G.lastActivity,G.createdAt].join(","))].join(`
`),U=new Blob([z],{type:"text/csv"}),E=URL.createObjectURL(U),$=document.createElement("a");$.href=E,$.download=`team-members-${new Date().toISOString().split("T")[0]}.csv`,$.click()}t({title:"Экспорт завершен",description:`Данные команды экспортированы в формате ${A.toUpperCase()}`})},R=()=>{f({username:"",email:"",firstName:"",lastName:"",role:"manager",permissions:NS.manager,restrictions:{ipWhitelist:[],geoRestrictions:[],timeRestrictions:{enabled:!1,startTime:"09:00",endTime:"18:00",timezone:"UTC",workingDays:[1,2,3,4,5]}},telegramNotifications:!1,telegramUserId:""})},O=A=>{f(T=>({...T,role:A,permissions:NS[A]}))},M=m.filter(A=>{const T=A.username.toLowerCase().includes(d.search.toLowerCase())||A.email.toLowerCase().includes(d.search.toLowerCase())||`${A.firstName} ${A.lastName}`.toLowerCase().includes(d.search.toLowerCase()),B=d.role==="all"||A.role===d.role,z=d.status==="all"||A.status===d.status;return T&&B&&z});return e?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Командный режим"}),r.jsx("p",{className:"text-muted-foreground",children:"Управление командой и разграничение прав доступа"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(D,{onClick:()=>l(!0),"data-testid":"button-add-member",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить сотрудника"]}),r.jsxs(D,{variant:"outline",onClick:()=>_("csv"),"data-testid":"button-export-team",children:[r.jsx(br,{className:"h-4 w-4 mr-2"}),"Экспорт"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(q,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-700 shadow-lg hover:shadow-xl transition-shadow",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-full",children:r.jsx(or,{className:"h-8 w-8 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"👤 Всего сотрудников"}),r.jsx("p",{className:"text-3xl font-bold text-blue-800 dark:text-blue-200",children:m.length})]})]})})}),r.jsx(q,{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-green-200 dark:border-green-700 shadow-lg hover:shadow-xl transition-shadow",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full",children:r.jsx(Bs,{className:"h-8 w-8 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"✅ Активных"}),r.jsx("p",{className:"text-3xl font-bold text-green-800 dark:text-green-200",children:m.filter(A=>A.status==="active").length})]})]})})}),r.jsx(q,{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-purple-200 dark:border-purple-700 shadow-lg hover:shadow-xl transition-shadow",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full",children:r.jsx(Dt,{className:"h-8 w-8 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"🔒 С ограничениями"}),r.jsx("p",{className:"text-3xl font-bold text-purple-800 dark:text-purple-200",children:m.filter(A=>A.restrictions.ipWhitelist.length>0||A.restrictions.geoRestrictions.length>0||A.restrictions.timeRestrictions.enabled).length})]})]})})}),r.jsx(q,{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 border-orange-200 dark:border-orange-700 shadow-lg hover:shadow-xl transition-shadow",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-500 rounded-full",children:r.jsx($n,{className:"h-8 w-8 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"🔔 Telegram уведомления"}),r.jsx("p",{className:"text-3xl font-bold text-orange-800 dark:text-orange-200",children:m.filter(A=>A.telegramNotifications).length})]})]})})})]}),r.jsxs(rn,{value:s,onValueChange:a,className:"space-y-4",children:[r.jsxs(Zr,{className:"bg-gradient-to-r from-slate-100 to-gray-100 dark:from-slate-800 dark:to-gray-800 p-1 rounded-xl",children:[r.jsx(We,{value:"members",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500 data-[state=active]:to-indigo-500 data-[state=active]:text-white",children:"👥 Сотрудники"}),r.jsx(We,{value:"roles",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-pink-500 data-[state=active]:text-white",children:"🔑 Роли и права"}),r.jsx(We,{value:"activity",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-green-500 data-[state=active]:to-emerald-500 data-[state=active]:text-white",children:"📋 Логи действий"})]}),r.jsxs(He,{value:"members",className:"space-y-4",children:[r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(As,{className:"h-5 w-5"}),"Фильтры сотрудников"]})}),r.jsx(W,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"search",children:"Поиск"}),r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{id:"search",placeholder:"Имя, email, username...",value:d.search,onChange:A=>u(T=>({...T,search:A.target.value})),className:"pl-8","data-testid":"input-search-members"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Роль"}),r.jsxs(fe,{value:d.role,onValueChange:A=>u(T=>({...T,role:A})),children:[r.jsx(ue,{"data-testid":"select-role-filter",children:r.jsx(me,{placeholder:"Все роли"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все роли"}),r.jsx(C,{value:"manager",children:"Менеджер"}),r.jsx(C,{value:"analyst",children:"Аналитик"}),r.jsx(C,{value:"financier",children:"Финансист"}),r.jsx(C,{value:"support",children:"Техподдержка"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Статус"}),r.jsxs(fe,{value:d.status,onValueChange:A=>u(T=>({...T,status:A})),children:[r.jsx(ue,{"data-testid":"select-status-filter",children:r.jsx(me,{placeholder:"Все статусы"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все статусы"}),r.jsx(C,{value:"active",children:"Активный"}),r.jsx(C,{value:"inactive",children:"Неактивный"}),r.jsx(C,{value:"blocked",children:"Заблокирован"})]})]})]})]})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{children:["Список сотрудников (",M.length,")"]})}),r.jsx(W,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Сотрудник"}),r.jsx(Z,{children:"Роль"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Последняя активность"}),r.jsx(Z,{children:"Уведомления"}),r.jsx(Z,{children:"Действия"})]})}),r.jsx(It,{children:g?r.jsx(De,{children:r.jsx(H,{colSpan:6,className:"text-center",children:"Загрузка..."})}):M.length===0?r.jsx(De,{children:r.jsx(H,{colSpan:6,className:"text-center",children:"Сотрудники не найдены"})}):M.map(A=>r.jsxs(De,{children:[r.jsx(H,{children:r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium",children:[A.firstName," ",A.lastName]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["@",A.username," • ",A.email]})]})}),r.jsx(H,{children:r.jsx(ie,{className:jVe[A.role],children:IF[A.role]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[A.status==="active"&&r.jsx(ur,{className:"h-4 w-4 text-green-500"}),A.status==="inactive"&&r.jsx(lr,{className:"h-4 w-4 text-yellow-500"}),A.status==="blocked"&&r.jsx(Kt,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"capitalize",children:A.status})]})}),r.jsx(H,{children:r.jsx("div",{className:"text-sm",children:new Date(A.lastActivity).toLocaleString("ru-RU")})}),r.jsx(H,{children:A.telegramNotifications?r.jsxs(ie,{variant:"outline",className:"text-green-600",children:[r.jsx($n,{className:"h-3 w-3 mr-1"}),"Включены"]}):r.jsx(ie,{variant:"outline",className:"text-gray-500",children:"Отключены"})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(D,{variant:"outline",size:"sm",onClick:()=>{c(A),f({username:A.username,email:A.email,firstName:A.firstName,lastName:A.lastName,role:A.role,permissions:A.permissions,restrictions:A.restrictions,telegramNotifications:A.telegramNotifications,telegramUserId:A.telegramUserId||""})},"data-testid":`button-edit-member-${A.id}`,children:r.jsx(Ts,{className:"h-4 w-4"})}),r.jsx(D,{variant:"outline",size:"sm",onClick:()=>S.mutate(A.id),"data-testid":`button-delete-member-${A.id}`,children:r.jsx(wr,{className:"h-4 w-4 text-red-500"})})]})})]},A.id))})]})})})]})]}),r.jsx(He,{value:"roles",className:"space-y-4",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Таблица ролей и разрешений"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Права доступа для каждой роли в системе"})]}),r.jsx(W,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{className:"w-[200px]",children:"Функция"}),r.jsx(Z,{className:"text-center",children:"Менеджер"}),r.jsx(Z,{className:"text-center",children:"Аналитик"}),r.jsx(Z,{className:"text-center",children:"Финансист"}),r.jsx(Z,{className:"text-center",children:"Техподдержка"})]})}),r.jsxs(It,{children:[r.jsxs(De,{children:[r.jsx(H,{className:"font-medium",children:"Управление офферами"}),r.jsx(H,{className:"text-center",children:r.jsx(ur,{className:"h-5 w-5 text-green-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(Kt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(Kt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(ur,{className:"h-5 w-5 text-green-500 mx-auto"})})]}),r.jsxs(De,{children:[r.jsx(H,{className:"font-medium",children:"Управление партнёрами"}),r.jsx(H,{className:"text-center",children:r.jsx(ur,{className:"h-5 w-5 text-green-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(Kt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(Kt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(Kt,{className:"h-5 w-5 text-red-500 mx-auto"})})]}),r.jsxs(De,{children:[r.jsx(H,{className:"font-medium",children:"Просмотр статистики"}),r.jsx(H,{className:"text-center",children:r.jsx(ur,{className:"h-5 w-5 text-green-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(ur,{className:"h-5 w-5 text-green-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(Kt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(ur,{className:"h-5 w-5 text-green-500 mx-auto"})})]}),r.jsxs(De,{children:[r.jsx(H,{className:"font-medium",children:"Финансовые операции"}),r.jsx(H,{className:"text-center",children:r.jsx(Kt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(Kt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(ur,{className:"h-5 w-5 text-green-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(Kt,{className:"h-5 w-5 text-red-500 mx-auto"})})]}),r.jsxs(De,{children:[r.jsx(H,{className:"font-medium",children:"Постбеки и API"}),r.jsx(H,{className:"text-center",children:r.jsx(Kt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(Kt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(Kt,{className:"h-5 w-5 text-red-500 mx-auto"})}),r.jsx(H,{className:"text-center",children:r.jsx(ur,{className:"h-5 w-5 text-green-500 mx-auto"})})]})]})]})})})]})}),r.jsx(He,{value:"activity",className:"space-y-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Vr,{className:"h-5 w-5"}),"Логи действий команды"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"История действий всех сотрудников команды"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(D,{variant:"outline",size:"sm",onClick:()=>{const A=j.map($=>({timestamp:new Date($.timestamp).toLocaleString("ru-RU"),username:$.username,action:$.action,resource:$.resource,ipAddress:$.ipAddress,result:$.result})),B=[["Время","Пользователь","Действие","Ресурс","IP адрес","Результат"].join(","),...A.map($=>Object.values($).join(","))].join(`
`),z=new Blob([B],{type:"text/csv"}),U=URL.createObjectURL(z),E=document.createElement("a");E.href=U,E.download=`team-activity-logs-${new Date().toISOString().split("T")[0]}.csv`,E.click()},children:"Экспорт CSV"}),r.jsx(D,{variant:"outline",size:"sm",onClick:()=>{const A=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),T=URL.createObjectURL(A),B=document.createElement("a");B.href=T,B.download=`team-activity-logs-${new Date().toISOString().split("T")[0]}.json`,B.click()},children:"Экспорт JSON"})]})]})}),r.jsx(W,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Время"}),r.jsx(Z,{children:"Пользователь"}),r.jsx(Z,{children:"Действие"}),r.jsx(Z,{children:"Ресурс"}),r.jsx(Z,{children:"IP адрес"}),r.jsx(Z,{children:"Результат"})]})}),r.jsx(It,{children:y?r.jsx(De,{children:r.jsx(H,{colSpan:6,className:"text-center",children:"Загрузка логов..."})}):j.length===0?r.jsx(De,{children:r.jsx(H,{colSpan:6,className:"text-center",children:"Логи активности не найдены"})}):j.slice(0,50).map(A=>r.jsxs(De,{children:[r.jsx(H,{children:r.jsx("div",{className:"text-sm",children:new Date(A.timestamp).toLocaleString("ru-RU")})}),r.jsx(H,{children:r.jsx("div",{className:"font-medium",children:A.username})}),r.jsx(H,{children:r.jsx(ie,{variant:"outline",children:A.action})}),r.jsx(H,{children:A.resource}),r.jsx(H,{children:r.jsx("code",{className:"text-xs",children:A.ipAddress})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[A.result==="success"&&r.jsx(ur,{className:"h-4 w-4 text-green-500"}),A.result==="failed"&&r.jsx(Kt,{className:"h-4 w-4 text-red-500"}),A.result==="warning"&&r.jsx(Ka,{className:"h-4 w-4 text-yellow-500"}),r.jsx("span",{className:"capitalize text-sm",children:A.result})]})})]},A.id))})]})})})]})})]}),r.jsx(_t,{open:i||!!o,onOpenChange:A=>{A||(l(!1),c(null),R())},children:r.jsxs(kt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto","aria-describedby":"team-member-dialog-description",children:[r.jsx(St,{children:r.jsx(Ct,{children:o?"Редактировать сотрудника":"Добавить сотрудника"})}),r.jsxs("div",{id:"team-member-dialog-description",className:"sr-only",children:["Форма для ",o?"редактирования данных":"добавления нового"," сотрудника в команду с настройкой ролей и разрешений"]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Основная информация"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"username",children:"Username *"}),r.jsx(ne,{id:"username",value:h.username,onChange:A=>f(T=>({...T,username:A.target.value})),placeholder:"username","data-testid":"input-member-username"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"email",children:"Email *"}),r.jsx(ne,{id:"email",type:"email",value:h.email,onChange:A=>f(T=>({...T,email:A.target.value})),placeholder:"user@example.com","data-testid":"input-member-email"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"firstName",children:"Имя *"}),r.jsx(ne,{id:"firstName",value:h.firstName,onChange:A=>f(T=>({...T,firstName:A.target.value})),placeholder:"Иван","data-testid":"input-member-firstname"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"lastName",children:"Фамилия *"}),r.jsx(ne,{id:"lastName",value:h.lastName,onChange:A=>f(T=>({...T,lastName:A.target.value})),placeholder:"Иванов","data-testid":"input-member-lastname"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Роль и права доступа"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Роль"}),r.jsxs(fe,{value:h.role,onValueChange:O,children:[r.jsx(ue,{"data-testid":"select-member-role",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"manager",children:"Менеджер"}),r.jsx(C,{value:"analyst",children:"Аналитик"}),r.jsx(C,{value:"financier",children:"Финансист"}),r.jsx(C,{value:"support",children:"Техподдержка"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(F,{children:"Разрешения"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{htmlFor:"manageOffers",className:"text-sm",children:"Управление офферами"}),r.jsx(Je,{id:"manageOffers",checked:h.permissions.manageOffers,onCheckedChange:A=>f(T=>({...T,permissions:{...T.permissions,manageOffers:A}})),"data-testid":"switch-manage-offers"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{htmlFor:"managePartners",className:"text-sm",children:"Управление партнёрами"}),r.jsx(Je,{id:"managePartners",checked:h.permissions.managePartners,onCheckedChange:A=>f(T=>({...T,permissions:{...T.permissions,managePartners:A}})),"data-testid":"switch-manage-partners"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{htmlFor:"viewStatistics",className:"text-sm",children:"Просмотр статистики"}),r.jsx(Je,{id:"viewStatistics",checked:h.permissions.viewStatistics,onCheckedChange:A=>f(T=>({...T,permissions:{...T.permissions,viewStatistics:A}})),"data-testid":"switch-view-statistics"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{htmlFor:"financialOperations",className:"text-sm",children:"Финансовые операции"}),r.jsx(Je,{id:"financialOperations",checked:h.permissions.financialOperations,onCheckedChange:A=>f(T=>({...T,permissions:{...T.permissions,financialOperations:A}})),"data-testid":"switch-financial-operations"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{htmlFor:"postbacksApi",className:"text-sm",children:"Постбеки и API"}),r.jsx(Je,{id:"postbacksApi",checked:h.permissions.postbacksApi,onCheckedChange:A=>f(T=>({...T,permissions:{...T.permissions,postbacksApi:A}})),"data-testid":"switch-postbacks-api"})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Ограничения доступа"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"ipWhitelist",children:"IP белый список (через запятую)"}),r.jsx(gt,{id:"ipWhitelist",value:h.restrictions.ipWhitelist.join(", "),onChange:A=>f(T=>({...T,restrictions:{...T.restrictions,ipWhitelist:A.target.value.split(",").map(B=>B.trim()).filter(Boolean)}})),placeholder:"192.168.1.1, 10.0.0.1","data-testid":"textarea-ip-whitelist"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"geoRestrictions",children:"GEO ограничения (коды стран через запятую)"}),r.jsx(ne,{id:"geoRestrictions",value:h.restrictions.geoRestrictions.join(", "),onChange:A=>f(T=>({...T,restrictions:{...T.restrictions,geoRestrictions:A.target.value.split(",").map(B=>B.trim()).filter(Boolean)}})),placeholder:"RU, US, DE","data-testid":"input-geo-restrictions"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Временные ограничения"}),r.jsx(Je,{checked:h.restrictions.timeRestrictions.enabled,onCheckedChange:A=>f(T=>({...T,restrictions:{...T.restrictions,timeRestrictions:{...T.restrictions.timeRestrictions,enabled:A}}})),"data-testid":"switch-time-restrictions"})]}),h.restrictions.timeRestrictions.enabled&&r.jsxs("div",{className:"grid grid-cols-2 gap-4 pl-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"startTime",children:"Начало работы"}),r.jsx(ne,{id:"startTime",type:"time",value:h.restrictions.timeRestrictions.startTime,onChange:A=>f(T=>({...T,restrictions:{...T.restrictions,timeRestrictions:{...T.restrictions.timeRestrictions,startTime:A.target.value}}})),"data-testid":"input-start-time"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"endTime",children:"Конец работы"}),r.jsx(ne,{id:"endTime",type:"time",value:h.restrictions.timeRestrictions.endTime,onChange:A=>f(T=>({...T,restrictions:{...T.restrictions,timeRestrictions:{...T.restrictions.timeRestrictions,endTime:A.target.value}}})),"data-testid":"input-end-time"})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium",children:"Telegram уведомления"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{htmlFor:"telegramNotifications",children:"Включить Telegram уведомления"}),r.jsx(Je,{id:"telegramNotifications",checked:h.telegramNotifications,onCheckedChange:A=>f(T=>({...T,telegramNotifications:A})),"data-testid":"switch-telegram-notifications"})]}),h.telegramNotifications&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"telegramUserId",children:"Telegram User ID"}),r.jsx(ne,{id:"telegramUserId",value:h.telegramUserId,onChange:A=>f(T=>({...T,telegramUserId:A.target.value})),placeholder:"123456789","data-testid":"input-telegram-user-id"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(D,{variant:"outline",onClick:()=>{l(!1),c(null),R()},"data-testid":"button-cancel-member",children:"Отмена"}),r.jsxs(D,{onClick:()=>{o?k.mutate({id:o.id,data:h}):h.username&&h.firstName&&h.lastName?N.mutate(h):P()},disabled:N.isPending||k.isPending||p.isPending,"data-testid":"button-save-member",children:[(N.isPending||k.isPending||p.isPending)&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),o?"Сохранить":h.username?"Добавить":"Пригласить"]})]})]})]})})]}):r.jsx("div",{children:"Загрузка..."})}var MY=["PageUp","PageDown"],$Y=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],IY={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ap="Slider",[R_,NVe,kVe]=$v(ap),[FY,iWe]=zn(ap,[kVe]),[SVe,bN]=FY(ap),LY=v.forwardRef((e,t)=>{const{name:n,min:s=0,max:a=100,step:i=1,orientation:l="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:u,onValueChange:h=()=>{},onValueCommit:f=()=>{},inverted:m=!1,form:g,...x}=e,w=v.useRef(new Set),j=v.useRef(0),b=l==="horizontal"?CVe:PVe,[p=[],N]=Di({prop:u,defaultProp:d,onChange:O=>{var A;(A=[...w.current][j.current])==null||A.focus(),h(O)}}),k=v.useRef(p);function S(O){const M=OVe(p,O);R(O,M)}function P(O){R(O,j.current)}function _(){const O=k.current[j.current];p[j.current]!==O&&f(p)}function R(O,M,{commit:A}={commit:!1}){const T=$Ve(i),B=IVe(Math.round((O-s)/i)*i+s,T),z=tg(B,[s,a]);N((U=[])=>{const E=TVe(U,z,M);if(MVe(E,c*i)){j.current=E.indexOf(z);const $=String(E)!==String(U);return $&&A&&f(E),$?E:U}else return U})}return r.jsx(SVe,{scope:e.__scopeSlider,name:n,disabled:o,min:s,max:a,valueIndexToChangeRef:j,thumbs:w.current,values:p,orientation:l,form:g,children:r.jsx(R_.Provider,{scope:e.__scopeSlider,children:r.jsx(R_.Slot,{scope:e.__scopeSlider,children:r.jsx(b,{"aria-disabled":o,"data-disabled":o?"":void 0,...x,ref:t,onPointerDown:Le(x.onPointerDown,()=>{o||(k.current=p)}),min:s,max:a,inverted:m,onSlideStart:o?void 0:S,onSlideMove:o?void 0:P,onSlideEnd:o?void 0:_,onHomeKeyDown:()=>!o&&R(s,0,{commit:!0}),onEndKeyDown:()=>!o&&R(a,p.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:M})=>{if(!o){const B=MY.includes(O.key)||O.shiftKey&&$Y.includes(O.key)?10:1,z=j.current,U=p[z],E=i*B*M;R(U+E,z,{commit:!0})}}})})})})});LY.displayName=ap;var[UY,BY]=FY(ap,{startEdge:"left",endEdge:"right",size:"width",direction:1}),CVe=v.forwardRef((e,t)=>{const{min:n,max:s,dir:a,inverted:i,onSlideStart:l,onSlideMove:o,onSlideEnd:c,onStepKeyDown:d,...u}=e,[h,f]=v.useState(null),m=jt(t,b=>f(b)),g=v.useRef(void 0),x=Im(a),w=x==="ltr",j=w&&!i||!w&&i;function y(b){const p=g.current||h.getBoundingClientRect(),N=[0,p.width],S=OE(N,j?[n,s]:[s,n]);return g.current=p,S(b-p.left)}return r.jsx(UY,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:r.jsx(zY,{dir:x,"data-orientation":"horizontal",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const p=y(b.clientX);l==null||l(p)},onSlideMove:b=>{const p=y(b.clientX);o==null||o(p)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:b=>{const N=IY[j?"from-left":"from-right"].includes(b.key);d==null||d({event:b,direction:N?-1:1})}})})}),PVe=v.forwardRef((e,t)=>{const{min:n,max:s,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:o,onStepKeyDown:c,...d}=e,u=v.useRef(null),h=jt(t,u),f=v.useRef(void 0),m=!a;function g(x){const w=f.current||u.current.getBoundingClientRect(),j=[0,w.height],b=OE(j,m?[s,n]:[n,s]);return f.current=w,b(x-w.top)}return r.jsx(UY,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:r.jsx(zY,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const w=g(x.clientY);i==null||i(w)},onSlideMove:x=>{const w=g(x.clientY);l==null||l(w)},onSlideEnd:()=>{f.current=void 0,o==null||o()},onStepKeyDown:x=>{const j=IY[m?"from-bottom":"from-top"].includes(x.key);c==null||c({event:x,direction:j?-1:1})}})})}),zY=v.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:o,onStepKeyDown:c,...d}=e,u=bN(ap,n);return r.jsx(Xe.span,{...d,ref:t,onKeyDown:Le(e.onKeyDown,h=>{h.key==="Home"?(l(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):MY.concat($Y).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:Le(e.onPointerDown,h=>{const f=h.target;f.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(f)?f.focus():s(h)}),onPointerMove:Le(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:Le(e.onPointerUp,h=>{const f=h.target;f.hasPointerCapture(h.pointerId)&&(f.releasePointerCapture(h.pointerId),i(h))})})}),VY="SliderTrack",qY=v.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=bN(VY,n);return r.jsx(Xe.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});qY.displayName=VY;var D_="SliderRange",WY=v.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=bN(D_,n),i=BY(D_,n),l=v.useRef(null),o=jt(t,l),c=a.values.length,d=a.values.map(f=>KY(f,a.min,a.max)),u=c>1?Math.min(...d):0,h=100-Math.max(...d);return r.jsx(Xe.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:o,style:{...e.style,[i.startEdge]:u+"%",[i.endEdge]:h+"%"}})});WY.displayName=D_;var M_="SliderThumb",HY=v.forwardRef((e,t)=>{const n=NVe(e.__scopeSlider),[s,a]=v.useState(null),i=jt(t,o=>a(o)),l=v.useMemo(()=>s?n().findIndex(o=>o.ref.current===s):-1,[n,s]);return r.jsx(_Ve,{...e,ref:i,index:l})}),_Ve=v.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:a,...i}=e,l=bN(M_,n),o=BY(M_,n),[c,d]=v.useState(null),u=jt(t,y=>d(y)),h=c?l.form||!!c.closest("form"):!0,f=Xw(c),m=l.values[s],g=m===void 0?0:KY(m,l.min,l.max),x=EVe(s,l.values.length),w=f==null?void 0:f[o.size],j=w?RVe(w,g,o.direction):0;return v.useEffect(()=>{if(c)return l.thumbs.add(c),()=>{l.thumbs.delete(c)}},[c,l.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${g}% + ${j}px)`},children:[r.jsx(R_.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(Xe.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":l.min,"aria-valuenow":m,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:u,style:m===void 0?{display:"none"}:e.style,onFocus:Le(e.onFocus,()=>{l.valueIndexToChangeRef.current=s})})}),h&&r.jsx(AVe,{name:a??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:m},s)]})});HY.displayName=M_;var AVe=e=>{const{value:t,...n}=e,s=v.useRef(null),a=u1(t);return v.useEffect(()=>{const i=s.current,l=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&c){const d=new Event("input",{bubbles:!0});c.call(i,t),i.dispatchEvent(d)}},[a,t]),r.jsx("input",{style:{display:"none"},...n,ref:s,defaultValue:t})};function TVe(e=[],t,n){const s=[...e];return s[n]=t,s.sort((a,i)=>a-i)}function KY(e,t,n){const i=100/(n-t)*(e-t);return tg(i,[0,100])}function EVe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function OVe(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),s=Math.min(...n);return n.indexOf(s)}function RVe(e,t,n){const s=e/2,i=OE([0,50],[0,s]);return(s-i(t)*n)*n}function DVe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function MVe(e,t){if(t>0){const n=DVe(e);return Math.min(...n)>=t}return!0}function OE(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function $Ve(e){return(String(e).split(".")[1]||"").length}function IVe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var GY=LY,FVe=qY,LVe=WY,UVe=HY;const YY=v.forwardRef(({className:e,...t},n)=>r.jsxs(GY,{ref:n,className:Ee("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(FVe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(LVe,{className:"absolute h-full bg-primary"})}),r.jsx(UVe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));YY.displayName=GY.displayName;const Ip={bot:"Бот-трафик",vpn:"VPN",proxy:"Прокси",duplicate:"Дубликаты",suspicious_cr:"Подозр. CR",click_spam:"Клик-спам",tor:"TOR-сеть"},y0={bot:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",vpn:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",proxy:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",duplicate:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",suspicious_cr:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300",click_spam:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300",tor:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"},FF={blocked:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",flagged:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",ignored:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",pending:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},BVe={confirmed:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",false_positive:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"};function zVe(){var O,M,A,T,B,z,U,E,$,G,oe,ee,ce,ye,je,$e,ke,be,pe,le,Ie,ae,st;const{user:e}=tr(),{toast:t}=at(),n=Et(),[s,a]=v.useState("dashboard"),[i,l]=v.useState("24h"),[o,c]=v.useState(null),[d,u]=v.useState({search:"",fraudType:"all",action:"all",status:"all",partner:"all",country:"all"}),{data:h,isLoading:f,refetch:m}=Fe({queryKey:["/api/advertiser/antifraud/dashboard",i],queryFn:async()=>await Re(`/api/advertiser/antifraud/dashboard?range=${i}`)}),{data:g,isLoading:x,refetch:w}=Fe({queryKey:["/api/advertiser/antifraud/events",d],queryFn:async()=>{const K=new URLSearchParams;return Object.entries(d).forEach(([de,Be])=>{Be&&Be!=="all"&&K.append(de,Be)}),await Re(`/api/advertiser/antifraud/events?${K}`)}}),{data:j,isLoading:y}=Fe({queryKey:["/api/advertiser/antifraud/settings"],queryFn:async()=>await Re("/api/advertiser/antifraud/settings")}),b=Oe({mutationFn:async K=>await Re("/api/advertiser/antifraud/settings","POST",K),onSuccess:()=>{t({title:"Настройки сохранены",description:"Настройки антифрод системы успешно обновлены"}),n.invalidateQueries({queryKey:["/api/advertiser/antifraud/settings"]})},onError:()=>{t({title:"Ошибка",description:"Не удалось сохранить настройки",variant:"destructive"})}}),p=Oe({mutationFn:async({eventId:K,status:Me})=>await Re("/api/advertiser/antifraud/confirm-event","POST",{eventId:K,status:Me}),onSuccess:()=>{t({title:"Событие обновлено",description:"Статус события успешно изменен"}),w(),m()},onError:()=>{t({title:"Ошибка",description:"Не удалось обновить событие",variant:"destructive"})}}),N=Oe({mutationFn:async({partnerId:K,reason:Me})=>await Re("/api/advertiser/antifraud/block-partner","POST",{partnerId:K,reason:Me}),onSuccess:()=>{t({title:"Партнер заблокирован",description:"Партнер успешно заблокирован из-за фродовой активности"}),w()},onError:()=>{t({title:"Ошибка",description:"Не удалось заблокировать партнера",variant:"destructive"})}}),k=(K,Me)=>{if(!j)return;const de={...j},Be=K.split(".");let qe=de;for(let Qe=0;Qe<Be.length-1;Qe++)qe=qe[Be[Qe]];qe[Be[Be.length-1]]=Me,b.mutate(de)},S=(K,Me)=>{p.mutate({eventId:K,status:Me}),c(null)},P=(K,Me)=>{N.mutate({partnerId:K,reason:"Автоблокировка из-за высокой фродовой активности"})},_=K=>{if(K==="csv"){const Me=[["Дата","Партнер","Оффер","SubID","IP","Страна","Тип фрода","Действие","Статус"],...(g||[]).map(Qe=>[Qe.timestamp,Qe.partnerName,Qe.offerName,Qe.subId,Qe.ip,Qe.country,Ip[Qe.fraudType],Qe.action,Qe.status])].map(Qe=>Qe.join(",")).join(`
`),de=new Blob([Me],{type:"text/csv"}),Be=URL.createObjectURL(de),qe=document.createElement("a");qe.href=Be,qe.download=`antifraud-events-${new Date().toISOString().split("T")[0]}.csv`,qe.click()}t({title:"Экспорт завершен",description:`Данные антифрод системы экспортированы в формате ${K.toUpperCase()}`})},R=Array.isArray(g)?g.filter(K=>{const Me=K.partnerName.toLowerCase().includes(d.search.toLowerCase())||K.offerName.toLowerCase().includes(d.search.toLowerCase())||K.subId.toLowerCase().includes(d.search.toLowerCase())||K.ip.includes(d.search),de=d.fraudType==="all"||K.fraudType===d.fraudType,Be=d.action==="all"||K.action===d.action,qe=d.status==="all"||K.status===d.status,Qe=d.country==="all"||K.country===d.country;return Me&&de&&Be&&qe&&Qe}):[];return e?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[r.jsx(Dt,{className:"h-8 w-8 text-red-500"}),"Антифрод-система"]}),r.jsx("p",{className:"text-muted-foreground",children:"Анализ, мониторинг и защита от фродового трафика"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(fe,{value:i,onValueChange:l,children:[r.jsx(ue,{className:"w-32","data-testid":"select-date-range",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"1h",children:"1 час"}),r.jsx(C,{value:"24h",children:"24 часа"}),r.jsx(C,{value:"7d",children:"7 дней"}),r.jsx(C,{value:"30d",children:"30 дней"})]})]}),r.jsxs(D,{variant:"outline",onClick:()=>{m(),w()},"data-testid":"button-refresh",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Обновить"]})]})]}),r.jsxs(rn,{value:s,onValueChange:a,className:"w-full",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-4 bg-gradient-to-r from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 p-1",children:[r.jsx(We,{value:"dashboard",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-cyan-500 data-[state=active]:to-blue-500 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-cyan-100 dark:hover:bg-cyan-900",children:"🎯 Дашборд"}),r.jsx(We,{value:"events",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-orange-500 data-[state=active]:to-red-500 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-orange-100 dark:hover:bg-orange-900",children:"⚡ События"}),r.jsx(We,{value:"settings",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-pink-500 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-purple-100 dark:hover:bg-purple-900",children:"⚙️ Настройки"}),r.jsx(We,{value:"reports",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-emerald-500 data-[state=active]:to-green-500 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-emerald-100 dark:hover:bg-emerald-900",children:"📊 Отчеты"})]}),r.jsxs(He,{value:"dashboard",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(q,{className:"bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-cyan-900/20 dark:to-blue-900/20 border-cyan-200 dark:border-cyan-700",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-cyan-700 dark:text-cyan-300",children:"Всего событий"}),r.jsx("div",{className:"p-2 bg-cyan-500 rounded-xl shadow-lg",children:r.jsx(Vr,{className:"h-4 w-4 text-white"})})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold text-cyan-900 dark:text-cyan-100",children:f?"...":((O=h==null?void 0:h.totalEvents)==null?void 0:O.toLocaleString())||"0"}),r.jsx("p",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:"За выбранный период"})]})]}),r.jsxs(q,{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 border-red-200 dark:border-red-700",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Заблокировано"}),r.jsx("div",{className:"p-2 bg-red-500 rounded-xl shadow-lg",children:r.jsx(Kx,{className:"h-4 w-4 text-white"})})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:f?"...":((M=h==null?void 0:h.blockedEvents)==null?void 0:M.toLocaleString())||"0"}),r.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"Фродовых событий"})]})]}),r.jsxs(q,{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-orange-200 dark:border-orange-700",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"Уровень фрода"}),r.jsx("div",{className:"p-2 bg-orange-500 rounded-xl shadow-lg",children:r.jsx(Ka,{className:"h-4 w-4 text-white"})})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:f?"...":`${((A=h==null?void 0:h.fraudRate)==null?void 0:A.toFixed(2))||"0"}%`}),r.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:"От общего трафика"})]})]}),r.jsxs(q,{className:"bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20 border-emerald-200 dark:border-emerald-700",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-emerald-700 dark:text-emerald-300",children:"Защищено"}),r.jsx("div",{className:"p-2 bg-emerald-500 rounded-xl shadow-lg",children:r.jsx(Dt,{className:"h-4 w-4 text-white"})})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold text-emerald-900 dark:text-emerald-100",children:f?"...":`${(100-((h==null?void 0:h.fraudRate)||0)).toFixed(2)}%`}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Чистого трафика"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Топ типы фрода"})}),r.jsx(W,{children:f?r.jsx("div",{children:"Загрузка..."}):r.jsx("div",{className:"space-y-3",children:(T=h==null?void 0:h.topFraudTypes)==null?void 0:T.map((K,Me)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx(ie,{className:y0[K.type],children:Ip[K.type]})}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ru,{value:K.percentage,className:"w-20"}),r.jsx("span",{className:"text-sm font-medium",children:K.count})]})]},K.type))})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Проблемные партнеры"})}),r.jsx(W,{children:f?r.jsx("div",{children:"Загрузка..."}):r.jsx("div",{className:"space-y-3",children:(B=h==null?void 0:h.topFraudPartners)==null?void 0:B.map((K,Me)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:K.partnerName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",K.partnerId]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs(ie,{variant:"destructive",children:[K.fraudRate.toFixed(1),"% фрода"]}),r.jsx(D,{size:"sm",variant:"destructive",onClick:()=>P(K.partnerId,K.partnerName),"data-testid":`button-block-partner-${K.partnerId}`,children:r.jsx(Kx,{className:"h-3 w-3"})})]})]},K.partnerId))})})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Недавние события"})}),r.jsx(W,{children:f?r.jsx("div",{children:"Загрузка..."}):r.jsx("div",{className:"space-y-3",children:(z=h==null?void 0:h.recentEvents)==null?void 0:z.slice(0,5).map(K=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ie,{className:y0[K.fraudType],children:Ip[K.fraudType]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:K.partnerName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[K.ip," • ",K.country," • ",new Date(K.timestamp).toLocaleString("ru-RU")]})]})]}),r.jsx(ie,{className:FF[K.action],children:K.action})]},K.id))})})]})]}),r.jsxs(He,{value:"events",className:"space-y-6",children:[r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"⚡ Фильтры событий"})}),r.jsx(W,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Поиск"}),r.jsx(ne,{placeholder:"Партнер, IP, SubID...",value:d.search,onChange:K=>u(Me=>({...Me,search:K.target.value})),"data-testid":"input-search-events"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Тип фрода"}),r.jsxs(fe,{value:d.fraudType,onValueChange:K=>u(Me=>({...Me,fraudType:K})),children:[r.jsx(ue,{"data-testid":"select-fraud-type-filter",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все типы"}),r.jsx(C,{value:"bot",children:"Боты"}),r.jsx(C,{value:"vpn",children:"VPN"}),r.jsx(C,{value:"proxy",children:"Прокси"}),r.jsx(C,{value:"duplicate",children:"Дубликаты"}),r.jsx(C,{value:"suspicious_cr",children:"Подозр. CR"}),r.jsx(C,{value:"click_spam",children:"Клик-спам"}),r.jsx(C,{value:"tor",children:"TOR"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Действие"}),r.jsxs(fe,{value:d.action,onValueChange:K=>u(Me=>({...Me,action:K})),children:[r.jsx(ue,{"data-testid":"select-action-filter",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все действия"}),r.jsx(C,{value:"blocked",children:"Заблокировано"}),r.jsx(C,{value:"flagged",children:"Помечено"}),r.jsx(C,{value:"ignored",children:"Игнорировано"}),r.jsx(C,{value:"pending",children:"В ожидании"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Статус"}),r.jsxs(fe,{value:d.status,onValueChange:K=>u(Me=>({...Me,status:K})),children:[r.jsx(ue,{"data-testid":"select-status-filter",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все статусы"}),r.jsx(C,{value:"confirmed",children:"Подтвержден"}),r.jsx(C,{value:"false_positive",children:"Ложноположительный"}),r.jsx(C,{value:"pending",children:"В ожидании"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Страна"}),r.jsxs(fe,{value:d.country,onValueChange:K=>u(Me=>({...Me,country:K})),children:[r.jsx(ue,{"data-testid":"select-country-filter",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все страны"}),r.jsx(C,{value:"RU",children:"Россия"}),r.jsx(C,{value:"US",children:"США"}),r.jsx(C,{value:"DE",children:"Германия"}),r.jsx(C,{value:"BR",children:"Бразилия"}),r.jsx(C,{value:"IN",children:"Индия"})]})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsxs(D,{onClick:()=>_("csv"),variant:"outline","data-testid":"button-export-events",children:[r.jsx(br,{className:"h-4 w-4 mr-2"}),"Экспорт"]})})]})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{children:["События фрода (",R.length,")"]})}),r.jsx(W,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Время"}),r.jsx(Z,{children:"Партнер"}),r.jsx(Z,{children:"Оффер"}),r.jsx(Z,{children:"SubID"}),r.jsx(Z,{children:"IP / Страна"}),r.jsx(Z,{children:"Тип фрода"}),r.jsx(Z,{children:"Риск"}),r.jsx(Z,{children:"Действие"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Действия"})]})}),r.jsx(It,{children:x?r.jsx(De,{children:r.jsx(H,{colSpan:10,className:"text-center",children:"Загрузка..."})}):R.length===0?r.jsx(De,{children:r.jsx(H,{colSpan:10,className:"text-center",children:"События не найдены"})}):R.map(K=>r.jsxs(De,{children:[r.jsx(H,{children:r.jsx("div",{className:"text-sm",children:new Date(K.timestamp).toLocaleString("ru-RU")})}),r.jsx(H,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:K.partnerName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",K.partnerId]})]})}),r.jsx(H,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:K.offerName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",K.offerId]})]})}),r.jsx(H,{children:r.jsx(ie,{variant:"outline",children:K.subId})}),r.jsx(H,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-mono text-sm",children:K.ip}),r.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[r.jsx(Ff,{className:"h-3 w-3"}),K.country]})]})}),r.jsx(H,{children:r.jsx(ie,{className:y0[K.fraudType],children:Ip[K.fraudType]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ru,{value:K.riskScore,className:"w-16"}),r.jsxs("span",{className:"text-sm",children:[K.riskScore,"%"]})]})}),r.jsx(H,{children:r.jsx(ie,{className:FF[K.action],children:K.action})}),r.jsx(H,{children:r.jsx(ie,{className:BVe[K.status],children:K.status})}),r.jsx(H,{children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>c(K),"data-testid":`button-view-event-${K.id}`,title:"Просмотреть детали",children:r.jsx(ir,{className:"h-3 w-3"})}),K.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>S(K.id,"confirmed"),"data-testid":`button-confirm-event-${K.id}`,title:"Подтвердить фрод",children:r.jsx(ur,{className:"h-3 w-3 text-red-500"})}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>S(K.id,"false_positive"),"data-testid":`button-false-positive-${K.id}`,title:"Отметить как ложное срабатывание",children:r.jsx(Kt,{className:"h-3 w-3 text-green-500"})})]})]})})]},K.id))})]})})})]})]}),r.jsx(He,{value:"settings",className:"space-y-6",children:y?r.jsx("div",{children:"Загрузка настроек..."}):r.jsxs(r.Fragment,{children:[r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"⚙️ Основные настройки"})}),r.jsxs(W,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-base",children:"Включить антифрод защиту"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Основной переключатель антифрод системы"})]}),r.jsx(Je,{checked:(j==null?void 0:j.enabled)||!1,onCheckedChange:K=>k("enabled",K),"data-testid":"switch-antifraud-enabled"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(F,{className:"text-base",children:["Уровень чувствительности: ",(j==null?void 0:j.sensitivity)||5]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"1 - минимальный, 10 - максимальный"}),r.jsx(YY,{value:[(j==null?void 0:j.sensitivity)||5],onValueChange:K=>k("sensitivity",K[0]),min:1,max:10,step:1,className:"w-full","data-testid":"slider-sensitivity"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-base",children:"Автоматическая блокировка"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Блокировать подозрительный трафик автоматически"})]}),r.jsx(Je,{checked:(j==null?void 0:j.autoBlock)||!1,onCheckedChange:K=>k("autoBlock",K),"data-testid":"switch-auto-block"})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Ore,{className:"h-5 w-5"}),"🤖 Детекция ботов"]})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Включить детекцию ботов"}),r.jsx(Je,{checked:((U=j==null?void 0:j.botDetection)==null?void 0:U.enabled)||!1,onCheckedChange:K=>k("botDetection.enabled",K),"data-testid":"switch-bot-detection"})]}),((E=j==null?void 0:j.botDetection)==null?void 0:E.enabled)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Проверка JavaScript"}),r.jsx(Je,{checked:(($=j==null?void 0:j.botDetection)==null?void 0:$.checkJs)||!1,onCheckedChange:K=>k("botDetection.checkJs",K),"data-testid":"switch-check-js"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Детекция headless браузеров"}),r.jsx(Je,{checked:((G=j==null?void 0:j.botDetection)==null?void 0:G.checkHeadless)||!1,onCheckedChange:K=>k("botDetection.checkHeadless",K),"data-testid":"switch-check-headless"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Проверка взаимодействий"}),r.jsx(Je,{checked:((oe=j==null?void 0:j.botDetection)==null?void 0:oe.checkInteraction)||!1,onCheckedChange:K=>k("botDetection.checkInteraction",K),"data-testid":"switch-check-interaction"})]})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(mr,{className:"h-5 w-5"}),"🌐 VPN/Proxy детекция"]})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Включить детекцию VPN/Proxy"}),r.jsx(Je,{checked:((ee=j==null?void 0:j.vpnProxyDetection)==null?void 0:ee.enabled)||!1,onCheckedChange:K=>k("vpnProxyDetection.enabled",K),"data-testid":"switch-vpn-proxy-detection"})]}),((ce=j==null?void 0:j.vpnProxyDetection)==null?void 0:ce.enabled)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Блокировать VPN"}),r.jsx(Je,{checked:((ye=j==null?void 0:j.vpnProxyDetection)==null?void 0:ye.blockVpn)||!1,onCheckedChange:K=>k("vpnProxyDetection.blockVpn",K),"data-testid":"switch-block-vpn"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Блокировать Proxy"}),r.jsx(Je,{checked:((je=j==null?void 0:j.vpnProxyDetection)==null?void 0:je.blockProxy)||!1,onCheckedChange:K=>k("vpnProxyDetection.blockProxy",K),"data-testid":"switch-block-proxy"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Блокировать TOR"}),r.jsx(Je,{checked:(($e=j==null?void 0:j.vpnProxyDetection)==null?void 0:$e.blockTor)||!1,onCheckedChange:K=>k("vpnProxyDetection.blockTor",K),"data-testid":"switch-block-tor"})]})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(kb,{className:"h-5 w-5"}),"⚡ Детекция клик-спама"]})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Включить детекцию клик-спама"}),r.jsx(Je,{checked:((ke=j==null?void 0:j.clickSpamDetection)==null?void 0:ke.enabled)||!1,onCheckedChange:K=>k("clickSpamDetection.enabled",K),"data-testid":"switch-click-spam-detection"})]}),((be=j==null?void 0:j.clickSpamDetection)==null?void 0:be.enabled)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Макс. кликов с одного IP"}),r.jsx(ne,{type:"number",value:((pe=j==null?void 0:j.clickSpamDetection)==null?void 0:pe.maxClicksPerIp)||5,onChange:K=>k("clickSpamDetection.maxClicksPerIp",parseInt(K.target.value)),"data-testid":"input-max-clicks-per-ip"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Временное окно (минуты)"}),r.jsx(ne,{type:"number",value:((le=j==null?void 0:j.clickSpamDetection)==null?void 0:le.timeWindow)||60,onChange:K=>k("clickSpamDetection.timeWindow",parseInt(K.target.value)),"data-testid":"input-time-window"})]})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx($n,{className:"h-5 w-5"}),"🔔 Уведомления"]})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Email уведомления"}),r.jsx(Je,{checked:((Ie=j==null?void 0:j.notifications)==null?void 0:Ie.email)||!1,onCheckedChange:K=>k("notifications.email",K),"data-testid":"switch-email-notifications"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Telegram уведомления"}),r.jsx(Je,{checked:((ae=j==null?void 0:j.notifications)==null?void 0:ae.telegram)||!1,onCheckedChange:K=>k("notifications.telegram",K),"data-testid":"switch-telegram-notifications"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Порог уведомлений (событий в час)"}),r.jsx(ne,{type:"number",value:((st=j==null?void 0:j.notifications)==null?void 0:st.threshold)||10,onChange:K=>k("notifications.threshold",parseInt(K.target.value)),"data-testid":"input-notification-threshold"})]})]})]})]})}),r.jsx(He,{value:"reports",className:"space-y-6",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"📊 Генерация отчетов"})}),r.jsx(W,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(D,{onClick:()=>_("pdf"),className:"h-24 flex-col gap-2",variant:"outline","data-testid":"button-export-pdf",children:[r.jsx(br,{className:"h-6 w-6"}),"📄 PDF Отчет"]}),r.jsxs(D,{onClick:()=>_("csv"),className:"h-24 flex-col gap-2",variant:"outline","data-testid":"button-export-csv",children:[r.jsx(Ba,{className:"h-6 w-6"}),"📊 CSV Экспорт"]}),r.jsxs(D,{onClick:()=>_("json"),className:"h-24 flex-col gap-2",variant:"outline","data-testid":"button-export-json",children:[r.jsx(br,{className:"h-6 w-6"}),"💾 JSON Данные"]})]})})]})})]}),r.jsx(_t,{open:!!o,onOpenChange:()=>c(null),children:r.jsxs(kt,{className:"max-w-2xl",children:[r.jsx(St,{children:r.jsx(Ct,{children:"Детали события фрода"})}),o&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Время"}),r.jsx("p",{children:new Date(o.timestamp).toLocaleString("ru-RU")})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Тип фрода"}),r.jsx(ie,{className:y0[o.fraudType],children:Ip[o.fraudType]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Партнер"}),r.jsxs("p",{children:[o.partnerName," (ID: ",o.partnerId,")"]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Оффер"}),r.jsxs("p",{children:[o.offerName," (ID: ",o.offerId,")"]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"SubID"}),r.jsx("p",{children:o.subId})]}),r.jsxs("div",{children:[r.jsx(F,{children:"IP адрес"}),r.jsx("p",{className:"font-mono",children:o.ip})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Страна"}),r.jsx("p",{children:o.country})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Оценка риска"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ru,{value:o.riskScore,className:"w-20"}),r.jsxs("span",{children:[o.riskScore,"%"]})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"User Agent"}),r.jsx("p",{className:"text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded",children:o.userAgent})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Детали"}),r.jsx("p",{className:"text-sm",children:o.details})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Отпечаток браузера"}),r.jsx("p",{className:"text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded",children:o.fingerprint})]}),o.status==="pending"&&r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsxs(D,{onClick:()=>S(o.id,"confirmed"),variant:"destructive","data-testid":"button-confirm-fraud",children:[r.jsx(ur,{className:"h-4 w-4 mr-2"}),"Подтвердить фрод"]}),r.jsxs(D,{onClick:()=>S(o.id,"false_positive"),variant:"outline","data-testid":"button-false-positive-fraud",children:[r.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Ложное срабатывание"]})]})]})]})})]}):r.jsx("div",{children:"Загрузка..."})}function VVe(){const[e,t]=v.useState("tracking"),[n,s]=v.useState(""),[a,i]=v.useState({}),[l,o]=v.useState(new Set(["tracking"])),{toast:c}=at(),{data:d,isLoading:u}=Fe({queryKey:["/api/advertiser/documentation"],queryFn:async()=>{try{return await Re("/api/advertiser/documentation")}catch{return[]}}}),h=Oe({mutationFn:async b=>await Re(`/api/advertiser/documentation/${b.sectionId}/feedback`,"POST",b),onSuccess:(b,p)=>{c({title:"Отзыв отправлен",description:"Спасибо за ваш отзыв о документации!"}),i(N=>({...N,[p.sectionId]:{sectionId:p.sectionId,rating:0,comment:"",isHelpful:!1}}))},onError:()=>{c({title:"Ошибка",description:"Не удалось отправить отзыв",variant:"destructive"})}}),f=Oe({mutationFn:async()=>await Re("/api/advertiser/documentation/download-pdf","POST"),onSuccess:b=>{b.url&&window.open(b.url,"_blank"),c({title:"Загрузка начата",description:"PDF-версия документации будет загружена"})},onError:()=>{c({title:"Ошибка",description:"Не удалось загрузить PDF",variant:"destructive"})}}),x=(d||[{id:"tracking",title:"Трек-ссылки",icon:rne,content:"Структура и использование трекинговых ссылок для отслеживания трафика",updated:"2025-08-06T12:00:00Z",examples:[{title:"Базовая трек-ссылка",code:"https://track.example.com/click?offer_id=123&partner_id=456&click_id={click_id}",language:"url",description:"Основная структура трек-ссылки с обязательными параметрами"},{title:"Ссылка с дополнительными параметрами",code:"https://track.example.com/click?offer_id=123&partner_id=456&click_id={click_id}&sub1={sub1}&sub2={sub2}&source=google",language:"url",description:"Трек-ссылка с дополнительными параметрами для детализации"}],subsections:[{id:"parameters",title:"Обязательные параметры",content:`
            • offer_id - идентификатор оффера
            • partner_id - идентификатор партнера  
            • click_id - уникальный идентификатор клика
          `},{id:"optional",title:"Дополнительные параметры",content:`
            • sub1, sub2, sub3, sub4, sub5 - пользовательские параметры
            • source - источник трафика
            • campaign - идентификатор кампании
          `}]},{id:"postbacks",title:"Постбэки",icon:$h,content:"Настройка и использование постбэков для получения уведомлений о конверсиях",updated:"2025-08-06T12:00:00Z",examples:[{title:"Базовый постбэк",code:"https://advertiser.com/postback?click_id={click_id}&status={status}&sum={sum}",language:"url",description:"Основной формат постбэка с базовыми макросами"},{title:"Расширенный постбэк",code:"https://advertiser.com/postback?click_id={click_id}&status={status}&sum={sum}&goal={goal}&partner_id={partner_id}&offer_id={offer_id}&timestamp={timestamp}",language:"url",description:"Постбэк с дополнительными данными"}],subsections:[{id:"macros",title:"Поддерживаемые макросы",content:`
            • {click_id} - ID клика
            • {status} - статус конверсии (approved, rejected, pending)
            • {sum} - сумма выплаты
            • {goal} - цель конверсии
            • {partner_id} - ID партнера
            • {offer_id} - ID оффера
            • {timestamp} - время конверсии
          `}]},{id:"api",title:"API-документация",icon:IR,content:"Полная документация по REST API для интеграции с платформой",updated:"2025-08-06T12:00:00Z",examples:[{title:"Авторизация",code:`curl -H "Authorization: Bearer YOUR_API_TOKEN" \\
  -H "Content-Type: application/json" \\
  https://api.platform.com/api/advertiser/stats`,language:"bash",description:"Пример авторизации с Bearer Token"},{title:"Получение статистики",code:`curl -X GET \\
  -H "Authorization: Bearer YOUR_API_TOKEN" \\
  "https://api.platform.com/api/advertiser/stats?from=2025-08-01&to=2025-08-06"`,language:"bash",description:"Получение статистики за период"}]},{id:"partners",title:"Работа с партнёрами",icon:or,content:"Управление партнёрами, модерация заявок и настройка выплат",updated:"2025-08-06T12:00:00Z",subsections:[{id:"approval",title:"Одобрение партнёров",content:`
            1. Перейдите в раздел "Партнёры"
            2. Найдите заявку в статусе "На рассмотрении"
            3. Проверьте данные партнёра
            4. Нажмите "Одобрить" или "Отклонить"
          `}]},{id:"antifraud",title:"Антифрод-система",icon:Dt,content:"Настройка и мониторинг системы защиты от мошеннического трафика",updated:"2025-08-06T12:00:00Z",subsections:[{id:"metrics",title:"Отслеживаемые метрики",content:`
            • IP-адреса и географическое расположение
            • Частота кликов с одного устройства
            • Паттерны поведения пользователей
            • Качество трафика и конверсий
          `}]},{id:"domains",title:"Домены и HTTPS",icon:mr,content:"Настройка кастомных доменов и SSL-сертификатов",updated:"2025-08-06T12:00:00Z",examples:[{title:"CNAME запись",code:"track.yourdomain.com CNAME track.platform.com",language:"dns",description:"Пример настройки CNAME записи в DNS"}]},{id:"analytics",title:"Аналитика",icon:yr,content:"Интерпретация отчётов и ключевые метрики эффективности",updated:"2025-08-06T12:00:00Z",subsections:[{id:"metrics",title:"Ключевые метрики",content:`
            • CR (Conversion Rate) - коэффициент конверсии
            • EPC (Earnings Per Click) - доход с клика  
            • ROI (Return on Investment) - возврат инвестиций
            • CTR (Click Through Rate) - кликабельность
          `}]},{id:"finances",title:"Финансы и выплаты",icon:cx,content:"Управление балансом, настройка реквизитов и отчёты по выплатам",updated:"2025-08-06T12:00:00Z",subsections:[{id:"payouts",title:"Настройка выплат",content:`
            1. Перейдите в раздел "Финансы" 
            2. Добавьте реквизиты для выплат
            3. Установите минимальную сумму выплаты
            4. Выберите периодичность выплат
          `}]}]).filter(b=>b.title.toLowerCase().includes(n.toLowerCase())||b.content.toLowerCase().includes(n.toLowerCase())),w=async b=>{try{await navigator.clipboard.writeText(b),c({title:"Скопировано",description:"Код скопирован в буфер обмена"})}catch{c({title:"Ошибка",description:"Не удалось скопировать в буфер обмена",variant:"destructive"})}},j=b=>{const p=a[b];if(!p||p.rating===0){c({title:"Ошибка",description:"Пожалуйста, поставьте оценку",variant:"destructive"});return}h.mutate(p)},y=(b,p)=>{i(N=>({...N,[b]:{...N[b],sectionId:b,rating:0,comment:"",isHelpful:!1,...p}}))};return u?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(Ere,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Документация"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Полное руководство по использованию платформы"})]})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs(D,{onClick:()=>f.mutate(),disabled:f.isPending,variant:"outline",className:"flex items-center gap-2",children:[r.jsx(br,{className:"w-4 h-4"}),f.isPending?"Загрузка...":"Скачать PDF"]})})]})}),r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"w-80 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 min-h-screen",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"relative mb-6",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx(ne,{placeholder:"Поиск в документации...",value:n,onChange:b=>s(b.target.value),className:"pl-10","data-testid":"search-documentation"})]}),r.jsx("nav",{className:"space-y-1",children:x.map(b=>{const p=b.icon||es,N=e===b.id,k=l.has(b.id);return r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>{t(b.id),o(k?S=>{const P=new Set(S);return P.delete(b.id),P}:S=>new Set(S).add(b.id))},className:`w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ${N?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,"data-testid":`nav-section-${b.id}`,children:[r.jsx(p,{className:"w-5 h-5"}),r.jsx("span",{className:"flex-1 font-medium",children:b.title}),b.subsections&&b.subsections.length>0&&r.jsx("div",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full",children:b.subsections.length})]}),k&&b.subsections&&r.jsx("div",{className:"ml-8 mt-1 space-y-1",children:b.subsections.map(S=>r.jsx("button",{onClick:()=>{const P=document.getElementById(`subsection-${S.id}`);P==null||P.scrollIntoView({behavior:"smooth"})},className:"w-full text-left p-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded","data-testid":`nav-subsection-${S.id}`,children:S.title},S.id))})]},b.id)})}),r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:r.jsxs(D,{variant:"outline",className:"w-full flex items-center gap-2",onClick:()=>{window.location.href="/advertiser/support"},"data-testid":"button-help-support",children:[r.jsx(Lv,{className:"w-4 h-4"}),"Нужна помощь?"]})})]})}),r.jsx("div",{className:"flex-1 p-6",children:x.length===0?r.jsx(q,{children:r.jsxs(W,{className:"p-8 text-center",children:[r.jsx(Xr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Ничего не найдено"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Попробуйте изменить поисковый запрос"})]})}):x.map(b=>{var N,k,S;if(b.id!==e)return null;const p=b.icon||es;return r.jsxs("div",{className:"space-y-6",children:[r.jsx(q,{children:r.jsx(re,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx(p,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx(se,{className:"text-2xl",children:b.title}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:b.content}),r.jsx("div",{className:"flex items-center gap-2 mt-2",children:r.jsxs(ie,{variant:"outline",children:["Обновлено: ",new Date(b.updated).toLocaleDateString("ru-RU")]})})]})]})})}),b.examples&&b.examples.length>0&&r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(IR,{className:"w-5 h-5"}),"Примеры кода"]})}),r.jsx(W,{className:"space-y-4",children:b.examples.map((P,_)=>r.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 px-4 py-2 border-b flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:P.title}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:P.description})]}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>w(P.code),"data-testid":`copy-example-${_}`,children:r.jsx(Yr,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"p-4 bg-gray-900 text-gray-100 overflow-x-auto",children:r.jsx("code",{className:"text-sm font-mono whitespace-pre",children:P.code})})]},_))})]}),b.subsections&&b.subsections.map(P=>r.jsxs(q,{id:`subsection-${P.id}`,children:[r.jsx(re,{children:r.jsx(se,{className:"text-xl",children:P.title})}),r.jsxs(W,{children:[r.jsx("div",{className:"prose dark:prose-invert max-w-none",children:r.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:P.content})}),P.examples&&P.examples.length>0&&r.jsxs("div",{className:"mt-6 space-y-4",children:[r.jsx("h4",{className:"font-semibold",children:"Примеры:"}),P.examples.map((_,R)=>r.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 px-4 py-2 border-b flex items-center justify-between",children:[r.jsx("span",{className:"font-medium",children:_.title}),r.jsx(D,{size:"sm",variant:"ghost",onClick:()=>w(_.code),children:r.jsx(Yr,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"p-4 bg-gray-900 text-gray-100 overflow-x-auto",children:r.jsx("code",{className:"text-sm font-mono",children:_.code})})]},R))]})]})]},P.id)),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Yx,{className:"w-5 h-5"}),"Оценить раздел"]})}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Помогла ли вам эта документация?"}),r.jsxs("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(P=>{var _;return r.jsx("button",{onClick:()=>y(b.id,{rating:P}),className:`p-1 rounded ${(((_=a[b.id])==null?void 0:_.rating)||0)>=P?"text-yellow-500":"text-gray-300 hover:text-yellow-400"}`,"data-testid":`rating-${b.id}-${P}`,children:r.jsx(hne,{className:"w-5 h-5 fill-current"})},P)}),r.jsxs("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:[((N=a[b.id])==null?void 0:N.rating)||0,"/5"]})]})]}),r.jsx("div",{children:r.jsx(gt,{placeholder:"Оставьте комментарий или предложение...",value:((k=a[b.id])==null?void 0:k.comment)||"",onChange:P=>y(b.id,{comment:P.target.value}),className:"min-h-[100px]","data-testid":`feedback-comment-${b.id}`})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:`helpful-${b.id}`,checked:((S=a[b.id])==null?void 0:S.isHelpful)||!1,onChange:P=>y(b.id,{isHelpful:P.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","data-testid":`helpful-checkbox-${b.id}`}),r.jsx("label",{htmlFor:`helpful-${b.id}`,className:"text-sm text-gray-700 dark:text-gray-300",children:"Этот раздел был полезен"})]}),r.jsx(D,{onClick:()=>j(b.id),disabled:h.isPending,"data-testid":`submit-feedback-${b.id}`,children:h.isPending?"Отправка...":"Отправить отзыв"})]})]})]})]},b.id)})})]})]})}const qVe=[{value:"low",label:"Низкий",icon:VA,color:"text-blue-500"},{value:"medium",label:"Средний",icon:lr,color:"text-yellow-500"},{value:"high",label:"Высокий",icon:Ua,color:"text-orange-500"},{value:"critical",label:"Критический",icon:Ua,color:"text-red-500"}],WVe=[{value:"technical",label:"Техническая поддержка",icon:Lv},{value:"financial",label:"Финансовые вопросы",icon:Rt},{value:"offers",label:"Вопросы по офферам",icon:Gt},{value:"general",label:"Общие вопросы",icon:VA}];function HVe({isOpen:e,onClose:t}){const[n,s]=v.useState({subject:"",message:"",category:"",urgency:"medium",contactMethod:"email"}),{toast:a}=at(),i=Et(),l=Oe({mutationFn:async u=>Re("/api/partner/support/tickets","POST",u),onSuccess:u=>{a({title:"Обращение отправлено",description:`Ваше обращение #${u.ticketNumber} получено. Менеджер свяжется с вами в течение 24 часов.`}),i.invalidateQueries({queryKey:["/api/partner/support/tickets"]}),o(),t()},onError:u=>{a({title:"Ошибка отправки",description:u.message||"Не удалось отправить обращение. Попробуйте позже.",variant:"destructive"})}}),o=()=>{s({subject:"",message:"",category:"",urgency:"medium",contactMethod:"email"})},c=u=>{if(u.preventDefault(),!n.subject.trim()||!n.message.trim()||!n.category){a({title:"Заполните все поля",description:"Пожалуйста, укажите тему, категорию и опишите ваш вопрос.",variant:"destructive"});return}l.mutate(n)},d=()=>{o(),t()};return r.jsx(_t,{open:e,onOpenChange:d,children:r.jsxs(kt,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[r.jsxs(St,{children:[r.jsxs(Ct,{className:"flex items-center gap-2",children:[r.jsx(VA,{className:"h-5 w-5 text-blue-500"}),"Связь с менеджером"]}),r.jsx(Br,{children:"Создайте обращение к менеджеру. Мы ответим вам в течение указанного времени."})]}),r.jsxs("form",{onSubmit:c,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"category",children:"Категория обращения *"}),r.jsxs(fe,{value:n.category,onValueChange:u=>s({...n,category:u}),children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите категорию"})}),r.jsx(he,{children:WVe.map(u=>{const h=u.icon;return r.jsx(C,{value:u.value,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(h,{className:"h-4 w-4"}),u.label]})},u.value)})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"urgency",children:"Уровень срочности"}),r.jsxs(fe,{value:n.urgency,onValueChange:u=>s({...n,urgency:u}),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsx(he,{children:qVe.map(u=>{const h=u.icon;return r.jsx(C,{value:u.value,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(h,{className:`h-4 w-4 ${u.color}`}),u.label]})},u.value)})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"subject",children:"Тема обращения *"}),r.jsx(ne,{id:"subject",placeholder:"Кратко опишите суть вопроса",value:n.subject,onChange:u=>s({...n,subject:u.target.value}),maxLength:100}),r.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[n.subject.length,"/100"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"message",children:"Подробное описание *"}),r.jsx(gt,{id:"message",placeholder:"Опишите ваш вопрос подробно. Укажите ID офферов, суммы, даты и другие важные детали.",value:n.message,onChange:u=>s({...n,message:u.target.value}),rows:6,maxLength:1e3}),r.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[n.message.length,"/1000"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"contactMethod",children:"Предпочтительный способ связи"}),r.jsxs(fe,{value:n.contactMethod,onValueChange:u=>s({...n,contactMethod:u}),children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"email",children:"Email (в течение 24 часов)"}),r.jsx(C,{value:"telegram",children:"Telegram (в течение 2-4 часов)"}),r.jsx(C,{value:"whatsapp",children:"WhatsApp (в течение 2-4 часов)"}),r.jsx(C,{value:"phone",children:"Телефонный звонок (в рабочее время)"})]})]})]}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(lr,{className:"h-5 w-5 text-blue-500 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Время ответа менеджера"}),r.jsxs("ul",{className:"text-xs text-blue-600 dark:text-blue-300 mt-1 space-y-1",children:[r.jsx("li",{children:"• Критические вопросы: до 2 часов"}),r.jsx("li",{children:"• Высокий приоритет: до 6 часов"}),r.jsx("li",{children:"• Обычные вопросы: до 24 часов"}),r.jsx("li",{children:"• Консультации: до 48 часов"})]})]})]})}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-end",children:[r.jsx(D,{type:"button",variant:"outline",onClick:d,className:"sm:w-auto",children:"Отменить"}),r.jsx(D,{type:"submit",disabled:l.isPending,className:"sm:w-auto bg-blue-600 hover:bg-blue-700",children:l.isPending?"Отправляем...":"Отправить обращение"})]})]})]})})}function Pn({className:e,...t}){return r.jsx("div",{className:Ee("animate-pulse rounded-md bg-muted",e),...t})}const Wo=({title:e,value:t,change:n,changeType:s,icon:a,cardType:i})=>{const l=()=>{switch(s){case"positive":return"text-green-600 dark:text-green-400";case"negative":return"text-red-600 dark:text-red-400";default:return"text-muted-foreground"}},o=()=>s==="positive"?r.jsx(cr,{className:"h-3 w-3"}):s==="negative"?r.jsx(HA,{className:"h-3 w-3"}):null,c=()=>i==="clicks"?"border-l-4 border-l-blue-500 bg-gradient-to-r from-blue-50 to-white dark:from-blue-950/20 dark:to-background":i==="conversions"?"border-l-4 border-l-green-500 bg-gradient-to-r from-green-50 to-white dark:from-green-950/20 dark:to-background":i==="revenue"?"border-l-4 border-l-amber-500 bg-gradient-to-r from-amber-50 to-white dark:from-amber-950/20 dark:to-background":i==="cr"?"border-l-4 border-l-purple-500 bg-gradient-to-r from-purple-50 to-white dark:from-purple-950/20 dark:to-background":i==="uniqueClicks"?"border-l-4 border-l-indigo-500 bg-gradient-to-r from-indigo-50 to-white dark:from-indigo-950/20 dark:to-background":i==="activeOffers"?"border-l-4 border-l-pink-500 bg-gradient-to-r from-pink-50 to-white dark:from-pink-950/20 dark:to-background":i==="status"?"border-l-4 border-l-emerald-500 bg-gradient-to-r from-emerald-50 to-white dark:from-emerald-950/20 dark:to-background":i==="epc"?"border-l-4 border-l-indigo-500 bg-gradient-to-r from-indigo-50 to-white dark:from-indigo-950/20 dark:to-background":"border-l-4 border-l-slate-500 bg-gradient-to-r from-slate-50 to-white dark:from-slate-950/20 dark:to-background",d=()=>i==="clicks"?"text-blue-700 dark:text-blue-300":i==="conversions"?"text-green-700 dark:text-green-300":i==="revenue"?"text-amber-700 dark:text-amber-300":i==="cr"?"text-purple-700 dark:text-purple-300":i==="uniqueClicks"?"text-indigo-700 dark:text-indigo-300":i==="activeOffers"?"text-pink-700 dark:text-pink-300":i==="status"?"text-emerald-700 dark:text-emerald-300":i==="epc"?"text-indigo-700 dark:text-indigo-300":"text-slate-700 dark:text-slate-300",u=()=>i==="clicks"?"text-blue-600 dark:text-blue-400":i==="conversions"?"text-green-600 dark:text-green-400":i==="revenue"?"text-amber-600 dark:text-amber-400":i==="cr"?"text-purple-600 dark:text-purple-400":i==="uniqueClicks"?"text-indigo-600 dark:text-indigo-400":i==="activeOffers"?"text-pink-600 dark:text-pink-400":i==="status"?"text-emerald-600 dark:text-emerald-400":i==="epc"?"text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400",h=()=>i==="clicks"?"text-blue-500":i==="conversions"?"text-green-500":i==="revenue"?"text-amber-500":i==="cr"?"text-purple-500":i==="uniqueClicks"?"text-indigo-500":i==="activeOffers"?"text-pink-500":i==="status"?"text-emerald-500":i==="epc"?"text-indigo-500":"text-slate-500";return r.jsxs(q,{className:c(),children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:`text-sm font-medium ${d()}`,children:e}),r.jsx(a,{className:`h-4 w-4 ${h()}`})]}),r.jsxs(W,{children:[r.jsx("div",{className:`text-2xl font-bold ${u()}`,children:t}),n&&r.jsxs("div",{className:`flex items-center gap-1 text-xs ${l()}`,children:[o(),r.jsx("span",{children:n})]})]})]})};function LF(){var y,b,p,N,k,S,P,_,R,O,M;const[e,t]=v.useState(0),[n,s]=v.useState(!1),a=Et(),{toast:i}=at(),{t:l}=Wt(),[o,c]=Bn(),{data:d,isLoading:u,error:h}=Fe({queryKey:["/api/partner/dashboard",e],staleTime:5*60*1e3}),{data:f=[]}=Fe({queryKey:["/api/notifications"],staleTime:30*1e3}),m=()=>{t(A=>A+1),a.invalidateQueries({queryKey:["/api/partner/dashboard"]}),i({title:l("dashboard.dataUpdated"),description:l("dashboard.dataUpdatedDescription")})},g=()=>{c("/affiliate/offers"),i({title:l("dashboard.navigateToOffers"),description:l("dashboard.navigateToOffersDescription")})},x=()=>{c("/affiliate/statistics"),i({title:l("dashboard.navigateToStatistics"),description:l("dashboard.navigateToStatisticsDescription")})},w=()=>{s(!0)};if(u)return r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pn,{className:"h-8 w-48"}),r.jsx(Pn,{className:"h-4 w-64 mt-2"})]}),r.jsx(Pn,{className:"h-9 w-24"})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:8}).map((A,T)=>r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(Pn,{className:"h-4 w-24"})}),r.jsxs(W,{children:[r.jsx(Pn,{className:"h-8 w-16 mb-2"}),r.jsx(Pn,{className:"h-3 w-20"})]})]},T))})]});if(h)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(Ka,{className:"h-12 w-12 text-red-500 mx-auto"}),r.jsx("h3",{className:"text-lg font-semibold",children:l("common.error")}),r.jsx("p",{className:"text-muted-foreground",children:l("dashboard.loadingError")}),r.jsxs(D,{onClick:m,variant:"outline",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),l("common.retry")]})]})});const j=(d==null?void 0:d.metrics)||{totalClicks:0,conversions:0,revenue:0,conversionRate:0,epc:0,avgOfferPayout:0,activeOffers:0,pendingRequests:0};return d!=null&&d.topOffers,r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight text-black dark:text-white",children:l("dashboard.title")}),r.jsx("p",{className:"text-black/70 dark:text-white/70",children:l("dashboard.subtitle")})]}),r.jsxs(D,{variant:"outline",onClick:m,className:"border-blue-500 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-950/20",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),l("common.refresh")]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsx(Wo,{title:l("dashboard.totalClicks"),value:((y=j.totalClicks)==null?void 0:y.toLocaleString())||"0",change:(b=d==null?void 0:d.metrics)!=null&&b.clicksGrowth?`${d.metrics.clicksGrowth>0?"+":""}${d.metrics.clicksGrowth.toFixed(1)}%`:void 0,changeType:((p=d==null?void 0:d.metrics)==null?void 0:p.clicksGrowth)>0?"positive":"negative",icon:Qc,cardType:"clicks"}),r.jsx(Wo,{title:l("dashboard.conversions"),value:((N=j.conversions)==null?void 0:N.toLocaleString())||"0",change:(k=d==null?void 0:d.metrics)!=null&&k.conversionsGrowth?`${d.metrics.conversionsGrowth>0?"+":""}${d.metrics.conversionsGrowth.toFixed(1)}%`:void 0,changeType:((S=d==null?void 0:d.metrics)==null?void 0:S.conversionsGrowth)>0?"positive":"negative",icon:Gt,cardType:"conversions"}),r.jsx(Wo,{title:l("dashboard.revenue"),value:`$${((P=j.revenue)==null?void 0:P.toLocaleString())||"0"}`,change:(_=d==null?void 0:d.metrics)!=null&&_.revenueGrowth?`${d.metrics.revenueGrowth>0?"+":""}${d.metrics.revenueGrowth.toFixed(1)}%`:void 0,changeType:((R=d==null?void 0:d.metrics)==null?void 0:R.revenueGrowth)>0?"positive":"negative",icon:Rt,cardType:"revenue"}),r.jsx(Wo,{title:l("dashboard.conversionRate"),value:`${((O=j.conversionRate)==null?void 0:O.toFixed(2))||"0"}%`,change:"-0.8%",changeType:"negative",icon:cr,cardType:"cr"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsx(Wo,{title:l("dashboard.uniqueClicks"),value:`${Math.floor(j.totalClicks*.85||0).toLocaleString()}`,change:"+7.1%",changeType:"positive",icon:or,cardType:"uniqueClicks"}),r.jsx(Wo,{title:l("dashboard.activeOffers"),value:`${j.activeOffers||"0"}`,changeType:"neutral",icon:Gt,cardType:"activeOffers"}),r.jsx(Wo,{title:l("dashboard.status"),value:l("dashboard.active"),icon:ur,cardType:"status"}),r.jsx(Wo,{title:l("dashboard.avgEPC"),value:`$${((M=j.epc)==null?void 0:M.toFixed(2))||"0"}`,icon:Rt,cardType:"epc"})]}),r.jsxs(q,{className:"border-l-4 border-l-cyan-500 bg-gradient-to-r from-cyan-50 to-white dark:from-cyan-950/20 dark:to-background",children:[r.jsxs(re,{children:[r.jsx(se,{className:"text-cyan-700 dark:text-cyan-300",children:l("dashboard.quickActions")}),r.jsx("p",{className:"text-sm text-muted-foreground",children:l("dashboard.quickActionsDesc")})]}),r.jsx(W,{children:r.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[r.jsxs(D,{variant:"outline",size:"sm",className:"h-auto p-3 flex-col items-center gap-2 border-green-500 text-green-600 hover:bg-green-50 dark:hover:bg-green-950/20 shadow-md",onClick:g,children:[r.jsx(Gt,{className:"h-6 w-6 text-green-500"}),r.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:l("dashboard.findNewOffers")})]}),r.jsxs(D,{variant:"outline",size:"sm",className:"h-auto p-3 flex-col items-center gap-2 border-blue-500 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-950/20 shadow-md",onClick:x,children:[r.jsx(cr,{className:"h-6 w-6 text-blue-500"}),r.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:l("dashboard.checkStatistics")})]}),r.jsxs(D,{variant:"outline",size:"sm",className:"h-auto p-3 flex-col items-center gap-2 border-purple-500 text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-950/20 shadow-md",onClick:w,children:[r.jsx(or,{className:"h-6 w-6 text-purple-500"}),r.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:l("dashboard.contactManager")})]})]})})]}),r.jsxs(q,{className:"border-l-4 border-l-orange-500 bg-gradient-to-r from-orange-50 to-white dark:from-orange-950/20 dark:to-background",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-orange-700 dark:text-orange-300",children:l("dashboard.recentNotifications")}),Array.isArray(f)&&f.length>0&&r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>c("/affiliate/notifications"),className:"text-orange-600 hover:text-orange-700 hover:bg-orange-100 dark:hover:bg-orange-950/20",children:l("dashboard.allNotifications")})]}),r.jsx(W,{children:r.jsx("div",{className:"space-y-3",children:Array.isArray(f)&&f.length>0?f.slice(0,3).map((A,T)=>r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[r.jsx(Gt,{className:"h-4 w-4 text-blue-500 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:A.title}),r.jsx("p",{className:"text-sm text-muted-foreground",children:A.message}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(ie,{variant:"secondary",children:A.type}),!A.is_read&&r.jsx(ie,{variant:"destructive",className:"text-xs px-1 py-0",children:l("common.new")})]})]})})})]},A.id)):r.jsxs("div",{className:"text-center py-8",children:[r.jsx($n,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:l("dashboard.noNotifications")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l("dashboard.noNotificationsDesc")})]})})})]}),r.jsx(HVe,{isOpen:n,onClose:()=>s(!1)})]})}function KVe(){const{user:e}=tr(),{t}=Wt(),{toast:n}=at(),s=Et(),{data:a,isLoading:i,error:l}=Fe({queryKey:["/api/partner/profile"],queryFn:async()=>{try{const f=localStorage.getItem("auth_token");if(!f)throw new Error("No auth token");const m=await fetch("/api/partner/profile",{headers:{Authorization:`Bearer ${f}`}});if(!m.ok)throw console.warn("Profile API failed:",m.status),new Error(`Profile fetch failed: ${m.status}`);return m.json()}catch(f){throw console.error("Profile error:",f),f}},enabled:!!(e!=null&&e.id),retry:!1}),[o,c]=v.useState({firstName:"",lastName:"",email:"",phone:"",company:"",country:"",timezone:"UTC",currency:"USD",telegram:""});v.useEffect(()=>{a&&c({firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",company:a.company||"",country:a.country||"",timezone:a.timezone||"UTC",currency:a.currency||"USD",telegram:a.telegram?a.telegram.replace(/^@/,""):""})},[a]);const d=(f,m)=>{c(g=>({...g,[f]:m}))},u=Oe({mutationFn:async f=>Re("/api/partner/profile","PATCH",f),onSuccess:f=>{n({title:"Профиль обновлён",description:"Ваши данные успешно сохранены.",variant:"default"}),s.invalidateQueries({queryKey:["/api/partner/profile"]}),s.invalidateQueries({queryKey:["/api/auth/me"]})},onError:f=>{n({title:"Ошибка сохранения",description:f.message||"Не удалось сохранить изменения.",variant:"destructive"})}}),h=()=>{if(o.firstName.trim()===""&&o.firstName.length>0){n({title:"Неверное значение имени",description:"Имя не может состоять только из пробелов.",variant:"destructive"});return}if(o.lastName.trim()===""&&o.lastName.length>0){n({title:"Неверное значение фамилии",description:"Фамилия не может состоять только из пробелов.",variant:"destructive"});return}if(o.email&&o.email!==(a==null?void 0:a.email)&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)){n({title:"Неверный формат email",description:"Пожалуйста, введите корректный email адрес.",variant:"destructive"});return}if(o.phone.trim()&&!/^[\+]?[\d\s\(\)\-]{7,20}$/.test(o.phone.trim())){n({title:"Неверный формат телефона",description:"Пожалуйста, введите корректный номер телефона.",variant:"destructive"});return}let f={...o};if(o.telegram.trim()){const m=o.telegram.trim().replace(/^@/,"");if(!/^[a-zA-Z0-9_]+$/.test(m)){n({title:"Неверный формат Telegram",description:"Telegram никнейм может содержать только буквы, цифры и подчеркивание.",variant:"destructive"});return}f.telegram="@"+m}u.mutate(f)};return i?r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pn,{className:"h-9 w-64 mb-2"}),r.jsx(Pn,{className:"h-4 w-96"})]}),r.jsx(Pn,{className:"h-10 w-24"})]}),Array.from({length:3}).map((f,m)=>r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(Pn,{className:"h-6 w-48"}),r.jsx(Pn,{className:"h-4 w-80"})]}),r.jsx(W,{className:"space-y-4",children:Array.from({length:4}).map((g,x)=>r.jsx(Pn,{className:"h-10 w-full"},x))})]},m))]})}):l?r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(Vt,{className:"h-12 w-12 text-red-500 mx-auto"}),r.jsx("h3",{className:"text-lg font-semibold",children:"Ошибка загрузки профиля"}),r.jsx("p",{className:"text-muted-foreground",children:"Не удалось загрузить данные профиля"}),r.jsx(D,{onClick:()=>s.invalidateQueries({queryKey:["/api/partner/profile"]}),children:"Повторить"})]})})})}):r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:t("profile.title")}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Управляйте своей личной информацией и настройками аккаунта"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[(a==null?void 0:a.partnerNumber)&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",r.jsx("span",{className:"font-mono",children:a.partnerNumber})]}),r.jsxs(D,{onClick:h,disabled:u.isPending||i,className:"flex items-center gap-2","data-testid":"button-save-profile",title:"Сохранить изменения в профиле",children:[r.jsx(_l,{className:"h-4 w-4"}),u.isPending?"Сохранение...":"Сохранить"]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Oo,{className:"h-5 w-5"}),"Личная информация"]}),r.jsx(Ze,{children:"Обновите свои личные данные и контактную информацию"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"firstName",children:"Имя"}),r.jsx(ne,{id:"firstName",value:o.firstName,onChange:f=>d("firstName",f.target.value),placeholder:"Введите ваше имя","data-testid":"input-firstName"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"lastName",children:"Фамилия"}),r.jsx(ne,{id:"lastName",value:o.lastName,onChange:f=>d("lastName",f.target.value),placeholder:"Введите вашу фамилию","data-testid":"input-lastName"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"email",children:"Email"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{id:"email",value:o.email,onChange:f=>d("email",f.target.value),placeholder:"email@example.com",className:"pl-10",disabled:!0,"data-testid":"input-email"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"phone",children:"Телефон"}),r.jsxs("div",{className:"relative",children:[r.jsx(one,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r.jsx(ne,{id:"phone",value:o.phone,onChange:f=>d("phone",f.target.value),placeholder:"+7 (999) 999-99-99",className:"pl-10","data-testid":"input-phone"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"company",children:"Компания"}),r.jsx(ne,{id:"company",value:o.company,onChange:f=>d("company",f.target.value),placeholder:"Название вашей компании","data-testid":"input-company"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"telegram",children:"Telegram"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-3 text-muted-foreground",children:"@"}),r.jsx(ne,{id:"telegram",value:o.telegram.startsWith("@")?o.telegram.slice(1):o.telegram,onChange:f=>{const m=f.target.value.replace(/^@/,"");d("telegram",m)},placeholder:"username",className:"pl-8","data-testid":"input-telegram"})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Ваш Telegram никнейм (без @)"})]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(mr,{className:"h-5 w-5"}),"Локализация и предпочтения"]}),r.jsx(Ze,{children:"Настройте свои региональные предпочтения"})]}),r.jsx(W,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"country",children:"Страна"}),r.jsxs(fe,{value:o.country,onValueChange:f=>d("country",f),children:[r.jsx(ue,{"data-testid":"select-country",children:r.jsx(me,{placeholder:"Выберите страну"})}),r.jsxs(he,{className:"max-h-60 overflow-y-auto",children:[r.jsx(C,{value:"AF",children:"🇦🇫 Афганистан"}),r.jsx(C,{value:"AL",children:"🇦🇱 Албания"}),r.jsx(C,{value:"DZ",children:"🇩🇿 Алжир"}),r.jsx(C,{value:"AD",children:"🇦🇩 Андорра"}),r.jsx(C,{value:"AO",children:"🇦🇴 Ангола"}),r.jsx(C,{value:"AR",children:"🇦🇷 Аргентина"}),r.jsx(C,{value:"AM",children:"🇦🇲 Армения"}),r.jsx(C,{value:"AU",children:"🇦🇺 Австралия"}),r.jsx(C,{value:"AT",children:"🇦🇹 Австрия"}),r.jsx(C,{value:"AZ",children:"🇦🇿 Азербайджан"}),r.jsx(C,{value:"BD",children:"🇧🇩 Бангладеш"}),r.jsx(C,{value:"BB",children:"🇧🇧 Барбадос"}),r.jsx(C,{value:"BY",children:"🇧🇾 Беларусь"}),r.jsx(C,{value:"BE",children:"🇧🇪 Бельгия"}),r.jsx(C,{value:"BZ",children:"🇧🇿 Белиз"}),r.jsx(C,{value:"BJ",children:"🇧🇯 Бенин"}),r.jsx(C,{value:"BG",children:"🇧🇬 Болгария"}),r.jsx(C,{value:"BO",children:"🇧🇴 Боливия"}),r.jsx(C,{value:"BA",children:"🇧🇦 Босния и Герцеговина"}),r.jsx(C,{value:"BW",children:"🇧🇼 Ботсвана"}),r.jsx(C,{value:"BR",children:"🇧🇷 Бразилия"}),r.jsx(C,{value:"GB",children:"🇬🇧 Великобритания"}),r.jsx(C,{value:"HU",children:"🇭🇺 Венгрия"}),r.jsx(C,{value:"VE",children:"🇻🇪 Венесуэла"}),r.jsx(C,{value:"VN",children:"🇻🇳 Вьетнам"}),r.jsx(C,{value:"GA",children:"🇬🇦 Габон"}),r.jsx(C,{value:"GH",children:"🇬🇭 Гана"}),r.jsx(C,{value:"GT",children:"🇬🇹 Гватемала"}),r.jsx(C,{value:"GW",children:"🇬🇼 Гвинея-Бисау"}),r.jsx(C,{value:"GN",children:"🇬🇳 Гвинея"}),r.jsx(C,{value:"DE",children:"🇩🇪 Германия"}),r.jsx(C,{value:"GR",children:"🇬🇷 Греция"}),r.jsx(C,{value:"GE",children:"🇬🇪 Грузия"}),r.jsx(C,{value:"DK",children:"🇩🇰 Дания"}),r.jsx(C,{value:"EG",children:"🇪🇬 Египет"}),r.jsx(C,{value:"ZM",children:"🇿🇲 Замбия"}),r.jsx(C,{value:"ZW",children:"🇿🇼 Зимбабве"}),r.jsx(C,{value:"IL",children:"🇮🇱 Израиль"}),r.jsx(C,{value:"IN",children:"🇮🇳 Индия"}),r.jsx(C,{value:"ID",children:"🇮🇩 Индонезия"}),r.jsx(C,{value:"JO",children:"🇯🇴 Иордания"}),r.jsx(C,{value:"IQ",children:"🇮🇶 Ирак"}),r.jsx(C,{value:"IR",children:"🇮🇷 Иран"}),r.jsx(C,{value:"IE",children:"🇮🇪 Ирландия"}),r.jsx(C,{value:"IS",children:"🇮🇸 Исландия"}),r.jsx(C,{value:"ES",children:"🇪🇸 Испания"}),r.jsx(C,{value:"IT",children:"🇮🇹 Италия"}),r.jsx(C,{value:"YE",children:"🇾🇪 Йемен"}),r.jsx(C,{value:"KZ",children:"🇰🇿 Казахстан"}),r.jsx(C,{value:"KH",children:"🇰🇭 Камбоджа"}),r.jsx(C,{value:"CM",children:"🇨🇲 Камерун"}),r.jsx(C,{value:"CA",children:"🇨🇦 Канада"}),r.jsx(C,{value:"QA",children:"🇶🇦 Катар"}),r.jsx(C,{value:"KE",children:"🇰🇪 Кения"}),r.jsx(C,{value:"CY",children:"🇨🇾 Кипр"}),r.jsx(C,{value:"KG",children:"🇰🇬 Киргизия"}),r.jsx(C,{value:"CN",children:"🇨🇳 Китай"}),r.jsx(C,{value:"CO",children:"🇨🇴 Колумбия"}),r.jsx(C,{value:"CR",children:"🇨🇷 Коста-Рика"}),r.jsx(C,{value:"CU",children:"🇨🇺 Куба"}),r.jsx(C,{value:"KW",children:"🇰🇼 Кувейт"}),r.jsx(C,{value:"LV",children:"🇱🇻 Латвия"}),r.jsx(C,{value:"LS",children:"🇱🇸 Лесото"}),r.jsx(C,{value:"LR",children:"🇱🇷 Либерия"}),r.jsx(C,{value:"LB",children:"🇱🇧 Ливан"}),r.jsx(C,{value:"LY",children:"🇱🇾 Ливия"}),r.jsx(C,{value:"LT",children:"🇱🇹 Литва"}),r.jsx(C,{value:"LU",children:"🇱🇺 Люксембург"}),r.jsx(C,{value:"MU",children:"🇲🇺 Маврикий"}),r.jsx(C,{value:"MG",children:"🇲🇬 Мадагаскар"}),r.jsx(C,{value:"MK",children:"🇲🇰 Македония"}),r.jsx(C,{value:"MW",children:"🇲🇼 Малави"}),r.jsx(C,{value:"MY",children:"🇲🇾 Малайзия"}),r.jsx(C,{value:"ML",children:"🇲🇱 Мали"}),r.jsx(C,{value:"MT",children:"🇲🇹 Мальта"}),r.jsx(C,{value:"MA",children:"🇲🇦 Марокко"}),r.jsx(C,{value:"MX",children:"🇲🇽 Мексика"}),r.jsx(C,{value:"MZ",children:"🇲🇿 Мозамбик"}),r.jsx(C,{value:"MD",children:"🇲🇩 Молдова"}),r.jsx(C,{value:"MN",children:"🇲🇳 Монголия"}),r.jsx(C,{value:"MM",children:"🇲🇲 Мьянма"}),r.jsx(C,{value:"NA",children:"🇳🇦 Намибия"}),r.jsx(C,{value:"NP",children:"🇳🇵 Непал"}),r.jsx(C,{value:"NE",children:"🇳🇪 Нигер"}),r.jsx(C,{value:"NG",children:"🇳🇬 Нигерия"}),r.jsx(C,{value:"NL",children:"🇳🇱 Нидерланды"}),r.jsx(C,{value:"NZ",children:"🇳🇿 Новая Зеландия"}),r.jsx(C,{value:"NO",children:"🇳🇴 Норвегия"}),r.jsx(C,{value:"AE",children:"🇦🇪 ОАЭ"}),r.jsx(C,{value:"OM",children:"🇴🇲 Оман"}),r.jsx(C,{value:"PK",children:"🇵🇰 Пакистан"}),r.jsx(C,{value:"PA",children:"🇵🇦 Панама"}),r.jsx(C,{value:"PY",children:"🇵🇾 Парагвай"}),r.jsx(C,{value:"PE",children:"🇵🇪 Перу"}),r.jsx(C,{value:"PL",children:"🇵🇱 Польша"}),r.jsx(C,{value:"PT",children:"🇵🇹 Португалия"}),r.jsx(C,{value:"RU",children:"🇷🇺 Россия"}),r.jsx(C,{value:"RW",children:"🇷🇼 Руанда"}),r.jsx(C,{value:"RO",children:"🇷🇴 Румыния"}),r.jsx(C,{value:"SV",children:"🇸🇻 Сальвадор"}),r.jsx(C,{value:"SA",children:"🇸🇦 Саудовская Аравия"}),r.jsx(C,{value:"SZ",children:"🇸🇿 Свазиленд"}),r.jsx(C,{value:"SG",children:"🇸🇬 Сингапур"}),r.jsx(C,{value:"SY",children:"🇸🇾 Сирия"}),r.jsx(C,{value:"SK",children:"🇸🇰 Словакия"}),r.jsx(C,{value:"SI",children:"🇸🇮 Словения"}),r.jsx(C,{value:"US",children:"🇺🇸 США"}),r.jsx(C,{value:"TJ",children:"🇹🇯 Таджикистан"}),r.jsx(C,{value:"TH",children:"🇹🇭 Таиланд"}),r.jsx(C,{value:"TZ",children:"🇹🇿 Танзания"}),r.jsx(C,{value:"TN",children:"🇹🇳 Тунис"}),r.jsx(C,{value:"TM",children:"🇹🇲 Туркменистан"}),r.jsx(C,{value:"TR",children:"🇹🇷 Турция"}),r.jsx(C,{value:"UG",children:"🇺🇬 Уганда"}),r.jsx(C,{value:"UZ",children:"🇺🇿 Узбекистан"}),r.jsx(C,{value:"UA",children:"🇺🇦 Украина"}),r.jsx(C,{value:"UY",children:"🇺🇾 Уругвай"}),r.jsx(C,{value:"PH",children:"🇵🇭 Филиппины"}),r.jsx(C,{value:"FI",children:"🇫🇮 Финляндия"}),r.jsx(C,{value:"FR",children:"🇫🇷 Франция"}),r.jsx(C,{value:"HR",children:"🇭🇷 Хорватия"}),r.jsx(C,{value:"TD",children:"🇹🇩 Чад"}),r.jsx(C,{value:"CZ",children:"🇨🇿 Чехия"}),r.jsx(C,{value:"CL",children:"🇨🇱 Чили"}),r.jsx(C,{value:"CH",children:"🇨🇭 Швейцария"}),r.jsx(C,{value:"SE",children:"🇸🇪 Швеция"}),r.jsx(C,{value:"LK",children:"🇱🇰 Шри-Ланка"}),r.jsx(C,{value:"EC",children:"🇪🇨 Эквадор"}),r.jsx(C,{value:"EE",children:"🇪🇪 Эстония"}),r.jsx(C,{value:"ET",children:"🇪🇹 Эфиопия"}),r.jsx(C,{value:"ZA",children:"🇿🇦 ЮАР"}),r.jsx(C,{value:"KR",children:"🇰🇷 Южная Корея"}),r.jsx(C,{value:"JM",children:"🇯🇲 Ямайка"}),r.jsx(C,{value:"JP",children:"🇯🇵 Япония"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"timezone",children:"Часовой пояс"}),r.jsxs(fe,{value:o.timezone,onValueChange:f=>d("timezone",f),children:[r.jsx(ue,{"data-testid":"select-timezone",children:r.jsx(me,{placeholder:"Выберите часовой пояс"})}),r.jsxs(he,{className:"max-h-60 overflow-y-auto",children:[r.jsx(C,{value:"UTC",children:"UTC+0 (Универсальное время)"}),r.jsx(C,{value:"Europe/London",children:"UTC+0 (Лондон, Дублин)"}),r.jsx(C,{value:"Europe/Berlin",children:"UTC+1 (Берлин, Рим, Париж)"}),r.jsx(C,{value:"Europe/Helsinki",children:"UTC+2 (Хельсинки, Киев)"}),r.jsx(C,{value:"Europe/Moscow",children:"UTC+3 (Москва, Минск)"}),r.jsx(C,{value:"Europe/Samara",children:"UTC+4 (Самара)"}),r.jsx(C,{value:"Asia/Yekaterinburg",children:"UTC+5 (Екатеринбург)"}),r.jsx(C,{value:"Asia/Omsk",children:"UTC+6 (Омск)"}),r.jsx(C,{value:"Asia/Krasnoyarsk",children:"UTC+7 (Красноярск)"}),r.jsx(C,{value:"Asia/Irkutsk",children:"UTC+8 (Иркутск)"}),r.jsx(C,{value:"Asia/Yakutsk",children:"UTC+9 (Якутск)"}),r.jsx(C,{value:"Asia/Vladivostok",children:"UTC+10 (Владивосток)"}),r.jsx(C,{value:"Asia/Magadan",children:"UTC+11 (Магадан)"}),r.jsx(C,{value:"Asia/Kamchatka",children:"UTC+12 (Камчатка)"}),r.jsx(C,{value:"America/Los_Angeles",children:"UTC-8 (Лос-Анджелес, Сан-Франциско)"}),r.jsx(C,{value:"America/Denver",children:"UTC-7 (Денвер, Солт-Лейк-Сити)"}),r.jsx(C,{value:"America/Chicago",children:"UTC-6 (Чикаго, Даллас)"}),r.jsx(C,{value:"America/New_York",children:"UTC-5 (Нью-Йорк, Вашингтон)"}),r.jsx(C,{value:"America/Halifax",children:"UTC-4 (Галифакс)"}),r.jsx(C,{value:"America/St_Johns",children:"UTC-3:30 (Сент-Джонс)"}),r.jsx(C,{value:"America/Sao_Paulo",children:"UTC-3 (Сан-Паулу, Буэнос-Айрес)"}),r.jsx(C,{value:"America/Noronha",children:"UTC-2 (Фернанду-ди-Норонья)"}),r.jsx(C,{value:"America/Scoresbysund",children:"UTC-1 (Азорские острова)"}),r.jsx(C,{value:"Asia/Dubai",children:"UTC+4 (Дубай, Баку)"}),r.jsx(C,{value:"Asia/Karachi",children:"UTC+5 (Карачи, Ташкент)"}),r.jsx(C,{value:"Asia/Kolkata",children:"UTC+5:30 (Дели, Мумбаи)"}),r.jsx(C,{value:"Asia/Kathmandu",children:"UTC+5:45 (Катманду)"}),r.jsx(C,{value:"Asia/Dhaka",children:"UTC+6 (Дакка, Алма-Ата)"}),r.jsx(C,{value:"Asia/Yangon",children:"UTC+6:30 (Янгон)"}),r.jsx(C,{value:"Asia/Bangkok",children:"UTC+7 (Бангкок, Джакарта)"}),r.jsx(C,{value:"Asia/Shanghai",children:"UTC+8 (Пекин, Сингапур)"}),r.jsx(C,{value:"Asia/Tokyo",children:"UTC+9 (Токио, Сеул)"}),r.jsx(C,{value:"Australia/Adelaide",children:"UTC+9:30 (Аделаида)"}),r.jsx(C,{value:"Australia/Sydney",children:"UTC+10 (Сидней, Мельбурн)"}),r.jsx(C,{value:"Pacific/Norfolk",children:"UTC+11 (Норфолк)"}),r.jsx(C,{value:"Pacific/Auckland",children:"UTC+12 (Окленд)"}),r.jsx(C,{value:"Pacific/Chatham",children:"UTC+12:45 (Чатем)"}),r.jsx(C,{value:"Pacific/Tongatapu",children:"UTC+13 (Нукуалофа)"}),r.jsx(C,{value:"Pacific/Kiritimati",children:"UTC+14 (Киритимати)"}),r.jsx(C,{value:"Africa/Casablanca",children:"UTC+0 (Касабланка)"}),r.jsx(C,{value:"Africa/Lagos",children:"UTC+1 (Лагос, Алжир)"}),r.jsx(C,{value:"Africa/Cairo",children:"UTC+2 (Каир, Йоханнесбург)"}),r.jsx(C,{value:"Africa/Nairobi",children:"UTC+3 (Найроби, Аддис-Абеба)"}),r.jsx(C,{value:"Pacific/Honolulu",children:"UTC-10 (Гонолулу)"}),r.jsx(C,{value:"Pacific/Marquesas",children:"UTC-9:30 (Маркизские острова)"}),r.jsx(C,{value:"Pacific/Gambier",children:"UTC-9 (Гамбье)"}),r.jsx(C,{value:"Pacific/Pitcairn",children:"UTC-8 (Питкэрн)"}),r.jsx(C,{value:"Pacific/Easter",children:"UTC-6 (Остров Пасхи)"}),r.jsx(C,{value:"Atlantic/Cape_Verde",children:"UTC-1 (Кабо-Верде)"}),r.jsx(C,{value:"Atlantic/Azores",children:"UTC-1 (Азорские острова)"}),r.jsx(C,{value:"Atlantic/Reykjavik",children:"UTC+0 (Рейкьявик)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"currency",children:"Валюта"}),r.jsxs(fe,{value:o.currency,onValueChange:f=>d("currency",f),children:[r.jsx(ue,{"data-testid":"select-currency",children:r.jsx(me,{placeholder:"Выберите валюту"})}),r.jsxs(he,{children:[r.jsx(C,{value:"USD",children:"USD ($)"}),r.jsx(C,{value:"EUR",children:"EUR (€)"}),r.jsx(C,{value:"RUB",children:"RUB (₽)"}),r.jsx(C,{value:"GBP",children:"GBP (£)"})]})]})]})]})})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Статус аккаунта"}),r.jsx(Ze,{children:"Информация о состоянии вашего аккаунта"})]}),r.jsx(W,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Статус верификации"}),r.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:"В ожидании"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Статус аккаунта"}),r.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Активен"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Дата регистрации"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:a!=null&&a.createdAt?new Date(a.createdAt).toLocaleDateString("ru-RU"):"Неизвестно"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Последний вход"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:a!=null&&a.lastLoginAt?new Date(a.lastLoginAt).toLocaleDateString("ru-RU"):"Неизвестно"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Номер партнёра"}),r.jsxs("span",{className:"text-sm font-mono text-blue-600 dark:text-blue-400",children:["#",(a==null?void 0:a.partnerNumber)||"Не присвоен"]})]})]})]})})]})]})})}function GVe(){tr();const{t:e,i18n:t}=Wt(),n=t.language,s=B=>t.changeLanguage(B),{theme:a,setTheme:i}=f9(),{toast:l}=at(),o=Et(),[c,d]=v.useState(!1),[u,h]=v.useState(!1),{data:f,isLoading:m}=Fe({queryKey:["/api/partner/profile"],queryFn:async()=>await Re("/api/partner/profile","GET")}),[g,x]=v.useState({emailOffers:!0,emailPayments:!0,emailNews:!1,pushOffers:!0,pushPayments:!0,pushNews:!1}),[w,j]=v.useState({twoFactorEnabled:!1,loginNotifications:!0,sessionTimeout:"24",ipRestrictions:""}),[y,b]=v.useState({currentPassword:"",newPassword:"",confirmPassword:""});v.useEffect(()=>{f&&j(B=>({...B,twoFactorEnabled:f.twoFactorEnabled||!1,sessionTimeout:f.sessionTimeout||"24",ipRestrictions:f.ipRestrictions||""}))},[f]);const p=(B,z)=>{x(U=>({...U,[B]:z}))},N=(B,z)=>{j(U=>({...U,[B]:z}))},k=(B,z)=>{b(U=>({...U,[B]:z}))},S=Oe({mutationFn:async B=>Re("/api/partner/profile","PATCH",B),onSuccess:()=>{l({title:"Настройки сохранены",description:"Ваши настройки успешно обновлены.",variant:"default"}),o.invalidateQueries({queryKey:["/api/partner/profile"]}),o.invalidateQueries({queryKey:["/api/auth/me"]})},onError:B=>{l({title:"Ошибка",description:B.message||"Не удалось сохранить настройки.",variant:"destructive"})}}),P=()=>{const B={language:n,timezone:(f==null?void 0:f.timezone)||"Europe/Moscow"};S.mutate(B)},_=Oe({mutationFn:async B=>Re("/api/partner/profile/change-password","POST",B),onSuccess:()=>{l({title:"Пароль обновлён",description:"Ваш пароль успешно изменён.",variant:"default"}),b({currentPassword:"",newPassword:"",confirmPassword:""})},onError:B=>{l({title:"Ошибка смены пароля",description:B.message||"Неверный текущий пароль или ошибка сервера.",variant:"destructive"})}}),R=Oe({mutationFn:async B=>Re("/api/partner/profile","PATCH",B),onSuccess:()=>{l({title:"Настройки безопасности сохранены",description:"Параметры безопасности обновлены.",variant:"default"}),o.invalidateQueries({queryKey:["/api/partner/profile"]})},onError:B=>{l({title:"Ошибка",description:B.message||"Не удалось сохранить настройки безопасности.",variant:"destructive"})}}),O=Oe({mutationFn:async B=>Re("/api/partner/profile","PATCH",{settings:B}),onSuccess:()=>{l({title:"Настройки уведомлений сохранены",description:"Предпочтения уведомлений обновлены.",variant:"default"}),o.invalidateQueries({queryKey:["/api/partner/profile"]})},onError:B=>{l({title:"Ошибка",description:B.message||"Не удалось сохранить настройки уведомлений.",variant:"destructive"})}}),M=()=>{if(!y.currentPassword||!y.newPassword){l({title:"Заполните все поля",description:"Введите текущий и новый пароль.",variant:"destructive"});return}if(y.newPassword.length<6){l({title:"Слабый пароль",description:"Пароль должен содержать не менее 6 символов.",variant:"destructive"});return}if(y.newPassword!==y.confirmPassword){l({title:"Ошибка",description:"Пароли не совпадают.",variant:"destructive"});return}_.mutate({currentPassword:y.currentPassword,newPassword:y.newPassword})},A=()=>{R.mutate({twoFactorEnabled:w.twoFactorEnabled,sessionTimeout:w.sessionTimeout,ipRestrictions:w.ipRestrictions})},T=()=>{O.mutate(g)};return r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-foreground",children:e("settings.title")}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Управляйте настройками аккаунта и предпочтениями"})]})}),r.jsxs(rn,{defaultValue:"general",className:"w-full",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-4",children:[r.jsx(We,{value:"general",children:"Общие"}),r.jsx(We,{value:"notifications",children:"Уведомления"}),r.jsx(We,{value:"security",children:"Безопасность"}),r.jsx(We,{value:"account",children:"Аккаунт"})]}),r.jsx(He,{value:"general",className:"space-y-6",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(mr,{className:"h-5 w-5"}),"Локализация и внешний вид"]}),r.jsx(Ze,{children:"Настройте язык интерфейса и тему оформления"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"language",children:"Язык интерфейса"}),r.jsxs(fe,{value:n,onValueChange:s,children:[r.jsx(ue,{"data-testid":"select-language",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"ru",children:"🇷🇺 Русский"}),r.jsx(C,{value:"en",children:"🇺🇸 English"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"theme",children:"Тема оформления"}),r.jsxs(fe,{value:a,onValueChange:i,children:[r.jsx(ue,{"data-testid":"select-theme",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"light",children:"Светлая"}),r.jsx(C,{value:"dark",children:"Тёмная"})]})]})]})]}),r.jsxs(D,{onClick:P,disabled:S.isPending,"data-testid":"button-save-general",title:"Сохранить общие настройки",children:[r.jsx(_l,{className:"h-4 w-4 mr-2"}),S.isPending?"Сохранение...":"Сохранить изменения"]})]})]})}),r.jsxs(He,{value:"notifications",className:"space-y-6",children:[r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx($n,{className:"h-5 w-5"}),"Уведомления по Email"]}),r.jsx(Ze,{children:"Управляйте получением уведомлений на электронную почту"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(F,{htmlFor:"emailOffers",children:"Новые офферы"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Уведомления о новых доступных офферах"})]}),r.jsx(Je,{id:"emailOffers",checked:g.emailOffers,onCheckedChange:B=>p("emailOffers",B),"data-testid":"switch-email-offers"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(F,{htmlFor:"emailPayments",children:"Выплаты"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Уведомления о выплатах и транзакциях"})]}),r.jsx(Je,{id:"emailPayments",checked:g.emailPayments,onCheckedChange:B=>p("emailPayments",B),"data-testid":"switch-email-payments"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(F,{htmlFor:"emailNews",children:"Новости и обновления"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Информация о новых функциях и изменениях"})]}),r.jsx(Je,{id:"emailNews",checked:g.emailNews,onCheckedChange:B=>p("emailNews",B),"data-testid":"switch-email-news"})]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Push-уведомления"}),r.jsx(Ze,{children:"Настройте push-уведомления в браузере"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(F,{htmlFor:"pushOffers",children:"Новые офферы"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Мгновенные уведомления о новых офферах"})]}),r.jsx(Je,{id:"pushOffers",checked:g.pushOffers,onCheckedChange:B=>p("pushOffers",B),"data-testid":"switch-push-offers"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(F,{htmlFor:"pushPayments",children:"Выплаты"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Уведомления о статусе выплат"})]}),r.jsx(Je,{id:"pushPayments",checked:g.pushPayments,onCheckedChange:B=>p("pushPayments",B),"data-testid":"switch-push-payments"})]}),r.jsxs(D,{onClick:T,disabled:O.isPending,"data-testid":"button-save-notifications",title:"Сохранить настройки уведомлений",children:[r.jsx(_l,{className:"h-4 w-4 mr-2"}),O.isPending?"Сохранение...":"Сохранить настройки"]})]})]})]}),r.jsxs(He,{value:"security",className:"space-y-6",children:[r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Dt,{className:"h-5 w-5"}),"Безопасность аккаунта"]}),r.jsx(Ze,{children:"Настройте параметры безопасности вашего аккаунта"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(F,{htmlFor:"twoFactor",children:"Двухфакторная аутентификация"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Дополнительная защита вашего аккаунта"})]}),r.jsx(Je,{id:"twoFactor",checked:w.twoFactorEnabled,onCheckedChange:B=>N("twoFactorEnabled",B),"data-testid":"switch-two-factor"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(F,{htmlFor:"loginNotifications",children:"Уведомления о входе"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Получать уведомления о новых входах в аккаунт"})]}),r.jsx(Je,{id:"loginNotifications",checked:w.loginNotifications,onCheckedChange:B=>N("loginNotifications",B),"data-testid":"switch-login-notifications"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"sessionTimeout",children:"Тайм-аут сессии (часы)"}),r.jsxs(fe,{value:w.sessionTimeout,onValueChange:B=>N("sessionTimeout",B),children:[r.jsx(ue,{"data-testid":"select-session-timeout",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"1",children:"1 час"}),r.jsx(C,{value:"8",children:"8 часов"}),r.jsx(C,{value:"24",children:"24 часа"}),r.jsx(C,{value:"168",children:"7 дней"})]})]})]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Изменение пароля"}),r.jsx(Ze,{children:"Обновите пароль для вашего аккаунта"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"currentPassword",children:"Текущий пароль"}),r.jsxs("div",{className:"relative",children:[r.jsx(ne,{id:"currentPassword",type:c?"text":"password",value:y.currentPassword,onChange:B=>k("currentPassword",B.target.value),"data-testid":"input-current-password"}),r.jsx(D,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!c),children:c?r.jsx(Nb,{className:"h-4 w-4"}):r.jsx(ir,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"newPassword",children:"Новый пароль"}),r.jsxs("div",{className:"relative",children:[r.jsx(ne,{id:"newPassword",type:u?"text":"password",value:y.newPassword,onChange:B=>k("newPassword",B.target.value),"data-testid":"input-new-password"}),r.jsx(D,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!u),children:u?r.jsx(Nb,{className:"h-4 w-4"}):r.jsx(ir,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"confirmPassword",children:"Подтвердите новый пароль"}),r.jsx(ne,{id:"confirmPassword",type:"password",value:y.confirmPassword,onChange:B=>k("confirmPassword",B.target.value),"data-testid":"input-confirm-password"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(D,{onClick:M,disabled:_.isPending,"data-testid":"button-update-password",title:"Обновить пароль",children:[r.jsx(zA,{className:"h-4 w-4 mr-2"}),_.isPending?"Обновление...":"Обновить пароль"]}),r.jsxs(D,{onClick:A,disabled:R.isPending,variant:"outline","data-testid":"button-save-security",title:"Сохранить настройки безопасности",children:[r.jsx(Dt,{className:"h-4 w-4 mr-2"}),R.isPending?"Сохранение...":"Сохранить безопасность"]})]})]})]})]}),r.jsx(He,{value:"account",className:"space-y-6",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Управление аккаунтом"}),r.jsx(Ze,{children:"Опции для управления вашим аккаунтом"})]}),r.jsx(W,{className:"space-y-4",children:r.jsx("div",{className:"rounded-lg border border-destructive/20 bg-destructive/5 p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(wr,{className:"h-5 w-5 text-destructive mt-0.5"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"font-semibold text-destructive",children:"Удаление аккаунта"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Удаление аккаунта приведёт к безвозвратной потере всех данных, статистики и настроек. Это действие нельзя отменить."}),r.jsxs(D,{variant:"destructive",size:"sm","data-testid":"button-delete-account",title:"Удалить аккаунт безвозвратно",onClick:()=>{l({title:"Функция недоступна",description:"Для удаления аккаунта свяжитесь с администрацией.",variant:"default"})},children:[r.jsx(wr,{className:"h-4 w-4 mr-2"}),"Удалить аккаунт"]})]})]})})})]})})]})]})})}function YVe(){const[e,t]=v.useState(""),[n,s]=v.useState("all"),[a,i]=v.useState(null),[l,o]=v.useState(!1),[c,d]=v.useState(""),[u,h]=v.useState("approve"),{toast:f}=at(),m=Et(),{data:g=[],isLoading:x}=Fe({queryKey:["/api/advertiser/access-requests"],staleTime:0});console.log("Access requests data:",g);const w=Oe({mutationFn:async k=>await Re(`/api/advertiser/access-requests/${k.requestId}/respond`,"POST",{action:k.action,message:k.message}),onSuccess:(k,S)=>{f({title:S.action==="approve"?"Запрос одобрен":"Запрос отклонен",description:S.action==="approve"?"Партнер получил доступ к офферу":"Запрос был отклонен",variant:"default"}),m.invalidateQueries({queryKey:["/api/advertiser/access-requests"]}),o(!1),i(null),d("")},onError:k=>{f({title:"Ошибка",description:k.message||"Не удалось обработать запрос",variant:"destructive"})}}),j=v.useMemo(()=>g.filter(k=>{const S=k.offerName.toLowerCase().includes(e.toLowerCase())||k.partnerUsername.toLowerCase().includes(e.toLowerCase())||k.partnerEmail.toLowerCase().includes(e.toLowerCase())||k.partnerName.toLowerCase().includes(e.toLowerCase()),P=n==="all"||k.status===n;return S&&P}),[g,e,n]),y=(k,S)=>{i(k),h(S),o(!0)},b=()=>{a&&w.mutate({requestId:a.id,action:u,message:c.trim()||void 0})},p=k=>{switch(k){case"pending":return{className:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:lr,label:"Ожидает"};case"approved":return{className:"bg-green-100 text-green-800 border-green-200",icon:ur,label:"Одобрено"};case"rejected":return{className:"bg-red-100 text-red-800 border-red-200",icon:Kt,label:"Отклонено"};default:return{className:"bg-gray-100 text-gray-800 border-gray-200",icon:lr,label:k}}},N=k=>{const S=new Date(k),_=new Date().getTime()-S.getTime(),R=Math.floor(_/(1e3*60*60*24));return R===0?`Сегодня в ${S.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`:R===1?`Вчера в ${S.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}`:S.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return x?r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-muted border-t-primary"}),r.jsx("p",{children:"Загрузка запросов доступа..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Запросы доступа"}),r.jsx("p",{className:"text-muted-foreground",children:"Управление запросами партнеров на доступ к офферам"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:g.filter(k=>k.status==="pending").length}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Ожидают"})]})}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:g.filter(k=>k.status==="approved").length}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Одобрено"})]})}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:g.filter(k=>k.status==="rejected").length}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Отклонено"})]})})]})]}),r.jsx(q,{children:r.jsx(W,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(ne,{placeholder:"Поиск по офферу, партнеру, email или компании...",value:e,onChange:k=>t(k.target.value),className:"pl-10","data-testid":"input-search-requests"})]}),r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsxs(D,{variant:"outline",className:"gap-2","data-testid":"button-filter-status",children:[r.jsx(As,{className:"h-4 w-4"}),n==="all"?"Все статусы":n==="pending"?"Ожидают":n==="approved"?"Одобрено":"Отклонено"]})}),r.jsxs(Es,{children:[r.jsx(Lt,{onClick:()=>s("all"),children:"Все статусы"}),r.jsx(Lt,{onClick:()=>s("pending"),children:"Ожидают"}),r.jsx(Lt,{onClick:()=>s("approved"),children:"Одобрено"}),r.jsx(Lt,{onClick:()=>s("rejected"),children:"Отклонено"})]})]})]})})}),r.jsx(q,{children:r.jsx(W,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Оффер"}),r.jsx(Z,{children:"Партнер"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Дата запроса"}),r.jsx(Z,{children:"Сообщение"}),r.jsx(Z,{className:"text-right",children:"Действия"})]})}),r.jsx(It,{children:j.length===0?r.jsx(De,{children:r.jsx(H,{colSpan:6,className:"text-center py-8",children:r.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[r.jsx(Gt,{className:"h-8 w-8"}),r.jsx("p",{children:"Запросы не найдены"})]})})}):j.map(k=>{const S=p(k.status),P=S.icon;return r.jsxs(De,{className:"hover:bg-gray-50/50",children:[r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Gj,{name:k.offerName,logo:k.offerLogo,size:"md",showTooltip:!0}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:k.offerName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[k.offerPayout," ",k.offerCurrency]})]})]})}),r.jsx(H,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:k.partnerUsername}),r.jsx("div",{className:"text-sm text-muted-foreground",children:k.partnerName||k.partnerEmail})]})}),r.jsx(H,{children:r.jsxs(ie,{variant:"outline",className:S.className,children:[r.jsx(P,{className:"w-3 h-3 mr-1"}),S.label]})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Xn,{className:"w-4 h-4 text-muted-foreground"}),N(k.requestedAt||k.createdAt)]})}),r.jsx(H,{children:k.requestNote?r.jsx("div",{className:"max-w-xs truncate text-sm",title:k.requestNote,children:k.requestNote}):r.jsx("span",{className:"text-muted-foreground text-sm",children:"Без сообщения"})}),r.jsx(H,{className:"text-right",children:r.jsx("div",{className:"flex items-center justify-end gap-2",children:k.status==="pending"?r.jsxs(r.Fragment,{children:[r.jsx(D,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>y(k,"approve"),"data-testid":`button-approve-${k.id}`,title:"Одобрить запрос",children:r.jsx(on,{className:"h-4 w-4"})}),r.jsx(D,{size:"sm",variant:"destructive",onClick:()=>y(k,"reject"),"data-testid":`button-reject-${k.id}`,title:"Отклонить запрос",children:r.jsx(Fn,{className:"h-4 w-4"})})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[k.approvedAt&&r.jsx("span",{className:"text-xs text-muted-foreground",children:N(k.approvedAt)}),r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsx(D,{variant:"ghost",size:"sm","data-testid":`button-menu-${k.id}`,children:r.jsx(Gx,{className:"h-4 w-4"})})}),r.jsx(Es,{align:"end",children:k.status==="approved"?r.jsxs(Lt,{onClick:()=>y(k,"reject"),className:"text-red-600 focus:text-red-600",children:[r.jsx(pu,{className:"h-4 w-4 mr-2"}),"Отозвать доступ"]}):k.status==="rejected"?r.jsxs(Lt,{onClick:()=>y(k,"approve"),className:"text-green-600 focus:text-green-600",children:[r.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Одобрить"]}):null})]})]})})})]},k.id)})})]})})})}),r.jsx(_t,{open:l,onOpenChange:o,children:r.jsxs(kt,{className:"sm:max-w-md",children:[r.jsx(St,{children:r.jsx(Ct,{children:u==="approve"?"Одобрить запрос":"Отклонить запрос"})}),r.jsxs("div",{className:"space-y-4",children:[a&&r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded bg-gray-200 flex items-center justify-center",children:r.jsx(Gt,{className:"w-4 h-4 text-gray-500"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:a.offerName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Запрос от ",a.partnerUsername]})]})]}),a.message&&r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Сообщение партнера:"}),r.jsx("div",{className:"text-sm text-gray-600",children:a.message})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium block mb-2",children:"Ответное сообщение (необязательно)"}),r.jsx(gt,{value:c,onChange:k=>d(k.target.value),placeholder:u==="approve"?"Добро пожаловать! Желаем успешного трафика...":"К сожалению, ваш запрос не может быть одобрен...",rows:3,"data-testid":"textarea-response-message"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsxs(D,{onClick:b,disabled:w.isPending,className:u==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700","data-testid":"button-submit-response",children:[w.isPending?r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-muted border-t-primary mr-2"}):u==="approve"?r.jsx(Bs,{className:"h-4 w-4 mr-2"}):r.jsx(pu,{className:"h-4 w-4 mr-2"}),u==="approve"?"Одобрить":"Отклонить"]}),r.jsx(D,{variant:"outline",onClick:()=>{o(!1),d("")},"data-testid":"button-cancel-response",children:"Отмена"})]})]})]})})]})}function XVe(){const{user:e}=tr(),{toast:t}=at();Wt();const n=Et(),{data:s=[],isLoading:a}=Fe({queryKey:["/api/notifications"],enabled:!!(e!=null&&e.id)}),i=()=>{const m=localStorage.getItem("auth_token");return m&&m!=="null"&&m!=="undefined"&&m.trim()!==""?m:null},l=Oe({mutationKey:["markAsRead"],mutationFn:async m=>{const g=i();if(!g)throw new Error("Authentication required - please re-login");const x=await fetch(`/api/notifications/${m}/read`,{method:"PUT",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(!x.ok)throw new Error(`Failed to mark as read: ${x.status}`);return x.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notifications"]}),t({title:"✅ Успешно",description:"Уведомление отмечено как прочитанное",variant:"default"})},onError:m=>{t({title:"❌ Ошибка",description:m.message||"Не удалось отметить уведомление",variant:"destructive"})}}),o=Oe({mutationKey:["deleteNotification"],mutationFn:async m=>{const g=i();if(!g)throw new Error("Authentication required - please re-login");const x=await fetch(`/api/notifications/${m}`,{method:"DELETE",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(!x.ok)throw new Error(`Failed to delete: ${x.status}`);return x.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notifications"]}),t({title:"✅ Удалено",description:"Уведомление успешно удалено",variant:"default"})},onError:m=>{t({title:"❌ Ошибка",description:m.message||"Не удалось удалить уведомление",variant:"destructive"})}}),c=Oe({mutationKey:["markAllAsRead"],mutationFn:async()=>{const m=i();if(!m)throw new Error("Authentication required - please re-login");const g=await fetch("/api/notifications/mark-all-read",{method:"PUT",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(!g.ok)throw new Error(`Failed to mark all as read: ${g.status}`);return g.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notifications"]}),t({title:"✅ Выполнено",description:"Все уведомления отмечены как прочитанные",variant:"default"})}}),d=m=>{const g="h-4 w-4";switch(m){case"offer_request_approved":return r.jsx(ao,{className:`${g} text-green-500`});case"offer_request_rejected":return r.jsx(Kt,{className:`${g} text-red-500`});case"offer_request_created":return r.jsx(lr,{className:`${g} text-blue-500`});case"payment":return r.jsx(ao,{className:`${g} text-green-500`});case"partner_joined":return r.jsx(ao,{className:`${g} text-blue-500`});case"offer_paused":return r.jsx(Ua,{className:`${g} text-orange-500`});case"antifraud_alert":return r.jsx(Kt,{className:`${g} text-red-500`});default:return r.jsx($n,{className:`${g} text-gray-500`})}},u=m=>{switch(m){case"offer_request_approved":case"payment":case"partner_joined":return"default";case"offer_request_rejected":case"antifraud_alert":return"destructive";case"offer_request_created":return"secondary";default:return"outline"}},h=m=>{switch(m){case"offer_request_approved":return"Заявка одобрена";case"offer_request_rejected":return"Заявка отклонена";case"offer_request_created":return"Новая заявка";case"payment":return"Платеж";case"partner_joined":return"Новый партнер";case"offer_paused":return"Оффер приостановлен";case"antifraud_alert":return"Антифрод";case"general":return"Общее";default:return"Уведомление"}},f=s.filter(m=>!m.is_read).length;return a?r.jsx("div",{className:"container mx-auto p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-lg text-muted-foreground",children:"Загрузка уведомлений..."})})}):r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx($n,{className:"h-8 w-8 text-primary"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Уведомления"}),r.jsx("p",{className:"text-muted-foreground",children:"Системные уведомления и оповещения"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[f>0&&r.jsxs(ie,{variant:"destructive",className:"px-3 py-1",children:[f," непрочитанных"]}),r.jsxs(D,{onClick:()=>c.mutate(),disabled:c.isPending||f===0,variant:"outline",size:"sm",title:"Отметить все как прочитанные",children:[r.jsx(Fre,{className:"h-4 w-4 mr-2"}),"Отметить все"]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx($n,{className:"h-5 w-5"}),"Все уведомления (",s.length,")"]})}),r.jsx(W,{children:s.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx($n,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-lg text-muted-foreground",children:"Уведомлений пока нет"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Здесь будут отображаться системные оповещения"})]}):r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{className:"w-[50px]",children:"Статус"}),r.jsx(Z,{className:"w-[120px]",children:"Тип"}),r.jsx(Z,{children:"Сообщение"}),r.jsx(Z,{className:"w-[150px]",children:"Дата"}),r.jsx(Z,{className:"w-[120px]",children:"Действия"})]})}),r.jsx(It,{children:s.map(m=>r.jsxs(De,{className:`transition-colors ${m.is_read?"bg-gray-50/30 dark:bg-gray-800/20 hover:bg-gray-50/50 dark:hover:bg-gray-800/30":"bg-blue-50/80 dark:bg-blue-950/30 border-l-4 border-l-blue-500"}`,children:[r.jsx(H,{children:r.jsxs("div",{className:"flex items-center justify-center",children:[!m.is_read&&r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),d(m.type)]})}),r.jsx(H,{children:r.jsx(ie,{variant:u(m.type),className:`text-xs ${m.is_read?"":"ring-2 ring-blue-200"}`,children:h(m.type)})}),r.jsx(H,{children:r.jsxs("div",{className:`${m.is_read?"text-gray-600 dark:text-gray-300":"font-semibold text-gray-900 dark:text-white"}`,children:[r.jsx("div",{className:`${m.is_read?"font-medium":"font-bold"}`,children:m.title}),r.jsx("div",{className:`text-sm mt-1 ${m.is_read?"text-muted-foreground":"text-gray-700 dark:text-gray-200"}`,children:m.message}),m.metadata&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[m.metadata.offerName&&r.jsxs("span",{children:["Оффер: ",m.metadata.offerName]}),m.metadata.partnerName&&r.jsxs("span",{children:["Партнер: ",m.metadata.partnerName]}),m.metadata.amount&&r.jsxs("span",{children:["Сумма: ",m.metadata.amount," ",m.metadata.currency]})]})]})}),r.jsx(H,{children:r.jsx("div",{className:`text-sm ${m.is_read?"text-muted-foreground":"text-gray-600 dark:text-gray-300 font-medium"}`,children:n1(new Date(m.created_at),{addSuffix:!0,locale:lo})})}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[m.is_read?r.jsxs(ie,{variant:"secondary",className:"text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[r.jsx(ao,{className:"h-3 w-3 mr-1"}),"Прочитано"]}):r.jsxs(D,{onClick:()=>l.mutate(m.id),disabled:l.isPending,variant:"outline",size:"sm",className:"bg-blue-500 hover:bg-blue-600 text-white border-blue-500 hover:border-blue-600",title:"Отметить как прочитанное",children:[r.jsx(on,{className:"h-4 w-4 mr-1"}),"Прочитано"]}),r.jsx(D,{onClick:()=>o.mutate(m.id),disabled:o.isPending,variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",title:"Удалить уведомление",children:r.jsx(wr,{className:"h-4 w-4"})})]})})]},m.id))})]})})]})]})}const ZVe=()=>{const{user:e}=tr(),[t,n]=v.useState(!1),{toast:s}=at(),{data:a,isLoading:i}=Fe({queryKey:["/api/partner/referral-stats"],enabled:!!e&&e.role==="affiliate"}),l=()=>{if(a!=null&&a.referral_code){const d=`${window.location.origin}/register?ref=${a.referral_code}`;navigator.clipboard.writeText(d),n(!0),s({title:"Ссылка скопирована!",description:"Реферальная ссылка скопирована в буфер обмена"}),setTimeout(()=>n(!1),2e3)}},o=()=>{if(a!=null&&a.referral_code&&typeof navigator<"u"&&navigator.share){const d=`${window.location.origin}/register?ref=${a.referral_code}`;navigator.share({title:"Приглашаю стать рекламодателем",text:"Регистрируйтесь по моей ссылке и получите отличные условия для рекламы!",url:d})}};if(i)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(!a)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[r.jsx(or,{className:"h-12 w-12 text-gray-400"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Реферальная программа недоступна"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Обратитесь к администратору для активации реферальной программы"})]});const c=a.program_enabled!==!1;return r.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Реферальная программа"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Приглашайте рекламодателей и получайте 5% с их выплат партнерам"})]}),!c&&r.jsx(ie,{variant:"destructive",children:"Программа приостановлена"})]}),r.jsxs(rn,{defaultValue:"overview",className:"space-y-6",children:[r.jsxs(Zr,{children:[r.jsx(We,{value:"overview",children:"Настройки"}),r.jsx(We,{value:"statistics",children:"Статистика"})]}),r.jsxs(He,{value:"overview",className:"space-y-6",children:[!c&&r.jsx(q,{className:"border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-900/20",children:r.jsxs(re,{children:[r.jsx(se,{className:"text-orange-800 dark:text-orange-200",children:"Программа временно приостановлена"}),r.jsx(Ze,{className:"text-orange-700 dark:text-orange-300",children:"Ваш рекламодатель временно отключил реферальную программу. Новые приглашения недоступны до возобновления программы."})]})}),c&&r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(If,{className:"h-5 w-5"}),"Ваша реферальная ссылка"]}),r.jsx(Ze,{children:"Поделитесь этой ссылкой с потенциальными рекламодателями"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ne,{value:`${window.location.origin}/register?ref=${a.referral_code}`,readOnly:!0,className:"font-mono","data-testid":"input-referral-link"}),r.jsx(D,{onClick:l,variant:"outline",size:"icon",title:"Копировать ссылку","data-testid":"button-copy-link",children:t?r.jsx(ur,{className:"h-4 w-4"}):r.jsx(Yr,{className:"h-4 w-4"})}),r.jsx(D,{onClick:o,variant:"outline",size:"icon",title:"Поделиться ссылкой","data-testid":"button-share-link",children:r.jsx(dne,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(F,{htmlFor:"referral-code",children:"Ваш реферальный код:"}),r.jsx(ie,{variant:"secondary",className:"font-mono",children:a.referral_code})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Приглашено"}),r.jsx(or,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold",children:a.total_referrals}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.active_referrals," активных"]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Заработано"}),r.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[a.total_earned," USD"]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",a.pending_amount," USD ожидает"]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Всего транзакций"}),r.jsx(cr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold",children:a.total_transactions})})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Статус"}),r.jsx(Are,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold",children:c?r.jsx(ie,{variant:"default",className:"text-xs",children:"Активна"}):r.jsx(ie,{variant:"destructive",className:"text-xs",children:"Приостановлена"})})})]})]})]}),r.jsxs(He,{value:"statistics",className:"space-y-6",children:[r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Приглашенные рекламодатели"}),r.jsx(Ze,{children:"Список всех рекламодателей, зарегистрированных по вашей ссылке"})]}),r.jsx(W,{children:a.referred_advertisers&&a.referred_advertisers.length>0?r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Рекламодатель"}),r.jsx(Z,{children:"Дата регистрации"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Заработано"})]})}),r.jsx(It,{children:a.referred_advertisers.map(d=>r.jsxs(De,{children:[r.jsx(H,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:d.username}),r.jsx("div",{className:"text-sm text-muted-foreground",children:d.email})]})}),r.jsx(H,{children:new Date(d.createdAt).toLocaleDateString("ru-RU")}),r.jsx(H,{children:r.jsx(ie,{variant:d.isActive?"default":"secondary",children:d.isActive?"Активен":"Неактивен"})}),r.jsxs(H,{children:[d.totalCommissions," USD"]})]},d.id))})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(or,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Нет приглашенных рекламодателей"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Поделитесь своей реферальной ссылкой для привлечения рекламодателей"})]})})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"История комиссий"}),r.jsx(Ze,{children:"Детальная история всех полученных комиссий"})]}),r.jsx(W,{children:a.commission_history&&a.commission_history.length>0?r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Дата"}),r.jsx(Z,{children:"Сумма"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Рекламодатель"})]})}),r.jsx(It,{children:a.commission_history.map(d=>r.jsxs(De,{children:[r.jsx(H,{children:new Date(d.createdAt).toLocaleDateString("ru-RU")}),r.jsxs(H,{children:[d.amount," USD"]}),r.jsx(H,{children:r.jsx(ie,{variant:d.status==="paid"?"default":"secondary",children:d.status==="paid"?"Выплачено":"Ожидает"})}),r.jsx(H,{children:d.referredUser?d.referredUser.username:"Н/Д"})]},d.id))})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(lr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Нет комиссий"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Комиссии появятся после выплат приглашенным партнерам"})]})})]})]})]})]})};function QVe(){var o,c;const[e,t]=v.useState(!0),{toast:n}=at(),s=Et(),{data:a,isLoading:i}=Fe({queryKey:["/api/advertiser/referral-stats"]});X.useEffect(()=>{(a==null?void 0:a.programEnabled)!==void 0&&t(a.programEnabled)},[a==null?void 0:a.programEnabled]);const l=Oe({mutationFn:d=>Re("/api/advertiser/referral-program/toggle","POST",{enabled:d}),onSuccess:d=>{t(d.enabled),s.invalidateQueries({queryKey:["/api/advertiser/referral-stats"]}),n({title:d.enabled?"Программа включена":"Программа отключена",description:d.enabled?"Партнеры теперь могут приглашать новых партнеров":"Реферальная программа временно приостановлена"})},onError:()=>{n({title:"Ошибка",description:"Не удалось изменить статус программы",variant:"destructive"})}});return i?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Реферальная программа"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Управление реферальной программой для партнеров"})]})}),r.jsxs(rn,{defaultValue:"program",className:"space-y-6",children:[r.jsxs(Zr,{children:[r.jsx(We,{value:"program",children:"Настройки программы"}),r.jsx(We,{value:"statistics",children:"Детальная статистика"})]}),r.jsxs(He,{value:"program",className:"space-y-6",children:[r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(fr,{className:"h-5 w-5"}),"Настройки программы"]}),r.jsx(Ze,{children:"Включите или отключите реферальную программу для ваших партнеров"})]}),r.jsxs(W,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(F,{htmlFor:"referral-program",children:"Реферальная программа"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Партнеры получают 5% комиссии с выплат приглашенным партнерам"})]}),r.jsx(Je,{id:"referral-program",checked:e,onCheckedChange:d=>l.mutate(d),disabled:l.isPending,"data-testid":"switch-referral-program"})]}),r.jsx(wn,{}),r.jsx("div",{className:"text-sm text-muted-foreground",children:e?"✅ Программа активна — партнеры могут приглашать новых участников":"⏸️ Программа приостановлена — новые приглашения недоступны"})]})]}),a&&r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Всего партнеров"}),r.jsx(or,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold",children:a.referredPartners.length}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Активных: ",a.referredPartners.filter(d=>d.referrerInfo).length]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Выплачено комиссий"}),r.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:["$",a.commissionStats.paidCommissions]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["В ожидании: $",a.commissionStats.pendingCommissions]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Всего комиссий"}),r.jsx(cr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold",children:a.commissionStats.totalTransactions}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"За все время"})]})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Ставка комиссии"}),r.jsx(mo,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold",children:"5%"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"С каждой выплаты"})]})]})]}),(a==null?void 0:a.referredPartners)&&a.referredPartners.length>0&&r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Приглашенные партнеры"}),r.jsx(Ze,{children:"Список всех партнеров, приглашенных в вашу программу"})]}),r.jsx(W,{children:r.jsx("div",{className:"space-y-3",children:a.referredPartners.map(d=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:d.username}),r.jsx("p",{className:"text-sm text-muted-foreground",children:d.email})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(ie,{variant:d.referrerInfo?"default":"secondary",children:d.referrerInfo?"Приглашен партнером":"Прямая регистрация"}),r.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Код: ",d.referralCode||"Нет"]})]})]},d.id))})})]}),!e&&r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{className:"text-muted-foreground",children:"Реферальная программа отключена"}),r.jsx(Ze,{children:"Включите программу, чтобы партнеры могли приглашать новых партнеров и получать комиссию"})]}),r.jsx(W,{children:r.jsxs(D,{onClick:()=>l.mutate(!0),disabled:l.isPending,"data-testid":"button-enable-referral",children:[r.jsx(mo,{className:"h-4 w-4 mr-2"}),"Включить реферальную программу"]})})]})]}),r.jsx(He,{value:"statistics",className:"space-y-6",children:a?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Всего выплачено"}),r.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",a.commissionStats.paidCommissions]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["От ",a.commissionStats.totalTransactions," транзакций"]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"К выплате"}),r.jsx(cr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",a.commissionStats.pendingCommissions]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Ожидает выплаты"})]})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Приглашенных партнеров"}),r.jsx(or,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.referredPartners.length}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Приглашенных: ",a.referredPartners.filter(d=>d.referrerInfo).length]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:"Средняя комиссия"}),r.jsx(mo,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["$",a.commissionStats.totalTransactions>0?(parseFloat(a.commissionStats.paidCommissions)/a.commissionStats.totalTransactions).toFixed(2):"0.00"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"За транзакцию"})]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Приглашенные партнеры"}),r.jsx(Ze,{children:"Список всех партнеров, которых вы пригласили в систему"})]}),r.jsx(W,{children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Партнер"}),r.jsx(Z,{children:"Email"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Реферальный код"}),r.jsx(Z,{children:"Дата регистрации"})]})}),r.jsxs(It,{children:[(o=a.referredPartners)==null?void 0:o.map(d=>r.jsxs(De,{children:[r.jsx(H,{className:"font-medium",children:d.username}),r.jsx(H,{children:d.email}),r.jsx(H,{children:r.jsx(ie,{variant:d.referrerInfo?"default":"secondary",children:d.referrerInfo?"Приглашен":"Прямо"})}),r.jsx(H,{className:"text-green-600 font-semibold",children:d.referralCode||"Нет кода"}),r.jsx(H,{children:new Date(d.createdAt).toLocaleDateString("ru-RU")})]},d.id)),(!a.referredPartners||a.referredPartners.length===0)&&r.jsx(De,{children:r.jsx(H,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"Пока нет приглашенных партнеров"})})]})]})})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"История комиссий"}),r.jsx(Ze,{children:"Все комиссионные выплаты от ваших приглашенных партнеров"})]}),r.jsx(W,{children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Партнер"}),r.jsx(Z,{children:"Сумма"}),r.jsx(Z,{children:"Исходная сумма"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Дата"})]})}),r.jsxs(It,{children:[(c=a.commissionHistory)==null?void 0:c.map(d=>r.jsxs(De,{children:[r.jsx(H,{className:"font-medium",children:d.referrer.username||"Неизвестно"}),r.jsxs(H,{className:"text-green-600 font-semibold",children:["$",d.amount]}),r.jsxs(H,{children:["$",d.originalAmount]}),r.jsx(H,{children:r.jsx(ie,{variant:d.status==="paid"?"default":"secondary",children:d.status==="paid"?"Выплачено":"Ожидает"})}),r.jsx(H,{children:new Date(d.createdAt).toLocaleDateString("ru-RU")})]},d.id)),(!a.commissionHistory||a.commissionHistory.length===0)&&r.jsx(De,{children:r.jsx(H,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"Пока нет комиссионных выплат"})})]})]})})]})]}):r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]})]})}function JVe(){const[e,t]=v.useState([]),[n,s]=v.useState(!1),{toast:a}=at(),i=async()=>{try{const d=await fetch("/api/objects/upload",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!d.ok)throw new Error("Failed to get upload URL");return{method:"PUT",url:(await d.json()).uploadURL}}catch(d){throw console.error("Error getting upload parameters:",d),a({title:"Ошибка загрузки",description:"Не удалось получить URL для загрузки",variant:"destructive"}),d}},l=async d=>{s(!0);try{for(const u of d.successful||[]){const h=u.uploadURL,f=await fetch("/api/objects/metadata",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({fileURL:h})});if(f.ok){const m=await f.json(),g={id:u.id||Date.now().toString(),name:u.name||"unknown",size:u.size||0,type:u.type||"unknown",url:h||"",objectPath:m.objectPath,uploadedAt:new Date};t(x=>[...x,g]),a({title:"Файл загружен успешно",description:`${u.name} был загружен в Object Storage`})}else console.error("Failed to set file metadata"),a({title:"Ошибка метаданных",description:"Файл загружен, но не удалось установить метаданные",variant:"destructive"})}}catch(u){console.error("Error processing upload:",u),a({title:"Ошибка обработки",description:"Произошла ошибка при обработке загруженных файлов",variant:"destructive"})}finally{s(!1)}},o=d=>{if(d===0)return"0 Bytes";const u=1024,h=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(d)/Math.log(u));return parseFloat((d/Math.pow(u,f)).toFixed(2))+" "+h[f]},c=()=>{t([]),a({title:"Список очищен",description:"Все файлы удалены из списка"})};return r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Тестирование Object Storage"}),r.jsx("p",{className:"text-muted-foreground",children:"Загрузите файлы в облачное хранилище Replit"})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Ba,{className:"h-5 w-5"}),"Загрузка файлов"]}),r.jsx(Ze,{children:"Выберите файлы для загрузки в Object Storage. Максимальный размер: 10MB"})]}),r.jsxs(W,{children:[r.jsx(lw,{maxNumberOfFiles:5,maxFileSize:10485760,onGetUploadParameters:i,onComplete:l,buttonClassName:"w-full h-20 border-2 border-dashed border-primary/20 hover:border-primary/40 transition-colors",children:r.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[r.jsx(Ba,{className:"h-8 w-8"}),r.jsx("span",{className:"text-lg font-medium",children:"Загрузить файлы"}),r.jsx("span",{className:"text-sm",children:"Нажмите для выбора файлов"})]})}),n&&r.jsx("div",{className:"mt-4 text-center text-muted-foreground",children:r.jsx("span",{children:"Обработка загруженных файлов..."})})]})]}),e.length>0&&r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Gre,{className:"h-5 w-5"}),"Загруженные файлы (",e.length,")"]}),r.jsx(Ze,{children:"Файлы в приватном хранилище Object Storage"})]}),r.jsx(D,{onClick:c,variant:"outline",size:"sm",children:"Очистить список"})]}),r.jsx(W,{children:r.jsx("div",{className:"space-y-3",children:e.map(d=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded",children:r.jsx(on,{className:"h-4 w-4 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:d.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[o(d.size)," • ",d.type]}),d.objectPath&&r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:d.objectPath})]})]}),r.jsx("div",{className:"text-right",children:r.jsx(ie,{variant:"secondary",children:d.uploadedAt.toLocaleTimeString()})})]},d.id))})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Информация о хранилище"})}),r.jsx(W,{className:"space-y-2",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Bucket ID:"}),r.jsx("p",{className:"font-mono text-xs break-all",children:"replit-objstore-6b899733-6fa6-40a7-a433-b8bbe153777d"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Приватная директория:"}),r.jsx("p",{className:"font-mono text-xs",children:"/.private/"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Публичная директория:"}),r.jsx("p",{className:"font-mono text-xs",children:"/public/"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Максимальный размер:"}),r.jsx("p",{children:"10 MB на файл"})]})]})})]})]})}const eqe=e=>[{title:e("navigation.dashboard"),href:"/affiliate",icon:Ww},{title:e("navigation.statistics"),href:"/affiliate/statistics",icon:yr},{title:e("navigation.offers"),href:"/affiliate/offers",icon:Gt},{title:e("navigation.accessRequests"),href:"/affiliate/access-requests",icon:cs},{title:e("navigation.team"),href:"/affiliate/team",icon:or},{title:e("navigation.referrals"),href:"/affiliate/referrals",icon:mo},{title:e("navigation.finances"),href:"/affiliate/finances",icon:Rt},{title:e("navigation.postbacks"),href:"/affiliate/postbacks",icon:fr},{title:e("navigation.profile"),href:"/affiliate/profile",icon:Oo},{title:e("navigation.settings"),href:"/affiliate/settings",icon:qre}];function tqe({className:e}){const{t}=Wt(),[n]=Bn(),[s,a]=v.useState(!1),{user:i,logout:l}=tr(),{data:o=[]}=Fe({queryKey:["/api/partner/offers"],enabled:!!i}),{data:c=[]}=Fe({queryKey:["/api/notifications"],enabled:!!i}),u=eqe(t).map(f=>f.href==="/affiliate/offers"?{...f,badge:o.length>0?o.length:void 0,badgeVariant:"secondary"}:f),h=()=>{l()};return r.jsxs("div",{className:Ee("flex flex-col h-screen bg-card border-r transition-all duration-300",s?"w-16":"w-64",e),children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[!s&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"P"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-lg font-bold text-black dark:text-white",children:t("navigation.partner","Партнер")}),r.jsx("span",{className:"text-xs text-black/60 dark:text-white/60",children:i==null?void 0:i.username})]})]}),r.jsx(D,{variant:"ghost",size:"icon",onClick:()=>a(!s),className:"h-8 w-8",children:s?r.jsx(Zc,{className:"h-4 w-4"}):r.jsx(Mi,{className:"h-4 w-4"})})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-2",children:u.map(f=>{const m=n===f.href||f.href!=="/affiliate"&&n.startsWith(f.href);return r.jsxs(Ls,{href:f.href,className:Ee("flex items-center gap-3 px-3 py-2 rounded-lg font-medium transition-colors hover:bg-accent hover:text-accent-foreground",m?"bg-primary text-primary-foreground":"text-black dark:text-white"),title:s?f.title:void 0,children:[r.jsx(f.icon,{className:"h-4 w-4 flex-shrink-0"}),!s&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"flex-1",children:f.title}),f.badge&&r.jsx(ie,{variant:f.badgeVariant||"default",className:"text-xs",children:f.badge})]})]},f.href)})}),r.jsxs("div",{className:"p-4 border-t space-y-2",children:[r.jsxs(Ls,{href:"/affiliate/notifications",className:Ee("flex items-center gap-3 px-3 py-2 rounded-lg font-medium transition-colors hover:bg-accent hover:text-accent-foreground text-black dark:text-white",n==="/affiliate/notifications"&&"bg-primary text-primary-foreground"),title:s?t("navigation.notifications"):void 0,children:[r.jsx($n,{className:"h-4 w-4 flex-shrink-0"}),!s&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"flex-1",children:t("navigation.notifications")}),c.filter(f=>!f.is_read).length>0&&r.jsx(ie,{variant:"destructive",className:"text-xs",children:c.filter(f=>!f.is_read).length})]})]}),r.jsxs("div",{className:Ee("flex items-center gap-3 px-3 py-2",s&&"justify-center"),children:[!s&&r.jsx("span",{className:"font-medium text-black dark:text-white",children:t("common.theme")}),r.jsx(Kv,{})]}),r.jsxs(D,{variant:"ghost",onClick:h,className:Ee("w-full justify-start gap-3 text-black dark:text-white hover:text-destructive hover:bg-destructive/10",s&&"px-3"),title:s?t("navigation.logout"):void 0,children:[r.jsx(Uv,{className:"h-4 w-4 flex-shrink-0"}),!s&&r.jsx("span",{children:t("navigation.logout")})]})]})]})}function rqe(){const{i18n:e,t}=Wt(),n=s=>{e.changeLanguage(s)};return r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsxs(D,{variant:"outline",size:"icon",title:t("language.select","Select language"),children:[r.jsx(Jre,{className:"h-[1.2rem] w-[1.2rem]"}),r.jsx("span",{className:"sr-only",children:"Change language"})]})}),r.jsxs(Es,{align:"end",children:[r.jsxs(Lt,{onClick:()=>n("ru"),children:[r.jsx("span",{className:"mr-2",children:"🇷🇺"}),t("language.russian")]}),r.jsxs(Lt,{onClick:()=>n("en"),children:[r.jsx("span",{className:"mr-2",children:"🇺🇸"}),t("language.english")]})]})]})}function nqe(){const{user:e,logout:t}=tr(),{t:n,i18n:s}=Wt(),{data:a,isLoading:i}=Fe({queryKey:["/api/partner/finance/summary"],enabled:!!e&&e.role==="affiliate",refetchInterval:3e4}),l=()=>{t()},o=()=>{window.location.href="/affiliate/settings"},c=()=>{window.location.href="/affiliate/profile"};if(!e)return null;const d=e.firstName&&e.lastName?`${e.firstName[0]}${e.lastName[0]}`:e.username[0].toUpperCase();return r.jsx("header",{className:"border-b bg-card dark:bg-card",children:r.jsxs("div",{className:"flex h-16 items-center justify-between px-6",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("h2",{className:"text-lg font-semibold text-foreground",children:n("navigation.dashboard")})}),r.jsxs("div",{className:"flex items-center space-x-3",children:[e.role==="affiliate"&&r.jsxs("div",{className:"hidden md:flex items-center space-x-3",children:[r.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 px-3 py-1.5 rounded-lg border border-green-200 dark:border-green-700 shadow-sm hover:shadow-md transition-shadow duration-200 cursor-pointer",title:n("finances.currentBalance"),children:[r.jsx(Rt,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),i?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-16 h-5 bg-green-200 dark:bg-green-700 rounded animate-pulse"}),r.jsx("span",{className:"text-xs text-green-600/80 dark:text-green-400/80 font-medium",children:n("common.loading")})]}):r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"font-bold text-lg text-green-700 dark:text-green-300",children:["$",a?a.balance.toFixed(2):"0.00"]}),r.jsx("span",{className:"text-xs text-green-600/80 dark:text-green-400/80 font-medium",children:s.language==="ru"?"Баланс":"Balance"})]})]}),a&&a.pendingPayouts>0&&r.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/30 dark:to-amber-900/30 px-3 py-1.5 rounded-lg border border-orange-200 dark:border-orange-700 shadow-sm hover:shadow-md transition-shadow duration-200 cursor-pointer",title:n("finances.pendingPayouts"),children:[r.jsx("svg",{className:"h-4 w-4 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("span",{className:"font-bold text-lg text-orange-700 dark:text-orange-300",children:["$",a.pendingPayouts.toFixed(2)]}),r.jsx("span",{className:"text-xs text-orange-600/80 dark:text-orange-400/80 font-medium",children:s.language==="ru"?"В ожидании":"Pending"})]})]}),r.jsx(rqe,{}),r.jsx(Kv,{}),r.jsxs("div",{className:"hidden md:flex items-center space-x-2 text-sm text-muted-foreground",children:[r.jsx(Mh,{className:"h-4 w-4"}),r.jsx("span",{children:e.email})]}),r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsx(D,{variant:"ghost",className:"relative h-8 w-8 rounded-full","data-testid":"button-user-menu",title:n("common.profile"),children:r.jsxs(bT,{className:"h-8 w-8",children:[r.jsx(jT,{src:void 0,alt:e.username}),r.jsx(wT,{className:"bg-primary text-primary-foreground",children:d})]})})}),r.jsxs(Es,{className:"w-56",align:"end",forceMount:!0,children:[r.jsx(vT,{className:"font-normal",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("p",{className:"text-sm font-medium leading-none",children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.username}),r.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email})]})}),r.jsx(qf,{}),r.jsxs(Lt,{onClick:c,"data-testid":"menu-profile",children:[r.jsx(Oo,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:n("common.profile","Профиль")})]}),r.jsxs(Lt,{onClick:o,"data-testid":"menu-settings",children:[r.jsx(fr,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:n("common.settings","Настройки")})]}),r.jsx(qf,{}),r.jsxs(Lt,{onClick:l,className:"text-destructive focus:text-destructive","data-testid":"menu-logout",children:[r.jsx(Uv,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:n("common.logout","Выход")})]})]})]})]})]})})}function ps({children:e}){return r.jsxs("div",{className:"flex h-screen bg-background",children:[r.jsx(tqe,{}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx(nqe,{}),r.jsx("main",{className:"flex-1 overflow-auto",children:e})]})]})}function sqe(e){return`${Math.ceil(e*100)/100}%`}function ha(e,t="USD"){const n=typeof e=="string"?parseFloat(e):e;return isNaN(n)?"0":`${{USD:"$",EUR:"€",RUB:"₽",GBP:"£"}[t]||t}${n}`}function aqe(){var z,U;const{t:e}=Wt(),{toast:t}=at(),[n,s]=v.useState("overview"),[a,i]=v.useState({dateFrom:"",dateTo:"",offerId:"all",geo:"all",device:"all"}),[l,o]=v.useState(!1),[c,d]=v.useState(null),[u,h]=v.useState(1),f=50,{data:m,isLoading:g,error:x}=Fe({queryKey:["/api/partner/analytics",n,u,a],queryFn:async()=>{const E=new URLSearchParams({tab:n,page:u.toString(),limit:f.toString(),...a.offerId!=="all"&&{offer:a.offerId},...a.dateFrom&&{startDate:a.dateFrom},...a.dateTo&&{endDate:a.dateTo}}),$=localStorage.getItem("token")||localStorage.getItem("auth_token");if(console.log("Making request with token:",$?$.substring(0,20)+"...":"null"),!$){console.log("No token found, redirecting to login"),window.location.href="/login";return}const G=await fetch(`/api/partner/analytics?${E}`,{headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"}});if(console.log("Response status:",G.status),!G.ok){const oe=await G.json().catch(()=>({}));if(console.log("Error response:",oe),G.status===401||G.status===403){console.log("Auth error, redirecting to login"),localStorage.removeItem("token"),window.location.href="/login";return}throw new Error(oe.error||"Failed to fetch analytics data")}return G.json()}}),{data:w}=Fe({queryKey:["/api/partner/offers"],queryFn:async()=>{const E=localStorage.getItem("token")||localStorage.getItem("auth_token");if(!E)return window.location.href="/login",[];const $=await fetch("/api/partner/offers",{headers:{Authorization:`Bearer ${E}`}});if(!$.ok){if($.status===401||$.status===403)return localStorage.removeItem("token"),window.location.href="/login",[];throw new Error("Failed to fetch offers")}return $.json()}}),j=()=>{h(1)},y=()=>{i({dateFrom:"",dateTo:"",offerId:"all",geo:"all",device:"all"}),h(1)},b=async(E,$="")=>{try{await navigator.clipboard.writeText(E),t({title:e("statistics.messages.copied"),description:e("statistics.messages.copiedDesc",{type:$}),duration:2e3})}catch{t({title:e("common.error"),description:e("statistics.messages.copyError"),variant:"destructive",duration:2e3})}},p=E=>{if(!w)return E;const $=w.find(G=>G.id===E);return $?$.name:E},N=E=>m!=null&&m.data?m.data.find($=>$.clickId===E):null,k=(m==null?void 0:m.summary)||{totalClicks:0,totalConversions:0,totalRevenue:0,conversionRate:0,epc:0},S=(m==null?void 0:m.data)||[],P=((z=m==null?void 0:m.pagination)==null?void 0:z.totalItems)||0,_=((U=m==null?void 0:m.pagination)==null?void 0:U.totalPages)||1,R=(m==null?void 0:m.pagination)||{currentPage:1,itemsPerPage:50,totalItems:0,totalPages:0},O=()=>{u>1&&h(u-1)},M=()=>{u<_&&h(u+1)},A=E=>{h(E)},T=()=>{const E=[];if(_<=5)for(let G=1;G<=_;G++)E.push(G);else{const G=Math.max(1,u-2),oe=Math.min(_,G+5-1);for(let ee=G;ee<=oe;ee++)E.push(ee)}return E},B=()=>r.jsxs("div",{className:"flex items-center justify-between mt-4",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:[e("statistics.pagination.showing")," ",(u-1)*f+1,"-",Math.min(u*f,P)," ",e("statistics.pagination.of")," ",P," ",e("statistics.pagination.records")]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(D,{variant:"outline",size:"sm",onClick:O,disabled:u===1,children:[r.jsx(Mi,{className:"h-4 w-4"}),e("statistics.pagination.previous")]}),r.jsx("div",{className:"flex items-center gap-1",children:T().map(E=>r.jsx(D,{variant:u===E?"default":"outline",size:"sm",onClick:()=>A(E),className:"w-8 h-8 p-0",children:E},E))}),r.jsxs(D,{variant:"outline",size:"sm",onClick:M,disabled:u===_,children:[e("statistics.pagination.next"),r.jsx(Zc,{className:"h-4 w-4"})]})]})]});return g?r.jsxs("div",{className:"p-6 space-y-6 bg-background dark:bg-background min-h-screen",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Pn,{className:"h-8 w-48"}),r.jsx(Pn,{className:"h-10 w-32"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Array.from({length:5}).map((E,$)=>r.jsx(Pn,{className:"h-24"},$))}),r.jsx(Pn,{className:"h-96"})]}):x?r.jsx("div",{className:"p-6 bg-background dark:bg-background min-h-screen",children:r.jsx(q,{className:"border-red-200 bg-red-50",children:r.jsx(W,{className:"p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:e("statistics.messages.loadingError")}),r.jsx("p",{className:"text-red-600",children:e("statistics.messages.loadingErrorDesc")})]})})})}):r.jsxs("div",{className:"space-y-6 p-6 bg-background dark:bg-background min-h-screen",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[r.jsx(yr,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e("statistics.title")]}),r.jsx("p",{className:"text-muted-foreground",children:e("statistics.subtitle")})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(D,{variant:"outline",onClick:()=>window.print(),children:[r.jsx(br,{className:"h-4 w-4 mr-2"}),e("statistics.export")]})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(As,{className:"h-4 w-4"}),e("statistics.filters")]})}),r.jsx(W,{children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:e("statistics.dateFrom")}),r.jsx(ne,{type:"date",value:a.dateFrom,onChange:E=>i($=>({...$,dateFrom:E.target.value})),"data-testid":"input-date-from"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:e("statistics.dateTo")}),r.jsx(ne,{type:"date",value:a.dateTo,onChange:E=>i($=>({...$,dateTo:E.target.value})),"data-testid":"input-date-to"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:e("statistics.offer")}),r.jsxs(fe,{value:a.offerId,onValueChange:E=>i($=>({...$,offerId:E})),children:[r.jsx(ue,{"data-testid":"select-offer",children:r.jsx(me,{placeholder:e("statistics.allOffers")})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:e("statistics.allOffers")}),w==null?void 0:w.map(E=>r.jsx(C,{value:E.id,children:E.name},E.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:e("statistics.geo")}),r.jsxs(fe,{value:a.geo,onValueChange:E=>i($=>({...$,geo:E})),children:[r.jsx(ue,{"data-testid":"select-geo",children:r.jsx(me,{placeholder:e("statistics.allCountries")})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:e("statistics.allCountries")}),r.jsx(C,{value:"IN",children:e("statistics.countries.IN")}),r.jsx(C,{value:"US",children:e("statistics.countries.US")}),r.jsx(C,{value:"DE",children:e("statistics.countries.DE")}),r.jsx(C,{value:"UK",children:e("statistics.countries.UK")})]})]})]}),r.jsxs("div",{className:"flex items-end gap-2",children:[r.jsx(D,{onClick:j,className:"flex-1",children:e("statistics.applyFilters")}),r.jsx(D,{variant:"outline",onClick:y,children:e("statistics.resetFilters")})]})]})})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:e("statistics.columns.clicks")}),r.jsx(Qc,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:k.totalClicks.toLocaleString()})})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:e("statistics.columns.conversions")}),r.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600",children:k.totalConversions})})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:e("statistics.columns.revenue")}),r.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:ha(k.totalRevenue)})})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:e("statistics.columns.cr")}),r.jsx(cr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:sqe(k.conversionRate/100)})})]}),r.jsxs(q,{children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium",children:e("statistics.columns.epc")}),r.jsx(yr,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(W,{children:r.jsx("div",{className:"text-2xl font-bold text-teal-600 dark:text-teal-400",children:ha(k.epc)})})]})]}),r.jsxs(rn,{value:n,onValueChange:s,className:"space-y-4",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-6",children:[r.jsxs(We,{value:"overview",className:"flex items-center gap-2",children:[r.jsx(yr,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),e("statistics.tabs.overview")]}),r.jsxs(We,{value:"geography",className:"flex items-center gap-2",children:[r.jsx(mr,{className:"h-4 w-4 text-green-600"}),e("statistics.tabs.geography")]}),r.jsxs(We,{value:"devices",className:"flex items-center gap-2",children:[r.jsx(tu,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}),e("statistics.tabs.devices")]}),r.jsxs(We,{value:"sources",className:"flex items-center gap-2",children:[r.jsx(Xr,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"}),e("statistics.tabs.sources")]}),r.jsxs(We,{value:"subid",className:"flex items-center gap-2",children:[r.jsx(Gt,{className:"h-4 w-4 text-teal-600 dark:text-teal-400"}),"SubID"]}),r.jsxs(We,{value:"details",className:"flex items-center gap-2",children:[r.jsx(ir,{className:"h-4 w-4 text-indigo-600"}),e("statistics.tabs.details")]})]}),r.jsx(He,{value:"overview",className:"space-y-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(yr,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e("statistics.tabs.overview")," - ",e("statistics.columns.clicks")]})}),r.jsxs(W,{children:[r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:e("statistics.columns.date")}),r.jsx(Z,{children:e("statistics.columns.offer")}),r.jsx(Z,{children:e("statistics.columns.country")}),r.jsx(Z,{children:e("statistics.columns.clickId")}),r.jsx(Z,{children:e("statistics.columns.status")}),r.jsx(Z,{children:e("statistics.columns.revenue")}),r.jsx(Z,{children:e("statistics.columns.actions")})]})}),r.jsx(It,{children:S.map(E=>r.jsxs(De,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[r.jsx(H,{children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium text-foreground",children:(E.timestamp||E.createdAt)&&!isNaN(new Date(E.timestamp||E.createdAt).getTime())?new Date(E.timestamp||E.createdAt).toLocaleDateString():e("statistics.dateNotAvailable","Дата неизвестна")}),r.jsx("span",{className:"text-xs text-muted-foreground",children:(E.timestamp||E.createdAt)&&!isNaN(new Date(E.timestamp||E.createdAt).getTime())?new Date(E.timestamp||E.createdAt).toLocaleTimeString():""})]})}),r.jsx(H,{className:"font-medium",children:p(E.offerId)}),r.jsx(H,{children:r.jsx(ie,{variant:"outline",children:E.country})}),r.jsx(H,{className:"font-mono text-xs",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-600 dark:text-blue-400 dark:text-blue-400",children:E.clickId}),r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>b(E.clickId,"ClickID"),title:e("statistics.actions.copyClickId"),children:r.jsx(Yr,{className:"h-3 w-3"})})]})}),r.jsx(H,{children:r.jsx(ie,{variant:E.status==="conversion"?"default":"secondary",className:E.status==="conversion"?"bg-green-100 text-green-800":"",children:E.status==="conversion"?e("statistics.status.conversion"):e("statistics.status.click")})}),r.jsx(H,{className:"font-medium text-purple-600 dark:text-purple-400",children:ha(E.revenue)}),r.jsx(H,{children:r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>{d(E.clickId),o(!0)},title:e("statistics.actions.viewSubId"),children:[r.jsx(ir,{className:"h-3 w-3 mr-1"}),"SubID"]})})]},E.id))})]}),r.jsx(B,{})]})]})}),r.jsx(He,{value:"geography",className:"space-y-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(mr,{className:"h-5 w-5 text-green-600"}),e("statistics.tabs.geography")," - ",e("statistics.columns.clicks")]})}),r.jsxs(W,{children:[r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:e("statistics.columns.country")}),r.jsx(Z,{children:e("statistics.columns.clicks")}),r.jsx(Z,{children:e("statistics.columns.conversions")}),r.jsx(Z,{children:e("statistics.columns.revenue")}),r.jsx(Z,{children:"CR"}),r.jsx(Z,{children:"EPC"})]})}),r.jsx(It,{children:S.map(E=>r.jsxs(De,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[r.jsx(H,{children:r.jsx(ie,{variant:"outline",children:E.country})}),r.jsx(H,{children:E.clicks}),r.jsx(H,{children:E.conversions}),r.jsx(H,{className:"font-medium text-purple-600 dark:text-purple-400",children:ha(E.revenue)}),r.jsx(H,{className:"font-medium text-orange-600 dark:text-orange-400",children:E.cr}),r.jsx(H,{className:"font-medium text-teal-600 dark:text-teal-400",children:E.epc})]},E.country))})]}),r.jsx(B,{})]})]})}),r.jsx(He,{value:"devices",className:"space-y-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(tu,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),e("statistics.tabs.devices")," - ",e("statistics.columns.clicks")]})}),r.jsxs(W,{children:[r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:e("statistics.columns.device")}),r.jsx(Z,{children:e("statistics.columns.clicks")}),r.jsx(Z,{children:e("statistics.columns.conversions")}),r.jsx(Z,{children:e("statistics.columns.revenue")}),r.jsx(Z,{children:"CR"}),r.jsx(Z,{children:"EPC"})]})}),r.jsx(It,{children:S.map(E=>r.jsxs(De,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[r.jsx(H,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[E.device==="Desktop"&&r.jsx(tu,{className:"h-4 w-4"}),E.device==="Mobile"&&r.jsx($i,{className:"h-4 w-4"}),E.device==="Tablet"&&r.jsx($i,{className:"h-4 w-4"}),E.device]})}),r.jsx(H,{children:E.clicks}),r.jsx(H,{children:E.conversions}),r.jsx(H,{className:"font-medium text-purple-600 dark:text-purple-400",children:ha(E.revenue)}),r.jsx(H,{className:"font-medium text-orange-600 dark:text-orange-400",children:E.cr}),r.jsx(H,{className:"font-medium text-teal-600 dark:text-teal-400",children:E.epc})]},E.device))})]}),r.jsx(B,{})]})]})}),r.jsx(He,{value:"sources",className:"space-y-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Xr,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"}),e("statistics.tabs.sources")," - ",e("statistics.columns.clicks")]})}),r.jsxs(W,{children:[r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:e("statistics.columns.source")}),r.jsx(Z,{children:e("statistics.columns.clicks")}),r.jsx(Z,{children:e("statistics.columns.conversions")}),r.jsx(Z,{children:e("statistics.columns.revenue")}),r.jsx(Z,{children:"CR"}),r.jsx(Z,{children:"EPC"})]})}),r.jsx(It,{children:S.map(E=>r.jsxs(De,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[r.jsx(H,{children:r.jsx(ie,{variant:"outline",children:E.source})}),r.jsx(H,{children:E.clicks}),r.jsx(H,{children:E.conversions}),r.jsx(H,{className:"font-medium text-purple-600 dark:text-purple-400",children:ha(E.revenue)}),r.jsx(H,{className:"font-medium text-orange-600 dark:text-orange-400",children:E.cr}),r.jsx(H,{className:"font-medium text-teal-600 dark:text-teal-400",children:E.epc})]},E.source))})]}),r.jsx(B,{})]})]})}),r.jsx(He,{value:"subid",className:"space-y-4",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Gt,{className:"h-5 w-5 text-teal-600 dark:text-teal-400"}),e("statistics.subid.title")]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e("statistics.subid.description")})]}),r.jsxs(W,{children:[r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:e("statistics.columns.clickId")}),r.jsx(Z,{children:"Sub1"}),r.jsx(Z,{children:"Sub2"}),r.jsx(Z,{children:"Sub3"}),r.jsx(Z,{children:"Sub4"}),r.jsx(Z,{children:"Sub5"}),r.jsx(Z,{children:"Действия"})]})}),r.jsx(It,{children:S.slice(0,10).map(E=>r.jsxs(De,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[r.jsx(H,{className:"font-mono text-xs text-blue-600 dark:text-blue-400 dark:text-blue-400",children:E.clickId}),r.jsx(H,{className:"text-xs text-foreground",children:E.sub_1||"-"}),r.jsx(H,{className:"text-xs text-foreground",children:E.sub_2||"-"}),r.jsx(H,{className:"text-xs text-foreground",children:E.sub_3||"-"}),r.jsx(H,{className:"text-xs text-foreground",children:E.sub_4||"-"}),r.jsx(H,{className:"text-xs text-foreground",children:E.sub_5||"-"}),r.jsx(H,{children:r.jsxs(D,{variant:"outline",size:"sm",onClick:()=>{d(E.clickId),o(!0)},title:e("statistics.actions.viewAllSub"),children:[r.jsx(ir,{className:"h-3 w-3 mr-1"}),e("statistics.actions.viewAllSub")]})})]},E.id||E.clickId))})]}),r.jsx(B,{})]})]})}),r.jsx(He,{value:"details",className:"space-y-4",children:r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(ir,{className:"h-5 w-5 text-indigo-600"}),e("statistics.subid.detailsTitle")]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[e("statistics.pagination.showing")," ",(R.currentPage-1)*R.itemsPerPage+1,"-",Math.min(R.currentPage*R.itemsPerPage,R.totalItems)," ",e("statistics.pagination.of")," ",R.totalItems," ",e("statistics.pagination.records")]})]}),r.jsxs(W,{children:[r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:e("statistics.columns.date")}),r.jsx(Z,{children:e("statistics.columns.offer")}),r.jsx(Z,{children:e("statistics.columns.clickId")}),r.jsx(Z,{children:e("statistics.columns.ip")}),r.jsx(Z,{children:e("statistics.columns.country")}),r.jsx(Z,{children:e("statistics.columns.device")}),r.jsx(Z,{children:e("statistics.columns.status")}),r.jsx(Z,{children:e("statistics.columns.revenue")}),r.jsx(Z,{children:"SubID"})]})}),r.jsx(It,{children:S.map(E=>r.jsxs(De,{className:"bg-background dark:bg-card hover:bg-muted/50 dark:hover:bg-muted/50",children:[r.jsx(H,{className:"text-xs",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-foreground",children:(E.timestamp||E.createdAt)&&!isNaN(new Date(E.timestamp||E.createdAt).getTime())?new Date(E.timestamp||E.createdAt).toLocaleDateString():e("statistics.dateNotAvailable","Дата неизвестна")}),r.jsx("span",{className:"text-muted-foreground",children:(E.timestamp||E.createdAt)&&!isNaN(new Date(E.timestamp||E.createdAt).getTime())?new Date(E.timestamp||E.createdAt).toLocaleTimeString():""})]})}),r.jsx(H,{className:"font-medium text-foreground",children:p(E.offerId)}),r.jsx(H,{className:"font-mono text-xs text-blue-600 dark:text-blue-400",children:E.clickId}),r.jsx(H,{className:"text-xs",children:E.ip}),r.jsx(H,{children:r.jsx(ie,{variant:"outline",children:E.country})}),r.jsx(H,{children:E.device}),r.jsx(H,{children:r.jsx(ie,{variant:E.status==="conversion"?"default":"secondary",className:E.status==="conversion"?"bg-green-100 text-green-800":"",children:E.status==="conversion"?e("statistics.status.conversion"):e("statistics.status.click")})}),r.jsx(H,{className:"font-medium text-purple-600 dark:text-purple-400",children:ha(E.revenue)}),r.jsx(H,{children:r.jsx(D,{variant:"outline",size:"sm",onClick:()=>{d(E.clickId),o(!0)},title:e("statistics.actions.viewAllSub"),children:r.jsx(ir,{className:"h-3 w-3"})})})]},E.id))})]}),r.jsx(B,{})]})]})})]}),r.jsx(_t,{open:l,onOpenChange:o,children:r.jsxs(kt,{className:"max-w-4xl",children:[r.jsxs(St,{children:[r.jsxs(Ct,{children:[e("statistics.subid.parametersFor")," ",c]}),r.jsx(Br,{children:e("statistics.subid.fullList")})]}),c&&r.jsx("div",{className:"grid grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:Array.from({length:16},(E,$)=>{const G=`sub_${$+1}`,oe=N(c),ee=(oe==null?void 0:oe[G])||"-";return r.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[r.jsxs("span",{className:"font-medium text-sm",children:["Sub",$+1,":"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground truncate max-w-48",title:ee,children:ee}),ee!=="-"&&r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>b(ee,`Sub${$+1}`),title:e("statistics.actions.copyClickId"),children:r.jsx(Yr,{className:"h-3 w-3"})})]})]},G)})})]})})]})}function iqe(){const[e,t]=v.useState({from:new Date(Date.now()-6048e5),to:new Date}),[n,s]=v.useState({offerId:"",country:"",device:"",trafficSource:"",sub1:"",sub2:"",search:""}),[a,i]=v.useState(!1),{data:l,isLoading:o,refetch:c}=Fe({queryKey:["/api/live-analytics/partner/live-statistics",e,n],queryFn:async()=>{const g=new URLSearchParams({dateFrom:e.from.toISOString(),dateTo:e.to.toISOString(),...Object.fromEntries(Object.entries(n).filter(([j,y])=>y&&y.toString().trim()))}),x=localStorage.getItem("auth_token"),w=await fetch(`/api/live-analytics/partner/live-statistics?${g}`,{headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});if(!w.ok)throw new Error("Failed to fetch partner statistics");return w.json()},refetchInterval:a?3e4:!1}),d=(l==null?void 0:l.summary)||{totalClicks:0,totalConversions:0,totalRevenue:0,totalPayout:0,avgCR:0,avgEPC:0,totalOffers:0},u=(l==null?void 0:l.data)||[],h=(g,x)=>{s(w=>({...w,[g]:x==="all"?"":x}))},f=()=>{s({offerId:"",country:"",device:"",trafficSource:"",sub1:"",sub2:"",search:""})},m=async g=>{try{const x=new URLSearchParams({dateFrom:e.from.toISOString(),dateTo:e.to.toISOString(),format:g,...Object.fromEntries(Object.entries(n).filter(([N,k])=>k&&k.toString().trim()))}),w=localStorage.getItem("auth_token"),j=await fetch(`/api/live-analytics/partner/live-statistics/export?${x}`,{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});if(!j.ok)throw new Error("Failed to export data");const y=await j.blob(),b=URL.createObjectURL(y),p=document.createElement("a");p.href=b,p.download=`partner_analytics_${Date.now()}.${g}`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(b)}catch{}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[r.jsx(ir,{className:"h-8 w-8 text-green-600"}),"Живая Статистика"]}),r.jsx("p",{className:"text-muted-foreground",children:"Статистика вашего трафика в реальном времени"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(D,{variant:"outline",onClick:()=>i(!a),className:a?"bg-green-50 text-green-700 border-green-200":"","data-testid":"toggle-auto-refresh",children:[r.jsx(Vt,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),a?"Авто-обновление ВКЛ":"Авто-обновление ВЫКЛ"]}),r.jsxs(D,{onClick:()=>c(),variant:"outline","data-testid":"manual-refresh",children:[r.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Обновить"]}),r.jsxs(D,{onClick:()=>m("csv"),variant:"outline","data-testid":"export-csv",children:[r.jsx(br,{className:"h-4 w-4 mr-2"}),"CSV"]}),r.jsxs(D,{onClick:()=>m("json"),variant:"outline","data-testid":"export-json",children:[r.jsx(br,{className:"h-4 w-4 mr-2"}),"JSON"]})]})]}),r.jsxs(DY,{cols:{sm:2,lg:4},children:[r.jsx(Nc,{title:"Клики",value:d.totalClicks.toLocaleString(),icon:r.jsx(Qc,{className:"h-5 w-5 text-blue-600"}),trend:{value:0,direction:"up"}}),r.jsx(Nc,{title:"Конверсии",value:d.totalConversions.toLocaleString(),icon:r.jsx(cr,{className:"h-5 w-5 text-green-600"}),trend:{value:0,direction:"up"}}),r.jsx(Nc,{title:"Выплата",value:`$${d.totalPayout.toLocaleString()}`,icon:r.jsx(Rt,{className:"h-5 w-5 text-purple-600"}),trend:{value:0,direction:"up"}}),r.jsx(Nc,{title:"Средний CR",value:`${d.avgCR.toFixed(2)}%`,icon:r.jsx(Vr,{className:"h-5 w-5 text-orange-600"}),trend:{value:0,direction:"up"}})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(As,{className:"h-5 w-5"}),"Фильтры"]})}),r.jsx(W,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Период"}),r.jsx(RY,{value:e,onChange:t})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Страна"}),r.jsx(ne,{placeholder:"Код страны (RU, US, etc.)",value:n.country,onChange:g=>h("country",g.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Устройство"}),r.jsxs(fe,{value:n.device,onValueChange:g=>h("device",g),children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Все устройства"})}),r.jsxs(he,{children:[r.jsx(C,{value:"all",children:"Все устройства"}),r.jsx(C,{value:"mobile",children:"Мобильные"}),r.jsx(C,{value:"desktop",children:"Десктоп"}),r.jsx(C,{value:"tablet",children:"Планшеты"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Источник трафика"}),r.jsx(ne,{placeholder:"facebook, google, etc.",value:n.trafficSource,onChange:g=>h("trafficSource",g.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sub1"}),r.jsx(ne,{placeholder:"Значение Sub1",value:n.sub1,onChange:g=>h("sub1",g.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sub2 (Своими значениями)"}),r.jsx(ne,{placeholder:"geo-TR|dev-mobile|src-fb",value:n.sub2,onChange:g=>h("sub2",g.target.value)})]}),r.jsx("div",{className:"flex items-end",children:r.jsx(D,{variant:"outline",onClick:f,className:"w-full","data-testid":"reset-filters",children:"Сбросить фильтры"})})]})})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Статистика трафика"}),r.jsx(Ze,{children:"Подробные данные по вашему трафику"})]}),r.jsx(W,{children:o?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(Vt,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Загрузка данных..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Дата"}),r.jsx("th",{className:"text-left p-2",children:"Оффер ID"}),r.jsx("th",{className:"text-left p-2",children:"Страна"}),r.jsx("th",{className:"text-left p-2",children:"Устройство"}),r.jsx("th",{className:"text-left p-2",children:"Источник"}),r.jsx("th",{className:"text-left p-2",children:"Sub1"}),r.jsx("th",{className:"text-left p-2",children:"Sub2"}),r.jsx("th",{className:"text-right p-2",children:"Клики"}),r.jsx("th",{className:"text-right p-2",children:"Уникальные"}),r.jsx("th",{className:"text-right p-2",children:"Конверсии"}),r.jsx("th",{className:"text-right p-2",children:"CR, %"}),r.jsx("th",{className:"text-right p-2",children:"EPC, $"}),r.jsx("th",{className:"text-right p-2",children:"Выплата, $"})]})}),r.jsx("tbody",{children:u.map((g,x)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-2",children:new Date(g.date).toLocaleDateString("ru-RU")}),r.jsx("td",{className:"p-2",children:r.jsx(ie,{variant:"outline",children:g.offerId})}),r.jsx("td",{className:"p-2",children:r.jsx(ie,{variant:"outline",children:g.country})}),r.jsx("td",{className:"p-2",children:r.jsx(ie,{variant:"secondary",children:g.device})}),r.jsx("td",{className:"p-2",children:g.trafficSource}),r.jsx("td",{className:"p-2",children:g.sub1}),r.jsx("td",{className:"p-2",children:r.jsx("div",{className:"max-w-[100px] truncate",title:g.sub2,children:g.sub2})}),r.jsx("td",{className:"text-right p-2",children:g.clicks.toLocaleString()}),r.jsx("td",{className:"text-right p-2",children:g.uniqueClicks.toLocaleString()}),r.jsx("td",{className:"text-right p-2",children:g.conversions.toLocaleString()}),r.jsxs("td",{className:"text-right p-2",children:[g.cr.toFixed(2),"%"]}),r.jsxs("td",{className:"text-right p-2",children:["$",g.epc.toFixed(2)]}),r.jsxs("td",{className:"text-right p-2 font-semibold text-green-600",children:["$",g.payout.toFixed(2)]})]},x))})]})})})]})]})}function lqe(){const[e,t]=v.useState(!1),[n,s]=v.useState(""),[a,i]=v.useState(""),[l,o]=v.useState(""),{toast:c}=at(),{t:d}=Wt(),u=Et(),{data:h,isLoading:f}=Fe({queryKey:["/api/partner/finance/summary"]}),{data:m,isLoading:g}=Fe({queryKey:["/api/partner/finance/transactions"]}),x=f||g,w=Oe({mutationFn:async k=>Re("/api/partner/finance/withdrawal","POST",k),onSuccess:()=>{c({title:d("finances.messages.withdrawalRequested"),description:d("finances.messages.withdrawalRequestedDesc"),variant:"default"}),t(!1),s(""),i(""),o(""),u.invalidateQueries({queryKey:["/api/partner/finance/summary"]}),u.invalidateQueries({queryKey:["/api/partner/finance/transactions"]})},onError:()=>{c({title:d("common.error"),description:d("finances.messages.withdrawalError"),variant:"destructive"})}}),j=()=>{if(!n||!a||!l){c({title:"Заполните все поля",description:"Все поля обязательны для заполнения",variant:"destructive"});return}if(parseFloat(n)>(h==null?void 0:h.balance)){c({title:"Недостаточно средств",description:"Сумма вывода превышает доступный баланс",variant:"destructive"});return}w.mutate({amount:parseFloat(n),method:a,details:l})},y=k=>{switch(k){case"completed":return r.jsxs(ie,{variant:"default",className:"bg-green-100 text-green-700",children:[r.jsx(ur,{className:"w-3 h-3 mr-1"}),"Завершено"]});case"pending":return r.jsxs(ie,{variant:"secondary",className:"bg-yellow-100 text-yellow-700",children:[r.jsx(lr,{className:"w-3 h-3 mr-1"}),"Ожидание"]});case"processing":return r.jsxs(ie,{variant:"outline",className:"bg-blue-100 text-blue-700",children:[r.jsx(lr,{className:"w-3 h-3 mr-1"}),"Обработка"]});case"failed":return r.jsxs(ie,{variant:"destructive",className:"bg-red-100 text-red-700",children:[r.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Отклонено"]});default:return r.jsx(ie,{variant:"secondary",children:k})}},b=k=>{switch(k){case"commission":case"bonus":return r.jsx($a,{className:"h-4 w-4 text-green-600"});case"payout":return r.jsx(Pre,{className:"h-4 w-4 text-red-600"});default:return r.jsx(Rt,{className:"h-4 w-4 text-gray-600"})}},p=k=>{switch(k){case"commission":return"Комиссия";case"bonus":return"Бонус";case"payout":return"Вывод";default:return k}},N=async k=>{try{const S=await fetch("/api/partner/finance/export?format="+k,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!S.ok)throw new Error("Failed to export");const P=await S.blob(),_=window.URL.createObjectURL(P),R=document.createElement("a");R.href=_,R.download=`finance-report-${new Date().toISOString().split("T")[0]}.${k}`,document.body.appendChild(R),R.click(),window.URL.revokeObjectURL(_),document.body.removeChild(R),c({title:"Отчёт загружен",description:`Финансовый отчёт в формате ${k.toUpperCase()} успешно загружен`,variant:"default"})}catch{c({title:"Ошибка",description:"Не удалось загрузить отчёт",variant:"destructive"})}};return x?r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsx(Pn,{className:"h-8 w-48"}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((k,S)=>r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(Pn,{className:"h-4 w-20"})}),r.jsx(W,{children:r.jsx(Pn,{className:"h-8 w-16"})})]},S))})]}):r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:d("finances.title")}),r.jsx("p",{className:"text-muted-foreground",children:"Управление балансом и выводом средств"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(_t,{open:e,onOpenChange:t,children:[r.jsx(Ja,{asChild:!0,children:r.jsxs(D,{children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Вывод средств"]})}),r.jsxs(kt,{children:[r.jsxs(St,{children:[r.jsx(Ct,{children:"Вывод средств"}),r.jsxs(Br,{children:["Создание заявки на вывод средств. Доступно: ",ha((h==null?void 0:h.balance)||0)]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"amount",children:"Сумма"}),r.jsx(ne,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:n,onChange:k=>s(k.target.value)})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"method",children:"Способ получения"}),r.jsxs(fe,{value:a,onValueChange:i,children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите способ"})}),r.jsxs(he,{children:[r.jsx(C,{value:"paypal",children:"PayPal"}),r.jsx(C,{value:"bank_card",children:"Банковская карта"}),r.jsx(C,{value:"bank_transfer",children:"Банковский перевод"}),r.jsx(C,{value:"crypto",children:"Криптовалюта"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"details",children:"Реквизиты"}),r.jsx(gt,{id:"details",placeholder:"Укажите реквизиты для получения средств",value:l,onChange:k=>o(k.target.value)})]})]}),r.jsxs(go,{children:[r.jsx(D,{variant:"outline",onClick:()=>t(!1),children:"Отмена"}),r.jsx(D,{onClick:j,disabled:w.isPending,children:w.isPending?"Отправка...":"Отправить заявку"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(D,{variant:"outline",onClick:()=>N("csv"),title:"Скачать отчёт в CSV",children:[r.jsx(br,{className:"h-4 w-4 mr-2"}),"CSV"]}),r.jsxs(D,{variant:"outline",onClick:()=>N("json"),title:"Скачать отчёт в JSON",children:[r.jsx(br,{className:"h-4 w-4 mr-2"}),"JSON"]})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(q,{className:"border-l-4 border-l-green-500 bg-gradient-to-br from-green-50 to-white dark:from-green-900/20 dark:to-background",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Текущий баланс"}),r.jsx(Rt,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:ha((h==null?void 0:h.balance)||0)}),r.jsx("p",{className:"text-xs text-green-600/80 dark:text-green-400/80",children:"Доступно к выводу"})]})]}),r.jsxs(q,{className:"border-l-4 border-l-orange-500 bg-gradient-to-br from-orange-50 to-white dark:from-orange-900/20 dark:to-background",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"В ожидании"}),r.jsx(lr,{className:"h-4 w-4 text-orange-600"})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-700 dark:text-orange-300",children:ha((h==null?void 0:h.pendingPayouts)||0)}),r.jsx("p",{className:"text-xs text-orange-600/80 dark:text-orange-400/80",children:"Ожидает подтверждения"})]})]}),r.jsxs(q,{className:"border-l-4 border-l-blue-500 bg-gradient-to-br from-blue-50 to-white dark:from-blue-900/20 dark:to-background",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Общий доход"}),r.jsx(cr,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:ha((h==null?void 0:h.totalRevenue)||0)}),r.jsx("p",{className:"text-xs text-blue-600/80 dark:text-blue-400/80",children:"За всё время"})]})]}),r.jsxs(q,{className:"border-l-4 border-l-purple-500 bg-gradient-to-br from-purple-50 to-white dark:from-purple-900/20 dark:to-background",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(se,{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Средний EPC"}),r.jsx(Oc,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:ha((h==null?void 0:h.avgEPC)||0)}),r.jsx("p",{className:"text-xs text-purple-600/80 dark:text-purple-400/80",children:"Доходность на клик"})]})]})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"История операций"})}),r.jsx(W,{children:r.jsxs(Mt,{children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Дата"}),r.jsx(Z,{children:"Описание"}),r.jsx(Z,{children:"Сумма"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Детали"})]})}),r.jsxs(It,{children:[(m||[]).map(k=>r.jsxs(De,{children:[r.jsx(H,{className:"font-medium",children:k.createdAt&&!isNaN(new Date(k.createdAt).getTime())?new Date(k.createdAt).toLocaleDateString("ru-RU"):"Дата неизвестна"}),r.jsx(H,{children:r.jsxs("div",{className:"flex items-center space-x-3",children:[b(k.type),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:k.comment||"Транзакция"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:p(k.type)})]})]})}),r.jsx(H,{children:r.jsxs("span",{className:`font-medium ${(k.amount||0)>=0?"text-green-600":"text-red-600"}`,children:[(k.amount||0)>=0?"+":"",ha(Math.abs(k.amount||0))]})}),r.jsx(H,{children:y(k.status)}),r.jsxs(H,{className:"text-sm text-muted-foreground",children:["ID: ",k.id.substring(0,8),"..."]})]},k.id)),(!m||m.length===0)&&r.jsx(De,{children:r.jsx(H,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"Транзакции не найдены"})})]})]})})]})]})}const UF=e=>{try{if(!e||e==="null"||e==="undefined")return"только что";const t=new Date(e);return isNaN(t.getTime())?(console.warn("Invalid date for formatting:",e),"только что"):n1(t,{addSuffix:!0,locale:lo})}catch(t){return console.error("Error formatting date distance:",t,e),"только что"}},BF=(e,t="Дата неизвестна")=>{try{if(!e||e==="null"||e==="undefined")return t;const n=new Date(e);return isNaN(n.getTime())?(console.warn("Invalid date for formatting:",e),t):n.toLocaleString("ru")}catch(n){return console.error("Error formatting date:",n,e),t}},oqe={pending:{label:"Ожидает",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",icon:lr},approved:{label:"Одобрен",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",icon:ur},rejected:{label:"Отклонён",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",icon:Kt},cancelled:{label:"Отменён",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",icon:Kt}};function cqe(){const[e,t]=v.useState(null),[n,s]=v.useState(!1),[a,i]=v.useState(!1),{toast:l}=at(),o=Et(),{data:c=[],isLoading:d}=Fe({queryKey:["/api/partner/access-requests"]}),u=Oe({mutationFn:async x=>Re(`/api/partner/access-requests/${x}/cancel`,"PATCH"),onSuccess:()=>{l({title:"Запрос отменён",description:"Ваш запрос на доступ успешно отменён"}),o.invalidateQueries({queryKey:["/api/partner/access-requests"]}),i(!1),t(null)},onError:x=>{l({title:"Ошибка",description:x.message||"Не удалось отменить запрос",variant:"destructive"})}}),h=x=>{t(x),i(!0)},f=x=>{t(x),s(!0)},m=x=>{const w=oqe[x];if(!w)return null;const j=w.icon;return r.jsxs(ie,{className:w.color,children:[r.jsx(j,{className:"w-3 h-3 mr-1"}),w.label]})},g=x=>new Date(x)<new Date;return d?r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsx("div",{className:"container mx-auto p-6",children:r.jsxs("div",{className:"flex items-center justify-center h-64",children:[r.jsx(yc,{className:"w-8 h-8 animate-spin"}),r.jsx("span",{className:"ml-3",children:"Загрузка запросов..."})]})})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(cs,{className:"w-6 h-6 text-blue-600"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Запросы доступа к офферам"})]}),c.length===0?r.jsx(q,{children:r.jsxs(W,{className:"p-12 text-center",children:[r.jsx(Yx,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Пока нет запросов"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Вы ещё не отправляли запросы на доступ к приватным офферам. Найдите интересный оффер и отправьте запрос рекламодателю."})]})}):r.jsx("div",{className:"space-y-4",children:c.map(x=>{const w=g(x.expires_at);return r.jsx(q,{className:"hover:shadow-lg transition-shadow",children:r.jsxs(W,{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold text-lg",children:x.offer_name}),m(x.status),w&&x.status==="pending"&&r.jsxs(ie,{className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",children:[r.jsx(Ua,{className:"w-3 h-3 mr-1"}),"Истёк"]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Om,{className:"w-3 h-3"}),r.jsx("span",{children:x.advertiser_name})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Xn,{className:"w-3 h-3"}),r.jsxs("span",{children:["Отправлено ",UF(x.requested_at)]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(D,{variant:"outline",size:"sm",onClick:()=>f(x),"data-testid":`button-details-${x.id}`,children:"Подробнее"}),x.status==="pending"&&!w&&r.jsxs(D,{variant:"outline",size:"sm",className:"text-red-600 border-red-600 hover:bg-red-50",onClick:()=>h(x),"data-testid":`button-cancel-${x.id}`,children:[r.jsx(Kt,{className:"w-4 h-4 mr-1"}),"Отменить"]})]})]}),x.partner_message&&r.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:r.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("strong",{children:"Ваше сообщение:"})," ",x.partner_message]})}),x.advertiser_response&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[r.jsx("strong",{children:"Ответ рекламодателя:"})," ",x.advertiser_response]})}),x.reviewed_at&&r.jsxs("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:["Обработано ",UF(x.reviewed_at)]})]})},x.id)})})]})}),r.jsx(_t,{open:n,onOpenChange:s,children:r.jsxs(kt,{className:"max-w-2xl",children:[r.jsxs(St,{children:[r.jsx(Ct,{children:"Детали запроса доступа"}),r.jsx(Br,{children:e&&`Запрос к офферу: ${e.offer_name}`})]}),e&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Статус"}),r.jsx("div",{className:"mt-1",children:m(e.status)})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Рекламодатель"}),r.jsx("p",{className:"mt-1",children:e.advertiser_name})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Дата отправки"}),r.jsx("p",{className:"mt-1 text-sm",children:BF(e.requested_at)})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Истекает"}),r.jsx("p",{className:"mt-1 text-sm",children:BF(e.expires_at)})]})]}),e.partner_message&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Ваше сообщение рекламодателю"}),r.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:r.jsx("p",{className:"text-sm",children:e.partner_message})})]}),e.request_note&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Дополнительная информация"}),r.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:r.jsx("p",{className:"text-sm",children:e.request_note})})]}),e.advertiser_response&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Ответ рекламодателя"}),r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900 rounded-lg",children:r.jsx("p",{className:"text-sm",children:e.advertiser_response})})]})]}),r.jsx(go,{children:r.jsx(D,{onClick:()=>s(!1),"data-testid":"button-close-details",children:"Закрыть"})})]})}),r.jsx(_t,{open:a,onOpenChange:i,children:r.jsxs(kt,{children:[r.jsxs(St,{children:[r.jsx(Ct,{children:"Отменить запрос доступа"}),r.jsxs(Br,{children:['Вы уверены, что хотите отменить запрос к офферу "',e==null?void 0:e.offer_name,'"? Это действие нельзя отменить.']})]}),r.jsxs(go,{children:[r.jsx(D,{variant:"outline",onClick:()=>i(!1),disabled:u.isPending,"data-testid":"button-cancel-modal",children:"Нет, оставить"}),r.jsxs(D,{variant:"destructive",onClick:()=>e&&u.mutate(e.id),disabled:u.isPending,"data-testid":"button-confirm-cancel",children:[u.isPending&&r.jsx(yc,{className:"mr-2 h-4 w-4 animate-spin"}),"Да, отменить запрос"]})]})]})})]})}function kS(){const[e,t]=v.useState(""),[n,s]=v.useState(""),[a,i]=v.useState(!1),{login:l}=tr(),{i18n:o,t:c}=Wt(),[,d]=Bn(),{toast:u}=at(),h=o.language||"ru",f=g=>o.changeLanguage(g),m=async g=>{g.preventDefault(),i(!0);try{await l(e,n),d("/")}catch(x){console.error("Login error:",x),u({title:"Ошибка входа",description:x.message||"Неверные учетные данные",variant:"destructive"})}finally{i(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsx("div",{className:"flex justify-center mb-8",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx("i",{className:"fas fa-chart-network text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"FraudGuard"}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Anti-Fraud Platform"})]})]})}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{className:"text-center",children:c("login")}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("select",{value:h,onChange:g=>f(g.target.value),className:"text-sm border border-slate-200 dark:border-slate-700 rounded px-3 py-1 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100","data-testid":"language-select",children:[r.jsx("option",{value:"en",children:"🇺🇸 English"}),r.jsx("option",{value:"ru",children:"🇷🇺 Русский"})]})})]}),r.jsxs(W,{children:[r.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-sm",children:[r.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Быстрый вход:"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{type:"button",onClick:()=>{t("superadmin"),s("password123")},className:"block w-full text-left p-2 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800/30 rounded text-xs",children:[r.jsx("strong",{children:"👑 Супер-админ:"})," superadmin / password123"]}),r.jsxs("button",{type:"button",onClick:()=>{t("advertiser1"),s("password123")},className:"block w-full text-left p-2 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800/30 rounded text-xs",children:[r.jsx("strong",{children:"🏢 Рекламодатель:"})," advertiser1 / password123"]}),r.jsxs("button",{type:"button",onClick:()=>{t("test_affiliate"),s("password123")},className:"block w-full text-left p-2 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800/30 rounded text-xs",children:[r.jsx("strong",{children:"🤝 Партнер:"})," test_affiliate / password123"]})]})]}),r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs(F,{htmlFor:"username",children:[c("username")," / ",c("email")]}),r.jsx(ne,{id:"username",type:"text",value:e,onChange:g=>t(g.target.value),required:!0,"data-testid":"input-username"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"password",children:c("password")}),r.jsx(ne,{id:"password",type:"password",value:n,onChange:g=>s(g.target.value),required:!0,"data-testid":"input-password"})]}),r.jsx(D,{type:"submit",className:"w-full",disabled:a,"data-testid":"button-sign-in",children:a?"Loading...":c("sign_in")}),r.jsxs("div",{className:"mt-6 space-y-2",children:[r.jsx("div",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:"Нет аккаунта?"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(D,{variant:"outline",className:"w-full text-sm",onClick:()=>window.location.href="/auth/register-partner","data-testid":"register-partner-button",children:"Стать партнером"}),r.jsx(D,{variant:"outline",className:"w-full text-sm",onClick:()=>window.location.href="/auth/register-advertiser","data-testid":"register-advertiser-button",children:"Стать рекламодателем"})]})]})]})]})]})]})})}function dqe(){const[e,t]=v.useState({firstName:"",email:"",password:"",confirmPassword:"",phone:"",contactType:"",contact:""}),[n,s]=v.useState(!1),[a,i]=v.useState({}),[l,o]=v.useState(!1),[c,d]=v.useState(null);tr();const{i18n:u,t:h}=Wt(),[,f]=Bn(),{toast:m}=at(),g=u.language||"ru",x=p=>u.changeLanguage(p);v.useEffect(()=>{const N=new URLSearchParams(window.location.search).get("token");N&&d(N)},[]);const w=()=>{const p={};return e.firstName.trim()||(p.firstName="Имя обязательно для заполнения"),e.email.trim()?/\S+@\S+\.\S+/.test(e.email)||(p.email="Неверный формат email"):p.email="Email обязателен для заполнения",e.password.trim()?e.password.length<6&&(p.password="Пароль должен содержать минимум 6 символов"):p.password="Пароль обязателен для заполнения",e.confirmPassword.trim()?e.password!==e.confirmPassword&&(p.confirmPassword="Пароли не совпадают"):p.confirmPassword="Подтверждение пароля обязательно",e.phone.trim()||(p.phone="Телефон обязателен для заполнения"),e.contactType||(p.contactType="Тип контакта обязателен для выбора"),e.contact.trim()||(p.contact="Контакт обязателен для заполнения"),i(p),Object.keys(p).length===0},j=async p=>{if(p.preventDefault(),!!w()){s(!0);try{const N=await fetch("/api/auth/register-partner",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.email,email:e.email,password:e.password,firstName:e.firstName,phone:e.phone,contactType:e.contactType,contact:e.contact,role:"affiliate",registrationLinkToken:c})});if(!N.ok){const k=await N.json().catch(()=>({error:"Registration failed"}));throw new Error(k.error||"Registration failed")}o(!0)}catch(N){console.error("Registration error:",N),m({title:"Ошибка регистрации",description:N.message||"Произошла ошибка. Попробуйте снова.",variant:"destructive"})}finally{s(!1)}}},y=(p,N)=>{t(k=>({...k,[p]:N})),a[p]&&i(k=>({...k,[p]:""}))},b=()=>{o(!1),f("/auth/login")};return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900 py-12",children:[r.jsxs("div",{className:"w-full max-w-md",children:[r.jsx("div",{className:"flex justify-center mb-8",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:r.jsx("i",{className:"fas fa-chart-network text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"AdLinkPro"}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Партнерская программа"})]})]})}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{className:"text-center",children:"Регистрация партнера"}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("select",{value:g,onChange:p=>x(p.target.value),className:"text-sm border border-slate-200 dark:border-slate-700 rounded px-3 py-1 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100","data-testid":"language-select",children:[r.jsx("option",{value:"en",children:"🇺🇸 English"}),r.jsx("option",{value:"ru",children:"🇷🇺 Русский"})]})})]}),r.jsx(W,{children:r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"firstName",children:"Имя *"}),r.jsx(ne,{id:"firstName",type:"text",value:e.firstName,onChange:p=>y("firstName",p.target.value),placeholder:"Введите ваше имя","data-testid":"input-firstName",className:a.firstName?"border-red-500":""}),a.firstName&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.firstName})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"email",children:"Эл. почта *"}),r.jsx(ne,{id:"email",type:"email",value:e.email,onChange:p=>y("email",p.target.value),placeholder:"Введите ваш email","data-testid":"input-email",className:a.email?"border-red-500":""}),a.email&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"password",children:"Пароль *"}),r.jsx(ne,{id:"password",type:"password",value:e.password,onChange:p=>y("password",p.target.value),placeholder:"Введите пароль","data-testid":"input-password",className:a.password?"border-red-500":""}),a.password&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.password})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"confirmPassword",children:"Подтверждение пароля *"}),r.jsx(ne,{id:"confirmPassword",type:"password",value:e.confirmPassword,onChange:p=>y("confirmPassword",p.target.value),placeholder:"Подтвердите пароль","data-testid":"input-confirmPassword",className:a.confirmPassword?"border-red-500":""}),a.confirmPassword&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.confirmPassword})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"phone",children:"Телефон *"}),r.jsx(ne,{id:"phone",type:"tel",value:e.phone,onChange:p=>y("phone",p.target.value),placeholder:"Введите номер телефона","data-testid":"input-phone",className:a.phone?"border-red-500":""}),a.phone&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.phone})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"contactType",children:"Тип контакта *"}),r.jsxs(fe,{value:e.contactType,onValueChange:p=>y("contactType",p),children:[r.jsx(ue,{className:a.contactType?"border-red-500":"","data-testid":"select-contactType",children:r.jsx(me,{placeholder:"Выберите тип контакта"})}),r.jsxs(he,{children:[r.jsx(C,{value:"telegram",children:"Телеграмм"}),r.jsx(C,{value:"skype",children:"Скайп"})]})]}),a.contactType&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.contactType})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"contact",children:"Контакт *"}),r.jsx(ne,{id:"contact",type:"text",value:e.contact,onChange:p=>y("contact",p.target.value),placeholder:e.contactType==="telegram"?"@username":"Skype ID","data-testid":"input-contact",className:a.contact?"border-red-500":""}),a.contact&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.contact})]}),r.jsx(D,{type:"submit",className:"w-full",disabled:n,"data-testid":"button-register",children:n?"Регистрация...":"Зарегистрироваться"}),r.jsxs("div",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:["Уже есть аккаунт?"," ",r.jsx(Ls,{href:"/auth/login",className:"text-blue-600 hover:underline",children:"Войти"})]}),r.jsxs("div",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:["Хотите стать рекламодателем?"," ",r.jsx(Ls,{href:"/auth/register-advertiser",className:"text-blue-600 hover:underline",children:"Регистрация рекламодателя"})]})]})})]})]}),r.jsx(_t,{open:l,onOpenChange:o,children:r.jsxs(kt,{className:"sm:max-w-md",children:[r.jsx(St,{children:r.jsx(Ct,{className:"text-center text-green-600",children:"Регистрация прошла успешно!"})}),r.jsxs("div",{className:"text-center py-6",children:[r.jsx("div",{className:"mb-4",children:r.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Для активации аккаунта менеджер свяжется с вами в течении 24 часов."}),r.jsx(D,{onClick:b,className:"w-full",children:"Перейти к входу"})]})]})})]})}function uqe(){const[e,t]=v.useState({firstName:"",email:"",password:"",confirmPassword:"",company:"",phone:"",contactType:"",contact:"",agreeTerms:!1,agreePrivacy:!1}),[n,s]=v.useState(!1),[a,i]=v.useState({}),{register:l}=tr(),{i18n:o,t:c}=Wt(),[,d]=Bn(),{toast:u}=at(),h=o.language||"ru",f=w=>o.changeLanguage(w),m=()=>{const w={};return e.firstName.trim()||(w.firstName="Имя обязательно для заполнения"),e.email.trim()?/\S+@\S+\.\S+/.test(e.email)||(w.email="Неверный формат email"):w.email="Email обязателен для заполнения",e.password.trim()?e.password.length<6&&(w.password="Пароль должен содержать минимум 6 символов"):w.password="Пароль обязателен для заполнения",e.confirmPassword.trim()?e.password!==e.confirmPassword&&(w.confirmPassword="Пароли не совпадают"):w.confirmPassword="Подтверждение пароля обязательно",e.company.trim()||(w.company="Компания обязательна для заполнения"),e.phone.trim()||(w.phone="Телефон обязателен для заполнения"),e.contactType||(w.contactType="Тип контакта обязателен для выбора"),e.contact.trim()||(w.contact="Контакт обязателен для заполнения"),e.agreeTerms||(w.agreeTerms="Необходимо согласиться с условиями использования"),e.agreePrivacy||(w.agreePrivacy="Необходимо согласиться с политикой конфиденциальности"),i(w),Object.keys(w).length===0},g=async w=>{if(w.preventDefault(),!!m()){s(!0);try{const j={username:e.email,email:e.email,password:e.password,firstName:e.firstName,company:e.company,phone:e.phone,role:"advertiser",userType:"advertiser",settings:JSON.stringify({contactType:e.contactType,contact:e.contact,agreeTerms:e.agreeTerms,agreePrivacy:e.agreePrivacy})};await l(j),u({title:"Регистрация успешна!",description:"Добро пожаловать в платформу рекламодателей",variant:"default"}),d("/advertiser/dashboard")}catch(j){console.error("Registration error:",j),u({title:"Ошибка регистрации",description:j.message||"Произошла ошибка при регистрации",variant:"destructive"})}finally{s(!1)}}},x=(w,j)=>{t(y=>({...y,[w]:j})),a[w]&&i(y=>({...y,[w]:""}))};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900 py-12",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsx("div",{className:"flex justify-center mb-8",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-lg flex items-center justify-center",children:r.jsx("i",{className:"fas fa-chart-network text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"AdLinkPro"}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Платформа рекламодателей"})]})]})}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{className:"text-center",children:"Регистрация рекламодателя"}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("select",{value:h,onChange:w=>f(w.target.value),className:"text-sm border border-slate-200 dark:border-slate-700 rounded px-3 py-1 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100","data-testid":"language-select",children:[r.jsx("option",{value:"en",children:"🇺🇸 English"}),r.jsx("option",{value:"ru",children:"🇷🇺 Русский"})]})})]}),r.jsx(W,{children:r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"firstName",children:"Имя *"}),r.jsx(ne,{id:"firstName",type:"text",value:e.firstName,onChange:w=>x("firstName",w.target.value),placeholder:"Введите ваше имя","data-testid":"input-firstName",className:a.firstName?"border-red-500":""}),a.firstName&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.firstName})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"email",children:"Эл. почта *"}),r.jsx(ne,{id:"email",type:"email",value:e.email,onChange:w=>x("email",w.target.value),placeholder:"Введите ваш email","data-testid":"input-email",className:a.email?"border-red-500":""}),a.email&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"password",children:"Пароль *"}),r.jsx(ne,{id:"password",type:"password",value:e.password,onChange:w=>x("password",w.target.value),placeholder:"Введите пароль","data-testid":"input-password",className:a.password?"border-red-500":""}),a.password&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.password})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"confirmPassword",children:"Подтверждение пароля *"}),r.jsx(ne,{id:"confirmPassword",type:"password",value:e.confirmPassword,onChange:w=>x("confirmPassword",w.target.value),placeholder:"Подтвердите пароль","data-testid":"input-confirmPassword",className:a.confirmPassword?"border-red-500":""}),a.confirmPassword&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.confirmPassword})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"company",children:"Компания *"}),r.jsx(ne,{id:"company",type:"text",value:e.company,onChange:w=>x("company",w.target.value),placeholder:"Введите название компании","data-testid":"input-company",className:a.company?"border-red-500":""}),a.company&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.company})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"phone",children:"Телефон *"}),r.jsx(ne,{id:"phone",type:"tel",value:e.phone,onChange:w=>x("phone",w.target.value),placeholder:"Введите номер телефона","data-testid":"input-phone",className:a.phone?"border-red-500":""}),a.phone&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.phone})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"contactType",children:"Тип контакта *"}),r.jsxs(fe,{value:e.contactType,onValueChange:w=>x("contactType",w),children:[r.jsx(ue,{className:a.contactType?"border-red-500":"","data-testid":"select-contactType",children:r.jsx(me,{placeholder:"Выберите тип контакта"})}),r.jsxs(he,{children:[r.jsx(C,{value:"telegram",children:"Телеграмм"}),r.jsx(C,{value:"skype",children:"Скайп"})]})]}),a.contactType&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.contactType})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"contact",children:"Контакт *"}),r.jsx(ne,{id:"contact",type:"text",value:e.contact,onChange:w=>x("contact",w.target.value),placeholder:e.contactType==="telegram"?"@username":"Skype ID","data-testid":"input-contact",className:a.contact?"border-red-500":""}),a.contact&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.contact})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(dn,{id:"agreeTerms",checked:e.agreeTerms,onCheckedChange:w=>x("agreeTerms",!!w),"data-testid":"checkbox-agreeTerms",className:a.agreeTerms?"border-red-500":""}),r.jsx(F,{htmlFor:"agreeTerms",className:"text-sm",children:"Согласен с условиями использования *"})]}),a.agreeTerms&&r.jsx("p",{className:"text-red-500 text-sm",children:a.agreeTerms}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(dn,{id:"agreePrivacy",checked:e.agreePrivacy,onCheckedChange:w=>x("agreePrivacy",!!w),"data-testid":"checkbox-agreePrivacy",className:a.agreePrivacy?"border-red-500":""}),r.jsx(F,{htmlFor:"agreePrivacy",className:"text-sm",children:"Согласен с политикой конфиденциальности *"})]}),a.agreePrivacy&&r.jsx("p",{className:"text-red-500 text-sm",children:a.agreePrivacy})]}),r.jsx(D,{type:"submit",className:"w-full",disabled:n,"data-testid":"button-register",children:n?"Регистрация...":"Зарегистрироваться"}),r.jsxs("div",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:["Уже есть аккаунт?"," ",r.jsx(Ls,{href:"/auth/login",className:"text-blue-600 hover:underline",children:"Войти"})]}),r.jsxs("div",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:["Хотите стать партнером?"," ",r.jsx(Ls,{href:"/auth/register-partner",className:"text-blue-600 hover:underline",children:"Регистрация партнера"})]})]})})]})]})})}function hqe(){const{toast:e}=at(),[t,n]=v.useState(null),[s,a]=v.useState(!1),[i,l]=v.useState(!1);v.useEffect(()=>{const c=localStorage.getItem("token");n(c)},[]);const o=async()=>{a(!0);try{const c=await fetch("/api/get-fresh-token");if(!c.ok){const u=await c.text();throw new Error(`Ошибка API: ${c.status}`)}const d=await c.json();if(console.log("Received token data:",d),localStorage.removeItem("token"),localStorage.setItem("token",d.token),n(d.token),l(!0),e({title:"Успешно!",description:"Токен обновлен. Перенаправление...",duration:2e3}),"caches"in window){const u=await caches.keys();await Promise.all(u.map(h=>caches.delete(h)))}setTimeout(()=>{window.location.href="/affiliate/statistics"},2e3)}catch{e({title:"Ошибка",description:"Не удалось обновить токен",variant:"destructive",duration:3e3})}finally{a(!1)}};return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:r.jsxs(q,{className:"w-full max-w-md",children:[r.jsxs(re,{className:"text-center",children:[r.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(zA,{className:"w-6 h-6 text-blue-600"})}),r.jsx(se,{className:"text-2xl font-bold",children:"Обновление токена"}),r.jsx("p",{className:"text-muted-foreground",children:"Для работы партнерской аналитики необходимо обновить токен аутентификации"})]}),r.jsxs(W,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Текущий токен:"}),r.jsx("div",{className:"p-3 bg-gray-100 rounded-md font-mono text-xs break-all",children:t?r.jsxs(r.Fragment,{children:[r.jsx(ie,{variant:"outline",className:"mb-2",children:t.length>20?"Найден":"Короткий"}),r.jsxs("div",{children:[t.substring(0,50),"..."]})]}):r.jsxs("div",{className:"text-red-600 flex items-center gap-2",children:[r.jsx(Ua,{className:"w-4 h-4"}),"Токен не найден"]})})]}),r.jsxs(D,{onClick:o,disabled:s||i,className:"w-full",size:"lg",children:[s&&r.jsx(yc,{className:"w-4 h-4 mr-2 animate-spin"}),i&&r.jsx(ur,{className:"w-4 h-4 mr-2 text-green-500"}),s?"Обновляем...":i?"Готово!":"Обновить токен"]}),i&&r.jsxs("div",{className:"text-center p-4 bg-green-50 border border-green-200 rounded-md",children:[r.jsx("div",{className:"text-green-800 font-medium",children:"✓ Токен успешно обновлен!"}),r.jsx("div",{className:"text-green-600 text-sm mt-1",children:"Перенаправление на страницу статистики..."})]}),r.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["После обновления вы будете автоматически перенаправлены",r.jsx("br",{}),"на страницу партнерской аналитики"]})]})]})})}function fqe(){const{toast:e}=at(),t=Et();v.useState(null);const[n,s]=v.useState(!1),[a,i]=v.useState(!1),[l,o]=v.useState(null),[c,d]=v.useState("profiles"),{data:u=[],isLoading:h}=Fe({queryKey:["/api/advertiser/postback/profiles"]}),{data:f=[],isLoading:m}=Fe({queryKey:["/api/advertiser/postback/logs"]}),{data:g=[]}=Fe({queryKey:["/api/advertiser/offers"]});Fe({queryKey:["/api/advertiser/partners"]});const x=Oe({mutationFn:_=>Re("/api/advertiser/postback/profiles","POST",_),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/advertiser/postback/profiles"]}),s(!1),e({title:"Успешно",description:"Профиль постбека создан"})},onError:_=>{e({title:"Ошибка",description:_.message||"Не удалось создать профиль",variant:"destructive"})}}),w=Oe({mutationFn:async _=>{const R=await fetch("/api/track/postback/test",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(_)});if(!R.ok)throw new Error(`HTTP ${R.status}`);return await R.json()},onSuccess:_=>{var R,O,M;_.success?e({title:"Тест успешен",description:`Статус: ${((R=_.response)==null?void 0:R.status)||"OK"} (${((O=_.response)==null?void 0:O.time)||0}ms)`}):e({title:"Ошибка теста",description:_.error||`HTTP ${((M=_.response)==null?void 0:M.status)||"Unknown"}`,variant:"destructive"})},onError:_=>{e({title:"Ошибка",description:_.message||"Произошла ошибка при тестировании постбека",variant:"destructive"})}}),j=Oe({mutationFn:({id:_,data:R})=>Re(`/api/advertiser/postback/profiles/${_}`,"PUT",R),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/advertiser/postback/profiles"]}),i(!1),o(null),e({title:"Успешно",description:"Профиль постбека обновлен"})},onError:_=>{e({title:"Ошибка",description:_.message||"Не удалось обновить профиль",variant:"destructive"})}}),y=Oe({mutationFn:_=>Re(`/api/advertiser/postback/profiles/${_}`,"DELETE"),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/advertiser/postback/profiles"]}),e({title:"Успешно",description:"Профиль постбека удален"})},onError:_=>{e({title:"Ошибка",description:_.message||"Не удалось удалить профиль",variant:"destructive"})}}),b=_=>{const R={name:_.get("name"),tracker_type:_.get("tracker_type"),endpoint_url:_.get("endpoint_url"),method:_.get("method"),events:_.getAll("events"),offers:_.getAll("offers"),partners:_.getAll("partners"),enabled:_.get("enabled")==="on"};x.mutate(R)},p=_=>{w.mutate({tracker_url:_.endpoint_url,method:_.method,test_data:{clickid:"adv_test_"+Date.now(),status:"lead",revenue:"45.00",currency:"USD",partner_id:"test_partner",offer_id:"test_offer"}})},N=_=>{o(_),i(!0)},k=_=>{if(!l)return;const R={name:_.get("name"),tracker_type:_.get("tracker_type"),endpoint_url:_.get("endpoint_url"),method:_.get("method"),events:_.getAll("events"),offers:_.getAll("offers"),partners:_.getAll("partners"),enabled:_.get("enabled")==="on"};j.mutate({id:l.id,data:R})},S=_=>{confirm(`Удалить профиль "${_.name}"? Это действие нельзя отменить.`)&&y.mutate(_.id)},P={keitaro:{name:"Keitaro",url_template:"https://your-keitaro.com/api/v1/conversions?clickid={clickid}&status={status}&revenue={revenue}&offer_id={offer_id}&partner_id={partner_id}",method:"GET"},binom:{name:"Binom",url_template:"https://your-binom.com/click.php?cnv_id={clickid}&payout={revenue}&offer={offer_id}&affiliate={partner_id}",method:"GET"},redtrack:{name:"RedTrack",url_template:"https://your-redtrack.com/postback?clickid={clickid}&status={status}&sum={revenue}&offer={offer_id}",method:"GET"},voluum:{name:"Voluum",url_template:"https://your-voluum.com/postback?cid={clickid}&payout={revenue}&offer={offer_id}",method:"GET"},custom:{name:"Произвольный",url_template:"https://your-tracker.com/postback?clickid={clickid}&status={status}&revenue={revenue}",method:"GET"}};return r.jsxs("div",{className:"space-y-6","data-testid":"advertiser-postback-settings-page",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(wU,{className:"h-8 w-8 text-blue-600"}),"Настройки постбеков рекламодателя"]}),r.jsx("p",{className:"text-muted-foreground",children:"Настройте отправку данных о конверсиях в ваши трекеры и системы аналитики"})]}),r.jsxs(D,{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-create-advertiser-postback",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить постбек"]})]}),r.jsxs(rn,{value:c,onValueChange:d,className:"space-y-4",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-4",children:[r.jsx(We,{value:"profiles",children:"Профили постбеков"}),r.jsx(We,{value:"logs",children:"Логи отправки"}),r.jsx(We,{value:"analytics",children:"Аналитика"}),r.jsx(We,{value:"help",children:"Помощь"})]}),r.jsx(He,{value:"profiles",className:"space-y-4",children:h?r.jsx("div",{className:"text-center py-8",children:"Загрузка профилей..."}):u.length===0?r.jsx(q,{children:r.jsx(W,{className:"py-8",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(Gt,{className:"h-12 w-12 mx-auto text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Нет настроенных постбеков"}),r.jsx("p",{className:"text-muted-foreground",children:"Настройте постбеки для отправки данных о конверсиях в ваши системы аналитики"})]}),r.jsx(D,{onClick:()=>s(!0),"data-testid":"button-create-first-advertiser-postback",children:"Создать постбек"})]})})}):r.jsx("div",{className:"grid gap-4",children:u.map(_=>{var R,O,M,A,T,B;return r.jsxs(q,{className:"relative",children:[r.jsxs(re,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{className:"text-lg",children:_.name}),r.jsx(ie,{variant:_.enabled?"default":"secondary",children:_.enabled?"Активен":"Отключен"}),r.jsx(ie,{variant:_.status==="active"?"default":_.status==="error"?"destructive":"secondary",children:_.status==="active"?"Работает":_.status==="error"?"Ошибка":"Отключен"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:((R=P[_.tracker_type])==null?void 0:R.name)||_.tracker_type}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Отправлено: ",((O=_.delivery_stats)==null?void 0:O.total_sent)||0]}),r.jsxs("span",{children:["Успешность: ",((M=_.delivery_stats)==null?void 0:M.success_rate)||0,"%"]}),r.jsxs("span",{children:["Время ответа: ",((A=_.delivery_stats)==null?void 0:A.avg_response_time)||0,"ms"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(D,{variant:"outline",size:"sm",onClick:()=>p(_),disabled:w.isPending,"data-testid":`button-test-advertiser-postback-${_.id}`,title:"Протестировать постбек",children:r.jsx(Hw,{className:"h-4 w-4"})}),r.jsx(D,{variant:"outline",size:"sm",onClick:()=>N(_),"data-testid":`button-edit-advertiser-postback-${_.id}`,title:"Редактировать",children:r.jsx(fr,{className:"h-4 w-4"})}),r.jsx(D,{variant:"outline",size:"sm",onClick:()=>S(_),disabled:y.isPending,"data-testid":`button-delete-advertiser-postback-${_.id}`,title:"Удалить",className:"hover:bg-red-50 hover:text-red-600",children:r.jsx(wr,{className:"h-4 w-4"})})]})]}),r.jsx(W,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-xs text-muted-foreground",children:"URL постбека"}),r.jsx("div",{className:"font-mono text-sm bg-muted p-2 rounded",children:_.endpoint_url})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-xs text-muted-foreground",children:"События"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:((T=_.events)==null?void 0:T.map(z=>r.jsx(ie,{variant:"outline",className:"text-xs",children:z},z)))||r.jsx("span",{className:"text-muted-foreground",children:"Все"})})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-xs text-muted-foreground",children:"Офферы"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:(B=_.offers)!=null&&B.length?`${_.offers.length} выбрано`:"Все офферы"})]})]}),_.last_delivery&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Последняя отправка: ",new Date(_.last_delivery).toLocaleString("ru")]})]})})]},_.id)})})}),r.jsx(He,{value:"logs",className:"space-y-4",children:m?r.jsx("div",{className:"text-center py-8",children:"Загрузка логов..."}):r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Журнал отправки постбеков"})}),r.jsx(W,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-left p-2",children:"Время"}),r.jsx("th",{className:"text-left p-2",children:"ClickID"}),r.jsx("th",{className:"text-left p-2",children:"Событие"}),r.jsx("th",{className:"text-left p-2",children:"Партнер"}),r.jsx("th",{className:"text-left p-2",children:"Оффер"}),r.jsx("th",{className:"text-left p-2",children:"Статус"}),r.jsx("th",{className:"text-left p-2",children:"Ответ"})]})}),r.jsx("tbody",{children:f.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"Нет данных о постбеках"})}):f.map(_=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"p-2 text-sm",children:new Date(_.sent_at).toLocaleString("ru")}),r.jsx("td",{className:"p-2 font-mono text-sm",children:_.clickid}),r.jsx("td",{className:"p-2",children:r.jsx(ie,{variant:"outline",children:_.event_type})}),r.jsx("td",{className:"p-2 text-sm",children:_.partner_name||"-"}),r.jsx("td",{className:"p-2 text-sm",children:_.offer_name||"-"}),r.jsx("td",{className:"p-2",children:_.status==="sent"?r.jsxs(ie,{variant:"default",className:"bg-green-100 text-green-800",children:[r.jsx(on,{className:"h-3 w-3 mr-1"}),"Отправлен"]}):_.status==="failed"?r.jsxs(ie,{variant:"destructive",children:[r.jsx(Fn,{className:"h-3 w-3 mr-1"}),"Ошибка"]}):r.jsx(ie,{variant:"secondary",children:"Ожидание"})}),r.jsxs("td",{className:"p-2",children:[_.response_status&&r.jsx(ie,{variant:_.response_status<400?"default":"destructive",className:"font-mono",children:_.response_status}),_.response_time&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:[_.response_time,"ms"]}),_.error_message&&r.jsx("div",{className:"text-xs text-red-600 mt-1",children:_.error_message})]})]},_.id))})]})})})]})}),r.jsx(He,{value:"analytics",className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(q,{children:[r.jsx(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:"Всего отправлено"})}),r.jsxs(W,{children:[r.jsx("div",{className:"text-2xl font-bold",children:u.reduce((_,R)=>{var O;return _+(((O=R.delivery_stats)==null?void 0:O.total_sent)||0)},0)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"постбеков за все время"})]})]}),r.jsxs(q,{children:[r.jsx(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:"Успешность"})}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[u.length>0?Math.round(u.reduce((_,R)=>{var O;return _+(((O=R.delivery_stats)==null?void 0:O.success_rate)||0)},0)/u.length):0,"%"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"средняя по всем профилям"})]})]}),r.jsxs(q,{children:[r.jsx(re,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:r.jsx(se,{className:"text-sm font-medium",children:"Время ответа"})}),r.jsxs(W,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[u.length>0?Math.round(u.reduce((_,R)=>{var O;return _+(((O=R.delivery_stats)==null?void 0:O.avg_response_time)||0)},0)/u.length):0,"ms"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"среднее время"})]})]})]})}),r.jsx(He,{value:"help",className:"space-y-4",children:r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Настройка постбеков для рекламодателей"})}),r.jsxs(W,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Доступные макросы:"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{clickid}"})," - ID клика"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{status}"})," - Статус события"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{revenue}"})," - Доход"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{currency}"})," - Валюта"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{partner_id}"})," - ID партнера"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{offer_id}"})," - ID оффера"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{sub1}"})," - SubID 1"]}),r.jsxs("div",{children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"{sub2}"})," - SubID 2"]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Особенности для рекламодателей:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:[r.jsx("li",{children:"Настройка постбеков на уровне конкретных офферов"}),r.jsx("li",{children:"Фильтрация по партнерам для избирательной отправки"}),r.jsx("li",{children:"Расширенная аналитика доставки постбеков"}),r.jsx("li",{children:"Мониторинг конверсий от каждого партнера"}),r.jsx("li",{children:"Интеграция с CRM и системами аналитики"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Примеры использования:"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border rounded p-4",children:[r.jsx("h4",{className:"font-semibold",children:"Отправка в CRM"}),r.jsxs("div",{className:"font-mono text-sm bg-muted p-2 rounded mt-2",children:["https://your-crm.com/api/leads?clickid=","{clickid}","&partner=","{partner_id}","&revenue=","{revenue}"]})]}),r.jsxs("div",{className:"border rounded p-4",children:[r.jsx("h4",{className:"font-semibold",children:"Аналитика по офферам"}),r.jsxs("div",{className:"font-mono text-sm bg-muted p-2 rounded mt-2",children:["https://analytics.example.com/conversion?offer=","{offer_id}","&amount=","{revenue}","&source=","{sub1}"]})]})]})]})]})]})})]}),a&&l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Редактировать профиль постбека"}),r.jsx(D,{variant:"ghost",size:"sm",onClick:()=>{i(!1),o(null)},children:r.jsx(Fn,{className:"h-4 w-4"})})]}),r.jsxs("form",{onSubmit:_=>{_.preventDefault();const R=new FormData(_.currentTarget);k(R)},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"edit-name",children:"Название профиля"}),r.jsx(ne,{id:"edit-name",name:"name",defaultValue:l.name,required:!0})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"edit-tracker-type",children:"Тип трекера"}),r.jsxs(fe,{name:"tracker_type",defaultValue:l.tracker_type,children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите тип трекера"})}),r.jsxs(he,{children:[r.jsx(C,{value:"keitaro",children:"Keitaro"}),r.jsx(C,{value:"binom",children:"Binom"}),r.jsx(C,{value:"redtrack",children:"RedTrack"}),r.jsx(C,{value:"voluum",children:"Voluum"}),r.jsx(C,{value:"custom",children:"Произвольный"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"edit-endpoint-url",children:"URL постбека"}),r.jsx(gt,{id:"edit-endpoint-url",name:"endpoint_url",defaultValue:l.endpoint_url,placeholder:"https://your-tracker.com/postback?clickid={clickid}&status={status}&revenue={revenue}",rows:3,required:!0})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"edit-method",children:"HTTP метод"}),r.jsxs(fe,{name:"method",defaultValue:l.method,children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите метод"})}),r.jsxs(he,{children:[r.jsx(C,{value:"GET",children:"GET"}),r.jsx(C,{value:"POST",children:"POST"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"События"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:["lp_click","lead","deposit","conversion"].map(_=>{var R;return r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",name:"events",value:_,defaultChecked:(R=l.events)==null?void 0:R.includes(_)}),r.jsx("span",{className:"capitalize",children:_})]},_)})})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Офферы (оставьте пустым для всех)"}),r.jsx("div",{className:"max-h-32 overflow-y-auto border rounded p-2",children:g.map(_=>{var R;return r.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[r.jsx("input",{type:"checkbox",name:"offers",value:_.id,defaultChecked:(R=l.offers)==null?void 0:R.includes(_.id)}),r.jsx("span",{className:"text-sm",children:_.name})]},_.id)})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"edit-enabled",name:"enabled",defaultChecked:l.enabled}),r.jsx(F,{htmlFor:"edit-enabled",children:"Активен"})]}),r.jsxs("div",{className:"flex space-x-2 pt-4",children:[r.jsx(D,{type:"submit",disabled:j.isPending,className:"bg-blue-600 hover:bg-blue-700",children:j.isPending?"Сохранение...":"Сохранить"}),r.jsx(D,{type:"button",variant:"outline",onClick:()=>{i(!1),o(null)},children:"Отмена"})]})]})]})}),n&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs(q,{className:"w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsx(re,{children:r.jsx(se,{children:"Создать профиль постбека"})}),r.jsx(W,{children:r.jsxs("form",{onSubmit:_=>{_.preventDefault(),b(new FormData(_.currentTarget))},className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"name",children:"Название профиля"}),r.jsx(ne,{id:"name",name:"name",placeholder:"Например: Main Analytics Tracker",required:!0})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"tracker_type",children:"Тип трекера"}),r.jsxs(fe,{name:"tracker_type",required:!0,children:[r.jsx(ue,{children:r.jsx(me,{placeholder:"Выберите трекер"})}),r.jsx(he,{children:Object.entries(P).map(([_,R])=>r.jsx(C,{value:_,children:R.name},_))})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"endpoint_url",children:"URL постбека"}),r.jsx(gt,{id:"endpoint_url",name:"endpoint_url",placeholder:"https://your-tracker.com/postback?clickid={clickid}&status={status}&revenue={revenue}&offer_id={offer_id}&partner_id={partner_id}",rows:3,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"method",children:"HTTP метод"}),r.jsxs(fe,{name:"method",defaultValue:"GET",children:[r.jsx(ue,{children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"GET",children:"GET"}),r.jsx(C,{value:"POST",children:"POST"})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{id:"enabled",name:"enabled",defaultChecked:!0}),r.jsx(F,{htmlFor:"enabled",children:"Включить профиль"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(D,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Отмена"}),r.jsx(D,{type:"submit",disabled:x.isPending,"data-testid":"button-save-advertiser-postback",children:"Сохранить"})]})]})})]})})]})}function mqe({postback:e,onSubmit:t,onCancel:n}){const[s,a]=v.useState({name:(e==null?void 0:e.name)||"",endpointUrl:(e==null?void 0:e.endpointUrl)||"",method:(e==null?void 0:e.method)||"GET",scopeType:(e==null?void 0:e.scopeType)||"offer",scopeId:(e==null?void 0:e.scopeId)||"",idParam:(e==null?void 0:e.idParam)||"clickid",enabled:(e==null?void 0:e.enabled)??!0,priority:(e==null?void 0:e.priority)||100,statusMap:(e==null?void 0:e.statusMap)||{reg:"lead",deposit:"sale",open:"open",lp_click:"click"},paramsTemplate:(e==null?void 0:e.paramsTemplate)||{clickid:"{{clickid}}",status:"{{status}}",revenue:"{{revenue}}",currency:"{{currency}}",sub1:"{{sub1}}",sub2:"{{sub2}}"},urlEncode:(e==null?void 0:e.urlEncode)??!0,hmacEnabled:(e==null?void 0:e.hmacEnabled)||!1,hmacSecret:(e==null?void 0:e.hmacSecret)||"",hmacPayloadTpl:(e==null?void 0:e.hmacPayloadTpl)||"",hmacParamName:(e==null?void 0:e.hmacParamName)||"signature",retries:(e==null?void 0:e.retries)||5,timeoutMs:(e==null?void 0:e.timeoutMs)||4e3,backoffBaseSec:(e==null?void 0:e.backoffBaseSec)||2,filterRevenueGt0:(e==null?void 0:e.filterRevenueGt0)||!1,filterExcludeBots:(e==null?void 0:e.filterExcludeBots)??!0}),i=c=>{c.preventDefault(),t(s)},l=(c,d)=>{a(u=>({...u,paramsTemplate:{...u.paramsTemplate,[c]:d}}))},o=(c,d)=>{a(u=>({...u,statusMap:{...u.statusMap,[c]:d}}))};return r.jsxs("form",{onSubmit:i,className:"space-y-6",children:[r.jsxs(rn,{defaultValue:"basic",className:"w-full",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-4",children:[r.jsx(We,{value:"basic",children:"Основные"}),r.jsx(We,{value:"params",children:"Параметры"}),r.jsx(We,{value:"security",children:"Безопасность"}),r.jsx(We,{value:"filters",children:"Фильтры"})]}),r.jsxs(He,{value:"basic",className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"name",children:"Название"}),r.jsx(ne,{id:"name",value:s.name,onChange:c=>a(d=>({...d,name:c.target.value})),placeholder:"Keitaro Tracker",required:!0,"data-testid":"input-name"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"priority",children:"Приоритет"}),r.jsx(ne,{id:"priority",type:"number",min:"1",max:"999",value:s.priority,onChange:c=>a(d=>({...d,priority:parseInt(c.target.value)})),"data-testid":"input-priority"})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"endpointUrl",children:"URL эндпоинта"}),r.jsx(ne,{id:"endpointUrl",type:"url",value:s.endpointUrl,onChange:c=>a(d=>({...d,endpointUrl:c.target.value})),placeholder:"https://your-tracker.com/postback",required:!0,"data-testid":"input-endpoint-url"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"method",children:"HTTP метод"}),r.jsxs(fe,{value:s.method,onValueChange:c=>a(d=>({...d,method:c})),children:[r.jsx(ue,{"data-testid":"select-method",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"GET",children:"GET"}),r.jsx(C,{value:"POST",children:"POST"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"scopeType",children:"Область применения"}),r.jsxs(fe,{value:s.scopeType,onValueChange:c=>a(d=>({...d,scopeType:c})),children:[r.jsx(ue,{"data-testid":"select-scope-type",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"global",children:"Глобальный"}),r.jsx(C,{value:"offer",children:"Оффер"}),r.jsx(C,{value:"campaign",children:"Кампания"}),r.jsx(C,{value:"flow",children:"Поток"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"idParam",children:"ID параметр"}),r.jsxs(fe,{value:s.idParam,onValueChange:c=>a(d=>({...d,idParam:c})),children:[r.jsx(ue,{"data-testid":"select-id-param",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"clickid",children:"clickid"}),r.jsx(C,{value:"subid",children:"subid"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"retries",children:"Повторы"}),r.jsx(ne,{id:"retries",type:"number",min:"1",max:"10",value:s.retries,onChange:c=>a(d=>({...d,retries:parseInt(c.target.value)})),"data-testid":"input-retries"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"timeoutMs",children:"Таймаут (мс)"}),r.jsx(ne,{id:"timeoutMs",type:"number",min:"1000",max:"30000",value:s.timeoutMs,onChange:c=>a(d=>({...d,timeoutMs:parseInt(c.target.value)})),"data-testid":"input-timeout"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"backoffBaseSec",children:"База для backoff (сек)"}),r.jsx(ne,{id:"backoffBaseSec",type:"number",min:"1",max:"60",value:s.backoffBaseSec,onChange:c=>a(d=>({...d,backoffBaseSec:parseInt(c.target.value)})),"data-testid":"input-backoff"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{id:"enabled",checked:s.enabled,onCheckedChange:c=>a(d=>({...d,enabled:c})),"data-testid":"switch-enabled"}),r.jsx(F,{htmlFor:"enabled",children:"Включен"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{id:"urlEncode",checked:s.urlEncode,onCheckedChange:c=>a(d=>({...d,urlEncode:c})),"data-testid":"switch-url-encode"}),r.jsx(F,{htmlFor:"urlEncode",children:"URL кодирование"})]})]})]}),r.jsxs(He,{value:"params",className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Маппинг статусов событий"}),r.jsx("div",{className:"space-y-2 mt-2",children:Object.entries(s.statusMap).map(([c,d])=>r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(ne,{value:c,placeholder:"Тип события",readOnly:!0,"data-testid":`input-status-event-${c}`}),r.jsx(ne,{value:d,onChange:u=>o(c,u.target.value),placeholder:"Статус для трекера","data-testid":`input-status-mapped-${c}`})]},c))})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Шаблон параметров (Mustache)"}),r.jsx("div",{className:"space-y-2 mt-2",children:Object.entries(s.paramsTemplate).map(([c,d])=>r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(ne,{value:c,placeholder:"Имя параметра",readOnly:!0,"data-testid":`input-param-name-${c}`}),r.jsx(ne,{value:d,onChange:u=>l(c,u.target.value),placeholder:"Значение (например: {{clickid}})","data-testid":`input-param-value-${c}`})]},c))}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Доступные переменные: clickid, status, revenue, currency, sub1-sub10, country_iso, device_type"})]})]}),r.jsxs(He,{value:"security",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{id:"hmacEnabled",checked:s.hmacEnabled,onCheckedChange:c=>a(d=>({...d,hmacEnabled:c})),"data-testid":"switch-hmac-enabled"}),r.jsx(F,{htmlFor:"hmacEnabled",children:"Включить HMAC подпись"})]}),s.hmacEnabled&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"hmacSecret",children:"HMAC секретный ключ"}),r.jsx(ne,{id:"hmacSecret",type:"password",value:s.hmacSecret,onChange:c=>a(d=>({...d,hmacSecret:c.target.value})),placeholder:"Секретный ключ для подписи","data-testid":"input-hmac-secret"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"hmacPayloadTpl",children:"Шаблон payload для HMAC"}),r.jsx(gt,{id:"hmacPayloadTpl",value:s.hmacPayloadTpl,onChange:c=>a(d=>({...d,hmacPayloadTpl:c.target.value})),placeholder:"{{clickid}}{{status}}{{revenue}}",rows:3,"data-testid":"input-hmac-payload"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"hmacParamName",children:"Имя параметра подписи"}),r.jsx(ne,{id:"hmacParamName",value:s.hmacParamName,onChange:c=>a(d=>({...d,hmacParamName:c.target.value})),placeholder:"signature","data-testid":"input-hmac-param-name"})]})]})]}),r.jsxs(He,{value:"filters",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{id:"filterRevenueGt0",checked:s.filterRevenueGt0,onCheckedChange:c=>a(d=>({...d,filterRevenueGt0:c})),"data-testid":"switch-filter-revenue"}),r.jsx(F,{htmlFor:"filterRevenueGt0",children:"Только события с revenue > 0"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{id:"filterExcludeBots",checked:s.filterExcludeBots,onCheckedChange:c=>a(d=>({...d,filterExcludeBots:c})),"data-testid":"switch-filter-bots"}),r.jsx(F,{htmlFor:"filterExcludeBots",children:"Исключить ботов"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[r.jsx(D,{type:"button",variant:"outline",onClick:n,"data-testid":"button-cancel",children:"Отмена"}),r.jsx(D,{type:"submit","data-testid":"button-submit",children:e?"Обновить":"Создать"})]})]})}function pqe(){const[e,t]=v.useState(null),[n,s]=v.useState(!1),[a,i]=v.useState(!1),[l,o]=v.useState(null),{toast:c}=at(),d=Et(),{data:u,isLoading:h}=Fe({queryKey:["/api/postback-profiles"],queryFn:()=>Re("/api/postback-profiles")}),{data:f}=Fe({queryKey:["/api/postback/deliveries",l],queryFn:()=>Re(`/api/postback/deliveries${l?`?profileId=${l}`:""}`),enabled:a}),m=Oe({mutationFn:p=>Re("/api/postback-profiles",{method:"POST",body:JSON.stringify(p)}),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/postback-profiles"]}),s(!1),c({title:"Профиль постбека создан",description:"Новый профиль постбека успешно создан"})},onError:()=>{c({title:"Ошибка",description:"Не удалось создать профиль постбека",variant:"destructive"})}}),g=Oe({mutationFn:({id:p,...N})=>Re(`/api/postback-profiles/${p}`,{method:"PATCH",body:JSON.stringify(N)}),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/postback-profiles"]}),s(!1),t(null),c({title:"Профиль обновлен",description:"Изменения сохранены"})}}),x=Oe({mutationFn:p=>Re(`/api/postback-profiles/${p}`,{method:"DELETE"}),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/postback-profiles"]}),c({title:"Профиль удален",description:"Профиль постбека успешно удален"})}}),w=p=>{e?g.mutate({id:e.id,...p}):m.mutate(p)},j=p=>{t(p),s(!0)},y=p=>{confirm("Вы уверены, что хотите удалить этот профиль постбека?")&&x.mutate(p)},b=p=>p?p>=200&&p<300?r.jsx(ie,{variant:"default",className:"bg-green-500",children:"Успех"}):p>=400?r.jsx(ie,{variant:"destructive",children:"Ошибка"}):r.jsx(ie,{variant:"secondary",children:p}):r.jsx(ie,{variant:"secondary",children:"Нет ответа"});return h?r.jsx("div",{className:"flex justify-center p-8","data-testid":"loading-indicator",children:"Загрузка..."}):r.jsxs("div",{className:"space-y-6","data-testid":"postback-profiles-page",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold","data-testid":"page-title",children:"Профили постбеков"}),r.jsx("p",{className:"text-muted-foreground","data-testid":"page-description",children:"Настройка и управление профилями постбеков для передачи данных о конверсиях"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(D,{variant:"outline",onClick:()=>i(!0),"data-testid":"button-view-deliveries",children:[r.jsx(ir,{className:"h-4 w-4 mr-2"}),"Логи доставки"]}),r.jsxs(D,{onClick:()=>{t(null),s(!0)},"data-testid":"button-create-postback",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Добавить профиль"]})]})]}),r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsx(se,{children:"Список профилей постбеков"}),r.jsx(Ze,{children:"Управление профилями постбеков для отправки уведомлений о конверсиях"})]}),r.jsxs(W,{children:[r.jsxs(Mt,{"data-testid":"postback-profiles-table",children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Название"}),r.jsx(Z,{children:"URL"}),r.jsx(Z,{children:"Метод"}),r.jsx(Z,{children:"Область"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Приоритет"}),r.jsx(Z,{children:"Обновлен"}),r.jsx(Z,{children:"Действия"})]})}),r.jsx(It,{children:u==null?void 0:u.map(p=>r.jsxs(De,{"data-testid":`row-postback-${p.id}`,children:[r.jsx(H,{className:"font-medium","data-testid":`text-name-${p.id}`,children:p.name}),r.jsx(H,{className:"max-w-xs truncate","data-testid":`text-url-${p.id}`,children:p.endpointUrl}),r.jsx(H,{children:r.jsx(ie,{variant:"outline","data-testid":`badge-method-${p.id}`,children:p.method})}),r.jsx(H,{children:r.jsx(ie,{variant:"secondary","data-testid":`badge-scope-${p.id}`,children:p.scopeType})}),r.jsx(H,{children:r.jsx(ie,{variant:p.enabled?"default":"secondary","data-testid":`badge-status-${p.id}`,children:p.enabled?"Активен":"Отключен"})}),r.jsx(H,{"data-testid":`text-priority-${p.id}`,children:p.priority}),r.jsx(H,{children:r.jsx("span",{className:"text-sm text-muted-foreground","data-testid":`text-updated-${p.id}`,children:new Date(p.updatedAt).toLocaleString()})}),r.jsx(H,{children:r.jsxs(Xs,{children:[r.jsx(Zs,{asChild:!0,children:r.jsx(D,{variant:"ghost",size:"sm","data-testid":`button-actions-${p.id}`,children:r.jsx(fr,{className:"h-4 w-4"})})}),r.jsxs(Es,{children:[r.jsxs(Lt,{onClick:()=>j(p),children:[r.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Редактировать"]}),r.jsxs(Lt,{onClick:()=>{o(p.id),i(!0)},children:[r.jsx(ir,{className:"h-4 w-4 mr-2"}),"Логи доставки"]}),r.jsxs(Lt,{children:[r.jsx(Hw,{className:"h-4 w-4 mr-2"}),"Тестировать"]}),r.jsxs(Lt,{onClick:()=>navigator.clipboard.writeText(p.endpointUrl),children:[r.jsx(Yr,{className:"h-4 w-4 mr-2"}),"Копировать URL"]}),r.jsxs(Lt,{className:"text-red-600",onClick:()=>y(p.id),children:[r.jsx(wr,{className:"h-4 w-4 mr-2"}),"Удалить"]})]})]})})]},p.id))})]}),!(u!=null&&u.length)&&r.jsxs("div",{className:"text-center py-8","data-testid":"empty-state",children:[r.jsx("p",{className:"text-muted-foreground mb-4","data-testid":"text-empty-message",children:"Профили постбеков не настроены"}),r.jsxs(D,{onClick:()=>s(!0),"data-testid":"button-create-first-postback",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Создать первый профиль"]})]})]})]}),r.jsx(_t,{open:n,onOpenChange:s,children:r.jsxs(kt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto","data-testid":"dialog-form",children:[r.jsxs(St,{children:[r.jsx(Ct,{"data-testid":"dialog-title",children:e?"Редактировать профиль постбека":"Создать профиль постбека"}),r.jsx(Br,{"data-testid":"dialog-description",children:"Настройте параметры профиля постбека для отправки уведомлений о конверсиях"})]}),r.jsx(mqe,{postback:e||void 0,onSubmit:w,onCancel:()=>{s(!1),t(null)}})]})}),r.jsx(_t,{open:a,onOpenChange:i,children:r.jsxs(kt,{className:"max-w-6xl max-h-[80vh] overflow-y-auto","data-testid":"dialog-deliveries",children:[r.jsxs(St,{children:[r.jsx(Ct,{children:"Логи доставки постбеков"}),r.jsx(Br,{children:"История отправки постбеков и их результаты"})]}),r.jsxs(Mt,{"data-testid":"deliveries-table",children:[r.jsx($t,{children:r.jsxs(De,{children:[r.jsx(Z,{children:"Время"}),r.jsx(Z,{children:"Click ID"}),r.jsx(Z,{children:"URL"}),r.jsx(Z,{children:"Метод"}),r.jsx(Z,{children:"Статус"}),r.jsx(Z,{children:"Время ответа"}),r.jsx(Z,{children:"Попытка"}),r.jsx(Z,{children:"Ошибка"})]})}),r.jsx(It,{children:f==null?void 0:f.map(p=>r.jsxs(De,{"data-testid":`row-delivery-${p.id}`,children:[r.jsx(H,{"data-testid":`text-delivery-time-${p.id}`,children:new Date(p.createdAt).toLocaleString()}),r.jsx(H,{className:"font-mono text-sm","data-testid":`text-delivery-clickid-${p.id}`,children:p.clickid}),r.jsx(H,{className:"max-w-xs truncate","data-testid":`text-delivery-url-${p.id}`,children:p.requestUrl}),r.jsx(H,{children:r.jsx(ie,{variant:"outline","data-testid":`badge-delivery-method-${p.id}`,children:p.requestMethod})}),r.jsx(H,{"data-testid":`badge-delivery-status-${p.id}`,children:b(p.responseCode)}),r.jsx(H,{"data-testid":`text-delivery-duration-${p.id}`,children:p.durationMs&&`${p.durationMs}ms`}),r.jsxs(H,{"data-testid":`text-delivery-attempt-${p.id}`,children:[p.attempt," / ",p.maxAttempts]}),r.jsx(H,{className:"max-w-xs truncate text-red-600","data-testid":`text-delivery-error-${p.id}`,children:p.error})]},p.id))})]}),!(f!=null&&f.length)&&r.jsx("div",{className:"text-center py-8","data-testid":"empty-deliveries",children:r.jsx("p",{className:"text-muted-foreground",children:"Логи доставки не найдены"})})]})})]})}function xqe({postback:e,onSubmit:t,onCancel:n}){const{t:s}=Wt(),[a,i]=v.useState({name:(e==null?void 0:e.name)||"",endpoint_url:(e==null?void 0:e.endpoint_url)||"",method:(e==null?void 0:e.method)||"GET",tracker_type:(e==null?void 0:e.tracker_type)||"custom",enabled:(e==null?void 0:e.enabled)??!0,priority:(e==null?void 0:e.priority)||100}),l=o=>{o.preventDefault(),t(a)};return r.jsxs("form",{onSubmit:l,className:"space-y-6",children:[r.jsxs(rn,{defaultValue:"basic",className:"w-full",children:[r.jsxs(Zr,{className:"grid w-full grid-cols-2",children:[r.jsx(We,{value:"basic",children:s("postbacks.basicTab","Основные")}),r.jsx(We,{value:"settings",children:s("postbacks.settingsTab","Настройки")})]}),r.jsxs(He,{value:"basic",className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"name",children:s("postbacks.name","Название")}),r.jsx(ne,{id:"name",value:a.name,onChange:o=>i(c=>({...c,name:o.target.value})),placeholder:s("postbacks.placeholderName","Keitaro Tracker"),required:!0,"data-testid":"input-name"})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"priority",children:s("postbacks.priority","Приоритет")}),r.jsx(ne,{id:"priority",type:"number",min:"1",max:"999",value:a.priority,onChange:o=>i(c=>({...c,priority:parseInt(o.target.value)})),"data-testid":"input-priority"})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"endpoint_url",children:s("postbacks.endpointUrl","URL эндпоинта")}),r.jsx(ne,{id:"endpoint_url",type:"url",value:a.endpoint_url,onChange:o=>i(c=>({...c,endpoint_url:o.target.value})),placeholder:s("postbacks.placeholderEndpoint","https://your-tracker.com/postback"),required:!0,"data-testid":"input-endpoint-url"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{htmlFor:"method",children:s("postbacks.method","HTTP метод")}),r.jsxs(fe,{value:a.method,onValueChange:o=>i(c=>({...c,method:o})),children:[r.jsx(ue,{"data-testid":"select-method",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"GET",children:"GET"}),r.jsx(C,{value:"POST",children:"POST"})]})]})]}),r.jsxs("div",{children:[r.jsx(F,{htmlFor:"tracker_type",children:s("postbacks.trackerType","Тип трекера")}),r.jsxs(fe,{value:a.tracker_type,onValueChange:o=>i(c=>({...c,tracker_type:o})),children:[r.jsx(ue,{"data-testid":"select-tracker-type",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"custom",children:s("postbacks.custom","Пользовательский")}),r.jsx(C,{value:"keitaro",children:"Keitaro"}),r.jsx(C,{value:"binom",children:"Binom"}),r.jsx(C,{value:"voluum",children:"Voluum"})]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Je,{id:"enabled",checked:a.enabled,onCheckedChange:o=>i(c=>({...c,enabled:o})),"data-testid":"switch-enabled"}),r.jsx(F,{htmlFor:"enabled",children:s("common.active","Включен")})]})]}),r.jsx(He,{value:"settings",className:"space-y-4",children:r.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium mb-2",children:s("postbacks.advancedSettings","Дополнительные настройки")}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s("postbacks.comingSoon","Расширенные параметры конфигурации будут добавлены в следующих версиях.")})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[r.jsx(D,{type:"button",variant:"outline",onClick:n,"data-testid":"button-cancel",children:s("common.cancel","Отмена")}),r.jsx(D,{type:"submit","data-testid":"button-submit",children:e?s("common.update","Обновить"):s("common.create","Создать")})]})]})}function gqe(){const[e,t]=v.useState(null),[n,s]=v.useState(!1),{toast:a}=at(),{t:i}=Wt(),l=Et(),{data:o=[],isLoading:c}=Fe({queryKey:["/api/postback/profiles"],queryFn:()=>Re("/api/postback/profiles")}),d=Oe({mutationFn:x=>Re("/api/postback/profiles","POST",x),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/postback/profiles"]}),s(!1),a({title:i("postbacks.postbackSaved","Профиль постбека создан"),description:i("postbacks.createSuccessDesc","Новый профиль постбека успешно создан")})},onError:()=>{a({title:i("postbacks.error","Ошибка"),description:i("postbacks.createErrorDesc","Не удалось создать профиль постбека"),variant:"destructive"})}}),u=Oe({mutationFn:({id:x,...w})=>Re(`/api/postback/profiles/${x}`,"PUT",w),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/postback/profiles"]}),s(!1),t(null),a({title:i("postbacks.postbackSaved","Профиль обновлен"),description:i("postbacks.updateSuccessDesc","Изменения сохранены")})}}),h=Oe({mutationFn:x=>Re(`/api/postback/profiles/${x}`,"DELETE"),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/postback/profiles"]}),a({title:i("postbacks.postbackDeleted","Профиль удален"),description:i("postbacks.deleteSuccessDesc","Профиль постбека успешно удален")})},onError:x=>{a({title:"Ошибка удаления",description:`Не удалось удалить профиль: ${x.message}`,variant:"destructive"})}}),f=x=>{e?u.mutate({id:e.id,...x}):d.mutate(x)},m=x=>{t(x),s(!0)},g=x=>{confirm(i("common.confirmDelete","Вы уверены, что хотите удалить этот профиль постбека?"))&&h.mutate(x)};return c?r.jsx("div",{className:"flex justify-center p-8","data-testid":"loading-indicator",children:i("common.loading","Загрузка...")}):r.jsxs("div",{className:"space-y-6","data-testid":"postback-profiles-page",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:i("postbacks.configuredPostbacks")}),r.jsx("p",{className:"text-muted-foreground",children:i("postbacks.subtitle")})]}),r.jsxs(D,{onClick:()=>s(!0),"data-testid":"button-create-postback",children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),i("postbacks.createPostbackProfile")]})]}),r.jsxs("div",{className:"grid gap-4",children:[o.map(x=>r.jsxs(q,{"data-testid":`card-postback-${x.id}`,children:[r.jsx(re,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(se,{className:"text-lg",children:x.name}),r.jsx(ie,{variant:"outline","data-testid":`badge-tracker-type-${x.id}`,children:x.tracker_type}),r.jsx(ie,{variant:x.enabled?"default":"secondary","data-testid":`badge-status-${x.id}`,children:x.enabled?i("common.active","Включен"):i("common.disabled","Отключен")})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(D,{variant:"outline",size:"sm",onClick:()=>m(x),"data-testid":`button-edit-${x.id}`,title:i("common.edit","Редактировать"),children:r.jsx(Ts,{className:"h-4 w-4"})}),r.jsx(D,{variant:"outline",size:"sm",onClick:()=>g(x.id),disabled:h.isPending,"data-testid":`button-delete-${x.id}`,title:i("common.delete","Удалить"),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(wr,{className:"h-4 w-4"})})]})]})}),r.jsx(W,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Эндпоинт"}),r.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[x.method," ",x.endpoint_url]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Последняя доставка"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:x.last_delivery&&x.last_delivery!=="null"?new Date(x.last_delivery).toLocaleString("ru-RU"):"Не было"})]}),x.delivery_stats&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Отправлено"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:x.delivery_stats.total_sent.toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Успешность"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.delivery_stats.success_rate,"%"]})]})]})]})})]},x.id)),o.length===0&&r.jsx(q,{"data-testid":"empty-state",children:r.jsxs(W,{className:"text-center py-8",children:[r.jsx(Ka,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Нет профилей постбеков"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Создайте первый профиль для начала работы с постбеками"}),r.jsxs(D,{onClick:()=>s(!0),children:[r.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Создать профиль"]})]})})]}),r.jsx(_t,{open:n,onOpenChange:s,children:r.jsxs(kt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(St,{children:[r.jsx(Ct,{children:e?"Редактировать профиль":"Создать новый профиль"}),r.jsx(Br,{children:"Настройте параметры отправки постбеков во внешние системы"})]}),r.jsx(xqe,{postback:e||void 0,onSubmit:f,onCancel:()=>{s(!1),t(null)}})]})})]})}async function vqe(e,t={}){const n=t.method??"GET";if(typeof n!="string")throw new Error("Invalid method type");const s=await fetch(e,{...t,method:n});if(!s.ok){const a=await s.text().catch(()=>"");throw new Error(`HTTP ${s.status} ${a}`)}return s.json().catch(()=>({}))}async function yqe(e){return vqe("/api/v3/event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function XY(){const{toast:e}=at();return{sendEvent:async n=>{try{const s=await yqe(n);return e({title:"Событие отправлено",description:`Conversion ID: ${s.id} (${s.status})`,variant:"default"}),s}catch(s){const a=s instanceof Error?s.message:"Неизвестная ошибка";throw e({title:"Ошибка отправки события",description:a,variant:"destructive"}),s}}}}function bqe({defaultClickId:e="",defaultTxId:t=""}){const{sendEvent:n}=XY(),[s,a]=v.useState(!1),[i,l]=v.useState({type:"reg",clickid:e,txid:t,value:"",currency:"USD",antifraudLevel:"ok"}),o=async c=>{if(c.preventDefault(),!(!i.clickid||!i.txid)){a(!0);try{const d={type:i.type,clickid:i.clickid,txid:i.txid,...i.value&&{value:Number(i.value)},currency:i.currency,meta:{antifraudLevel:i.antifraudLevel,source:"frontend_form"}};await n(d),l(u=>({...u,txid:"",value:""}))}catch{}finally{a(!1)}}};return r.jsxs(q,{className:"w-full max-w-lg",children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(cs,{className:"h-5 w-5"}),"Отправка события"]}),r.jsx(Ze,{children:"Создание conversion события для тестирования системы"})]}),r.jsx(W,{children:r.jsxs("form",{onSubmit:o,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"type",children:"Тип события"}),r.jsxs(fe,{value:i.type,onValueChange:c=>l(d=>({...d,type:c})),children:[r.jsx(ue,{"data-testid":"select-event-type",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"reg",children:"Регистрация"}),r.jsx(C,{value:"purchase",children:"Покупка"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"antifraud",children:"Антифрод"}),r.jsxs(fe,{value:i.antifraudLevel,onValueChange:c=>l(d=>({...d,antifraudLevel:c})),children:[r.jsx(ue,{"data-testid":"select-antifraud-level",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"ok",children:"Чистый"}),r.jsx(C,{value:"soft",children:"Soft"}),r.jsx(C,{value:"hard",children:"Hard"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"clickid",children:"Click ID"}),r.jsx(ne,{id:"clickid",value:i.clickid,onChange:c=>l(d=>({...d,clickid:c.target.value})),placeholder:"click_123_test",required:!0,"data-testid":"input-clickid"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"txid",children:"Transaction ID"}),r.jsx(ne,{id:"txid",value:i.txid,onChange:c=>l(d=>({...d,txid:c.target.value})),placeholder:"tx_456_test",required:!0,"data-testid":"input-txid"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"value",children:"Сумма"}),r.jsx(ne,{id:"value",type:"number",step:"0.01",value:i.value,onChange:c=>l(d=>({...d,value:c.target.value})),placeholder:"100.00","data-testid":"input-value"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"currency",children:"Валюта"}),r.jsxs(fe,{value:i.currency,onValueChange:c=>l(d=>({...d,currency:c})),children:[r.jsx(ue,{"data-testid":"select-currency",children:r.jsx(me,{})}),r.jsxs(he,{children:[r.jsx(C,{value:"USD",children:"USD"}),r.jsx(C,{value:"EUR",children:"EUR"}),r.jsx(C,{value:"RUB",children:"RUB"}),r.jsx(C,{value:"GBP",children:"GBP"})]})]})]})]}),r.jsx(D,{type:"submit",className:"w-full",disabled:s||!i.clickid||!i.txid,"data-testid":"button-send-event",children:s?r.jsxs(r.Fragment,{children:[r.jsx(yc,{className:"mr-2 h-4 w-4 animate-spin"}),"Отправка..."]}):r.jsxs(r.Fragment,{children:[r.jsx(cs,{className:"mr-2 h-4 w-4"}),"Отправить событие"]})})]})})]})}function jqe({clickid:e,baseLabel:t="test"}){const{sendEvent:n}=XY(),[s,a]=v.useState({}),i=(d,u)=>{a(h=>({...h,[d]:u}))},l=async()=>{const d="reg";i(d,!0);try{await n({type:"reg",clickid:e,txid:`tx_reg_${Date.now()}`,meta:{source:"quick_button",antifraudLevel:"ok"}})}catch{}finally{i(d,!1)}},o=async()=>{const d="purchase";i(d,!0);try{await n({type:"purchase",clickid:e,txid:`tx_purchase_${Date.now()}`,value:Math.floor(Math.random()*200)+50,currency:"USD",meta:{source:"quick_button",antifraudLevel:"ok"}})}catch{}finally{i(d,!1)}},c=async d=>{const u=`af_${d}`;i(u,!0);try{await n({type:"purchase",clickid:e,txid:`tx_af_${d}_${Date.now()}`,value:150,currency:"USD",meta:{source:"antifraud_test",antifraudLevel:d}})}catch{}finally{i(u,!1)}};return e?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-sm font-medium",children:["Быстрые события для: ",r.jsx("code",{className:"bg-muted px-1 rounded",children:e})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(D,{variant:"outline",size:"sm",onClick:l,disabled:s.reg,"data-testid":"button-quick-reg",title:"Отправить событие регистрации",children:[s.reg?r.jsx(yc,{className:"h-4 w-4 animate-spin"}):r.jsx(mo,{className:"h-4 w-4"}),r.jsx("span",{className:"ml-1",children:"Регистрация"})]}),r.jsxs(D,{variant:"outline",size:"sm",onClick:o,disabled:s.purchase,"data-testid":"button-quick-purchase",title:"Отправить событие покупки",children:[s.purchase?r.jsx(yc,{className:"h-4 w-4 animate-spin"}):r.jsx(V2,{className:"h-4 w-4"}),r.jsx("span",{className:"ml-1",children:"Покупка"})]}),r.jsxs(D,{variant:"destructive",size:"sm",onClick:()=>c("soft"),disabled:s.af_soft,"data-testid":"button-quick-soft-af",title:"Тест soft антифрода",children:[s.af_soft?r.jsx(yc,{className:"h-4 w-4 animate-spin"}):"⚠️",r.jsx("span",{className:"ml-1",children:"Soft AF"})]}),r.jsxs(D,{variant:"destructive",size:"sm",onClick:()=>c("hard"),disabled:s.af_hard,"data-testid":"button-quick-hard-af",title:"Тест hard антифрода",children:[s.af_hard?r.jsx(yc,{className:"h-4 w-4 animate-spin"}):"🚫",r.jsx("span",{className:"ml-1",children:"Hard AF"})]})]})]}):r.jsx("div",{className:"text-sm text-muted-foreground p-4 border rounded-lg",children:"Укажите Click ID для быстрых действий"})}function wqe(e,t){return v.useReducer((n,s)=>t[n][s]??n,e)}var RE="ScrollArea",[ZY,lWe]=zn(RE),[Nqe,ei]=ZY(RE),QY=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:a,scrollHideDelay:i=600,...l}=e,[o,c]=v.useState(null),[d,u]=v.useState(null),[h,f]=v.useState(null),[m,g]=v.useState(null),[x,w]=v.useState(null),[j,y]=v.useState(0),[b,p]=v.useState(0),[N,k]=v.useState(!1),[S,P]=v.useState(!1),_=jt(t,O=>c(O)),R=Im(a);return r.jsx(Nqe,{scope:n,type:s,dir:R,scrollHideDelay:i,scrollArea:o,viewport:d,onViewportChange:u,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:N,onScrollbarXEnabledChange:k,scrollbarY:x,onScrollbarYChange:w,scrollbarYEnabled:S,onScrollbarYEnabledChange:P,onCornerWidthChange:y,onCornerHeightChange:p,children:r.jsx(Xe.div,{dir:R,...l,ref:_,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});QY.displayName=RE;var JY="ScrollAreaViewport",eX=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:a,...i}=e,l=ei(JY,n),o=v.useRef(null),c=jt(t,o,l.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),r.jsx(Xe.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});eX.displayName=JY;var Il="ScrollAreaScrollbar",DE=v.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=ei(Il,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=a,o=e.orientation==="horizontal";return v.useEffect(()=>(o?i(!0):l(!0),()=>{o?i(!1):l(!1)}),[o,i,l]),a.type==="hover"?r.jsx(kqe,{...s,ref:t,forceMount:n}):a.type==="scroll"?r.jsx(Sqe,{...s,ref:t,forceMount:n}):a.type==="auto"?r.jsx(tX,{...s,ref:t,forceMount:n}):a.type==="always"?r.jsx(ME,{...s,ref:t}):null});DE.displayName=Il;var kqe=v.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=ei(Il,e.__scopeScrollArea),[i,l]=v.useState(!1);return v.useEffect(()=>{const o=a.scrollArea;let c=0;if(o){const d=()=>{window.clearTimeout(c),l(!0)},u=()=>{c=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",d),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",d),o.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),r.jsx(Vn,{present:n||i,children:r.jsx(tX,{"data-state":i?"visible":"hidden",...s,ref:t})})}),Sqe=v.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=ei(Il,e.__scopeScrollArea),i=e.orientation==="horizontal",l=wN(()=>c("SCROLL_END"),100),[o,c]=wqe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return v.useEffect(()=>{if(o==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[o,a.scrollHideDelay,c]),v.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let h=d[u];const f=()=>{const m=d[u];h!==m&&(c("SCROLL"),l()),h=m};return d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[a.viewport,i,c,l]),r.jsx(Vn,{present:n||o!=="hidden",children:r.jsx(ME,{"data-state":o==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:Le(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Le(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),tX=v.forwardRef((e,t)=>{const n=ei(Il,e.__scopeScrollArea),{forceMount:s,...a}=e,[i,l]=v.useState(!1),o=e.orientation==="horizontal",c=wN(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;l(o?d:u)}},10);return Cm(n.viewport,c),Cm(n.content,c),r.jsx(Vn,{present:s||i,children:r.jsx(ME,{"data-state":i?"visible":"hidden",...a,ref:t})})}),ME=v.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,a=ei(Il,e.__scopeScrollArea),i=v.useRef(null),l=v.useRef(0),[o,c]=v.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=iX(o.viewport,o.content),u={...s,sizes:o,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:f=>l.current=f};function h(f,m){return Eqe(f,l.current,o,m)}return n==="horizontal"?r.jsx(Cqe,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const f=a.viewport.scrollLeft,m=zF(f,o,a.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollLeft=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollLeft=h(f,a.dir))}}):n==="vertical"?r.jsx(Pqe,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const f=a.viewport.scrollTop,m=zF(f,o);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollTop=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollTop=h(f))}}):null}),Cqe=v.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...a}=e,i=ei(Il,e.__scopeScrollArea),[l,o]=v.useState(),c=v.useRef(null),d=jt(t,c,i.onScrollbarXChange);return v.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),r.jsx(nX,{"data-orientation":"horizontal",...a,ref:d,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":jN(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(f),oX(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:cw(l.paddingLeft),paddingEnd:cw(l.paddingRight)}})}})}),Pqe=v.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...a}=e,i=ei(Il,e.__scopeScrollArea),[l,o]=v.useState(),c=v.useRef(null),d=jt(t,c,i.onScrollbarYChange);return v.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),r.jsx(nX,{"data-orientation":"vertical",...a,ref:d,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":jN(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(i.viewport){const f=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(f),oX(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:cw(l.paddingTop),paddingEnd:cw(l.paddingBottom)}})}})}),[_qe,rX]=ZY(Il),nX=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:a,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...f}=e,m=ei(Il,n),[g,x]=v.useState(null),w=jt(t,_=>x(_)),j=v.useRef(null),y=v.useRef(""),b=m.viewport,p=s.content-s.viewport,N=zr(u),k=zr(c),S=wN(h,10);function P(_){if(j.current){const R=_.clientX-j.current.left,O=_.clientY-j.current.top;d({x:R,y:O})}}return v.useEffect(()=>{const _=R=>{const O=R.target;(g==null?void 0:g.contains(O))&&N(R,p)};return document.addEventListener("wheel",_,{passive:!1}),()=>document.removeEventListener("wheel",_,{passive:!1})},[b,g,p,N]),v.useEffect(k,[s,k]),Cm(g,S),Cm(m.content,S),r.jsx(_qe,{scope:n,scrollbar:g,hasThumb:a,onThumbChange:zr(i),onThumbPointerUp:zr(l),onThumbPositionChange:k,onThumbPointerDown:zr(o),children:r.jsx(Xe.div,{...f,ref:w,style:{position:"absolute",...f.style},onPointerDown:Le(e.onPointerDown,_=>{_.button===0&&(_.target.setPointerCapture(_.pointerId),j.current=g.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),P(_))}),onPointerMove:Le(e.onPointerMove,P),onPointerUp:Le(e.onPointerUp,_=>{const R=_.target;R.hasPointerCapture(_.pointerId)&&R.releasePointerCapture(_.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),j.current=null})})})}),ow="ScrollAreaThumb",sX=v.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=rX(ow,e.__scopeScrollArea);return r.jsx(Vn,{present:n||a.hasThumb,children:r.jsx(Aqe,{ref:t,...s})})}),Aqe=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...a}=e,i=ei(ow,n),l=rX(ow,n),{onThumbPositionChange:o}=l,c=jt(t,h=>l.onThumbChange(h)),d=v.useRef(void 0),u=wN(()=>{d.current&&(d.current(),d.current=void 0)},100);return v.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(u(),!d.current){const m=Oqe(h,o);d.current=m,o()}};return o(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,u,o]),r.jsx(Xe.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Le(e.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),g=h.clientX-m.left,x=h.clientY-m.top;l.onThumbPointerDown({x:g,y:x})}),onPointerUp:Le(e.onPointerUp,l.onThumbPointerUp)})});sX.displayName=ow;var $E="ScrollAreaCorner",aX=v.forwardRef((e,t)=>{const n=ei($E,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?r.jsx(Tqe,{...e,ref:t}):null});aX.displayName=$E;var Tqe=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,a=ei($E,n),[i,l]=v.useState(0),[o,c]=v.useState(0),d=!!(i&&o);return Cm(a.scrollbarX,()=>{var h;const u=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),Cm(a.scrollbarY,()=>{var h;const u=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(u),l(u)}),d?r.jsx(Xe.div,{...s,ref:t,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function cw(e){return e?parseInt(e,10):0}function iX(e,t){const n=e/t;return isNaN(n)?0:n}function jN(e){const t=iX(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function Eqe(e,t,n,s="ltr"){const a=jN(n),i=a/2,l=t||i,o=a-l,c=n.scrollbar.paddingStart+l,d=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,h=s==="ltr"?[0,u]:[u*-1,0];return lX([c,d],h)(e)}function zF(e,t,n="ltr"){const s=jN(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,l=t.content-t.viewport,o=i-s,c=n==="ltr"?[0,l]:[l*-1,0],d=tg(e,c);return lX([0,l],[0,o])(d)}function lX(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function oX(e,t){return e>0&&e<t}var Oqe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},l=n.left!==i.left,o=n.top!==i.top;(l||o)&&t(),n=i,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function wN(e,t){const n=zr(e),s=v.useRef(0);return v.useEffect(()=>()=>window.clearTimeout(s.current),[]),v.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function Cm(e,t){const n=zr(t);pn(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,n])}var cX=QY,Rqe=eX,Dqe=aX;const dX=v.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(cX,{ref:s,className:Ee("relative overflow-hidden",e),...n,children:[r.jsx(Rqe,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(uX,{}),r.jsx(Dqe,{})]}));dX.displayName=cX.displayName;const uX=v.forwardRef(({className:e,orientation:t="vertical",...n},s)=>r.jsx(DE,{ref:s,orientation:t,className:Ee("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:r.jsx(sX,{className:"relative flex-1 rounded-full bg-border"})}));uX.displayName=DE.displayName;const Mqe=(e,t="Дата неизвестна")=>{try{if(!e||e==="null"||e==="undefined")return t;const n=new Date(e);return isNaN(n.getTime())?(console.warn("Invalid date for formatting:",e),t):n.toLocaleString("ru-RU")}catch(n){return console.error("Error formatting date:",n,e),t}};function $qe({events:e=[],isLoading:t=!1}){const n=l=>{switch(l){case"reg":return r.jsx(Oo,{className:"h-4 w-4"});case"purchase":return r.jsx(Rt,{className:"h-4 w-4"});default:return r.jsx(lr,{className:"h-4 w-4"})}},s=l=>{switch(l){case"reg":return"Регистрация";case"purchase":return"Покупка";default:return l}},a=l=>{switch(l){case"initiated":return"default";case"pending":return"secondary";case"approved":return"default";case"declined":return"destructive";default:return"outline"}},i=l=>{switch(l){case"ok":return"text-green-600";case"soft":return"text-yellow-600";case"hard":return"text-red-600";default:return"text-gray-500"}};return t?r.jsxs(q,{children:[r.jsx(re,{children:r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(lr,{className:"h-5 w-5"}),"История событий"]})}),r.jsx(W,{children:r.jsx("div",{className:"flex items-center justify-center h-32",children:r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})})})]}):r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(lr,{className:"h-5 w-5"}),"История событий"]}),r.jsx(Ze,{children:"Последние отправленные события"})]}),r.jsx(W,{children:e.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Нет отправленных событий"}):r.jsx(dX,{className:"h-96",children:r.jsx("div",{className:"space-y-4",children:e.map(l=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[n(l.type),r.jsx("span",{className:"font-medium",children:s(l.type)}),r.jsx(ie,{variant:a(l.status),children:l.status})]}),l.antifraudLevel&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Dt,{className:"h-4 w-4"}),r.jsx("span",{className:`text-sm font-medium ${i(l.antifraudLevel)}`,children:l.antifraudLevel.toUpperCase()})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Click ID:"}),r.jsx("code",{className:"ml-1 bg-muted px-1 rounded text-xs",children:l.clickid})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"TX ID:"}),r.jsx("code",{className:"ml-1 bg-muted px-1 rounded text-xs",children:l.txid})]})]}),l.value&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:"Сумма:"}),r.jsxs("span",{className:"ml-1",children:[l.value," ",l.currency||"USD"]})]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:Mqe(l.createdAt)})]},l.id))})})})]})}function SS(){return r.jsxs("div",{className:"container mx-auto py-8 space-y-8",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Hw,{className:"h-6 w-6"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Тестирование событий"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{children:r.jsx(bqe,{defaultClickId:"test_click_123",defaultTxId:"tx_test_456"})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(q,{children:[r.jsxs(re,{children:[r.jsxs(se,{className:"flex items-center gap-2",children:[r.jsx(Vr,{className:"h-5 w-5"}),"Быстрые действия"]}),r.jsx(Ze,{children:"Отправка событий одной кнопкой для тестирования"})]}),r.jsx(W,{children:r.jsx(jqe,{clickid:"test_click_123"})})]}),r.jsxs(q,{children:[r.jsx(re,{children:r.jsx(se,{children:"Инструкции"})}),r.jsxs(W,{className:"space-y-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Типы событий:"}),r.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[r.jsxs("li",{children:[r.jsx("code",{children:"reg"})," — регистрация пользователя"]}),r.jsxs("li",{children:[r.jsx("code",{children:"purchase"})," — покупка/депозит"]})]})]}),r.jsx(wn,{}),r.jsxs("div",{children:[r.jsx("strong",{children:"Антифрод уровни:"}),r.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[r.jsxs("li",{children:[r.jsx("code",{children:"ok"})," — чистый трафик, проходит везде"]}),r.jsxs("li",{children:[r.jsx("code",{children:"soft"})," — backup профиль блокирует approved"]}),r.jsxs("li",{children:[r.jsx("code",{children:"hard"})," — блокируются все профили"]})]})]}),r.jsx(wn,{}),r.jsxs("div",{children:[r.jsx("strong",{children:"Результат:"}),r.jsx("p",{className:"mt-1",children:"После отправки события создается conversion и запускается система постбеков с применением антифрод политик."})]})]})]})]}),r.jsx("div",{children:r.jsx($qe,{events:[{id:"1",type:"reg",clickid:"test_click_123",txid:"tx_reg_001",status:"initiated",antifraudLevel:"ok",createdAt:new Date().toISOString()},{id:"2",type:"purchase",clickid:"test_click_456",txid:"tx_purchase_001",value:150,currency:"USD",status:"approved",antifraudLevel:"soft",createdAt:new Date(Date.now()-3e5).toISOString()}]})})]})]})}function it({children:e,allowedRoles:t}){const{user:n,loading:s}=tr();return s?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):n?(console.log("ProtectedRoute debug:",{userRole:n.role,allowedRoles:t,includes:t.includes(n.role),path:window.location.pathname}),t.includes(n.role)?(console.log("ACCESS GRANTED - Rendering component"),r.jsx(r.Fragment,{children:e})):(console.log("REDIRECTING TO UNAUTHORIZED - Role mismatch"),r.jsx(jd,{to:"/unauthorized"}))):r.jsx(jd,{to:"/login"})}function Iqe(){const{user:e}=tr(),{i18n:t}=Wt();return v.useEffect(()=>{t.language!=="ru"&&t.changeLanguage("ru")},[t]),r.jsxs(nte,{children:[r.jsx(et,{path:"/login",component:kS}),r.jsx(et,{path:"/login/:role",component:kS}),r.jsx(et,{path:"/auth/login",component:kS}),r.jsx(et,{path:"/auth/register-partner",component:dqe}),r.jsx(et,{path:"/auth/register-advertiser",component:uqe}),r.jsx(et,{path:"/admin",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(TI,{})})}),r.jsx(et,{path:"/super-admin/dashboard",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(TI,{})})}),r.jsx(et,{path:"/admin/users",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(qk,{})})}),r.jsx(et,{path:"/admin/users-management",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(qk,{})})}),r.jsx(et,{path:"/super-admin/users-management",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(qk,{})})}),r.jsx(et,{path:"/admin/roles",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(BMe,{})})}),r.jsx(et,{path:"/admin/user-analytics",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(tFe,{})})}),r.jsx(et,{path:"/admin/OffersManagement",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx($5e,{})})}),r.jsx(et,{path:"/admin/OfferDetails/:id",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(I5e,{})})}),r.jsx(et,{path:"/admin/finances",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(L5e,{})})}),r.jsx(et,{path:"/admin/fraud-alerts",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(U5e,{})})}),r.jsx(et,{path:"/super-admin/postbacks",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(B5e,{})})}),r.jsx(et,{path:"/admin/system-settings",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(q5e,{})})}),r.jsx(et,{path:"/admin/audit-logs",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx($3e,{})})}),r.jsx(et,{path:"/admin/postbacks",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(F3e,{})})}),r.jsx(et,{path:"/admin/blacklist",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(U3e,{})})}),r.jsx(et,{path:"/admin/analytics",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(z3e,{})})}),r.jsx(et,{path:"/super-admin/analytics",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(V3e,{})})}),r.jsx(et,{path:"/admin/postbacks",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(aFe,{})})}),r.jsx(et,{path:"/admin/support",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(eFe,{})})}),r.jsx(et,{path:"/advertiser/profile",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(hFe,{})})})}),r.jsx(et,{path:"/advertiser/documents",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(VVe,{})},"advertiser-documents")})}),r.jsx(et,{path:"/advertiser/finances",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(mFe,{})})})}),r.jsx(et,{path:"/advertiser/finance",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(yVe,{})})})}),r.jsx(et,{path:"/advertiser/offers/new",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx($F,{})})})}),r.jsx(et,{path:"/advertiser/create",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx($F,{})})})}),r.jsx(et,{path:"/advertiser/offers/:id/edit",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(uVe,{})})})}),r.jsx(et,{path:"/advertiser/offers/manage",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(sVe,{})})})}),r.jsx(et,{path:"/advertiser/offers/:id",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(dVe,{})})})}),r.jsx(et,{path:"/advertiser/offers",children:r.jsx(it,{allowedRoles:["advertiser","super_admin"],children:r.jsx(Lr,{children:r.jsx(Zze,{})})})}),r.jsx(et,{path:"/advertiser/offers-drag",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(fVe,{})})})}),r.jsx(et,{path:"/advertiser/received-offers",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(vVe,{})})})}),r.jsx(et,{path:"/advertiser/access-requests",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(YVe,{})})})}),r.jsx(et,{path:"/advertiser/notifications",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(XVe,{})})})}),r.jsx(et,{path:"/advertiser/referrals",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(QVe,{})})})}),r.jsx(et,{path:"/advertiser/analytics",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(bVe,{})})})}),r.jsx(et,{path:"/advertiser/postbacks",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(fqe,{})})})}),r.jsx(et,{path:"/advertiser/postback-profiles",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(pqe,{})})})}),r.jsx(et,{path:"/advertiser/team",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(wVe,{})},"advertiser-team")})}),r.jsx(et,{path:"/advertiser/partners",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(Jze,{})})})}),r.jsx(et,{path:"/advertiser/antifraud",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(zVe,{})},"advertiser-antifraud")})}),r.jsx(et,{path:"/advertiser/dashboard",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(OF,{})})})}),r.jsx(et,{path:"/advertiser",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(Lr,{children:r.jsx(OF,{})})})}),r.jsx(et,{path:"/affiliate/offers/:id",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(Q3e,{})})})}),r.jsx(et,{path:"/affiliate/statistics",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(aqe,{})})})}),r.jsx(et,{path:"/affiliate/live-analytics",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(iqe,{})})})}),r.jsx(et,{path:"/affiliate/finances",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(lqe,{})})})}),r.jsx(et,{path:"/affiliate/offers",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(H3e,{})})})}),r.jsx(et,{path:"/affiliate/access-requests",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(cqe,{})})})}),r.jsx(et,{path:"/affiliate/team",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(eVe,{})})})}),r.jsx(et,{path:"/affiliate/referrals",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(ZVe,{})})})}),r.jsx(et,{path:"/affiliate/notifications",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(rVe,{})})})}),r.jsx(et,{path:"/affiliate/postbacks",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(gqe,{})})})}),r.jsx(et,{path:"/affiliate/profile",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(KVe,{})})})}),r.jsx(et,{path:"/affiliate/settings",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(GVe,{})})})}),r.jsx(et,{path:"/affiliate/dashboard",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(LF,{})})})}),r.jsx(et,{path:"/affiliate",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(LF,{})})})}),r.jsx(et,{path:"/",children:e?e.role==="super_admin"?r.jsx(jd,{to:"/admin"}):e.role==="advertiser"?r.jsx(jd,{to:"/advertiser"}):e.role==="affiliate"?r.jsx(jd,{to:"/affiliate"}):r.jsx(jd,{to:"/login"}):r.jsx(jd,{to:"/login"})}),r.jsx(et,{path:"/unauthorized",children:r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Access Denied"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"You don't have permission to access this page."}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-100 rounded",children:[r.jsx("h3",{className:"font-bold",children:"Debug Info:"}),r.jsxs("p",{children:["Current URL: ",window.location.href]}),r.jsxs("p",{children:["Pathname: ",window.location.pathname]}),r.jsx("p",{children:"This page should not be displayed if you have proper access."})]})]})})}),r.jsx(et,{path:"/admin/events",children:r.jsx(it,{allowedRoles:["super_admin"],children:r.jsx(SS,{})})}),r.jsx(et,{path:"/advertiser/events",children:r.jsx(it,{allowedRoles:["advertiser"],children:r.jsx(SS,{})})}),r.jsx(et,{path:"/affiliate/events",children:r.jsx(it,{allowedRoles:["affiliate"],children:r.jsx(ps,{children:r.jsx(SS,{})})})}),r.jsx(et,{path:"/file-upload-test",children:r.jsx(it,{allowedRoles:["super_admin","advertiser","affiliate"],children:r.jsx(Lr,{children:r.jsx(JVe,{})})})}),r.jsx(et,{path:"/update-token",component:hqe}),r.jsx(et,{component:tde})]})}function Fqe(){return v.useEffect(()=>{Aee(async()=>{const{initProductionAuthFix:e}=await import("./productionAuthFix-CKbW_Xpu.js");return{initProductionAuthFix:e}},[]).then(({initProductionAuthFix:e})=>{e()})},[]),r.jsx(W8,{client:no,children:r.jsx(Pae,{children:r.jsx(h9,{defaultTheme:"light",children:r.jsx(Aae,{children:r.jsx(hD,{children:r.jsx(hD,{children:r.jsxs(Tae,{children:[r.jsx(rse,{}),r.jsx(Iqe,{})]})})})})})})})}ts.changeLanguage("ru");window.addEventListener("unhandledrejection",e=>{var t;console.warn("Promise rejection handled:",((t=e.reason)==null?void 0:t.message)||"Unknown error"),e.preventDefault()});window.addEventListener("error",e=>{var t,n,s;!((t=e.message)!=null&&t.includes("ResizeObserver"))&&!((n=e.message)!=null&&n.includes("Non-Error promise"))&&console.warn("Global error handled:",((s=e.error)==null?void 0:s.message)||e.message),e.preventDefault()});const Lqe=new z8({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1,staleTime:5*60*1e3},mutations:{retry:!1}}});h8(document.getElementById("root")).render(r.jsx(v.StrictMode,{children:r.jsx(h9,{defaultTheme:"light",storageKey:"affiliate-platform-theme",children:r.jsx(W8,{client:Lqe,children:r.jsx(Fqe,{})})})}));
