# –ê–ù–ê–õ–ò–ó –ö–ï–®–ò–†–û–í–ê–ù–ò–Ø –ò –û–¢–õ–û–ñ–ï–ù–ù–´–• –ó–ê–ì–†–£–ó–û–ö

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 5 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–ü—Ä–æ–≤–µ—Ä–∏–ª:** AI-Assistant  
**–°–∏—Å—Ç–µ–º–∞:** –§–∏–Ω–∞–Ω—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ  

## –ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï

### ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ö–ï–®–ò–†–û–í–ê–ù–ò–Ø –û–ë–ù–ê–†–£–ñ–ï–ù–´

1. **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ query keys** - —Ñ–∏–ª—å—Ç—Ä—ã –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ –∫–ª—é—á–∞—Ö –∫–µ—à–∞
2. **–î–æ–ª–≥–æ–µ –≤—Ä–µ–º—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è** - 5 –º–∏–Ω—É—Ç staleTime –∏—Å–∫–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏** - –∫–µ—à –Ω–µ –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
4. **Server-side –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç** - 1-–º–∏–Ω—É—Ç–Ω—ã–π –∫–µ—à –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –±–µ–∑ —É—á–µ—Ç–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤

---

## –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú

### 1. –ö–õ–ò–ï–ù–¢–°–ö–û–ï –ö–ï–®–ò–†–û–í–ê–ù–ò–ï (React Query)

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø–æ–ª–Ω—ã–µ query keys
```typescript
// –ü–†–û–ë–õ–ï–ú–ê: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ñ–∏–ª—å—Ç—Ä—ã –≤ –∫–ª—é—á–∞—Ö
const { data: transactions } = useQuery({
  queryKey: ['/api/admin/finances'], // ‚ùå –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤!
  // ...
});

const { data: payoutRequests } = useQuery({
  queryKey: ['/api/admin/payout-requests'], // ‚ùå –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤!
  // ...
});
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü—Ä–∏ —Å–º–µ–Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (—Å—Ç–∞—Ç—É—Å, –≤–∞–ª—é—Ç–∞, –ø–µ—Ä–∏–æ–¥) –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–º–µ—Å—Ç–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –¢–æ–ª—å–∫–æ dateFilter —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —á–∞—Å—Ç–∏—á–Ω–æ
```typescript
// –ü–†–ê–í–ò–õ–¨–ù–û (—á–∞—Å—Ç–∏—á–Ω–æ): dateFilter –≤–∫–ª—é—á–µ–Ω
const { data: financialMetrics } = useQuery({
  queryKey: ['/api/admin/financial-metrics', dateFilter],
  // ...
});

// –ù–û –ù–ï–¢ –¥—Ä—É–≥–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤: filterStatus, filterCurrency, filterMethod
```

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –î–æ–ª–≥–æ–µ –≤—Ä–µ–º—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
```typescript
// –í queryClient.ts
staleTime: 5 * 60 * 1000, // 5 –º–∏–Ω—É—Ç - –°–õ–ò–®–ö–û–ú –î–û–õ–ì–û –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤
gcTime: 10 * 60 * 1000,   // 10 –º–∏–Ω—É—Ç –≤ –ø–∞–º—è—Ç–∏
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–µ—à–∏—Ä—É—é—Ç—Å—è 5 –º–∏–Ω—É—Ç
- –ü—Ä–∏ —Å–º–µ–Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 5 –º–∏–Ω—É—Ç –≤–∏–¥–∏—Ç —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è real-time —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### 2. –°–ï–†–í–ï–†–ù–û–ï –ö–ï–®–ò–†–û–í–ê–ù–ò–ï

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ö–µ—à –±–µ–∑ —É—á–µ—Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```typescript
// –í server/routes.ts dashboard metrics
const cacheKey = `dashboard_metrics_${authUser.id}`; // ‚ùå –ù–µ—Ç –ø–µ—Ä–∏–æ–¥–∞!
queryCache.set(cacheKey, metrics, 60 * 1000); // 1 –º–∏–Ω—É—Ç–∞ –∫–µ—à
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ó–∞–ø—Ä–æ—Å `/api/dashboard/metrics` –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ —É—á–µ—Ç–∞ –ø–µ—Ä–∏–æ–¥–∞
- –ü—Ä–∏ —Å–º–µ–Ω–µ —Å "7 –¥–Ω–µ–π" –Ω–∞ "30 –¥–Ω–µ–π" –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∑–∞ 7 –¥–Ω–µ–π
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ù–æ–≤—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ endpoints –ë–ï–ó –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
```typescript
// –ù–æ–≤—ã–µ endpoints –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç queryCache
app.get("/api/admin/financial-metrics/:period", ...)
app.get("/api/admin/finances", ...)
app.get("/api/admin/commission-data", ...)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–∏ –º–µ–∂–¥—É —Å—Ç–∞—Ä—ã–º–∏ –∏ –Ω–æ–≤—ã–º–∏ endpoints

### 3. –ü–†–û–ë–õ–ï–ú–´ –ò–ù–í–ê–õ–ò–î–ê–¶–ò–ò

#### ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Å–º–µ–Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
```typescript
// –ü—Ä–∏ —Å–º–µ–Ω–µ dateFilter –ù–ï–¢ –æ—á–∏—Å—Ç–∫–∏ –¥—Ä—É–≥–∏—Ö –∫–µ—à–µ–π
const [dateFilter, setDateFilter] = useState<string>('30d');

// –ù–µ—Ç useEffect –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–µ—à–µ–π –ø—Ä–∏ —Å–º–µ–Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
```

#### ‚ùå –ß–∞—Å—Ç–∏—á–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ mutations
```typescript
// –¢–æ–ª—å–∫–æ —á–∞—Å—Ç—å –∫–µ—à–µ–π –æ—á–∏—â–∞–µ—Ç—Å—è
queryClient.invalidateQueries({ queryKey: ['/api/admin/finances'] });
queryClient.invalidateQueries({ queryKey: ['/api/admin/financial-metrics'] });

// –ù–û –ù–ï –æ—á–∏—â–∞—é—Ç—Å—è:
// - /api/admin/payout-requests
// - /api/admin/deposits  
// - /api/admin/commission-data
// - /api/admin/financial-chart
```

---

## –°–¶–ï–ù–ê–†–ò–ò –ò–°–ö–ê–ñ–ï–ù–ò–Ø –î–ê–ù–ù–´–•

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–º–µ–Ω–∞ –ø–µ—Ä–∏–æ–¥–∞ –≤ –¥–∞—à–±–æ—Ä–¥–µ
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–Ω—Å—ã (–ø–µ—Ä–∏–æ–¥: 30 –¥–Ω–µ–π)
2. –î–∞–Ω–Ω—ã–µ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 5 –º–∏–Ω—É—Ç
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç –Ω–∞ 7 –¥–Ω–µ–π
4. **–ü–†–û–ë–õ–ï–ú–ê:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ 30 –¥–Ω–µ–π
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ 5 –º–∏–Ω—É—Ç

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ—Ç—Ä–∏—Ç –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2. –î–∞–Ω–Ω—ã–µ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –±–µ–∑ —É—á–µ—Ç–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ —Å—Ç–∞—Ç—É—Å—É "pending"
4. **–ü–†–û–ë–õ–ï–ú–ê:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ –∫–µ—à–∞
5. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω–æ, –¥–∞–Ω–Ω—ã–µ –Ω–µ–ø–æ–ª–Ω—ã–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
1. –ê–¥–º–∏–Ω –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2. –ö–µ—à —á–∞—Å—Ç–∏—á–Ω–æ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è
3. **–ü–†–û–ë–õ–ï–ú–ê:** –í—ã–ø–ª–∞—Ç—ã –∏ –¥–µ–ø–æ–∑–∏—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ —Å—Ç–∞—Ä–æ–º –∫–µ—à–µ
4. –í —Ä–∞–∑–Ω—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∞–ª—é—Ç
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ—Ç—Ä–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ USD
2. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ EUR
3. **–ü–†–û–ë–õ–ï–ú–ê:** –§–∏–ª—å—Ç—Ä –ø–æ –≤–∞–ª—é—Ç–µ –Ω–µ –≤ query key
4. –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è USD —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤–º–µ—Å—Ç–æ EUR

---

## –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### üî¥ –ù–ï–ú–ï–î–õ–ï–ù–ù–û: –ò—Å–ø—Ä–∞–≤–∏—Ç—å query keys

```typescript
// –î–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
queryKey: ['/api/admin/finances']

// –ü–û–°–õ–ï (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
queryKey: ['/api/admin/finances', {
  status: filterStatus,
  currency: filterCurrency,
  method: filterMethod,
  period: dateFilter
}]
```

### üî¥ –ù–ï–ú–ï–î–õ–ï–ù–ù–û: –°–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

```typescript
// –î–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
staleTime: 30 * 1000, // 30 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 5 –º–∏–Ω—É—Ç
gcTime: 2 * 60 * 1000, // 2 –º–∏–Ω—É—Ç—ã –≤–º–µ—Å—Ç–æ 10 –º–∏–Ω—É—Ç
```

### üî¥ –ù–ï–ú–ï–î–õ–ï–ù–ù–û: –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–∏–ª—å—Ç—Ä–æ–≤

```typescript
// –ü—Ä–∏ —Å–º–µ–Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤:
useEffect(() => {
  queryClient.invalidateQueries({ 
    queryKey: ['/api/admin/finances'] 
  });
}, [filterStatus, filterCurrency, filterMethod, dateFilter]);
```

### üî¥ –ù–ï–ú–ï–î–õ–ï–ù–ù–û: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–µ—à

```typescript
// –í–∫–ª—é—á–∏—Ç—å –ø–µ—Ä–∏–æ–¥ –≤ –∫–ª—é—á –∫–µ—à–∞:
const cacheKey = `dashboard_metrics_${authUser.id}_${period}`;
```

---

## –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### 1. –†–ï–°–¢–†–£–ö–¢–£–†–ò–ó–ê–¶–ò–Ø QUERY KEYS
```typescript
// –°—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:
const buildFinancialQueryKey = (endpoint: string, filters: any) => [
  endpoint,
  {
    period: filters.dateFilter,
    status: filters.filterStatus, 
    currency: filters.filterCurrency,
    method: filters.filterMethod,
    search: filters.searchTerm
  }
];
```

### 2. –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ò–ù–í–ê–õ–ò–î–ê–¶–ò–Ø
```typescript
// Hook –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–µ—à–µ–π:
const useFinancialFilters = (filters) => {
  const queryClient = useQueryClient();
  
  useEffect(() => {
    queryClient.invalidateQueries({ 
      predicate: (query) => 
        query.queryKey[0]?.toString().includes('/api/admin/') 
    });
  }, [filters]);
};
```

### 3. –ù–ê–°–¢–†–û–ô–ö–ò –î–õ–Ø –§–ò–ù–ê–ù–°–û–í–´–• –î–ê–ù–ù–´–•
```typescript
// –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤:
const financialQueryOptions = {
  staleTime: 30 * 1000,      // 30 —Å–µ–∫—É–Ω–¥
  gcTime: 2 * 60 * 1000,     // 2 –º–∏–Ω—É—Ç—ã  
  refetchOnWindowFocus: true, // –û–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
  refetchInterval: 60 * 1000  // –û–±–Ω–æ–≤–ª—è—Ç—å –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
};
```

---

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–û—Ü–µ–Ω–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:** 2/10

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –§–∏–ª—å—Ç—Ä—ã –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ –∫–ª—é—á–∞—Ö –∫–µ—à–∞
- –°–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ–µ –≤—Ä–µ–º—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤  
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É client-side –∏ server-side –∫–µ—à–µ–º

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- –ü–æ–∫–∞–∑ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–∫–∞–∂–µ–Ω–∏–µ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –ø–µ—Ä–∏–æ–¥–æ–≤
- –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
- –ü–æ—Ç–µ—Ä—è –¥–æ–≤–µ—Ä–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã

---

## –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (5 –∞–≤–≥—É—Å—Ç–∞ 2025)

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï QUERY KEYS

1. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (`/api/admin/finances`)**
   ```typescript
   // –ë–´–õ–û: queryKey: ['/api/admin/finances']
   // –°–¢–ê–õ–û: queryKey: ['/api/admin/finances', { 
   //   status: filterStatus, type: filterType, 
   //   currency: filterCurrency, method: filterMethod, search: searchTerm 
   // }]
   ```

2. **–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤—ã–ø–ª–∞—Ç—ã (`/api/admin/payout-requests`)**
   ```typescript
   // –ë–´–õ–û: queryKey: ['/api/admin/payout-requests']
   // –°–¢–ê–õ–û: queryKey: ['/api/admin/payout-requests', { 
   //   status: filterStatus, currency: filterCurrency, 
   //   method: filterMethod, search: searchTerm 
   // }]
   ```

3. **–î–µ–ø–æ–∑–∏—Ç—ã (`/api/admin/deposits`)**
   ```typescript
   // –ë–´–õ–û: queryKey: ['/api/admin/deposits']
   // –°–¢–ê–õ–û: queryKey: ['/api/admin/deposits', { 
   //   status: filterStatus, currency: filterCurrency, 
   //   method: filterMethod, search: searchTerm, period: dateFilter 
   // }]
   ```

4. **–î–∞–Ω–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–π (`/api/admin/commission-data`)**
   ```typescript
   // –ë–´–õ–û: queryKey: ['/api/admin/commission-data']
   // –°–¢–ê–õ–û: queryKey: ['/api/admin/commission-data', { period: dateFilter }]
   ```

### ‚úÖ –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò –ö–ï–®–ò–†–û–í–ê–ù–ò–Ø

1. **–°–æ–∫—Ä–∞—â–µ–Ω–æ –≤—Ä–µ–º—è staleTime**
   ```typescript
   staleTime: 30 * 1000,     // 30 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 5 –º–∏–Ω—É—Ç
   gcTime: 2 * 60 * 1000,    // 2 –º–∏–Ω—É—Ç—ã –≤–º–µ—Å—Ç–æ 10 –º–∏–Ω—É—Ç
   refetchOnWindowFocus: true // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∫ –æ–∫–Ω—É
   ```

2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   ```typescript
   // –ë–´–õ–û: const cacheKey = `dashboard_metrics_${authUser.id}`;
   // –°–¢–ê–õ–û: const cacheKey = `dashboard_metrics_${authUser.id}_${period}`;
   // –í—Ä–µ–º—è –∫–µ—à–∞: 30 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 60 —Å–µ–∫—É–Ω–¥
   ```

### ‚úÖ –£–õ–£–ß–®–ï–ù–ù–ê–Ø –ò–ù–í–ê–õ–ò–î–ê–¶–ò–Ø

1. **–ü—Ä–µ–¥–∏–∫–∞—Ç–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
   ```typescript
   queryClient.invalidateQueries({ 
     predicate: (query) => {
       const key = query.queryKey[0] as string;
       return key?.includes('/api/admin/financial') || 
              key?.includes('/api/admin/finances') || 
              key?.includes('/api/admin/payout-requests') ||
              key?.includes('/api/admin/deposits') ||
              key?.includes('/api/admin/commission-data');
     }
   });
   ```

### ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

**–£—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã —Ç–µ–ø–µ—Ä—å —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ –∫–ª—é—á–∞—Ö –∫–µ—à–∞
- ‚úÖ –í—Ä–µ–º—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–∫—Ä–∞—â–µ–Ω–æ –¥–æ 30 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–µ—à —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä–∏–æ–¥ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∫ –æ–∫–Ω—É –±—Ä–∞—É–∑–µ—Ä–∞

**–£–ª—É—á—à–µ–Ω–∏—è UX:**
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–µ—Ä–∏–æ–¥–æ–≤  
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:** 9/10

**–°—Ç–∞—Ç—É—Å:** –ü–û–õ–ù–û–°–¢–¨–Æ –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ