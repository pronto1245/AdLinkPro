# –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ô –†–ï–í–¨–Æ: –°–ò–°–¢–ï–ú–ê –£–ü–†–ê–í–õ–ï–ù–ò–Ø –û–§–§–ï–†–ê–ú–ò

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 5 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–ü—Ä–æ–≤–µ—Ä–∏–ª:** AI-Assistant  
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** 1.0  

## –û–¶–ï–ù–ö–ê –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### ‚úÖ –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–´–ï –ê–°–ü–ï–ö–¢–´

1. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
   - –¢–∞–±–ª–∏—Ü–∞ `offers` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–≤—è–∑–∏ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ (`advertiserId` ‚Üí `users.id`)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ JSONB –¥–ª—è –≥–∏–±–∫–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä (landingPages, geoPricing, trafficSources)

2. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π:**
   - Super admin: –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –æ—Ñ—Ñ–µ—Ä–∞–º
   - Advertiser: —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –æ—Ñ—Ñ–µ—Ä—ã
   - Affiliate: –æ—Ñ—Ñ–µ—Ä—ã —Å –æ–¥–æ–±—Ä–µ–Ω–∏–µ–º –∏–ª–∏ –ø—É–±–ª–∏—á–Ω—ã–µ
   - Staff: –æ—Ñ—Ñ–µ—Ä—ã —Å–≤–æ–µ–≥–æ –≤–ª–∞–¥–µ–ª—å—Ü–∞

3. **–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä API endpoints:**
   - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏: GET, POST, PUT, PATCH, DELETE
   - –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: bulk-activate, bulk-pause, bulk-delete
   - –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

---

## ‚ö†Ô∏è –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. –ò–°–¢–û–ß–ù–ò–ö–ò –î–ê–ù–ù–´–• - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–Ø

#### ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: JOIN —Å —Ç–∞–±–ª–∏—Ü–µ–π users

**–ú–µ—Ç–æ–¥ getAllOffers() –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ storage.ts:**
```typescript
async getAllOffers(): Promise<(Offer & { advertiserName?: string })[]> {
  const offersWithAdvertisers = await db
    .select({
      ...offers,
      advertiserName: sql<string>`COALESCE(${users.firstName} || ' ' || ${users.lastName}, 'Unknown')`,
    })
    .from(offers)
    .leftJoin(users, eq(offers.advertiserId, users.id))
    .orderBy(offers.createdAt);
  
  return offersWithAdvertisers;
}
```

**‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `getOffers(advertiserId?)` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JOIN:
```typescript
async getOffers(advertiserId?: string): Promise<Offer[]> {
  if (advertiserId) {
    return await db.select().from(offers).where(eq(offers.advertiserId, advertiserId));
  }
  return await db.select().from(offers);
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å getAllOffers() –≤ API –º–∞—Ä—à—Ä—É—Ç–∞—Ö

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü

**–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ —Å—Ö–µ–º–µ:**
1. `offer_categories` - –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –æ—Ñ—Ñ–µ—Ä–æ–≤
2. `traffic_sources` - –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞
3. `offer_apps` - –¥–ª—è —Ç–∏–ø–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
4. `payouts` - –¥–ª—è –≥–µ–æ-–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç

**–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ JSONB –ø–æ–ª—è—Ö –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ `offers`

### 2. –§–ò–õ–¨–¢–†–ê–¶–ò–Ø –ò –ü–û–ò–°–ö

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ offers.tsx:**
```typescript
const filteredOffers = offers?.filter((offer: any) => {
  const matchesSearch = offer.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                       offer.category.toLowerCase().includes(searchTerm.toLowerCase());
  const matchesStatus = filterStatus === 'all' || offer.status === filterStatus;
  return matchesSearch && matchesStatus;
}) || [];
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –ø–æ —Å—Ç–∞—Ç—É—Å—É, –±–µ–∑ –¥—Ä—É–≥–∏—Ö –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ: —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—é, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∏—Å—Ç–æ—á–Ω–∏–∫—É —Ç—Ä–∞—Ñ–∏–∫–∞, —Ç–∏–ø—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### 3. –î–ï–ô–°–¢–í–ò–Ø –ù–ê–î –û–§–§–ï–†–ê–ú–ò

#### ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π:

1. **–ü—Ä–æ—Å–º–æ—Ç—Ä (üëÅ):** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ `offer.id`
2. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (‚úèÔ∏è):** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è  
3. **–£–¥–∞–ª–µ–Ω–∏–µ (üóë):** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç hard delete –≤–º–µ—Å—Ç–æ soft delete

#### ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ —É–¥–∞–ª–µ–Ω–∏—é:

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
async deleteOffer(id: string): Promise<void> {
  await db.delete(offers).where(eq(offers.id, id));
}
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (soft delete):**
```typescript
async deleteOffer(id: string): Promise<void> {
  await db
    .update(offers)
    .set({ 
      isArchived: true,
      status: 'archived'
    })
    .where(eq(offers.id, id));
}
```

### 4. –ò–ú–ü–û–†–¢/–≠–ö–°–ü–û–†–¢

#### ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–∞:
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–∞—Å—Å–∏–≤–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ñ—Ñ–µ—Ä–∞
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π

#### ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞:
- –ù–µ—Ç endpoint'–∞ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –æ—Ñ—Ñ–µ—Ä–æ–≤
- –ù–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ UI

---

## üìä –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï –ü–û–õ–ï–ô UI –ò –ë–ê–ó–´ –î–ê–ù–ù–´–•

| –ü–æ–ª–µ UI | –ò—Å—Ç–æ—á–Ω–∏–∫ –≤ –ë–î | –°—Ç–∞—Ç—É—Å |
|---------|--------------|--------|
| –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ñ—Ñ–µ—Ä–∞ | `offers.name` | ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ |
| –†–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—å | JOIN `users.firstName + lastName` –ø–æ `offers.advertiserId` | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ getAllOffers() |
| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | `offers.category` | ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ |
| –í—ã–ø–ª–∞—Ç–∞ (–ø–æ GEO) | `offers.geoPricing` (JSONB) | ‚ö†Ô∏è –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã payouts |
| –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ | `offers.trafficSources` (JSONB) | ‚ö†Ô∏è –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã |
| –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è | `offers.allowedApps` (JSONB) | ‚ö†Ô∏è –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã |
| –°—Ç–∞—Ç—É—Å | `offers.status` | ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ |
| –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | `offers.createdAt` | ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ |

---

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–õ–£–ß–®–ï–ù–ò–Æ

### 1. –ö–†–ò–¢–ò–ß–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å getAllOffers() –≤ API –º–∞—Ä—à—Ä—É—Ç–∞—Ö –≤–º–µ—Å—Ç–æ getOffers()**
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é**
3. **–î–æ–±–∞–≤–∏—Ç—å soft delete –¥–ª—è –æ—Ñ—Ñ–µ—Ä–æ–≤**
4. **–°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∞**

### 2. –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø:

1. **–°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
   - `offer_categories` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
   - `traffic_sources` –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞
   - `offer_payouts` –¥–ª—è –≥–µ–æ-–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç

2. **–£–ª—É—á—à–∏—Ç—å UI —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é:**
   - –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—é
   - –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É —Ç—Ä–∞—Ñ–∏–∫–∞

### 3. –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:

1. **–î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã:**
   - –ù–∞ `offers.advertiserId`
   - –ù–∞ `offers.status`
   - –ù–∞ `offers.category`

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ –æ—Ñ—Ñ–µ—Ä–æ–≤**

---

## üìù –í–´–í–û–î

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 7/10

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–º–µ–µ—Ç –ø—Ä–æ—á–Ω—É—é –æ—Å–Ω–æ–≤—É, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ —á–∞—Å—Ç–∏:**
- JOIN-–∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö JSONB –ø–æ–ª–µ–π –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
1. üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å getAllOffers() –≤ API –º–∞—Ä—à—Ä—É—Ç–∞—Ö
2. üü° –í–∞–∂–Ω–æ: –†–∞—Å—à–∏—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
3. üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ: –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞