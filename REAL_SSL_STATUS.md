# –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Let's Encrypt

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ:

### 1. –ö–æ–¥ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `acme-client` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- ‚úÖ –°–µ—Ä–≤–∏—Å `LetsEncryptService` —Å–æ–∑–¥–∞–Ω
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `CustomDomainService` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å `ENABLE_REAL_SSL` —Ä–∞–±–æ—Ç–∞–µ—Ç

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
ENABLE_REAL_SSL=true               # ‚úÖ –í–∫–ª—é—á–µ–Ω–æ
LETSENCRYPT_CONTACT_EMAIL=admin@example.com  # ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ
NODE_ENV=development               # ‚úÖ Staging —Ä–µ–∂–∏–º –¥–ª—è —Ç–µ—Å—Ç–æ–≤
```

### 3. –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
‚úÖ public/.well-known/acme-challenge/  # –ü–∞–ø–∫–∞ –¥–ª—è challenge —Ñ–∞–π–ª–æ–≤
‚úÖ server/services/letsencrypt.ts      # –°–µ—Ä–≤–∏—Å Let's Encrypt
‚úÖ scripts/renew-certificates.js       # –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

## üîÑ –¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:

**–°–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–µ–Ω:** Staging Let's Encrypt
- –¢–µ—Å—Ç–æ–≤—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è production)
- –ù–µ—Ç —Å—Ç—Ä–æ–≥–∏—Ö rate limits
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

## üöÄ –î–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ production:

```bash
# –ò–∑–º–µ–Ω–∏—Ç—å –≤ .env:
NODE_ENV=production
LETSENCRYPT_CONTACT_EMAIL=–≤–∞—à-—Ä–µ–∞–ª—å–Ω—ã–π-email@domain.com

# –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ DNS –∑–∞–ø–∏—Å—è–º–∏
```

## üìã –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥–æ–º–µ–Ω–∞:

1. **–î–æ–º–µ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è** ‚Üí —Å—Ç–∞—Ç—É—Å "pending"
2. **DNS –ø—Ä–æ–≤–µ—Ä–∫–∞** ‚Üí –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ, —Å—Ç–∞—Ç—É—Å "verified"
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ SSL** ‚Üí 
   - –ï—Å–ª–∏ `ENABLE_REAL_SSL=false` ‚Üí –¥–µ–º–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
   - –ï—Å–ª–∏ `ENABLE_REAL_SSL=true` ‚Üí —Ä–µ–∞–ª—å–Ω—ã–π Let's Encrypt

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–π—á–∞—Å:

```bash
# –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –¥–æ–º–µ–Ω:
curl -X POST "http://localhost:5000/api/advertiser/profile/domains" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{"domain": "test.example.com"}'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:
curl -X GET "http://localhost:5000/api/advertiser/profile/domains" \
  -H "Authorization: Bearer $TOKEN"
```

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è staging:
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏
- –ü–æ–¥—Ö–æ–¥—è—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å rate limits

## üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production: 95%
–ù—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ:
- –†–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω —Å DNS
- VPS —Å–µ—Ä–≤–µ—Ä
- `NODE_ENV=production`