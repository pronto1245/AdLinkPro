# üöÄ –ü–û–õ–ù–û–ï –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Æ AdLinkPro
## –ò—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

---

## üìã **–ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø**

### **üîß –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- **OS:** Ubuntu 20.04+ / CentOS 8+ / Debian 11+
- **RAM:** –ú–∏–Ω–∏–º—É–º 2GB, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4GB+
- **CPU:** 2 cores –º–∏–Ω–∏–º—É–º, 4+ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **Storage:** 20GB SSD –º–∏–Ω–∏–º—É–º
- **Network:** –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP, –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã 80, 443, 5000

### **üì¶ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –ü–û:**
- Node.js 20+ LTS
- PostgreSQL 15+
- Nginx
- PM2 (–ø—Ä–æ—Ü–µ—Å—Å –º–µ–Ω–µ–¥–∂–µ—Ä)
- Git
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Let's Encrypt)

---

## üåê **–í–ê–†–ò–ê–ù–¢–´ –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø**

### **ü•á Replit Deployments (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
### **üñ•Ô∏è VPS –°–µ—Ä–≤–µ—Ä—ã (–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)**
### **‚òÅÔ∏è Cloud –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã (AWS, GCP, DigitalOcean)**
### **üê≥ Docker –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**

---

## ü•á **–ú–ï–¢–û–î 1: REPLIT DEPLOYMENTS**

### **‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –û–¥–Ω–∏–º –∫–ª–∏–∫–æ–º —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù—É–ª–µ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### **üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Replit:**
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –≥–æ—Ç–æ–≤—ã
npm run build
npm run db:push
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
# –í Replit Secrets –¥–æ–±–∞–≤—å—Ç–µ:
DATABASE_URL=postgresql://username:password@host:port/database
JWT_SECRET=your-super-secret-jwt-key-here
SESSION_SECRET=your-session-secret-key-here
NODE_ENV=production

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (–¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏):
SENDGRID_API_KEY=your-sendgrid-api-key
VOLUUM_TOKEN=your-voluum-token
KEITARO_TOKEN=your-keitaro-token
BINOM_TOKEN=your-binom-token
GOOGLE_CLOUD_PROJECT_ID=your-gcp-project
GOOGLE_CLOUD_STORAGE_BUCKET=your-storage-bucket
```

3. **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:**
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Deploy" –≤ Replit
- –í—ã–±–µ—Ä–∏—Ç–µ "Static Deploy" –∏–ª–∏ "Autoscale Deploy"
- –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ü–æ–ª—É—á–∏—Ç–µ URL –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### **üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–ª—è Replit:**
```javascript
// –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ package.json –µ—Å—Ç—å:
{
  "scripts": {
    "start": "NODE_ENV=production node server/index.js",
    "build": "vite build",
    "dev": "NODE_ENV=development tsx server/index.ts"
  }
}
```

---

## üñ•Ô∏è **–ú–ï–¢–û–î 2: VPS –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï**

### **üá∑üá∫ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**

#### **Beget (beget.com) - –æ—Ç 390‚ÇΩ/–º–µ—Å—è—Ü**
```bash
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- 1 CPU, 2GB RAM, 10GB SSD
- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è cPanel
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π SSL
- –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7
```

#### **Timeweb (timeweb.com) - –æ—Ç 349‚ÇΩ/–º–µ—Å—è—Ü**
```bash
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- 1 CPU, 2GB RAM, 15GB SSD
- –£–¥–æ–±–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–µ–∫–∞–ø—ã
- DDoS –∑–∞—â–∏—Ç–∞
```

#### **RuVDS (ruvds.com) - –æ—Ç 130‚ÇΩ/–º–µ—Å—è—Ü**
```bash
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- 1 CPU, 1GB RAM, 10GB SSD
- –ü–æ–ª–Ω—ã–π root –¥–æ—Å—Ç—É–ø
- –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- –î–µ—à–µ–≤—ã–µ —Ç–∞—Ä–∏—Ñ—ã
```

### **üìã –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**

```bash
#!/bin/bash
# AdLinkPro Auto-Deploy Script v1.0

echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ AdLinkPro..."

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 20
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL
sudo apt install postgresql postgresql-contrib -y
sudo systemctl start postgresql
sudo systemctl enable postgresql

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx
sudo apt install nginx -y
sudo systemctl start nginx
sudo systemctl enable nginx

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
sudo npm install -g pm2

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
sudo adduser --system --group adlinkpro
sudo mkdir -p /var/www/adlinkpro
sudo chown adlinkpro:adlinkpro /var/www/adlinkpro

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
cd /var/www/adlinkpro
sudo -u adlinkpro git clone https://github.com/your-username/AdLinkPro.git .

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
sudo -u adlinkpro npm install

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
sudo -u adlinkpro npm run build

echo "‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏..."

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
sudo -u postgres psql << EOF
CREATE DATABASE adlinkpro;
CREATE USER adlinkpro_user WITH ENCRYPTED PASSWORD 'secure_password_here';
GRANT ALL PRIVILEGES ON DATABASE adlinkpro TO adlinkpro_user;
GRANT ALL ON SCHEMA public TO adlinkpro_user;
\q
EOF

# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
sudo -u adlinkpro cat << 'EOF' > /var/www/adlinkpro/.env
NODE_ENV=production
DATABASE_URL=postgresql://adlinkpro_user:secure_password_here@localhost:5432/adlinkpro
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters
SESSION_SECRET=your-session-secret-key-minimum-32-characters
PORT=5000

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
SENDGRID_API_KEY=your-sendgrid-api-key
VOLUUM_TOKEN=your-voluum-token
KEITARO_TOKEN=your-keitaro-token
BINOM_TOKEN=your-binom-token
EOF

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
cd /var/www/adlinkpro
sudo -u adlinkpro npm run db:push

# –°–æ–∑–¥–∞–Ω–∏–µ PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo -u adlinkpro cat << 'EOF' > /var/www/adlinkpro/ecosystem.config.js
module.exports = {
  apps: [{
    name: 'adlinkpro',
    script: 'server/index.js',
    instances: 'max',
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'development'
    },
    env_production: {
      NODE_ENV: 'production',
      PORT: 5000
    },
    log_file: '/var/log/adlinkpro/app.log',
    out_file: '/var/log/adlinkpro/out.log',
    error_file: '/var/log/adlinkpro/error.log',
    max_memory_restart: '1G',
    restart_delay: 4000
  }]
}
EOF

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤
sudo mkdir -p /var/log/adlinkpro
sudo chown adlinkpro:adlinkpro /var/log/adlinkpro

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ PM2
cd /var/www/adlinkpro
sudo -u adlinkpro pm2 start ecosystem.config.js --env production
sudo -u adlinkpro pm2 save
sudo pm2 startup
sudo env PATH=$PATH:/usr/bin pm2 startup systemd -u adlinkpro --hp /home/adlinkpro

echo "üéâ AdLinkPro —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç!"
echo "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 5000"
echo "–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –∏ SSL"
```

### **‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx:**

```nginx
# /etc/nginx/sites-available/adlinkpro
server {
    listen 80;
    server_name your-domain.com www.your-domain.com;
    
    # –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-domain.com www.your-domain.com;

    # SSL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;
    
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;

    # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
    add_header X-Frame-Options SAMEORIGIN;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains";

    # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–∫—Å–∏
    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        
        # –¢–∞–π–º–∞—É—Ç—ã
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }

    # WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞
    location /ws {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
    location /assets {
        alias /var/www/adlinkpro/dist/assets;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # –õ–æ–≥–∏
    access_log /var/log/nginx/adlinkpro_access.log;
    error_log /var/log/nginx/adlinkpro_error.log;
}
```

### **üîí –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SSL (Let's Encrypt):**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
sudo apt install certbot python3-certbot-nginx -y

# –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot --nginx -d your-domain.com -d www.your-domain.com

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo crontab -e
# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
0 12 * * * /usr/bin/certbot renew --quiet
```

### **üîß –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–∏
sudo ln -s /etc/nginx/sites-available/adlinkpro /etc/nginx/sites-enabled/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx
sudo systemctl reload nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status nginx
sudo systemctl status postgresql
sudo -u adlinkpro pm2 status
```

---

## ‚òÅÔ∏è **–ú–ï–¢–û–î 3: CLOUD –ü–õ–ê–¢–§–û–†–ú–´**

### **üî¥ AWS (Amazon Web Services)**

#### **EC2 + RDS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

```yaml
# cloudformation-template.yaml
AWSTemplateFormatVersion: '2010-09-09'
Description: 'AdLinkPro Infrastructure'

Parameters:
  KeyPairName:
    Type: AWS::EC2::KeyPair::KeyName
    Description: EC2 Key Pair for SSH access

Resources:
  # VPC Configuration
  VPC:
    Type: AWS::EC2::VPC
    Properties:
      CidrBlock: 10.0.0.0/16
      EnableDnsHostnames: true
      EnableDnsSupport: true

  # Internet Gateway
  InternetGateway:
    Type: AWS::EC2::InternetGateway

  AttachGateway:
    Type: AWS::EC2::VPCGatewayAttachment
    Properties:
      VpcId: !Ref VPC
      InternetGatewayId: !Ref InternetGateway

  # Public Subnet
  PublicSubnet:
    Type: AWS::EC2::Subnet
    Properties:
      VpcId: !Ref VPC
      CidrBlock: 10.0.1.0/24
      AvailabilityZone: !Select [0, !GetAZs '']
      MapPublicIpOnLaunch: true

  # Route Table
  PublicRouteTable:
    Type: AWS::EC2::RouteTable
    Properties:
      VpcId: !Ref VPC

  PublicRoute:
    Type: AWS::EC2::Route
    DependsOn: AttachGateway
    Properties:
      RouteTableId: !Ref PublicRouteTable
      DestinationCidrBlock: 0.0.0.0/0
      GatewayId: !Ref InternetGateway

  PublicSubnetRouteTableAssociation:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      SubnetId: !Ref PublicSubnet
      RouteTableId: !Ref PublicRouteTable

  # Security Groups
  WebServerSecurityGroup:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: Security group for AdLinkPro web server
      VpcId: !Ref VPC
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 22
          ToPort: 22
          CidrIp: 0.0.0.0/0
        - IpProtocol: tcp
          FromPort: 80
          ToPort: 80
          CidrIp: 0.0.0.0/0
        - IpProtocol: tcp
          FromPort: 443
          ToPort: 443
          CidrIp: 0.0.0.0/0
        - IpProtocol: tcp
          FromPort: 5000
          ToPort: 5000
          CidrIp: 0.0.0.0/0

  DatabaseSecurityGroup:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: Security group for PostgreSQL RDS
      VpcId: !Ref VPC
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 5432
          ToPort: 5432
          SourceSecurityGroupId: !Ref WebServerSecurityGroup

  # EC2 Instance
  WebServerInstance:
    Type: AWS::EC2::Instance
    Properties:
      ImageId: ami-0c02fb55956c7d316  # Amazon Linux 2 AMI
      InstanceType: t3.medium
      KeyName: !Ref KeyPairName
      SecurityGroupIds:
        - !Ref WebServerSecurityGroup
      SubnetId: !Ref PublicSubnet
      UserData:
        Fn::Base64: !Sub |
          #!/bin/bash
          yum update -y
          curl -sL https://rpm.nodesource.com/setup_20.x | bash -
          yum install -y nodejs git nginx
          npm install -g pm2
          systemctl start nginx
          systemctl enable nginx

  # RDS Subnet Group
  DBSubnetGroup:
    Type: AWS::RDS::DBSubnetGroup
    Properties:
      DBSubnetGroupDescription: Subnet group for RDS database
      SubnetIds:
        - !Ref PublicSubnet
        - !Ref PrivateSubnet

  # RDS Instance
  DatabaseInstance:
    Type: AWS::RDS::DBInstance
    Properties:
      DBInstanceIdentifier: adlinkpro-db
      DBInstanceClass: db.t3.micro
      Engine: postgres
      EngineVersion: '15.2'
      MasterUsername: adlinkpro
      MasterUserPassword: !Ref DatabasePassword
      AllocatedStorage: 20
      VPCSecurityGroups:
        - !Ref DatabaseSecurityGroup
      DBSubnetGroupName: !Ref DBSubnetGroup

Outputs:
  WebServerPublicIP:
    Description: Public IP of the web server
    Value: !GetAtt WebServerInstance.PublicIp
  DatabaseEndpoint:
    Description: RDS instance endpoint
    Value: !GetAtt DatabaseInstance.Endpoint.Address
```

### **üü° GCP (Google Cloud Platform)**

#### **App Engine –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

```yaml
# app.yaml
runtime: nodejs20

env_variables:
  NODE_ENV: production
  DATABASE_URL: postgresql://username:password@/database?host=/cloudsql/project:region:instance
  JWT_SECRET: your-jwt-secret
  SESSION_SECRET: your-session-secret

automatic_scaling:
  min_instances: 1
  max_instances: 10
  target_cpu_utilization: 0.6

health_check:
  enable_health_check: true
  check_interval_sec: 30
  timeout_sec: 4
  unhealthy_threshold: 2
  healthy_threshold: 2

handlers:
- url: /.*
  script: auto
  secure: always
```

### **üîµ DigitalOcean**

#### **App Platform –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

```yaml
# .do/app.yaml
name: adlinkpro
services:
- name: web
  source_dir: /
  github:
    repo: your-username/AdLinkPro
    branch: main
  run_command: npm start
  environment_slug: node-js
  instance_count: 1
  instance_size_slug: basic-xxs
  env:
  - key: NODE_ENV
    value: production
  - key: DATABASE_URL
    type: SECRET
    value: your-database-url
  - key: JWT_SECRET
    type: SECRET
    value: your-jwt-secret
  http_port: 5000
  routes:
  - path: /

databases:
- name: adlinkpro-db
  engine: PG
  version: "15"
  size: db-s-1vcpu-1gb
```

---

## üê≥ **–ú–ï–¢–û–î 4: DOCKER –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï**

### **üì¶ Dockerfile:**

```dockerfile
# Dockerfile
FROM node:20-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

FROM node:20-alpine AS runner

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

WORKDIR /app

COPY --from=builder /app/node_modules ./node_modules
COPY --from=builder /app/dist ./dist
COPY --from=builder /app/server ./server
COPY --from=builder /app/shared ./shared
COPY --from=builder /app/package*.json ./

USER nextjs

EXPOSE 5000

ENV NODE_ENV production
ENV PORT 5000

CMD ["npm", "start"]
```

### **üìã Docker Compose:**

```yaml
# docker-compose.yml
version: '3.8'

services:
  app:
    build: .
    ports:
      - "5000:5000"
    environment:
      - NODE_ENV=production
      - DATABASE_URL=postgresql://adlinkpro:password@db:5432/adlinkpro
      - JWT_SECRET=your-jwt-secret
      - SESSION_SECRET=your-session-secret
    depends_on:
      - db
      - redis
    restart: unless-stopped
    volumes:
      - ./logs:/app/logs

  db:
    image: postgres:15-alpine
    environment:
      - POSTGRES_DB=adlinkpro
      - POSTGRES_USER=adlinkpro
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: unless-stopped
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    restart: unless-stopped
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./certs:/etc/nginx/certs
    depends_on:
      - app
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
```

### **üîß Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Docker:**

```nginx
# nginx.conf
events {
    worker_connections 1024;
}

http {
    upstream app {
        server app:5000;
    }

    server {
        listen 80;
        server_name localhost;

        location / {
            proxy_pass http://app;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection 'upgrade';
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_cache_bypass $http_upgrade;
        }
    }
}
```

### **üöÄ –ö–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞ Docker:**

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose up --build -d

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec app npm run db:push

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f app

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
docker-compose down -v
```

---

## üìä **–ú–û–ù–ò–¢–û–†–ò–ù–ì –ò MAINTENANCE**

### **üìà –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ monitoring stack
npm install -g prometheus grafana pm2-prometheus-exporter

# PM2 –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
pm2 install pm2-server-monit
```

### **üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–µ–∫–∞–ø—ã:**

```bash
#!/bin/bash
# backup.sh

DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/var/backups/adlinkpro"

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –±–µ–∫–∞–ø–æ–≤
mkdir -p $BACKUP_DIR

# –ë–µ–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
pg_dump -U adlinkpro_user -h localhost adlinkpro > $BACKUP_DIR/db_backup_$DATE.sql

# –ë–µ–∫–∞–ø —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tar -czf $BACKUP_DIR/app_backup_$DATE.tar.gz /var/www/adlinkpro

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –±–µ–∫–∞–ø–æ–≤ (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
find $BACKUP_DIR -name "*.sql" -mtime +7 -delete
find $BACKUP_DIR -name "*.tar.gz" -mtime +7 -delete

echo "Backup completed: $DATE"
```

### **‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

```bash
# PostgreSQL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
# –í /etc/postgresql/15/main/postgresql.conf:

shared_buffers = 256MB
effective_cache_size = 1GB
maintenance_work_mem = 64MB
checkpoint_completion_target = 0.9
wal_buffers = 16MB
default_statistics_target = 100
random_page_cost = 1.1
effective_io_concurrency = 200
```

---

## ‚úÖ **–ß–ï–ö–õ–ò–°–¢ –ü–†–û–í–ï–†–ö–ò –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø**

### **üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl http://localhost:5000/api/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
psql -U adlinkpro_user -d adlinkpro -c "SELECT version();"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx
sudo nginx -t
curl -I http://your-domain.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL
curl -I https://your-domain.com
```

### **üìã –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç:**
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 5000
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [ ] Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] PM2 —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- [ ] –õ–æ–≥–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –ø–∏—à—É—Ç—Å—è
- [ ] –ë–µ–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] Firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üéØ **–ì–û–¢–û–í–´–ï –°–ö–†–ò–ü–¢–´ –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø**

### **üìù –ü–æ–ª–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è Ubuntu 20.04+:**

```bash
#!/bin/bash
# complete-deploy.sh - –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ AdLinkPro

set -e

echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º –ø–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ AdLinkPro..."

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
DOMAIN="your-domain.com"
DB_PASSWORD="$(openssl rand -base64 32)"
JWT_SECRET="$(openssl rand -base64 64)"
SESSION_SECRET="$(openssl rand -base64 64)"

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
apt-get install -y nodejs postgresql postgresql-contrib nginx certbot python3-certbot-nginx git

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
npm install -g pm2

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
adduser --system --group adlinkpro
mkdir -p /var/www/adlinkpro
chown adlinkpro:adlinkpro /var/www/adlinkpro

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
cd /var/www/adlinkpro
sudo -u adlinkpro git clone https://github.com/your-username/AdLinkPro.git .
sudo -u adlinkpro npm install
sudo -u adlinkpro npm run build

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
sudo -u postgres psql << EOF
CREATE DATABASE adlinkpro;
CREATE USER adlinkpro_user WITH ENCRYPTED PASSWORD '$DB_PASSWORD';
GRANT ALL PRIVILEGES ON DATABASE adlinkpro TO adlinkpro_user;
GRANT ALL ON SCHEMA public TO adlinkpro_user;
\q
EOF

# –°–æ–∑–¥–∞–Ω–∏–µ .env
cat << EOF > /var/www/adlinkpro/.env
NODE_ENV=production
DATABASE_URL=postgresql://adlinkpro_user:$DB_PASSWORD@localhost:5432/adlinkpro
JWT_SECRET=$JWT_SECRET
SESSION_SECRET=$SESSION_SECRET
PORT=5000
EOF

chown adlinkpro:adlinkpro /var/www/adlinkpro/.env

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
cd /var/www/adlinkpro
sudo -u adlinkpro npm run db:push

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PM2
sudo -u adlinkpro pm2 start npm --name "adlinkpro" -- start
sudo -u adlinkpro pm2 save
pm2 startup
env PATH=$PATH:/usr/bin pm2 startup systemd -u adlinkpro --hp /home/adlinkpro

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx
cat << EOF > /etc/nginx/sites-available/adlinkpro
server {
    listen 80;
    server_name $DOMAIN www.$DOMAIN;
    
    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade \$http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host \$host;
        proxy_cache_bypass \$http_upgrade;
    }
}
EOF

ln -s /etc/nginx/sites-available/adlinkpro /etc/nginx/sites-enabled/
nginx -t
systemctl reload nginx

# SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
certbot --nginx -d $DOMAIN -d www.$DOMAIN --non-interactive --agree-tos --email admin@$DOMAIN

# –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL
echo "0 12 * * * /usr/bin/certbot renew --quiet" | crontab -

echo "‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
echo "üåê –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω: https://$DOMAIN"
echo "üîê –ü–∞—Ä–æ–ª—å –ë–î: $DB_PASSWORD"
echo "üîë JWT Secret: $JWT_SECRET"
```

---

## üéâ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è AdLinkPro –≤ production —Å—Ä–µ–¥–µ. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –º–µ—Ç–æ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ —Å–ª–µ–¥—É–π—Ç–µ –ø–æ—à–∞–≥–æ–≤—ã–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º.

**–í–∞—à–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ AdLinkPro –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–π —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏!**